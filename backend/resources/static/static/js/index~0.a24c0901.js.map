{"version":3,"file":"static/js/index~0.a24c0901.js","sources":["webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/to-newest-tip/index.module.less?8fe0","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/to-newest-tip/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/components/get-thinking-placeholder-theme.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/wait-generating/index.modules.less?76b7","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/wait-generating/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/wrapper/index.module.less?554a","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/wrapper/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/constants/content.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/constants/file.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/constants/message.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/constants/scroll-list.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/after-init-service/after-init-service-context.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/after-init-service/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/chat-action-lock/chat-action-lock-context.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/chat-action-lock/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/chat-area-context/context.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/chat-area-context/type.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/chat-area-custom-component-context.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/chat-input-layout/context.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/chat-input-layout/provider.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/chat-input-props/context.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/chat-input-props/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/chat-input-props/provider.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/copywriting/copywriting-context.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/copywriting/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/drag-upload/context.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/drag-upload/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/drag-upload/provider.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/load-more/load-more-context.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/load-more/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/message-box/context.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/message-box/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/message-group/get-is-group-chat-active.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/message-box/provider.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/preference/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/preference/preference-context.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/scroll-view-context.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/scroll-view-size/context.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/scroll-view-size/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/store-set/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/upload-controller-context/context.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/upload-controller-context/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/context/load-more/get-load-request.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/context/load-more/use-prepare-load-more.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/context/load-more/listen-message-length-change.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/context/use-chat-area-context.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/context/use-chat-area-custom-component.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/context/use-chat-core.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/context/use-get-scroll-view.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/context/use-init-status.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/context/use-method-common-deps.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/dom/computed-style-to-number.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/dom/use-compute-scroll-view-size.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/file/use-delete-file.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/file/use-drag-upload.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/file/use-paste-upload.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/file/use-upload.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/file/use-validate-file-list.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/messages/use-anwer-message-helper.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/messages/use-clear-context.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/messages/use-clear-history.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/messages/use-delete-message-group.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/messages/use-is-clear-message-history-lock.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/messages/use-is-render-answer-action.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/mark-read/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/messages/use-mark-message-read.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/get-regenerate-message.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/message-group/regenerate-message.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/messages/use-send-message/file-message.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/messages/use-send-message/regenerate.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/builtin-asr-process.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/build-in-process-sent-message.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/messages/use-send-message/new-message.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/messages/use-send-message/text-message.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/messages/use-stop-responding.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/public/common.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/public/use-is-send-message-lock.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/public/use-messages-overview.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/public/use-onboarding-center-offset.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/public/use-select-onboarding.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/public/use-show-bgackground.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/public/use-unselect-all.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/uikit/use-background-scroll.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/uikit/use-builtin-button-status.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/uikit/use-display-user-info.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/uikit/use-event-callbacks.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/uikit/use-ui-kit-message-image-auto-size-config.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/constants/plugin.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/constants/plugin-name.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/batch-file-upload.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/upload-plugin.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/upload-controller.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/upload-controller-context/provider.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/suggestions.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/message-security-strategy.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/listen-message-update.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/extend-data-lifecycle/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/chat-input-layout/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-context/writeable-methods/create-section-id-methods.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/resume-message.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-context/writeable-methods/create-message-methods.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-context/subscribes/create-subscribe-waiting.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-context/subscribes/create-subscribe-selection.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-context/subscribes/create-subscribe-onboarding.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-context/subscribes/create-subscribe-message-meta.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-context/subscribes/create-subscribe-message.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-context/subscribes/create-subscribe-global-init-state.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-context/store-writeable-methods/onbaording-store.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-context/store-writeable-methods/messags-store.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-context/store-writeable-methods/message-index-store.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-context/store-readonly-methods/messages-store.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-context/store-readonly-methods/message-meta-store.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-context/store-readonly-methods/bot-info-store.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-context/store-readonly-methods/batch-upload-store.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-context/store-instant-values/create-section-id-instant-values.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-context/store-instant-values/create-get-messages-store-instant-values.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-context/store-instant-values/create-get-message-meta-store-instant-values.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-context/store-instant-values/create-get-global-init-store-instant-values.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-context/methods/create-message-methods.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-context/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/init-plugins.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/get-is-policy-exception.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/utils/is-writeable-plugin.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/life-cycle/render-life-cycle/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/life-cycle/create-plugin-benchmark.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/life-cycle/message-life-cycle/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/life-cycle/command-life-cycle/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/life-cycle/app-life-cycle/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/life-cycle/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/context/load-more/get-listen-process-chat-state-change.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/context/load-more/get-insert-messages.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/chat-area-context/helpers/generate-chat-core-props.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/plugins.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/init-service/pre-init-store.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/suggestions.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/sender-info.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/selection.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/section-id.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/onboarding.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/helpers/scan-meta-suggestions.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/helpers/mark-group-context-divider.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/helpers/get-default-distribute-merber-set-type.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/helpers/group-message-list.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/helpers/get-latest-message-group-context-divider.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/helpers/add-message-deduplicate.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/action-implement/messages/update-message.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/messages.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/helpers/split-section.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/helpers/mutate-meta-by-groups.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/helpers/hide-avatar.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/fucntion-call/get-is-function-calling.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/helpers/get-bot-state.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/helpers/get-meta-by-message.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/helpers/add-verbose-info.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/helpers/add-answer-location.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/message-meta.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/message-index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/global-init.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/file.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/chat-action.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/batch-upload-file.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/audio-ui.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-context/in-life-cycle-context/after-create-store-set/create-get-message-index-store-methods.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/init-service/init-store.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/init-service/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/chat-area-context/default-props.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/init/use-create-and-update-init-service.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/init/use-auto-update-user-info.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/chat-area-context/provider-new.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/context/chat-area-context/provider.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/context/use-chat-area.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/public/use-bot-info.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/controller/use-chat-area-controller.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/messages/use-latest-section-message.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/plugins/use-get-chatcore-plugin.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/hooks/use-plugin-public-methods.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/utils/is-readonly-plugin.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/hooks/use-plugin.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-class/service/life-cycle-service.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-class/service/app-life-cycle-service.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-class/service/message-life-cycle-service.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-class/service/command-life-cycle-service.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-class/plugin/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/plugin-class/service/render-life-cycle-service.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/utils/create-life-cycle-service.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/utils/create-custom-component.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/public/use-latest-section-id.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/hooks/public/use-is-delete-message-lock.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/context/plugin-scope-context.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/hooks/use-plugin-list.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/hooks/use-plugin-custom-components.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/report-events/report-event-names.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/chat-action-lock/helper/action-lock-map.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/chat-action-lock/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/fix-message/fix-history-message-list.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/fix-message/fix-image-message.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/fix-message/fix-message-struct.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/helper/parse-error-info.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/ignore-message/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/load-more/load-command.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/load-more/command/on-initial-load-effect.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/load-more/command/on-clear-history-effect.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/load-more/command/load-silently.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/load-more/command/load-passively.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/load-more/command/load-eagerly.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/load-more/command/load-by-scroll.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/load-more/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/load-more/helper/message-index-helper.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/load-more/helper/load-lock-error-helper.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/load-more/load-more-env-tools.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/service/send-message/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/action-implement/messages/get-message-index-range.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/types.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/store/waiting.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/array.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/components/get-receive-message-box-theme.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/event-bus/uikit-event-bus.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/exhaustive-check.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/fake-chat-core.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/file-manage.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/fucntion-call/function-message-unit.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/fucntion-call/types.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/get-new-conversation-dom-id.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/is-file-count-exceeds-limit.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/is-valid-context.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/local-log.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/message-group/flat-message-group-list.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/message-group/get-message-by-group.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/message-group/message-group-exhaustive-check.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/message-group/message-group.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/function-call-message-type.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/message.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/add-file-type.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/modify-file-message-percent-and-status.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/proxy-freeze.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/safe-json-parse.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/plugin/constants/life-cycle-context.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/stop-responding.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/upload.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/utils/verbose.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/request-manager/types.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/message/events/slardar-events.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/channel/http-chunk/utils.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/channel/http-chunk/events/slardar-events.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/channel/http-chunk/events/http-chunk-events.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/chat-sdk/types/interface.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/chat-sdk/events/sdk-events.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/chat-sdk/events/slardar-events.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/message/types/message-manager.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/shared/utils/data-handler.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/request-manager/api-error.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/request-manager/request-config.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/request-manager/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/shared/utils/env.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/report-log/slardar/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/report-log/log-options-helper.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/report-log/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/message/presend-local-message/presend-local-message-events-manager.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/shared/utils/safe-json-parse.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/message/message-manager.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/custom-error/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/message/presend-local-message/presend-local-message.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/message/presend-local-message/presend-local-message-factory.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/message/chunk-processor.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/channel/http-chunk/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/channel/constant.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/chat-sdk/services/send-message-service.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/chat-sdk/services/plugins-service.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/chat-sdk/services/message-manager-service.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/chat-sdk/services/http-chunk-service.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/chat-sdk/services/create-message-service.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/chat-sdk/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/credential/token-manager.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/message/types/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-core/src/shared/const.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit-shared/src/types/common.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit-shared/src/types/content.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit-shared/src/context/event-center/type.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit-shared/src/constants/file.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit-shared/src/context/event-center/hooks.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit-shared/src/context/event-center/context.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit-shared/src/context/event-center/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/utils/report-event.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/utils/local-cache/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/audio-record/audio-wave/utils.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/audio-record/audio-wave/index.module.less?8a99","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/audio-record/audio-wave/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/audio-record/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/context/onboarding/index.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/context/message-box/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/md-box-slots/link/utils.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/md-box-slots/link/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/utils/image/get-image-display-attribute.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/md-box-slots/coze-image.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/common/coze-md-box/lazy.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/utils/is-text.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/text-content/index.less?9125","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/text-content/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/utils/is-image.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/single-image-content/index.less?2f30","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/single-image-content/auto-size.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/utils/safe-json-parse.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/single-image-content/single-image-content-ui.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/single-image-content/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/utils/is-function-call.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/simple-function-content/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/plain-text-content/index.less?5ed8","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/plain-text-content/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/utils/multimodal.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/variants/message-box-inner-variants.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/multimodal-content/text-item-list.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/image-content/index.less?96a5","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/image-content/image-box.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/utils/make-fake-image-message.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/multimodal-content/image-item-list.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/common/tooltips/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/utils/file-name.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/utils/convert-bytes.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/file-content/components/FileCard/variants.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/file-content/components/FileCard/constants.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/file-content/components/FileCard/file-card.less?e68a","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/file-content/components/FileCard/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/multimodal-content/file-item-list.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/multimodal-content/index.less?a6be","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/multimodal-content/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/image-content/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/utils/is-file.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/file-content/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/utils/default-enable.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/constants/content-box.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/common/content-box/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/common/user-label/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/utils/date-time.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/common/message-content-time/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/hooks/use-observe-card-container.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/context/custom-components/custom-components-context.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/context/custom-components/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/common/message-box/variants.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/common/message-box/utils.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/common/message-box/fallback.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/common/message-box/default-avatar-wrap.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/common/message-box/message-box.less?ba99","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/common/message-box/message-box-wrap.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/common/message-box/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/common/button/index.module.less?1ab6","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/common/button/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/hooks/use-audio-record-interaction.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/chat-upload/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/chat-input/use-text-area.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/chat-input/components/send-button/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/chat-input/components/more-button/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/chat-input/components/clear-history-button/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/chat-input/components/clear-context-button/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/chat-input/index.module.less?28c4","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/chat-input/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/suggestion-content/components/suggestion-item/variants.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/suggestion-content/components/suggestion-item/index.less?d4d0","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/contents/suggestion-content/components/suggestion-item/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/constants/grab.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/on-boarding/variants.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/on-boarding/index.less?2e2d","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/on-boarding/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/stop-respond-button/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/thinking-placeholder/variant.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/thinking-placeholder/animation.less?159b","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/thinking-placeholder/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/with-rule-img-background/const.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/with-rule-img-background/utils.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/with-rule-img-background/hooks/use-get-background-info.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/with-rule-img-background/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/common/full-width-aligner/index.less?e0c2","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/common/full-width-aligner/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/common/to-newest-tip/animation.less?d6ab","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/common/to-newest-tip/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/context/local-cache/local-cache-context.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/constants/message-box.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/audio-record/audio-static-toast/variant.ts","webpack://@coze-studio/app/../../packages/common/chat-area/chat-uikit/src/components/chat/audio-record/audio-static-toast/index.tsx","webpack://@coze-studio/app/../../packages/common/chat-area/hooks/src/hooks/use-imperative-layout-effect.ts","webpack://@coze-studio/app/../../packages/common/chat-area/hooks/src/hooks/use-event-callback.ts","webpack://@coze-studio/app/../../packages/common/chat-area/utils/src/perform-simple-type-check.ts","webpack://@coze-studio/app/../../packages/common/chat-area/utils/src/json-parse.ts","webpack://@coze-studio/app/../../packages/common/chat-area/utils/src/get-report-error.ts","webpack://@coze-studio/app/../../packages/common/chat-area/utils/src/safe-async-throw.ts","webpack://@coze-studio/app/../../packages/common/chat-area/utils/src/update-only-defined.ts","webpack://@coze-studio/app/../../packages/common/chat-area/utils/src/int64.ts","webpack://@coze-studio/app/../../packages/common/chat-area/utils/src/async.ts","webpack://@coze-studio/app/../../packages/common/chat-area/utils/src/collection.ts","webpack://@coze-studio/app/../../packages/common/chat-area/utils/src/exhaustive-check.ts","webpack://@coze-studio/app/../../packages/common/chat-area/utils/src/rate-limit.ts","webpack://@coze-studio/app/../../packages/common/chat-area/utils/src/parse-markdown/parse-markdown-to-text.ts","webpack://@coze-studio/app/../../packages/common/coze-mitt/src/index.ts","webpack://@coze-studio/app/../../packages/common/flowgram-adapter/free-layout-editor/src/workflow-json-format.ts","webpack://@coze-studio/app/../../packages/common/flowgram-adapter/free-layout-editor/src/use-entity.ts","webpack://@coze-studio/app/../../packages/common/uploader-adapter/src/index.ts","webpack://@coze-studio/app/../../packages/common/websocket-manager-adapter/src/index.tsx","webpack://@coze-studio/app/../../packages/components/biz-tooltip-ui/src/components/setting-tips/index.module.less?ecf7","webpack://@coze-studio/app/../../packages/components/biz-tooltip-ui/src/components/setting-tips/case-block.tsx","webpack://@coze-studio/app/../../packages/components/biz-tooltip-ui/src/components/setting-tips/rewrite-tips.tsx","webpack://@coze-studio/app/../../packages/components/biz-tooltip-ui/src/components/setting-tips/rerank-tips.tsx","webpack://@coze-studio/app/../../packages/components/bot-icons/src/factory.tsx","webpack://@coze-studio/app/../../packages/components/bot-icons/src/index.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-input/index.module.less?3c54","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-input/index.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-button/index.module.less?5c8e","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-button/index.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-form/input/index.module.less?307e","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-form/input/index.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-form/text-area/index.module.less?e4a6","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-form/text-area/index.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-select/index.module.less?641e","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-select/index.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-form/select/index.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-table/index.module.less?e920","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-table/index.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-icon-button/index.module.less?8f3a","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-icon-button/index.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-table-action/index.module.less?fcac","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-table-action/index.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-table-meta/index.module.less?21e2","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-pagination/index.module.less?f20b","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-header/index.module.less?62fe","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-footer/index.module.less?7034","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-content/index.module.less?a01d","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-content/index.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-layout/index.module.less?e6e5","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-layout/index.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-header/index.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-footer/index.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-tab-bar/index.module.less?eee6","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-tab-bar/index.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-modal/index.module.less?5913","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-modal/ui-modal.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-modal/ui-composition-modal.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-modal/ui-mobile-modal.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-modal/hooks.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-modal/ui-tabs-modal/index.module.less?bd7e","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-modal/ui-tabs-modal/index.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/hooks/use-grab.ts","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-modal/ui-drag-modal.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/utils/env.ts","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-sign/index.module.less?f74b","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-sign/sign-frame.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-sign/sign-panel.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-empty/index.module.less?119d","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-empty/index.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-tag/index.module.less?cd1a","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-tag/index.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-cascader/index.module.less?5af4","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-cascader/index.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-toast/index.module.less?c55f","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-toast/index.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-dropdown/index.module.less?96c2","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-dropdown/index.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-audio/index.module.less?3805","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-drawer/index.module.less?b2c0","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-search-input/index.tsx","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-search/index.module.less?5e15","webpack://@coze-studio/app/../../packages/components/bot-semi/src/components/ui-search/index.tsx","webpack://@coze-studio/app/../../packages/components/json-viewer/src/types.ts","webpack://@coze-studio/app/../../packages/components/json-viewer/src/constants.ts","webpack://@coze-studio/app/../../packages/components/json-viewer/src/utils/big-number.ts","webpack://@coze-studio/app/../../packages/components/json-viewer/src/utils/generate-field.ts","webpack://@coze-studio/app/../../packages/components/json-viewer/src/context.tsx","webpack://@coze-studio/app/../../packages/components/json-viewer/src/components/text-field.tsx","webpack://@coze-studio/app/../../packages/components/json-viewer/src/components/line/index.module.less?b511","webpack://@coze-studio/app/../../packages/components/json-viewer/src/components/line/index.tsx","webpack://@coze-studio/app/../../packages/components/json-viewer/src/utils/generate-str-to-link.tsx","webpack://@coze-studio/app/../../packages/components/json-viewer/src/utils/generate-str-avoid-escape.ts","webpack://@coze-studio/app/../../packages/components/json-viewer/src/components/long-str-value.tsx","webpack://@coze-studio/app/../../packages/components/json-viewer/src/hooks/use-value.tsx","webpack://@coze-studio/app/../../packages/components/json-viewer/src/hooks/use-expand.ts","webpack://@coze-studio/app/../../packages/components/json-viewer/src/components/json-field/json-field.module.less?24db","webpack://@coze-studio/app/../../packages/components/json-viewer/src/components/json-field/index.tsx","webpack://@coze-studio/app/../../packages/components/json-viewer/src/index.module.less?5bb4","webpack://@coze-studio/app/../../packages/components/json-viewer/src/index.tsx","webpack://@coze-studio/app/../../packages/components/scroll-view/src/scroll-view/type.ts","webpack://@coze-studio/app/../../packages/components/scroll-view/src/utils/is-apple-webkit.ts","webpack://@coze-studio/app/../../packages/components/scroll-view/src/scroll-view/utils.ts","webpack://@coze-studio/app/../../packages/components/scroll-view/src/scroll-view/index.module.less?9e1b","webpack://@coze-studio/app/../../packages/components/scroll-view/src/scroll-view/hooks.ts","webpack://@coze-studio/app/../../packages/components/scroll-view/src/scroll-view/consts.ts","webpack://@coze-studio/app/../../packages/components/scroll-view/src/scroll-view/context.tsx","webpack://@coze-studio/app/../../packages/components/scroll-view/src/scroll-view/index.tsx","webpack://@coze-studio/app/../../packages/components/table-view/src/components/types.ts","webpack://@coze-studio/app/../../packages/components/table-view/src/components/renders/index.module.less?b93a","webpack://@coze-studio/app/../../packages/components/table-view/src/components/renders/text-render.tsx","webpack://@coze-studio/app/../../packages/components/table-view/src/components/renders/tag-render.tsx","webpack://@coze-studio/app/../../packages/components/table-view/src/components/renders/actions-render.tsx","webpack://@coze-studio/app/../../packages/components/table-view/src/components/renders/image-render/utils.ts","webpack://@coze-studio/app/../../packages/components/table-view/src/components/renders/image-render/use-image-preview.tsx","webpack://@coze-studio/app/../../packages/components/table-view/src/components/renders/image-render/index.tsx","webpack://@coze-studio/app/../../packages/components/table-view/src/components/table-view/utils.tsx","webpack://@coze-studio/app/../../packages/components/table-view/src/components/table-view/service.ts","webpack://@coze-studio/app/../../packages/components/table-view/src/components/table-view/index.module.less?8b91","webpack://@coze-studio/app/../../packages/components/table-view/src/components/table-view/edit-menu.tsx","webpack://@coze-studio/app/../../packages/components/table-view/src/components/table-view/index.tsx","webpack://@coze-studio/app/../../packages/data/common/e2e/src/bot-e2e.ts","webpack://@coze-studio/app/../../packages/data/common/e2e/src/common-e2e.ts","webpack://@coze-studio/app/../../packages/data/common/e2e/src/knowledge-e2e.ts","webpack://@coze-studio/app/../../packages/data/common/reporter/src/constants.ts","webpack://@coze-studio/app/../../packages/data/common/reporter/src/components/error-boundary/index.module.less?98ed","webpack://@coze-studio/app/../../packages/data/common/reporter/src/components/error-boundary/error-boundary.tsx","webpack://@coze-studio/app/../../packages/data/common/reporter/src/reporter/utils.ts","webpack://@coze-studio/app/../../packages/data/common/reporter/src/reporter/data-reporter.ts","webpack://@coze-studio/app/../../packages/data/common/utils/src/types.ts","webpack://@coze-studio/app/../../packages/data/common/utils/src/knowledge-page.ts","webpack://@coze-studio/app/../../packages/data/common/utils/src/feishu-lark.ts","webpack://@coze-studio/app/../../packages/data/common/utils/src/update-interval.ts","webpack://@coze-studio/app/../../packages/data/common/utils/src/components/singleline-select/index.module.less?b7a0","webpack://@coze-studio/app/../../packages/data/common/utils/src/components/singleline-select/index.tsx","webpack://@coze-studio/app/../../packages/data/common/utils/src/components/data-type-select/index.tsx","webpack://@coze-studio/app/../../packages/data/common/utils/src/components/input-with-count/index.module.less?7753","webpack://@coze-studio/app/../../packages/data/common/utils/src/components/input-with-count/index.tsx","webpack://@coze-studio/app/../../packages/data/common/utils/src/components/text-area/index.module.less?1f05","webpack://@coze-studio/app/../../packages/data/common/utils/src/components/text-area/index.tsx","webpack://@coze-studio/app/../../packages/data/common/utils/src/abortable.ts","webpack://@coze-studio/app/../../packages/data/common/utils/src/hooks/index.module.less?bd68","webpack://@coze-studio/app/../../packages/data/common/utils/src/hooks/use-data-modal.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/common/stores/src/processing-knowledge.ts","webpack://@coze-studio/app/../../packages/data/knowledge/common/stores/src/params-store.ts","webpack://@coze-studio/app/../../packages/data/knowledge/common/stores/src/knowledge-preview.ts","webpack://@coze-studio/app/../../packages/data/knowledge/common/stores/src/context.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/common/stores/src/hooks.ts","webpack://@coze-studio/app/../../packages/data/knowledge/common/stores/src/storage-strategy-slice.ts","webpack://@coze-studio/app/../../packages/data/knowledge/common/stores/src/level-segments-slice.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-data-set-for-agent/src/store/data-set.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-ide-base/src/types/index.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/create-knowledge-modal-v2/features/select-format-type/base/index.module.less?dfed","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/create-knowledge-modal-v2/features/select-format-type/base/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/create-knowledge-modal-v2/components/source-radio/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/create-knowledge-modal-v2/features/import-knowledge-source/text-local/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/create-knowledge-modal-v2/features/import-knowledge-source/text-custom/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/create-knowledge-modal-v2/components/source-select/index.module.less?c747","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/create-knowledge-modal-v2/components/source-select/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/create-knowledge-modal-v2/features/import-knowledge-source-select/base/text-knowledge-source-select.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/create-knowledge-modal-v2/features/import-knowledge-source/table-local/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/create-knowledge-modal-v2/features/import-knowledge-source/table-custom/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/create-knowledge-modal-v2/features/import-knowledge-source-select/base/table-knowledge-source-select.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/create-knowledge-modal-v2/features/import-knowledge-source/image-local/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/create-knowledge-modal-v2/features/import-knowledge-source-select/base/image-knowledge-source-select.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/create-knowledge-modal-v2/features/import-knowledge-source-select/base/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/create-knowledge-modal-v2/features/add-type-content/coze-knowledge/index.module.less?4e31","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/create-knowledge-modal-v2/features/add-type-content/coze-knowledge/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-adapter/src/create-knowledge-modal-v2/scenes/base/index.module.less?6def","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-adapter/src/create-knowledge-modal-v2/scenes/base/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-adapter/src/knowledge-list-modal/scenes/base/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-adapter/src/knowledge-list-modal/scenes/base/use-content.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/table-segment-modal/hooks.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/knowledge-list-modal/use-knowledge-filter/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/constant.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/edit-knowledge-modal/index.module.less?ad3d","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/edit-knowledge-modal/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/rag-mode-configuration/utils.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/rag-mode-configuration/index.module.less?7c18","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/rag-mode-configuration/slider-setting.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/rag-mode-configuration/title-area.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/rag-mode-configuration/setting-item.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/rag-mode-configuration/radio-group-setting.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/rag-mode-configuration/constant.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/rag-mode-configuration/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/slice-delete-modal/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/delete-unit-modal/hooks.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/utils/common.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/utils/slice.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/table-segment-modal/index.module.less?5d40","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/table-segment-modal/modal.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/knowledge-list-modal/use-knowledge-filter/index.module.less?f351","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/knowledge-list-modal/knowledge-card-list/components/file-popover/index.module.less?40c4","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/knowledge-list-modal/knowledge-card-list/components/file-popover/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/knowledge-list-modal/knowledge-card-list/index.module.less?16bc","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/knowledge-list-modal/knowledge-card-list/vertical.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/knowledge-list-modal/index.module.less?c24c","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/knowledge-list-modal/use-content.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/knowledge-list-modal/sider-category.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/knowledge-list-modal/knowledge-card/index.module.less?c044","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/knowledge-list-modal/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/update-frequency-modal/hooks.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/batch-checkbox-doc/const.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/batch-checkbox-doc/index.module.less?1046","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/batch-frequency-modal/index.module.less?1efd","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/batch-fetch-modal/index.module.less?f61c","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/text-resegment-modal/index.module.less?a190","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/edit-unit-name-modal/hooks.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-modal-base/src/set-append-frequency-modal/components/account-frequency-item.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-core/src/constants/common.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-core/src/context.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-core/src/index.module.less?2ed1","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-core/src/main.tsx","webpack://@coze-studio/app/../../packages/data/memory/llm-plugins/src/plugins/recall-slices/helpers/filter-unnecessary-content-from-slice.ts","webpack://@coze-studio/app/../../packages/data/memory/llm-plugins/src/plugins/recall-slices/index.module.less?229a","webpack://@coze-studio/app/../../packages/data/memory/llm-plugins/src/plugins/recall-slices/index.tsx","webpack://@coze-studio/app/../../packages/foundation/account-base/src/store/user.ts","webpack://@coze-studio/app/../../packages/foundation/account-base/src/hooks/index.ts","webpack://@coze-studio/app/../../packages/foundation/account-base/src/hooks/use-sync-local-storage-uid.ts","webpack://@coze-studio/app/../../packages/foundation/account-base/src/utils/index.ts","webpack://@coze-studio/app/../../packages/foundation/account-base/src/utils/factory.ts","webpack://@coze-studio/app/../../packages/foundation/account-base/src/hooks/factory.ts","webpack://@coze-studio/app/../../packages/foundation/account-adapter/src/passport-api/index.ts","webpack://@coze-studio/app/../../packages/foundation/account-adapter/src/utils/index.ts","webpack://@coze-studio/app/../../packages/foundation/account-adapter/src/hooks/index.ts","webpack://@coze-studio/app/../../packages/foundation/account-adapter/src/utils/constants.ts","webpack://@coze-studio/app/../../packages/foundation/account-ui-adapter/src/pages/login-page/service.ts","webpack://@coze-studio/app/../../packages/foundation/account-ui-adapter/src/pages/login-page/favicon.tsx","webpack://@coze-studio/app/../../packages/foundation/account-ui-adapter/src/pages/login-page/index.tsx","webpack://@coze-studio/app/../../packages/foundation/account-ui-base/src/hooks/logout.tsx","webpack://@coze-studio/app/../../packages/foundation/account-ui-base/src/components/loading-container.tsx","webpack://@coze-studio/app/../../packages/foundation/account-ui-base/src/components/require-auth-container/index.tsx","webpack://@coze-studio/app/../../packages/foundation/account-ui-base/src/components/user-info-panel/username-input/index.module.less?e969","webpack://@coze-studio/app/../../packages/foundation/account-ui-base/src/components/user-info-panel/username-input/index.tsx","webpack://@coze-studio/app/../../packages/foundation/account-ui-base/src/components/user-info-panel/index.module.less?2d28","webpack://@coze-studio/app/../../packages/foundation/account-ui-base/src/components/user-info-panel/user-info-field.tsx","webpack://@coze-studio/app/../../packages/foundation/account-ui-base/src/components/user-info-panel/index.tsx","webpack://@coze-studio/app/../../packages/foundation/account-ui-base/src/hooks/use-account-settings/use-modal.tsx","webpack://@coze-studio/app/../../packages/foundation/account-ui-base/src/hooks/use-account-settings/index.module.less?93b0","webpack://@coze-studio/app/../../packages/foundation/account-ui-base/src/hooks/use-account-settings/index.tsx","webpack://@coze-studio/app/../../packages/foundation/enterprise-store-adapter/src/stores/enterprise.ts","webpack://@coze-studio/app/../../packages/foundation/enterprise-store-adapter/src/constants.ts","webpack://@coze-studio/app/../../packages/foundation/enterprise-store-adapter/src/hooks/use-current-enterprise-info.ts","webpack://@coze-studio/app/../../packages/foundation/foundation-sdk/src/passport.ts","webpack://@coze-studio/app/../../packages/foundation/foundation-sdk/src/user.ts","webpack://@coze-studio/app/../../packages/foundation/foundation-sdk/src/space.ts","webpack://@coze-studio/app/../../packages/foundation/browser-upgrade-banner/src/constants/index.ts","webpack://@coze-studio/app/../../packages/foundation/browser-upgrade-banner/src/utils/index.ts","webpack://@coze-studio/app/../../packages/foundation/browser-upgrade-banner/src/utils/compare-version.ts","webpack://@coze-studio/app/../../packages/foundation/browser-upgrade-banner/src/components/browser-upgrade-wrap/index.module.less?53b9","webpack://@coze-studio/app/../../packages/foundation/browser-upgrade-banner/src/components/browser-upgrade-wrap/index.tsx","webpack://@coze-studio/app/../../packages/foundation/global/src/hooks/use-create-bot-action.tsx","webpack://@coze-studio/app/../../packages/foundation/global-adapter/src/components/account-dropdown/user-info-menu.tsx","webpack://@coze-studio/app/../../packages/foundation/global-adapter/src/components/account-dropdown/account-settings/index.tsx","webpack://@coze-studio/app/../../packages/foundation/global-adapter/src/components/account-dropdown/index.tsx","webpack://@coze-studio/app/../../packages/foundation/global-adapter/src/components/global-layout-composed/hooks/use-has-sider.ts","webpack://@coze-studio/app/../../packages/foundation/global-adapter/src/components/global-layout-composed/index.tsx","webpack://@coze-studio/app/../../packages/foundation/global-adapter/src/components/global-layout/index.tsx","webpack://@coze-studio/app/../../packages/foundation/global/src/hooks/use-app-init/use-alert-on-logout.ts","webpack://@coze-studio/app/../../packages/foundation/global-adapter/src/hooks/use-app-init/use-responsive-body-style.ts","webpack://@coze-studio/app/../../packages/foundation/global-adapter/src/hooks/use-app-init/use-reset-store-on-logout.ts","webpack://@coze-studio/app/../../packages/foundation/global-adapter/src/hooks/use-app-init/use-init-common-config.ts","webpack://@coze-studio/app/../../packages/foundation/global-adapter/src/hooks/use-app-init/index.ts","webpack://@coze-studio/app/../../packages/foundation/global-store/src/stores/common-config-store.ts","webpack://@coze-studio/app/../../packages/foundation/layout/src/store/bot-mobile/index.ts","webpack://@coze-studio/app/../../packages/foundation/layout/src/hooks/use-mobile-tips/index.module.less?92c9","webpack://@coze-studio/app/../../packages/foundation/layout/src/hooks/use-mobile-tips/index.tsx","webpack://@coze-studio/app/../../packages/foundation/layout/src/components/global-layout/context.tsx","webpack://@coze-studio/app/../../packages/foundation/layout/src/components/global-layout/hooks.ts","webpack://@coze-studio/app/../../packages/foundation/layout/src/components/global-error/index.module.less?62e7","webpack://@coze-studio/app/../../packages/foundation/layout/src/components/global-error/index.tsx","webpack://@coze-studio/app/../../packages/foundation/layout/src/components/back-button/index.module.less?cac8","webpack://@coze-studio/app/../../packages/foundation/layout/src/components/back-button/index.tsx","webpack://@coze-studio/app/../../packages/foundation/layout/src/components/global-layout/side-sheet.module.less?2e43","webpack://@coze-studio/app/../../packages/foundation/layout/src/components/global-layout/component/sub-menu.tsx","webpack://@coze-studio/app/../../packages/foundation/layout/src/components/global-layout/utils.ts","webpack://@coze-studio/app/../../packages/foundation/layout/src/components/global-layout/component/menu-item.tsx","webpack://@coze-studio/app/../../packages/foundation/layout/src/components/global-layout/component/action-btn.tsx","webpack://@coze-studio/app/../../packages/foundation/layout/src/components/global-layout/component/sider.tsx","webpack://@coze-studio/app/../../packages/foundation/layout/src/components/global-layout/index.tsx","webpack://@coze-studio/app/../../packages/foundation/layout/src/components/account-dropdown/index.module.less?103c","webpack://@coze-studio/app/../../packages/foundation/layout/src/components/account-dropdown/index.tsx","webpack://@coze-studio/app/../../packages/foundation/local-storage/src/config.ts","webpack://@coze-studio/app/../../packages/foundation/local-storage/src/utils/parse.ts","webpack://@coze-studio/app/../../packages/foundation/local-storage/src/core/index.ts","webpack://@coze-studio/app/../../packages/foundation/space-store-adapter/src/space/const.ts","webpack://@coze-studio/app/../../packages/foundation/space-store-adapter/src/space/utils.ts","webpack://@coze-studio/app/../../packages/foundation/space-store-adapter/src/space/index.ts","webpack://@coze-studio/app/../../packages/foundation/space-store/src/space/hooks.ts","webpack://@coze-studio/app/../../packages/foundation/space-store/src/hooks/use-space-app.ts","webpack://@coze-studio/app/../../packages/foundation/space-ui-adapter/src/const.ts","webpack://@coze-studio/app/../../packages/foundation/space-ui-adapter/src/hooks/use-create-space.module.less?f669","webpack://@coze-studio/app/../../packages/foundation/space-ui-adapter/src/hooks/use-create-space.tsx","webpack://@coze-studio/app/../../packages/foundation/space-ui-adapter/src/components/workspace-sub-menu/index.tsx","webpack://@coze-studio/app/../../packages/foundation/space-ui-adapter/src/hooks/use-init-space.ts","webpack://@coze-studio/app/../../packages/foundation/space-ui-adapter/src/components/space-layout/index.tsx","webpack://@coze-studio/app/../../packages/foundation/space-ui-base/src/components/workspace-sub-menu/components/workspace-list-item.tsx","webpack://@coze-studio/app/../../packages/foundation/space-ui-base/src/components/workspace-sub-menu/components/workspace-list.tsx","webpack://@coze-studio/app/../../packages/foundation/space-ui-base/src/components/workspace-sub-menu/components/favorites-list-item.tsx","webpack://@coze-studio/app/../../packages/foundation/space-ui-base/src/components/workspace-sub-menu/components/favorites-list.tsx","webpack://@coze-studio/app/../../packages/foundation/space-ui-base/src/components/workspace-sub-menu/index.tsx","webpack://@coze-studio/app/../../packages/foundation/space-ui-base/src/components/space-id-layout.tsx","webpack://@coze-studio/app/../../packages/foundation/space-ui-base/src/components/space-switcher-dropdown/index.tsx","webpack://@coze-studio/app/../../packages/foundation/space-ui-base/src/hooks/use-init-space.ts","webpack://@coze-studio/app/../../packages/studio/bot-utils/src/with-slardar-id-button.tsx","webpack://@coze-studio/app/../../packages/studio/common/file-kit/src/const.ts","webpack://@coze-studio/app/../../packages/studio/common/file-kit/src/file-type.ts","webpack://@coze-studio/app/../../packages/studio/common/file-kit/src/util.ts","webpack://@coze-studio/app/../../packages/studio/components/src/coze-brand/index.module.less?71a5","webpack://@coze-studio/app/../../packages/studio/components/src/coze-brand/index.tsx","webpack://@coze-studio/app/../../packages/studio/components/src/generate-img-tab/index.tsx","webpack://@coze-studio/app/../../packages/studio/components/src/avatar-background-notice-dot/index.module.less?507a","webpack://@coze-studio/app/../../packages/studio/components/src/avatar-background-notice-dot/index.tsx","webpack://@coze-studio/app/../../packages/studio/components/src/image-list/index.module.less?a476","webpack://@coze-studio/app/../../packages/studio/components/src/generate-button/index.module.less?e167","webpack://@coze-studio/app/../../packages/studio/components/src/input-with-count/index.tsx","webpack://@coze-studio/app/../../packages/studio/components/src/ui-breadcrumb/bread-crumb.tsx","webpack://@coze-studio/app/../../packages/studio/components/src/ui-search/index.tsx","webpack://@coze-studio/app/../../packages/studio/components/src/popover-content/index.tsx","webpack://@coze-studio/app/../../packages/studio/components/src/select-space-modal/index.tsx","webpack://@coze-studio/app/../../packages/studio/components/src/duplicate-bot/index.tsx","webpack://@coze-studio/app/../../packages/studio/components/src/card-thumbnail-popover/index.module.less?1eb7","webpack://@coze-studio/app/../../packages/studio/components/src/card-thumbnail-popover/index.tsx","webpack://@coze-studio/app/../../packages/studio/components/src/avatar-name/index.module.less?b399","webpack://@coze-studio/app/../../packages/studio/components/src/avatar-name/index.tsx","webpack://@coze-studio/app/../../packages/studio/components/src/carousel/carousel-item/index.module.less?f0b1","webpack://@coze-studio/app/../../packages/studio/components/src/carousel/index.module.less?4daa","webpack://@coze-studio/app/../../packages/studio/components/src/generate-img-tab/index.module.less?877e","webpack://@coze-studio/app/../../packages/studio/components/src/flow-shortcuts-help/constants.ts","webpack://@coze-studio/app/../../packages/studio/components/src/flow-shortcuts-help/index.module.less?1dcf","webpack://@coze-studio/app/../../packages/studio/components/src/flow-shortcuts-help/index.tsx","webpack://@coze-studio/app/../../packages/studio/components/src/resizable-layout/handle.tsx","webpack://@coze-studio/app/../../packages/studio/components/src/resizable-layout/index.tsx","webpack://@coze-studio/app/../../packages/studio/components/src/input-controls/input-slider/index.tsx","webpack://@coze-studio/app/../../packages/studio/components/src/tea-exposure/index.tsx","webpack://@coze-studio/app/../../packages/studio/components/src/space-form-select/index.tsx","webpack://@coze-studio/app/../../packages/studio/components/src/project-duplicate-modal/utils.ts","webpack://@coze-studio/app/../../packages/studio/components/src/project-duplicate-modal/index.tsx","webpack://@coze-studio/app/../../packages/studio/entity-adapter/src/hooks/use-create-or-update-agent/index.tsx","webpack://@coze-studio/app/../../packages/studio/entity-adapter/src/hooks/use-create-agent.tsx","webpack://@coze-studio/app/../../packages/studio/entity-adapter/src/hooks/use-update-agent.tsx","webpack://@coze-studio/app/../../packages/studio/open-platform/open-auth/src/utils/time.ts","webpack://@coze-studio/app/../../packages/studio/open-platform/open-auth/src/hooks/pat/use-token.ts","webpack://@coze-studio/app/../../packages/studio/open-platform/open-auth/src/hooks/pat/action/use-pat-operation.ts","webpack://@coze-studio/app/../../packages/studio/open-platform/open-auth/src/components/instructions-wrap/index.tsx","webpack://@coze-studio/app/../../packages/studio/open-platform/open-auth/src/components/pat/top-body/index.tsx","webpack://@coze-studio/app/../../packages/studio/open-platform/open-auth/src/components/pat/result-modal/index.tsx","webpack://@coze-studio/app/../../packages/studio/open-platform/open-auth/src/hooks/pat/action/use-pat-form.ts","webpack://@coze-studio/app/../../packages/studio/open-platform/open-auth/src/components/pat/permission-modal/common-form-params/index.tsx","webpack://@coze-studio/app/../../packages/studio/open-platform/open-auth/src/components/pat/permission-modal/index.tsx","webpack://@coze-studio/app/../../packages/studio/open-platform/open-auth/src/hooks/use-table-height.ts","webpack://@coze-studio/app/../../packages/studio/open-platform/open-auth/src/components/auth-table/index.tsx","webpack://@coze-studio/app/../../packages/studio/open-platform/open-auth/src/components/pat/data-table/table-column/column-status.tsx","webpack://@coze-studio/app/../../packages/studio/open-platform/open-auth/src/components/pat/data-table/table-column/column-op.tsx","webpack://@coze-studio/app/../../packages/studio/open-platform/open-auth/src/components/pat/data-table/table-column/column-name.tsx","webpack://@coze-studio/app/../../packages/studio/open-platform/open-auth/src/components/pat/data-table/table-column/column-last-use-at.tsx","webpack://@coze-studio/app/../../packages/studio/open-platform/open-auth/src/components/pat/data-table/table-column/column-expire-at.tsx","webpack://@coze-studio/app/../../packages/studio/open-platform/open-auth/src/components/pat/data-table/table-column/column-create-at.tsx","webpack://@coze-studio/app/../../packages/studio/open-platform/open-auth/src/components/pat/data-table/table-column/index.tsx","webpack://@coze-studio/app/../../packages/studio/open-platform/open-auth/src/components/pat/data-table/index.tsx","webpack://@coze-studio/app/../../packages/studio/open-platform/open-auth/src/components/pat/index.tsx","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/types/generate-image.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/utils/get-read-only.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/store/generate-image-store.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/utils/avatar-background-socket/index.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/hooks/use-bot-detail-readonly.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/utils/handle-status.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/store/monetize-config-store.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/store/audit-info.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/store/index.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/services/get-bot-data-service.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/init/init-bot-detail-store.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/utils/submit.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/utils/handle-agent.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/hooks/use-chat-background-state.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/utils/get-dot-status.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/utils/generate-image.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/init/init-generate-image.ts","webpack://@coze-studio/app/../../packages/studio/autosave/src/type/index.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/types.ts","webpack://@coze-studio/app/../../packages/studio/autosave/src/utils/index.ts","webpack://@coze-studio/app/../../packages/studio/autosave/src/core/observer.ts","webpack://@coze-studio/app/../../packages/studio/autosave/src/core/manager.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/auto-save/request.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/auto-save/persona/config.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/auto-save/persona/index.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/auto-save/model/config.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/auto-save/model/index.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/auto-save/bot-skill/configs/workflows.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/auto-save/bot-skill/configs/voices-info.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/auto-save/bot-skill/configs/variables.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/auto-save/bot-skill/configs/task-info.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/auto-save/bot-skill/configs/suggestion-config.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/auto-save/bot-skill/configs/plugin.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/auto-save/bot-skill/configs/onboarding-content.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/auto-save/bot-skill/configs/layout-info.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/auto-save/bot-skill/configs/knowledge.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/auto-save/bot-skill/configs/chat-background.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/auto-save/bot-skill/index.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/auto-save/bot-skill/configs/index.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/auto-save/index.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/auto-save/multi-agent/config.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/auto-save/multi-agent/index.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/manual-save/memory-table.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/manual-save/shortcuts.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/utils/bot-dto-info.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/save-manager/utils/save-fetcher.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/store/bot-info.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/store/bot-skill/defaults.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/store/bot-skill/store.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/store/bot-skill/transform.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/store/collaboration.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/store/diff-task.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/store/manually-switch-agent-store.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/store/model.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/store/multi-agent/defaults.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/store/multi-agent/transform.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/store/multi-agent/store.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/store/page-runtime/defaults.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/store/page-runtime/store.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/store/persona.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/store/query-collect.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/types/skill.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/utils/find-agent.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/utils/plugin-apis.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/utils/setter-factory.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/utils/storage.ts","webpack://@coze-studio/app/../../packages/studio/stores/bot-detail/src/utils/uniq-memory-list.ts","webpack://@coze-studio/app/../../packages/studio/user-store/src/index.ts","webpack://@coze-studio/app/../../packages/studio/workspace/project-entity-base/src/utils/common-project-form-valid.ts","webpack://@coze-studio/app/../../packages/studio/workspace/project-entity-base/src/hooks/use-project-form-submit-state.ts","webpack://@coze-studio/app/../../packages/studio/workspace/project-entity-base/src/hooks/use-project-template-copy-modal.tsx","webpack://@coze-studio/app/../../packages/studio/workspace/project-entity-base/src/components/project-template-modal/template-components/project-template-group.tsx","webpack://@coze-studio/app/../../packages/studio/workspace/project-entity-base/src/components/project-template-modal/template-components/skeleton.tsx","webpack://@coze-studio/app/../../packages/studio/workspace/project-entity-base/src/components/project-template-modal/template-components/project-template-card.tsx","webpack://@coze-studio/app/../../packages/studio/workspace/project-entity-base/src/components/project-template-modal/template-components/create-empty-project-ui.tsx","webpack://@coze-studio/app/../../packages/studio/workspace/project-entity-base/src/components/project-template-modal/index.tsx","webpack://@coze-studio/app/../../packages/studio/workspace/project-entity-base/src/components/project-form/index.tsx","webpack://@coze-studio/app/../../packages/studio/workspace/project-entity-base/src/components/switch-with-desc/index.tsx","webpack://@coze-studio/app/../../packages/studio/workspace/project-entity-base/src/components/project-form-modal/index.tsx","webpack://@coze-studio/app/../../packages/studio/workspace/project-entity-base/src/hooks/use-hidden-session.ts","webpack://@coze-studio/app/../../packages/studio/workspace/project-entity-base/src/components/guide-modal/index.tsx","webpack://@coze-studio/app/../../packages/studio/workspace/project-entity-base/src/hooks/use-create-project-modal.tsx","webpack://@coze-studio/app/../../packages/studio/workspace/project-entity-base/src/hooks/use-base-update-or-copy-project-modal.tsx","webpack://@coze-studio/app/../../packages/studio/workspace/project-entity-base/src/hooks/use-update-project-modal.ts","webpack://@coze-studio/app/../../packages/studio/workspace/project-entity-base/src/components/delete-project-modal/index.tsx","webpack://@coze-studio/app/../../packages/studio/workspace/project-entity-base/src/hooks/use-delete-intelligence.tsx","webpack://@coze-studio/app/../../packages/studio/workspace/project-entity-base/src/hooks/use-copy-project-modal.ts","webpack://@coze-studio/app/../../packages/studio/workspace/project-entity-adapter/src/index.ts","webpack://@coze-studio/app/./src/global.less?f281","webpack://@coze-studio/app/./src/index.less?d3ad","webpack://@coze-studio/app/../../packages/agent-ide/onboarding/src/components/markdown-editor/components/action-bar/index.module.less?c3e9","webpack://@coze-studio/app/../../packages/agent-ide/onboarding/src/components/markdown-editor/components/insert-link-popover/index.module.less?bb75","webpack://@coze-studio/app/../../packages/agent-ide/onboarding/src/components/markdown-editor/components/upload-progress-mask/index.module.less?7602","webpack://@coze-studio/app/../../packages/agent-ide/onboarding/src/components/markdown-editor/index.module.less?3f68","webpack://@coze-studio/app/../../packages/agent-ide/onboarding/src/components/onboarding-markdown-modal/components/markdown-description-popover/index.module.less?1102","webpack://@coze-studio/app/../../packages/agent-ide/onboarding/src/components/onboarding-markdown-modal/index.module.less?207f","webpack://@coze-studio/app/../../packages/agent-ide/onboarding/src/components/onboarding-preview/index.module.less?ea91","webpack://@coze-studio/app/../../packages/agent-ide/onboarding/src/components/onboarding-suggestion/index.module.less?da3f","webpack://@coze-studio/app/../../packages/agent-ide/space-bot/src/component/data-set/index.module.less?bdb0","webpack://@coze-studio/app/../../packages/agent-ide/space-bot/src/hook/use-create-bot/index.module.less?ff0a","webpack://@coze-studio/app/../../packages/agent-ide/space-bot/src/pages/publish/index.module.less?f632","webpack://@coze-studio/app/../../packages/agent-ide/tool/src/components/fallbacks/index.module.less?7c69","webpack://@coze-studio/app/../../packages/agent-ide/tool/src/components/grouping-container/index.module.less?1f7a","webpack://@coze-studio/app/../../packages/agent-ide/tool/src/components/tool-content-block/index.module.less?c0a4","webpack://@coze-studio/app/../../packages/agent-ide/tool/src/components/tool-item/index.module.less?a411","webpack://@coze-studio/app/../../packages/agent-ide/tool/src/components/tool-menu-dropdown-menu/index.module.less?2daf","webpack://@coze-studio/app/../../packages/agent-ide/tool/src/components/tool-menu/index.module.less?140e","webpack://@coze-studio/app/../../packages/agent-ide/tool/src/components/tool-popover/index.module.less?bb95","webpack://@coze-studio/app/../../packages/agent-ide/tool/src/components/tool-tooltip/index.module.less?851e","webpack://@coze-studio/app/../../packages/arch/responsive-kit/src/components/layout/responsive.module.less?513f","webpack://@coze-studio/app/../../packages/common/biz-components/src/banner/index.module.less?8169","webpack://@coze-studio/app/../../packages/common/biz-components/src/parameters/components/custom-tree-node/components/auto-size-tooltip/index.module.less?ca19","webpack://@coze-studio/app/../../packages/common/biz-components/src/parameters/components/custom-tree-node/components/line-component/index.module.less?418b","webpack://@coze-studio/app/../../packages/common/biz-components/src/parameters/components/custom-tree-node/components/param-description/index.module.less?30c2","webpack://@coze-studio/app/../../packages/common/biz-components/src/parameters/components/custom-tree-node/components/param-name/index.module.less?c378","webpack://@coze-studio/app/../../packages/common/biz-components/src/parameters/components/custom-tree-node/components/param-operator/index.module.less?aa3d","webpack://@coze-studio/app/../../packages/common/biz-components/src/parameters/components/custom-tree-node/components/param-type/index.module.less?9fc6","webpack://@coze-studio/app/../../packages/common/biz-components/src/parameters/components/custom-tree-node/components/popup-container/index.module.less?5c51","webpack://@coze-studio/app/../../packages/common/biz-components/src/parameters/components/custom-tree-node/components/workflow-sl-input/index.module.less?a705","webpack://@coze-studio/app/../../packages/common/biz-components/src/parameters/components/custom-tree-node/components/workflow-sl-textarea/index.module.less?811e","webpack://@coze-studio/app/../../packages/common/biz-components/src/parameters/components/custom-tree-node/index.module.less?dc13","webpack://@coze-studio/app/../../packages/common/biz-components/src/parameters/components/header/index.module.less?87f6","webpack://@coze-studio/app/../../packages/common/biz-components/src/parameters/parameters.module.less?335d","webpack://@coze-studio/app/../../packages/common/biz-components/src/picture-upload/index.module.less?14cd","webpack://@coze-studio/app/../../packages/common/biz-components/src/update-user-avatar/index.module.less?cf67","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/chat-area-main/index.modules.less?3756","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/absolute-row/index.module.less?6bf5","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/batch-upload-file-list/common-file/index.module.less?b0ae","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/batch-upload-file-list/delete-file-button/index.module.less?fd4e","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/batch-upload-file-list/image-file/index.module.less?7689","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/batch-upload-file-list/index.module.less?a04a","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/chat-input-integration/index.module.less?894f","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/chat-input/index.module.less?315a","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/context-divider-with-onboarding/index.module.less?a6d1","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/context-divider/index.module.less?c5b7","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/drag-upload-area/index.module.less?96f9","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/fuction-call-message/function-call-content/index.module.less?fd47","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/fuction-call-message/function-call-content/process-content/index.module.less?db06","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/fuction-call-message/index.module.less?2e88","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/load-more/load-retry.module.less?5056","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/message-box/index.module.less?afd0","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/message-group-list/index.module.less?749f","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/message-group/wrapper/index.less?3421","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/message-group/wrapper/index.module.less?42e3","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/onborading-message/index.module.less?dcb8","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/onborading/index.module.less?793a","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/plugin-async-quote/index.module.less?41c1","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/preview/index.module.less?fb0c","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/receive-message-box/index.less?a47e","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/receive-message-box/index.module.less?1199","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/send-message-box/index.module.less?c4f0","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/components/suggestion/index.module.less?8a11","webpack://@coze-studio/app/../../packages/common/chat-area/chat-area/src/styles/uikit.less?6dbd"],"sourcesContent":["\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useShallow } from 'zustand/react/shallow';\nimport classNames from 'classnames';\nimport { ToNewestTipUI, FullWidthAligner } from '@coze-common/chat-uikit';\n\nimport { useShowBackGround } from '../../hooks/public/use-show-bgackground';\nimport { useChatAreaStoreSet } from '../../hooks/context/use-chat-area-context';\nimport { usePreference } from '../../context/preference';\nimport { useLoadMoreClient } from '../../context/load-more';\n\nimport styles from './index.module.less';\n\nexport const ToNewestTip = () => {\n  const { messageWidth } = usePreference();\n  const showBackground = useShowBackGround();\n  const { loadEagerly } = useLoadMoreClient();\n  const { useMessageIndexStore } = useChatAreaStoreSet();\n  const { nextHasMore, scrollViewFarFromBottom } = useMessageIndexStore(\n    useShallow(state => ({\n      nextHasMore: state.nextHasMore,\n      scrollViewFarFromBottom: state.scrollViewFarFromBottom,\n    })),\n  );\n  const show = nextHasMore || scrollViewFarFromBottom;\n  return (\n    <FullWidthAligner alignWidth={messageWidth} className={styles.aligner}>\n      <ToNewestTipUI\n        onClick={loadEagerly}\n        className={classNames(styles.tip)}\n        show={show}\n        showBackground={showBackground}\n      />\n    </FullWidthAligner>\n  );\n};\n\nToNewestTip.displayName = 'ToNewestTip';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type PreferenceContextInterface } from '../../context/preference/types';\n\nexport const getThinkingPlaceholderTheme = ({\n  bizTheme,\n}: {\n  bizTheme: PreferenceContextInterface['theme'];\n}): 'whiteness' | 'grey' => {\n  if (bizTheme === 'home') {\n    return 'whiteness';\n  }\n  return 'grey';\n};\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.modules.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.modules.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useShallow } from 'zustand/react/shallow';\nimport classNames from 'classnames';\nimport {\n  ThinkingPlaceholder,\n  MessageBox as UIKitMessageBox,\n} from '@coze-common/chat-uikit';\n\nimport { getThinkingPlaceholderTheme } from '../../utils/components/get-thinking-placeholder-theme';\nimport { useShowBackGround } from '../../hooks/public/use-show-bgackground';\nimport {\n  useChatAreaContext,\n  useChatAreaStoreSet,\n} from '../../hooks/context/use-chat-area-context';\nimport { usePreference } from '../../context/preference';\n\nimport styles from './index.modules.less';\n\nexport const WaitGenerating = () => {\n  const { messageWidth, layout, theme } = usePreference();\n\n  const { configs } = useChatAreaContext();\n\n  const { useWaitingStore, useSenderInfoStore, useMessagesStore } =\n    useChatAreaStoreSet();\n\n  const senderInfo = useSenderInfoStore(\n    useShallow(state => {\n      const botId =\n        state.waitingSenderId || Object.keys(state.botInfoMap).at(0);\n      return state.getBotInfo(botId);\n    }),\n  );\n\n  const { waiting } = useWaitingStore(\n    useShallow(state => ({\n      waiting: !!state.waiting && !state.responding?.response.length,\n    })),\n  );\n\n  const { functionCallLength, llmLength } = useMessagesStore(\n    useShallow(state => {\n      const memberSet = state.messageGroupList.at(0)?.memberSet;\n      return {\n        functionCallLength: memberSet?.functionCallMessageIdList.length,\n        llmLength: memberSet?.llmAnswerMessageIdList.length,\n      };\n    }),\n  );\n\n  const showBackground = useShowBackGround();\n\n  const showSenderInfo = configs?.showFunctionCallDetail\n    ? !functionCallLength && !llmLength\n    : !llmLength;\n\n  const { selectable } = usePreference();\n\n  if (!waiting) {\n    return null;\n  }\n\n  return (\n    <div\n      data-testid=\"chat-area.waiting-generating-loading\"\n      className={classNames(styles['dot-wrapper'], {\n        [styles['dot-wrapper-selectable'] as string]: selectable,\n        [styles['dot-wrapper-no-avatar'] as string]: !showSenderInfo,\n      })}\n      style={{ width: messageWidth }}\n    >\n      <UIKitMessageBox\n        messageId={null}\n        theme=\"none\"\n        senderInfo={senderInfo || { id: '' }}\n        showUserInfo={showSenderInfo}\n        getBotInfo={useSenderInfoStore.getState().getBotInfo}\n        layout={layout}\n        showBackground={showBackground}\n      >\n        <ThinkingPlaceholder\n          theme={getThinkingPlaceholderTheme({\n            bizTheme: theme,\n          })}\n          showBackground={showBackground}\n        />\n      </UIKitMessageBox>\n    </div>\n  );\n};\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC, type PropsWithChildren } from 'react';\n\nimport classNames from 'classnames';\n\nimport styles from './index.module.less';\n\nexport const Wrapper: FC<\n  PropsWithChildren<{\n    className?: string;\n  }>\n> = ({ children, className }) => (\n  <div className={classNames(styles.wrapper, 'common-wrapper', className)}>\n    {children}\n  </div>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { I18n } from '@coze-arch/i18n';\nimport {\n  ContentBoxType,\n  type IContentConfigs,\n} from '@coze-common/chat-uikit-shared';\n\nimport { FileStatus } from '../store/types';\n\nexport const getContentConfigs: () => IContentConfigs = () => ({\n  [ContentBoxType.TEXT]: {\n    enable: true,\n  },\n  [ContentBoxType.IMAGE]: {\n    enable: true,\n  },\n  [ContentBoxType.CARD]: {\n    enable: true,\n    copywriting: {\n      empty: {\n        title: I18n.t('card_not_support_display_title'),\n        description: I18n.t('card_not_support_display_content'),\n      },\n    },\n    region: CARD_BUILDER_ENV_STR,\n  },\n  [ContentBoxType.FILE]: {\n    enable: true,\n    fileAttributeKeys: {\n      statusKey: 'upload_status',\n      statusEnum: {\n        successEnum: FileStatus.Success,\n        failEnum: FileStatus.Error,\n        cancelEnum: FileStatus.Canceled,\n        uploadingEnum: FileStatus.Uploading,\n      },\n      percentKey: 'upload_percent',\n    },\n    copywriting: {\n      tooltips: {\n        cancel: I18n.t('bot_preview_file_cancel'),\n        copy: I18n.t('bot_preview_file_copyURL'),\n        retry: I18n.t('bot_preview_file_retry'),\n      },\n    },\n  },\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { I18n } from '@coze-arch/i18n';\n\nexport const MAX_UPLOAD_PROGRESS = 100;\n\nexport const UPLOAD_FILE_TIMEOUT = 60000;\n\nexport const FILE_EXCEEDS_LIMIT_I18N_KEY = 'files_exceeds_limit';\n\nexport const getFileSizeReachLimitI18n = ({ limitText = '20MB' }) =>\n  I18n.t('file_too_large', {\n    max_size: limitText,\n  });\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type Message } from '../store/types';\n\nexport const FUNCTION_MESSAGE_TYPE_LIST: Message['type'][] = [\n  'knowledge',\n  'function_call',\n  'tool_response',\n  'verbose',\n];\nexport const MESSAGE_LIST_SIZE = 15;\n\nexport const MARK_MESSAGE_READ_DEBOUNCE_INTERVAL = 500;\nexport const MARK_MESSAGE_READ_DEBOUNCE_MAX_WAIT = 3000;\n\nexport const LOAD_SILENTLY_MAX_NEW_ADDED_COUNT = 6;\n\n// If the get_message_list is called more than 3 times in 5s, the request is queued, and the queuing interval is 1s.\nexport const LOAD_MORE_CALL_GET_HISTORY_LIST_TIME_WINDOW = 5000;\nexport const LOAD_MORE_CALL_GET_HISTORY_LIST_LIMIT = 3;\nexport const LOAD_MORE_CALL_GET_HISTORY_LIST_EXCEED_RATE_DELAY = 1000;\n\nexport const CURSOR_TO_LOAD_LATEST_MESSAGE = '0';\nexport const CURSOR_TO_LOAD_LAST_READ_MESSAGE = '-1';\n\nexport const LOAD_EAGERLY_LOAD_MESSAGE_COUNT = 20;\n/** There is no mechanism to do multi-page simultaneous loading, so the number of discarded policies is aligned with the eagerly maximum number of loads */\nexport const MIN_MESSAGE_INDEX_DIFF_TO_ABORT_CURRENT =\n  LOAD_EAGERLY_LOAD_MESSAGE_COUNT - 1;\n\n/** This value may be given when the server level has no reply_id */\nexport const SERVER_MESSAGE_REPLY_ID_PLACEHOLDER_VALUES = ['0', '-1'];\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const SCROLL_VIEW_BOTTOM_DISTANCE_TO_SHOW_NEWEST_TIP = 600;\n/**\n * When downloading more, simulate the overflow anchor effect, but at the same time move the view content slightly to show the new content a little more\n */\nexport const LOAD_NEXT_ANCHOR_ADDITIONAL_MOVE_DISTANCE = 50;\nexport const LOAD_NEXT_LOCK_DELAY = 30;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext } from 'react';\n\nimport { type MarkReadService } from '../../service/mark-read';\n\n/**\n * Context provided by a service instance that does not need to be placed in the outermost provider\n */\n\nexport interface AfterInitService {\n  markReadService?: MarkReadService;\n}\n\nexport const AfterInitServiceContext = createContext<AfterInitService>({});\n\nexport const AfterInitServiceProvider = AfterInitServiceContext.Provider;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useContext } from 'react';\n\nimport {\n  type AfterInitService,\n  AfterInitServiceContext,\n} from './after-init-service-context';\n\nexport { AfterInitServiceProvider } from './after-init-service-context';\n\nexport const useAfterInitService = <Key extends keyof AfterInitService>(\n  key: Key,\n): Required<AfterInitService>[Key] => {\n  const services = useContext(AfterInitServiceContext);\n  const service = services[key];\n  if (service === undefined) {\n    throw new Error(`cannot find AfterInitService: ${key}`);\n  }\n  return service;\n};\n\nexport const useMarkReadService = () => useAfterInitService('markReadService');\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext } from 'react';\n\nimport { type ChatActionLockService } from '../../service/chat-action-lock';\n\nexport const ChatActionLockContext =\n  createContext<ChatActionLockService | null>(null);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useContext } from 'react';\n\nimport { safeAsyncThrow } from '@coze-common/chat-area-utils';\n\nimport {\n  fallbackChatActionLockService,\n  type ChatActionLockService,\n} from '../../service/chat-action-lock';\nimport { ChatActionLockContext } from './chat-action-lock-context';\n\nexport const useChatActionLockService: () => ChatActionLockService = () => {\n  const lockService = useContext(ChatActionLockContext);\n  if (!lockService) {\n    safeAsyncThrow('ChatActionLockService not provided');\n    return fallbackChatActionLockService;\n  }\n  return lockService;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext } from 'react';\n\nimport { type NullableType } from '../../typing/util-types';\nimport { type ChatAreaContext } from './type';\n\ntype NullableChatAreaContext = NullableType<ChatAreaContext>;\n\nexport const NullableChatAreaContext = createContext<NullableChatAreaContext>({\n  refreshMessageList: null,\n  reporter: null,\n  botId: null,\n  scene: null,\n  manualInit: null,\n  lifeCycleService: null,\n  configs: null,\n  eventCenter: null,\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type Emitter } from 'mitt';\nimport {\n  type CreateChatCoreProps,\n  type Scene,\n  type PresetBot,\n  type SendMessageOptions,\n} from '@coze-common/chat-core';\nimport { type Reporter } from '@coze-arch/logger';\nimport {\n  type BackgroundImageInfo,\n  type ChatMessage,\n} from '@coze-arch/bot-api/developer_api';\nimport { type SendTextMessagePayload } from '@coze-common/chat-uikit-shared';\n\nimport { type ProviderPassThroughPreference } from '../preference/types';\nimport { type EventNames } from '../../utils/event-bus/uikit-event-bus';\nimport { type WaitingStore } from '../../store/waiting';\nimport {\n  type Message,\n  type OnboardingSuggestionItem,\n  type SenderInfoMap,\n  type UserInfoMap,\n  type UserSenderInfo,\n} from '../../store/types';\nimport { type SuggestionsStore } from '../../store/suggestions';\nimport {\n  type UpdateBotInfoByImmer,\n  type WaitingSenderId,\n  type SenderInfoStore,\n} from '../../store/sender-info';\nimport { type SelectionStore } from '../../store/selection';\nimport { type SectionIdStore } from '../../store/section-id';\nimport { type PluginStore } from '../../store/plugins';\nimport { type OnboardingStore } from '../../store/onboarding';\nimport { type MessagesStore } from '../../store/messages';\nimport { type MessageMetaStore } from '../../store/message-meta';\nimport { type MessageIndexStore } from '../../store/message-index';\nimport { type GlobalInitStore } from '../../store/global-init';\nimport { type FileStore } from '../../store/file';\nimport { type ChatActionStore } from '../../store/chat-action';\nimport { type BatchFileUploadStore } from '../../store/batch-upload-file';\nimport { type AudioUIStore } from '../../store/audio-ui';\nimport { type UploadPlugin } from '../../service/upload-plugin';\nimport { type RegisterPlugin } from '../../plugin/types/register-plugin';\nimport { type SystemLifeCycleService } from '../../plugin/life-cycle';\nimport {\n  type SendMessageFrom,\n  type ChatAreaEventCallback,\n} from './chat-area-callback';\n\nexport interface MixInitResponse {\n  conversationId: string | null;\n  lastSectionId?: string;\n  messageList?: ChatMessage[];\n  cursor: string;\n  hasMore: boolean;\n  prologue?: string;\n  onboardingSuggestions?: OnboardingSuggestionItem[];\n  botVersion?: string;\n  botInfoMap?: SenderInfoMap;\n  userInfoMap?: UserInfoMap;\n  /** hasMore guides predecessor data, nextHasMore guides successor data */\n  next_has_more?: boolean;\n  /** Cursor guides page forward, nextCursor guides page backward */\n  next_cursor: string | undefined;\n  /** Currently read message_index */\n  read_message_index?: string;\n  backgroundInfo?: BackgroundImageInfo;\n}\n\n/**\n * Currently all are subtypes from verbose;\n * Far-reaching impact, carefully adjusted\n */\nexport enum IgnoreMessageType {\n  Knowledge,\n  LongTermMemory,\n  JumpToAgent,\n  Backwards,\n}\n\nexport const allIgnorableMessageTypes = [\n  IgnoreMessageType.Knowledge,\n  IgnoreMessageType.LongTermMemory,\n  IgnoreMessageType.JumpToAgent,\n  IgnoreMessageType.Backwards,\n];\n\n// TODO: I feel that preference needs to be merged with configs quickly, otherwise the data cannot be obtained at the initialization place (outside the provider)\nexport interface ChatAreaConfigs {\n  ignoreMessageConfigList: IgnoreMessageType[];\n  showFunctionCallDetail: boolean;\n  isShowFunctionCallBox: boolean;\n  // Whether to group user messages (merge avatars)\n  groupUserMessage: boolean;\n  uploadPlugin: typeof UploadPlugin;\n}\n\nexport type CreateChatCoreOverrideConfig = Partial<\n  Omit<CreateChatCoreProps, 'bot_version' | 'bot_id' | 'conversation_id'>\n>;\n\nexport type ExtendDataLifecycle = 'disable' | 'full-site';\n\nexport interface ChatAreaProviderProps\n  extends Partial<ProviderPassThroughPreference> {\n  // botId presetBot must provide one, plus runtime check\n  botId?: string;\n  spaceId?: string;\n  presetBot?: PresetBot;\n  scene: Scene;\n  userInfo: UserSenderInfo | null;\n  reporter: Reporter;\n  botVersion?: string;\n  requestToInit: () => Promise<MixInitResponse>;\n  /**\n   * @Deprecated deprecated, please use plugin scheme\n   */\n  eventCallback?: ChatAreaEventCallback;\n  /**\n   * @default\n   * {\n   *  requestManagerOptions: { timeout: 12000 }\n   * }\n   */\n  createChatCoreOverrideConfig?: CreateChatCoreOverrideConfig;\n  /**\n   * @Deprecated is not good. Subsequent new configuration reference ProviderPassThroughPreference\n   */\n  configs?: Partial<ChatAreaConfigs>;\n  /** Whether to extend the data lifecycle beyond the provider's own limitations */\n  extendDataLifecycle?: ExtendDataLifecycle;\n  enableChatCoreDebug?: boolean;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  pluginRegistryList?: RegisterPlugin<any>[];\n  /**\n   * @Deprecated This parameter should not be used at will\n   */\n  enableInitServiceRefactor?: boolean;\n  /**\n   * Customize the wait state of the stop reply button\n   */\n  stopRespondOverrideWaiting?: boolean;\n}\n\nexport interface StoreSet {\n  useGlobalInitStore: GlobalInitStore;\n  useMessageMetaStore: MessageMetaStore;\n  useMessagesStore: MessagesStore;\n  useSectionIdStore: SectionIdStore;\n  useWaitingStore: WaitingStore;\n  useOnboardingStore: OnboardingStore;\n  useFileStore: FileStore;\n  useSuggestionsStore: SuggestionsStore;\n  useSelectionStore: SelectionStore;\n  useSenderInfoStore: SenderInfoStore;\n  useBatchFileUploadStore: BatchFileUploadStore;\n  usePluginStore: PluginStore;\n  useMessageIndexStore: MessageIndexStore;\n  useChatActionStore: ChatActionStore;\n  useAudioUIStore: AudioUIStore;\n}\n\n// eslint-disable-next-line @typescript-eslint/consistent-type-definitions\nexport type EventCenter = {\n  [EventNames.SEND_TEXT_MESSAGE]: SendTextMessagePayload & {\n    clickLocation: SendMessageFrom;\n    options?: SendMessageOptions;\n  };\n  [EventNames.UPDATE_CARD_STATUS]: {\n    messageID: string;\n    action: string;\n  };\n  [EventNames.RESEND_MESSAGE]: {\n    message: Message;\n  };\n};\n\nexport interface ChatAreaContext\n  extends Omit<\n    ChatAreaProviderProps,\n    | 'requestToInit'\n    | 'manualInit'\n    | 'userInfo'\n    | 'pluginRegistryList'\n    | 'configs'\n    | ('extendDataLifecycle' | keyof ProviderPassThroughPreference)\n  > {\n  eventCenter: Emitter<EventCenter>;\n  reporter: Reporter;\n  lifeCycleService: SystemLifeCycleService;\n  refreshMessageList: () => void;\n  manualInit: () => void;\n  configs: ChatAreaConfigs;\n}\n\nexport interface ChatAreaProviderMethod {\n  resetStateFullSite: () => void;\n  /** !!! The back door to the coze home, don't use it!!! */\n  updateSenderInfo: UpdateBotInfoByImmer;\n  /**\n   * !!! Added another back door and I'm dying\n   */\n  updateWaitingSenderId: (id: WaitingSenderId) => void;\n  // Backdoor to the bot store\n  /**\n   * @deprecated, subsequent use is prohibited\n   */\n  refreshMessageList: () => void;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext } from 'react';\n\nimport { type ComponentTypesMap } from '../components/types';\n\nexport interface ChatAreaCustomComponents {\n  /**\n   * @Deprecated, please use the plugin scheme\n   */\n  componentTypes?: Partial<ComponentTypesMap>;\n}\n\nexport const ChatAreaCustomComponentContext =\n  createContext<ChatAreaCustomComponents>({});\n\nexport const ChatAreaCustomComponentProvider =\n  ChatAreaCustomComponentContext.Provider;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext, type MutableRefObject } from 'react';\n\nexport interface ChatInputLayoutProps {\n  layoutContainerRef?: MutableRefObject<HTMLDivElement | null>;\n}\n\nexport const ChatInputLayoutContext = createContext<ChatInputLayoutProps>({});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type PropsWithChildren } from 'react';\n\nimport { ChatInputLayoutContext, type ChatInputLayoutProps } from './context';\n\nexport const ChatInputLayoutProvider: React.FC<\n  PropsWithChildren<ChatInputLayoutProps>\n> = ({ children, ...props }) => (\n  <ChatInputLayoutContext.Provider value={props}>\n    {children}\n  </ChatInputLayoutContext.Provider>\n);\n\nChatInputLayoutProvider.displayName = 'ChatInputLayoutProvider';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ReactNode, createContext } from 'react';\n\nimport {\n  type IChatInputProps,\n  type InputNativeCallbacks,\n} from '@coze-common/chat-uikit-shared';\n\ntype OnBeforeSubmit = IChatInputProps['onBeforeSubmit'];\n\nexport interface ChatInputProps\n  extends Pick<IChatInputProps, 'leftActions' | 'rightSlot'> {\n  /**\n   * {@link OnBeforeSubmit}\n   */\n  onBeforeSubmit?: OnBeforeSubmit;\n  submitClearInput?: boolean;\n  /**\n   * @deprecated\n   */\n  addonBottom?: ReactNode;\n  uploadButtonTooltipContent?: ReactNode;\n  wrapperClassName?: string;\n  inputNativeCallbacks?: InputNativeCallbacks;\n  safeAreaClassName?: string;\n  getContainer?: () => HTMLElement;\n}\n\nexport const ChatInputPropsContext = createContext<ChatInputProps>({});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useContext } from 'react';\n\nimport { ChatInputPropsContext } from './context';\n\nexport const useChatInputProps = () => useContext(ChatInputPropsContext);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type PropsWithChildren } from 'react';\n\nimport { type ChatInputProps, ChatInputPropsContext } from './context';\n\nexport const ChatInputPropsProvider: React.FC<\n  PropsWithChildren<ChatInputProps>\n> = ({ children, ...props }) => (\n  <ChatInputPropsContext.Provider value={props}>\n    {children}\n  </ChatInputPropsContext.Provider>\n);\n\nChatInputPropsProvider.displayName = 'ChatAreaChatInputPropsProvider';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type PropsWithChildren, createContext } from 'react';\n\nimport { merge } from 'lodash-es';\nimport { I18n } from '@coze-arch/i18n';\n\nimport { type CopywritingContextInterface } from './types';\n\nconst getDefaultCopywriting = (): CopywritingContextInterface => ({\n  textareaPlaceholder: '',\n  textareaBottomTips: '',\n  clearContextDividerText: '',\n  clearContextTooltipContent: '',\n  audioButtonTooltipContent: '',\n});\n\nexport const CopywritingContext = createContext<CopywritingContextInterface>(\n  getDefaultCopywriting(),\n);\n\nexport const CopywritingProvider = ({\n  children,\n  ...rest\n}: PropsWithChildren<Partial<CopywritingContextInterface>>) => (\n  <CopywritingContext.Provider\n    value={merge(\n      {},\n      getDefaultCopywriting(),\n      {\n        clearContextDividerText: I18n.t('context_clear_finish'),\n      },\n      rest,\n    )}\n  >\n    {children}\n  </CopywritingContext.Provider>\n);\n\nCopywritingProvider.displayName = 'ChatAreaCopywritingProvider';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useContext } from 'react';\n\nimport { CopywritingContext } from './copywriting-context';\n\nexport const useCopywriting = () => useContext(CopywritingContext);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext } from 'react';\n\nexport interface DragUploadTargetContextProps {\n  isDragOver: boolean;\n}\n\nexport const DragUploadTargetContext =\n  createContext<DragUploadTargetContextProps>({\n    isDragOver: false,\n  });\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useContext } from 'react';\n\nimport { DragUploadTargetContext } from './context';\n\nexport const useDragUploadContext = () => useContext(DragUploadTargetContext);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type PropsWithChildren } from 'react';\n\nimport {\n  DragUploadTargetContext,\n  type DragUploadTargetContextProps,\n} from './context';\n\nexport const DragUploadContextProvider: React.FC<\n  PropsWithChildren<DragUploadTargetContextProps>\n> = ({ children, ...props }) => (\n  <DragUploadTargetContext.Provider value={props}>\n    {children}\n  </DragUploadTargetContext.Provider>\n);\n\nDragUploadContextProvider.displayName = 'ChatAreaDragUploadContextProvider';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext, type PropsWithChildren } from 'react';\n\nimport {\n  type LoadMoreClient,\n  type LoadMoreClientMethod,\n} from '../../service/load-more';\n\nexport const LoadMoreContext = createContext<{\n  loadMoreClient: LoadMoreClientMethod | null;\n}>({\n  loadMoreClient: null,\n});\n\n/**\n * Anti-pattern takeoff\n */\nexport const LoadMoreProvider = (\n  props: PropsWithChildren<{\n    loadMoreClient: LoadMoreClient;\n  }>,\n) => {\n  const { children, loadMoreClient } = props;\n  return (\n    <LoadMoreContext.Provider\n      value={{\n        loadMoreClient,\n      }}\n    >\n      {children}\n    </LoadMoreContext.Provider>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useContext } from 'react';\n\nimport { safeAsyncThrow } from '@coze-common/chat-area-utils';\n\nimport {\n  fallbackLoadMoreClient,\n  type LoadMoreClientMethod,\n} from '../../service/load-more';\nimport { LoadMoreContext } from './load-more-context';\n\nexport { LoadMoreProvider } from './load-more-context';\n\nexport const useLoadMoreClient = (): LoadMoreClientMethod => {\n  const client = useContext(LoadMoreContext).loadMoreClient;\n  if (!client) {\n    safeAsyncThrow('loadMoreClient not provided');\n    return fallbackLoadMoreClient;\n  }\n  return client;\n};\n\nexport const useLoadEagerlyUnconditionally = () => {\n  const client = useLoadMoreClient();\n  return () => client.loadEagerlyUnconditionally();\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext } from 'react';\n\nimport { type MessageMeta, type Message } from '../../store/types';\n\n// TODO can be further optimized.\nexport interface MessageBoxContextProviderProps {\n  messageUniqKey: string;\n  groupId: string;\n  message: Message | undefined;\n  meta: MessageMeta | undefined;\n  regenerateMessage: () => Promise<void>;\n  isFirstUserOrFinalAnswerMessage: boolean;\n  isLastUserOrFinalAnswerMessage: boolean;\n  functionCallMessageIdList?: string[];\n  /** Is the group to which this message belongs having a conversation? */\n  isGroupChatActive: boolean;\n}\n\nexport const MessageBoxContext = createContext<MessageBoxContextProviderProps>({\n  messageUniqKey: '',\n  groupId: '',\n  regenerateMessage: () => Promise.resolve(),\n  isFirstUserOrFinalAnswerMessage: false,\n  isLastUserOrFinalAnswerMessage: false,\n  message: undefined,\n  meta: undefined,\n  isGroupChatActive: false,\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useContext } from 'react';\n\nimport { MessageBoxContext } from './context';\n\nexport const useMessageBoxContext = () => {\n  const { message, messageUniqKey, meta, ...rest } =\n    useContext(MessageBoxContext);\n  if (!message || !meta) {\n    throw new Error(\n      `failed to get message or meta by message id or local_id ${messageUniqKey}`,\n    );\n  }\n  return { message, messageUniqKey, meta, ...rest };\n};\n\n/**\n * If the context may also appear in scenarios without messageBoxContext, such as onboarding;\n * If the invoked environment is inside a normal message box, use regular useMessageBoxContext\n */\nexport const useUnsafeMessageBoxContext = () => useContext(MessageBoxContext);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type WaitingState, WaitingPhase } from '../../store/waiting';\n\nexport const getIsGroupChatActive = ({\n  waiting,\n  sending,\n  groupId,\n}: Pick<WaitingState, 'waiting' | 'sending'> & { groupId: string }) => {\n  const isFormalWaiting =\n    waiting?.replyId === groupId && waiting.phase === WaitingPhase.Formal;\n\n  if (!sending) {\n    return isFormalWaiting;\n  }\n\n  const isSending =\n    sending.message_id === groupId ||\n    sending?.extra_info.local_message_id === groupId;\n\n  return isFormalWaiting || isSending;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type PropsWithChildren } from 'react';\n\nimport { isEqual } from 'lodash-es';\n\nimport { getIsGroupChatActive } from '../../utils/message-group/get-is-group-chat-active';\nimport { useChatAreaStoreSet } from '../../hooks/context/use-chat-area-context';\nimport {\n  type MessageBoxContextProviderProps,\n  MessageBoxContext,\n} from './context';\n\nexport interface MessageBoxProviderProps\n  extends Omit<\n    MessageBoxContextProviderProps,\n    'message' | 'meta' | 'isGroupChatActive'\n  > {\n  groupId: string;\n}\n\nexport const MessageBoxProvider: React.FC<\n  PropsWithChildren<MessageBoxProviderProps>\n> = ({ children, messageUniqKey, groupId, ...props }) => {\n  const { useMessagesStore, useMessageMetaStore, useWaitingStore } =\n    useChatAreaStoreSet();\n\n  const isGroupChatActive = useWaitingStore(state =>\n    getIsGroupChatActive({ ...state, groupId }),\n  );\n  // Get message by messageId\n  const message = useMessagesStore(\n    state => state.findMessage(messageUniqKey),\n    isEqual,\n  );\n\n  // Get message meta by messageId\n  const meta = useMessageMetaStore(\n    state => state.getMetaByMessage(messageUniqKey),\n    isEqual,\n  );\n  return (\n    <MessageBoxContext.Provider\n      value={{\n        message,\n        groupId,\n        meta,\n        messageUniqKey,\n        isGroupChatActive,\n        ...props,\n      }}\n    >\n      {children}\n    </MessageBoxContext.Provider>\n  );\n};\n\nMessageBoxProvider.displayName = 'MessageBoxProvider';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useContext } from 'react';\n\nimport { PreferenceContext } from './preference-context';\n\nexport { NewMessageInterruptScenario } from './types';\n\nexport const usePreference = () => useContext(PreferenceContext);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext, type PropsWithChildren, useContext } from 'react';\n\nimport { isUndefined, merge, omitBy } from 'lodash-es';\nimport { Layout } from '@coze-common/chat-uikit-shared';\nimport { type MakeValueUndefinable } from '@coze-common/chat-area-utils';\nimport { SuggestedQuestionsShowMode } from '@coze-arch/bot-api/developer_api';\n\nimport {\n  type PreferenceContextInterface,\n  type ProviderPassThroughPreference,\n} from './types';\n\nconst getDefaultProviderPassThroughPreference =\n  (): ProviderPassThroughPreference => ({\n    enableMarkRead: false,\n    enableTwoWayLoad: false,\n    showUserExtendedInfo: false,\n    enableImageAutoSize: false,\n    imageAutoSizeContainerWidth: undefined,\n    enablePasteUpload: false,\n    isInputReadonly: false,\n    enableDragUpload: true,\n    enableSelectOnboarding: true,\n    uikitChatInputButtonStatus: {},\n    onboardingSuggestionsShowMode: SuggestedQuestionsShowMode.Random,\n    showBackground: false,\n    stopRespondOverrideWaiting: undefined,\n  });\n\nconst getDefaultPreference = (): Required<PreferenceContextInterface> => ({\n  newMessageInterruptScenario: 'replying',\n  enableMessageBoxActionBar: false,\n  selectable: false,\n  showClearContextDivider: true,\n  messageWidth: '100%',\n  messageMaxWidth: '',\n  readonly: false,\n  uiKitChatInputButtonConfig: {\n    isSendButtonVisible: true,\n    isClearHistoryButtonVisible: true,\n    isMoreButtonVisible: true,\n  },\n  uikitChatInputButtonStatus: {\n    isClearContextButtonDisabled: false,\n  },\n  enableMention: false,\n  theme: 'debug',\n  enableLegacyUpload: false,\n  enableMultimodalUpload: true,\n  fileLimit: 1,\n  showInputArea: true,\n  showOnboardingMessage: true,\n  forceShowOnboardingMessage: false,\n  showStopRespond: true,\n  layout: Layout.PC,\n  isMiniScreen: false,\n  isOnboardingCentered: false,\n  stopRespondOverrideWaiting: undefined,\n});\n\nexport const ProviderPassThroughContext = createContext<\n  MakeValueUndefinable<ProviderPassThroughPreference>\n>(getDefaultProviderPassThroughPreference());\n\nexport const useProviderPassThoughContext = () =>\n  useContext(ProviderPassThroughContext);\n\nexport type MixedPreferences = PreferenceContextInterface &\n  ProviderPassThroughPreference;\n\nexport const PreferenceContext = createContext<MixedPreferences>({\n  ...getDefaultPreference(),\n  ...getDefaultProviderPassThroughPreference(),\n});\n\nexport const PreferenceProvider = ({\n  children,\n  value,\n}: PropsWithChildren<{ value: MakeValueUndefinable<MixedPreferences> }>) => {\n  const preferencesValues: MixedPreferences = merge(\n    getDefaultPreference(),\n    getDefaultProviderPassThroughPreference(),\n    omitBy(value, isUndefined),\n  );\n  return (\n    <PreferenceContext.Provider value={preferencesValues}>\n      {children}\n    </PreferenceContext.Provider>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext } from 'react';\n\nimport { type ScrollViewController } from '@coze-common/scroll-view';\n\ninterface ScrollViewContext {\n  getScrollView: (() => ScrollViewController) | null;\n}\n\nexport const ScrollViewContext = createContext<ScrollViewContext>({\n  getScrollView: null,\n});\n\nexport const ScrollViewProvider = ScrollViewContext.Provider;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext } from 'react';\n\nimport { type ScrollViewSize } from './type';\n\nexport const ScrollViewSizeContext = createContext<ScrollViewSize | undefined>(\n  undefined,\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useContext } from 'react';\n\nimport { ScrollViewSizeContext } from './context';\n\nexport const useScrollViewSize = () => useContext(ScrollViewSizeContext);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext } from 'react';\n\nimport { type StoreSet } from '../chat-area-context/type';\nimport { type NullableType } from '../../typing/util-types';\n\ntype NullableStoreSetContextType = NullableType<StoreSet>;\n\nexport const StoreSetContext = createContext<NullableStoreSetContextType>({\n  useBatchFileUploadStore: null,\n  useChatActionStore: null,\n  useFileStore: null,\n  useGlobalInitStore: null,\n  useMessageIndexStore: null,\n  useMessageMetaStore: null,\n  useMessagesStore: null,\n  useOnboardingStore: null,\n  usePluginStore: null,\n  useSectionIdStore: null,\n  useSelectionStore: null,\n  useSenderInfoStore: null,\n  useSuggestionsStore: null,\n  useWaitingStore: null,\n  useAudioUIStore: null,\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext } from 'react';\n\nimport {\n  type UploadControllerProps,\n  type UploadController,\n} from '../../service/upload-controller';\n\nexport interface UploadControllerContextProps {\n  uploadControllerMap: Record<string, UploadController>;\n  createControllerAndUpload: (param: UploadControllerProps) => void;\n  cancelUploadById: (id: string) => void;\n  clearAllSideEffect: () => void;\n}\n\nexport const UploadControllerContext =\n  createContext<UploadControllerContextProps>({\n    uploadControllerMap: {},\n    createControllerAndUpload: () => void 0,\n    cancelUploadById: () => void 0,\n    clearAllSideEffect: () => void 0,\n  });\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useContext } from 'react';\n\nimport { UploadControllerContext } from './context';\n\nexport const useUploadController = () => useContext(UploadControllerContext);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type ChatCore from '@coze-common/chat-core';\nimport { type GetHistoryMessageResponse } from '@coze-common/chat-core';\nimport { RateLimit } from '@coze-common/chat-area-utils';\nimport type { Reporter } from '@coze-arch/logger';\n\nimport { type LoadMoreEnvTools } from '../../../service/load-more/load-more-env-tools';\nimport { fixHistoryMessageList } from '../../../service/fix-message/fix-history-message-list';\nimport { getReportError, ReportEventNames } from '../../../report-events';\nimport { type SystemLifeCycleService } from '../../../plugin/life-cycle';\nimport { type IgnoreMessageType } from '../../../context/chat-area-context/type';\nimport {\n  LOAD_MORE_CALL_GET_HISTORY_LIST_EXCEED_RATE_DELAY,\n  LOAD_MORE_CALL_GET_HISTORY_LIST_LIMIT,\n  LOAD_MORE_CALL_GET_HISTORY_LIST_TIME_WINDOW,\n  MESSAGE_LIST_SIZE,\n} from '../../../constants/message';\n\nexport const getLoadRequest = ({\n  reporter,\n  getChatCore,\n  ignoreMessageConfigList,\n  lifeCycleService,\n}: {\n  reporter: Reporter;\n  getChatCore: () => ChatCore;\n  ignoreMessageConfigList: IgnoreMessageType[];\n  lifeCycleService: SystemLifeCycleService;\n}) => {\n  const request = getLoadRequestRaw({\n    reporter,\n    getChatCore,\n    ignoreMessageConfigList,\n    lifeCycleService,\n  });\n\n  const limiter = new RateLimit(request, {\n    limit: LOAD_MORE_CALL_GET_HISTORY_LIST_LIMIT,\n    timeWindow: LOAD_MORE_CALL_GET_HISTORY_LIST_TIME_WINDOW,\n    onLimitDelay: LOAD_MORE_CALL_GET_HISTORY_LIST_EXCEED_RATE_DELAY,\n  });\n  return limiter.invoke;\n};\n\nconst getLoadRequestRaw =\n  ({\n    reporter,\n    getChatCore,\n    ignoreMessageConfigList,\n    lifeCycleService,\n  }: {\n    reporter: Reporter;\n    getChatCore: () => ChatCore;\n    ignoreMessageConfigList: IgnoreMessageType[];\n    lifeCycleService: SystemLifeCycleService;\n  }): LoadMoreEnvTools['loadRequest'] =>\n  async ({ count, cursor, loadDirection }) => {\n    try {\n      const chatCore = getChatCore();\n\n      const ctx = {\n        count: count ?? MESSAGE_LIST_SIZE,\n        cursor,\n        load_direction: loadDirection,\n      };\n      const modifyCtx =\n        await lifeCycleService.message.onBeforeGetMessageHistoryList({ ctx });\n\n      const data = await chatCore.getHistoryMessage(modifyCtx);\n\n      const fixedMessageLitData: GetHistoryMessageResponse = {\n        ...data,\n        message_list: fixHistoryMessageList({\n          historyMessageList: data.message_list,\n          reporter,\n          ignoreMessageConfigList,\n        }),\n      };\n\n      reporter.successEvent({ eventName: ReportEventNames.GetMessageList });\n      return fixedMessageLitData;\n    } catch (e) {\n      reporter.errorEvent({\n        eventName: ReportEventNames.GetMessageList,\n        ...getReportError(e),\n      });\n      throw e;\n    }\n  };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, useMemo, useRef } from 'react';\n\nimport type { Reporter } from '@coze-arch/logger';\nimport { DeveloperApi } from '@coze-arch/bot-api';\n\nimport { useChatAreaStoreSet } from '../use-chat-area-context';\nimport { LoadMoreEnvTools } from '../../../service/load-more/load-more-env-tools';\nimport { LoadMoreClient } from '../../../service/load-more';\nimport { type SystemLifeCycleService } from '../../../plugin/life-cycle';\nimport { useLoadMoreClient } from '../../../context/load-more';\nimport type {\n  IgnoreMessageType,\n  StoreSet,\n} from '../../../context/chat-area-context/type';\nimport { type ChatAreaEventCallback } from '../../../context/chat-area-context/chat-area-callback';\nimport { useListenMessagesLengthChangeLayoutEffect } from './listen-message-length-change';\nimport { getLoadRequest } from './get-load-request';\nimport {\n  getChatProcessing,\n  getListenProcessChatStateChange,\n} from './get-listen-process-chat-state-change';\nimport { getInsertMessages } from './get-insert-messages';\n\nexport const usePrepareLoadMore = ({\n  storeSet,\n  enableTwoWayLoad,\n  enableMarkRead,\n  reporter,\n  ignoreMessageConfigList,\n  lifeCycleService,\n  eventCallback: { onBeforeLoadMoreInsertMessages },\n}: {\n  storeSet: StoreSet;\n  enableTwoWayLoad: boolean;\n  enableMarkRead: boolean;\n  reporter: Reporter;\n  ignoreMessageConfigList: IgnoreMessageType[];\n  lifeCycleService: SystemLifeCycleService;\n  eventCallback: Pick<ChatAreaEventCallback, 'onBeforeLoadMoreInsertMessages'>;\n}) => {\n  const {\n    useMessageIndexStore,\n    useGlobalInitStore,\n    useMessagesStore,\n    useWaitingStore,\n  } = storeSet;\n  const flagRef = useRef({ enableTwoWayLoad, enableMarkRead });\n  flagRef.current = { enableTwoWayLoad, enableMarkRead };\n  const waitMessagesLengthChangeLayoutEffect =\n    useListenMessagesLengthChangeLayoutEffect(useMessagesStore);\n  const { listenProcessChatStateChange, forceDispose } = useMemo(\n    () => getListenProcessChatStateChange(useWaitingStore),\n    [],\n  );\n\n  useEffect(() => forceDispose, []);\n\n  const loadMoreEnv = useMemo(() => {\n    // Actions are all stable references, no on-site calculations required\n    const {\n      updateCursor,\n      updateIndex,\n      updateHasMore,\n      updateLockAndErrorByImmer,\n      resetCursors,\n      resetHasMore,\n      resetLoadLockAndError,\n      alignMessageIndexes,\n      clearAll,\n    } = useMessageIndexStore.getState();\n    const envTools: LoadMoreEnvTools = new LoadMoreEnvTools({\n      reporter,\n      updateCursor,\n      updateHasMore,\n      updateIndex,\n      resetCursors,\n      resetHasMore,\n      resetLoadLockAndError,\n      alignMessageIndexes,\n      updateLockAndErrorByImmer,\n      clearMessageIndexStore: clearAll,\n      insertMessages: getInsertMessages(\n        storeSet,\n        onBeforeLoadMoreInsertMessages,\n      ),\n      loadRequest: getLoadRequest({\n        reporter,\n        getChatCore: () => envTools.chatCore,\n        ignoreMessageConfigList,\n        lifeCycleService,\n      }),\n      requestMessageIndex: conversationId =>\n        DeveloperApi.GetConversationParticipantsReadIndex({\n          conversation_id:\n            conversationId ||\n            useGlobalInitStore.getState().conversationId ||\n            '',\n        }),\n      // Value, requires on-site calculation at runtime\n      readEnvValues: () => {\n        const state = useMessageIndexStore.getState();\n        const waitingState = useWaitingStore.getState();\n        return {\n          ...flagRef.current,\n          ...state,\n          isProcessingChat: getChatProcessing(waitingState),\n        };\n      },\n      waitMessagesLengthChangeLayoutEffect,\n      listenProcessChatStateChange,\n    });\n    return envTools;\n  }, []);\n\n  const loadMoreClient = useMemo(() => new LoadMoreClient(loadMoreEnv), []);\n\n  return loadMoreClient;\n};\n\nexport const useUpdateLoadEnvContent = () => {\n  const loadMoreClient = useLoadMoreClient();\n  const { useGlobalInitStore } = useChatAreaStoreSet();\n\n  const chatCore = useGlobalInitStore(state => state.chatCore);\n  useEffect(() => {\n    loadMoreClient.injectChatCoreIntoEnv(chatCore);\n  }, [chatCore]);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, useMemo, useRef } from 'react';\n\nimport { useImperativeLayoutEffect } from '@coze-common/chat-hooks';\n\nimport { type MessagesStore } from '../../../store/messages';\n\ntype Listener = () => void;\n\nconst invoke = (fn: () => void) => fn();\n\nclass ListenMessageLengthChange {\n  private unsubscribe: () => void;\n  constructor(useMessagesStore: MessagesStore) {\n    this.unsubscribe = useMessagesStore.subscribe(\n      state => state.messages.length,\n      () => this.fns.forEach(invoke),\n    );\n  }\n\n  private fns = new Set<Listener>();\n\n  listenMessagesLengthChange(fn: Listener) {\n    this.fns.add(fn);\n    return {\n      dispose: () => {\n        this.fns.delete(fn);\n      },\n    };\n  }\n\n  forceDispose = () => {\n    this.fns.clear();\n    this.unsubscribe();\n  };\n}\n\n// Todo: review is dick and dangerous \nexport const useListenMessagesLengthChangeLayoutEffect = (\n  useMessagesStore: MessagesStore,\n) => {\n  const fnsRef = useRef<Listener[]>([]);\n  const trigger = () => {\n    fnsRef.current.forEach(invoke);\n    fnsRef.current = [];\n  };\n\n  const askTrigger = useImperativeLayoutEffect(trigger);\n  const listener = useMemo(\n    () => new ListenMessageLengthChange(useMessagesStore),\n    [],\n  );\n  useEffect(() => listener.forceDispose, []);\n  useEffect(() => {\n    const { dispose } = listener.listenMessagesLengthChange(askTrigger);\n    return dispose;\n  }, []);\n\n  /**\n   * It only takes effect once after monitoring\n   */\n  return (fn: Listener) => fnsRef.current.push(fn);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useContext } from 'react';\n\nimport { isValidContext } from '../../utils/is-valid-context';\nimport { StoreSetContext } from '../../context/store-set';\nimport { NullableChatAreaContext } from '../../context/chat-area-context/context';\n\n/**\n * For internal use, this must not be exported externally.\n */\nexport const useChatAreaContext = () => {\n  const chatAreaContext = useContext(NullableChatAreaContext);\n  const storeSetContext = useContext(StoreSetContext);\n  if (!isValidContext(chatAreaContext) || !isValidContext(storeSetContext)) {\n    throw new Error('chatAreaContext is not valid');\n  }\n\n  return chatAreaContext;\n};\n\n/**\n * Only for internal use\n */\nexport const useChatAreaStoreSet = () => {\n  const storeSetContext = useContext(StoreSetContext);\n  if (!isValidContext(storeSetContext)) {\n    throw new Error('chatAreaContext is not valid');\n  }\n\n  return storeSetContext;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useContext } from 'react';\n\nimport { ChatAreaCustomComponentContext } from '../../context/chat-area-custom-component-context';\n\nexport const useChatAreaCustomComponent = () => {\n  const context = useContext(ChatAreaCustomComponentContext);\n  return context.componentTypes ?? {};\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useChatAreaStoreSet } from './use-chat-area-context';\n\nexport const useChatCore = () => {\n  const { useGlobalInitStore } = useChatAreaStoreSet();\n  const chatCore = useGlobalInitStore(state => state.getChatCore());\n  return chatCore;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useContext } from 'react';\n\nimport { ScrollViewContext } from '../../context/scroll-view-context';\n\nexport const useGetScrollView = () => {\n  const { getScrollView } = useContext(ScrollViewContext);\n  if (!getScrollView) {\n    throw new Error('scrollView context not provide');\n  }\n  return getScrollView;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isValidContext } from '../../utils/is-valid-context';\nimport { useChatAreaStoreSet } from './use-chat-area-context';\n\nexport const useInitStatus = () => {\n  const chatAreaStoreSetContext = useChatAreaStoreSet();\n  if (!isValidContext(chatAreaStoreSetContext)) {\n    throw new Error('chatAreaStoreSetContext is not valid');\n  }\n  const { useGlobalInitStore } = chatAreaStoreSetContext;\n  const initStatus = useGlobalInitStore(state => state.initStatus);\n\n  return initStatus;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type MethodCommonDeps } from '../../plugin/types';\nimport { useLoadMoreClient } from '../../context/load-more';\nimport { useChatActionLockService } from '../../context/chat-action-lock';\nimport {\n  useChatAreaContext,\n  useChatAreaStoreSet,\n} from './use-chat-area-context';\n\n/**\n * Acquire containers for use in non-responsive environments\n */\nexport const useMethodCommonDeps = (): MethodCommonDeps => {\n  const context = useChatAreaContext();\n  const loadMoreClient = useLoadMoreClient();\n  const chatActionLockService = useChatActionLockService();\n  const storeSet = useChatAreaStoreSet();\n\n  return {\n    context,\n    storeSet,\n    services: {\n      loadMoreClient,\n      chatActionLockService,\n    },\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const computedStyleToNumber = (stringifyStyle: string) =>\n  parseFloat(stringifyStyle);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useSize } from 'ahooks';\n\nimport { computedStyleToNumber } from '../../utils/dom/computed-style-to-number';\nimport { usePreference } from '../../context/preference';\n\nexport const useComputeScrollViewSize = ({\n  scrollViewWrapper,\n}: {\n  scrollViewWrapper: HTMLDivElement | null | undefined;\n}) => {\n  const { isOnboardingCentered, enableImageAutoSize } = usePreference();\n  const sizeTarget =\n    isOnboardingCentered || enableImageAutoSize ? scrollViewWrapper : null;\n  const scrollViewSize = useSize(sizeTarget);\n  if (!sizeTarget || !scrollViewSize) {\n    return;\n  }\n  const computedStyle = getComputedStyle(sizeTarget);\n\n  return {\n    ...scrollViewSize,\n    paddingLeft: computedStyleToNumber(\n      computedStyle.getPropertyValue('padding-left'),\n    ),\n    paddingRight: computedStyleToNumber(\n      computedStyle.getPropertyValue('padding-right'),\n    ),\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useChatAreaStoreSet } from '../context/use-chat-area-context';\nimport { useUploadController } from '../../context/upload-controller-context';\n\nexport const useDeleteFile = () => {\n  const { useBatchFileUploadStore } = useChatAreaStoreSet();\n  const { cancelUploadById } = useUploadController();\n  return (fileId: string) => {\n    const { immerDeleteFileDataById } = useBatchFileUploadStore.getState();\n    immerDeleteFileDataById(fileId);\n    cancelUploadById(fileId);\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, useRef, useState } from 'react';\n\nimport { nanoid } from 'nanoid';\n\nimport { checkHasFileOnDrag, getFileListByDrag } from '../../utils/upload';\nimport { localLog } from '../../utils/local-log';\nimport { usePreference } from '../../context/preference';\nimport { useValidateFileList } from './use-validate-file-list';\nimport { useCreateFileAndUpload } from './use-upload';\n\nexport const useDragUpload = (closeDelay = 100) => {\n  const [isDragOver, setIsDragOver] = useState(false);\n  const uploadFile = useCreateFileAndUpload();\n  const ref = useRef<HTMLDivElement>(null);\n  const { fileLimit, enableMultimodalUpload, enableDragUpload } =\n    usePreference();\n  const validateFileList = useValidateFileList();\n\n  const timer = useRef<ReturnType<typeof setTimeout> | null>(null);\n\n  const clearTimer = () => {\n    if (!timer.current) {\n      return;\n    }\n    clearTimeout(timer.current);\n    timer.current = null;\n  };\n\n  useEffect(() => {\n    const target = ref.current;\n    /**\n     * The drag-and-drop upload function needs to be used with the multi-modal message function.\n     */\n    if (!enableMultimodalUpload || !enableDragUpload) {\n      return;\n    }\n\n    if (!target) {\n      localLog('No Drag Target');\n      return;\n    }\n\n    const onDragEnter = (e: HTMLElementEventMap['dragenter']) => {\n      localLog('dragenter', e);\n      clearTimer();\n      if (!checkHasFileOnDrag(e)) {\n        return;\n      }\n\n      setIsDragOver(true);\n    };\n\n    const onDragOver = (e: HTMLElementEventMap['dragover']) => {\n      /**\n       * {@link https://segmentfault.com/q/1010000011746669}\n       * Principle:\n       * The default behavior blocked here is to enable editable mode, specifically the document.designMode property,\n       * This property is turned off by default, and when turned on, you can edit the webpage.\n       * The way to open it is document.designMode = \"on\"; after opening it, there is no need to block the default in the monitor dragover event.\n       */\n      e.preventDefault();\n      clearTimer();\n      localLog('dragover', e);\n      if (!checkHasFileOnDrag(e)) {\n        return;\n      }\n      setIsDragOver(true);\n    };\n    const onDragLeave = (e: HTMLElementEventMap['dragleave']) => {\n      clearTimer();\n      // The target that fires the onDragEnter event for the first time will also fire onDragLeave for the last time, both events have the same target\n      // In the drag diagram, onDragLeave will be triggered when entering child dom, but the target of this event is different from the target fired for the first time.\n      localLog('dragleave', {\n        e,\n      });\n\n      timer.current = setTimeout(() => {\n        setIsDragOver(false);\n      }, closeDelay);\n    };\n    const onDragDrop = (e: HTMLElementEventMap['drop']) => {\n      localLog('dragdrop', e);\n      clearTimer();\n\n      if (!checkHasFileOnDrag(e)) {\n        return;\n      }\n      setIsDragOver(false);\n      e.preventDefault();\n      const fileList = getFileListByDrag(e);\n\n      const verifiedFileList = validateFileList({ fileLimit, fileList });\n\n      // file validation\n      if (!verifiedFileList.length) {\n        return;\n      }\n\n      verifiedFileList.forEach(file => {\n        uploadFile(nanoid(), file);\n      });\n    };\n    target.addEventListener('dragenter', onDragEnter);\n    target.addEventListener('dragover', onDragOver);\n    target.addEventListener('dragleave', onDragLeave);\n    target.addEventListener('drop', onDragDrop);\n\n    return () => {\n      clearTimer();\n      target.removeEventListener('dragenter', onDragEnter);\n      target.removeEventListener('dragover', onDragOver);\n      target.removeEventListener('dragleave', onDragLeave);\n      target.removeEventListener('drop', onDragDrop);\n    };\n  }, [enableMultimodalUpload, ref.current]);\n\n  return { ref, isDragOver };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ClipboardEvent } from 'react';\n\nimport { nanoid } from 'nanoid';\n\nimport { getFileListByPaste } from '../../utils/upload';\nimport { usePreference } from '../../context/preference';\nimport { useValidateFileList } from './use-validate-file-list';\nimport { useCreateFileAndUpload } from './use-upload';\n\nexport const usePasteUpload = () => {\n  const uploadFile = useCreateFileAndUpload();\n  const { fileLimit, enablePasteUpload } = usePreference();\n  const validateFileList = useValidateFileList();\n\n  return (e: ClipboardEvent<HTMLTextAreaElement>) => {\n    if (!enablePasteUpload) {\n      return;\n    }\n\n    const fileList = getFileListByPaste(e);\n\n    // If the number of pasted files is empty, return\n    if (!fileList.length) {\n      return;\n    }\n\n    // Block default paste behavior\n    e.preventDefault();\n\n    const verifiedFileList = validateFileList({ fileLimit, fileList });\n\n    // file validation\n    if (!verifiedFileList.length) {\n      return;\n    }\n\n    verifiedFileList.forEach(file => {\n      uploadFile(nanoid(), file);\n    });\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useChatAreaStoreSet } from '../context/use-chat-area-context';\nimport { FileStatus, FileType } from '../../store/types';\nimport { useUploadController } from '../../context/upload-controller-context';\nimport { MAX_UPLOAD_PROGRESS } from '../../constants/file';\n\nconst useUpload = () => {\n  const { useBatchFileUploadStore, useSenderInfoStore } = useChatAreaStoreSet();\n\n  const { createControllerAndUpload, cancelUploadById } = useUploadController();\n  const userInfo = useSenderInfoStore(state => state.userInfo);\n  return (fileId: string, file: File) => {\n    if (!userInfo) {\n      throw new Error('failed to get user info');\n    }\n\n    const { immerUpdateFileDataById } = useBatchFileUploadStore.getState();\n    createControllerAndUpload({\n      fileId,\n      file,\n      userId: userInfo.id,\n      onReady: (_e, id) => {\n        immerUpdateFileDataById(id, data => {\n          data.status = FileStatus.Uploading;\n        });\n      },\n      onProgress: (event, id) => {\n        immerUpdateFileDataById(id, data => {\n          data.percent = event.percent;\n        });\n      },\n      onComplete: ({ uploadResult }, id) => {\n        immerUpdateFileDataById(id, data => {\n          data.status = FileStatus.Success;\n          data.percent = MAX_UPLOAD_PROGRESS;\n          const uri = uploadResult.Uri;\n\n          if (!uri) {\n            data.status = FileStatus.Error;\n            throw new Error('upload complete without uri');\n          }\n\n          data.uri = uri;\n\n          if (data.fileType !== FileType.Image) {\n            return;\n          }\n\n          data.meta = {\n            width: uploadResult.ImageWidth ?? 0,\n            height: uploadResult.ImageHeight ?? 0,\n          };\n        });\n      },\n      onError: (_e, id) => {\n        immerUpdateFileDataById(id, data => {\n          data.status = FileStatus.Error;\n        });\n        cancelUploadById(id);\n      },\n    });\n  };\n};\n\nexport const useCreateFileAndUpload = () => {\n  const { useBatchFileUploadStore } = useChatAreaStoreSet();\n  const upload = useUpload();\n  return (fileId: string, file: File) => {\n    const { immerCreateFileData } = useBatchFileUploadStore.getState();\n    immerCreateFileData(fileId, file);\n    upload(fileId, file);\n  };\n};\n\nexport const useRetryUpload = () => {\n  const upload = useUpload();\n  const { useBatchFileUploadStore } = useChatAreaStoreSet();\n  return (fileId: string, file: File) => {\n    const { immerUpdateFileDataById } = useBatchFileUploadStore.getState();\n    immerUpdateFileDataById(fileId, state => {\n      state.percent = 0;\n      state.status = FileStatus.Init;\n    });\n    upload(fileId, file);\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { I18n } from '@coze-arch/i18n';\nimport { Toast } from '@coze-arch/bot-semi';\nimport { MAX_FILE_MBYTE } from '@coze-common/chat-uikit-shared';\n\nimport { useChatAreaStoreSet } from '../context/use-chat-area-context';\nimport { isNotEmptyFile, isFileSizeNotExceed } from '../../utils/upload';\nimport { isFileCountExceedsLimit } from '../../utils/is-file-count-exceeds-limit';\nimport {\n  FILE_EXCEEDS_LIMIT_I18N_KEY,\n  getFileSizeReachLimitI18n,\n} from '../../constants/file';\n\nexport const useValidateFileList = () => {\n  const { useBatchFileUploadStore } = useChatAreaStoreSet();\n\n  return ({ fileLimit, fileList }: { fileList: File[]; fileLimit: number }) => {\n    if (!fileList.length) {\n      return [];\n    }\n\n    const hasExceedSizeFile = !fileList.every(isFileSizeNotExceed);\n    const hasEmptyFile = !fileList.every(isNotEmptyFile);\n\n    // TODO: The case of file.size error needs to be checked again.\n    if (hasExceedSizeFile) {\n      Toast.warning({\n        content: getFileSizeReachLimitI18n({\n          limitText: `${MAX_FILE_MBYTE}MB`,\n        }),\n        showClose: false,\n      });\n    }\n\n    if (hasEmptyFile) {\n      Toast.warning({\n        content: I18n.t('upload_empty_file'),\n        showClose: false,\n      });\n    }\n\n    const filteredFileList = fileList\n      .filter(isFileSizeNotExceed)\n      .filter(isNotEmptyFile);\n\n    if (\n      isFileCountExceedsLimit({\n        fileCount: filteredFileList.length,\n        fileLimit,\n        existingFileCount: useBatchFileUploadStore\n          .getState()\n          .getExistingFileCount(),\n      })\n    ) {\n      Toast.warning({\n        content: I18n.t(FILE_EXCEEDS_LIMIT_I18N_KEY),\n        showClose: false,\n      });\n      return [];\n    }\n\n    return filteredFileList;\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useChatAreaStoreSet } from '../context/use-chat-area-context';\nimport {\n  isAnswerFinishVerboseMessage,\n  isFakeInterruptVerboseMessage,\n} from '../../utils/verbose';\nimport { findMessageById, getIsPureAnswerMessage } from '../../utils/message';\nimport { type Message, type MessageGroup } from '../../store/types';\nimport { type MessagesStore } from '../../store/messages';\n\nexport const getPureAnswerMessagesByGroup = (\n  useMessagesStore: MessagesStore,\n  groupId?: string,\n) => {\n  const { messages, messageGroupList } = useMessagesStore.getState();\n  const targetGroup = messageGroupList.find(g => g.groupId === groupId);\n  if (!targetGroup) {\n    return null;\n  }\n  return targetGroup.memberSet.llmAnswerMessageIdList\n    .map(id => findMessageById(messages, id))\n    .filter((msg): msg is Message => !!msg)\n    .filter(getIsPureAnswerMessage);\n};\n\nexport const getLastPureAnswerMessage = (\n  useMessagesStore: MessagesStore,\n  groupId?: string,\n) => {\n  const messages = getPureAnswerMessagesByGroup(useMessagesStore, groupId);\n  if (!messages) {\n    return null;\n  }\n  return messages.at(0) || null;\n};\n\nexport const useIsGroupAnswerFinish = ({ memberSet }: MessageGroup) => {\n  const { useMessagesStore } = useChatAreaStoreSet();\n\n  return useMessagesStore(state => {\n    const functionCallMessages = memberSet.functionCallMessageIdList.map(id =>\n      state.findMessage(id),\n    );\n    const hasFinalAnswer = functionCallMessages.some(\n      message => message && isAnswerFinishVerboseMessage(message),\n    );\n    return Boolean(hasFinalAnswer);\n  });\n};\n\n// Message of non-real operation abort\nexport const useIsGroupFakeInterruptAnswer = ({ memberSet }: MessageGroup) => {\n  const { useMessagesStore } = useChatAreaStoreSet();\n\n  return useMessagesStore(state => {\n    const functionCallMessages = memberSet.functionCallMessageIdList.map(id =>\n      state.findMessage(id),\n    );\n\n    const hasFakeInterruptMessage = functionCallMessages.some(\n      message => message && isFakeInterruptVerboseMessage(message),\n    );\n    return Boolean(hasFakeInterruptMessage);\n  });\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, useRef } from 'react';\n\nimport { useImperativeLayoutEffect } from '@coze-common/chat-hooks';\nimport {\n  type ClearMessageContextProps,\n  ContentType,\n  type Message,\n} from '@coze-common/chat-core';\n\nimport {\n  useChatAreaContext,\n  useChatAreaStoreSet,\n} from '../context/use-chat-area-context';\nimport { getNewConversationDomId } from '../../utils/get-new-conversation-dom-id';\nimport { fixMessageStruct } from '../../service/fix-message/fix-message-struct';\nimport { ReportEventNames, getReportError } from '../../report-events';\nimport { useLoadMoreClient } from '../../context/load-more';\nimport { useChatActionLockService } from '../../context/chat-action-lock';\nimport { useStopResponding } from './use-stop-responding';\n\nconst DELAY_TIME = 150;\n/**\n * Clear session context\n */\n\nexport const useClearContext = () => {\n  const { reporter, eventCallback, lifeCycleService } = useChatAreaContext();\n\n  const {\n    useGlobalInitStore,\n    useSectionIdStore,\n    useSuggestionsStore,\n    useMessagesStore,\n    useSelectionStore,\n  } = useChatAreaStoreSet();\n\n  const { setLatestSectionId } = useSectionIdStore();\n  const { loadEagerly } = useLoadMoreClient();\n  const addMessages = useMessagesStore(state => state.addMessages);\n  const chatActionLockService = useChatActionLockService();\n  const stopResponding = useStopResponding();\n  const chatCore = useGlobalInitStore(state => state.getChatCore());\n  const clearSuggestions = useSuggestionsStore(state => state.clearSuggestions);\n\n  const latestOnboardingId = useSelectionStore(state =>\n    state.onboardingIdList?.at(-1),\n  );\n\n  const requireScrollIntoView = useImperativeLayoutEffect(() => {\n    const dom = document.getElementById(\n      getNewConversationDomId(latestOnboardingId),\n    );\n    dom?.scrollIntoView();\n  });\n  const taskIdRef = useRef<NodeJS.Timeout | null>(null);\n  useEffect(\n    () => () => {\n      if (!taskIdRef.current) {\n        return;\n      }\n\n      clearTimeout(taskIdRef.current);\n    },\n    [],\n  );\n\n  return async () => {\n    if (chatActionLockService.globalAction.getIsLock('clearContext')) {\n      return;\n    }\n    try {\n      chatActionLockService.globalAction.lock('clearContext', null);\n      await loadEagerly();\n      const clearMessageContextParams: Pick<\n        ClearMessageContextProps,\n        'insert_history_message_list'\n      > = {\n        insert_history_message_list: [],\n      };\n\n      const newClearMessageContextParams =\n        eventCallback?.onClearContextBefore?.(clearMessageContextParams);\n\n      const processedClearMessageContextParams =\n        await lifeCycleService.command.onBeforeClearContext({\n          ctx: newClearMessageContextParams ?? clearMessageContextParams,\n        });\n\n      await stopResponding();\n      const res = await chatCore.clearMessageContext(\n        processedClearMessageContextParams,\n      );\n      if (!res) {\n        throw new Error('fail to get clearMessageContext res');\n      }\n\n      const { new_section_id, new_section_message_list } = res;\n      setLatestSectionId(new_section_id);\n      clearSuggestions();\n\n      if (new_section_message_list?.length) {\n        addMessages(\n          new_section_message_list.map((msg: Message<ContentType>) =>\n            fixMessageStruct(msg, reporter),\n          ),\n          { toLatest: true },\n        );\n      }\n\n      const hasCardMessage = new_section_message_list?.some(\n        (msg: Message<ContentType>) => msg.content_type === ContentType.Card,\n      );\n\n      /**\n       * TODO: Temporary Solutions\n       * The reason for the problem is that the loading of Card is asynchronous and cannot be covered by layoutEffect;\n       * Temporary solution: use setTimeout to solve the phenomenon first\n       * Long-term plan: The card is required to provide the rendered eventCallback, and the rendered events are scrolled by collecting the rendered events\n       */\n      if (hasCardMessage) {\n        const taskId = setTimeout(() => {\n          requireScrollIntoView();\n        }, DELAY_TIME);\n\n        taskIdRef.current = taskId;\n      } else {\n        requireScrollIntoView();\n      }\n\n      reporter.event({ eventName: ReportEventNames.ClearContext });\n      eventCallback?.onClearContextAfter?.();\n      await lifeCycleService.command.onAfterClearContext();\n    } catch (e) {\n      eventCallback?.onClearContextError?.();\n      await lifeCycleService.command.onClearContextError();\n      reporter.errorEvent({\n        eventName: ReportEventNames.ClearContext,\n        ...getReportError(e),\n      });\n    } finally {\n      chatActionLockService.globalAction.unlock('clearContext');\n    }\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getUnselectAllImplement } from '../public/use-unselect-all';\nimport { useMethodCommonDeps } from '../context/use-method-common-deps';\nimport { FileManagerEventNames, fileManager } from '../../utils/file-manage';\nimport { ReportEventNames, getReportError } from '../../report-events';\nimport { type MethodCommonDeps } from '../../plugin/types';\nimport { getStopRespondingImplement } from './use-stop-responding';\n\nexport const useClearHistory = () => {\n  const commonDeps = useMethodCommonDeps();\n\n  const fn = getClearHistoryImplement(commonDeps);\n  return fn;\n};\n\nexport const getClearHistoryImplement =\n  (deps: MethodCommonDeps) => async () => {\n    const {\n      context: { lifeCycleService, reporter, eventCallback },\n      storeSet,\n      services: { loadMoreClient, chatActionLockService },\n    } = deps;\n\n    const {\n      useGlobalInitStore,\n      useMessagesStore,\n      useSectionIdStore,\n      useSuggestionsStore,\n    } = storeSet;\n    const { setLatestSectionId } = useSectionIdStore.getState();\n    const chatCore = useGlobalInitStore.getState().getChatCore();\n    const { clearMessage } = useMessagesStore.getState();\n    const { clearSuggestions } = useSuggestionsStore.getState();\n    const unselectAll = getUnselectAllImplement(deps);\n    const stopResponding = getStopRespondingImplement(deps);\n\n    if (chatActionLockService.globalAction.getIsLock('clearHistory')) {\n      return;\n    }\n    chatActionLockService.globalAction.lock('clearHistory', null);\n\n    try {\n      eventCallback?.onClearHistoryBefore?.();\n      await lifeCycleService.command.onBeforeClearHistory();\n      fileManager.emit(FileManagerEventNames.CANCEL_UPLOAD_FILE);\n\n      /**\n       * Note that the order here must be to call the break_message interface first, then the clear_history interface\n       * The order cannot be changed, otherwise the interface will report an error.\n       */\n      await stopResponding();\n      const res = await chatCore.clearHistory();\n\n      unselectAll();\n      clearMessage();\n      clearSuggestions();\n\n      const newSectionId = res?.new_section_id;\n\n      if (!newSectionId) {\n        throw new Error('clear history got no section id');\n      }\n      setLatestSectionId(res.new_section_id);\n      reporter.successEvent({ eventName: ReportEventNames.ClearHistory });\n    } catch (e) {\n      reporter.errorEvent({\n        eventName: ReportEventNames.ClearHistory,\n        ...getReportError(e),\n      });\n    } finally {\n      chatActionLockService.globalAction.unlock('clearHistory');\n      loadMoreClient.onClearHistory();\n      eventCallback?.onClearHistoryAfter?.();\n      await lifeCycleService.command.onAfterClearHistory();\n    }\n  };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  useChatAreaContext,\n  useChatAreaStoreSet,\n} from '../context/use-chat-area-context';\nimport { deleteMessageGroupById } from '../../utils/message-group/message-group';\nimport { useChatActionLockService } from '../../context/chat-action-lock';\n\n// File messages and picture messages that are being uploaded are deleted, and side effects need to be cleared &\nexport const useDeleteMessageGroup = () => {\n  const context = useChatAreaContext();\n  const storeSet = useChatAreaStoreSet();\n  const chatActionLockService = useChatActionLockService();\n\n  return (groupId: string) =>\n    deleteMessageGroupById(groupId, {\n      ...context,\n      storeSet,\n      chatActionLockService,\n    });\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useChatAreaStoreSet } from '../context/use-chat-area-context';\n\nexport const useIsClearMessageHistoryLock = () => {\n  const { useChatActionStore } = useChatAreaStoreSet();\n  return useChatActionStore(state =>\n    Boolean(state.globalActionLock.clearHistory),\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { usePreference } from '../../context/preference';\nimport { useMessageBoxContext } from '../../context/message-box';\n\nexport const useIsRenderAnswerAction = () => {\n  const { readonly, enableMessageBoxActionBar } = usePreference();\n  const { isGroupChatActive } = useMessageBoxContext();\n  return enableMessageBoxActionBar && !isGroupChatActive && !readonly;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { debounce } from 'lodash-es';\nimport {\n  compareInt64,\n  getReportError,\n  safeAsyncThrow,\n} from '@coze-common/chat-area-utils';\nimport { type Reporter } from '@coze-arch/logger';\nimport { DeveloperApi } from '@coze-arch/bot-api';\n\nimport { type UpdateMessageIndex } from '../../store/message-index';\nimport { ReportErrorEventNames } from '../../report-events/report-event-names';\nimport { ReportEventNames } from '../../report-events';\nimport {\n  MARK_MESSAGE_READ_DEBOUNCE_INTERVAL,\n  MARK_MESSAGE_READ_DEBOUNCE_MAX_WAIT,\n} from '../../constants/message';\n\nexport interface EnvInfo {\n  conversationId: string | null;\n  currentReadIndex: string;\n}\n\nexport class MarkReadHelper {\n  public updateIndex: UpdateMessageIndex;\n  public reporter: Reporter;\n  public getEnvInfo: () => EnvInfo;\n\n  constructor({\n    getEnvInfo,\n    reporter,\n    updateIndex,\n  }: {\n    getEnvInfo: () => EnvInfo;\n    reporter: Reporter;\n    updateIndex: UpdateMessageIndex;\n  }) {\n    this.getEnvInfo = getEnvInfo;\n    this.reporter = reporter;\n    this.updateIndex = updateIndex;\n  }\n}\n\nexport class MarkReadService {\n  private index = '0';\n\n  constructor(private getHelper: () => MarkReadHelper) {}\n\n  public requireMarkRead = (index: string) => {\n    if (compareInt64(index).greaterThan(this.index)) {\n      this.index = index;\n    }\n    this.throttledMarkRead();\n  };\n\n  private throttledMarkRead = debounce(\n    () => this.executeMarkRead(),\n    MARK_MESSAGE_READ_DEBOUNCE_INTERVAL,\n    {\n      leading: false,\n      trailing: true,\n      maxWait: MARK_MESSAGE_READ_DEBOUNCE_MAX_WAIT,\n    },\n  );\n\n  private executeMarkRead = async () => {\n    const readIndex = this.index;\n    const { reporter, updateIndex, getEnvInfo } = this.getHelper();\n    const { conversationId, currentReadIndex } = getEnvInfo();\n    if (!conversationId) {\n      safeAsyncThrow('get no conversationId');\n      return;\n    }\n    if (!compareInt64(readIndex).greaterThan(currentReadIndex)) {\n      return;\n    }\n    try {\n      const res = await DeveloperApi.MarkRead({\n        conversation_id: conversationId || '',\n        mark_time: Date.now(),\n        read_message_index: readIndex,\n      });\n      updateIndex({\n        readIndex: res.read_message_index,\n      });\n\n      reporter.event({\n        eventName: ReportEventNames.MarkMessageRead,\n        meta: {\n          read_index: readIndex,\n        },\n      });\n    } catch (e) {\n      reporter.errorEvent({\n        eventName: ReportErrorEventNames.MarkMessageReadFail,\n        ...getReportError(e),\n      });\n    }\n  };\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useMemo, useRef } from 'react';\n\nimport { useReporter } from '../public/common';\nimport { useChatAreaStoreSet } from '../context/use-chat-area-context';\nimport type { Message } from '../../store/types';\nimport { MarkReadHelper, MarkReadService } from '../../service/mark-read';\nimport { usePreference } from '../../context/preference';\nimport { useMarkReadService } from '../../context/after-init-service';\n\nexport const usePrepareMarkMessageReadService = () => {\n  const reporter = useReporter();\n  const { useMessageIndexStore, useGlobalInitStore } = useChatAreaStoreSet();\n\n  const helperRef = useRef<MarkReadHelper | null>(null);\n  helperRef.current = new MarkReadHelper({\n    getEnvInfo: () => ({\n      conversationId: useGlobalInitStore.getState().conversationId,\n      currentReadIndex: useMessageIndexStore.getState().readIndex,\n    }),\n    reporter,\n    updateIndex: useMessageIndexStore.getState().updateIndex,\n  });\n\n  const controller = useMemo(\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- brother, specify yes\n    () => new MarkReadService(() => helperRef.current!),\n    [],\n  );\n  return controller;\n};\n\n/**\n * The UI component uses this to read and report the message.\n * Comply with'enableMarkRead ' (default false) configuration\n */\nexport const useMarkMessageRead = () => {\n  const markReadService = useMarkReadService();\n  const { enableMarkRead } = usePreference();\n  const reported = useRef(false);\n  const { useMessageIndexStore } = useChatAreaStoreSet();\n  const reportMarkRead = (\n    message: Pick<\n      Message,\n      'message_id' | 'source' | 'content' | 'message_index'\n    >,\n  ) => {\n    if (\n      !enableMarkRead ||\n      useMessageIndexStore.getState().ignoreIndexAndHistoryMessages\n    ) {\n      return;\n    }\n\n    const index = message.message_index;\n    if (reported.current || index === undefined) {\n      return;\n    }\n    markReadService.requireMarkRead(index);\n    reported.current = true;\n  };\n\n  return reportMarkRead;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { nanoid } from 'nanoid';\nimport { cloneDeep } from 'lodash-es';\nimport { type Reporter } from '@coze-arch/logger';\n\nimport { type Message } from '../store/types';\nimport { ReportEventNames } from '../report-events/report-event-names';\n\nexport const getRegenerateMessage = ({\n  userMessage,\n  reporter,\n}: {\n  userMessage: Message;\n  reporter: Reporter;\n}) => {\n  const clonedMessage = cloneDeep(userMessage);\n  const hasLocalMessageId = Boolean(clonedMessage.extra_info.local_message_id);\n  const isFromHistory = Boolean(clonedMessage._fromHistory);\n  if (hasLocalMessageId) {\n    return clonedMessage;\n  }\n\n  if (!isFromHistory) {\n    reporter.event({\n      eventName: ReportEventNames.NonHistoricalMessageWithoutLocalId,\n    });\n  }\n\n  clonedMessage.extra_info.local_message_id = nanoid();\n\n  return clonedMessage;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type Reporter } from '@coze-arch/logger';\n\nimport { findMessageById, getMessageUniqueKey } from '../message';\nimport { getRegenerateMessage } from '../get-regenerate-message';\nimport { type MessageGroup } from '../../store/types';\nimport { type ChatActionLockService } from '../../service/chat-action-lock';\nimport { type useSendMessageAndAutoUpdate } from '../../hooks/messages/use-send-message/new-message';\nimport { type StoreSet } from '../../context/chat-area-context/type';\nimport { checkNoneMessageGroupMemberLeft } from './message-group-exhaustive-check';\n\nexport const regenerateMessage = async ({\n  messageGroup: { memberSet, groupId },\n  context: { storeSet, chatActionLockService, reporter, sendMessage },\n}: {\n  messageGroup: MessageGroup;\n  context: {\n    storeSet: Pick<StoreSet, 'useSuggestionsStore' | 'useMessagesStore'>;\n    chatActionLockService: ChatActionLockService;\n    reporter: Reporter;\n    sendMessage: ReturnType<typeof useSendMessageAndAutoUpdate>;\n  };\n}) => {\n  if (chatActionLockService.answerAction.getIsLock(groupId, 'regenerate')) {\n    return;\n  }\n  if (chatActionLockService.globalAction.getIsLock('sendMessageToACK')) {\n    return;\n  }\n  const { useMessagesStore, useSuggestionsStore } = storeSet;\n  const { clearSuggestions } = useSuggestionsStore.getState();\n  const { deleteMessageByIdList, messages } = useMessagesStore.getState();\n  const {\n    userMessageId,\n    llmAnswerMessageIdList,\n    functionCallMessageIdList,\n    followUpMessageIdList,\n    ...rest\n  } = memberSet;\n  checkNoneMessageGroupMemberLeft(rest);\n\n  if (!userMessageId) {\n    throw new Error('regenerate message failed to get userMessageId');\n  }\n\n  const userMessage = findMessageById(messages, userMessageId);\n\n  if (!userMessage) {\n    throw new Error('regenerate message error: failed to get userMessage');\n  }\n\n  deleteMessageByIdList(functionCallMessageIdList);\n  deleteMessageByIdList(llmAnswerMessageIdList);\n  deleteMessageByIdList(followUpMessageIdList);\n  clearSuggestions();\n\n  const toRegenerateMessage = getRegenerateMessage({ userMessage, reporter });\n  try {\n    chatActionLockService.answerAction.lock(groupId, 'regenerate');\n    chatActionLockService.globalAction.lock('sendMessageToACK', {\n      messageUniqKey: getMessageUniqueKey(toRegenerateMessage),\n    });\n\n    await sendMessage(\n      {\n        message: toRegenerateMessage,\n        options: { isRegenMessage: true },\n      },\n      'regenerate',\n    );\n  } finally {\n    chatActionLockService.answerAction.unlock(groupId, 'regenerate');\n    chatActionLockService.globalAction.unlock('sendMessageToACK');\n  }\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useShallow } from 'zustand/react/shallow';\nimport { cloneDeep } from 'lodash-es';\nimport { type ContentType } from '@coze-common/chat-uikit';\nimport {\n  type TextAndFileMixMessageProps,\n  type SendMessageOptions,\n  type NormalizedMessageProps,\n  type UploadPluginInterface,\n} from '@coze-common/chat-core';\nimport { type SendFileMessagePayload } from '@coze-common/chat-uikit-shared';\n\nimport { useChatCore } from '../../context/use-chat-core';\nimport { useChatAreaStoreSet } from '../../context/use-chat-area-context';\nimport { modifyFileMessagePercentAndStatus } from '../../../utils/modify-file-message-percent-and-status';\nimport {\n  getIsImageMessage,\n  toastBySendMessageResult,\n} from '../../../utils/message';\nimport {\n  addFileUploader,\n  fileManager,\n  FileManagerEventNames,\n  removeFileUploader,\n} from '../../../utils/file-manage';\nimport {\n  type FileMessage,\n  FileStatus,\n  type ImageMessage,\n  type MultimodalMessage,\n  type NormalizedFileMessage,\n} from '../../../store/types';\nimport type { EventPayloadMap } from '../../../service/upload-plugin';\nimport type { SendMessageFrom } from '../../../context/chat-area-context/chat-area-callback';\nimport { useSendNewMessage } from './new-message';\n\nconst useCreateImageMessage = () => {\n  const { useSectionIdStore, useFileStore, useWaitingStore, useMessagesStore } =\n    useChatAreaStoreSet();\n  const chatCore = useChatCore();\n  const latestSectionId = useSectionIdStore(state => state.latestSectionId);\n\n  const { updateTemporaryFile } = useFileStore(\n    useShallow(state => ({\n      updateTemporaryFile: state.updateTemporaryFile,\n    })),\n  );\n\n  const { clearSending } = useWaitingStore(\n    useShallow(state => ({\n      clearSending: state.clearSending,\n    })),\n  );\n\n  const { updateMessage, findMessage } = useMessagesStore(\n    useShallow(\n      useShallow(state => ({\n        updateMessage: state.updateMessage,\n        findMessage: state.findMessage,\n      })),\n    ),\n  );\n\n  return (payload: SendFileMessagePayload): ImageMessage => {\n    const { file, mentionList } = payload;\n    const unsentMessage = chatCore.createImageMessage<EventPayloadMap>(\n      {\n        payload: {\n          file,\n          mention_list: mentionList,\n        },\n        pluginUploadManager: (\n          uploader: UploadPluginInterface<EventPayloadMap>,\n        ) => {\n          fileManager.on(\n            FileManagerEventNames.CANCEL_UPLOAD_FILE,\n            localMessageId => {\n              const unsentMessageLocalMessageId =\n                unsentMessage.extra_info.local_message_id;\n              if (localMessageId !== unsentMessageLocalMessageId) {\n                return;\n              }\n              removeFileUploader(unsentMessageLocalMessageId);\n              clearSending();\n            },\n          );\n\n          uploader.on('complete', () => {\n            removeFileUploader(unsentMessage.extra_info.local_message_id);\n            fileManager.off(FileManagerEventNames.CANCEL_UPLOAD_FILE);\n          });\n\n          uploader.on('ready', () => {\n            addFileUploader({\n              localMessageId: unsentMessage.extra_info.local_message_id,\n              uploader,\n            });\n            updateTemporaryFile(\n              unsentMessage.extra_info.local_message_id,\n              payload,\n            );\n          });\n\n          uploader.on('error', () => {\n            const msg = cloneDeep(unsentMessage);\n            removeFileUploader(msg.extra_info.local_message_id);\n            updateTemporaryFile(msg.extra_info.local_message_id, payload);\n\n            if (getIsImageMessage(msg)) {\n              msg._sendFailed = true;\n              msg.is_finish = true;\n            }\n\n            if (findMessage(msg.extra_info.local_message_id)) {\n              updateMessage(msg.extra_info.local_message_id, msg);\n            }\n\n            clearSending();\n          });\n        },\n      },\n      {\n        section_id: latestSectionId,\n      },\n    );\n    return unsentMessage;\n  };\n};\n\n// eslint-disable-next-line max-lines-per-function\nconst useCreateFileMessage = () => {\n  const { useSectionIdStore, useFileStore, useMessagesStore, useWaitingStore } =\n    useChatAreaStoreSet();\n  const chatCore = useChatCore();\n  const latestSectionId = useSectionIdStore(state => state.latestSectionId);\n\n  const { updateTemporaryFile } = useFileStore(\n    useShallow(state => ({\n      updateTemporaryFile: state.updateTemporaryFile,\n    })),\n  );\n\n  const { updateMessage, findMessage } = useMessagesStore(\n    useShallow(\n      useShallow(state => ({\n        updateMessage: state.updateMessage,\n        findMessage: state.findMessage,\n      })),\n    ),\n  );\n\n  const { clearSending } = useWaitingStore(\n    useShallow(state => ({\n      clearSending: state.clearSending,\n    })),\n  );\n\n  return (payload: SendFileMessagePayload): FileMessage => {\n    const { file, mentionList } = payload;\n    const unsentMessage = chatCore.createFileMessage<EventPayloadMap>(\n      {\n        payload: {\n          file,\n          mention_list: mentionList,\n        },\n        pluginUploadManager: (\n          uploader: UploadPluginInterface<EventPayloadMap>,\n        ) => {\n          fileManager.on(\n            FileManagerEventNames.CANCEL_UPLOAD_FILE,\n            localMessageId => {\n              const unsentMessageLocalMessageId =\n                unsentMessage.extra_info.local_message_id;\n              if (localMessageId !== unsentMessageLocalMessageId) {\n                return;\n              }\n              removeFileUploader(unsentMessageLocalMessageId);\n              const msg = modifyFileMessagePercentAndStatus(unsentMessage, {\n                status: FileStatus.Canceled,\n                percent: 0,\n              });\n              msg.is_finish = true;\n              if (findMessage(msg.extra_info.local_message_id)) {\n                updateMessage(msg.extra_info.local_message_id, msg);\n              }\n              clearSending();\n            },\n          );\n\n          uploader.on('progress', info => {\n            const msg = modifyFileMessagePercentAndStatus(unsentMessage, {\n              status: FileStatus.Uploading,\n              percent: info.percent,\n            });\n            if (findMessage(msg.extra_info.local_message_id)) {\n              updateMessage(msg.extra_info.local_message_id, msg);\n            }\n          });\n\n          uploader.on('complete', () => {\n            removeFileUploader(unsentMessage.extra_info.local_message_id);\n            const msg = modifyFileMessagePercentAndStatus(unsentMessage, {\n              status: FileStatus.Success,\n              percent: 100,\n            });\n            if (findMessage(msg.extra_info.local_message_id)) {\n              updateMessage(msg.extra_info.local_message_id, msg);\n            }\n            fileManager.off(FileManagerEventNames.CANCEL_UPLOAD_FILE);\n          });\n\n          uploader.on('ready', () => {\n            addFileUploader({\n              localMessageId: unsentMessage.extra_info.local_message_id,\n              uploader,\n            });\n            updateTemporaryFile(\n              unsentMessage.extra_info.local_message_id,\n              payload,\n            );\n            const msg = modifyFileMessagePercentAndStatus(unsentMessage, {\n              status: FileStatus.Uploading,\n              percent: 0,\n            });\n            if (findMessage(msg.extra_info.local_message_id)) {\n              updateMessage(msg.extra_info.local_message_id, msg);\n            }\n          });\n\n          uploader.on('error', () => {\n            removeFileUploader(unsentMessage.extra_info.local_message_id);\n            updateTemporaryFile(\n              unsentMessage.extra_info.local_message_id,\n              payload,\n            );\n            const msg = modifyFileMessagePercentAndStatus(unsentMessage, {\n              status: FileStatus.Error,\n              percent: 0,\n            });\n            msg._sendFailed = true;\n            msg.is_finish = true;\n\n            if (findMessage(msg.extra_info.local_message_id)) {\n              updateMessage(msg.extra_info.local_message_id, msg);\n            }\n            clearSending();\n          });\n        },\n      },\n      {\n        section_id: latestSectionId,\n      },\n    );\n\n    return unsentMessage;\n  };\n};\n\nexport const useSendFileMessage = () => {\n  const createFileMessage = useCreateFileMessage();\n  const sendMessage = useSendNewMessage();\n\n  return (payload: SendFileMessagePayload, from: SendMessageFrom) => {\n    const unsentMessage = createFileMessage(payload);\n    sendMessage(unsentMessage, from);\n  };\n};\n\nexport const useCreateMultimodalMessage = () => {\n  const { useSectionIdStore } = useChatAreaStoreSet();\n  const chatCore = useChatCore();\n  const latestSectionId = useSectionIdStore(state => state.latestSectionId);\n  return (payload: TextAndFileMixMessageProps): MultimodalMessage => {\n    const unsentMessage = chatCore.createTextAndFileMixMessage(payload, {\n      section_id: latestSectionId,\n    });\n\n    return unsentMessage;\n  };\n};\n\nexport const useSendImageMessage = () => {\n  const createImageMessage = useCreateImageMessage();\n  const sendMessage = useSendNewMessage();\n\n  return (payload: SendFileMessagePayload, from: SendMessageFrom) => {\n    const unsentMessage = createImageMessage(payload);\n    sendMessage(unsentMessage, from);\n  };\n};\n\nexport const useSendMultimodalMessage = () => {\n  const sendMessage = useSendNewMessage();\n  const createMultimodalMessage = useCreateMultimodalMessage();\n  const { useBatchFileUploadStore, useFileStore } = useChatAreaStoreSet();\n  return async (\n    payload: TextAndFileMixMessageProps & { audioFile?: File },\n    from: SendMessageFrom,\n    options?: SendMessageOptions,\n  ) => {\n    const unsentMessage = createMultimodalMessage(payload);\n    useBatchFileUploadStore.getState().clearAllData();\n    if (payload.audioFile) {\n      useFileStore.getState().addAudioFile({\n        localMessageId: unsentMessage.extra_info.local_message_id,\n        audioFile: payload.audioFile,\n      });\n    }\n    const result = await sendMessage(unsentMessage, from, options);\n    toastBySendMessageResult(result);\n  };\n};\nconst useCreateNormalizedMessage = () => {\n  const { useSectionIdStore } = useChatAreaStoreSet();\n  const chatCore = useChatCore();\n  const latestSectionId = useSectionIdStore(state => state.latestSectionId);\n  return <T extends ContentType.Image | ContentType.File>(\n    props: NormalizedMessageProps<T>,\n  ): NormalizedFileMessage =>\n    chatCore.createNormalizedPayloadMessage<T>(props, {\n      section_id: latestSectionId,\n    });\n};\nexport const useSendNormalizedMessage = () => {\n  const sendMessage = useSendNewMessage();\n  const createNormalizedMessage = useCreateNormalizedMessage();\n  const { useBatchFileUploadStore } = useChatAreaStoreSet();\n  return <T extends ContentType.Image | ContentType.File>(\n    props: NormalizedMessageProps<T>,\n    from: SendMessageFrom,\n  ) => {\n    const unsentMessage = createNormalizedMessage(props);\n    useBatchFileUploadStore.getState().clearAllData();\n    sendMessage(unsentMessage, from);\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useShallow } from 'zustand/react/shallow';\nimport { ContentType } from '@coze-common/chat-core';\n\nimport { useCouldSendNewMessage } from '../use-stop-responding';\nimport {\n  useChatAreaContext,\n  useChatAreaStoreSet,\n} from '../../context/use-chat-area-context';\nimport { regenerateMessage as originRegenerateMessage } from '../../../utils/message-group/regenerate-message';\nimport type { Message, MessageGroup } from '../../../store/types';\nimport { useChatActionLockService } from '../../../context/chat-action-lock';\nimport { useSendTextMessage } from './text-message';\nimport { useSendMessageAndAutoUpdate } from './new-message';\nimport { useSendFileMessage, useSendImageMessage } from './file-message';\n\nexport const useResendMessage = () => {\n  const sendTextMessage = useSendTextMessage();\n\n  const { useFileStore, useMessagesStore } = useChatAreaStoreSet();\n\n  const sendFileMessage = useSendFileMessage();\n  const sendImageMessage = useSendImageMessage();\n\n  const temporaryFile = useFileStore(useShallow(state => state.temporaryFile));\n\n  const couldSendMessage = useCouldSendNewMessage();\n\n  return (message: Message) => {\n    const { deleteMessageByIdStruct } = useMessagesStore.getState();\n    if (!couldSendMessage) {\n      return;\n    }\n\n    deleteMessageByIdStruct(message);\n\n    if (message.content_type === ContentType.Text) {\n      sendTextMessage(\n        {\n          text: message.content,\n          mentionList: message.mention_list,\n        },\n        'other',\n      );\n    }\n\n    if ([ContentType.File, ContentType.Image].includes(message.content_type)) {\n      const isFile = message.content_type === ContentType.File;\n\n      const {\n        extra_info: { local_message_id },\n      } = message;\n\n      const file = temporaryFile[local_message_id];\n      if (file) {\n        if (isFile) {\n          sendFileMessage(file, 'other');\n        } else {\n          sendImageMessage(file, 'other');\n        }\n      }\n    }\n  };\n};\n\nexport const useRegenerateMessage = () => {\n  const sendMessage = useSendMessageAndAutoUpdate();\n\n  const { reporter } = useChatAreaContext();\n  const storeSet = useChatAreaStoreSet();\n\n  const chatActionLockService = useChatActionLockService();\n\n  return async (messageGroup: MessageGroup) =>\n    originRegenerateMessage({\n      messageGroup,\n      context: {\n        storeSet,\n        sendMessage,\n        chatActionLockService,\n        reporter,\n      },\n    });\n};\n\n/**\n * Resend messages according to message_id\n */\nexport const useRegenerateMessageByUserMessageId = () => {\n  const regenerateMessage = useRegenerateMessage();\n\n  const { useMessagesStore } = useChatAreaStoreSet();\n\n  return async (messageId: string) => {\n    const { messageGroupList } = useMessagesStore.getState();\n    const messageGroup = messageGroupList.find(\n      ({ memberSet }) => memberSet.userMessageId === messageId,\n    );\n    if (!messageGroup) {\n      throw new Error('regenerate message error: failed to get message');\n    }\n    await regenerateMessage(messageGroup);\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { cloneDeep } from 'lodash-es';\nimport { ContentType, type ChatCore } from '@coze-common/chat-core';\n\nimport { type Message } from '../store/types';\nimport { type MessageStoreStateAction } from '../store/messages';\nimport { type FileAction } from '../store/file';\nimport { getIsMultimodalMessage, getIsTextMessage } from './message';\n\nconst FORM_DATA_KEY = 'file';\n\nexport const builtinASRProcess = async (\n  message: Message,\n  {\n    chatCore,\n    audioFile,\n  }: {\n    chatCore: ChatCore | null;\n    audioFile: File;\n  },\n) => {\n  if (!chatCore) {\n    return;\n  }\n\n  const formData = new FormData();\n  formData.append(FORM_DATA_KEY, audioFile);\n  const response = await chatCore.chatASR(formData);\n  const translationText = response?.data?.text;\n\n  if (!translationText) {\n    return;\n  }\n\n  const clonedMessage = cloneDeep(message);\n  if (getIsTextMessage(clonedMessage)) {\n    clonedMessage.content = translationText;\n  }\n\n  if (getIsMultimodalMessage(clonedMessage)) {\n    const textItem = clonedMessage.content_obj.item_list.find(\n      item => item.type === ContentType.Text,\n    );\n    if (textItem) {\n      textItem.text = translationText;\n      clonedMessage.content = JSON.stringify(clonedMessage.content_obj);\n    }\n  }\n\n  return clonedMessage;\n};\n\nexport const revertVoiceMessageConditionally = ({\n  message,\n  deleteMessageByIdStruct,\n  getAudioProcessStateByLocalId,\n}: {\n  message: Message;\n  getAudioProcessStateByLocalId: FileAction['getAudioProcessStateByLocalId'];\n  deleteMessageByIdStruct: MessageStoreStateAction['deleteMessageByIdStruct'];\n}) => {\n  const localMessageId = message.extra_info.local_message_id;\n  const audioProcessState = getAudioProcessStateByLocalId(localMessageId);\n\n  if (audioProcessState !== 'processing') {\n    return;\n  }\n  deleteMessageByIdStruct(message);\n  return 'reverted';\n};\n\nexport const removeAudioFileAfterSendMessage = ({\n  message,\n  removeAudioFileByLocalId,\n  updateAudioProcessState,\n}: {\n  message: Message;\n  removeAudioFileByLocalId: FileAction['removeAudioFileByLocalId'];\n  updateAudioProcessState: FileAction['updateAudioProcessState'];\n}) => {\n  const localMessageId = message.extra_info.local_message_id;\n  removeAudioFileByLocalId(localMessageId);\n  updateAudioProcessState({ localMessageId, state: 'finish' });\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isFile } from '@coze-common/chat-uikit';\nimport { ContentType } from '@coze-common/chat-core';\n\nimport { FileStatus, type Message } from '../store/types';\nimport { type MessagesStore } from '../store/messages';\n\nexport const buildInProcessSentMessage = (\n  message: Message<ContentType, unknown>,\n  { useMessagesStore }: { useMessagesStore: MessagesStore },\n) => {\n  if (\n    message.content_type === ContentType.File &&\n    isFile(message.content_obj) &&\n    message.content_obj.file_list?.[0]\n  ) {\n    message.content_obj.file_list?.forEach(\n      file => (file.upload_status = FileStatus.Success),\n    );\n    message.content = JSON.stringify(message.content_obj);\n  }\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isError, merge } from 'lodash-es';\nimport websocketManager from '@coze-common/websocket-manager-adapter';\nimport {\n  type ContentType,\n  type ChatCore,\n  type SendMessageOptions,\n  ApiError,\n} from '@coze-common/chat-core';\nimport { APIErrorEvent, emitAPIErrorEvent } from '@coze-arch/bot-http';\nimport { Toast } from '@coze-arch/coze-design';\n\nimport { getStopRespondingImplement } from '../use-stop-responding';\nimport { useMethodCommonDeps } from '../../context/use-method-common-deps';\nimport { proxyFreeze } from '../../../utils/proxy-freeze';\nimport { getMessageUniqueKey } from '../../../utils/message';\nimport {\n  builtinASRProcess,\n  removeAudioFileAfterSendMessage,\n  revertVoiceMessageConditionally,\n} from '../../../utils/builtin-asr-process';\nimport { buildInProcessSentMessage } from '../../../utils/build-in-process-sent-message';\nimport type {\n  FileMessage,\n  ImageMessage,\n  Message,\n  MultimodalMessage,\n  NormalizedFileMessage,\n  TextMessage,\n} from '../../../store/types';\nimport { type UpdateMessage } from '../../../store/messages';\nimport { type FileAction } from '../../../store/file';\nimport {\n  CozeTokenInsufficient,\n  isChatCoreError,\n  parseErrorInfoFromErrorMessage,\n  isToastErrorMessage,\n} from '../../../service/helper/parse-error-info';\nimport { getReportError, ReportEventNames } from '../../../report-events';\nimport { type MethodCommonDeps } from '../../../plugin/types';\nimport type { SendMessageFrom } from '../../../context/chat-area-context/chat-area-callback';\n\nexport const useSendMessageAndAutoUpdate = () => {\n  const deps = useMethodCommonDeps();\n  return getSendMessageAndAutoUpdateImplement(deps);\n};\n\nconst getSendMessageAndAutoUpdateImplement =\n  (deps: MethodCommonDeps) =>\n  async (\n    sendMessageParams: {\n      message: Message;\n      options?: SendMessageOptions;\n    },\n    from: SendMessageFrom,\n  ) => {\n    const stopResponding = getStopRespondingImplement(deps);\n    const {\n      storeSet,\n      context: { eventCallback, lifeCycleService, reporter },\n    } = deps;\n    const {\n      useGlobalInitStore,\n      useMessagesStore,\n      useWaitingStore,\n      useSectionIdStore,\n    } = storeSet;\n    const { chatCore } = useGlobalInitStore.getState();\n    const { updateMessage } = useMessagesStore.getState();\n    const { latestSectionId, setLatestSectionId } =\n      useSectionIdStore.getState();\n    const { startWaiting, startSending, clearSending } =\n      useWaitingStore.getState();\n    const { message: toSenDMessage, options } = sendMessageParams;\n    const stopRespondingPromise = stopResponding();\n\n    const defaultSendMessageOptions = {\n      extendFiled: {\n        device_id: String(websocketManager.deviceId),\n      },\n    };\n\n    const mergedOptions = merge({}, defaultSendMessageOptions, options);\n\n    if (!chatCore) {\n      throw new Error('chatCore is not ready');\n    }\n\n    const sendingMessage: Message = {\n      ...toSenDMessage,\n      is_finish: false,\n    };\n    delete sendingMessage._sendFailed;\n    updateMessage(sendingMessage);\n\n    startSending(sendingMessage);\n\n    try {\n      await stopRespondingPromise;\n      // TODO: A rough implementation that needs to be used temporarily, and needs to be implemented in the future\n      const handledMessageAndOptions = eventCallback?.onBeforeMessageSend?.(\n        {\n          message: proxyFreeze(toSenDMessage),\n          options: proxyFreeze(mergedOptions),\n        },\n        from,\n      );\n\n      const { message: processedMessage, options: processedOptions } =\n        await lifeCycleService.message.onBeforeSendMessage({\n          ctx: {\n            message: handledMessageAndOptions?.message ?? toSenDMessage,\n            options: handledMessageAndOptions?.options ?? mergedOptions,\n            from,\n          },\n        });\n\n      updateMessage(processedMessage);\n\n      const sentMessage = await chatCore.sendMessage(\n        processedMessage,\n        processedOptions,\n      );\n\n      if (sentMessage.section_id !== latestSectionId) {\n        setLatestSectionId(sentMessage.section_id);\n      }\n\n      reporter.successEvent({ eventName: ReportEventNames.SendMessage });\n      buildInProcessSentMessage(sentMessage, {\n        useMessagesStore,\n      });\n      eventCallback?.onMessageSendSuccess?.({ message: sentMessage }, from);\n      await lifeCycleService.message.onAfterSendMessage({\n        ctx: {\n          message: sentMessage,\n          from,\n        },\n      });\n      startWaiting(sentMessage);\n      updateMessage(toSenDMessage, sentMessage);\n    } catch (e) {\n      reporter.errorEvent({\n        eventName: ReportEventNames.SendMessage,\n        ...getReportError(e),\n      });\n      const failMessage: Message = {\n        ...toSenDMessage,\n        _sendFailed: true,\n        is_finish: true,\n      };\n      updateMessage(failMessage);\n      eventCallback?.onMessageSendFail?.({ message: toSenDMessage }, from, e);\n\n      await lifeCycleService.message.onSendMessageError({\n        ctx: {\n          message: failMessage,\n          from,\n          error: e,\n        },\n      });\n\n      if (isError(e)) {\n        const errorData = parseErrorInfoFromErrorMessage(e.message);\n        /**\n         * No error entering sse.\n         * The server level is still combing the error message, and can only toast the messages that have been combed in the whitelist.\n         */\n        if (isChatCoreError(e) && isToastErrorMessage(e.ext.code)) {\n          Toast.error({ content: e.message, showClose: false });\n        }\n        // Enter the sse process but the first chunk is an error\n        if (\n          errorData?.code &&\n          [\n            CozeTokenInsufficient.COZE_TOKEN_INSUFFICIENT,\n            CozeTokenInsufficient.COZE_TOKEN_INSUFFICIENT_WORKFLOW,\n          ].includes(errorData?.code)\n        ) {\n          emitAPIErrorEvent(APIErrorEvent.COZE_TOKEN_INSUFFICIENT);\n        }\n      }\n    } finally {\n      clearSending();\n    }\n  };\n\nexport const useSendNewMessage = () => {\n  const deps = useMethodCommonDeps();\n  return getSendNewMessageImplement(deps);\n};\n\nconst processASRConditionally = async (\n  message: Message<ContentType>,\n  {\n    getAudioFileByLocalId,\n    chatCore,\n    updateMessage,\n    removeAudioFileByLocalId,\n    updateAudioProcessState,\n  }: {\n    chatCore: ChatCore | null;\n    updateMessage: UpdateMessage;\n    getAudioFileByLocalId: FileAction['getAudioFileByLocalId'];\n    removeAudioFileByLocalId: FileAction['removeAudioFileByLocalId'];\n    updateAudioProcessState: FileAction['updateAudioProcessState'];\n  },\n) => {\n  const localMessageId = message.extra_info.local_message_id;\n  const audioFile = getAudioFileByLocalId(localMessageId);\n  if (!audioFile) {\n    return message;\n  }\n\n  if (message.message_id) {\n    return message;\n  }\n\n  updateAudioProcessState({ localMessageId, state: 'processing' });\n  const processedMessage = await builtinASRProcess(message, {\n    chatCore,\n    audioFile,\n  });\n\n  if (!processedMessage) {\n    return;\n  }\n\n  updateMessage(processedMessage);\n\n  return processedMessage;\n};\n\nexport const getSendNewMessageImplement =\n  (deps: MethodCommonDeps) =>\n  async (\n    unsentMessage:\n      | TextMessage\n      | FileMessage\n      | ImageMessage\n      | MultimodalMessage\n      | NormalizedFileMessage,\n    from: SendMessageFrom,\n    options?: SendMessageOptions,\n  ) => {\n    const {\n      context: { lifeCycleService, reporter },\n      services: { chatActionLockService, loadMoreClient },\n      storeSet: { useMessagesStore, useGlobalInitStore, useFileStore },\n    } = deps;\n    if (chatActionLockService.globalAction.getIsLock('sendMessageToACK')) {\n      return 'LOCKED';\n    }\n    const { addMessage, updateMessage, deleteMessageByIdStruct } =\n      useMessagesStore.getState();\n    const {\n      getAudioFileByLocalId,\n      removeAudioFileByLocalId,\n      updateAudioProcessState,\n      getAudioProcessStateByLocalId,\n    } = useFileStore.getState();\n    const { chatCore } = useGlobalInitStore.getState();\n\n    const sendMessage = getSendMessageAndAutoUpdateImplement(deps);\n    try {\n      chatActionLockService.globalAction.lock('sendMessageToACK', {\n        messageUniqKey: getMessageUniqueKey(unsentMessage),\n      });\n\n      await loadMoreClient.loadEagerly();\n      const { message: processedMessage } =\n        await lifeCycleService.message.onBeforeAppendSenderMessageIntoStore({\n          ctx: {\n            message: unsentMessage,\n            from,\n          },\n        });\n\n      addMessage(processedMessage);\n\n      const preReadySendMessage = await processASRConditionally(\n        processedMessage,\n        {\n          chatCore,\n          updateMessage,\n          getAudioFileByLocalId,\n          removeAudioFileByLocalId,\n          updateAudioProcessState,\n        },\n      );\n\n      // The ASR process is abnormal, delete the screen message, and exit.\n      if (!preReadySendMessage) {\n        revertVoiceMessageConditionally({\n          message: processedMessage,\n          getAudioProcessStateByLocalId,\n          deleteMessageByIdStruct,\n        });\n        return 'VOICE_NOT_RECOGNIZE';\n      }\n\n      await lifeCycleService.message.onAfterAppendSenderMessageIntoStore({\n        ctx: {\n          message: preReadySendMessage,\n          from,\n        },\n      });\n\n      await sendMessage(\n        { message: preReadySendMessage, options },\n        from || 'inputAndSend',\n      );\n    } catch (error) {\n      const res = revertVoiceMessageConditionally({\n        message: unsentMessage,\n        getAudioProcessStateByLocalId,\n        deleteMessageByIdStruct,\n      });\n\n      if (res === 'reverted') {\n        if (error instanceof ApiError) {\n          if (\n            error.code ===\n            String(CozeTokenInsufficient.COZE_TOKEN_INSUFFICIENT_VOICE)\n          ) {\n            return 'TOKEN_INSUFFICIENT_VOICE';\n          }\n          if (\n            error.code ===\n            String(CozeTokenInsufficient.COZE_PRO_TOKEN_INSUFFICIENT_VOICE)\n          ) {\n            return 'PRO_TOKEN_INSUFFICIENT_VOICE';\n          }\n        }\n        return 'VOICE_NOT_RECOGNIZE';\n      }\n\n      const customError: Error =\n        error instanceof Error\n          ? error\n          : new Error('use SendNewMessage has some error');\n\n      reporter.error({\n        error: customError,\n        message: 'useSendNewMessage has some error',\n      });\n    } finally {\n      removeAudioFileAfterSendMessage({\n        message: unsentMessage,\n        removeAudioFileByLocalId,\n        updateAudioProcessState,\n      });\n      chatActionLockService.globalAction.unlock('sendMessageToACK');\n    }\n  };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type SendMessageOptions } from '@coze-common/chat-core';\nimport { type SendTextMessagePayload } from '@coze-common/chat-uikit-shared';\n\nimport { useMethodCommonDeps } from '../../context/use-method-common-deps';\nimport { toastBySendMessageResult } from '../../../utils/message';\nimport type { TextMessage } from '../../../store/types';\nimport { type SendMessagePayload } from '../../../service/send-message';\nimport { type MethodCommonDeps } from '../../../plugin/types';\nimport type { SendMessageFrom } from '../../../context/chat-area-context/chat-area-callback';\nimport { getSendNewMessageImplement } from './new-message';\n\nconst getCreateTextMessageImplement =\n  (deps: MethodCommonDeps) =>\n  (payload: SendTextMessagePayload): TextMessage => {\n    const { storeSet } = deps;\n    const { useSectionIdStore, useGlobalInitStore } = storeSet;\n    const chatCore = useGlobalInitStore.getState().getChatCore();\n    const { latestSectionId } = useSectionIdStore.getState();\n    return chatCore.createTextMessage(\n      {\n        payload: {\n          text: payload.text,\n          mention_list: payload.mentionList,\n        },\n      },\n      {\n        section_id: latestSectionId,\n      },\n    );\n  };\n\n/**\n * Send a text message, which needs to be used after successful initialization.\n */\nexport const useSendTextMessage = () => {\n  const deps = useMethodCommonDeps();\n  return getSendTextMessageImplement(deps);\n};\n\nexport const getSendTextMessageImplement =\n  (deps: MethodCommonDeps) =>\n  async (\n    payload: SendMessagePayload,\n    from: SendMessageFrom,\n    options?: SendMessageOptions,\n  ) => {\n    const createTextMessage = getCreateTextMessageImplement(deps);\n    const sendMessage = getSendNewMessageImplement(deps);\n    const unsentMessage = createTextMessage(payload);\n    if (payload.audioFile) {\n      deps.storeSet.useFileStore.getState().addAudioFile({\n        localMessageId: unsentMessage.extra_info.local_message_id,\n        audioFile: payload.audioFile,\n      });\n    }\n    const result = await sendMessage(unsentMessage, from, options);\n    toastBySendMessageResult(result);\n  };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useIsSendMessageLock } from '../public/use-is-send-message-lock';\nimport { useMethodCommonDeps } from '../context/use-method-common-deps';\nimport { useChatAreaStoreSet } from '../context/use-chat-area-context';\nimport { stopResponding } from '../../utils/stop-responding';\nimport { WaitingPhase } from '../../store/waiting';\nimport { type MethodCommonDeps } from '../../plugin/types';\nimport { usePreference } from '../../context/preference';\n\nexport const useCouldSendNewMessage = (): boolean => {\n  const { newMessageInterruptScenario } = usePreference();\n  const { useWaitingStore, useBatchFileUploadStore } = useChatAreaStoreSet();\n\n  const isSendMessageLock = useIsSendMessageLock();\n\n  const hasFileNotSuccess = useBatchFileUploadStore(state =>\n    state.hasFileNotSuccess(),\n  );\n  const baseCouldSendMessage = useWaitingStore(state => {\n    const { waiting, sending } = state;\n    if (!waiting && !sending) {\n      return true;\n    }\n    switch (newMessageInterruptScenario) {\n      case 'replying':\n        return !sending;\n      case 'suggesting':\n        return waiting?.phase === WaitingPhase.Suggestion;\n      case 'never':\n        return false;\n      default:\n        throw new Error(\n          `unexpected interrupt Scenario: ${newMessageInterruptScenario}`,\n        );\n    }\n  });\n\n  return baseCouldSendMessage && !isSendMessageLock && !hasFileNotSuccess;\n};\n\nexport const useStopResponding = () => {\n  const deps = useMethodCommonDeps();\n  return getStopRespondingImplement(deps);\n};\n\nexport const getStopRespondingImplement = (deps: MethodCommonDeps) => () => {\n  const { context, storeSet } = deps;\n  return stopResponding({\n    ...context,\n    storeSet,\n  });\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useChatAreaContext } from '../context/use-chat-area-context';\nimport { usePreference } from '../../context/preference';\n\nexport const useReporter = () => useChatAreaContext().reporter;\n\nexport const useMessageWidth = () => usePreference().messageWidth;\n\nexport const useChatAreaLayout = () => usePreference().layout;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useChatAreaStoreSet } from '../context/use-chat-area-context';\nimport { getIsGlobalActionLockMap } from '../../service/chat-action-lock/helper/action-lock-map';\n\nexport const useIsSendMessageLock = () => {\n  const { useChatActionStore } = useChatAreaStoreSet();\n  const isSendMessageLock = useChatActionStore(state =>\n    getIsGlobalActionLockMap.sendMessageToACK(state.globalActionLock),\n  );\n  return isSendMessageLock;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useShallow } from 'zustand/react/shallow';\n\nimport { useChatAreaStoreSet } from '../context/use-chat-area-context';\n\nexport const useMessagesOverview = () => {\n  const { useMessagesStore, useSectionIdStore } = useChatAreaStoreSet();\n\n  const latestSectionId = useSectionIdStore(state => state.latestSectionId);\n\n  /**\n   * Filter inserted messages\n   */\n  const { isEmpty, latestSectionHasMessage } = useMessagesStore(\n    useShallow(state => ({\n      isEmpty: state.messages.length === 0,\n      // Todo is optimized for group judgment, no need to scan all messages\n      latestSectionHasMessage: !!state.messages.filter(\n        msg => msg.section_id === latestSectionId,\n      ).length,\n    })),\n  );\n\n  return {\n    isEmpty,\n    latestSectionHasMessage,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useScrollViewSize } from '../../context/scroll-view-size';\nimport { usePreference } from '../../context/preference';\n\nexport const useOnboardingCenterOffset = ({\n  onboardingHeight = 0,\n  // Default minimum margin by ui design Top reserved 24px supported by top-safe-area\n  minOffset = 0,\n}: {\n  onboardingHeight?: number;\n  minOffset?: number;\n}) => {\n  const { isOnboardingCentered } = usePreference();\n  const scrollViewSize = useScrollViewSize();\n  if (!isOnboardingCentered) {\n    return;\n  }\n\n  if (!scrollViewSize?.height) {\n    return;\n  }\n\n  return Math.max((scrollViewSize.height - onboardingHeight) / 2, minOffset);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useMethodCommonDeps } from '../context/use-method-common-deps';\nimport { type MethodCommonDeps } from '../../plugin/types';\nimport { type OnboardingSelectChangeParams } from '../../context/chat-area-context/chat-area-callback';\n\nexport const useSelectOnboarding = () => {\n  const deps = useMethodCommonDeps();\n\n  return getSelectOnboardingImplement(deps);\n};\n\nexport const getSelectOnboardingImplement =\n  (deps: MethodCommonDeps) => async (params: OnboardingSelectChangeParams) => {\n    const { context, storeSet } = deps;\n    const { eventCallback, lifeCycleService } = context;\n    const { useSelectionStore } = storeSet;\n    const { setOnboardingSelected, selectedOnboardingId } =\n      useSelectionStore.getState();\n    const hasSelectedOnboarding = Boolean(selectedOnboardingId);\n    setOnboardingSelected(params.selectedId);\n    eventCallback?.onOnboardingSelectChange?.(params, hasSelectedOnboarding);\n    await lifeCycleService.command.onOnboardingSelectChange({\n      ctx: {\n        selected: params,\n        isAlreadyHasSelect: hasSelectedOnboarding,\n        content: params.onboarding.prologue ?? '',\n      },\n    });\n  };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { usePreference } from '../../context/preference';\n\nexport const useShowBackGround = () => {\n  const { showBackground } = usePreference();\n  return showBackground;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useMethodCommonDeps } from '../context/use-method-common-deps';\nimport { type MethodCommonDeps } from '../../plugin/types';\nimport { getSelectOnboardingImplement } from './use-select-onboarding';\n\nexport const useUnselectAll = () => {\n  const deps = useMethodCommonDeps();\n  return getUnselectAllImplement(deps);\n};\n\nexport const getUnselectAllImplement = (deps: MethodCommonDeps) => () => {\n  const { storeSet } = deps;\n  const { useSelectionStore } = storeSet;\n\n  const { clearSelectedReplyIdList } = useSelectionStore.getState();\n  const selectOnboarding = getSelectOnboardingImplement(deps);\n  clearSelectedReplyIdList();\n\n  selectOnboarding({\n    selectedId: null,\n    onboarding: {},\n  });\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState } from 'react';\n\nimport { useShowBackGround } from '../public/use-show-bgackground';\n\ninterface UseBackgroundScrollReturnType {\n  onReachTop: () => void;\n  onLeaveTop: () => void;\n  beforeClassName: string;\n  beforeNode: JSX.Element | null;\n  maskClassName: string;\n  showGradient: boolean;\n}\n\n// In background cover mode scrollView adds the following processing:\n// 1. When there is a top Node, add it after scrolling, a layer of fixed height black gradual change div, the page scrolls down without stiffness\n// 2. Add a layer of mask to the dialogue area, the bottom conversation area gradually changes and disappears, and the bottom of the conversation element is not stiff\nexport const useBackgroundScroll = ({\n  hasHeaderNode,\n  maskNode,\n  styles,\n}: {\n  hasHeaderNode?: boolean;\n  maskNode: JSX.Element;\n  styles: Record<string, string>;\n}): UseBackgroundScrollReturnType => {\n  const [showGradient, setShowGradient] = useState(true);\n  const showBackground = useShowBackGround();\n\n  return {\n    onReachTop: () => setShowGradient(false),\n    onLeaveTop: () => setShowGradient(true),\n    beforeClassName: showBackground ? 'absolute left-0' : '',\n    beforeNode:\n      showGradient && hasHeaderNode && showBackground ? maskNode : null,\n    // Add mask, deal with the bottom of the chat session without gradual change blunt problem\n    maskClassName: showBackground ? styles['scroll-mask'] ?? '' : '',\n    showGradient,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useShallow } from 'zustand/react/shallow';\nimport { type UiKitChatInputButtonStatus } from '@coze-common/chat-uikit-shared';\n\nimport { useMessagesOverview } from '../public/use-messages-overview';\nimport { useCouldSendNewMessage } from '../messages/use-stop-responding';\nimport { useChatAreaStoreSet } from '../context/use-chat-area-context';\nimport { usePreference } from '../../context/preference';\n\nexport const useBuiltinButtonStatus = ({\n  isClearContextButtonDisabled: isClearContextButtonDisabledFromParams,\n  isMoreButtonDisabled: isMoreButtonDisabledFromParams,\n}: Partial<UiKitChatInputButtonStatus>) => {\n  const { useMessagesStore, useWaitingStore, useBatchFileUploadStore } =\n    useChatAreaStoreSet();\n  const isSendingMessage = useWaitingStore(state => Boolean(state.sending));\n  const couldSendMessage = useCouldSendNewMessage();\n  const isSendButtonDisabled = !couldSendMessage;\n  const filesLength = useBatchFileUploadStore(state => state.fileIdList.length);\n  const { fileLimit } = usePreference();\n  const { latestSectionHasMessage } = useMessagesOverview();\n\n  const { hasMessage } = useMessagesStore(\n    useShallow(state => ({\n      hasMessage: Boolean(state.messages.length),\n    })),\n  );\n\n  return {\n    isSendButtonDisabled,\n    isMoreButtonDisabled:\n      isSendButtonDisabled ||\n      filesLength >= fileLimit ||\n      isMoreButtonDisabledFromParams,\n    isClearHistoryButtonDisabled: !hasMessage || isSendingMessage,\n    isClearContextButtonDisabled:\n      !hasMessage ||\n      isSendingMessage ||\n      !latestSectionHasMessage ||\n      isClearContextButtonDisabledFromParams,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useShallow } from 'zustand/react/shallow';\nimport { Layout } from '@coze-common/chat-uikit-shared';\n\nimport { useChatAreaStoreSet } from '../context/use-chat-area-context';\nimport { type Message, type UserSenderInfo } from '../../store/types';\nimport { usePreference } from '../../context/preference';\n\nexport const useDisplayUserInfo = (message: Message) => {\n  const { layout, showUserExtendedInfo } = usePreference();\n  const { useSenderInfoStore } = useChatAreaStoreSet();\n\n  const getMessageUserInfo = useSenderInfoStore(\n    useShallow(state => state.getMessageUserInfo),\n  );\n\n  const userSenderInfo = getMessageUserInfo(message?.sender_id);\n\n  if (!userSenderInfo) {\n    return null;\n  }\n\n  const infoWithoutExtend: UserSenderInfo = {\n    ...userSenderInfo,\n    userLabel: null,\n    userUniqueName: '',\n  };\n\n  if (layout !== Layout.PC || !showUserExtendedInfo) {\n    return infoWithoutExtend;\n  }\n\n  return userSenderInfo;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useShallow } from 'zustand/react/shallow';\nimport copy from 'copy-to-clipboard';\nimport { isFile } from '@coze-common/chat-uikit';\nimport { I18n } from '@coze-arch/i18n';\nimport { UIToast } from '@coze-arch/bot-semi';\nimport {\n  type IEventCallbacks,\n  type SendTextMessagePayload,\n} from '@coze-common/chat-uikit-shared';\n\nimport {\n  useChatAreaContext,\n  useChatAreaStoreSet,\n} from '../context/use-chat-area-context';\nimport { FileManagerEventNames, fileManager } from '../../utils/file-manage';\nimport { EventNames } from '../../utils/event-bus/uikit-event-bus';\nimport { usePreference } from '../../context/preference';\n\nexport const useEventCallbacks = () => {\n  const { eventCallback, lifeCycleService, eventCenter } = useChatAreaContext();\n  const { useFileStore } = useChatAreaStoreSet();\n  const { enableMention } = usePreference();\n\n  const { updatePreviewURL } = useFileStore(\n    useShallow(state => ({\n      updatePreviewURL: state.updatePreviewURL,\n    })),\n  );\n\n  const eventCallbacks: Required<IEventCallbacks> = {\n    onLinkClick(params, e) {\n      eventCallback?.onMessageLinkClick?.(params, e);\n\n      lifeCycleService.command.onMessageLinkClick({\n        ctx: {\n          event: e,\n          ...params.extra,\n        },\n      });\n    },\n    onMessageRetry: () => undefined,\n    onCopyUpload: ({ message: msg, extra: { fileIndex } }) => {\n      if (isFile(msg.content_obj)) {\n        copy(msg.content_obj.file_list[fileIndex ?? 0]?.file_url ?? '');\n        UIToast.success({\n          content: I18n.t('copy_success') ?? 'Copy Successfully',\n        });\n      }\n    },\n    onCancelUpload: ({ message }) =>\n      fileManager.emit(\n        FileManagerEventNames.CANCEL_UPLOAD_FILE,\n        message.extra_info.local_message_id,\n      ),\n    onRetryUpload: ({ message }) => {\n      eventCenter.emit(EventNames.RESEND_MESSAGE, { message });\n    },\n    onImageClick: async ({ extra }) => {\n      eventCallback?.onImageClick\n        ? eventCallback.onImageClick(extra)\n        : updatePreviewURL(extra.url);\n\n      await lifeCycleService.command.onImageClick({\n        ctx: {\n          url: extra.url,\n        },\n      });\n    },\n    onCardSendMsg: ({ extra }) => {\n      const payload: SendTextMessagePayload = {\n        mentionList: enableMention ? extra.mentionList : [],\n        text: extra.msg || '',\n      };\n\n      eventCenter.emit(EventNames.SEND_TEXT_MESSAGE, {\n        ...payload,\n        clickLocation: 'clickCard',\n        options: extra.options,\n      });\n    },\n    onCardUpdateStatus: params => {\n      if (typeof params.extra.action === 'string') {\n        const payload = {\n          messageID: params.message.message_id,\n          action: params.extra.action,\n        };\n\n        eventCenter.emit(EventNames.UPDATE_CARD_STATUS, payload);\n      }\n    },\n    onCardLinkElementEnter: params => {\n      lifeCycleService.command.onCardLinkElementMouseEnter({ ctx: params });\n    },\n    onCardLinkElementLeave: params => {\n      lifeCycleService.command.onCardLinkElementMouseLeave({ ctx: params });\n    },\n    onMdBoxLinkElementEnter: params => {\n      lifeCycleService.command.onMdBoxLinkElementMouseEnter({ ctx: params });\n    },\n    onMdBoxLinkElementLeave: params => {\n      lifeCycleService.command.onMdBoxLinkElementMouseLeave({ ctx: params });\n    },\n    onMdBoxImageElementEnter(params) {\n      lifeCycleService.command.onMdBoxImageElementMouseEnter({ ctx: params });\n    },\n    onMdBoxImageElementLeave(params) {\n      lifeCycleService.command.onMdBoxImageElementMouseLeave({ ctx: params });\n    },\n  };\n\n  return eventCallbacks;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isUndefined } from 'lodash-es';\nimport {\n  EXPECT_CONTEXT_WIDTH_MOBILE,\n  EXPECT_CONTEXT_WIDTH_PC,\n  MD_BOX_INNER_PADDING,\n} from '@coze-common/chat-uikit';\nimport { Layout } from '@coze-common/chat-uikit-shared';\n\nimport { useScrollViewSize } from '../../context/scroll-view-size';\nimport { usePreference } from '../../context/preference';\n\nexport const useUIKitMessageImageAutoSizeConfig = () => {\n  const { enableImageAutoSize, imageAutoSizeContainerWidth, layout } =\n    usePreference();\n  const { width, paddingLeft, paddingRight } = useScrollViewSize() ?? {};\n\n  if (\n    enableImageAutoSize &&\n    isUndefined(imageAutoSizeContainerWidth) &&\n    isUndefined(width)\n  ) {\n    return {\n      enableImageAutoSize: false,\n      imageAutoSizeContainerWidth: undefined,\n    };\n  }\n\n  const mdBoxWidth = (width ?? 0) - (paddingLeft ?? 0) - (paddingRight ?? 0);\n\n  const autoWidth =\n    mdBoxWidth -\n    (layout === Layout.MOBILE\n      ? EXPECT_CONTEXT_WIDTH_MOBILE\n      : EXPECT_CONTEXT_WIDTH_PC) -\n    MD_BOX_INNER_PADDING;\n\n  return {\n    enableImageAutoSize,\n    imageAutoSizeContainerWidth: imageAutoSizeContainerWidth ?? autoWidth,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { PluginName } from './plugin-name';\nexport { PluginName };\n\nexport const enum PluginMode {\n  Readonly = 'readonly',\n  Writeable = 'writeable',\n}\n\n/**\n * Layered design by domain\n * AppLifeCycle: Handles the entire SDK lifecycle, such as initialization, destruction, etc\n * MessageLifeCycle: Handling the lifecycle of the message link\n * CommandLifeCycle: Instructions, events related\n */\nexport type AppLifeCycle =\n  | 'onAfterCreateStores'\n  | 'onBeforeInitial'\n  | 'onAfterInitial'\n  | 'onInitialError'\n  | 'onBeforeDestroy';\n\nexport type CommandLifeCycle =\n  | 'onBeforeClearHistory'\n  | 'onAfterClearHistory'\n  | 'onBeforeClearContext'\n  | 'onAfterClearContext'\n  | 'onBeforeStopResponding'\n  | 'onStopRespondingError'\n  | 'onAfterStopResponding'\n  | 'onClearContextError'\n  | 'onOnboardingSelectChange'\n  | 'onInputClick'\n  | 'onSelectionChange'\n  | 'onImageClick'\n  | 'onInputPaste';\n\nexport type MessageLifeCycle =\n  | 'onBeforeSendMessage'\n  | 'onAfterSendMessage'\n  | 'onSendMessageError'\n  | 'onBeforeReceiveMessage'\n  | 'onBeforeProcessReceiveMessage'\n  | 'onBeforeMessageGroupListUpdate'\n  | 'onAfterProcessReceiveMessage'\n  | 'onBeforeDeleteMessage'\n  | 'onAfterDeleteMessage'\n  | 'onDeleteMessageError'\n  | 'onBeforeGetMessageHistoryList'\n  | 'onBeforeDistributeMessageIntoMemberSet';\n\nexport type RenderLifeCycle = 'onMessageBoxRender';\n\nexport const enum LifeCycleStage {\n  LifeCycleStart = 'lifeCycleStart',\n  LifeCycleEnd = 'lifeCycleEnd',\n  PluginStart = 'pluginStart',\n  PluginEnd = 'pluginEnd',\n}\n\nexport const enum LifeCycleScope {\n  App = 'app',\n  Message = 'message',\n  Command = 'command',\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const enum PluginName {\n  Demo = 'demo',\n  MemoryComponents = 'memoryComponents',\n  StoreHistoryMessageList = 'storeHistoryMessageList',\n  ShareMessageComponents = 'shareMessageComponents',\n  KnowledgeComponents = 'knowledgeComponents',\n  Resume = 'resume',\n  MessageGrab = 'messageGrab',\n  ChatBackground = 'ChatBackground',\n  Tts = 'Tts',\n  DebugCommon = 'DebugCommon',\n  ChatPlayground = 'ChatPlayground',\n  PremiumPlans = 'PremiumPlans',\n  TemplateMessageSelector = 'TemplateMessageSelector',\n  WebsdkChatCozeSdkPlugin = 'WebsdkChatCozeSdkPlugin', // WebSdk go openApi plugin\n  WebsdkDefaultChatPlugin = 'WebsdkDefaultChatPlugin', // Default plugin for WebSdk\n  WebsdkChatCommonPlugin = 'WebsdkChatCommonPlugin', // WebSdk public plugin\n  UIBuilderChatUIPlugin = 'UIBuilderChatUIPlugin', // UIBuilderChatPlugin\n  UIBuilderEventcallbackPlugin = 'UIBuilderEventcallbackPlugin', // UIBuilderEventcallbackPlugin\n  AgentTemplateSubScene = 'AgentTemplateSubScene',\n  Reasoning = 'Reasoning',\n  CozeDev = 'CozeDev',\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const findFileDataIndexById = (fileIdList: string[], id: string) => {\n  if (!id) {\n    return -1;\n  }\n  return fileIdList.findIndex(fileId => fileId === id);\n};\n\n/**\n * @link https://developer.mozilla.org/zh-CN/docs/Web/API/Blob/type\n * @link https://www.iana.org/assignments/media-types/media-types.xhtml#image\n * The MIME for image types starts with image/\n */\nexport const isImage = (file: File) => file.type.startsWith('image/');\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { EventEmitter } from 'eventemitter3';\nimport {\n  type EventPayloadMaps as BaseEventPayloadMap,\n  type FileType,\n  type UploadPluginInterface,\n} from '@coze-common/chat-core';\nimport { type CozeUploader } from '@coze-studio/uploader-adapter';\n\nimport { uploadFile } from '../utils/upload';\n\nexport type EventPayloadMap = BaseEventPayloadMap & {\n  ready: boolean;\n};\nexport class UploadPlugin implements UploadPluginInterface {\n  file: File;\n  fileType: FileType;\n  uploader?: CozeUploader;\n  eventBus = new EventEmitter();\n  userId = '';\n  abortController: AbortController;\n  constructor(props: { file: File; type: FileType; userId: string }) {\n    this.file = props.file;\n    this.fileType = props.type;\n    this.userId = props.userId;\n    this.abortController = new AbortController();\n    uploadFile({\n      file: this.file,\n      fileType: this.fileType,\n      userId: this.userId,\n      signal: this.abortController.signal,\n      onProgress: event => {\n        const progressEvent: EventPayloadMap['progress'] = event;\n        this.eventBus.emit('progress', progressEvent);\n      },\n      onUploaderReady: uploader => {\n        const readyEvent: EventPayloadMap['ready'] = true;\n        this.eventBus.emit('ready', readyEvent);\n        this.uploader = uploader;\n      },\n      onUploadError: event => {\n        const errorEvent: EventPayloadMap['error'] = event;\n        this.eventBus.emit('error', errorEvent);\n      },\n      onGetTokenError: error => {\n        const errorEvent: EventPayloadMap['error'] = {\n          type: 'error',\n          extra: {\n            error,\n            message: error.message,\n          },\n        };\n        this.eventBus.emit('error', errorEvent);\n      },\n      onSuccess: event => {\n        const completeEvent: EventPayloadMap['complete'] = event;\n        this.eventBus.emit('complete', completeEvent);\n      },\n    });\n  }\n  start() {\n    return;\n  }\n  on<T extends keyof EventPayloadMap>(\n    eventName: T,\n    callback: (info: EventPayloadMap[T]) => void,\n  ) {\n    this.eventBus.on(eventName, callback);\n  }\n  pause() {\n    this.uploader?.pause();\n    return;\n  }\n  cancel() {\n    this.abortController.abort();\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isImage } from '../utils/batch-file-upload';\nimport { type EventPayloadMap, UploadPlugin } from './upload-plugin';\n\nexport interface UploadControllerProps {\n  fileId: string;\n  file: File;\n  userId: string;\n  multiUploadPlugin?: typeof UploadPlugin;\n  onProgress: (event: EventPayloadMap['progress'], fileId: string) => void;\n  onComplete: (event: EventPayloadMap['complete'], fileId: string) => void;\n  onError: (event: EventPayloadMap['error'], fileId: string) => void;\n  onReady: (event: EventPayloadMap['ready'], fileId: string) => void;\n}\n\nexport class UploadController {\n  fileId: string;\n  uploadPlugin: UploadPlugin;\n\n  constructor({\n    fileId,\n    file,\n    userId,\n    onProgress,\n    onComplete,\n    onError,\n    onReady,\n    multiUploadPlugin = UploadPlugin,\n  }: UploadControllerProps) {\n    this.fileId = fileId;\n    this.uploadPlugin = new multiUploadPlugin({\n      file,\n      userId,\n      type: isImage(file) ? 'image' : 'object',\n    });\n    this.uploadPlugin.on('progress', event => onProgress(event, fileId));\n    this.uploadPlugin.on('complete', event => onComplete(event, fileId));\n    this.uploadPlugin.on('error', event => onError(event, fileId));\n    this.uploadPlugin.on('ready', event => onReady(event, fileId));\n  }\n\n  cancel = () => {\n    this.uploadPlugin.cancel();\n  };\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type PropsWithChildren, useRef, useEffect } from 'react';\n\nimport { UploadController } from '../../service/upload-controller';\nimport { useChatAreaContext } from '../../hooks/context/use-chat-area-context';\nimport {\n  UploadControllerContext,\n  type UploadControllerContextProps,\n} from './context';\n\nexport const UploadControllerProvider: React.FC<PropsWithChildren> = ({\n  children,\n}) => {\n  const { configs } = useChatAreaContext();\n  const uploadControllerMap = useRef<\n    UploadControllerContextProps['uploadControllerMap']\n  >({});\n  const createControllerAndUpload: UploadControllerContextProps['createControllerAndUpload'] =\n    param => {\n      uploadControllerMap.current[param.fileId] = new UploadController({\n        ...param,\n        multiUploadPlugin: configs.uploadPlugin,\n      });\n    };\n  const cancelUploadById: UploadControllerContextProps['cancelUploadById'] =\n    id => {\n      const controller = uploadControllerMap.current[id];\n      if (!controller) {\n        return;\n      }\n      controller.cancel();\n      delete uploadControllerMap.current[id];\n    };\n\n  const clearAllSideEffect: UploadControllerContextProps['clearAllSideEffect'] =\n    () => {\n      Object.entries(uploadControllerMap.current).forEach(([, controller]) =>\n        controller.cancel(),\n      );\n      uploadControllerMap.current = {};\n    };\n\n  useEffect(() => clearAllSideEffect, []);\n\n  return (\n    <UploadControllerContext.Provider\n      value={{\n        uploadControllerMap: uploadControllerMap.current,\n        createControllerAndUpload,\n        cancelUploadById,\n        clearAllSideEffect,\n      }}\n    >\n      {children}\n    </UploadControllerContext.Provider>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type Message } from '../store/types';\nimport { type IdAndSuggestion } from '../store/suggestions';\n\nexport const getIsSuggestion = (message: Message) =>\n  message.type === 'follow_up';\n\nexport const splitMessageAndSuggestions = (messages: Message[]) => {\n  const messageList: Message[] = [];\n  const idAndSuggestions: IdAndSuggestion[] = [];\n  for (const msg of messages) {\n    if (getIsSuggestion(msg)) {\n      /**\n       * The last suggestion returned during the conversation will appear in the first item in the chat history\n       * During conversation take push suggestion here handle chat history need to take unshift\n       */\n\n      idAndSuggestions.unshift({\n        replyId: msg.reply_id,\n        suggestion: msg.content,\n      });\n    } else {\n      messageList.push(msg);\n    }\n  }\n  return {\n    messageList,\n    idAndSuggestions,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type Reporter } from '@coze-arch/logger';\n\nimport { type Message } from '../store/types';\nimport { type ChatActionLockService } from '../service/chat-action-lock';\nimport { type SystemLifeCycleService } from '../plugin/life-cycle';\nimport { type StoreSet } from '../context/chat-area-context/type';\nimport { type ChatAreaEventCallback } from '../context/chat-area-context/chat-area-callback';\nimport { deleteMessageGroupById } from './message-group/message-group';\n\ntype NewSectionIdStruct = { replyId: string; newSectionId: string } | null;\n\ninterface ExecuteStrategyAction {\n  deleteMessageGroupByUserMessageId: (userMessageId: string) => Promise<void>;\n  setNewSectionIdStruct: (params: NewSectionIdStruct) => void;\n  getNewSectionIdStruct: () => NewSectionIdStruct;\n  checkNewSectionIdValid: (replyId: string) => boolean;\n  updateStoreSectionId: () => void;\n}\n\ntype SecurityStrategyData = Pick<Message, 'reply_id'> & {\n  extra_info: Pick<Message['extra_info'], 'remove_query_id' | 'new_section_id'>;\n};\n\ninterface SecurityStrategy {\n  execute: (\n    data: SecurityStrategyData,\n    payload: {\n      action: ExecuteStrategyAction;\n    },\n  ) => Promise<void>;\n}\n\n/**\n * The hit policy will delete this messageGroup.\n * Server level active delete, front-end update view\n */\nclass DeleteMessageGroupStrategy implements SecurityStrategy {\n  execute: SecurityStrategy['execute'] = async (message, { action }) => {\n    const { remove_query_id } = message.extra_info;\n    if (!remove_query_id) {\n      return;\n    }\n    /**\n     * The message id sent by the user will be equivalent to the corresponding groupId.\n     */\n    await action.deleteMessageGroupByUserMessageId(remove_query_id);\n  };\n}\n\n/**\n * Hitting this policy will clear the context\n * Server level actively clears context, frontend updates section_id and updates view\n */\nclass SetNewSectionIdStrategy implements SecurityStrategy {\n  execute: SecurityStrategy['execute'] = (message, { action }) => {\n    const { new_section_id } = message.extra_info;\n    if (!new_section_id) {\n      return Promise.resolve();\n    }\n    action.setNewSectionIdStruct({\n      replyId: message.reply_id,\n      newSectionId: new_section_id,\n    });\n    return Promise.resolve();\n  };\n}\n\nclass UpdateStoreSectionIdStrategy implements SecurityStrategy {\n  execute: (\n    data: SecurityStrategyData,\n    payload: { action: ExecuteStrategyAction },\n  ) => Promise<void> = (message, { action }) => {\n    if (!action.getNewSectionIdStruct()) {\n      return Promise.resolve();\n    }\n\n    /**\n     * When the user continuously sends messages, the previous round of conversation will be directly interrupted, and will not go to a state such as success, directly entering a new round of conversation pulling\n     * It is necessary to check the timeliness of the new_section_id when updating\n     */\n    if (!action.checkNewSectionIdValid(message.reply_id)) {\n      action.setNewSectionIdStruct(null);\n      return Promise.resolve();\n    }\n\n    action.updateStoreSectionId();\n    action.setNewSectionIdStruct(null);\n    return Promise.resolve();\n  };\n}\n\nclass CombineStrategy implements SecurityStrategy {\n  private strategyList: SecurityStrategy[] = [];\n  constructor(...strategyList: SecurityStrategy[]) {\n    this.strategyList = strategyList;\n  }\n  execute: SecurityStrategy['execute'] = async (...props) => {\n    await Promise.all(\n      this.strategyList.map(strategy => strategy.execute(...props)),\n    );\n    return;\n  };\n}\n\nexport const clearUserMessageAndContextStrategy = new CombineStrategy(\n  new DeleteMessageGroupStrategy(),\n  new SetNewSectionIdStrategy(),\n);\n\nexport const updateStoreSectionIdStrategy = new UpdateStoreSectionIdStrategy();\n\nexport class SecurityStrategyContext {\n  private action: ExecuteStrategyAction;\n  private strategy: SecurityStrategy | undefined;\n  private newSectionIdStruct: NewSectionIdStruct = null;\n  constructor({\n    storeSet,\n    reporter,\n    eventCallback,\n    lifeCycleService,\n    chatActionLockService,\n  }: {\n    storeSet: StoreSet;\n    reporter: Reporter;\n    eventCallback?: ChatAreaEventCallback;\n    lifeCycleService: SystemLifeCycleService;\n    chatActionLockService: ChatActionLockService;\n  }) {\n    const {\n      useMessagesStore,\n      useWaitingStore,\n      useSuggestionsStore,\n      useMessageMetaStore,\n      useSectionIdStore,\n      useGlobalInitStore,\n    } = storeSet;\n    this.action = {\n      deleteMessageGroupByUserMessageId: async userMessageId => {\n        const { getMessageGroupByUserMessageId } = useMessagesStore.getState();\n        const targetGroup = getMessageGroupByUserMessageId(userMessageId);\n        if (!targetGroup) {\n          return;\n        }\n        return deleteMessageGroupById(targetGroup.groupId, {\n          storeSet: {\n            useMessageMetaStore,\n            useMessagesStore,\n            useSuggestionsStore,\n            useWaitingStore,\n            useGlobalInitStore,\n          },\n          reporter,\n          eventCallback,\n          lifeCycleService,\n          chatActionLockService,\n        });\n      },\n      setNewSectionIdStruct: params => {\n        this.newSectionIdStruct = params;\n      },\n      getNewSectionIdStruct: () => this.newSectionIdStruct,\n      checkNewSectionIdValid: inputReplyId =>\n        this.newSectionIdStruct?.replyId === inputReplyId,\n      updateStoreSectionId: () => {\n        if (!this.newSectionIdStruct?.newSectionId) {\n          return;\n        }\n        useSectionIdStore\n          .getState()\n          .setLatestSectionId(this.newSectionIdStruct.newSectionId);\n      },\n    };\n  }\n\n  setStrategy = (strategy: SecurityStrategy) => {\n    this.strategy = strategy;\n    return this;\n  };\n\n  executeStrategy = (data: SecurityStrategyData) =>\n    this.strategy?.execute(data, { action: this.action });\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport ChatCore, {\n  type SdkMessageEvent,\n  type SdkPullingStatusEvent,\n} from '@coze-common/chat-core';\nimport { type Reporter } from '@coze-arch/logger';\nimport { APIErrorEvent, emitAPIErrorEvent } from '@coze-arch/bot-http';\nimport { Toast } from '@coze-arch/coze-design';\n\nimport { getIsSuggestion } from '../utils/suggestions';\nimport {\n  clearUserMessageAndContextStrategy,\n  updateStoreSectionIdStrategy,\n  type SecurityStrategyContext,\n} from '../utils/message-security-strategy';\nimport { findMessagesByReplyId } from '../utils/message';\nimport { localLog } from '../utils/local-log';\nimport { type WaitingStore } from '../store/waiting';\nimport { type Message } from '../store/types';\nimport { type SuggestionsStore } from '../store/suggestions';\nimport { type SectionIdStore } from '../store/section-id';\nimport { type MessagesStore } from '../store/messages';\nimport { type SystemLifeCycleService } from '../plugin/life-cycle';\nimport { type ChatAreaConfigs } from '../context/chat-area-context/type';\nimport { type ChatAreaEventCallback } from '../context/chat-area-context/chat-area-callback';\nimport { getShouldDropMessage } from './ignore-message';\nimport {\n  ChatBusinessErrorCode,\n  CozeTokenInsufficient,\n  isToastErrorMessage,\n  parseErrorInfoFromErrorMessage,\n} from './helper/parse-error-info';\nimport { fixImageMessage } from './fix-message/fix-image-message';\n\ntype PullStatus = SdkPullingStatusEvent['data']['pullingStatus'];\nconst statusToForceUpdateFinish: PullStatus[] = ['success', 'error', 'timeout'];\nconst statusToReportError: PullStatus[] = ['error', 'timeout'];\n\n// eslint-disable-next-line max-lines-per-function, @coze-arch/max-line-per-function -- message\nexport const listenMessageUpdate = (param: {\n  chatCore: ChatCore;\n  /**\n   * All methods will be reported to slardar.\n   */\n  reporter: Reporter;\n  useMessagesStore: MessagesStore;\n  useWaitingStore: WaitingStore;\n  useSuggestionsStore: SuggestionsStore;\n  useSectionIdStore: SectionIdStore;\n  eventCallback: ChatAreaEventCallback;\n  securityStrategyContext: SecurityStrategyContext;\n  configs: ChatAreaConfigs;\n  lifeCycleService: SystemLifeCycleService;\n}) => {\n  const {\n    chatCore,\n    reporter,\n    useMessagesStore,\n    useWaitingStore,\n    useSuggestionsStore,\n    useSectionIdStore,\n    securityStrategyContext,\n    eventCallback: { onMessageSuccess, onReceiveMessage, onMessageError },\n    configs,\n    lifeCycleService,\n  } = param;\n  localLog({ message: 'listenMessageUpdate' });\n  const { updateResponding, updateWaiting, clearUnsettledByReplyId } =\n    useWaitingStore.getState();\n  /**\n   * Note: The main link receiving messages should not be asynchronous\n   * onMessageStatusChange are synchronous, so asynchronization when onMessageUpdate may cause problems with both timing\n   */\n  const onMessageUpdate = ({ data }: SdkMessageEvent) => {\n    const { latestSectionId, setLatestSectionId } =\n      useSectionIdStore.getState();\n\n    for (const message of data) {\n      lifeCycleService.message.onBeforeReceiveMessage({\n        ctx: {\n          message,\n        },\n      });\n      // onBeforeReceiveMessage\n      if (!getShouldDropMessage(configs.ignoreMessageConfigList, message)) {\n        if (latestSectionId !== message.section_id) {\n          setLatestSectionId(message.section_id);\n        }\n        onReceiveMessage?.({ message });\n\n        const { message: processedMessage } =\n          lifeCycleService.message.onBeforeProcessReceiveMessage({\n            ctx: {\n              message,\n            },\n          });\n\n        updateResponding(processedMessage);\n\n        if (getIsSuggestion(processedMessage)) {\n          handleSuggestionMessage(processedMessage, useSuggestionsStore);\n        } else {\n          handleNormalMessage(processedMessage, useMessagesStore, reporter);\n        }\n        /**\n         * The order is reversed with handleXXXMessage here, in order to ensure that the waiting time obtained by the outside is accurate.\n         * There shouldn't be any big problems here. You need to pay attention when you have strong dependence here in the future.\n         */\n        updateWaiting(processedMessage);\n\n        lifeCycleService.message.onAfterProcessReceiveMessage({\n          ctx: {\n            message,\n          },\n        });\n      }\n      securityStrategyContext\n        .setStrategy(clearUserMessageAndContextStrategy)\n        .executeStrategy(message);\n    }\n  };\n\n  const onMessageStatusChange = ({\n    data,\n    abort,\n    error,\n  }: SdkPullingStatusEvent) => {\n    const status = data.pullingStatus;\n\n    if (status === 'error') {\n      const ctx = {\n        replyId: data.reply_id,\n        localMessageId: data.local_message_id,\n        error,\n      };\n      onMessageError?.(ctx);\n      lifeCycleService.message.onMessagePullingError({\n        ctx,\n      });\n\n      const errorInfo = parseErrorInfoFromErrorMessage(error?.message);\n\n      if (\n        errorInfo?.code &&\n        errorInfo.code === ChatBusinessErrorCode.SuggestError\n      ) {\n        useSuggestionsStore\n          .getState()\n          .setGenerateSuggestionError(data.reply_id);\n        return;\n      }\n\n      if (\n        errorInfo?.code &&\n        [\n          CozeTokenInsufficient.COZE_TOKEN_INSUFFICIENT,\n          CozeTokenInsufficient.COZE_TOKEN_INSUFFICIENT_WORKFLOW,\n        ].includes(errorInfo.code)\n      ) {\n        emitAPIErrorEvent(APIErrorEvent.COZE_TOKEN_INSUFFICIENT);\n        return;\n      }\n\n      if (errorInfo && isToastErrorMessage(errorInfo.code)) {\n        Toast.error({ content: errorInfo?.msg, showClose: false });\n      }\n    }\n\n    if (status === 'success') {\n      const ctx = {\n        localMessageId: data.local_message_id,\n        replyId: data.reply_id,\n      };\n      onMessageSuccess?.(ctx);\n      lifeCycleService.message.onMessagePullingSuccess({\n        ctx,\n      });\n    }\n\n    if (statusToForceUpdateFinish.includes(status)) {\n      forceUpdateMessageFinishByData({ data, reporter, useMessagesStore });\n      clearUnsettledByReplyId(data.reply_id);\n      securityStrategyContext\n        .setStrategy(updateStoreSectionIdStrategy)\n        .executeStrategy({\n          reply_id: data.reply_id,\n          extra_info: {},\n        });\n    }\n\n    if (statusToReportError.includes(status)) {\n      // TODO\n      // reporter.errorEvent({\n      //   eventName: ReportEventNames.PullMessageException,\n      //   ...getReportError(data),\n      // });\n    }\n\n    // Shit, I need to adjust it manually\n    // Talk about hiding\n    if (status === 'timeout') {\n      abort?.();\n    }\n  };\n\n  const abort = lifeCycleService.app.onBeforeListenChatCore?.({\n    onMessageStatusChange,\n    onMessageUpdate,\n  });\n  if (abort) {\n    return () => undefined;\n  }\n\n  chatCore.on(ChatCore.EVENTS.MESSAGE_RECEIVED_AND_UPDATE, onMessageUpdate);\n  chatCore.on(ChatCore.EVENTS.MESSAGE_PULLING_STATUS, onMessageStatusChange);\n  const off = () => {\n    chatCore.off(ChatCore.EVENTS.MESSAGE_RECEIVED_AND_UPDATE, onMessageUpdate);\n    chatCore.off(ChatCore.EVENTS.MESSAGE_PULLING_STATUS, onMessageStatusChange);\n  };\n  return off;\n};\n\n/**\n * For the scenario of error and timeout, it needs to be further marked with the view in the future. For now, it is simply marked as complete.\n */\nconst forceUpdateMessageFinishByData = (param: {\n  data: SdkPullingStatusEvent['data'];\n  /**\n   * All methods will be reported to slardar.\n   */\n  reporter: Reporter;\n  useMessagesStore: MessagesStore;\n}) => {\n  const { data, useMessagesStore } = param;\n\n  const { messages: allMessages, updateMessage } = useMessagesStore.getState();\n  const replyId = data.reply_id;\n  const targetMessages = findMessagesByReplyId(allMessages, replyId);\n  if (!targetMessages.length) {\n    return;\n  }\n\n  // Modification method: Add new private properties to the message, such as _broken, and add scene-based configuration, differentiate in the display logic to replace deletion\n  const updateMessageToFinish = getUpdateMessageToFinish(updateMessage);\n  targetMessages.forEach(updateMessageToFinish);\n};\n\nconst handleSuggestionMessage = (\n  message: Message,\n  useSuggestionsStore: SuggestionsStore,\n) => {\n  const { updateSuggestion } = useSuggestionsStore.getState();\n  updateSuggestion(message.reply_id, message.content);\n};\n\nconst handleNormalMessage = (\n  message: Message,\n  useMessageStore: MessagesStore,\n  reporter: Reporter,\n) => {\n  const { updateMessage, hasMessage, addMessage } = useMessageStore.getState();\n  // There are problems with downstream dependencies, and it is not easy to modify this time, so cooperate with the server level to smooth the structure at the front end\n  const fixedMessage = fixImageMessage(message, reporter);\n\n  if (hasMessage(fixedMessage)) {\n    updateMessage(fixedMessage);\n  } else {\n    addMessage(fixedMessage);\n  }\n};\n\ntype MessageUpdater = (message: Message) => void;\n\nconst getUpdateMessageToFinish =\n  (updateMessage: MessageUpdater) => (message: Message) => {\n    if (message.is_finish) {\n      return;\n    }\n\n    const newMessage: Message = {\n      ...message,\n      is_finish: true,\n    };\n    updateMessage(newMessage);\n  };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * This module is used to extend the lifecycle of chat area data\n */\n\nimport { type Scene } from '@coze-common/chat-core';\n\nimport { type InitService } from '../init-service';\nimport { type StoreSet } from '../../context/chat-area-context/type';\n\ntype Data = StoreSet;\n/** Make use of it first, and you can only see that coze homes have this demand in a short time. */\ntype Biz = Scene;\n\nconst map = new Map<Biz, Data>();\n\nconst initServiceMap = new Map<Biz, InitService>();\n\nexport const recordLifecycleExtendedData = (biz: Biz, data: Data) => {\n  if (IS_DEV_MODE && map.has(biz)) {\n    throw new Error(`set data again ${biz}!`);\n  }\n  map.set(biz, data);\n};\n\nexport const retrieveAndClearLifecycleExtendedData = (biz: Biz) => {\n  const res = map.get(biz);\n  if (!res) {\n    return null;\n  }\n  map.delete(biz);\n  return res;\n};\n\nexport const retrieveLifecycleExtendedData = (biz: Biz) => {\n  const res = map.get(biz);\n  if (!res) {\n    return null;\n  }\n  return res;\n};\n\nexport const clearExtendedLifecycleData = (biz: Biz) => {\n  map.delete(biz);\n  initServiceMap.delete(biz);\n};\n\nexport const recordInitServiceController = (\n  biz: Biz,\n  initService: InitService,\n) => {\n  if (IS_DEV_MODE && map.has(biz)) {\n    throw new Error(`set data again ${biz}!`);\n  }\n  initServiceMap.set(biz, initService);\n};\n\nexport const retrieveAndClearInitService = (biz: Biz) => {\n  const res = initServiceMap.get(biz);\n  if (!res) {\n    return null;\n  }\n  initServiceMap.delete(biz);\n  return res;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useContext } from 'react';\n\nimport { ChatInputLayoutContext } from './context';\n\nexport const useChatInputLayout = () => useContext(ChatInputLayoutContext);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type SectionIdStore } from '../../../store/section-id';\n\nexport const createWriteableSectionIdMethods = (\n  useSectionIdStore: SectionIdStore,\n) => {\n  const { setLatestSectionId, clear } = useSectionIdStore.getState();\n  return {\n    setLatestSectionId,\n    clearSectionId: clear,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type SendMessageOptions } from '@coze-common/chat-core';\nimport websocketManager from '@coze-common/websocket-manager-adapter';\n\nimport { type StoreSet } from '../context/chat-area-context/type';\nimport { findMessageById } from './message';\n\n/**\n * Send resume message, break chat scene\n */\nexport const createAndSendResumeMessage =\n  ({\n    storeSet,\n  }: {\n    storeSet: Pick<\n      StoreSet,\n      'useGlobalInitStore' | 'useMessagesStore' | 'useWaitingStore'\n    >;\n  }) =>\n  ({ replyId, options }: { replyId: string; options?: SendMessageOptions }) => {\n    const { useGlobalInitStore, useMessagesStore, useWaitingStore } = storeSet;\n\n    const chatCore = useGlobalInitStore.getState().getChatCore();\n\n    const { messages } = useMessagesStore.getState();\n    const { startWaiting } = useWaitingStore.getState();\n\n    // Find the message before the interruption\n    const questionMessage = findMessageById(messages, replyId);\n\n    const defaultSendMessageOptions = {\n      extendFiled: {\n        device_id: String(websocketManager.deviceId),\n      },\n    };\n\n    const mergedOptions = {\n      ...defaultSendMessageOptions,\n      ...options,\n    };\n\n    if (!chatCore || !questionMessage) {\n      throw new Error('chatCore is not ready');\n    }\n\n    // Continue chatting Open query waiting status\n    startWaiting(questionMessage);\n\n    /** If it is a resume message, the local message state is not maintained, only the request is sent */\n    chatCore.resumeMessage(questionMessage, mergedOptions);\n  };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type Reporter } from '@coze-arch/logger';\n\nimport { type MethodCommonDeps } from '../../types';\nimport { type SystemLifeCycleService } from '../../life-cycle';\nimport { stopResponding } from '../../../utils/stop-responding';\nimport { createAndSendResumeMessage } from '../../../utils/resume-message';\nimport { getSendTextMessageImplement } from '../../../hooks/messages/use-send-message/text-message';\nimport { type StoreSet } from '../../../context/chat-area-context/type';\nimport { type ChatAreaEventCallback } from '../../../context/chat-area-context/chat-area-callback';\n\nexport const createWriteableMessageMethods = ({\n  storeSet,\n  eventCallback,\n  reporter,\n  lifeCycleService,\n  deps,\n}: {\n  storeSet: StoreSet;\n  eventCallback: ChatAreaEventCallback | undefined;\n  reporter: Reporter;\n  lifeCycleService: SystemLifeCycleService;\n  deps: MethodCommonDeps;\n}) => ({\n  stopResponding: () =>\n    stopResponding({ storeSet, eventCallback, reporter, lifeCycleService }),\n  sendResumeMessage: createAndSendResumeMessage({ storeSet }),\n  sendTextMessage: getSendTextMessageImplement(deps),\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type LimitWaitingSelector,\n  type SubscriptionSelector,\n} from '../../types/plugin-class/selector';\nimport { type WaitingStore } from '../../../store/waiting';\n\nexport const createSubscribeWaiting: SubscriptionSelector<\n  LimitWaitingSelector,\n  WaitingStore\n> =\n  (store, usePluginStore) =>\n  ({ selector, listener, options }) => {\n    const off = store.subscribe(selector, listener, options);\n    usePluginStore.getState().appendServiceOffSubscriptionList(off);\n    return off;\n  };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type LimitSelectionSelector,\n  type SubscriptionSelector,\n} from '../../types/plugin-class/selector';\nimport { type SelectionStore } from '../../../store/selection';\n\nexport const createSubscribeSelection: SubscriptionSelector<\n  LimitSelectionSelector,\n  SelectionStore\n> =\n  (store, usePluginStore) =>\n  ({ selector, listener, options }) => {\n    const off = store.subscribe(selector, listener, options);\n    usePluginStore.getState().appendServiceOffSubscriptionList(off);\n    return off;\n  };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type LimitOnboardingSelector,\n  type SubscriptionSelector,\n} from '../../types/plugin-class/selector';\nimport { type OnboardingStore } from '../../../store/onboarding';\n\nexport const createSubscribeOnboarding: SubscriptionSelector<\n  LimitOnboardingSelector,\n  OnboardingStore\n> =\n  (store, usePluginStore) =>\n  ({ selector, listener, options }) => {\n    const off = store.subscribe(selector, listener, options);\n    usePluginStore.getState().appendServiceOffSubscriptionList(off);\n    return off;\n  };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type LimitMessageMetaSelector,\n  type SubscriptionSelector,\n} from '../../types/plugin-class/selector';\nimport { type MessageMetaStore } from '../../../store/message-meta';\n\nexport const createSubscribeMessageMeta: SubscriptionSelector<\n  LimitMessageMetaSelector,\n  MessageMetaStore\n> =\n  (store, usePluginStore) =>\n  ({ selector, listener, options }) => {\n    const off = store.subscribe(selector, listener, options);\n    usePluginStore.getState().appendServiceOffSubscriptionList(off);\n    return off;\n  };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type LimitMessageSelector,\n  type SubscriptionSelector,\n} from '../../types/plugin-class/selector';\nimport { type MessagesStore } from '../../../store/messages';\n\nexport const createSubscribeMessage: SubscriptionSelector<\n  LimitMessageSelector,\n  MessagesStore\n> =\n  (store, usePluginStore) =>\n  ({ selector, listener, options }) => {\n    const off = store.subscribe(selector, listener, options);\n    usePluginStore.getState().appendServiceOffSubscriptionList(off);\n    return off;\n  };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type LimitGlobalInitSelector,\n  type SubscriptionSelector,\n} from '../../types/plugin-class/selector';\nimport { type GlobalInitStore } from '../../../store/global-init';\n\nexport const createSubscribeGlobalInitState: SubscriptionSelector<\n  LimitGlobalInitSelector,\n  GlobalInitStore\n> =\n  (store, usePluginStore) =>\n  ({ selector, listener, options }) => {\n    const off = store.subscribe(selector, listener, options);\n    usePluginStore.getState().appendServiceOffSubscriptionList(off);\n    return off;\n  };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type OnboardingStore } from '../../../store/onboarding';\n\nexport const getOnboardingStoreWriteableMethods = (\n  useOnboardingStore: OnboardingStore,\n) => {\n  const { updatePrologue, partialUpdateOnboardingData } =\n    useOnboardingStore.getState();\n\n  return { updatePrologue, partialUpdateOnboardingData };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type MessagesStore } from '../../../store/messages';\n\nexport const getMessagesStoreWriteableMethods = (\n  useMessagesStore: MessagesStore,\n) => {\n  const { clearMessage, addMessages, deleteMessageByIdList, updateMessage } =\n    useMessagesStore.getState();\n  return {\n    clearMessage,\n    addMessages,\n    deleteMessageByIdList,\n    updateMessage,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type MessageIndexStore } from '../../../store/message-index';\n\nexport const getMessageIndexStoreWriteableMethods = (\n  useMessageIndexStore: MessageIndexStore,\n) => {\n  const { updateIgnoreIndexAndHistoryMessages } =\n    useMessageIndexStore.getState();\n  return {\n    updateIgnoreIndexAndHistoryMessages,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type MessagesStore } from '../../../store/messages';\n\nexport const getMessagesStoreReadonlyMethods = (\n  useMessagesStore: MessagesStore,\n) => {\n  const {\n    getMessageGroupById,\n    getMessageGroupByUserMessageId,\n    getMessageIndexRange,\n    findMessage,\n  } = useMessagesStore.getState();\n  return {\n    getMessageGroupById,\n    getMessageGroupByUserMessageId,\n    getMessageIndexRange,\n    findMessage,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type MessageMetaStore } from '../../../store/message-meta';\n\nexport const getMessageMetaStoreReadonlyMethods = (\n  useMessageMetaStore: MessageMetaStore,\n) => {\n  const { getMetaByMessage } = useMessageMetaStore.getState();\n  return {\n    getMetaByMessage,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type SenderInfoStore } from '../../../store/sender-info';\n\nexport const createGetBotInfoStoreReadonlyMethods =\n  (useSenderInfoStore: SenderInfoStore) => () => {\n    const { getBotInfo, botInfoMap } = useSenderInfoStore.getState();\n    return {\n      getBotInfo,\n      botInfoMap,\n    };\n  };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type BatchFileUploadStore } from '../../../store/batch-upload-file';\n\nexport const createGetBatchFileStoreReadonlyMethods =\n  (useBatchFileStore: BatchFileUploadStore) => () => {\n    const { fileDataMap, fileIdList, fileTypeMap } =\n      useBatchFileStore.getState();\n    return {\n      fileDataMap,\n      fileIdList,\n      fileTypeMap,\n    };\n  };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type SectionIdStore } from '../../../store/section-id';\n\nexport const createSectionIdInstantValues =\n  (useSectionIdStore: SectionIdStore) => () => {\n    const { latestSectionId } = useSectionIdStore.getState();\n    return {\n      latestSectionId,\n    };\n  };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type MessagesStore } from '../../../store/messages';\n\nexport const createGetMessagesStoreInstantValues =\n  (useMessagesStore: MessagesStore) => () => {\n    const { messages } = useMessagesStore.getState();\n    return {\n      messages,\n    };\n  };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type MessageMetaStore } from '../../../store/message-meta';\n\nexport const createGetMessageMetaStoreInstantValues =\n  (useMessageMetaStore: MessageMetaStore) => () => {\n    const { metaList } = useMessageMetaStore.getState();\n    return {\n      metaList,\n    };\n  };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type GlobalInitStore } from '../../../store/global-init';\n\nexport const createGetGlobalInitStoreInstantValues =\n  (useGlobalInitStore: GlobalInitStore) => () => {\n    const { initStatus } = useGlobalInitStore.getState();\n    return {\n      initStatus,\n    };\n  };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\ninterface MessageMethodsProps {\n  refreshMessageList: () => void;\n}\nexport const createMessageMethods = (params: MessageMethodsProps) => {\n  const { refreshMessageList } = params;\n  return {\n    refreshMessageList,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type Reporter } from '@coze-arch/logger';\n\nimport { type MethodCommonDeps } from '../types';\nimport { type SystemLifeCycleService } from '../life-cycle';\nimport { getClearHistoryImplement } from '../../hooks/messages/use-clear-history';\nimport { useDeleteFile } from '../../hooks/file/use-delete-file';\nimport { useGetScrollView } from '../../hooks/context/use-get-scroll-view';\nimport { useChatInputLayout } from '../../context/chat-input-layout';\nimport { type StoreSet } from '../../context/chat-area-context/type';\nimport { type ChatAreaEventCallback } from '../../context/chat-area-context/chat-area-callback';\nimport { createWriteableSectionIdMethods } from './writeable-methods/create-section-id-methods';\nimport { createWriteableMessageMethods } from './writeable-methods/create-message-methods';\nimport { createSubscribeWaiting } from './subscribes/create-subscribe-waiting';\nimport { createSubscribeSelection } from './subscribes/create-subscribe-selection';\nimport { createSubscribeOnboarding } from './subscribes/create-subscribe-onboarding';\nimport { createSubscribeMessageMeta } from './subscribes/create-subscribe-message-meta';\nimport { createSubscribeMessage } from './subscribes/create-subscribe-message';\nimport { createSubscribeGlobalInitState } from './subscribes/create-subscribe-global-init-state';\nimport { getOnboardingStoreWriteableMethods } from './store-writeable-methods/onbaording-store';\nimport { getMessagesStoreWriteableMethods } from './store-writeable-methods/messags-store';\nimport { getMessageIndexStoreWriteableMethods } from './store-writeable-methods/message-index-store';\nimport { getMessagesStoreReadonlyMethods } from './store-readonly-methods/messages-store';\nimport { getMessageMetaStoreReadonlyMethods } from './store-readonly-methods/message-meta-store';\nimport { createGetBotInfoStoreReadonlyMethods } from './store-readonly-methods/bot-info-store';\nimport { createGetBatchFileStoreReadonlyMethods } from './store-readonly-methods/batch-upload-store';\nimport { createSectionIdInstantValues } from './store-instant-values/create-section-id-instant-values';\nimport { createGetMessagesStoreInstantValues } from './store-instant-values/create-get-messages-store-instant-values';\nimport { createGetMessageMetaStoreInstantValues } from './store-instant-values/create-get-message-meta-store-instant-values';\nimport { createGetGlobalInitStoreInstantValues } from './store-instant-values/create-get-global-init-store-instant-values';\nimport { createMessageMethods } from './methods/create-message-methods';\n\nexport interface CreateChatAreaPluginContextParams {\n  storeSet: StoreSet;\n  refreshMessageList: () => void;\n  eventCallback: ChatAreaEventCallback | undefined;\n  reporter: Reporter;\n  lifeCycleService: SystemLifeCycleService;\n  getCommonDeps: () => MethodCommonDeps;\n}\n\nexport const createChatAreaPluginContext = (\n  params: CreateChatAreaPluginContextParams,\n) => {\n  const {\n    storeSet,\n    eventCallback,\n    reporter,\n    lifeCycleService,\n    refreshMessageList,\n    getCommonDeps,\n  } = params;\n  const {\n    useGlobalInitStore,\n    useMessageMetaStore,\n    useMessagesStore,\n    useOnboardingStore,\n    useSelectionStore,\n    useWaitingStore,\n    usePluginStore,\n    useSenderInfoStore,\n    useMessageIndexStore,\n    useBatchFileUploadStore,\n    useSectionIdStore,\n  } = storeSet;\n  const deps = getCommonDeps();\n\n  const pluginContext = {\n    limitSubscriptions: {\n      subscribeGlobalInit: createSubscribeGlobalInitState(\n        useGlobalInitStore,\n        usePluginStore,\n      ),\n      subscribeMessage: createSubscribeMessage(\n        useMessagesStore,\n        usePluginStore,\n      ),\n      subscribeMessageMeta: createSubscribeMessageMeta(\n        useMessageMetaStore,\n        usePluginStore,\n      ),\n      subscribeOnboarding: createSubscribeOnboarding(\n        useOnboardingStore,\n        usePluginStore,\n      ),\n      subscribeSelection: createSubscribeSelection(\n        useSelectionStore,\n        usePluginStore,\n      ),\n      subscribeWaiting: createSubscribeWaiting(useWaitingStore, usePluginStore),\n    },\n    writeableAPI: {\n      messageList: {\n        ...createMessageMethods({\n          refreshMessageList,\n        }),\n        ...getMessagesStoreWriteableMethods(useMessagesStore),\n        clearChatHistory: getClearHistoryImplement(deps),\n      },\n      messageIndex: {\n        ...getMessageIndexStoreWriteableMethods(useMessageIndexStore),\n      },\n      message: createWriteableMessageMethods({\n        storeSet,\n        eventCallback,\n        lifeCycleService,\n        reporter,\n        deps,\n      }),\n      onboarding: getOnboardingStoreWriteableMethods(useOnboardingStore),\n      sectionId: createWriteableSectionIdMethods(useSectionIdStore),\n    },\n    readonlyAPI: {\n      globalInit: {\n        getGlobalInitStoreInstantValues:\n          createGetGlobalInitStoreInstantValues(useGlobalInitStore),\n      },\n      message: {\n        getMessagesStoreInstantValues:\n          createGetMessagesStoreInstantValues(useMessagesStore),\n        ...getMessagesStoreReadonlyMethods(useMessagesStore),\n      },\n      messageMeta: {\n        getMessageMetaInstantValues:\n          createGetMessageMetaStoreInstantValues(useMessageMetaStore),\n        ...getMessageMetaStoreReadonlyMethods(useMessageMetaStore),\n      },\n      botInfo: {\n        getBotInfoStoreInstantValues:\n          createGetBotInfoStoreReadonlyMethods(useSenderInfoStore),\n      },\n      batchFile: {\n        getFileStoreInstantValues: createGetBatchFileStoreReadonlyMethods(\n          useBatchFileUploadStore,\n        ),\n      },\n      sectionId: {\n        getSectionIdInstantValues:\n          createSectionIdInstantValues(useSectionIdStore),\n      },\n    },\n    readonlyHook: {\n      scrollView: {\n        useGetScrollView,\n      },\n      input: {\n        useChatInputLayout,\n      },\n    },\n    writeableHook: {\n      file: {\n        useDeleteFile,\n      },\n    },\n  };\n\n  return pluginContext;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type CreateChatAreaPluginContextParams,\n  createChatAreaPluginContext,\n} from '../plugin/plugin-context';\nimport {\n  type ReadonlyChatAreaPlugin,\n  type WriteableChatAreaPlugin,\n} from '../plugin/plugin-class/plugin';\nimport { type ChatAreaProviderProps } from '../context/chat-area-context/type';\n\ninterface InitPluginsProps {\n  pluginRegistryList: ChatAreaProviderProps['pluginRegistryList'];\n}\n\nexport const initPlugins = (\n  params: InitPluginsProps & CreateChatAreaPluginContextParams,\n) => {\n  const {\n    pluginRegistryList = [],\n    storeSet,\n    refreshMessageList,\n    reporter,\n    eventCallback,\n    lifeCycleService,\n    getCommonDeps,\n  } = params;\n\n  /**\n   * Plugin registration starts\n   */\n  const pluginInstanceList: (\n    | ReadonlyChatAreaPlugin<object>\n    | WriteableChatAreaPlugin<object>\n  )[] = [];\n\n  for (const registerPlugin of pluginRegistryList) {\n    if (\n      !registerPlugin ||\n      !registerPlugin.createPluginBizContext ||\n      !registerPlugin.Plugin\n    ) {\n      console.error('register plugin has params empty!');\n      continue;\n    }\n\n    // Create business context\n    const pluginBizContext = registerPlugin.createPluginBizContext();\n\n    // Create a built-in context for chat-area\n    const chatAreaPluginContext = createChatAreaPluginContext({\n      storeSet,\n      refreshMessageList,\n      reporter,\n      eventCallback,\n      lifeCycleService,\n      getCommonDeps,\n    });\n\n    // Initialize the business plug-in instance\n    const pluginInstance = new registerPlugin.Plugin(\n      pluginBizContext,\n      chatAreaPluginContext,\n    );\n\n    pluginInstanceList.push(pluginInstance);\n  }\n  const { usePluginStore } = storeSet;\n  usePluginStore.getState().setPluginInstanceList(pluginInstanceList);\n  /**\n   * Plugin registration ends\n   */\n\n  return () => {\n    usePluginStore.getState().offAllSubscription();\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst policyExceptionCodeList = [\n  /** Risk control interception */\n  '700012014',\n];\n\n/**\n * Temporarily distinguish whether the chat area inits an abnormal risk control strategy\n * In the future, you need to configure the interceptor thrown by the exception in chatCore\n */\nexport const getIsPolicyException = (error: Error) => {\n  /**\n   * At present, the external chat area init methods have all gone. The error thrown after the xxxAPI exception of the business encapsulation is APIError in the shape of\n   * constructor(\n   *  public code: string,\n   *  public msg: string | undefined,\n   * )\n   */\n  if ('code' in error) {\n    return policyExceptionCodeList.includes(String(error.code));\n  }\n  return false;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type ReadonlyChatAreaPlugin,\n  type WriteableChatAreaPlugin,\n} from '../plugin-class/plugin';\nimport { PluginMode } from '../constants/plugin';\nimport { type WriteableLifeCycleServicesAddition } from '../../store/plugins';\n\nexport const isWriteablePlugin = <T = unknown, K = unknown>(\n  pluginInstance: ReadonlyChatAreaPlugin<T, K> | WriteableChatAreaPlugin<T, K>,\n): pluginInstance is WriteableChatAreaPlugin<T, K> &\n  WriteableLifeCycleServicesAddition<T, K> =>\n  pluginInstance.pluginMode === PluginMode.Writeable;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isWriteablePlugin } from '../../utils/is-writeable-plugin';\nimport {\n  type OnTextContentRenderingContext,\n  type OnMessageBoxRenderContext,\n} from '../../types/plugin-class/render-life-cycle';\nimport { type LifeCycleContext } from '../../types';\nimport { type RenderLifeCycle } from '../../constants/plugin';\nimport { proxyFreeze } from '../../../utils/proxy-freeze';\n\ntype Expect<T extends true> = T;\n\ntype TestClassIncludeRenderLifeCycleKeys =\n  RenderLifeCycle extends keyof SystemRenderLifeCycleService ? true : false;\n\n// eslint-disable-next-line @typescript-eslint/naming-convention, @typescript-eslint/no-unused-vars -- detect type usage\ntype _ = Expect<TestClassIncludeRenderLifeCycleKeys>;\n\nexport class SystemRenderLifeCycleService {\n  private lifeCycleContext: LifeCycleContext;\n\n  constructor(lifeCycleContext: LifeCycleContext) {\n    this.lifeCycleContext = lifeCycleContext;\n  }\n\n  onTextContentRendering({ ctx }: { ctx: OnTextContentRenderingContext }) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    let proxyFreezeContext = proxyFreeze(ctx);\n    for (const plugin of pluginInstanceList) {\n      if (isWriteablePlugin(plugin)) {\n        const newContext =\n          plugin.lifeCycleServices?.renderLifeCycleService?.onTextContentRendering?.(\n            proxyFreezeContext,\n          );\n\n        if (!newContext) {\n          continue;\n        }\n\n        proxyFreezeContext = proxyFreeze(newContext);\n      } else {\n        plugin.lifeCycleServices?.renderLifeCycleService?.onTextContentRendering?.(\n          proxyFreezeContext,\n        );\n      }\n    }\n    return proxyFreezeContext;\n  }\n\n  onMessageBoxRender({ ctx }: { ctx: OnMessageBoxRenderContext }) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    /**\n     * CycleLife - Message - onMessageBoxRender Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    let proxyFreezeContext = proxyFreeze(ctx);\n\n    for (const plugin of pluginInstanceList) {\n      const newContext =\n        plugin.lifeCycleServices?.renderLifeCycleService?.onMessageBoxRender?.(\n          proxyFreezeContext,\n        );\n\n      if (!newContext) {\n        continue;\n      }\n\n      proxyFreezeContext = newContext;\n    }\n    /**\n     * CycleLife - Message - onMessageBoxRender End\n     */\n\n    return proxyFreezeContext;\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type Reporter } from '@coze-arch/logger';\n\nimport {\n  type ReadonlyChatAreaPlugin,\n  type WriteableChatAreaPlugin,\n} from '../plugin-class/plugin';\nimport {\n  type LifeCycleScope,\n  type AppLifeCycle,\n  type CommandLifeCycle,\n  type MessageLifeCycle,\n  LifeCycleStage,\n} from '../constants/plugin';\n\ninterface CreatePluginBenchmarkParams {\n  lifeCycleName: AppLifeCycle | MessageLifeCycle | CommandLifeCycle;\n  lifeCycleScope: LifeCycleScope;\n  reporter?: Reporter;\n}\n\nconst LUCKY_NUMBER = Math.random();\n\nexport const createPluginBenchmark = (params: CreatePluginBenchmarkParams) => {\n  const { lifeCycleName, lifeCycleScope, reporter } = params;\n\n  const enableReport = LUCKY_NUMBER <= 0.05;\n\n  const { trace } =\n    reporter?.tracer({\n      eventName: 'chatAreaPluginCycleLifeBenchmark',\n    }) ?? {};\n\n  if (!trace || !enableReport) {\n    return;\n  }\n\n  const recordLifeCycleStart = () =>\n    trace(lifeCycleName, {\n      meta: {\n        lifeCycleScope,\n        lifeCycleStage: LifeCycleStage.LifeCycleStart,\n      },\n    });\n\n  const recordLifeCycleEnd = () =>\n    trace(lifeCycleName, {\n      meta: {\n        lifeCycleScope,\n        lifeCycleStage: LifeCycleStage.LifeCycleEnd,\n      },\n    });\n\n  const recordPluginStart = (\n    plugin: ReadonlyChatAreaPlugin<object> | WriteableChatAreaPlugin<object>,\n  ) =>\n    trace(lifeCycleName, {\n      meta: {\n        pluginName: plugin.pluginName,\n        lifeCycleScope,\n        lifeCycleStage: LifeCycleStage.PluginStart,\n      },\n    });\n\n  const recordPluginEnd = (\n    plugin: ReadonlyChatAreaPlugin<object> | WriteableChatAreaPlugin<object>,\n  ) =>\n    trace(lifeCycleName, {\n      meta: {\n        pluginName: plugin.pluginName,\n        lifeCycleScope,\n        lifeCycleStage: LifeCycleStage.PluginEnd,\n      },\n    });\n\n  return {\n    recordLifeCycleStart,\n    recordLifeCycleEnd,\n    recordPluginStart,\n    recordPluginEnd,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createPluginBenchmark } from '../create-plugin-benchmark';\nimport { isWriteablePlugin } from '../../utils/is-writeable-plugin';\nimport {\n  type OnBeforeReceiveMessageContext,\n  type OnBeforeProcessReceiveMessageContext,\n  type OnBeforeMessageGroupListUpdateContext,\n  type OnAfterSendMessageContext,\n  type OnBeforeSendMessageContext,\n  type OnAfterProcessReceiveMessageContext,\n  type OnBeforeDeleteMessageContext,\n  type OnAfterDeleteMessageContext,\n  type OnSendMessageErrorContext,\n  type OnDeleteMessageErrorContext,\n  type OnBeforeGetMessageHistoryListContext,\n  type OnBeforeAppendSenderMessageIntoStore,\n  type OnBeforeDistributeMessageIntoMemberSetContent,\n  type OnMessagePullingErrorContext,\n  type OnMessagePullingSuccessContext,\n} from '../../types/plugin-class/message-life-cycle';\nimport { type LifeCycleContext } from '../../types';\nimport { LifeCycleScope, type MessageLifeCycle } from '../../constants/plugin';\nimport { proxyFreeze } from '../../../utils/proxy-freeze';\nimport { localLog } from '../../../utils/local-log';\n\ntype Expect<T extends true> = T;\n\ntype TestClassIncludeMessageLifeCycleKeys =\n  MessageLifeCycle extends keyof SystemMessageLifeCycleService ? true : false;\n\n// eslint-disable-next-line @typescript-eslint/naming-convention, @typescript-eslint/no-unused-vars -- detect type usage\ntype _ = Expect<TestClassIncludeMessageLifeCycleKeys>;\n\nexport class SystemMessageLifeCycleService {\n  private lifeCycleContext: LifeCycleContext;\n\n  constructor(lifeCycleContext: LifeCycleContext) {\n    this.lifeCycleContext = lifeCycleContext;\n  }\n\n  async onBeforeGetMessageHistoryList({\n    ctx,\n  }: {\n    ctx: OnBeforeGetMessageHistoryListContext;\n  }) {\n    const lifeCycleName: MessageLifeCycle = 'onBeforeGetMessageHistoryList';\n    const lifeCycleScope = LifeCycleScope.Message;\n\n    const { reporter, usePluginStore } = this.lifeCycleContext;\n\n    const pluginBenchmark = createPluginBenchmark({\n      lifeCycleName,\n      lifeCycleScope,\n      reporter,\n    });\n\n    /**\n     * CycleLife - Message - onBeforeGetMessageHistoryList Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    pluginBenchmark?.recordLifeCycleStart();\n\n    let proxyFreezeContext = proxyFreeze(ctx);\n\n    for (const plugin of pluginInstanceList) {\n      pluginBenchmark?.recordPluginStart(plugin);\n\n      if (isWriteablePlugin(plugin)) {\n        const newContext =\n          await plugin.lifeCycleServices?.messageLifeCycleService?.onBeforeGetMessageHistoryList?.(\n            proxyFreezeContext,\n          );\n\n        if (!newContext) {\n          pluginBenchmark?.recordPluginEnd(plugin);\n          continue;\n        }\n\n        localLog(\n          `${lifeCycleScope}/${lifeCycleName}/${plugin.pluginName}: newContext ${newContext}`,\n        );\n\n        proxyFreezeContext = proxyFreeze(newContext);\n      } else {\n        await plugin.lifeCycleServices?.messageLifeCycleService?.onBeforeGetMessageHistoryList?.(\n          proxyFreezeContext,\n        );\n      }\n\n      pluginBenchmark?.recordPluginEnd(plugin);\n    }\n\n    pluginBenchmark?.recordLifeCycleEnd();\n    /**\n     * CycleLife - Message - onBeforeGetMessageHistoryList End\n     */\n\n    return proxyFreezeContext;\n  }\n\n  async onBeforeSendMessage({ ctx }: { ctx: OnBeforeSendMessageContext }) {\n    const lifeCycleName: MessageLifeCycle = 'onBeforeSendMessage';\n    const lifeCycleScope = LifeCycleScope.Message;\n\n    const { reporter, usePluginStore } = this.lifeCycleContext;\n\n    const pluginBenchmark = createPluginBenchmark({\n      lifeCycleName,\n      lifeCycleScope,\n      reporter,\n    });\n\n    /**\n     * CycleLife - Message - OnBeforeSendMessage Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    pluginBenchmark?.recordLifeCycleStart();\n\n    let proxyFreezeContext = proxyFreeze(ctx);\n\n    for (const plugin of pluginInstanceList) {\n      pluginBenchmark?.recordPluginStart(plugin);\n\n      if (isWriteablePlugin(plugin)) {\n        const newContext =\n          await plugin.lifeCycleServices?.messageLifeCycleService?.onBeforeSendMessage?.(\n            proxyFreezeContext,\n          );\n\n        if (!newContext) {\n          pluginBenchmark?.recordPluginEnd(plugin);\n          continue;\n        }\n\n        localLog(\n          `${lifeCycleScope}/${lifeCycleName}/${plugin.pluginName}: newContext ${newContext}`,\n        );\n\n        proxyFreezeContext = proxyFreeze(newContext);\n      } else {\n        await plugin.lifeCycleServices?.messageLifeCycleService?.onBeforeSendMessage?.(\n          proxyFreezeContext,\n        );\n      }\n\n      pluginBenchmark?.recordPluginEnd(plugin);\n    }\n\n    pluginBenchmark?.recordLifeCycleEnd();\n    /**\n     * CycleLife - Message - OnBeforeSendMessage End\n     */\n\n    return proxyFreezeContext;\n  }\n\n  async onAfterSendMessage({ ctx }: { ctx: OnAfterSendMessageContext }) {\n    const lifeCycleName: MessageLifeCycle = 'onAfterSendMessage';\n    const lifeCycleScope = LifeCycleScope.Message;\n\n    const { reporter, usePluginStore } = this.lifeCycleContext;\n\n    const pluginBenchmark = createPluginBenchmark({\n      lifeCycleName,\n      lifeCycleScope,\n      reporter,\n    });\n\n    /**\n     * CycleLife - Message - OnAfterSendMessage Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    pluginBenchmark?.recordLifeCycleStart();\n\n    const proxyFreezeContext = proxyFreeze(ctx);\n\n    for (const plugin of pluginInstanceList) {\n      pluginBenchmark?.recordPluginStart(plugin);\n\n      await plugin.lifeCycleServices?.messageLifeCycleService?.onAfterSendMessage?.(\n        proxyFreezeContext,\n      );\n\n      pluginBenchmark?.recordPluginEnd(plugin);\n    }\n\n    pluginBenchmark?.recordLifeCycleEnd();\n    /**\n     * CycleLife - Message - OnAfterSendMessage End\n     */\n  }\n\n  onBeforeReceiveMessage({ ctx }: { ctx: OnBeforeReceiveMessageContext }) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    /**\n     * CycleLife - Message - onBeforeReceiveMessage Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    const proxyFreezeContext = proxyFreeze(ctx);\n\n    for (const plugin of pluginInstanceList) {\n      plugin.lifeCycleServices?.messageLifeCycleService?.onBeforeReceiveMessage?.(\n        proxyFreezeContext,\n      );\n    }\n\n    /**\n     * CycleLife - Message - onBeforeReceiveMessage End\n     */\n    return proxyFreezeContext;\n  }\n\n  onBeforeProcessReceiveMessage({\n    ctx,\n  }: {\n    ctx: OnBeforeProcessReceiveMessageContext;\n  }) {\n    const lifeCycleName: MessageLifeCycle = 'onBeforeProcessReceiveMessage';\n    const lifeCycleScope = LifeCycleScope.Message;\n\n    const { usePluginStore } = this.lifeCycleContext;\n\n    /**\n     * CycleLife - Message - onBeforeProcessReceiveMessage Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    let proxyFreezeContext = proxyFreeze(ctx);\n\n    for (const plugin of pluginInstanceList) {\n      if (isWriteablePlugin(plugin)) {\n        const newContext =\n          plugin.lifeCycleServices?.messageLifeCycleService?.onBeforeProcessReceiveMessage?.(\n            proxyFreezeContext,\n          );\n\n        if (!newContext) {\n          continue;\n        }\n\n        localLog(\n          `${lifeCycleScope}/${lifeCycleName}/${plugin.pluginName}: newContext ${newContext}`,\n        );\n\n        proxyFreezeContext = proxyFreeze(newContext);\n      } else {\n        plugin.lifeCycleServices?.messageLifeCycleService?.onBeforeProcessReceiveMessage?.(\n          proxyFreezeContext,\n        );\n      }\n    }\n\n    /**\n     * CycleLife - Message - onBeforeProcessReceiveMessage End\n     */\n    return proxyFreezeContext;\n  }\n\n  onBeforeMessageGroupListUpdate({\n    ctx,\n  }: {\n    ctx: OnBeforeMessageGroupListUpdateContext;\n  }) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    /**\n     * CycleLife - Message - onBeforeMessageGroupListUpdate Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    let proxyFreezeContext = proxyFreeze(ctx);\n\n    for (const plugin of pluginInstanceList) {\n      if (isWriteablePlugin(plugin)) {\n        const newContext =\n          plugin.lifeCycleServices?.messageLifeCycleService?.onBeforeMessageGroupListUpdate?.(\n            proxyFreezeContext,\n          );\n\n        if (!newContext) {\n          continue;\n        }\n\n        proxyFreezeContext = proxyFreeze(newContext);\n      } else {\n        plugin.lifeCycleServices?.messageLifeCycleService?.onBeforeMessageGroupListUpdate?.(\n          proxyFreezeContext,\n        );\n      }\n    }\n\n    /**\n     * CycleLife - Message - onBeforeMessageGroupListUpdate End\n     */\n    return proxyFreezeContext;\n  }\n\n  onAfterProcessReceiveMessage({\n    ctx,\n  }: {\n    ctx: OnAfterProcessReceiveMessageContext;\n  }) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    /**\n     * CycleLife - Message - onAfterProcessReceiveMessage Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    const proxyFreezeContext = proxyFreeze(ctx);\n\n    for (const plugin of pluginInstanceList) {\n      plugin.lifeCycleServices?.messageLifeCycleService?.onAfterProcessReceiveMessage?.(\n        proxyFreezeContext,\n      );\n    }\n    /**\n     * CycleLife - Message - onAfterProcessReceiveMessage End\n     */\n  }\n\n  async onBeforeDeleteMessage({ ctx }: { ctx: OnBeforeDeleteMessageContext }) {\n    const lifeCycleName: MessageLifeCycle = 'onBeforeDeleteMessage';\n    const lifeCycleScope = LifeCycleScope.Message;\n\n    const { reporter, usePluginStore } = this.lifeCycleContext;\n\n    const pluginBenchmark = createPluginBenchmark({\n      lifeCycleName,\n      lifeCycleScope,\n      reporter,\n    });\n\n    /**\n     * CycleLife - Message - OnBeforeDeleteMessage Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    pluginBenchmark?.recordLifeCycleStart();\n\n    const proxyFreezeContext = proxyFreeze(ctx);\n\n    for (const plugin of pluginInstanceList) {\n      pluginBenchmark?.recordPluginStart(plugin);\n\n      await plugin.lifeCycleServices?.messageLifeCycleService?.onBeforeDeleteMessage?.(\n        proxyFreezeContext,\n      );\n\n      pluginBenchmark?.recordPluginEnd(plugin);\n    }\n\n    pluginBenchmark?.recordLifeCycleEnd();\n    /**\n     * CycleLife - Message - OnBeforeDeleteMessage End\n     */\n  }\n\n  async onAfterDeleteMessage({ ctx }: { ctx: OnAfterDeleteMessageContext }) {\n    const lifeCycleName: MessageLifeCycle = 'onAfterDeleteMessage';\n    const lifeCycleScope = LifeCycleScope.Message;\n\n    const { reporter, usePluginStore } = this.lifeCycleContext;\n\n    const pluginBenchmark = createPluginBenchmark({\n      lifeCycleName,\n      lifeCycleScope,\n      reporter,\n    });\n\n    /**\n     * CycleLife - Message - OnAfterDeleteMessage Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    pluginBenchmark?.recordLifeCycleStart();\n\n    const proxyFreezeContext = proxyFreeze(ctx);\n\n    for (const plugin of pluginInstanceList) {\n      pluginBenchmark?.recordPluginStart(plugin);\n      await plugin.lifeCycleServices?.messageLifeCycleService?.onAfterDeleteMessage?.(\n        proxyFreezeContext,\n      );\n      pluginBenchmark?.recordPluginEnd(plugin);\n    }\n\n    pluginBenchmark?.recordLifeCycleEnd();\n\n    /**\n     * CycleLife - Message - OnAfterDeleteMessage End\n     */\n  }\n\n  async onDeleteMessageError(ctx: OnDeleteMessageErrorContext) {\n    const lifeCycleName: MessageLifeCycle = 'onDeleteMessageError';\n    const lifeCycleScope = LifeCycleScope.Message;\n\n    const { reporter, usePluginStore } = this.lifeCycleContext;\n\n    const pluginBenchmark = createPluginBenchmark({\n      lifeCycleName,\n      lifeCycleScope,\n      reporter,\n    });\n\n    /**\n     * CycleLife - Message - OnDeleteMessageErrorContext Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    pluginBenchmark?.recordLifeCycleStart();\n\n    for (const plugin of pluginInstanceList) {\n      pluginBenchmark?.recordPluginStart(plugin);\n      await plugin.lifeCycleServices?.messageLifeCycleService?.onDeleteMessageError?.(\n        ctx,\n      );\n      pluginBenchmark?.recordPluginEnd(plugin);\n    }\n\n    pluginBenchmark?.recordLifeCycleEnd();\n    /**\n     * CycleLife - Message - OnDeleteMessageErrorContext End\n     */\n  }\n\n  async onSendMessageError({ ctx }: { ctx: OnSendMessageErrorContext }) {\n    const lifeCycleName: MessageLifeCycle = 'onSendMessageError';\n    const lifeCycleScope = LifeCycleScope.Message;\n\n    const { reporter, usePluginStore } = this.lifeCycleContext;\n\n    const pluginBenchmark = createPluginBenchmark({\n      lifeCycleName,\n      lifeCycleScope,\n      reporter,\n    });\n\n    /**\n     * CycleLife - Message - OnSendMessageError Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    pluginBenchmark?.recordLifeCycleStart();\n\n    const proxyFreezeContext = proxyFreeze(ctx);\n\n    for (const plugin of pluginInstanceList) {\n      pluginBenchmark?.recordPluginStart(plugin);\n\n      await plugin.lifeCycleServices?.messageLifeCycleService?.onSendMessageError?.(\n        proxyFreezeContext,\n      );\n\n      pluginBenchmark?.recordPluginEnd(plugin);\n    }\n\n    pluginBenchmark?.recordLifeCycleEnd();\n    /**\n     * CycleLife - Message - OnSendMessageError End\n     */\n  }\n\n  onBeforeDistributeMessageIntoMemberSet({\n    ctx,\n  }: {\n    ctx: OnBeforeDistributeMessageIntoMemberSetContent;\n  }) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    /**\n     * CycleLife - Message - onBeforeDistributeMessageIntoMemberSet Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    let proxyFreezeContext = proxyFreeze(ctx);\n\n    for (const plugin of pluginInstanceList) {\n      if (isWriteablePlugin(plugin)) {\n        const newContext =\n          plugin.lifeCycleServices?.messageLifeCycleService?.onBeforeDistributeMessageIntoMemberSet?.(\n            proxyFreezeContext,\n          );\n\n        if (!newContext) {\n          continue;\n        }\n\n        proxyFreezeContext = proxyFreeze(newContext);\n      } else {\n        plugin.lifeCycleServices?.messageLifeCycleService?.onBeforeDistributeMessageIntoMemberSet?.(\n          proxyFreezeContext,\n        );\n      }\n    }\n\n    /**\n     * CycleLife - Message - onBeforeDistributeMessageIntoMemberSet End\n     */\n\n    return proxyFreezeContext;\n  }\n\n  async onBeforeAppendSenderMessageIntoStore({\n    ctx,\n  }: {\n    ctx: OnBeforeAppendSenderMessageIntoStore;\n  }) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    /**\n     * CycleLife - Message - onBeforeAppendSenderMessageIntoStore Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    let proxyFreezeContext = proxyFreeze(ctx);\n\n    for (const plugin of pluginInstanceList) {\n      if (isWriteablePlugin(plugin)) {\n        const newContext =\n          await plugin.lifeCycleServices?.messageLifeCycleService?.onBeforeAppendSenderMessageIntoStore?.(\n            proxyFreezeContext,\n          );\n\n        if (!newContext) {\n          continue;\n        }\n\n        proxyFreezeContext = proxyFreeze(newContext);\n      } else {\n        await plugin.lifeCycleServices?.messageLifeCycleService?.onBeforeAppendSenderMessageIntoStore?.(\n          proxyFreezeContext,\n        );\n      }\n    }\n\n    /**\n     * CycleLife - Message - onBeforeAppendSenderMessageIntoStore End\n     */\n    return proxyFreezeContext;\n  }\n\n  async onAfterAppendSenderMessageIntoStore({\n    ctx,\n  }: {\n    ctx: OnBeforeAppendSenderMessageIntoStore;\n  }) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    /**\n     * CycleLife - Message - onAfterAppendSenderMessageIntoStore Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    const proxyFreezeContext = proxyFreeze(ctx);\n\n    for (const plugin of pluginInstanceList) {\n      await plugin.lifeCycleServices?.messageLifeCycleService?.onAfterAppendSenderMessageIntoStore?.(\n        proxyFreezeContext,\n      );\n    }\n  }\n\n  onMessagePullingError({ ctx }: { ctx: OnMessagePullingErrorContext }) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    const proxyFreezeContext = proxyFreeze(ctx);\n\n    for (const plugin of pluginInstanceList) {\n      plugin.lifeCycleServices?.messageLifeCycleService?.onMessagePullingError?.(\n        proxyFreezeContext,\n      );\n    }\n  }\n\n  onMessagePullingSuccess({ ctx }: { ctx: OnMessagePullingSuccessContext }) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    const proxyFreezeContext = proxyFreeze(ctx);\n\n    for (const plugin of pluginInstanceList) {\n      plugin.lifeCycleServices?.messageLifeCycleService?.onMessagePullingSuccess?.(\n        proxyFreezeContext,\n      );\n    }\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createPluginBenchmark } from '../create-plugin-benchmark';\nimport { isWriteablePlugin } from '../../utils/is-writeable-plugin';\nimport {\n  type OnImageClickContext,\n  type OnBeforeClearContextContext,\n  type OnOnboardingSelectChangeContext,\n  type OnSelectionChangeContext,\n  type OnStopRespondingErrorContext,\n  type OnInputPasteContext,\n  type OnLinkElementContext,\n  type OnImageElementContext,\n  type OnAfterStopRespondingContext,\n  type OnMessageLinkClickContext,\n} from '../../types/plugin-class/command-life-cycle';\nimport { type LifeCycleContext } from '../../types';\nimport { type CommandLifeCycle, LifeCycleScope } from '../../constants/plugin';\nimport { proxyFreeze } from '../../../utils/proxy-freeze';\n\ntype Expect<T extends true> = T;\n\ntype TestClassIncludeCommandLifeCycleKeys =\n  CommandLifeCycle extends keyof SystemCommandLifeCycleService ? true : false;\n\n// eslint-disable-next-line @typescript-eslint/naming-convention, @typescript-eslint/no-unused-vars -- detect type usage\ntype _ = Expect<TestClassIncludeCommandLifeCycleKeys>;\n\nexport class SystemCommandLifeCycleService {\n  private lifeCycleContext: LifeCycleContext;\n\n  constructor(lifeCycleContext: LifeCycleContext) {\n    this.lifeCycleContext = lifeCycleContext;\n  }\n\n  async onBeforeClearContext({ ctx }: { ctx: OnBeforeClearContextContext }) {\n    const lifeCycleName: CommandLifeCycle = 'onBeforeClearContext';\n    const lifeCycleScope = LifeCycleScope.Command;\n\n    const { reporter, usePluginStore } = this.lifeCycleContext;\n\n    const pluginBenchmark = createPluginBenchmark({\n      lifeCycleName,\n      lifeCycleScope,\n      reporter,\n    });\n\n    /**\n     * CycleLife - Command - OnBeforeClearContext Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    pluginBenchmark?.recordLifeCycleStart();\n    let proxyFreezeContext = proxyFreeze(ctx);\n    for (const plugin of pluginInstanceList) {\n      pluginBenchmark?.recordPluginStart(plugin);\n      if (isWriteablePlugin(plugin)) {\n        const newContext =\n          await plugin.lifeCycleServices?.commandLifeCycleService?.onBeforeClearContext?.(\n            proxyFreezeContext,\n          );\n\n        if (!newContext) {\n          continue;\n        }\n\n        proxyFreezeContext = proxyFreeze(newContext);\n      } else {\n        await plugin.lifeCycleServices?.commandLifeCycleService?.onBeforeClearContext?.(\n          proxyFreezeContext,\n        );\n      }\n      pluginBenchmark?.recordPluginEnd(plugin);\n    }\n\n    pluginBenchmark?.recordLifeCycleEnd();\n    /**\n     * CycleLife - Command - OnBeforeClearContext End\n     */\n\n    return proxyFreezeContext;\n  }\n\n  async onAfterClearContext() {\n    const lifeCycleName: CommandLifeCycle = 'onAfterClearContext';\n    const lifeCycleScope = LifeCycleScope.Command;\n\n    const { reporter, usePluginStore } = this.lifeCycleContext;\n\n    const pluginBenchmark = createPluginBenchmark({\n      lifeCycleName,\n      lifeCycleScope,\n      reporter,\n    });\n\n    /**\n     * CycleLife - Command - OnAfterClearContext Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n    pluginBenchmark?.recordLifeCycleStart();\n    for (const plugin of pluginInstanceList) {\n      pluginBenchmark?.recordPluginStart(plugin);\n      await plugin.lifeCycleServices?.commandLifeCycleService?.onAfterClearContext?.();\n      pluginBenchmark?.recordPluginEnd(plugin);\n    }\n    pluginBenchmark?.recordLifeCycleEnd();\n    /**\n     * CycleLife - Command - OnAfterClearContext End\n     */\n  }\n\n  async onBeforeClearHistory() {\n    const lifeCycleName: CommandLifeCycle = 'onBeforeClearHistory';\n    const lifeCycleScope = LifeCycleScope.Command;\n\n    const { reporter, usePluginStore } = this.lifeCycleContext;\n\n    const pluginBenchmark = createPluginBenchmark({\n      lifeCycleName,\n      lifeCycleScope,\n      reporter,\n    });\n\n    /**\n     * CycleLife - Command - OnBeforeClearHistory Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    pluginBenchmark?.recordLifeCycleStart();\n\n    for (const plugin of pluginInstanceList) {\n      pluginBenchmark?.recordPluginStart(plugin);\n      await plugin.lifeCycleServices?.commandLifeCycleService?.onBeforeClearHistory?.();\n      pluginBenchmark?.recordPluginEnd(plugin);\n    }\n\n    pluginBenchmark?.recordLifeCycleEnd();\n    /**\n     * CycleLife - Command - OnBeforeClearHistory End\n     */\n  }\n\n  async onAfterClearHistory() {\n    const lifeCycleName: CommandLifeCycle = 'onAfterClearHistory';\n    const lifeCycleScope = LifeCycleScope.Command;\n\n    const { reporter, usePluginStore } = this.lifeCycleContext;\n\n    const pluginBenchmark = createPluginBenchmark({\n      lifeCycleName,\n      lifeCycleScope,\n      reporter,\n    });\n\n    /**\n     * CycleLife - Command - OnAfterClearHistory Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    pluginBenchmark?.recordLifeCycleStart();\n    for (const plugin of pluginInstanceList) {\n      pluginBenchmark?.recordPluginStart(plugin);\n      await plugin.lifeCycleServices?.commandLifeCycleService?.onAfterClearHistory?.();\n      pluginBenchmark?.recordPluginEnd(plugin);\n    }\n    pluginBenchmark?.recordLifeCycleEnd();\n    /**\n     * CycleLife - Command - OnAfterClearHistory End\n     */\n  }\n\n  async onBeforeStopResponding() {\n    const lifeCycleName: CommandLifeCycle = 'onBeforeStopResponding';\n    const lifeCycleScope = LifeCycleScope.Command;\n\n    const { reporter, usePluginStore } = this.lifeCycleContext;\n\n    const pluginBenchmark = createPluginBenchmark({\n      lifeCycleName,\n      lifeCycleScope,\n      reporter,\n    });\n\n    /**\n     * CycleLife - Command - OnBeforeStopResponding Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    pluginBenchmark?.recordLifeCycleStart();\n    for (const plugin of pluginInstanceList) {\n      pluginBenchmark?.recordPluginStart(plugin);\n      await plugin.lifeCycleServices?.commandLifeCycleService?.onBeforeStopResponding?.();\n      pluginBenchmark?.recordPluginEnd(plugin);\n    }\n    pluginBenchmark?.recordLifeCycleEnd();\n    /**\n     * CycleLife - Command - OnBeforeStopResponding End\n     */\n  }\n\n  async onAfterStopResponding({ ctx }: { ctx: OnAfterStopRespondingContext }) {\n    const lifeCycleName: CommandLifeCycle = 'onAfterStopResponding';\n    const lifeCycleScope = LifeCycleScope.Command;\n\n    const { reporter, usePluginStore } = this.lifeCycleContext;\n\n    const pluginBenchmark = createPluginBenchmark({\n      lifeCycleName,\n      lifeCycleScope,\n      reporter,\n    });\n\n    /**\n     * CycleLife - Command - OnAfterStopResponding Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    pluginBenchmark?.recordLifeCycleStart();\n    for (const plugin of pluginInstanceList) {\n      pluginBenchmark?.recordPluginStart(plugin);\n      await plugin.lifeCycleServices?.commandLifeCycleService?.onAfterStopResponding?.(\n        ctx,\n      );\n      pluginBenchmark?.recordPluginEnd(plugin);\n    }\n    pluginBenchmark?.recordLifeCycleStart();\n    /**\n     * CycleLife - Command - OnAfterStopResponding End\n     */\n  }\n\n  async onClearContextError() {\n    const lifeCycleName: CommandLifeCycle = 'onBeforeClearContext';\n    const lifeCycleScope = LifeCycleScope.Command;\n\n    const { reporter, usePluginStore } = this.lifeCycleContext;\n\n    const pluginBenchmark = createPluginBenchmark({\n      lifeCycleName,\n      lifeCycleScope,\n      reporter,\n    });\n\n    /**\n     * CycleLife - Command - OnClearContextError Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    pluginBenchmark?.recordLifeCycleStart();\n    for (const plugin of pluginInstanceList) {\n      pluginBenchmark?.recordPluginStart(plugin);\n      await plugin.lifeCycleServices?.commandLifeCycleService?.onClearContextError?.();\n      pluginBenchmark?.recordPluginEnd(plugin);\n    }\n    pluginBenchmark?.recordLifeCycleEnd();\n    /**\n     * CycleLife - Command - OnClearContextError End\n     */\n  }\n\n  async onImageClick({ ctx }: { ctx: OnImageClickContext }) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    /**\n     * CycleLife - Command - OnImageClick Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    const proxyFreezeContext = proxyFreeze(ctx);\n\n    for (const plugin of pluginInstanceList) {\n      await plugin.lifeCycleServices?.commandLifeCycleService?.onImageClick?.(\n        proxyFreezeContext,\n      );\n    }\n    /**\n     * CycleLife - Command - OnImageClick End\n     */\n  }\n\n  async onInputClick() {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    /**\n     * CycleLife - Command - OnInputClick Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    for (const plugin of pluginInstanceList) {\n      await plugin.lifeCycleServices?.commandLifeCycleService?.onInputClick?.();\n    }\n    /**\n     * CycleLife - Command - OnInputClick End\n     */\n  }\n\n  async onOnboardingSelectChange({\n    ctx,\n  }: {\n    ctx: OnOnboardingSelectChangeContext;\n  }) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    /**\n     * CycleLife - Command - OnOnboardingSelectChange Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    const proxyFreezeContext = proxyFreeze(ctx);\n\n    for (const plugin of pluginInstanceList) {\n      await plugin.lifeCycleServices?.commandLifeCycleService?.onOnboardingSelectChange?.(\n        proxyFreezeContext,\n      );\n    }\n\n    /**\n     * CycleLife - Command - OnOnboardingSelectChange End\n     */\n  }\n\n  async onSelectionChange({ ctx }: { ctx: OnSelectionChangeContext }) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    /**\n     * CycleLife - Command - OnSelectionChange Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    const proxyFreezeContext = proxyFreeze(ctx);\n\n    for (const plugin of pluginInstanceList) {\n      await plugin.lifeCycleServices?.commandLifeCycleService?.onSelectionChange?.(\n        proxyFreezeContext,\n      );\n    }\n    /**\n     * CycleLife - Command - OnSelectionChange End\n     */\n  }\n\n  async onStopRespondingError({ ctx }: { ctx: OnStopRespondingErrorContext }) {\n    const lifeCycleName: CommandLifeCycle = 'onStopRespondingError';\n    const lifeCycleScope = LifeCycleScope.Command;\n\n    const { reporter, usePluginStore } = this.lifeCycleContext;\n\n    const pluginBenchmark = createPluginBenchmark({\n      lifeCycleName,\n      lifeCycleScope,\n      reporter,\n    });\n\n    /**\n     * CycleLife - Command - OnStopRespondingError Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    pluginBenchmark?.recordLifeCycleStart();\n\n    for (const plugin of pluginInstanceList) {\n      pluginBenchmark?.recordPluginStart(plugin);\n\n      await plugin.lifeCycleServices?.commandLifeCycleService?.onStopRespondingError?.(\n        ctx,\n      );\n\n      pluginBenchmark?.recordPluginEnd(plugin);\n    }\n    pluginBenchmark?.recordLifeCycleEnd();\n    /**\n     * CycleLife - Command - OnStopRespondingError End\n     */\n  }\n\n  async onInputPaste({ ctx }: { ctx: OnInputPasteContext }) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    /**\n     * CycleLife - Command - onInputPaste Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    for (const plugin of pluginInstanceList) {\n      await plugin.lifeCycleServices?.commandLifeCycleService?.onInputPaste?.(\n        ctx,\n      );\n    }\n    /**\n     * CycleLife - Command - onInputPaste End\n     */\n  }\n\n  onViewScroll() {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    /**\n     * CycleLife - Command - onViewScroll Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    for (const plugin of pluginInstanceList) {\n      plugin.lifeCycleServices?.commandLifeCycleService?.onViewScroll?.();\n    }\n    /**\n     * CycleLife - Command - onViewScroll End\n     */\n  }\n\n  onCardLinkElementMouseEnter({ ctx }: { ctx: OnLinkElementContext }) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    /**\n     * CycleLife - Command - onCardLinkElementMouseEnter Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    for (const plugin of pluginInstanceList) {\n      plugin.lifeCycleServices?.commandLifeCycleService?.onCardLinkElementMouseEnter?.(\n        ctx,\n      );\n    }\n    /**\n     * CycleLife - Command - onCardLinkElementMouseEnter End\n     */\n  }\n\n  onCardLinkElementMouseLeave({ ctx }: { ctx: OnLinkElementContext }) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    /**\n     * CycleLife - Command - onCardLinkElementMouseLeave Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    for (const plugin of pluginInstanceList) {\n      plugin.lifeCycleServices?.commandLifeCycleService?.onCardLinkElementMouseLeave?.(\n        ctx,\n      );\n    }\n    /**\n     * CycleLife - Command - onCardLinkElementMouseLeave End\n     */\n  }\n\n  onMdBoxImageElementMouseEnter({ ctx }: { ctx: OnImageElementContext }) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    /**\n     * CycleLife - Command - onMdBoxImageElementMouseEnter Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    for (const plugin of pluginInstanceList) {\n      plugin.lifeCycleServices?.commandLifeCycleService?.onMdBoxImageElementMouseEnter?.(\n        ctx,\n      );\n    }\n    /**\n     * CycleLife - Command - onMdBoxImageElementMouseEnter End\n     */\n  }\n\n  onMdBoxImageElementMouseLeave({ ctx }: { ctx: OnImageElementContext }) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    /**\n     * CycleLife - Command - onMdBoxImageElementMouseLeave Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    for (const plugin of pluginInstanceList) {\n      plugin.lifeCycleServices?.commandLifeCycleService?.onMdBoxImageElementMouseLeave?.(\n        ctx,\n      );\n    }\n    /**\n     * CycleLife - Command - onMdBoxImageElementMouseLeave End\n     */\n  }\n\n  onMdBoxLinkElementMouseEnter({ ctx }: { ctx: OnLinkElementContext }) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    /**\n     * CycleLife - Command - onMdBoxLinkElementMouseEnter Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    for (const plugin of pluginInstanceList) {\n      plugin.lifeCycleServices?.commandLifeCycleService?.onMdBoxLinkElementMouseEnter?.(\n        ctx,\n      );\n    }\n    /**\n     * CycleLife - Command - onMdBoxLinkElementMouseEnter End\n     */\n  }\n\n  onMdBoxLinkElementMouseLeave({ ctx }: { ctx: OnLinkElementContext }) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    /**\n     * CycleLife - Command - onMdBoxLinkElementMouseLeave Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    for (const plugin of pluginInstanceList) {\n      plugin.lifeCycleServices?.commandLifeCycleService?.onMdBoxLinkElementMouseLeave?.(\n        ctx,\n      );\n    }\n    /**\n     * CycleLife - Command - onMdBoxLinkElementMouseLeave End\n     */\n  }\n\n  onMessageLinkClick({ ctx }: { ctx: OnMessageLinkClickContext }) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    for (const plugin of pluginInstanceList) {\n      plugin.lifeCycleServices?.commandLifeCycleService?.onMessageLinkClick?.(\n        ctx,\n      );\n    }\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createPluginBenchmark } from '../create-plugin-benchmark';\nimport {\n  type OnRefreshMessageListError,\n  type OnAfterCallback,\n  type OnAfterInitialContext,\n} from '../../types/plugin-class/app-life-cycle';\nimport { type LifeCycleContext } from '../../types';\nimport { type OnBeforeListenChatCoreParam } from '../../plugin-class/service/app-life-cycle-service';\nimport { type AppLifeCycle, LifeCycleScope } from '../../constants/plugin';\nimport { proxyFreeze } from '../../../utils/proxy-freeze';\n\ntype Expect<T extends true> = T;\n\ntype TestClassIncludeAppLifeCycleKeys =\n  AppLifeCycle extends keyof SystemAppLifeCycleService ? true : false;\n\n// eslint-disable-next-line @typescript-eslint/naming-convention, @typescript-eslint/no-unused-vars -- detect type usage\ntype _ = Expect<TestClassIncludeAppLifeCycleKeys>;\n\nexport class SystemAppLifeCycleService {\n  private lifeCycleContext: LifeCycleContext;\n\n  constructor(lifeCycleContext: LifeCycleContext) {\n    this.lifeCycleContext = lifeCycleContext;\n  }\n\n  onAfterCreateStores(stores: OnAfterCallback) {\n    const lifeCycleName: AppLifeCycle = 'onAfterCreateStores';\n    const lifeCycleScope = LifeCycleScope.App;\n\n    const { reporter, usePluginStore } = this.lifeCycleContext;\n\n    const pluginBenchmark = createPluginBenchmark({\n      lifeCycleName,\n      lifeCycleScope,\n      reporter,\n    });\n\n    /**\n     * CycleLife - App - onAfterCreateStores Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    pluginBenchmark?.recordLifeCycleStart();\n    for (const plugin of pluginInstanceList) {\n      pluginBenchmark?.recordPluginStart(plugin);\n      plugin.lifeCycleServices?.appLifeCycleService?.onAfterCreateStores?.(\n        stores,\n      );\n      pluginBenchmark?.recordPluginEnd(plugin);\n    }\n    pluginBenchmark?.recordLifeCycleEnd();\n    /**\n     * CycleLife - App - onAfterCreateStores End\n     */\n  }\n\n  onBeforeInitial() {\n    const lifeCycleName: AppLifeCycle = 'onBeforeInitial';\n    const lifeCycleScope = LifeCycleScope.App;\n\n    const { reporter, usePluginStore } = this.lifeCycleContext;\n\n    const pluginBenchmark = createPluginBenchmark({\n      lifeCycleName,\n      lifeCycleScope,\n      reporter,\n    });\n\n    /**\n     * CycleLife - App - OnBeforeInitial Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    pluginBenchmark?.recordLifeCycleStart();\n    for (const plugin of pluginInstanceList) {\n      pluginBenchmark?.recordPluginStart(plugin);\n      plugin.lifeCycleServices?.appLifeCycleService?.onBeforeInitial?.();\n      pluginBenchmark?.recordPluginEnd(plugin);\n    }\n    pluginBenchmark?.recordLifeCycleEnd();\n    /**\n     * CycleLife - App - OnBeforeInitial End\n     */\n  }\n\n  onAfterInitial({ ctx }: { ctx: OnAfterInitialContext }) {\n    const lifeCycleName: AppLifeCycle = 'onAfterInitial';\n    const lifeCycleScope = LifeCycleScope.App;\n\n    const { reporter, usePluginStore } = this.lifeCycleContext;\n\n    const pluginBenchmark = createPluginBenchmark({\n      lifeCycleName,\n      lifeCycleScope,\n      reporter,\n    });\n\n    /**\n     * CycleLife - App - OnAfterInitial Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    const proxyFreezeContext = proxyFreeze(ctx);\n    pluginBenchmark?.recordLifeCycleStart();\n    for (const plugin of pluginInstanceList) {\n      pluginBenchmark?.recordPluginStart(plugin);\n      plugin.lifeCycleServices?.appLifeCycleService?.onAfterInitial?.(\n        proxyFreezeContext,\n      );\n      pluginBenchmark?.recordPluginEnd(plugin);\n    }\n    pluginBenchmark?.recordLifeCycleEnd();\n\n    /**\n     * CycleLife - App - OnAfterInitial End\n     */\n  }\n\n  onInitialError() {\n    const lifeCycleName: AppLifeCycle = 'onInitialError';\n    const lifeCycleScope = LifeCycleScope.App;\n\n    const { reporter, usePluginStore } = this.lifeCycleContext;\n\n    const pluginBenchmark = createPluginBenchmark({\n      lifeCycleName,\n      lifeCycleScope,\n      reporter,\n    });\n\n    /**\n     * CycleLife - App - OnInitialError Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    pluginBenchmark?.recordLifeCycleStart();\n    for (const plugin of pluginInstanceList) {\n      pluginBenchmark?.recordPluginStart(plugin);\n      plugin.lifeCycleServices?.appLifeCycleService?.onInitialError?.();\n      pluginBenchmark?.recordPluginEnd(plugin);\n    }\n    pluginBenchmark?.recordLifeCycleEnd();\n\n    /**\n     * CycleLife - App - OnInitialError End\n     */\n  }\n\n  onBeforeDestroy() {\n    const lifeCycleName: AppLifeCycle = 'onBeforeDestroy';\n    const lifeCycleScope = LifeCycleScope.App;\n\n    const { reporter, usePluginStore } = this.lifeCycleContext;\n\n    const pluginBenchmark = createPluginBenchmark({\n      lifeCycleName,\n      lifeCycleScope,\n      reporter,\n    });\n\n    /**\n     * CycleLife - App - OnBeforeDestroy Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    pluginBenchmark?.recordLifeCycleStart();\n    for (const plugin of pluginInstanceList) {\n      pluginBenchmark?.recordPluginStart(plugin);\n      plugin.lifeCycleServices?.appLifeCycleService?.onBeforeDestroy?.();\n      pluginBenchmark?.recordPluginEnd(plugin);\n    }\n    pluginBenchmark?.recordLifeCycleEnd();\n    /**\n     * CycleLife - App - OnBeforeDestroy End\n     */\n  }\n\n  onBeforeRefreshMessageList() {\n    const { usePluginStore } = this.lifeCycleContext;\n    /**\n     * CycleLife - App - onBeforeRefreshMessageList Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    for (const plugin of pluginInstanceList) {\n      plugin.lifeCycleServices?.appLifeCycleService?.onBeforeRefreshMessageList?.();\n    }\n    /**\n     * CycleLife - App - onBeforeRefreshMessageList End\n     */\n  }\n\n  onAfterRefreshMessageList() {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    /**\n     * CycleLife - App - onAfterRefreshMessageList Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    for (const plugin of pluginInstanceList) {\n      plugin.lifeCycleServices?.appLifeCycleService?.onAfterRefreshMessageList?.();\n    }\n    /**\n     * CycleLife - App - onAfterRefreshMessageList End\n     */\n  }\n\n  onRefreshMessageListError({ ctx }: { ctx: OnRefreshMessageListError }) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    /**\n     * CycleLife - App - onRefreshMessageListError Start\n     */\n    const { pluginInstanceList } = usePluginStore.getState();\n\n    for (const plugin of pluginInstanceList) {\n      plugin.lifeCycleServices?.appLifeCycleService?.onRefreshMessageListError?.(\n        ctx,\n      );\n    }\n    /**\n     * CycleLife - App - onRefreshMessageListError End\n     */\n  }\n\n  onBeforeListenChatCore(param: OnBeforeListenChatCoreParam) {\n    const { usePluginStore } = this.lifeCycleContext;\n\n    const { pluginInstanceList } = usePluginStore.getState();\n    let abort = false;\n\n    for (const plugin of pluginInstanceList) {\n      const res =\n        plugin.lifeCycleServices?.appLifeCycleService?.onBeforeListenChatCore?.(\n          param,\n        );\n      if (res?.abortListen) {\n        abort = true;\n      }\n    }\n    return abort;\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type LifeCycleContext } from '../types';\nimport { SystemRenderLifeCycleService } from './render-life-cycle';\nimport { SystemMessageLifeCycleService } from './message-life-cycle';\nimport { SystemCommandLifeCycleService } from './command-life-cycle';\nimport { SystemAppLifeCycleService } from './app-life-cycle';\n\nexport class SystemLifeCycleService {\n  lifeCycleContext: LifeCycleContext;\n\n  app: SystemAppLifeCycleService;\n  command: SystemCommandLifeCycleService;\n  message: SystemMessageLifeCycleService;\n  render: SystemRenderLifeCycleService;\n\n  constructor(lifeCycleContext: LifeCycleContext) {\n    this.lifeCycleContext = lifeCycleContext;\n\n    this.app = new SystemAppLifeCycleService(this.lifeCycleContext);\n    this.command = new SystemCommandLifeCycleService(this.lifeCycleContext);\n    this.message = new SystemMessageLifeCycleService(this.lifeCycleContext);\n    this.render = new SystemRenderLifeCycleService(this.lifeCycleContext);\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type WaitingState, type WaitingStore } from '../../../store/waiting';\n\ntype Listener = (isProcessing: boolean) => void;\n\nexport const getChatProcessing = (state: WaitingState) =>\n  !!state.waiting || !!state.sending;\n\nexport const getListenProcessChatStateChange = (\n  useWaitingStore: WaitingStore,\n) => {\n  const callbacks = new Set<Listener>();\n\n  const unsubscribe = useWaitingStore.subscribe(getChatProcessing, res => {\n    callbacks.forEach(fn => fn(res));\n  });\n\n  return {\n    listenProcessChatStateChange: (fn: Listener) => {\n      callbacks.add(fn);\n      return {\n        dispose: () => {\n          callbacks.delete(fn);\n        },\n      };\n    },\n    forceDispose: () => {\n      callbacks.clear();\n      unsubscribe();\n    },\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type GetHistoryMessageResponse } from '@coze-common/chat-core';\n\nimport type { StoreSet } from '../../../context/chat-area-context/type';\nimport { type ChatAreaEventCallback } from '../../../context/chat-area-context/chat-area-callback';\n\nexport const getInsertMessages =\n  (\n    storeSet: StoreSet,\n    onBeforeLoadMoreInsertMessages: ChatAreaEventCallback['onBeforeLoadMoreInsertMessages'],\n  ) =>\n  (\n    res: GetHistoryMessageResponse,\n    { toLatest, clearFirst }: { toLatest: boolean; clearFirst?: boolean },\n  ) => {\n    const { useMessagesStore } = storeSet;\n    const { addMessages, findMessage } = useMessagesStore.getState();\n\n    onBeforeLoadMoreInsertMessages?.({ data: res });\n\n    const newAddedMessages = clearFirst\n      ? res.message_list\n      : res.message_list.filter(msg => !findMessage(msg.message_id));\n    addMessages(newAddedMessages, { toLatest, clearFirst });\n  };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Scene } from '@coze-common/chat-core';\nimport type ChatCore from '@coze-common/chat-core';\n\nimport { type ChatAreaProviderProps } from '../type';\n\nexport const generateChatCoreBiz = (\n  params: ChatAreaProviderProps['scene'],\n): ChatCore['biz'] => {\n  switch (params) {\n    case Scene.CozeHome:\n      return 'coze_home';\n    case Scene.Playground:\n      return 'bot_editor';\n    // There is no bot store now\n    default:\n      return 'third_part';\n  }\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { produce } from 'immer';\n\nimport {\n  type WriteableLifeCycleServiceCollection,\n  type ReadonlyLifeCycleServiceCollection,\n} from '../plugin/types/plugin-class/life-cycle';\nimport {\n  type ReadonlyChatAreaPlugin,\n  type WriteableChatAreaPlugin,\n} from '../plugin/plugin-class/plugin';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Additional System Requirements\n */\nexport interface WriteableLifeCycleServicesAddition<T = any, K = any> {\n  lifeCycleServices?:\n    | WriteableLifeCycleServiceCollection<T, K>\n    | ReadonlyLifeCycleServiceCollection<T, K>;\n}\n\nexport interface ReadonlyLifeCycleServicesAddition<T = any, K = any> {\n  lifeCycleServices?: ReadonlyLifeCycleServiceCollection<T, K>;\n}\n\nexport interface PluginState {\n  pluginInstanceList: (\n    | (ReadonlyChatAreaPlugin<any, any> & WriteableLifeCycleServicesAddition)\n    | (WriteableChatAreaPlugin<any, any> & ReadonlyLifeCycleServicesAddition)\n  )[];\n  serviceOffSubscriptionList: (() => void)[];\n}\n/* eslint-enable @typescript-eslint/no-explicit-any */\n\nexport interface PluginAction {\n  setPluginInstanceList: (\n    pluginInstanceList: (\n      | ReadonlyChatAreaPlugin<object>\n      | WriteableChatAreaPlugin<object>\n    )[],\n  ) => void;\n  updateServiceOffSubscriptionListByImmer: (\n    updater: (serviceOffSubscriptionList: (() => void)[]) => void,\n  ) => void;\n  appendServiceOffSubscriptionList: (offSubscription: () => void) => void;\n  offAllSubscription: () => void;\n  clearPluginStore: () => void;\n}\n\nexport const createPluginStore = (mark: string) => {\n  const usePluginStore = create<PluginState & PluginAction>()(\n    devtools(\n      (set, get) => ({\n        pluginInstanceList: [],\n        serviceOffSubscriptionList: [],\n        setPluginInstanceList: pluginInstanceList => {\n          set(\n            {\n              pluginInstanceList,\n            },\n            false,\n            'setPluginInstanceList',\n          );\n        },\n        updateServiceOffSubscriptionListByImmer: updater => {\n          set(\n            produce<PluginState>(state =>\n              updater(state.serviceOffSubscriptionList),\n            ),\n            false,\n            'updateServiceOffSubscriptionListByImmer',\n          );\n        },\n        appendServiceOffSubscriptionList: offSubscription => {\n          const { serviceOffSubscriptionList } = get();\n          set(\n            {\n              serviceOffSubscriptionList: [\n                ...serviceOffSubscriptionList,\n                offSubscription,\n              ],\n            },\n            false,\n            'appendServiceOffSubscriptionList',\n          );\n        },\n        offAllSubscription: () => {\n          const { serviceOffSubscriptionList } = get();\n          serviceOffSubscriptionList.forEach(off => off());\n        },\n        clearPluginStore: () => {\n          set(\n            {\n              pluginInstanceList: [],\n              serviceOffSubscriptionList: [],\n            },\n            false,\n            'clearPluginStore',\n          );\n        },\n      }),\n      {\n        name: `botStudio.ChatAreaPluginStore.${mark}`,\n        enabled: IS_DEV_MODE,\n      },\n    ),\n  );\n\n  return usePluginStore;\n};\n\nexport type PluginStore = ReturnType<typeof createPluginStore>;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type Scene } from '@coze-common/chat-core';\nimport { exhaustiveCheckForRecord } from '@coze-common/chat-area-utils';\nimport { type Reporter } from '@coze-arch/logger';\n\nimport { createPluginStore } from '../../store/plugins';\nimport {\n  type ExtendDataLifecycle,\n  type StoreSet,\n} from '../../context/chat-area-context/type';\n\nexport interface PreInitStoreContext {\n  reporter: Reporter;\n  extendDataLifecycle?: ExtendDataLifecycle;\n  mark: string;\n  scene: Scene;\n}\n\nexport class PreInitStoreService {\n  public prePositionedStoreSet: Pick<StoreSet, 'usePluginStore'>;\n  private context: PreInitStoreContext;\n\n  constructor(context: PreInitStoreContext) {\n    this.context = context;\n\n    const usePluginStore = createPluginStore(this.context.mark);\n    this.prePositionedStoreSet = {\n      usePluginStore,\n    };\n  }\n\n  /**\n   * Clear Store Set\n   */\n  public clearStoreSet() {\n    if (!this.prePositionedStoreSet) {\n      return;\n    }\n\n    const { usePluginStore, ...prePositionedRest } = this.prePositionedStoreSet;\n\n    exhaustiveCheckForRecord(prePositionedRest);\n    usePluginStore.getState().clearPluginStore();\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * A suggestion to store all messages (type: follow_up)\n */\nimport { createWithEqualityFn } from 'zustand/traditional';\nimport { devtools } from 'zustand/middleware';\nimport { produce } from 'immer';\n\nexport interface SuggestionBatch {\n  isError?: boolean;\n  suggestions: string[];\n}\ninterface SuggestionsState {\n  suggestionBatchMap: Record<string, SuggestionBatch>;\n}\n\nexport interface IdAndSuggestion {\n  replyId: string;\n  suggestion: string;\n}\n\ninterface SuggestionsAction {\n  updateSuggestion: (replyId: string, suggestion: string) => void;\n  updateSuggestionsBatch: (batch: IdAndSuggestion[]) => void;\n  setGenerateSuggestionError: (replyId: string) => void;\n  clearSuggestions: () => void;\n  getSuggestions: (replyId?: string) => SuggestionBatch | undefined;\n}\n\nexport const createSuggestionsStore = (mark: string) =>\n  createWithEqualityFn<SuggestionsState & SuggestionsAction>()(\n    devtools(\n      (set, get) => ({\n        suggestionBatchMap: {},\n        setGenerateSuggestionError: replyId => {\n          set(\n            produce<SuggestionsState>(state => {\n              const target = state.suggestionBatchMap[replyId];\n              if (!target) {\n                state.suggestionBatchMap[replyId] = {\n                  isError: true,\n                  suggestions: [],\n                };\n                return;\n              }\n              target.isError = true;\n            }),\n            false,\n            'setGenerateSuggestionError',\n          );\n        },\n        updateSuggestion: (replyId, suggestion) => {\n          set(\n            produce<SuggestionsState>(state => {\n              updateSuggestionMutator(replyId, suggestion, state);\n            }),\n            false,\n            'updateSuggestion',\n          );\n        },\n        updateSuggestionsBatch: batch => {\n          set(\n            produce<SuggestionsState>(state => {\n              for (const item of batch) {\n                const { replyId, suggestion } = item;\n                updateSuggestionMutator(replyId, suggestion, state);\n              }\n            }),\n            false,\n            'updateSuggestionBatch',\n          );\n        },\n        getSuggestions: replyId => {\n          if (!replyId) {\n            return;\n          }\n          const sugs = get().suggestionBatchMap[replyId];\n          return sugs;\n        },\n        clearSuggestions: () => {\n          set({ suggestionBatchMap: {} }, false, 'clearSuggestions');\n        },\n      }),\n      {\n        name: `botStudio.ChatAreaSuggestions.${mark}`,\n        enabled: IS_DEV_MODE,\n      },\n    ),\n  );\n\nconst updateSuggestionMutator = (\n  replyId: string,\n  suggestion: string,\n  state: SuggestionsState,\n) => {\n  const { suggestionBatchMap } = state;\n  const batchItem = suggestionBatchMap[replyId] ?? { suggestions: [] };\n  suggestionBatchMap[replyId] = batchItem;\n  if (batchItem.suggestions.includes(suggestion)) {\n    return;\n  }\n  batchItem.suggestions.push(suggestion);\n};\n\nexport type SuggestionsStore = ReturnType<typeof createSuggestionsStore>;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools, subscribeWithSelector } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { isEqual, merge } from 'lodash-es';\nimport { produce } from 'immer';\n\nimport {\n  type SenderInfo,\n  type SenderInfoMap,\n  type UserInfoMap,\n  type UserSenderInfo,\n} from './types';\n\ninterface SenderInfoState {\n  botInfoMap: SenderInfoMap;\n  userInfoMap: UserInfoMap;\n  userInfo: UserSenderInfo | null;\n  /**\n   * Currently only cozing homes are in use\n   */\n  waitingSenderId: string | null;\n}\n\nexport type WaitingSenderId = string | null;\n\nexport type BotInfoUpdate = (\n  updater: (currentBotInfoMap: SenderInfoMap) => SenderInfoMap,\n) => void;\n\nexport type UpdateBotInfoByImmer = (\n  updater: (botInfo: SenderInfoMap) => void,\n) => void;\n\ninterface SenderInfoAction {\n  updateBotInfo: BotInfoUpdate;\n  setBotInfoMap: (botInfoMap: SenderInfoMap) => void;\n  setSenderInfoBatch: (botInfoList: SenderInfo[]) => void;\n  updateBotInfoByImmer: UpdateBotInfoByImmer;\n  updateUserInfo: (senderInfo: UserSenderInfo | null) => void;\n  updateWaitingSenderId: (id: WaitingSenderId) => void;\n  getMessageUserInfo: (userId?: string) => UserSenderInfo | null;\n  setUserInfoMap: (userInfoMap: UserInfoMap) => void;\n  /**\n   * Get image information\n   * @param senderId\n   * @Param role Please do not use this parameter, it will be offline in the near future\n   * @returns AvatarInfo | undefined\n   */\n  getBotInfo: (senderId?: string) => SenderInfo | undefined;\n  clearSenderInfoStore: () => void;\n}\n\nconst getDefaultState = (): SenderInfoState => ({\n  botInfoMap: {},\n  userInfoMap: {},\n  userInfo: null,\n  waitingSenderId: null,\n});\n\nexport const createSenderInfoStore = (mark: string) => {\n  const useSenderInfoStore = create<SenderInfoState & SenderInfoAction>()(\n    devtools(\n      subscribeWithSelector((set, get) => ({\n        ...getDefaultState(),\n        updateWaitingSenderId: id =>\n          set({ waitingSenderId: id }, false, 'updateWaitingSenderId'),\n        updateBotInfo: updater => {\n          set(\n            {\n              botInfoMap: updater(get().botInfoMap),\n            },\n            false,\n            'botInfoMap',\n          );\n        },\n        setSenderInfoBatch: infoList => {\n          const changedBotInfoMap: SenderInfoMap = {};\n          const { botInfoMap } = get();\n          for (const newItem of infoList) {\n            const { id } = newItem;\n            const curItem = botInfoMap[id];\n            if (!isEqual(curItem, newItem)) {\n              changedBotInfoMap[id] = newItem;\n            }\n          }\n          if (!Object.keys(changedBotInfoMap).length) {\n            return;\n          }\n          set(\n            produce<SenderInfoState>(state => {\n              merge(state.botInfoMap, changedBotInfoMap);\n            }),\n            false,\n            'setSenderInfoBatch',\n          );\n        },\n        updateBotInfoByImmer: updater => {\n          set(\n            produce<SenderInfoState>(state => updater(state.botInfoMap)),\n            false,\n            'updateBotInfoByImmer',\n          );\n        },\n        setUserInfoMap: userInfoMap => {\n          set({ userInfoMap }, false, 'setUserInfoMap');\n        },\n        setBotInfoMap: botInfoMap => {\n          set({ botInfoMap }, false, 'setBotInfo');\n        },\n        updateUserInfo: senderInfo => {\n          set(\n            {\n              userInfo: senderInfo,\n            },\n            false,\n            'updateUserInfo',\n          );\n        },\n        /**\n         * @param userId => message.sender_id\n         */\n        getMessageUserInfo: userId => {\n          const { userInfoMap, userInfo } = get();\n\n          if (!userId) {\n            return userInfo;\n          }\n\n          return userInfoMap[userId] || userInfo || null;\n        },\n        getBotInfo: senderId => {\n          const { botInfoMap } = get();\n          if (!senderId) {\n            return;\n          }\n\n          const botInfo = botInfoMap[senderId];\n\n          return botInfo;\n        },\n        clearSenderInfoStore: () => {\n          set(getDefaultState(), false, 'clearSenderInfoStore');\n        },\n      })),\n      {\n        name: `botStudio.ChatAreaSenderInfoStore.${mark}`,\n        enabled: IS_DEV_MODE,\n      },\n    ),\n  );\n  return useSenderInfoStore;\n};\n\nexport type SenderInfoStore = ReturnType<typeof createSenderInfoStore>;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools, subscribeWithSelector } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { produce } from 'immer';\n\nimport { flatMessageGroupIdList } from '../utils/message-group/flat-message-group-list';\nimport { type SystemLifeCycleService } from '../plugin/life-cycle';\nimport { type ChatAreaEventCallback } from '../context/chat-area-context/chat-area-callback';\nimport { type MessagesStore } from './messages';\n\nexport type SelectionStoreStateAction = SelectionState & SelectionAction;\n\ninterface SelectionState {\n  selectedReplyIdList: string[];\n  selectedOnboardingId: string | null;\n  /**\n   * Considering that currently only the option depends on onboardingId, it is put in.\n   */\n  onboardingIdList: string[];\n}\n\ninterface SelectionAction {\n  addReplyId: (replyId: string) => void;\n  removeReplyId: (replyId: string) => void;\n  clearSelectedReplyIdList: () => void;\n  updateReplyIdList: (replyIdList: string[]) => void;\n  setOnboardingSelected: (id: string | null) => void;\n  addOnboardingId: (id: string) => void;\n  removeOnboardingId: (id: string) => void;\n}\n\nexport const createSelectionStore = (mark: string) => {\n  const useSelectionStore = create<SelectionState & SelectionAction>()(\n    devtools(\n      subscribeWithSelector(set => ({\n        selectedReplyIdList: [],\n        selectedOnboardingId: null,\n        onboardingIdList: [],\n        addReplyId: replyId => {\n          set(\n            produce<SelectionState>(state => {\n              state.selectedReplyIdList.push(replyId);\n            }),\n            false,\n            'addReplyId',\n          );\n        },\n        removeReplyId: replyId => {\n          set(\n            produce<SelectionState>(state => {\n              state.selectedReplyIdList = state.selectedReplyIdList.filter(\n                id => id !== replyId,\n              );\n            }),\n            false,\n            'removeReplyId',\n          );\n        },\n        updateReplyIdList: replyIdList => {\n          set(\n            {\n              selectedReplyIdList: replyIdList,\n            },\n            false,\n            'updateReplyIdList',\n          );\n        },\n        clearSelectedReplyIdList: () => {\n          set(\n            {\n              selectedReplyIdList: [],\n            },\n            false,\n            'clearSelectedReplyIdList',\n          );\n        },\n        setOnboardingSelected: id => {\n          set(\n            {\n              selectedOnboardingId: id,\n            },\n            false,\n            'setOnboardingSelected',\n          );\n        },\n        addOnboardingId: id => {\n          set(\n            produce<SelectionState>(state => {\n              state.onboardingIdList.push(id);\n            }),\n            false,\n            'addOnboardingId',\n          );\n        },\n        removeOnboardingId: id => {\n          set(\n            produce<SelectionState>(state => {\n              state.onboardingIdList = state.onboardingIdList.filter(\n                _id => _id !== id,\n              );\n            }),\n            false,\n            'removeOnboardingId',\n          );\n        },\n      })),\n      {\n        name: `botStudio.ChatAreaSelectionStore.${mark}`,\n        enabled: IS_DEV_MODE,\n      },\n    ),\n  );\n  return useSelectionStore;\n};\n\nexport type SelectionStore = ReturnType<typeof createSelectionStore>;\n\nexport const subscribeSelectionUpdate = (\n  store: {\n    useMessagesStore: MessagesStore;\n    useSelectionStore: SelectionStore;\n  },\n  eventCallback: ChatAreaEventCallback | null,\n  lifeCycleService: SystemLifeCycleService,\n) => {\n  const { useMessagesStore, useSelectionStore } = store;\n\n  return useSelectionStore.subscribe(\n    state => state.selectedReplyIdList,\n    async replyIdList => {\n      const { messageGroupList, messages } = useMessagesStore.getState();\n\n      const selectableMessageGroupList = messageGroupList.filter(\n        messageGroup => messageGroup.selectable,\n      );\n\n      const selectedMessageGroupList = selectableMessageGroupList.filter(\n        // The message cannot be selected while waiting sending responding, so the groupId must be reply_id\n        messageGroup => replyIdList.includes(messageGroup.groupId),\n      );\n\n      const messageIdList = flatMessageGroupIdList(selectedMessageGroupList);\n\n      const messageList = messages.filter(message =>\n        messageIdList.includes(message.message_id),\n      );\n\n      const ctx = {\n        messageList,\n        replyIdList,\n        checkedLength: replyIdList.length,\n        isAllChecked:\n          selectedMessageGroupList.length > 0 &&\n          selectedMessageGroupList.length === selectableMessageGroupList.length,\n      };\n\n      eventCallback?.onSelectionChange?.(ctx);\n      await lifeCycleService.command.onSelectionChange({\n        ctx,\n      });\n    },\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools, subscribeWithSelector } from 'zustand/middleware';\nimport { create } from 'zustand';\n\ninterface SectionIdState {\n  prevSectionId: string;\n  latestSectionId: string;\n}\n\ninterface SectionIdAction {\n  setLatestSectionId: (id: string) => void;\n  clear: () => void;\n}\n\nexport const createSectionIdStore = (mark: string) =>\n  create<SectionIdState & SectionIdAction>()(\n    devtools(\n      subscribeWithSelector((set, get) => ({\n        latestSectionId: '',\n        prevSectionId: '',\n        setLatestSectionId: id => {\n          const { latestSectionId: prevSectionId } = get();\n          set(\n            { latestSectionId: id, prevSectionId },\n            false,\n            'setLatestSectionId',\n          );\n        },\n        clear: () => set({ latestSectionId: '' }, false, 'clear'),\n      })),\n      {\n        name: `botStudio.ChatAreaSectionId.${mark}`,\n        enabled: IS_DEV_MODE,\n      },\n    ),\n  );\n\nexport type SectionIdStore = ReturnType<typeof createSectionIdStore>;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools, subscribeWithSelector } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { isUndefined, omitBy, remove } from 'lodash-es';\nimport { produce } from 'immer';\n\nimport { type OnboardingSuggestionItem } from './types';\n\nexport type OnboardingStoreStateAction = OnboardingState & OnboardingAction;\n\ninterface OnboardingState {\n  prologue: string;\n  /** This is only for archiving, and the message store controls the upper screen. */\n  suggestions: OnboardingSuggestionItem[];\n  avatar: string;\n  name: string;\n}\n\ninterface OnboardingAction {\n  partialUpdateOnboardingData: (\n    prologue?: string,\n    suggestions?: OnboardingSuggestionItem[],\n  ) => void;\n  // todo remove\n  /**\n   * @Deprecated followed by indexing from senderInfoStore with standard bot id; onboardingStore records opening bot id\n   */\n  recordBotInfo: (params: { name?: string; avatar?: string }) => void;\n  immerUpdateSuggestionById: (id: string, content: string) => void;\n  immerDeleteSuggestionById: (id: string) => void;\n  immerAddSuggestion: (suggestion: OnboardingSuggestionItem) => void;\n  updatePrologue: (prologue: string) => void;\n  setSuggestionList: (suggestionList: OnboardingSuggestionItem[]) => void;\n  clearOnboardingStore: () => void;\n}\n\nexport const createOnboardingStore = (mark: string) =>\n  create<OnboardingState & OnboardingAction>()(\n    devtools(\n      subscribeWithSelector(set => ({\n        prologue: '',\n        suggestions: [],\n        avatar: '',\n        name: '',\n        clearOnboardingStore: () =>\n          set({ prologue: '', suggestions: [] }, false, 'clearOnboardingStore'),\n        /**\n         * It is no longer partial. Zustand will not filter undefined.\n         */\n        partialUpdateOnboardingData: (prologue, suggestions) =>\n          set(\n            omitBy({ prologue, suggestions }, isUndefined),\n            false,\n            'partialUpdateOnboardingData',\n          ),\n        recordBotInfo: params => {\n          const { name, avatar } = params ?? {};\n          set({ name, avatar }, false, 'recordBotInfo');\n        },\n        immerUpdateSuggestionById: (id, content) => {\n          set(\n            produce<OnboardingState>(state => {\n              const targetSuggestionItem = state.suggestions.find(\n                suggestion => suggestion.id === id,\n              );\n              if (targetSuggestionItem) {\n                targetSuggestionItem.content = content;\n              }\n            }),\n            false,\n            'immerUpdateSuggestionById',\n          );\n        },\n        immerDeleteSuggestionById: id => {\n          set(\n            produce<OnboardingState>(state => {\n              remove(state.suggestions, item => item.id === id);\n            }),\n            false,\n            'deleteSuggestionById',\n          );\n        },\n        immerAddSuggestion: suggestion => {\n          set(\n            produce<OnboardingState>(state => {\n              state.suggestions.push(suggestion);\n            }),\n            false,\n            'addSuggestion',\n          );\n        },\n        updatePrologue: prologue => {\n          set({ prologue }, false, 'updatePrologue');\n        },\n        setSuggestionList: list => {\n          set({ suggestions: list }, false, 'setSuggestionList');\n        },\n      })),\n      {\n        name: `botStudio.ChatAreaOnboarding.${mark}`,\n        enabled: IS_DEV_MODE,\n      },\n    ),\n  );\n\nexport type OnboardingStore = ReturnType<typeof createOnboardingStore>;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type MessageGroup } from '../types';\n\n/**\n * You must process showContextDivider before you can call it\n */\nexport const scanAndMarkShowSuggestions = (\n  messageGroupList: MessageGroup[],\n) => {\n  const lastMessageGroup = messageGroupList.at(0);\n  if (!lastMessageGroup) {\n    return;\n  }\n  lastMessageGroup.showSuggestions = !lastMessageGroup.showContextDivider;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type Message, type MessageGroup } from '../types';\nimport { getMessagesByGroup } from '../../utils/message-group/get-message-by-group';\n\n/**\n * !!! mutate\n * @Param group will be changed\n */\nexport const markGroupShowContextDivider = ({\n  group,\n  messages,\n  isShow,\n}: {\n  group: MessageGroup;\n  isShow: boolean;\n  messages: Message[];\n}) => {\n  if (!isShow) {\n    group.showContextDivider = null;\n    return;\n  }\n\n  const groupMessages = getMessagesByGroup(group, messages);\n\n  // security policy\n  if (\n    groupMessages.some(message => Boolean(message.extra_info.new_section_id))\n  ) {\n    group.showContextDivider = 'without-onboarding';\n    return;\n  }\n\n  group.showContextDivider = 'with-onboarding';\n  return;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type Message } from '../types';\nimport { getIsTriggerMessage } from '../../utils/message';\nimport { type MemberSetType } from '../../plugin/types/plugin-class/message-life-cycle';\n\nexport interface GetDefaultDistributeMemberSetTypePrams {\n  message: Message;\n}\n\nexport const getDefaultDistributeMemberSetType: (\n  params: GetDefaultDistributeMemberSetTypePrams,\n) => MemberSetType = ({ message }) => {\n  if (message.role === 'user') {\n    return 'user';\n  }\n\n  if (message.type === 'answer' || getIsTriggerMessage(message)) {\n    return 'llm';\n  } else if (message.type === 'follow_up') {\n    return 'follow_up';\n  } else {\n    return 'function_call';\n  }\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { flatMapByKeyList } from '@coze-common/chat-area-utils';\n\nimport { type MessageGroup, type Message } from '../types';\nimport { checkNoneMessageGroupMemberLeft } from '../../utils/message-group/message-group-exhaustive-check';\nimport { getMessageUniqueKey } from '../../utils/message';\nimport { primitiveExhaustiveCheck } from '../../utils/exhaustive-check';\nimport { type SystemLifeCycleService } from '../../plugin/life-cycle';\nimport { markGroupShowContextDivider } from './mark-group-context-divider';\nimport { getDefaultDistributeMemberSetType } from './get-default-distribute-merber-set-type';\n/**\n * The message_id of the query is the same as the answer reply_id coze home and bot store\n */\nconst getMessageGroupId = (message: Message) => {\n  if (message.role === 'assistant') {\n    return message.reply_id;\n  }\n  return message.message_id || message.extra_info.local_message_id;\n};\n\nconst makeGroup = (groupId: string, sectionId: string): MessageGroup => ({\n  groupId,\n  sectionId,\n  isLatest: false,\n  showContextDivider: null,\n  memberSet: {\n    userMessageId: '',\n    functionCallMessageIdList: [],\n    llmAnswerMessageIdList: [],\n    followUpMessageIdList: [],\n  },\n});\n\nexport const groupMessageList = (\n  messageList: Message[],\n  lifeCycleService: SystemLifeCycleService,\n): MessageGroup[] => {\n  const reversedGroupIdList: string[] = [];\n  const groupMap = new Map<string, MessageGroup>();\n\n  const produceGroup = (groupId: string, sectionId: string) => {\n    const isExistingGroup = reversedGroupIdList.includes(groupId);\n    if (!isExistingGroup) {\n      const group = makeGroup(groupId, sectionId);\n      groupMap.set(groupId, group);\n      reversedGroupIdList.push(groupId);\n      return group;\n    }\n    const group = groupMap.get(groupId);\n    if (!group) {\n      throw new Error(`fail to get back group of ${groupId}`);\n    }\n    return group;\n  };\n\n  const scanMessageToMakeGroups = (message: Message) => {\n    const groupId = getMessageGroupId(message);\n    const modifiedGroup = produceGroup(groupId, message.section_id);\n    if (!modifiedGroup) {\n      return;\n    }\n\n    const defaultMemberSetType = getDefaultDistributeMemberSetType({ message });\n\n    /**\n     * Lifecycle of a distribution message type\n     */\n    const { memberSetType = defaultMemberSetType } =\n      lifeCycleService.message.onBeforeDistributeMessageIntoMemberSet({\n        ctx: {\n          message,\n          memberSetType: defaultMemberSetType,\n        },\n      });\n\n    if (!memberSetType) {\n      throw new Error('fail to get member set type');\n    }\n\n    switch (memberSetType) {\n      case 'user': {\n        modifiedGroup.memberSet.userMessageId = getMessageUniqueKey(message);\n        break;\n      }\n      case 'llm': {\n        modifiedGroup.memberSet.llmAnswerMessageIdList.push(\n          getMessageUniqueKey(message),\n        );\n        break;\n      }\n      case 'function_call': {\n        modifiedGroup.memberSet.functionCallMessageIdList.push(\n          getMessageUniqueKey(message),\n        );\n        break;\n      }\n      case 'follow_up': {\n        modifiedGroup.memberSet.followUpMessageIdList.push(\n          getMessageUniqueKey(message),\n        );\n        break;\n      }\n      default:\n        primitiveExhaustiveCheck(memberSetType);\n        break;\n    }\n  };\n\n  // Messages are the latest at the beginning, but the aggregation logic is on a first-come, first-served basis, so the aggregation is reversed\n  for (let i = messageList.length - 1; i > -1; i--) {\n    const message = messageList.at(i);\n    if (!message) {\n      throw new Error('fail to iterate scanMessageToMakeGroups');\n    }\n    scanMessageToMakeGroups(message);\n  }\n\n  // BTW reverse is actually a mutated method\n  const groupIdList = reversedGroupIdList.reverse();\n  const messageGroupList = flatMapByKeyList(groupMap, groupIdList);\n  messageGroupList.forEach(reverseMemberSet);\n  scanGroupsToMarkContextDividers(messageGroupList, messageList);\n  markLatestGroup(messageGroupList);\n  return messageGroupList;\n};\n\n// mutate\nconst reverseMemberSet = (group: MessageGroup) => {\n  const {\n    functionCallMessageIdList,\n    llmAnswerMessageIdList,\n    userMessageId,\n    followUpMessageIdList,\n    ...rest\n  } = group.memberSet;\n  checkNoneMessageGroupMemberLeft(rest);\n  functionCallMessageIdList.reverse();\n  llmAnswerMessageIdList.reverse();\n  followUpMessageIdList.reverse();\n};\n\n// new -> old\nconst scanGroupsToMarkContextDividers = (\n  groups: MessageGroup[],\n  messages: Message[],\n) => {\n  for (let i = 0; i < groups.length - 1; i++) {\n    const curGroup = groups.at(i);\n    const prevGroup = groups.at(i + 1);\n    if (!curGroup || !prevGroup) {\n      throw new Error('impossible scanGroupsToMarkContextDividers');\n    }\n    markGroupShowContextDivider({\n      group: prevGroup,\n      isShow: curGroup.sectionId !== prevGroup.sectionId,\n      messages,\n    });\n  }\n};\n\nfunction markLatestGroup(messageGroupList: MessageGroup[]) {\n  const latestGroup = messageGroupList.at(0);\n  if (latestGroup) {\n    latestGroup.isLatest = true;\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type Message, type MessageGroup } from '../types';\nimport { markGroupShowContextDivider } from './mark-group-context-divider';\n\nexport const updateLatestMessageGroupContextDivider = ({\n  messageGroupList,\n  latestSectionId,\n  messageList,\n}: {\n  messageGroupList: MessageGroup[];\n  latestSectionId: string;\n  messageList: Message[];\n}) => {\n  const latestMessageGroup = messageGroupList.at(0);\n  if (!latestMessageGroup) {\n    return;\n  }\n  markGroupShowContextDivider({\n    group: latestMessageGroup,\n    isShow: latestMessageGroup.sectionId !== latestSectionId,\n    messages: messageList,\n  });\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * When adding data, filter out non-duplicate parts\n */\n\nimport { type Message } from '../types';\n\nexport const filterDeduplicateMessage = (\n  all: Message[],\n  added: Message[],\n): Message[] => {\n  const messageIdSet = new Set(\n    all.map(msg => msg.message_id).filter(id => !!id),\n  );\n  const localMessageIdSet = new Set(\n    all.map(msg => msg.extra_info.local_message_id).filter(id => !!id),\n  );\n  return added.filter(\n    msg =>\n      !messageIdSet.has(msg.message_id) &&\n      !localMessageIdSet.has(msg.extra_info.local_message_id),\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { produce } from 'immer';\nimport { safeAsyncThrow } from '@coze-common/chat-area-utils';\n\nimport { type SetStateInternal } from '../helper-type';\nimport { type MessageStoreState, type UpdateMessage } from '../../messages';\nimport {\n  findMessageIndexById,\n  findMessageIndexByIdStruct,\n  getIsValidMessage,\n  serializeIdStruct,\n} from '../../../utils/message';\n\nexport const getUpdateMessage =\n  (set: SetStateInternal<MessageStoreState>): UpdateMessage =>\n  (idOrStruct, newMessage) => {\n    set(\n      produce<MessageStoreState>(state => {\n        const isId = typeof idOrStruct === 'string';\n\n        if (isId) {\n          const isValidMessage = getIsValidMessage(newMessage);\n          if (!isValidMessage) {\n            safeAsyncThrow('message is required when use id to updateMessage');\n            return;\n          }\n          const idx = findMessageIndexById(state.messages, idOrStruct);\n          if (idx < 0) {\n            safeAsyncThrow(`cannot find message with id ${idOrStruct}`);\n            return;\n          }\n          state.messages[idx] = newMessage;\n          return;\n        }\n\n        const idx = findMessageIndexByIdStruct(state.messages, idOrStruct);\n        if (idx < 0) {\n          safeAsyncThrow(\n            `cannot find message with id ${serializeIdStruct(idOrStruct)}`,\n          );\n          return;\n        }\n        if (newMessage) {\n          state.messages[idx] = newMessage;\n        } else if (getIsValidMessage(idOrStruct)) {\n          state.messages[idx] = idOrStruct;\n        } else {\n          safeAsyncThrow('id struct is not valid message');\n        }\n      }),\n      false,\n      'updateMessage',\n    );\n  };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createWithEqualityFn } from 'zustand/traditional';\nimport { devtools, subscribeWithSelector } from 'zustand/middleware';\nimport { produce } from 'immer';\n\nimport { proxyFreeze } from '../utils/proxy-freeze';\nimport {\n  findMessageGroupById,\n  findMessageGroupByUserMessageId,\n} from '../utils/message-group/message-group';\nimport {\n  findMessageById,\n  findMessageByIdStruct,\n  findMessageIndexById,\n  findMessageIndexByIdStruct,\n  getMessageUniqueKey,\n} from '../utils/message';\nimport { type OnBeforeMessageGroupListUpdateContext } from '../plugin/types/plugin-class/message-life-cycle';\nimport { type SystemLifeCycleService } from '../plugin/life-cycle';\nimport { type ChatAreaEventCallback } from '../context/chat-area-context/chat-area-callback';\nimport {\n  type Message,\n  type MessageGroup,\n  type MessageIdStruct,\n  type MessagePagination,\n} from './types';\nimport { type SectionIdStore } from './section-id';\nimport { scanAndMarkShowSuggestions } from './helpers/scan-meta-suggestions';\nimport { groupMessageList } from './helpers/group-message-list';\nimport { updateLatestMessageGroupContextDivider } from './helpers/get-latest-message-group-context-divider';\nimport { filterDeduplicateMessage } from './helpers/add-message-deduplicate';\nimport { getUpdateMessage } from './action-implement/messages/update-message';\nimport { getMessageIndexRange } from './action-implement/messages/get-message-index-range';\n\nexport type MessageStoreStateAction = MessageStoreState & MessageStoreAction;\n\nexport interface MessageStoreState {\n  messages: Message[];\n  /** @Deprecated replaced with messageIndexStore */\n  pagination: MessagePagination;\n  // computed\n  messageGroupList: MessageGroup[];\n}\n\nexport interface UpdateMessage {\n  (id: string | MessageIdStruct, newMessage: Message): void;\n  (message: Message, PLACEHOLDER?: never): void;\n}\n\nexport interface MessageIndexRange {\n  min: string | undefined;\n  max: string | undefined;\n  withNoIndexed: boolean;\n}\n\ninterface MessageStoreAction {\n  findMessage: (idStruct: string | MessageIdStruct) => Message | undefined;\n  hasMessage: (idStruct: string | MessageIdStruct) => boolean;\n  updateMessage: UpdateMessage;\n  /** Note that it is message_index field, not index */\n  getMessageIndexRange: () => MessageIndexRange;\n  /**\n   * Pay attention to the reverse order of the message display.\n   * ! If you use this method to add message records, you need to determine whether you are adding chat history fixHistoryMessageList\n   */\n  addMessages: (\n    messages: Message[],\n    option?: { clearFirst?: boolean; toLatest?: boolean },\n  ) => void;\n  /**\n   * Ditto\n   */\n  addMessage: (message: Message) => void;\n  deleteMessageByIdStruct: (message: MessageIdStruct) => void;\n  deleteMessageById: (id: string) => void;\n\n  deleteMessageByIdList: (idList: string[]) => void;\n  setGroupMessageList: (messageGroupList: MessageGroup[]) => void;\n  updateMessageGroupByImmer: (\n    updater: (messageGroupList: MessageGroup[]) => void,\n  ) => void;\n\n  getMessageGroupById: (groupId: string) => MessageGroup | undefined;\n  getMessageGroupByUserMessageId: (\n    userMessageId: string,\n  ) => MessageGroup | undefined;\n\n  isLastMessageGroup: (groupId: string) => boolean;\n\n  clearMessage: () => void;\n  clearMessageStore: () => void;\n}\n\nconst getDefaultPagination = (): MessageStoreState['pagination'] => ({\n  hasMore: false,\n  cursor: '0',\n});\nconst getDefaultState = (): MessageStoreState => ({\n  messageGroupList: [],\n  messages: [],\n  pagination: getDefaultPagination(),\n});\n\n// eslint-disable-next-line max-lines-per-function -- TODO: Let's see how to take it apart later...\nexport const createMessagesStore = (mark: string) => {\n  const useMessagesStore = createWithEqualityFn<\n    MessageStoreState & MessageStoreAction\n  >()(\n    devtools(\n      // eslint-disable-next-line max-lines-per-function -- can't be dismantled in the store -- nonsense, I dismantled one\n      subscribeWithSelector((set, get) => ({\n        ...getDefaultState(),\n        findMessage: idOrStruct => {\n          const { messages } = get();\n          if (typeof idOrStruct === 'string') {\n            return findMessageById(messages, idOrStruct);\n          }\n          return findMessageByIdStruct(messages, idOrStruct);\n        },\n        hasMessage: idOrStruct => {\n          const { messages } = get();\n          if (typeof idOrStruct === 'string') {\n            return !!findMessageById(messages, idOrStruct);\n          }\n          return !!findMessageByIdStruct(messages, idOrStruct);\n        },\n        updateMessage: getUpdateMessage(set),\n        addMessage: message => {\n          set(\n            produce<MessageStoreState>(state => {\n              if (findMessageByIdStruct(state.messages, message)) {\n                // TODO: throw error attention serialization\n                console.error('unexpected addMessage duplicate');\n                return;\n              }\n              state.messages.unshift(message);\n            }),\n            false,\n            'addMessage',\n          );\n        },\n        addMessages: (\n          addedMessages,\n          { clearFirst = false, toLatest = false } = {},\n        ) => {\n          // Do not use immer here, there will be performance issues according to the current implementation\n          set(\n            state => {\n              if (clearFirst) {\n                return { messages: addedMessages };\n              }\n              const all = state.messages;\n              const deduplicated = filterDeduplicateMessage(all, addedMessages);\n              const messages = toLatest\n                ? deduplicated.concat(all)\n                : all.concat(deduplicated);\n              return { messages };\n            },\n            false,\n            'addMessages',\n          );\n        },\n        deleteMessageByIdStruct: idStruct => {\n          set(\n            produce<MessageStoreState>(state => {\n              const idx = findMessageIndexByIdStruct(state.messages, idStruct);\n              if (idx < 0) {\n                // TODO: throw error attention serialization; supplementary reporting\n                console.error(`cannot find message ${idStruct.message_id}`);\n                return;\n              }\n              state.messages.splice(idx, 1);\n            }),\n            false,\n            'deleteMessageByIdStruct',\n          );\n        },\n        deleteMessageById: id => {\n          set(\n            produce<MessageStoreState>(state => {\n              const idx = findMessageIndexById(state.messages, id);\n              if (idx < 0) {\n                // TODO: Supplementary reporting\n                console.error(`cannot find message ${id}`);\n                return;\n              }\n              state.messages.splice(idx, 1);\n            }),\n            false,\n            'deleteMessageById',\n          );\n        },\n        deleteMessageByIdList: idList => {\n          set(\n            {\n              messages: get().messages.filter(\n                message =>\n                  idList.findIndex(id => id === getMessageUniqueKey(message)) <\n                  0,\n              ),\n            },\n            false,\n            'deleteMessageByIdList',\n          );\n        },\n        setGroupMessageList: messageGroupList => {\n          set({ messageGroupList }, false, 'setGroupMessageList');\n        },\n        updateMessageGroupByImmer: updater => {\n          set(\n            produce<MessageStoreState>(state =>\n              updater(state.messageGroupList),\n            ),\n            false,\n            'updateMessageGroupByImmer',\n          );\n        },\n        getMessageIndexRange: () => getMessageIndexRange(get().messages),\n        getMessageGroupById: groupId =>\n          findMessageGroupById(get().messageGroupList, groupId),\n        getMessageGroupByUserMessageId: userMessageId =>\n          findMessageGroupByUserMessageId(\n            get().messageGroupList,\n            userMessageId,\n          ),\n\n        isLastMessageGroup: groupId => {\n          const { messageGroupList } = get();\n          const latestGroup = messageGroupList.at(0);\n          return latestGroup?.groupId === groupId;\n        },\n        clearMessage: () => {\n          get().clearMessageStore();\n        },\n        clearMessageStore: () => {\n          set(getDefaultState(), false, 'clearAll');\n        },\n      })),\n      {\n        name: `botStudio.ChatAreaMessage.${mark}`,\n        enabled: IS_DEV_MODE,\n      },\n    ),\n  );\n\n  return useMessagesStore;\n};\n\nexport type MessagesStore = ReturnType<typeof createMessagesStore>;\n\nexport const subscribeSectionIdToUpdateMessageGroup = (store: {\n  useSectionIdStore: SectionIdStore;\n  useMessagesStore: MessagesStore;\n}) => {\n  const { useMessagesStore, useSectionIdStore } = store;\n\n  return useSectionIdStore.subscribe(\n    state => state.latestSectionId,\n    latestSectionId => {\n      const { updateMessageGroupByImmer, messages } =\n        useMessagesStore.getState();\n\n      updateMessageGroupByImmer(messageGroupList => {\n        updateLatestMessageGroupContextDivider({\n          messageGroupList,\n          latestSectionId,\n          messageList: messages,\n        });\n\n        // Only after processing the contextDivider can you scan for suggestions\n        scanAndMarkShowSuggestions(messageGroupList);\n      });\n    },\n  );\n};\n\nexport const subscribeMessageToUpdateMessageGroup = (\n  store: {\n    useSectionIdStore: SectionIdStore;\n    useMessagesStore: MessagesStore;\n  },\n  eventCallback: ChatAreaEventCallback | null,\n  lifeCycleService: SystemLifeCycleService,\n) => {\n  const { useMessagesStore, useSectionIdStore } = store;\n\n  return useMessagesStore.subscribe(\n    state => state.messages,\n    messages => {\n      const { latestSectionId } = useSectionIdStore.getState();\n      const messageGroupList = groupMessageList(messages, lifeCycleService);\n\n      updateLatestMessageGroupContextDivider({\n        messageGroupList,\n        latestSectionId,\n        messageList: messages,\n      });\n\n      // Only after processing the contextDivider can you scan for suggestions\n      scanAndMarkShowSuggestions(messageGroupList);\n\n      const modifiedGroup = eventCallback?.onBeforeMessageGroupListUpdate?.(\n        proxyFreeze(messageGroupList),\n        proxyFreeze(messages),\n      );\n\n      const proxyFreezeContext: OnBeforeMessageGroupListUpdateContext =\n        proxyFreeze({\n          messageGroupList: modifiedGroup ?? messageGroupList,\n        });\n\n      const { messageGroupList: finalMessageGroupList } =\n        lifeCycleService.message.onBeforeMessageGroupListUpdate({\n          ctx: proxyFreezeContext,\n        });\n\n      useMessagesStore\n        .getState()\n        .setGroupMessageList(finalMessageGroupList ?? messageGroupList);\n    },\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type MessageMeta } from '../types';\nimport { getIsVisibleMessageMeta as builtinGetIsVisibleMessageMeta } from '../../utils/message';\nimport { type ChatAreaConfigs } from '../../context/chat-area-context/type';\n\nexport interface UpdateSectionContextDividerParam {\n  metaList: MessageMeta[];\n  latestSectionId?: string;\n  configs: ChatAreaConfigs;\n  getIsVisibleMessageMeta?: typeof builtinGetIsVisibleMessageMeta;\n}\n\n/**\n * Scan from back to front\n * Current message is the first answer &\n * The agent split line is only displayed if there is a jumpVerbose message in front of it.\n */\nexport const updateMetaListDivider = (\n  param: UpdateSectionContextDividerParam,\n) => {\n  const { metaList, configs, getIsVisibleMessageMeta } = param;\n  updateDividerByScanList({\n    metaList,\n    configs,\n    getIsVisibleMessageMeta,\n  });\n};\n\nconst updateDividerByScanList = (\n  param: Omit<UpdateSectionContextDividerParam, 'latestSectionId'>,\n) => {\n  const {\n    metaList,\n    configs,\n    getIsVisibleMessageMeta: inputGetIsVisibleMessageMeta,\n  } = param;\n  const getIsVisibleMessage =\n    inputGetIsVisibleMessageMeta ?? builtinGetIsVisibleMessageMeta;\n\n  const visibleMessageMeta = metaList.filter(meta =>\n    getIsVisibleMessage(meta, configs),\n  );\n  if (visibleMessageMeta.length <= 1) {\n    return;\n  }\n\n  // messageList order is up-to-date presence preceding\n  // There is reverse to be paid attention to when rendering.\n  for (let i = visibleMessageMeta.length - 1; i > 0; i--) {\n    const next = visibleMessageMeta[i - 1];\n    const current = visibleMessageMeta[i];\n\n    if (!(current && next)) {\n      return;\n    }\n\n    // The current message is the first answer & there is a jumpVerbose message in front of it to show the agent split line\n    if (next.beforeHasJumpVerbose && next.isGroupFirstAnswer) {\n      next.showMultiAgentDivider = true;\n    }\n  }\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { safeAsyncThrow } from '@coze-common/chat-area-utils';\n\nimport type { MessageGroup, MessageGroupMember, MessageMeta } from '../types';\nimport { flatMessageGroupIdList } from '../../utils/message-group/flat-message-group-list';\nimport { checkMessageHasUniqId } from '../../utils/message';\n\n/**\n * Use to update meta.isLatestGroupAnswer\n */\nexport const mutateUpdateMetaByGroupInfo = (\n  metaList: MessageMeta[],\n  groupList: MessageGroup[],\n): void => {\n  mutateMetaIsLatestGroupAnswer(metaList, groupList);\n  mutateMetaIsLastAnswerInItsGroup(metaList, groupList);\n  mutateMetaIsLastAnswerMessage(metaList, groupList);\n};\n\nconst mutateMetaIsLatestGroupAnswer = (\n  metaList: MessageMeta[],\n  groupList: MessageGroup[],\n) => {\n  const lastGroup = groupList.at(0);\n  if (!lastGroup) {\n    return;\n  }\n\n  const lastGroupMessageIdList = flatMessageGroupIdList([lastGroup]);\n  const targetMetas = metaList.filter(meta =>\n    lastGroupMessageIdList.some(id => checkMessageHasUniqId(meta, id)),\n  );\n  targetMetas.forEach(meta => (meta.isFromLatestGroup = true));\n};\n\nconst mutateMetaIsLastAnswerInItsGroup = (\n  metaList: MessageMeta[],\n  groupList: MessageGroup[],\n) => {\n  groupList.forEach(({ memberSet }) => {\n    const lastAnswerId = getLastMessageId(memberSet);\n    if (!lastAnswerId) {\n      return;\n    }\n    const meta = metaList.find(it => checkMessageHasUniqId(it, lastAnswerId));\n    if (!meta) {\n      safeAsyncThrow(`cannot find meta by group answer id ${lastAnswerId}`);\n      return;\n    }\n    meta.isGroupLastMessage = true;\n  });\n};\n\nconst mutateMetaIsLastAnswerMessage = (\n  metaList: MessageMeta[],\n  groupList: MessageGroup[],\n) => {\n  groupList.forEach(({ memberSet }) => {\n    const lastAnswerId = memberSet.llmAnswerMessageIdList.at(0);\n    if (!lastAnswerId) {\n      return;\n    }\n    const meta = metaList.find(it => checkMessageHasUniqId(it, lastAnswerId));\n    if (!meta) {\n      safeAsyncThrow(`cannot find meta by group answer id ${lastAnswerId}`);\n      return;\n    }\n    meta.isGroupLastAnswerMessage = true;\n  });\n};\n\nconst getLastMessageId = ({\n  llmAnswerMessageIdList,\n  functionCallMessageIdList,\n  userMessageId,\n}: MessageGroupMember) => {\n  const answerId = llmAnswerMessageIdList.at(0);\n  if (answerId) {\n    return answerId;\n  }\n  const functionCallId = functionCallMessageIdList.at(0);\n  if (functionCallId) {\n    return functionCallId;\n  }\n  return userMessageId;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type MessageMeta } from '../types';\nimport {\n  getIsAsyncResultMessage,\n  getIsTriggerMessage,\n  getIsVisibleMessageMeta,\n} from '../../utils/message';\nimport { type ChatAreaConfigs } from '../../context/chat-area-context/type';\n\n/**\n * Scanning the meta from front to back, the actual effect is from bottom to top (shown in reverse order);\n * If the current bar has the same role as the previous bar, the current bar hides the avatar\n */\nexport const scanAndUpdateHideAvatar = (\n  metaList: MessageMeta[],\n  configs: Partial<ChatAreaConfigs>,\n) => {\n  const visibleMessageMeta = metaList.filter(meta =>\n    getIsVisibleMessageMeta(meta, configs),\n  );\n  if (visibleMessageMeta.length <= 1) {\n    return;\n  }\n\n  if (configs.groupUserMessage) {\n    scanAndUpdateHideAvatarForOther(visibleMessageMeta);\n  } else {\n    scanAndUpdateHideAvatarForDebug(visibleMessageMeta);\n  }\n};\n\nexport const scanAndUpdateHideAvatarForOther = (metaList: MessageMeta[]) => {\n  for (let i = 0; i < metaList.length - 1; i++) {\n    const later = metaList[i];\n    const earlier = metaList[i + 1];\n    if (!later || !earlier) {\n      continue;\n    }\n\n    if (later.role !== earlier.role) {\n      continue;\n    }\n\n    if (later.role !== 'assistant') {\n      continue;\n    }\n\n    if (later.sectionId !== earlier.sectionId) {\n      continue;\n    }\n\n    // The pushed task messages are grouped separately and the avatar is displayed.\n    if (getIsTriggerMessage(later)) {\n      continue;\n    }\n\n    if (getIsAsyncResultMessage(later)) {\n      continue;\n    }\n    later.hideAvatar = true;\n  }\n};\n\nexport const scanAndUpdateHideAvatarForDebug = (metaList: MessageMeta[]) => {\n  for (let i = 0; i < metaList.length - 1; i++) {\n    const later = metaList[i];\n    const earlier = metaList[i + 1];\n    if (!later || !earlier) {\n      continue;\n    }\n\n    if (later.role !== earlier.role) {\n      continue;\n    }\n\n    if (later.role === 'user') {\n      continue;\n    }\n\n    if (later.role !== 'assistant') {\n      continue;\n    }\n\n    if (later.replyId !== earlier.replyId) {\n      continue;\n    }\n\n    later.hideAvatar = true;\n  }\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { sliceArrayByIndexRange } from '../array';\nimport { type Message } from '../../store/types';\n\nconst searchSide = 15;\n\nexport const getIsFunctionCalling = (\n  index: number,\n  messageList: Message[],\n): boolean => {\n  const message = messageList[index];\n  if (!message) {\n    throw new Error(`cannot find message of index: ${index}`);\n  }\n  if (message._fromHistory) {\n    return false;\n  }\n  if (message.type !== 'function_call') {\n    return false;\n  }\n  const functionCallFinished = getIsFinishedFunctionCallCached(\n    message,\n    index,\n    messageList,\n  );\n  return !functionCallFinished;\n};\n\n/**\n * - message id is uuid\n * - Once in the finished function call state, it is impossible to move out\n * - No need to clean up\n */\nconst finishedFunctionCallMessageMap = new Map<\n  string,\n  {\n    isFinish: boolean;\n    isStreamPlugin: boolean;\n    streamPlugin: { streamUuid: string } | null;\n  }\n>();\n\nconst getIsFinishedFunctionCallCached = (\n  message: Message,\n  index: number,\n  messageList: Message[],\n): boolean => {\n  const { message_id } = message;\n  if (finishedFunctionCallMessageMap.get(message_id)?.isFinish) {\n    return true;\n  }\n  updateFinishFunctionCallMessageMap(message, index, messageList);\n\n  return !!finishedFunctionCallMessageMap.get(message_id)?.isFinish;\n};\n\n/** @deprecated only via cached access */\nconst updateFinishFunctionCallMessageMap = (\n  message: Message,\n  index: number,\n  messageList: Message[],\n) => {\n  const functionCallIndex = message.index;\n  if (typeof functionCallIndex !== 'number') {\n    console.error('function call message without index', message);\n    return;\n  }\n  const targetIndex = functionCallIndex + 1;\n  const searchItems = sliceArrayByIndexRange(messageList, index, searchSide);\n  searchItems.find(item => {\n    const isTargetResponse =\n      item.reply_id === message.reply_id &&\n      (item.extra_info?.call_id === message.extra_info?.call_id ||\n        item.index === targetIndex) &&\n      item.type === 'tool_response';\n    // TODO: Temporarily display loading according to ordinary plugins.\n    if (isTargetResponse) {\n      finishedFunctionCallMessageMap.set(message.message_id, {\n        isFinish: true,\n        isStreamPlugin: false,\n        streamPlugin: null,\n      });\n    }\n  });\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type MessageExtraInfoBotState } from '../types';\nimport { safeJSONParse } from '../../utils/safe-json-parse';\n\n// The members in botState are all optional, and the shape is guaranteed to be {}\nconst isBotState = (value: unknown): value is MessageExtraInfoBotState =>\n  typeof value === 'object' && value !== null;\n\n// Todo should note the difference between this method and the getMessageBotStateFromStringifyObject under stores/socket\nexport const getBotState = (\n  stringifyBotState?: string,\n): MessageExtraInfoBotState => {\n  const result = safeJSONParse(stringifyBotState);\n  if (isBotState(result)) {\n    return result;\n  }\n  return {};\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type Message, type MessageMeta } from '../types';\nimport { getVerboseContentObj } from '../../utils/verbose';\nimport { getIsCardDisabled } from '../../utils/message';\nimport { getIsFunctionCalling } from '../../utils/fucntion-call/get-is-function-calling';\nimport { getBotState } from './get-bot-state';\n\nexport const getInitMetaByMessage = ({\n  index,\n  messages,\n}: {\n  index: number;\n  messages: Message[];\n}): MessageMeta => {\n  const msg = messages[index];\n  if (!msg) {\n    throw new Error(`get message exception: invalid index: ${index}`);\n  }\n  // TODO: You can leave an adapter opening here\n  return {\n    _fromHistory: msg._fromHistory,\n    showActions: false,\n    showMultiAgentDivider: false,\n    isReceiving: msg.role === 'assistant' && !msg.is_finish,\n    isSending: msg.role === 'user' && !msg.is_finish,\n    isFunctionCalling: getIsFunctionCalling(index, messages),\n    isFail: !!msg._sendFailed,\n    message_id: msg.message_id,\n    role: msg.role,\n    type: msg.type,\n    isFromLatestGroup: false,\n    isGroupLastMessage: false,\n    isGroupLastAnswerMessage: false,\n    sectionId: msg.section_id,\n    hideAvatar: false,\n    botState: getBotState(msg.extra_info.bot_state),\n    replyId: msg.reply_id,\n    isGroupFirstAnswer: false,\n    beforeHasJumpVerbose: false,\n    verboseMsgType: getVerboseContentObj(msg.content)?.msg_type || '',\n    extra_info: {\n      local_message_id: msg.extra_info.local_message_id,\n    },\n    source: msg.source,\n    cardDisabled: getIsCardDisabled(index, messages),\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { VerboseMsgType } from '@coze-common/chat-core';\n\nimport { type MessageMeta } from '../types';\n\n/**\n *\n * @param metaList\n */\nexport const addJumpVerboseInfo = (metaList: MessageMeta[]) => {\n  // Scan from back to front, encounter jumpVerbose message, set the same reply_id answer message for hasJumpVerbose to true\n  let lastJumpVerboseMeta = null;\n  for (let i = metaList.length - 1; i >= 0; i--) {\n    const current = metaList[i];\n    if (!current) {\n      continue;\n    }\n    if (current.verboseMsgType === VerboseMsgType.JUMP_TO) {\n      lastJumpVerboseMeta = current;\n      continue;\n    }\n\n    const isSameGroup =\n      lastJumpVerboseMeta && current.replyId === lastJumpVerboseMeta.replyId;\n    const isAnswer = current.type === 'answer';\n\n    if (isSameGroup && isAnswer) {\n      current.beforeHasJumpVerbose = true;\n    }\n  }\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type MessageMeta } from '../types';\n\nexport const addAnswerLocation = (metaList: MessageMeta[]) => {\n  const answerMessageMeta = metaList.filter(meta => meta.type === 'answer');\n  // Scan from backwards to forwards, encounter the first different reply_id, restart setting isFirstAnswer\n  let lastAnswerMeta = null;\n  for (let i = answerMessageMeta.length - 1; i >= 0; i--) {\n    const current = answerMessageMeta[i];\n    if (!current) {\n      continue;\n    }\n    if (!lastAnswerMeta) {\n      current.isGroupFirstAnswer = true;\n      lastAnswerMeta = current;\n      continue;\n    }\n\n    if (current.replyId !== lastAnswerMeta.replyId) {\n      current.isGroupFirstAnswer = true;\n      lastAnswerMeta = current;\n    }\n  }\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createWithEqualityFn } from 'zustand/traditional';\nimport { devtools, subscribeWithSelector } from 'zustand/middleware';\nimport { produce } from 'immer';\n\nimport { findMessageById } from '../utils/message';\nimport { type ChatAreaConfigs } from '../context/chat-area-context/type';\nimport { type MessageMeta } from './types';\nimport { type SectionIdStore } from './section-id';\nimport { type MessagesStore } from './messages';\nimport { updateMetaListDivider } from './helpers/split-section';\nimport { mutateUpdateMetaByGroupInfo } from './helpers/mutate-meta-by-groups';\nimport { scanAndUpdateHideAvatar } from './helpers/hide-avatar';\nimport { getInitMetaByMessage } from './helpers/get-meta-by-message';\nimport { addJumpVerboseInfo } from './helpers/add-verbose-info';\nimport { addAnswerLocation } from './helpers/add-answer-location';\n\nexport type MessageMetaStoreStateAction = MessageMetaState & MessageMetaAction;\n\nexport interface MessageMetaState {\n  metaList: MessageMeta[];\n}\n\nexport interface MessageMetaAction {\n  getMetaByMessage: (id: string) => MessageMeta;\n  updateMeta: (metaList: MessageMeta[]) => void;\n  updateMetaByImmer: (updater: (metaList: MessageMeta[]) => void) => void;\n  clear: () => void;\n}\n\nexport const createMessageMetaStore = (mark: string) => {\n  const useMessageMetaStore = createWithEqualityFn<\n    MessageMetaState & MessageMetaAction\n  >()(\n    devtools(\n      subscribeWithSelector((set, get) => ({\n        metaList: [],\n        getMetaByMessage: id => {\n          const meta = findMessageById(get().metaList, id);\n          if (!meta) {\n            throw new Error(`fail to find meta of ${id}`);\n          }\n          return meta;\n        },\n        updateMeta: metaList => {\n          set(\n            {\n              metaList,\n            },\n            false,\n            'updateMeta',\n          );\n        },\n        updateMetaByImmer: updater => {\n          set(\n            produce<MessageMetaState>(state => updater(state.metaList)),\n            false,\n            'updateMetaByImmer',\n          );\n        },\n        clear: () => {\n          set({ metaList: [] }, false, 'clear');\n        },\n      })),\n      {\n        name: `botStudio.ChatAreaMessageMeta.${mark}`,\n        enabled: IS_DEV_MODE,\n      },\n    ),\n  );\n\n  return useMessageMetaStore;\n};\n\nexport type MessageMetaStore = ReturnType<typeof createMessageMetaStore>;\n\n/**\n * Automatically regenerate meta lists based on messages changes;\n * This layer is not optimized, and in-depth comparison is carried out when consuming meta in the component;\n * We will see if further optimization is required in the future.\n * There are subtle differences in how the upper and lower subscriptions handle data, mutable vs immutable, I hope you notice\n */\nexport const subscribeMessageToUpdateMeta = (\n  store: {\n    useMessagesStore: MessagesStore;\n    useMessageMetaStore: MessageMetaStore;\n    useSectionIdStore: SectionIdStore;\n  },\n  configs: ChatAreaConfigs,\n) => {\n  const { useMessagesStore, useMessageMetaStore, useSectionIdStore } = store;\n  return useMessagesStore.subscribe(\n    state => state.messageGroupList,\n    // Subscribe to groups here, and then get messages non-responsively to reduce the update frequency\n    // At present, the updates of groups are fully synchronized with messages, and there are no on-demand updates. If you change to on-demand updates (as if it were best), there is no guarantee that the synchronization will trigger.\n    groups => {\n      const { messages } = useMessagesStore.getState();\n      const metaList = messages.map((_, index) => {\n        const initMeta = getInitMetaByMessage({\n          index,\n          messages,\n        });\n        return initMeta;\n      });\n      // all mutate!!\n      mutateUpdateMetaByGroupInfo(metaList, groups);\n\n      addAnswerLocation(metaList);\n\n      addJumpVerboseInfo(metaList);\n\n      /**\n       * TODO\n       * Methods to update contextDivider require slots, including methods updated through global SectionID\n       * Add config to configure whether to display the context-divider. If you close the context-divider display, you will not run the calculation here.\n       */\n      updateMetaListDivider({\n        metaList,\n        configs,\n        latestSectionId: useSectionIdStore.getState().latestSectionId,\n      });\n\n      // Handling avatar display logic\n      scanAndUpdateHideAvatar(metaList, configs);\n\n      /**\n       * TODO:\n       * agentDivider method to be implemented\n       * Need to leave a slot\n       * Add config to configure whether to display the agent-divider, turn off the agent-divider display and do not run the calculation here\n       */\n\n      useMessageMetaStore.getState().updateMeta(metaList);\n    },\n  );\n};\n\n/**\n * If the frequency is low, it will be updated.\n * There are subtle differences in how the upper and lower subscriptions handle data, mutable vs immutable, I hope you notice\n */\nexport const subscribeSectionIdToUpdateMeta = (\n  store: {\n    useSectionIdStore: SectionIdStore;\n    useMessageMetaStore: MessageMetaStore;\n  },\n  configs: ChatAreaConfigs,\n) => {\n  const { useMessageMetaStore, useSectionIdStore } = store;\n  return useSectionIdStore.subscribe(\n    state => state.latestSectionId,\n    latestSectionId => {\n      /**\n       * TODO\n       * Ditto, you need to leave a slot, and decide whether to calculate according to the config.\n       * There is no global concept in agentID business, let's talk about it once we have it\n       */\n      const { updateMetaByImmer } = useMessageMetaStore.getState();\n      updateMetaByImmer(metaList => {\n        // Handling avatar display logic\n        scanAndUpdateHideAvatar(metaList, configs);\n      });\n    },\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { produce } from 'immer';\nimport { compareInt64 } from '@coze-common/chat-area-utils';\n\nimport { type Message } from './types';\nimport { type MessagesStore } from './messages';\nimport { getMessageIndexRange } from './action-implement/messages/get-message-index-range';\n\nexport interface MessageIndexState {\n  // Ignore the pull chat history and message notification (for the home bot to continue the chat scene)\n  ignoreIndexAndHistoryMessages: boolean;\n  endIndex: string;\n  readIndex: string;\n  /** computed by MessagesStore */\n  maxLoadIndex: string;\n\n  prevHasMore: boolean;\n  nextHasMore: boolean;\n  cursor: string;\n  nextCursor: string;\n\n  scrollViewFarFromBottom: boolean;\n\n  /**\n   * 1. Preemptive loading process, the value is timestamp\n   * 2. Verify asynchronous callbacks\n   */\n  loadLock: Record<LoadAction, number | null>;\n  loadError: LoadAction[];\n}\n\nexport type LoadAction =\n  | 'load-next'\n  | 'load-prev'\n  | 'load-eagerly'\n  | 'load-silently';\n\ninterface Indexes {\n  endIndex?: string;\n  readIndex?: string;\n}\n\nexport type UpdateMessageIndex = (opt: Indexes) => void;\ninterface UpdateCursorParam {\n  cursor?: string;\n  nextCursor?: string;\n}\ninterface UpdateHasMoreParam {\n  prevHasMore?: boolean;\n  nextHasMore?: boolean;\n}\n\nexport interface MessageIndexAction {\n  updateIgnoreIndexAndHistoryMessages: (\n    ignoreIndexAndHistoryMessages: boolean,\n  ) => void;\n  /**\n   * Take only larger values\n   */\n  updateIndex: UpdateMessageIndex;\n  /** For use in subscribed messages only */\n  privateUpdateLoadIndexRange: (max: string) => void;\n  updateHasMore: (opt: UpdateHasMoreParam) => void;\n  updateCursor: (opt: UpdateCursorParam) => void;\n  resetCursors: () => void;\n  resetHasMore: () => void;\n  updateLockAndErrorByImmer: (\n    updater: (state: MessageIndexState) => void,\n  ) => void;\n  setScrollViewFarFromBottom: (farAwayEnough: boolean) => void;\n  resetLoadLockAndError: () => void;\n  alignMessageIndexes: () => void;\n  clearAll: () => void;\n}\n\nconst getDefaultState = (): MessageIndexState => ({\n  ignoreIndexAndHistoryMessages: false,\n  endIndex: '0',\n  readIndex: '0',\n  maxLoadIndex: '0',\n  prevHasMore: false,\n  nextHasMore: false,\n  cursor: '0',\n  nextCursor: '0',\n  scrollViewFarFromBottom: false,\n  loadLock: {\n    'load-eagerly': null,\n    'load-next': null,\n    'load-prev': null,\n    'load-silently': null,\n  },\n  loadError: [],\n});\n\n/** Control via service/load-more module */\nexport const createMessageIndexStore = (mark: string) => {\n  const useMessageIndexStore = create<MessageIndexState & MessageIndexAction>()(\n    devtools(\n      (set, get) => ({\n        ...getDefaultState(),\n        updateIgnoreIndexAndHistoryMessages: ignoreIndexAndHistoryMessages =>\n          set(\n            { ignoreIndexAndHistoryMessages },\n            false,\n            'updateIgnoreIndexAndHistoryMessages',\n          ),\n        updateIndex: newVal => {\n          const curVal = get();\n          const finalVal: Indexes = {};\n          if (\n            compareInt64(newVal.endIndex || '0').greaterThan(curVal.endIndex)\n          ) {\n            finalVal.endIndex = newVal.endIndex;\n          }\n          if (\n            compareInt64(newVal.readIndex || '0').greaterThan(curVal.readIndex)\n          ) {\n            finalVal.readIndex = newVal.readIndex;\n          }\n          if (!Object.keys(finalVal).length) {\n            return;\n          }\n          set(finalVal, false, 'updateIndex');\n        },\n        privateUpdateLoadIndexRange: max => {\n          if (!compareInt64(max).greaterThan(get().maxLoadIndex)) {\n            return;\n          }\n          set({ maxLoadIndex: max }, false, 'updateMaxLoadIndex');\n        },\n        updateHasMore: hasMore => set(hasMore, false, 'updateHasMore'),\n        updateCursor: cursors => set(cursors, false, 'updateCursor'),\n        updateLockAndErrorByImmer: updater =>\n          set(produce<MessageIndexState>(updater), false, 'updateLockAndError'),\n        setScrollViewFarFromBottom: farAwayEnough => {\n          if (get().scrollViewFarFromBottom === farAwayEnough) {\n            return;\n          }\n          set(\n            { scrollViewFarFromBottom: farAwayEnough },\n            false,\n            'setScrollViewFarFromBottom',\n          );\n        },\n        resetLoadLockAndError: () => {\n          set(\n            { loadLock: getDefaultState().loadLock, loadError: [] },\n            false,\n            'resetLoadLockAndError',\n          );\n        },\n        resetCursors: () => {\n          const state = getDefaultState();\n          const cursors: Required<UpdateCursorParam> = {\n            cursor: state.cursor,\n            nextCursor: state.nextCursor,\n          };\n          set(cursors, false, 'resetCursor');\n        },\n        resetHasMore: () => {\n          const state = getDefaultState();\n          const hasMoreParam: Required<UpdateHasMoreParam> = {\n            nextHasMore: state.nextHasMore,\n            prevHasMore: state.prevHasMore,\n          };\n          set(hasMoreParam, false, 'resetHasMore');\n        },\n        alignMessageIndexes: () => {\n          const { readIndex, endIndex } = get();\n          if (readIndex === endIndex) {\n            return;\n          }\n          let max = '';\n          if (compareInt64(readIndex).greaterThan(endIndex)) {\n            max = readIndex;\n          } else {\n            max = endIndex;\n          }\n          set({ readIndex: max, endIndex: max }, false, 'alignIndexes');\n        },\n        clearAll: () => {\n          set(getDefaultState(), false, 'clearAll');\n        },\n      }),\n      {\n        name: `botStudio.ChatAreaMessageIndex.${mark}`,\n        enabled: IS_DEV_MODE,\n      },\n    ),\n  );\n\n  return useMessageIndexStore;\n};\n\nexport type MessageIndexStore = ReturnType<typeof createMessageIndexStore>;\n\nexport const subscribeMessageToUpdateMessageLoadIndex = (store: {\n  useMessagesStore: MessagesStore;\n  useMessageIndexStore: MessageIndexStore;\n}): (() => void) => {\n  const { useMessagesStore, useMessageIndexStore } = store;\n  return useMessagesStore.subscribe(\n    state => state.messages,\n    messages => {\n      updateMaxLoadIndexByMessages(messages, useMessageIndexStore);\n    },\n  );\n};\n\nconst updateMaxLoadIndexByMessages = (\n  messages: Message[],\n  useMessageIndexStore: MessageIndexStore,\n) => {\n  const { max = '0' } = getMessageIndexRange(messages) || {};\n  useMessageIndexStore.getState().privateUpdateLoadIndexRange(max);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools, subscribeWithSelector } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { type ChatCore } from '@coze-common/chat-core';\n\nimport { getFakeChatCore } from '../utils/fake-chat-core';\n\nexport type InitStatus = 'unInit' | 'loading' | 'initSuccess' | 'initFail';\n\nexport interface GlobalInitState {\n  /** responsive */\n  initStatus: InitStatus;\n  chatCore: ChatCore | null;\n  offChatCoreListen: () => void;\n  conversationId: string | null;\n}\n\nexport interface GlobalInitAction {\n  setInitStatus: (status: GlobalInitState['initStatus']) => void;\n  setConversationId: (id: string) => void;\n  setChatCore: (chatCore: ChatCore) => void;\n  setChatCoreOffListen: (offListen: () => void) => void;\n  getChatCore: () => ChatCore;\n  clearSideEffect: () => void;\n}\n\nexport type GlobalInitStateAction = GlobalInitState & GlobalInitAction;\n\nexport const createGlobalInitStore = (mark: string) =>\n  create<GlobalInitState & GlobalInitAction>()(\n    devtools(\n      subscribeWithSelector((set, get) => ({\n        initStatus: 'unInit',\n        chatCore: null,\n        conversationId: null,\n        offChatCoreListen: () => void 0,\n        setInitStatus: status => {\n          set({ initStatus: status }, false, 'setInitStatus');\n        },\n        setConversationId: id => {\n          set({ conversationId: id }, false, '');\n        },\n        setChatCore: (chatCore: ChatCore) => {\n          set({ chatCore }, false, 'setChatCore');\n        },\n        setChatCoreOffListen: offListen => {\n          set({ offChatCoreListen: offListen }, false, 'setChatCoreOffListen');\n        },\n        getChatCore: () => {\n          const { chatCore } = get();\n          if (!chatCore) {\n            return getFakeChatCore();\n          }\n          return chatCore;\n        },\n        clearSideEffect: () => {\n          get().offChatCoreListen();\n          get().chatCore?.destroy();\n          set(\n            { initStatus: 'unInit', chatCore: null, conversationId: null },\n            false,\n            'clearInitStore',\n          );\n        },\n      })),\n      {\n        name: `botStudio.ChatAreaInit.${mark}`,\n        enabled: IS_DEV_MODE,\n      },\n    ),\n  );\n\nexport type GlobalInitStore = ReturnType<typeof createGlobalInitStore>;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { produce } from 'immer';\nimport { type SendFileMessagePayload } from '@coze-common/chat-uikit-shared';\n\nexport interface FileState {\n  /**\n   * Temporary storage of files\n   * key: local_message_id\n   */\n  temporaryFile: Record<string, SendFileMessagePayload | null>;\n  previewURL: string;\n  audioFileMap: Record<string, File>;\n  audioProcessMap: Record<string, 'processing'>;\n}\n\nexport interface FileAction {\n  /**\n   * Update temporarily stored files\n   */\n  updateTemporaryFile: (\n    localMessageId: string,\n    payload: SendFileMessagePayload,\n  ) => void;\n  /**\n   * Delete temporarily stored files (via localMessageId)\n   * @param localMessageId\n   * @returns\n   */\n  deleteTemporaryFile: (localMessageId: string) => void;\n  updatePreviewURL: (url: string) => void;\n  addAudioFile: (params: { localMessageId: string; audioFile: File }) => void;\n  getAudioFileByLocalId: (localMessageId: string) => File | undefined;\n  getAudioProcessStateByLocalId: (\n    localMessageId: string,\n  ) => 'processing' | undefined;\n  removeAudioFileByLocalId: (localMessageId: string) => void;\n  updateAudioProcessState: (params: {\n    localMessageId: string;\n    state: 'processing' | 'finish';\n  }) => void;\n  clearAudioStore: () => void;\n  clear: () => void;\n}\n\nconst getDefaultState = (): FileState => ({\n  temporaryFile: {},\n  previewURL: '',\n  audioFileMap: {},\n  audioProcessMap: {},\n});\n\nexport const createFileStore = (mark: string) =>\n  create<FileState & FileAction>()(\n    devtools(\n      (set, get) => ({\n        ...getDefaultState(),\n        addAudioFile: ({ localMessageId, audioFile }) => {\n          set(\n            produce<FileState>(draft => {\n              draft.audioFileMap[localMessageId] = audioFile;\n            }),\n            false,\n            'addAudioFile',\n          );\n        },\n        getAudioFileByLocalId: id => get().audioFileMap[id],\n        getAudioProcessStateByLocalId: id => get().audioProcessMap[id],\n        clearAudioStore: () => {\n          set(getDefaultState(), false, 'clearAudioStore');\n        },\n        updateTemporaryFile: (localMessageId, payload) => {\n          set(\n            produce<FileState>(state => {\n              state.temporaryFile[localMessageId] = payload;\n            }),\n            false,\n            'updateTemporaryFile',\n          );\n        },\n        deleteTemporaryFile: localMessageId => {\n          set(\n            produce<FileState>(state => {\n              state.temporaryFile[localMessageId] = null;\n            }),\n            false,\n            'deleteTemporaryFile',\n          );\n        },\n        removeAudioFileByLocalId: localMessageId => {\n          set(\n            produce<FileState>(draft => {\n              if (!draft.audioFileMap[localMessageId]) {\n                return;\n              }\n\n              delete draft.audioFileMap[localMessageId];\n            }),\n            false,\n            'removeAudioFileByLocalId',\n          );\n        },\n        updateAudioProcessState: ({ localMessageId, state }) => {\n          set(\n            produce<FileState>(draft => {\n              if (state === 'processing') {\n                draft.audioProcessMap[localMessageId] = state;\n                return;\n              }\n              if (\n                state === 'finish' &&\n                draft.audioProcessMap[localMessageId] === 'processing'\n              ) {\n                delete draft.audioProcessMap[localMessageId];\n              }\n            }),\n            false,\n            'updateAudioProcessState',\n          );\n        },\n        updatePreviewURL: url => {\n          set(\n            {\n              previewURL: url,\n            },\n            false,\n            'updatePreviewURL',\n          );\n        },\n        clear: () => set(getDefaultState(), false, 'clear'),\n      }),\n      {\n        name: `botStudio.ChatAreaFileStore.${mark}`,\n        enabled: IS_DEV_MODE,\n      },\n    ),\n  );\n\nexport type FileStore = ReturnType<typeof createFileStore>;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { isUndefined, merge, omitBy } from 'lodash-es';\nimport { produce } from 'immer';\n\nexport type ActionLock = {\n  /**\n   * Data.now()\n   */\n  timestamp: number;\n} | null;\n\nexport interface GlobalActionLock {\n  sendMessageToACK: {\n    messageUniqKey: string | null;\n    timestamp: number;\n  } | null;\n\n  clearHistory: ActionLock;\n\n  clearContext: ActionLock;\n}\n\nexport interface AnswerActionLock {\n  deleteMessageGroup: ActionLock;\n  regenerate: ActionLock;\n}\n\nexport type GlobalActionType = keyof GlobalActionLock;\n\nexport type AnswerActionType = keyof AnswerActionLock;\n\ntype GroupId = string;\n\nexport type AnswerActionLockMap = Record<GroupId, AnswerActionLock>;\n\nexport interface ChatActionState {\n  globalActionLock: GlobalActionLock;\n  answerActionLockMap: AnswerActionLockMap;\n}\n\nexport type GlobalActionLockUpdateFn = (lock: GlobalActionLock) => void;\nexport type AnswerActionLockMapUpdateFn = (\n  lockMap: AnswerActionLockMap,\n) => void;\n\nexport interface ChatActionStoreAction {\n  updateGlobalActionLockByImmer: (updateFn: GlobalActionLockUpdateFn) => void;\n  updateGlobalActionLockOnlyDefined: (\n    globalActionLock: Partial<GlobalActionLock>,\n  ) => void;\n  updateAnswerActionLockMapOnlyDefined: (\n    groupId: GroupId,\n    answerActionLock: Partial<AnswerActionLock>,\n  ) => void;\n  updateAnswerActionLockMapByImmer: (\n    updateFn: AnswerActionLockMapUpdateFn,\n  ) => void;\n  getGlobalActionLock: () => GlobalActionLock;\n  getAnswerActionLockMap: () => AnswerActionLockMap;\n  clearAll: () => void;\n}\n\nconst getDefaultState: () => ChatActionState = () => ({\n  answerActionLockMap: {},\n  globalActionLock: {\n    clearContext: null,\n    clearHistory: null,\n    sendMessageToACK: null,\n  },\n});\n\nexport const createChatActionStore = (mark: string) =>\n  create<ChatActionState & ChatActionStoreAction>()(\n    devtools(\n      (set, get) => ({\n        ...getDefaultState(),\n        updateAnswerActionLockMapByImmer(updateFn) {\n          set(\n            state => ({\n              answerActionLockMap: produce<AnswerActionLockMap>(\n                state.answerActionLockMap,\n                updateFn,\n              ),\n            }),\n            false,\n            'updateAnswerActionLockMapByImmer',\n          );\n        },\n        updateGlobalActionLockOnlyDefined: inputActionLock => {\n          set(\n            {\n              globalActionLock: merge(\n                {},\n                get().globalActionLock,\n                omitBy(inputActionLock, isUndefined),\n              ),\n            },\n            false,\n            'updateGlobalActionLockOnlyDefined',\n          );\n        },\n        updateAnswerActionLockMapOnlyDefined: (groupId, inputActionLock) => {\n          set(\n            state => ({\n              answerActionLockMap: produce<AnswerActionLockMap>(\n                state.answerActionLockMap,\n                draft => {\n                  const targetGroupLock = draft[groupId];\n                  const definedActionLock = omitBy(\n                    inputActionLock,\n                    isUndefined,\n                  );\n\n                  if (!targetGroupLock) {\n                    draft[groupId] = merge(\n                      {},\n                      { deleteMessageGroup: null, regenerate: null },\n                      definedActionLock,\n                    );\n                    return;\n                  }\n                  draft[groupId] = merge(\n                    {},\n                    targetGroupLock,\n                    definedActionLock,\n                  );\n                },\n              ),\n            }),\n            false,\n            'updateAnswerActionLockMapOnlyDefined',\n          );\n        },\n        updateGlobalActionLockByImmer(updateFn) {\n          set(\n            state => ({\n              globalActionLock: produce<GlobalActionLock>(\n                state.globalActionLock,\n                updateFn,\n              ),\n            }),\n            false,\n            'updateGlobalActionLockByImmer',\n          );\n        },\n        getAnswerActionLockMap: () => get().answerActionLockMap,\n        getGlobalActionLock: () => get().globalActionLock,\n        clearAll: () => set(getDefaultState(), false, 'clearAll'),\n      }),\n      {\n        enabled: IS_DEV_MODE,\n        name: `botStudio.ChatAreaAction.${mark}`,\n      },\n    ),\n  );\n\nexport type ChatActionStore = ReturnType<typeof createChatActionStore>;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { produce } from 'immer';\n\nimport { findFileDataIndexById, isImage } from '../utils/batch-file-upload';\nimport {\n  type FileData,\n  FileStatus,\n  FileType,\n  type BaseFileData,\n} from './types';\n\nexport interface BatchUploadState {\n  fileIdList: string[];\n  fileDataMap: Record<string, FileData>;\n  fileTypeMap: Record<string, FileType>;\n}\n\nexport interface BatchUploadAction {\n  //  Add new data to fileIdList, fileDataMap\n  immerCreateFileData: (id: string, file: File) => void;\n  immerDeleteFileDataById: (id: string) => void;\n  immerUpdateFileDataById: (\n    id: string,\n    immerUpdater: (state: FileData) => void,\n  ) => void;\n  getFileDataList: () => FileData[];\n  getFileType: (id: string) => FileType | undefined;\n  // Is there a file being uploaded?\n  hasFileNotSuccess: () => boolean;\n  clearAllData: () => void;\n  getExistingFileCount: () => number;\n}\n\nconst getDefaultState = (): BatchUploadState => ({\n  fileDataMap: {},\n  fileIdList: [],\n  fileTypeMap: {},\n});\n\nexport const createBatchFileUploadStore = (mark: string) =>\n  create<BatchUploadState & BatchUploadAction>()(\n    devtools(\n      (set, get) => ({\n        ...getDefaultState(),\n        immerCreateFileData: (id, file) => {\n          set(\n            produce<BatchUploadState>(state => {\n              const baseFileData: BaseFileData = {\n                percent: 0,\n                uri: null,\n                file,\n                id,\n                status: FileStatus.Uploading,\n              };\n              const defaultFileData: FileData = isImage(file)\n                ? {\n                    ...baseFileData,\n                    fileType: FileType.Image,\n                    meta: null,\n                  }\n                : {\n                    ...baseFileData,\n                    fileType: FileType.File,\n                  };\n\n              if (state.fileDataMap[id]) {\n                throw new Error(`duplicate file id ${id}`);\n              }\n              state.fileDataMap[id] = defaultFileData;\n              state.fileTypeMap[id] = defaultFileData.fileType;\n              state.fileIdList.push(id);\n            }),\n            false,\n            'immerCreateFileData',\n          );\n        },\n        immerDeleteFileDataById: id => {\n          set(\n            produce<BatchUploadState>(state => {\n              const idx = findFileDataIndexById(state.fileIdList, id);\n              if (idx < 0) {\n                throw new Error(`failed to find file ${id}`);\n              }\n              state.fileIdList.splice(idx, 1);\n              delete state.fileDataMap[id];\n              delete state.fileTypeMap[id];\n            }),\n            false,\n            'immerDeleteFileDataById',\n          );\n        },\n        immerUpdateFileDataById: (id, immerUpdater) => {\n          set(\n            produce<BatchUploadState>(state => {\n              const data = state.fileDataMap[id];\n              if (!data) {\n                throw new Error(`failed to find file ${id}`);\n              }\n              immerUpdater(data);\n            }),\n            false,\n            'immerUpdateFileDataById',\n          );\n        },\n        hasFileNotSuccess: () =>\n          get().fileIdList.some(\n            id => get().fileDataMap[id]?.status !== FileStatus.Success,\n          ),\n        clearAllData: () => {\n          set(getDefaultState(), false, 'clearAllData');\n        },\n        getFileDataList: () =>\n          get()\n            .fileIdList.map(id => get().fileDataMap[id])\n            .filter((data): data is FileData => Boolean(data)),\n        getFileType: id => get().fileTypeMap[id],\n        getExistingFileCount: () => get().fileIdList.length,\n      }),\n      {\n        enabled: IS_DEV_MODE,\n        name: `botStudio.ChatAreaBatchFileUpload.${mark}`,\n      },\n    ),\n  );\n\nexport type BatchFileUploadStore = ReturnType<\n  typeof createBatchFileUploadStore\n>;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\n\nexport type RecordingInteractionType = 'keyboard' | 'clickOrTouch' | null;\n\nexport interface AudioUIState {\n  isRecording: boolean;\n  isPointerMoveOut: boolean;\n  audioLeftTime: number | null;\n  recordingInteractionType: RecordingInteractionType;\n}\n\nexport interface AudioUIAction {\n  setIsRecording: (isRecording: boolean) => void;\n  setIsPointerMoveOut: (isPointerMoveOut: boolean) => void;\n  setAudioLeftTime: (time: number) => void;\n  clearAudioLeftTime: () => void;\n  setRecordingInteractionType: (\n    interactionType: RecordingInteractionType,\n  ) => void;\n  clear: () => void;\n}\n\nconst getDefaultState = (): AudioUIState => ({\n  isRecording: false,\n  isPointerMoveOut: false,\n  audioLeftTime: null,\n  recordingInteractionType: null,\n});\n\nexport const createAudioUIStore = (mark: string) =>\n  create<AudioUIState & AudioUIAction>()(\n    devtools(\n      set => ({\n        ...getDefaultState(),\n        setIsRecording: isRecording => {\n          set({ isRecording }, false, 'setIsRecording');\n        },\n        setIsPointerMoveOut: isPointerMoveOut => {\n          set({ isPointerMoveOut }, false, 'setIsPointerMoveOut');\n        },\n        setAudioLeftTime: audioLeftTime => {\n          set({ audioLeftTime }, false, 'setAudioLeftTime');\n        },\n        clearAudioLeftTime: () => {\n          set({ audioLeftTime: null }, false, 'clearAudioLeftTime');\n        },\n        setRecordingInteractionType: recordingInteractionType => {\n          set(\n            { recordingInteractionType },\n            false,\n            'setRecordingInteractionType',\n          );\n        },\n        clear: () => set(getDefaultState(), false, 'clear'),\n      }),\n      {\n        name: `botStudio.ChatAreaAudioUIStore.${mark}`,\n        enabled: IS_DEV_MODE,\n      },\n    ),\n  );\n\nexport type AudioUIStore = ReturnType<typeof createAudioUIStore>;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable @coze-arch/no-deep-relative-import */\nimport { type MessageIndexStore } from '../../../../store/message-index';\n\nexport const getMessageIndexStoreMethods = (\n  useMessageIndexStore: MessageIndexStore,\n) => {\n  const { updateIgnoreIndexAndHistoryMessages } =\n    useMessageIndexStore.getState();\n  return {\n    updateIgnoreIndexAndHistoryMessages,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type Scene } from '@coze-common/chat-core';\nimport { exhaustiveCheckForRecord } from '@coze-common/chat-area-utils';\nimport { type Reporter } from '@coze-arch/logger';\n\nimport { createWaitingStore } from '../../store/waiting';\nimport { createSuggestionsStore } from '../../store/suggestions';\nimport { createSenderInfoStore } from '../../store/sender-info';\nimport {\n  createSelectionStore,\n  subscribeSelectionUpdate,\n} from '../../store/selection';\nimport { createSectionIdStore } from '../../store/section-id';\nimport { createOnboardingStore } from '../../store/onboarding';\nimport {\n  createMessagesStore,\n  subscribeMessageToUpdateMessageGroup,\n  subscribeSectionIdToUpdateMessageGroup,\n} from '../../store/messages';\nimport {\n  createMessageMetaStore,\n  subscribeMessageToUpdateMeta,\n  subscribeSectionIdToUpdateMeta,\n} from '../../store/message-meta';\nimport {\n  createMessageIndexStore,\n  subscribeMessageToUpdateMessageLoadIndex,\n} from '../../store/message-index';\nimport { createGlobalInitStore } from '../../store/global-init';\nimport { createFileStore } from '../../store/file';\nimport { createChatActionStore } from '../../store/chat-action';\nimport { createBatchFileUploadStore } from '../../store/batch-upload-file';\nimport { createAudioUIStore } from '../../store/audio-ui';\nimport { getMessageIndexStoreMethods } from '../../plugin/plugin-context/in-life-cycle-context/after-create-store-set/create-get-message-index-store-methods';\nimport { type SystemLifeCycleService } from '../../plugin/life-cycle';\nimport {\n  type ChatAreaConfigs,\n  type ExtendDataLifecycle,\n  type StoreSet,\n} from '../../context/chat-area-context/type';\nimport { type ChatAreaEventCallback } from '../../context/chat-area-context/chat-area-callback';\n\nexport interface InitStoreContext {\n  scene: Scene;\n  mark: string;\n  lifeCycleService: SystemLifeCycleService;\n  extendDataLifecycle?: ExtendDataLifecycle;\n  configs: ChatAreaConfigs;\n  reporter: Reporter;\n  eventCallback: ChatAreaEventCallback | null;\n  prePositionedStoreSet: Pick<StoreSet, 'usePluginStore'>;\n}\n\nexport class InitStoreService {\n  public storeSet: Omit<StoreSet, 'usePluginStore'>;\n  private context: InitStoreContext;\n  // eslint-disable-next-line @typescript-eslint/no-empty-function -- Initialization as expected\n  public unsubscribeStore: () => void = () => {};\n\n  constructor(context: InitStoreContext) {\n    this.context = context;\n\n    this.storeSet = this.createStoreSet();\n\n    if (!this.storeSet) {\n      console.error('init store error');\n      return;\n    }\n\n    this.subscribeStore();\n  }\n\n  /**\n   * Execute the life cycle of creation completion, which needs to be delayed appropriately\n   */\n  public runCreateLifeCycle() {\n    if (!this.storeSet) {\n      console.error('store set not ready');\n      return;\n    }\n\n    this.context.lifeCycleService.app.onAfterCreateStores({\n      messageIndexStore: getMessageIndexStoreMethods(\n        this.storeSet.useMessageIndexStore,\n      ),\n    });\n  }\n\n  /**\n   * Create a Normal Store\n   */\n  private createStoreSet() {\n    const useGlobalInitStore = createGlobalInitStore(this.context.mark);\n    const useMessageMetaStore = createMessageMetaStore(this.context.mark);\n    const useMessagesStore = createMessagesStore(this.context.mark);\n    const useSectionIdStore = createSectionIdStore(this.context.mark);\n    const useWaitingStore = createWaitingStore(this.context.mark);\n    const useOnboardingStore = createOnboardingStore(this.context.mark);\n    const useFileStore = createFileStore(this.context.mark);\n    const useSuggestionsStore = createSuggestionsStore(this.context.mark);\n    const useSelectionStore = createSelectionStore(this.context.mark);\n    const useSenderInfoStore = createSenderInfoStore(this.context.mark);\n    const useBatchFileUploadStore = createBatchFileUploadStore(\n      this.context.mark,\n    );\n    const useMessageIndexStore = createMessageIndexStore(this.context.mark);\n    const useChatActionStore = createChatActionStore(this.context.mark);\n    const useAudioUIStore = createAudioUIStore(this.context.mark);\n\n    return {\n      useGlobalInitStore,\n      useMessageMetaStore,\n      useMessagesStore,\n      useSectionIdStore,\n      useWaitingStore,\n      useOnboardingStore,\n      useFileStore,\n      useSuggestionsStore,\n      useSelectionStore,\n      useSenderInfoStore,\n      useBatchFileUploadStore,\n      useMessageIndexStore,\n      useChatActionStore,\n      useAudioUIStore,\n    };\n  }\n\n  /**\n   * Monitor Store Changes\n   */\n  private subscribeStore() {\n    if (!this.storeSet) {\n      return;\n    }\n\n    const {\n      useMessagesStore,\n      useMessageMetaStore,\n      useSectionIdStore,\n      useSelectionStore,\n      useMessageIndexStore,\n    } = this.storeSet;\n\n    const unsubscribeMessageToUpdateMeta = subscribeMessageToUpdateMeta(\n      {\n        useMessagesStore,\n        useMessageMetaStore,\n        useSectionIdStore,\n      },\n      this.context.configs,\n    );\n    const unsubscribeSectionIdToUpdateMeta = subscribeSectionIdToUpdateMeta(\n      {\n        useMessageMetaStore,\n        useSectionIdStore,\n      },\n      this.context.configs,\n    );\n    const unsubscribeSelectionUpdate = subscribeSelectionUpdate(\n      {\n        useMessagesStore,\n        useSelectionStore,\n      },\n      this.context.eventCallback,\n      this.context.lifeCycleService,\n    );\n    const unsubscribeSectionIdToUpdateMessageGroup =\n      subscribeSectionIdToUpdateMessageGroup({\n        useMessagesStore,\n        useSectionIdStore,\n      });\n\n    const unsubscribeMessageStoreToUpdateMessageGroup =\n      subscribeMessageToUpdateMessageGroup(\n        {\n          useMessagesStore,\n          useSectionIdStore,\n        },\n        this.context.eventCallback,\n        this.context.lifeCycleService,\n      );\n    const unsubscribeMessageStoreToUpdateMessageLoadIndex =\n      subscribeMessageToUpdateMessageLoadIndex({\n        useMessageIndexStore,\n        useMessagesStore,\n      });\n\n    this.unsubscribeStore = () => {\n      unsubscribeMessageToUpdateMeta();\n      unsubscribeSectionIdToUpdateMeta();\n      unsubscribeSelectionUpdate();\n      unsubscribeSectionIdToUpdateMessageGroup();\n      unsubscribeMessageStoreToUpdateMessageGroup();\n      unsubscribeMessageStoreToUpdateMessageLoadIndex();\n    };\n  }\n\n  /**\n   * Clear Store Set\n   */\n  public clearStoreSet() {\n    if (!this.storeSet) {\n      return;\n    }\n\n    const {\n      useBatchFileUploadStore,\n      useChatActionStore,\n      useFileStore,\n      useGlobalInitStore,\n      useMessageIndexStore,\n      useMessageMetaStore,\n      useMessagesStore,\n      useOnboardingStore,\n      useSectionIdStore,\n      useSelectionStore,\n      useSenderInfoStore,\n      useSuggestionsStore,\n      useWaitingStore,\n      useAudioUIStore,\n      ...rest\n    } = this.storeSet;\n\n    exhaustiveCheckForRecord(rest);\n\n    useGlobalInitStore.getState().clearSideEffect();\n    useMessageMetaStore.getState().clear();\n    useMessagesStore.getState().clearMessageStore();\n    useSectionIdStore.getState().clear();\n    useWaitingStore.getState().clearAllUnsettledUnconditionally();\n    useOnboardingStore.getState().clearOnboardingStore();\n    useFileStore.getState().clear();\n    useSuggestionsStore.getState().clearSuggestions();\n    useSelectionStore.getState().clearSelectedReplyIdList();\n    useSenderInfoStore.getState().clearSenderInfoStore();\n    useBatchFileUploadStore.getState().clearAllData();\n    useMessageIndexStore.getState().clearAll();\n    useChatActionStore.getState().clearAll();\n    useAudioUIStore.getState().clear();\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable max-lines */\nimport { type MutableRefObject } from 'react';\n\nimport mitt, { type Emitter } from 'mitt';\nimport ChatCore, {\n  type Biz,\n  type PresetBot,\n  Scene,\n  type CreateProps,\n} from '@coze-common/chat-core';\nimport { getReportError } from '@coze-common/chat-area-utils';\nimport { type Reporter } from '@coze-arch/logger';\nimport { DeveloperApi } from '@coze-arch/bot-api';\n\nimport { LoadMoreEnvTools } from '../load-more/load-more-env-tools';\nimport { LoadMoreClient } from '../load-more';\nimport { listenMessageUpdate } from '../listen-message-update';\nimport { fixHistoryMessageList } from '../fix-message/fix-history-message-list';\nimport {\n  clearExtendedLifecycleData,\n  recordInitServiceController,\n} from '../extend-data-lifecycle';\nimport { ChatActionLockService } from '../chat-action-lock';\nimport { splitMessageAndSuggestions } from '../../utils/suggestions';\nimport { stopResponding } from '../../utils/stop-responding';\nimport { SecurityStrategyContext } from '../../utils/message-security-strategy';\nimport { initPlugins } from '../../utils/init-plugins';\nimport { getIsPolicyException } from '../../utils/get-is-policy-exception';\nimport { destroyFileManager } from '../../utils/file-manage';\nimport { type UserSenderInfo } from '../../store/types';\nimport { ReportEventNames } from '../../report-events/report-event-names';\nimport { type PluginRegistryEntry } from '../../plugin/types/register-plugin';\nimport type { MethodCommonDeps } from '../../plugin/types';\nimport { SystemLifeCycleService } from '../../plugin/life-cycle';\nimport { getLoadRequest } from '../../hooks/context/load-more/get-load-request';\nimport {\n  getChatProcessing,\n  getListenProcessChatStateChange,\n} from '../../hooks/context/load-more/get-listen-process-chat-state-change';\nimport { getInsertMessages } from '../../hooks/context/load-more/get-insert-messages';\nimport {\n  type StoreSet,\n  type MixInitResponse,\n  type ChatAreaConfigs,\n  type ExtendDataLifecycle,\n  type EventCenter,\n} from '../../context/chat-area-context/type';\nimport { generateChatCoreBiz } from '../../context/chat-area-context/helpers/generate-chat-core-props';\nimport { type ChatAreaEventCallback } from '../../context/chat-area-context/chat-area-callback';\nimport { PreInitStoreService } from './pre-init-store';\nimport { InitStoreService } from './init-store';\n\ninterface InitContext {\n  requestToInit: () => Promise<MixInitResponse>;\n  eventCallback: ChatAreaEventCallback | undefined;\n  reporter: Reporter;\n  botId: string | undefined;\n  spaceId?: string;\n  presetBot: PresetBot | undefined;\n  scene: Scene;\n  userInfo: UserSenderInfo | null;\n  enableChatCoreDebug: boolean | undefined;\n  createChatCoreOverrideConfig:\n    | Partial<Omit<CreateProps, 'bot_version' | 'bot_id' | 'conversation_id'>>\n    | undefined;\n  configs: ChatAreaConfigs;\n  enableChatActionLock: boolean | undefined;\n  extendDataLifecycle: ExtendDataLifecycle | undefined;\n  loadMoreFlagRef: MutableRefObject<{\n    enableTwoWayLoad: boolean;\n    enableMarkRead: boolean;\n  }>;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  pluginRegistryList: PluginRegistryEntry<any>[] | undefined;\n}\n\nconst enum InitStatus {\n  UnInit = 'unInit',\n  Loading = 'loading',\n  Success = 'initSuccess',\n  Failed = 'initFail',\n}\n\nexport class InitService {\n  private latestRequestIndex = 0;\n  /**\n   * Context information currently in use\n   */\n  private context: InitContext;\n  /**\n   * Store context information available for the next round (reinitialization)\n   */\n  private nextContext: InitContext | null = null;\n  /**\n   * Whether to cancel the request flag\n   */\n  private requestAborted = false;\n  /**\n   * Store mark information\n   */\n  private mark!: Biz;\n  /**\n   * Front Initialization Store Service\n   */\n  private preInitStoreService!: PreInitStoreService;\n  /**\n   * Store service\n   */\n  private initStoreService!: InitStoreService;\n  /**\n   * Load more unlistening events\n   */\n  private loadMoreDispose!: () => void;\n  /**\n   * plugin destruction event\n   */\n  private destroyPlugins!: () => void;\n\n  /**\n   * reporter\n   */\n  public reporter!: Reporter;\n  /**\n   * lifecycle services\n   */\n  public lifeCycleService!: SystemLifeCycleService;\n  /**\n   * Lock service\n   */\n  public chatActionLockService!: ChatActionLockService;\n  /**\n   * Event Center\n   */\n  public eventCenter: Emitter<EventCenter> = mitt<EventCenter>();\n  /**\n   * Load more services\n   */\n  public loadMoreClient!: LoadMoreClient;\n  /**\n   * Load more service environment tools\n   */\n  public loadMoreEnvTools!: LoadMoreEnvTools;\n  /**\n   * Store Set Information\n   */\n  public storeSet!: StoreSet;\n  // ! Are you going to add properties? Please note that using! is explicit and needs to be supplemented with runtime checks into the assertInitialized function\n\n  /**\n   * construction method\n   */\n  constructor(context: InitContext) {\n    this.context = context;\n\n    this.initServices();\n    this.assertInitialized();\n\n    // After creating LoadMore, perform a location to the message\n    this.locateToUnreadMessage();\n    this.init();\n  }\n\n  /**\n   * When running, determine whether the necessary data for initialization is correct\n   */\n  private assertInitialized() {\n    const {\n      loadMoreClient,\n      loadMoreDispose,\n      loadMoreEnvTools,\n      mark,\n      reporter,\n      lifeCycleService,\n      chatActionLockService,\n      destroyPlugins,\n      initStoreService,\n      preInitStoreService,\n      storeSet,\n    } = this;\n\n    // The type check can't seem to be written -. - can't get the data of the private property, so I won't check it here\n\n    if (\n      !loadMoreClient ||\n      !loadMoreEnvTools ||\n      !mark ||\n      !reporter ||\n      !lifeCycleService ||\n      !chatActionLockService ||\n      !destroyPlugins ||\n      !loadMoreDispose ||\n      !initStoreService ||\n      !preInitStoreService ||\n      !storeSet\n    ) {\n      throw new Error('InitService error');\n    }\n  }\n\n  /**\n   * initialization service\n   */\n  private initServices() {\n    this.mark = generateChatCoreBiz(this.context.scene);\n    this.reporter = this.context.reporter.createReporterWithPreset({\n      namespace: 'bot-platform',\n    });\n\n    // Create Pre-Store Initialization Service\n    this.preInitStoreService = new PreInitStoreService({\n      mark: this.mark,\n      scene: this.context.scene,\n      extendDataLifecycle: this.context.extendDataLifecycle,\n      reporter: this.reporter,\n    });\n\n    // Create a system lifecycle service\n    this.lifeCycleService = new SystemLifeCycleService({\n      reporter: this.reporter,\n      usePluginStore:\n        this.preInitStoreService.prePositionedStoreSet.usePluginStore,\n    });\n\n    // Create Normal Store Initialization Service\n    this.initStoreService = new InitStoreService({\n      scene: this.context.scene,\n      mark: this.mark,\n      lifeCycleService: this.lifeCycleService,\n      extendDataLifecycle: this.context.extendDataLifecycle,\n      configs: this.context.configs,\n      reporter: this.reporter,\n      eventCallback: this.context.eventCallback ?? null,\n      prePositionedStoreSet: this.preInitStoreService.prePositionedStoreSet,\n    });\n\n    this.storeSet = {\n      ...this.initStoreService.storeSet,\n      ...this.preInitStoreService.prePositionedStoreSet,\n    };\n\n    // Create mutual exclusions\n    this.chatActionLockService = this.createChatActionLockService();\n\n    // Create a LoadMore service\n    const { loadMoreClient, loadMoreDispose, loadMoreEnvTools } =\n      this.createLoadMoreService();\n    const commonDeps: MethodCommonDeps = {\n      context: {\n        lifeCycleService: this.lifeCycleService,\n        eventCallback: this.context.eventCallback,\n        reporter: this.context.reporter,\n      },\n      services: {\n        loadMoreClient,\n        chatActionLockService: this.chatActionLockService,\n      },\n      storeSet: this.storeSet,\n    };\n    // registration plugin system\n    this.destroyPlugins = initPlugins({\n      pluginRegistryList: this.context.pluginRegistryList,\n      storeSet: this.storeSet,\n      refreshMessageList: this.refreshMessageList,\n      eventCallback: this.context.eventCallback,\n      reporter: this.reporter,\n      lifeCycleService: this.lifeCycleService,\n      getCommonDeps: () => commonDeps,\n    });\n\n    // Wait for the plugin to be registered before executing the relevant life cycle\n    this.initStoreService.runCreateLifeCycle();\n    this.loadMoreClient = loadMoreClient;\n    this.loadMoreDispose = loadMoreDispose;\n    this.loadMoreEnvTools = loadMoreEnvTools;\n  }\n\n  /**\n   * Dynamic Update Context\n   */\n  public updateContext = (\n    context: Pick<\n      InitContext,\n      'requestToInit' | 'userInfo' | 'createChatCoreOverrideConfig'\n    >,\n  ) => {\n    this.nextContext = {\n      ...this.context,\n      ...context,\n    };\n  };\n\n  public immediatelyUpdateContext = (\n    context: Pick<InitContext, 'userInfo' | 'createChatCoreOverrideConfig'>,\n  ) => {\n    this.context = {\n      ...this.context,\n      ...context,\n    };\n  };\n  /**\n   * Initialize the main method\n   */\n  public init = async () => {\n    // If it has been initialized successfully before, it will not be initialized.\n    if (\n      this.storeSet.useGlobalInitStore.getState().initStatus ===\n      InitStatus.Success\n    ) {\n      return;\n    }\n\n    this.lifeCycleService.app.onBeforeInitial();\n\n    const requestData = await this.processInit();\n\n    if (!requestData) {\n      return;\n    }\n\n    this.reporter.successEvent({ eventName: ReportEventNames.Init });\n    this.lifeCycleService.app.onAfterInitial({\n      ctx: {\n        messageListFromService: requestData,\n      },\n    });\n\n    recordInitServiceController(this.context.scene, this);\n  };\n\n  /**\n   * @Experimental experimental function, not re-tested, please focus on testing when using it\n   * Refresh message list\n   */\n  public refreshMessageList = async () => {\n    this.lifeCycleService.app.onBeforeRefreshMessageList();\n\n    await stopResponding({\n      storeSet: this.storeSet,\n      lifeCycleService: this.lifeCycleService,\n      reporter: this.reporter,\n    });\n\n    if (this.nextContext) {\n      this.context = this.nextContext;\n    }\n\n    try {\n      const requestData = await this.processInit();\n\n      if (!requestData) {\n        this.lifeCycleService.app.onRefreshMessageListError({\n          ctx: {\n            error: new Error('request data is empty'),\n          },\n        });\n      }\n    } catch (error) {\n      this.lifeCycleService.app.onRefreshMessageListError({\n        ctx: {\n          error,\n        },\n      });\n    } finally {\n      this.lifeCycleService.app.onAfterRefreshMessageList();\n    }\n  };\n\n  /**\n   * Creating an operational mutual exclusion service\n   */\n  private createChatActionLockService() {\n    // Action mutual exclusion\n    const {\n      getAnswerActionLockMap,\n      getGlobalActionLock,\n      updateGlobalActionLockByImmer,\n      updateAnswerActionLockMapByImmer,\n    } = this.storeSet.useChatActionStore.getState();\n\n    return new ChatActionLockService({\n      updateGlobalActionLockByImmer,\n      getGlobalActionLock,\n      updateAnswerActionLockMapByImmer,\n      getAnswerActionLockMap,\n      readEnvValues: () => ({\n        enableChatActionLock: this.context.enableChatActionLock ?? false,\n      }),\n      reporter: this.context.reporter,\n    });\n  }\n\n  /**\n   * Create a LoadMore service\n   */\n  private createLoadMoreService() {\n    const { useMessageIndexStore, useGlobalInitStore, useWaitingStore } =\n      this.storeSet;\n\n    const { listenProcessChatStateChange, forceDispose } =\n      getListenProcessChatStateChange(this.storeSet.useWaitingStore);\n\n    this.loadMoreDispose = forceDispose;\n\n    const loadMoreEnv = (() => {\n      // Actions are all stable references, no on-site calculations required\n      const {\n        updateCursor,\n        updateIndex,\n        updateHasMore,\n        updateLockAndErrorByImmer,\n        resetCursors,\n        resetHasMore,\n        resetLoadLockAndError,\n        alignMessageIndexes,\n        clearAll,\n      } = useMessageIndexStore.getState();\n      const envTools: LoadMoreEnvTools = new LoadMoreEnvTools({\n        reporter: this.reporter,\n        updateCursor,\n        updateHasMore,\n        updateIndex,\n        resetCursors,\n        resetHasMore,\n        resetLoadLockAndError,\n        alignMessageIndexes,\n        updateLockAndErrorByImmer,\n        clearMessageIndexStore: clearAll,\n        insertMessages: getInsertMessages(\n          this.storeSet,\n          this.context.eventCallback?.onBeforeLoadMoreInsertMessages,\n        ),\n        loadRequest: getLoadRequest({\n          reporter: this.reporter,\n          getChatCore: () => envTools.chatCore,\n          ignoreMessageConfigList: this.context.configs.ignoreMessageConfigList,\n          lifeCycleService: this.lifeCycleService,\n        }),\n        requestMessageIndex: conversationId =>\n          DeveloperApi.GetConversationParticipantsReadIndex({\n            conversation_id:\n              conversationId ||\n              useGlobalInitStore.getState().conversationId ||\n              '',\n          }),\n        // Value, requires on-site calculation at runtime\n        readEnvValues: () => {\n          const state = useMessageIndexStore.getState();\n          const waitingState = useWaitingStore.getState();\n          return {\n            ...this.context.loadMoreFlagRef.current,\n            ...state,\n            isProcessingChat: getChatProcessing(waitingState),\n          };\n        },\n        // eslint-disable-next-line @typescript-eslint/no-empty-function\n        waitMessagesLengthChangeLayoutEffect: () => {},\n        listenProcessChatStateChange,\n      });\n      return envTools;\n    })();\n\n    return {\n      loadMoreEnvTools: loadMoreEnv,\n      loadMoreClient: new LoadMoreClient(loadMoreEnv),\n      loadMoreDispose: forceDispose,\n    };\n  }\n\n  /**\n   * Locate unread messages\n   */\n  private locateToUnreadMessage() {\n    this.loadMoreClient.locateToUnreadMessage({\n      messages: this.storeSet.useMessagesStore.getState().messages,\n      readIndex: this.storeSet.useMessageIndexStore.getState().readIndex,\n    });\n  }\n\n  /**\n   * Function to clear side effects\n   */\n  private clearInitSideEffect() {\n    this.initStoreService.clearStoreSet();\n    this.preInitStoreService.clearStoreSet();\n  }\n\n  /**\n   * ChatArea Destruction\n   */\n  public destroy = (params?: { disableSkip: boolean }) => {\n    const ableToSkip = this.getIsSkipInit();\n    if (ableToSkip && !params?.disableSkip) {\n      return;\n    }\n    this.lifeCycleService?.app.onBeforeDestroy();\n    // side effect clear\n    this.abortRequest();\n    // state clear\n    this.storeSet?.useMessageIndexStore\n      .getState()\n      .setScrollViewFarFromBottom(false);\n    clearExtendedLifecycleData(this.context.scene);\n\n    // side effect clear\n    destroyFileManager();\n    this.destroyPlugins();\n    this.clearInitSideEffect();\n    this.loadMoreDispose();\n  };\n\n  public destroyFullSite = () => {\n    this.destroy({ disableSkip: true });\n  };\n\n  /**\n   * Request initialization data\n   */\n  private async requestInitData({\n    onBefore,\n    onAfter,\n    onError,\n  }: {\n    onBefore?: () => void;\n    onAfter?: () => void;\n    onError?: () => void;\n  }) {\n    const ableToSkip = this.getIsSkipInit();\n    if (ableToSkip) {\n      return null;\n    }\n\n    onBefore?.();\n    const currentRequestIndex = this.latestRequestIndex + 1;\n    this.latestRequestIndex = currentRequestIndex;\n\n    try {\n      const result = await this.context.requestToInit();\n\n      if (\n        this.requestAborted ||\n        currentRequestIndex < this.latestRequestIndex\n      ) {\n        return null;\n      }\n\n      this.loadMoreClient.clearMessageIndexStore();\n      this.initStoreService.runCreateLifeCycle();\n      return result;\n    } catch (e) {\n      console.error('init error', e);\n      onError?.();\n\n      const { error, meta } = getReportError(e);\n      this.reporter.errorEvent({\n        eventName: ReportEventNames.Init,\n        error,\n        meta: Object.assign({}, meta, {\n          isPolicyException: getIsPolicyException(error),\n        }),\n      });\n    }\n\n    onAfter?.();\n    return null;\n  }\n\n  /**\n   * initialization process\n   */\n  private async processInit() {\n    this.setInitStatus(InitStatus.Loading);\n\n    this.requestAborted = false;\n\n    // First try to get the initialization data.\n    const requestData = await this.requestInitData({\n      onError: () => {\n        this.setInitStatus(InitStatus.Failed);\n        this.context.eventCallback?.onInitError?.();\n        this.lifeCycleService.app.onInitialError();\n      },\n    });\n\n    // Determine whether there is empty data and do not process it.\n    if (!requestData || this.requestAborted) {\n      return;\n    }\n\n    this.loadMoreClient.handleInitialLoadIndex(requestData);\n\n    this.recordUserAndBotInfo({ requestData });\n\n    this.createAndRecordChatCore({ requestData });\n\n    this.registerUploadPlugin();\n\n    this.recordConversationParams({\n      requestData,\n    });\n\n    this.setInitStatus(InitStatus.Success);\n    this.context.eventCallback?.onInitSuccess?.();\n    return requestData;\n  }\n\n  /**\n   * Cancel request (not really cancelled in the strict sense, just cancelled from the data dimension)\n   */\n  public abortRequest = () => {\n    this.requestAborted = true;\n  };\n\n  /**\n   * Create and record ChatCore & create listeners\n   */\n  private createAndRecordChatCore({\n    requestData,\n  }: {\n    requestData: MixInitResponse;\n  }) {\n    if (!requestData?.conversationId) {\n      this.reporter.errorEvent({\n        eventName: ReportEventNames.Init,\n        error: new Error('Invalid Response without conversationId'),\n      });\n\n      this.setInitStatus(InitStatus.Failed);\n      this.context.eventCallback?.onInitError?.();\n      this.lifeCycleService.app.onInitialError();\n      return;\n    }\n\n    const {\n      useGlobalInitStore,\n      useMessagesStore,\n      useWaitingStore,\n      useSuggestionsStore,\n      useSectionIdStore,\n    } = this.storeSet;\n\n    const { setConversationId, setChatCore, setChatCoreOffListen } =\n      useGlobalInitStore.getState();\n\n    setConversationId(requestData.conversationId);\n\n    const localeChatCore = new ChatCore({\n      bot_version: requestData.botVersion,\n      conversation_id: requestData.conversationId,\n      space_id: this.context.spaceId,\n      bot_id: this.context.botId,\n      preset_bot: this.context.presetBot as PresetBot,\n      draft_mode: this.context.scene === Scene.Playground,\n      biz: this.mark,\n      env: IS_DEV_MODE ? 'local' : IS_PROD ? 'production' : 'boe',\n      deployVersion: IS_RELEASE_VERSION ? 'release' : 'inhouse',\n      logLevel: IS_DEV_MODE ? 'info' : 'error',\n      scene: this.context.scene,\n      enableDebug: this.context.enableChatCoreDebug,\n      ...this.context.createChatCoreOverrideConfig,\n    });\n\n    setChatCore(localeChatCore);\n    setChatCoreOffListen(\n      (() => {\n        const securityStrategyContext = new SecurityStrategyContext({\n          storeSet: this.storeSet,\n          reporter: this.reporter,\n          eventCallback: this.context.eventCallback,\n          lifeCycleService: this.lifeCycleService,\n          chatActionLockService: this.chatActionLockService,\n        });\n\n        return listenMessageUpdate({\n          chatCore: localeChatCore,\n          useMessagesStore,\n          useWaitingStore,\n          useSuggestionsStore,\n          useSectionIdStore,\n          reporter: this.reporter,\n          eventCallback: this.context.eventCallback ?? {},\n          configs: this.context.configs,\n          securityStrategyContext,\n          lifeCycleService: this.lifeCycleService,\n        });\n      })(),\n    );\n  }\n\n  /**\n   * Handling chat history, openers, SectionId and Suggestions\n   */\n  private recordConversationParams({\n    requestData,\n  }: {\n    requestData: MixInitResponse;\n  }) {\n    const {\n      useOnboardingStore,\n      useMessagesStore,\n      useSectionIdStore,\n      useSuggestionsStore,\n    } = this.storeSet;\n\n    const { partialUpdateOnboardingData } = useOnboardingStore.getState();\n\n    const { addMessages } = useMessagesStore.getState();\n\n    const { setLatestSectionId } = useSectionIdStore.getState();\n\n    const { lastSectionId, messageList, prologue, onboardingSuggestions } =\n      requestData;\n\n    setLatestSectionId(lastSectionId ?? '');\n\n    const fixedMessageList = fixHistoryMessageList({\n      historyMessageList: messageList ?? [],\n      ignoreMessageConfigList: this.context.configs.ignoreMessageConfigList,\n      reporter: this.reporter,\n    });\n\n    if (fixedMessageList) {\n      addMessages(fixedMessageList, { clearFirst: true });\n      const { idAndSuggestions } = splitMessageAndSuggestions(fixedMessageList);\n      useSuggestionsStore.getState().updateSuggestionsBatch(idAndSuggestions);\n    }\n\n    partialUpdateOnboardingData(prologue, onboardingSuggestions);\n  }\n\n  /**\n   * Initialize the upload plugin (note that it relies on Chat Core to initialize first)\n   */\n  public registerUploadPlugin = () => {\n    const { chatCore } = this.storeSet.useGlobalInitStore.getState();\n    if (!this.context.userInfo?.id || !chatCore) {\n      console.error('UserId is Empty or Chat Core not Ready');\n      return;\n    }\n\n    const uploadPluginName = 'upload-plugin';\n\n    if (chatCore.checkPluginIsRegistered(uploadPluginName)) {\n      return;\n    }\n\n    chatCore.registerPlugin(\n      uploadPluginName,\n      this.context.configs.uploadPlugin,\n      {\n        userId: this.context.userInfo.id,\n        appId: APP_ID,\n      },\n    );\n  };\n\n  /**\n   * Record user information and bot information\n   */\n  public recordUserAndBotInfo = ({\n    requestData,\n  }: {\n    requestData: MixInitResponse;\n  }) => {\n    const { useSenderInfoStore, useOnboardingStore } = this.storeSet;\n\n    const { userInfoMap, botInfoMap } = requestData;\n    const { setUserInfoMap, setBotInfoMap, updateUserInfo } =\n      useSenderInfoStore.getState();\n    const { recordBotInfo } = useOnboardingStore.getState();\n\n    if (botInfoMap) {\n      setBotInfoMap(botInfoMap);\n\n      // Todo: remove temporary logic\n      const botInfo = Object.values(botInfoMap).at(0);\n      recordBotInfo({\n        name: botInfo?.nickname,\n        avatar: botInfo?.url,\n      });\n    }\n\n    if (userInfoMap) {\n      setUserInfoMap(userInfoMap);\n      return;\n    }\n\n    if (this.context.userInfo) {\n      const defaultUserInfoMap = {\n        [`${this.context.userInfo.id}`]: this.context.userInfo,\n      };\n\n      setUserInfoMap(defaultUserInfoMap);\n      updateUserInfo(this.context.userInfo);\n    }\n  };\n\n  /**\n   * Set the initialization state and sync to the Store\n   */\n  private setInitStatus(initStatus: InitStatus) {\n    const { setInitStatus } = this.storeSet.useGlobalInitStore.getState();\n\n    setInitStatus(initStatus);\n  }\n\n  /**\n   * Can I skip the initialization/destruction phase?\n   */\n  private getIsSkipInit() {\n    const initSuccess =\n      this.storeSet?.useGlobalInitStore.getState().initStatus ===\n      InitStatus.Success;\n    const ableToSkipInit = this.context.extendDataLifecycle === 'full-site';\n    return initSuccess && ableToSkipInit;\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { UploadPlugin } from '../../service/upload-plugin';\nimport { type ChatAreaConfigs } from './type';\n\nexport const defaultConfigs: ChatAreaConfigs = {\n  showFunctionCallDetail: true,\n  ignoreMessageConfigList: [],\n  groupUserMessage: false,\n  uploadPlugin: UploadPlugin,\n  isShowFunctionCallBox: true,\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type MutableRefObject, useRef } from 'react';\n\nimport { merge } from 'lodash-es';\n\nimport { InitService } from '../../service/init-service';\nimport {\n  recordInitServiceController,\n  retrieveAndClearInitService,\n} from '../../service/extend-data-lifecycle';\nimport { type ChatAreaProviderProps } from '../../context/chat-area-context/type';\nimport { defaultConfigs } from '../../context/chat-area-context/default-props';\n\nexport const useCreateAndUpdateInitService = ({\n  spaceId,\n  botId,\n  userInfo,\n  presetBot,\n  requestToInit,\n  scene,\n  eventCallback,\n  reporter: inputReporter,\n  configs: userConfigs,\n  createChatCoreOverrideConfig,\n  enableChatCoreDebug,\n  enableChatActionLock,\n  extendDataLifecycle,\n  pluginRegistryList,\n  enableTwoWayLoad,\n  enableMarkRead,\n}: ChatAreaProviderProps) => {\n  const configs = merge({}, defaultConfigs, userConfigs);\n\n  const flagRef = useRef({\n    enableTwoWayLoad: enableTwoWayLoad ?? false,\n    enableMarkRead: enableMarkRead ?? false,\n  });\n\n  flagRef.current = {\n    enableTwoWayLoad: enableTwoWayLoad ?? false,\n    enableMarkRead: enableMarkRead ?? false,\n  };\n\n  const initControllerRef = useRef<InitService | null>(null);\n\n  if (!initControllerRef.current) {\n    const isFullSite = extendDataLifecycle === 'full-site';\n\n    const preInitController = retrieveAndClearInitService(scene);\n\n    if (isFullSite && preInitController) {\n      initControllerRef.current = preInitController;\n      recordInitServiceController(scene, preInitController);\n    } else {\n      initControllerRef.current = new InitService({\n        spaceId,\n        botId,\n        userInfo,\n        presetBot,\n        requestToInit,\n        scene,\n        eventCallback,\n        reporter: inputReporter,\n        configs,\n        createChatCoreOverrideConfig,\n        enableChatCoreDebug,\n        enableChatActionLock,\n        loadMoreFlagRef: flagRef,\n        extendDataLifecycle,\n        pluginRegistryList,\n      });\n    }\n  }\n\n  /**\n   * Dynamically update the context information in initService, which is convenient for the business party to call the dynamic update of refreshMessageList\n   */\n  initControllerRef.current.updateContext({\n    requestToInit,\n    userInfo,\n    createChatCoreOverrideConfig,\n  });\n  initControllerRef.current.immediatelyUpdateContext({\n    userInfo,\n    createChatCoreOverrideConfig,\n  });\n\n  return {\n    initControllerRef:\n      initControllerRef as unknown as MutableRefObject<InitService>,\n    configs,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect } from 'react';\n\nimport { merge } from 'lodash-es';\n\nimport { type UserSenderInfo } from '../../store/types';\nimport { type StoreSet } from '../../context/chat-area-context/type';\n\nexport const useAutoUpdateUserInfo = ({\n  userInfo,\n  storeSet,\n}: {\n  userInfo: UserSenderInfo | null;\n  storeSet: Pick<StoreSet, 'useSenderInfoStore'>;\n}) => {\n  useEffect(() => {\n    if (!userInfo) {\n      return;\n    }\n\n    const { useSenderInfoStore } = storeSet;\n    const { updateUserInfo, setUserInfoMap, userInfoMap } =\n      useSenderInfoStore.getState();\n    updateUserInfo(userInfo);\n    setUserInfoMap(\n      merge([], userInfoMap, {\n        [userInfo.id]: userInfo,\n      }),\n    );\n  }, [userInfo, storeSet]);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  forwardRef,\n  type PropsWithChildren,\n  useEffect,\n  useImperativeHandle,\n} from 'react';\n\nimport {\n  LocalCacheContext,\n  getReadLocalStoreValue,\n  getWriteLocalStoreValue,\n} from '@coze-common/chat-uikit';\n\nimport { UploadControllerProvider } from '../upload-controller-context/provider';\nimport { StoreSetContext } from '../store-set';\nimport { ProviderPassThroughContext } from '../preference/preference-context';\nimport { LoadMoreProvider } from '../load-more';\nimport { ChatActionLockContext } from '../chat-action-lock/chat-action-lock-context';\nimport { localLog } from '../../utils/local-log';\nimport { useCreateAndUpdateInitService } from '../../hooks/init/use-create-and-update-init-service';\nimport { useAutoUpdateUserInfo } from '../../hooks/init/use-auto-update-user-info';\nimport { useListenMessagesLengthChangeLayoutEffect } from '../../hooks/context/load-more/listen-message-length-change';\nimport {\n  type ChatAreaProviderMethod,\n  type ChatAreaProviderProps,\n} from './type';\nimport { NullableChatAreaContext } from './context';\n\n/**\n * requestToInit changes may cause reinitialization (extendDataLifecycle affects)\n */\nexport const ChatAreaProviderNew = forwardRef<\n  ChatAreaProviderMethod,\n  PropsWithChildren<ChatAreaProviderProps>\n>((props, ref) => {\n  const {\n    botId,\n    scene,\n    userInfo,\n    children,\n    enableMarkRead,\n    enableDragUpload,\n    enableTwoWayLoad,\n    showUserExtendedInfo,\n    enableImageAutoSize,\n    imageAutoSizeContainerWidth,\n    enablePasteUpload,\n    isInputReadonly,\n    enableSelectOnboarding,\n    uikitChatInputButtonStatus,\n    onboardingSuggestionsShowMode,\n    eventCallback,\n    showBackground,\n    stopRespondOverrideWaiting,\n  } = props;\n\n  checkBotIdOrPresetBot(props);\n\n  localLog('render ChatAreaProvider');\n\n  const { initControllerRef, configs } = useCreateAndUpdateInitService(props);\n\n  const {\n    destroyFullSite,\n    storeSet,\n    reporter,\n    init,\n    lifeCycleService,\n    eventCenter,\n    loadMoreClient,\n    chatActionLockService,\n    refreshMessageList,\n  } = initControllerRef.current;\n\n  const waitMessagesLengthChangeLayoutEffect =\n    useListenMessagesLengthChangeLayoutEffect(\n      initControllerRef.current.storeSet?.useMessagesStore,\n    );\n\n  initControllerRef.current.loadMoreEnvTools.waitMessagesLengthChangeLayoutEffect =\n    waitMessagesLengthChangeLayoutEffect;\n\n  useImperativeHandle(ref, () => {\n    const method: ChatAreaProviderMethod = {\n      resetStateFullSite: destroyFullSite,\n      updateSenderInfo:\n        storeSet?.useSenderInfoStore.getState().updateBotInfoByImmer,\n      updateWaitingSenderId:\n        storeSet?.useSenderInfoStore.getState().updateWaitingSenderId,\n      refreshMessageList,\n    };\n    return method;\n  });\n\n  useAutoUpdateUserInfo({\n    userInfo,\n    storeSet,\n  });\n\n  useEffect(\n    () => () => {\n      initControllerRef.current?.destroy();\n    },\n    [],\n  );\n\n  /* TODO: Split the context */\n  return (\n    <NullableChatAreaContext.Provider\n      value={{\n        refreshMessageList,\n        reporter,\n        botId,\n        scene,\n        eventCallback,\n        configs,\n        manualInit: init,\n        lifeCycleService,\n        eventCenter,\n      }}\n    >\n      <StoreSetContext.Provider value={{ ...storeSet }}>\n        <ProviderPassThroughContext.Provider\n          value={{\n            enableMarkRead,\n            enableTwoWayLoad,\n            showUserExtendedInfo,\n            enableImageAutoSize,\n            imageAutoSizeContainerWidth,\n            enablePasteUpload,\n            isInputReadonly,\n            enableDragUpload,\n            enableSelectOnboarding,\n            uikitChatInputButtonStatus,\n            onboardingSuggestionsShowMode,\n            showBackground,\n            stopRespondOverrideWaiting,\n          }}\n        >\n          <LocalCacheContext.Provider\n            value={{\n              readLocalStoreValue: getReadLocalStoreValue(reporter),\n              writeLocalStoreValue: getWriteLocalStoreValue(reporter),\n            }}\n          >\n            <UploadControllerProvider>\n              <LoadMoreProvider loadMoreClient={loadMoreClient}>\n                <ChatActionLockContext.Provider value={chatActionLockService}>\n                  {children}\n                </ChatActionLockContext.Provider>\n              </LoadMoreProvider>\n            </UploadControllerProvider>\n          </LocalCacheContext.Provider>\n        </ProviderPassThroughContext.Provider>\n      </StoreSetContext.Provider>\n    </NullableChatAreaContext.Provider>\n  );\n});\n\nChatAreaProviderNew.displayName = 'ChatAreaProviderNew';\n\nconst checkBotIdOrPresetBot = (props: ChatAreaProviderProps) => {\n  if (props.botId || props.presetBot) {\n    return;\n  }\n  throw new Error('Either botId or presetBot must to be provided!');\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { forwardRef, type PropsWithChildren } from 'react';\n\nimport {\n  type ChatAreaProviderMethod,\n  type ChatAreaProviderProps,\n} from './type';\n/**\n * Delete the code after 1 week and keep it temporarily just in case.\n */\nimport { ChatAreaProviderNew } from './provider-new';\n\nexport const ChatAreaProvider = forwardRef<\n  ChatAreaProviderMethod,\n  PropsWithChildren<ChatAreaProviderProps>\n>((props, ref) => <ChatAreaProviderNew {...props} ref={ref} />);\n\nChatAreaProvider.displayName = 'ChatAreaProvider';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isValidContext } from '../../utils/is-valid-context';\nimport {\n  useChatAreaContext,\n  useChatAreaStoreSet,\n} from './use-chat-area-context';\n\nexport const useChatArea = () => {\n  const chatAreaContext = useChatAreaContext();\n  const { useOnboardingStore, useSectionIdStore } = useChatAreaStoreSet();\n\n  if (!isValidContext(chatAreaContext)) {\n    throw new Error('chatAreaContext is not valid');\n  }\n\n  const { refreshMessageList, reporter } = chatAreaContext;\n\n  const {\n    partialUpdateOnboardingData,\n    updatePrologue,\n    immerUpdateSuggestionById,\n    immerAddSuggestion,\n    immerDeleteSuggestionById,\n    setSuggestionList,\n    recordBotInfo,\n  } = useOnboardingStore.getState();\n\n  const getOnboardingContent = () => {\n    const { prologue, suggestions } = useOnboardingStore.getState();\n    return { prologue, suggestions };\n  };\n\n  return {\n    partialUpdateOnboardingData,\n    updatePrologue,\n    immerAddSuggestion,\n    immerUpdateSuggestionById,\n    immerDeleteSuggestionById,\n    getOnboardingContent,\n    refreshMessageList,\n    setOnboardingSuggestionList: setSuggestionList,\n    reporter,\n    recordBotInfo,\n    getLatestSectionId: () => useSectionIdStore.getState().latestSectionId,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useShallow } from 'zustand/react/shallow';\n\nimport { useChatAreaStoreSet } from '../context/use-chat-area-context';\n\nexport const useBotInfo = () => {\n  const { useSenderInfoStore } = useChatAreaStoreSet();\n\n  return useSenderInfoStore(\n    useShallow(state => ({\n      getBotInfo: state.getBotInfo,\n      updateBotInfo: state.updateBotInfo,\n      setSenderInfoBatch: state.setSenderInfoBatch,\n    })),\n  );\n};\n\nexport const useBotInfoWithSenderId = (senderId?: string) => {\n  const { useSenderInfoStore } = useChatAreaStoreSet();\n  const { botInfo } = useSenderInfoStore(\n    useShallow(state => ({\n      botInfo: senderId ? state.getBotInfo(senderId) : undefined,\n    })),\n  );\n\n  return botInfo;\n};\n\n/**\n * Return action, stable reference\n */\nexport const useSetBotInfoBatch = () => {\n  const { useSenderInfoStore } = useChatAreaStoreSet();\n\n  return useSenderInfoStore(state => state.setSenderInfoBatch);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isUndefined } from 'lodash-es';\n\nimport { useUnselectAll } from '../public/use-unselect-all';\nimport { useSelectOnboarding } from '../public/use-select-onboarding';\nimport { useClearHistory } from '../messages/use-clear-history';\nimport { useChatAreaStoreSet } from '../context/use-chat-area-context';\nimport { proxyFreeze } from '../../utils/proxy-freeze';\nimport { type Message } from '../../store/types';\nimport { usePreference } from '../../context/preference';\n\nexport interface ChatAreaController {\n  useUpdateMessages: (\n    fixMessageCallback: (message: Message, nowSectionId: string) => Message,\n  ) => (message: Message[]) => void;\n  clearHistory: () => void;\n  selectAll: () => void;\n  unselectAll: () => void;\n}\n\nexport const useChatAreaController = () => {\n  const { useMessagesStore, useSelectionStore, useOnboardingStore } =\n    useChatAreaStoreSet();\n\n  const { updateReplyIdList, onboardingIdList } = useSelectionStore(state => ({\n    updateReplyIdList: state.updateReplyIdList,\n    onboardingIdList: state.onboardingIdList,\n  }));\n  const { enableSelectOnboarding } = usePreference();\n  const unselectAll = useUnselectAll();\n  const selectOnboarding = useSelectOnboarding();\n  const prologue = useOnboardingStore(state => state.prologue);\n\n  const builtinClearHistory = useClearHistory();\n\n  const clearHistory = async () => {\n    unselectAll();\n    await builtinClearHistory();\n  };\n\n  const selectAll = (params?: {\n    maxLength: number;\n    direction: 'forward' | 'backward';\n  }) => {\n    const { maxLength, direction } = params ?? {};\n\n    const selectableMessageGroupList = useMessagesStore\n      .getState()\n      .messageGroupList.filter(messageGroup => messageGroup.selectable);\n\n    const replyIdList = selectableMessageGroupList\n      // TODO: You need to confirm that the groupId before the ack is not a replyId.\n      .map(messageGroup => messageGroup.groupId)\n      .filter((id): id is string => Boolean(id));\n\n    if (isUndefined(maxLength) || !direction) {\n      updateReplyIdList(replyIdList);\n      return;\n    }\n\n    const slicedReplyIdList = (\n      direction === 'backward' ? replyIdList : replyIdList.reverse()\n    ).slice(0, maxLength);\n    updateReplyIdList(slicedReplyIdList);\n\n    const firstOnboardingId = onboardingIdList.at(0);\n\n    if (enableSelectOnboarding) {\n      selectOnboarding({\n        selectedId: firstOnboardingId ?? null,\n        onboarding: {\n          prologue,\n        },\n      });\n    }\n  };\n\n  const getMessageList = () =>\n    proxyFreeze(useMessagesStore.getState().messages);\n\n  return {\n    clearHistory,\n    selectAll,\n    unselectAll,\n    getMessageList,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useShallow } from 'zustand/react/shallow';\n\nimport { useChatAreaStoreSet } from '../context/use-chat-area-context';\n\nexport const useLatestSectionMessage = () => {\n  const { useMessagesStore, useSectionIdStore } = useChatAreaStoreSet();\n\n  const latestSectionId = useSectionIdStore(state => state.latestSectionId);\n\n  const latestSectionMessageLength = useMessagesStore(\n    useShallow(\n      state =>\n        state.messages.filter(msg => msg.section_id === latestSectionId).length,\n    ),\n  );\n\n  return {\n    latestSectionMessageLength,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type PluginKey } from '@coze-common/chat-core';\n\nimport { useChatCore } from '../context/use-chat-core';\n\nexport const useGetRegisteredPlugin = () => {\n  const chatCore = useChatCore();\n  return (key: PluginKey) => chatCore.getRegisteredPlugin(key);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useShallow } from 'zustand/react/shallow';\n\nimport { type PluginName } from '../constants/plugin';\nimport { useChatAreaStoreSet } from '../../hooks/context/use-chat-area-context';\n\nexport const usePluginPublicMethods = <T = unknown>(pluginName: PluginName) => {\n  const { usePluginStore } = useChatAreaStoreSet();\n\n  const targetPlugin = usePluginStore(\n    useShallow(state =>\n      state.pluginInstanceList.find(plugin => plugin.pluginName === pluginName),\n    ),\n  );\n\n  if (!targetPlugin) {\n    return null;\n  }\n\n  return targetPlugin.publicMethods as T;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type ReadonlyChatAreaPlugin,\n  type WriteableChatAreaPlugin,\n} from '../plugin-class/plugin';\nimport { PluginMode } from '../constants/plugin';\nimport { type ReadonlyLifeCycleServicesAddition } from '../../store/plugins';\n\nexport const isReadonlyPlugin = <T = unknown, K = unknown>(\n  pluginInstance: ReadonlyChatAreaPlugin<T, K> | WriteableChatAreaPlugin<T, K>,\n): pluginInstance is ReadonlyChatAreaPlugin<T, K> &\n  ReadonlyLifeCycleServicesAddition<T, K> =>\n  pluginInstance.pluginMode === PluginMode.Readonly;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useShallow } from 'zustand/react/shallow';\n\nimport { isWriteablePlugin } from '../utils/is-writeable-plugin';\nimport { isReadonlyPlugin } from '../utils/is-readonly-plugin';\nimport { usePluginScopeContext } from '../context/plugin-scope-context';\nimport { type PluginName } from '../constants/plugin';\nimport { useChatAreaStoreSet } from '../../hooks/context/use-chat-area-context';\n\nexport const useWriteablePlugin = <T = unknown>(pluginName?: PluginName) => {\n  const { usePluginStore } = useChatAreaStoreSet();\n\n  const { pluginName: builtinPluginName } = usePluginScopeContext();\n\n  const targetPlugin = usePluginStore(\n    useShallow(state =>\n      state.pluginInstanceList.find(\n        plugin => plugin.pluginName === (pluginName ?? builtinPluginName),\n      ),\n    ),\n  );\n\n  if (!targetPlugin) {\n    throw Error('cannot find target plugin');\n  }\n\n  if (isWriteablePlugin<T>(targetPlugin)) {\n    return targetPlugin;\n  }\n\n  throw Error(\n    `cannot find target writeable plugin, please confirm ${pluginName} is writeable mode plugin`,\n  );\n};\n\nexport const useReadonlyPlugin = <T = unknown>(pluginName?: PluginName) => {\n  const { usePluginStore } = useChatAreaStoreSet();\n\n  const { pluginName: builtinPluginName } = usePluginScopeContext();\n\n  const targetPlugin = usePluginStore(\n    useShallow(state =>\n      state.pluginInstanceList.find(\n        plugin => plugin.pluginName === (pluginName ?? builtinPluginName),\n      ),\n    ),\n  );\n\n  if (!targetPlugin) {\n    throw Error('cannot find target plugin');\n  }\n\n  if (isReadonlyPlugin<T>(targetPlugin)) {\n    return targetPlugin;\n  }\n\n  throw Error(\n    `cannot find target readonly plugin, please confirm ${pluginName} is readonly mode plugin`,\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ChatAreaPlugin } from '../plugin';\nimport { type PluginMode } from '../../constants/plugin';\n\nexport abstract class LifeCycleService<\n  U extends PluginMode = PluginMode.Readonly,\n  T = unknown,\n  K = unknown,\n> {\n  public pluginInstance: ChatAreaPlugin<U, T, K>;\n\n  constructor(plugin: ChatAreaPlugin<U, T, K>) {\n    this.pluginInstance = plugin;\n  }\n}\n\nexport abstract class ReadonlyLifeCycleService<\n  T = unknown,\n  K = unknown,\n> extends LifeCycleService<PluginMode.Readonly, T, K> {}\n\nexport abstract class WriteableLifeCycleService<\n  T = unknown,\n  K = unknown,\n> extends LifeCycleService<PluginMode.Writeable, T, K> {}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type SdkMessageEvent,\n  type SdkPullingStatusEvent,\n} from '@coze-common/chat-core';\n\nimport {\n  type OnRefreshMessageListError,\n  type OnAfterCallback,\n  type OnAfterInitialContext,\n} from '../../types/plugin-class/app-life-cycle';\nimport {\n  ReadonlyLifeCycleService,\n  WriteableLifeCycleService,\n} from './life-cycle-service';\n\nexport interface OnBeforeListenChatCoreParam {\n  onMessageUpdate: (evt: SdkMessageEvent) => void;\n  onMessageStatusChange: (evt: SdkPullingStatusEvent) => void;\n}\n\ntype OnBeforeListenChatCore = (\n  ctx: OnBeforeListenChatCoreParam,\n) => { abortListen: boolean } | undefined;\n\n/**\n * ! Hope you noticed that the context information for the lifecycle is placed in ctx\n * ! If the judgment is just context, please pay attention to the convergence into ctx and do not add new parameters\n * ! Please pay attention here when CodeReview.\n */\nexport abstract class ReadonlyAppLifeCycleService<\n  T = unknown,\n  K = unknown,\n> extends ReadonlyLifeCycleService<T, K> {\n  /**\n   * After PluginStore initialization\n   * If you need support in the future, write it as void | Promise < void >\n   */\n  onAfterCreateStores?(stores: OnAfterCallback): void;\n  /**\n   * Before ChatArea is initialized (asynchronous calls are temporarily not supported, in Hooks)\n   * If you need support in the future, write it as void | Promise < void >\n   */\n  onBeforeInitial?(): void;\n  /**\n   * After the ChatArea is initialized (successfully) (asynchronous calls are temporarily not supported, in Hooks)\n   * If you need support in the future, write it as void | Promise < void >\n   */\n  onAfterInitial?(ctx: OnAfterInitialContext): void;\n  /**\n   * ChatArea initialization failed (asynchronous calls are temporarily not supported, in Hooks)\n   * If you need support in the future, write it as void | Promise < void >\n   */\n  onInitialError?(): void;\n  /**\n   * Before ChatArea is destroyed (asynchronous calls are temporarily not supported, in Hooks)\n   * If you need support in the future, write it as void | Promise < void >\n   */\n  onBeforeDestroy?(): void;\n  /**\n   * Before refreshing the message list\n   */\n  onBeforeRefreshMessageList?(): void;\n  /**\n   * After refreshing the message list\n   */\n  onAfterRefreshMessageList?(): void;\n  /**\n   * Failed to refresh message list\n   */\n  onRefreshMessageListError?(ctx: OnRefreshMessageListError): void;\n  onBeforeListenChatCore?: OnBeforeListenChatCore;\n}\n\nexport abstract class WriteableAppLifeCycleService<\n  T = unknown,\n  K = unknown,\n> extends WriteableLifeCycleService<T, K> {\n  /**\n   * After PluginStore initialization\n   * If you need support in the future, write it as void | Promise < void >\n   */\n  onAfterCreateStores?(stores: OnAfterCallback): void;\n  /**\n   * Before ChatArea is initialized (asynchronous calls are temporarily not supported, in Hooks)\n   * If you need support in the future, write it as void | Promise < void >\n   */\n  onBeforeInitial?(): void;\n  /**\n   * After the ChatArea is initialized (successfully) (asynchronous calls are temporarily not supported, in Hooks)\n   * If you need support in the future, write it as void | Promise < void >\n   */\n  onAfterInitial?(ctx: OnAfterInitialContext): void;\n  /**\n   * ChatArea initialization failed (asynchronous calls are temporarily not supported, in Hooks)\n   * If you need support in the future, write it as void | Promise < void >\n   */\n  onInitialError?(): void;\n  /**\n   * Before ChatArea is destroyed (asynchronous calls are temporarily not supported, in Hooks)\n   * If you need support in the future, write it as void | Promise < void >\n   */\n  onBeforeDestroy?(): void;\n  /**\n   * Before refreshing the message list\n   */\n  onBeforeRefreshMessageList?(): void;\n  /**\n   * After refreshing the message list\n   */\n  onAfterRefreshMessageList?(): void;\n  /**\n   * Failed to refresh message list\n   */\n  onRefreshMessageListError?(ctx: OnRefreshMessageListError): void;\n  onBeforeListenChatCore?: OnBeforeListenChatCore;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type OnBeforeReceiveMessageContext,\n  type OnBeforeProcessReceiveMessageContext,\n  type OnBeforeMessageGroupListUpdateContext,\n  type OnAfterSendMessageContext,\n  type OnBeforeSendMessageContext,\n  type OnBeforeDeleteMessageContext,\n  type OnAfterProcessReceiveMessageContext,\n  type OnAfterDeleteMessageContext,\n  type OnDeleteMessageErrorContext,\n  type OnBeforeGetMessageHistoryListContext,\n  type OnBeforeAppendSenderMessageIntoStore,\n  type OnAfterAppendSenderMessageIntoStore,\n  type OnBeforeDistributeMessageIntoMemberSetContent,\n  type OnMessagePullingErrorContext,\n  type OnMessagePullingSuccessContext,\n  type OnSendMessageErrorContext,\n} from '../../types/plugin-class/message-life-cycle';\nimport {\n  ReadonlyLifeCycleService,\n  WriteableLifeCycleService,\n} from './life-cycle-service';\n\n/**\n * ! Hope you noticed that the context information for the lifecycle is placed in ctx\n * ! If the judgment is just context, please pay attention to the convergence into ctx and do not add new parameters\n * ! Please pay attention here when CodeReview.\n */\nexport abstract class ReadonlyMessageLifeCycleService<\n  T = unknown,\n  K = unknown,\n> extends ReadonlyLifeCycleService<T, K> {\n  /**\n   * Before sending a message\n   */\n  onBeforeSendMessage?(ctx: OnBeforeSendMessageContext): Promise<void> | void;\n  /**\n   * After sending the message\n   */\n  onAfterSendMessage?(ctx: OnAfterSendMessageContext): Promise<void> | void;\n  /**\n   * Failed to send message\n   */\n  onSendMessageError?(ctx: OnSendMessageErrorContext): Promise<void> | void;\n  /**\n   * When processing a message, before starting processing (before message filtering)\n   */\n  onBeforeReceiveMessage?(ctx: OnBeforeReceiveMessageContext): void;\n  /**\n   * When processing a message, before starting processing\n   */\n  onBeforeProcessReceiveMessage?(\n    ctx: OnBeforeProcessReceiveMessageContext,\n  ): void;\n  /**\n   * Processing message groups\n   */\n  onBeforeMessageGroupListUpdate?(\n    ctx: OnBeforeMessageGroupListUpdateContext,\n  ): void;\n  /**\n   * When receiving the message after processing\n   */\n  onAfterProcessReceiveMessage?(ctx: OnAfterProcessReceiveMessageContext): void;\n  /**\n   * Before deleting the message\n   */\n  onBeforeDeleteMessage?(\n    ctx: OnBeforeDeleteMessageContext,\n  ): Promise<void> | void;\n  /**\n   * After deleting the message\n   */\n  onAfterDeleteMessage?(ctx: OnAfterDeleteMessageContext): Promise<void> | void;\n  /**\n   * Failed to delete message\n   */\n  onDeleteMessageError?(ctx: OnDeleteMessageErrorContext): Promise<void> | void;\n  /**\n   * Before getting chat history\n   */\n  onBeforeGetMessageHistoryList?(\n    ctx: OnBeforeGetMessageHistoryListContext,\n  ): Promise<void> | void;\n  /**\n   * Before the sender message enters the Store (before the fake message is displayed on the screen)\n   */\n  onBeforeAppendSenderMessageIntoStore?(\n    ctx: OnBeforeAppendSenderMessageIntoStore,\n  ): Promise<void> | void;\n  /**\n   * After the sender message enters the Store (after the fake message is uploaded to the screen)\n   */\n  onAfterAppendSenderMessageIntoStore?(\n    ctx: OnAfterAppendSenderMessageIntoStore,\n  ): Promise<void> | void;\n  /**\n   * MemberSet classification\n   */\n  onBeforeDistributeMessageIntoMemberSet?(\n    ctx: OnBeforeDistributeMessageIntoMemberSetContent,\n  ): void;\n  /**\n   * Message pull status error\n   */\n  onMessagePullingError?(ctx: OnMessagePullingErrorContext): void;\n  /**\n   * Message pull flow status successful\n   */\n  onMessagePullingSuccess?(ctx: OnMessagePullingSuccessContext): void;\n}\n\nexport abstract class WriteableMessageLifeCycleService<\n  T = unknown,\n  K = unknown,\n> extends WriteableLifeCycleService<T, K> {\n  /**\n   * Before sending a message\n   */\n  onBeforeSendMessage?(\n    ctx: OnBeforeSendMessageContext,\n  ): Promise<OnBeforeSendMessageContext> | OnBeforeSendMessageContext;\n  /**\n   * After sending the message\n   */\n  onAfterSendMessage?(ctx: OnAfterSendMessageContext): Promise<void> | void;\n  /**\n   * Failed to send message\n   */\n  onSendMessageError?(ctx: OnSendMessageErrorContext): Promise<void> | void;\n  /**\n   * When processing a message, before starting processing (before message filtering)\n   */\n  onBeforeReceiveMessage?(ctx: OnBeforeReceiveMessageContext): void;\n  /**\n   * When processing a message, before starting processing\n   */\n  onBeforeProcessReceiveMessage?(\n    ctx: OnBeforeProcessReceiveMessageContext,\n  ): OnBeforeProcessReceiveMessageContext;\n  /**\n   * Process message groups and update data\n   */\n  onBeforeMessageGroupListUpdate?(\n    ctx: OnBeforeMessageGroupListUpdateContext,\n  ): OnBeforeMessageGroupListUpdateContext;\n  /**\n   * When receiving the message after processing\n   */\n  onAfterProcessReceiveMessage?(ctx: OnAfterProcessReceiveMessageContext): void;\n  /**\n   * Before deleting the message\n   */\n  onBeforeDeleteMessage?(\n    ctx: OnBeforeDeleteMessageContext,\n  ): Promise<void> | void;\n  /**\n   * After deleting the message\n   */\n  onAfterDeleteMessage?(ctx: OnAfterDeleteMessageContext): Promise<void> | void;\n  /**\n   * Failed to delete message\n   */\n  onDeleteMessageError?(ctx: OnDeleteMessageErrorContext): Promise<void> | void;\n  /**\n   * Before getting chat history\n   */\n  onBeforeGetMessageHistoryList?(\n    ctx: OnBeforeGetMessageHistoryListContext,\n  ):\n    | Promise<OnBeforeGetMessageHistoryListContext>\n    | OnBeforeGetMessageHistoryListContext;\n  /**\n   * Before the sender message enters the Store (before the fake message is displayed on the screen)\n   * @param ctx\n   */\n  onBeforeAppendSenderMessageIntoStore?(\n    ctx: OnBeforeAppendSenderMessageIntoStore,\n  ):\n    | Promise<OnBeforeAppendSenderMessageIntoStore>\n    | OnBeforeAppendSenderMessageIntoStore;\n  /**\n   * After the sender message enters the Store (after the fake message is uploaded to the screen)\n   */\n  onAfterAppendSenderMessageIntoStore?(\n    ctx: OnAfterAppendSenderMessageIntoStore,\n  ): Promise<void> | void;\n  /**\n   * MemberSet classification\n   */\n  onBeforeDistributeMessageIntoMemberSet?(\n    ctx: OnBeforeDistributeMessageIntoMemberSetContent,\n  ): OnBeforeDistributeMessageIntoMemberSetContent;\n  /**\n   * Message pull status error\n   */\n  onMessagePullingError?(ctx: OnMessagePullingErrorContext): void;\n  /**\n   * Message pull flow status successful\n   */\n  onMessagePullingSuccess?(ctx: OnMessagePullingSuccessContext): void;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type OnOnboardingSelectChangeContext,\n  type OnBeforeClearContextContext,\n  type OnSelectionChangeContext,\n  type OnImageClickContext,\n  type OnStopRespondingErrorContext,\n  type OnInputPasteContext,\n  type OnLinkElementContext,\n  type OnImageElementContext,\n  type OnAfterStopRespondingContext,\n  type OnMessageLinkClickContext,\n} from '../../types/plugin-class/command-life-cycle';\nimport {\n  ReadonlyLifeCycleService,\n  WriteableLifeCycleService,\n} from './life-cycle-service';\n\n/**\n * ! Hope you noticed that the context information for the lifecycle is placed in ctx\n * ! If the judgment is just context, please pay attention to the convergence into ctx and do not add new parameters\n * ! Please pay attention here when CodeReview.\n */\nexport abstract class ReadonlyCommandLifeCycleService<\n  T = unknown,\n  K = unknown,\n> extends ReadonlyLifeCycleService<T, K> {\n  /**\n   * Before clearing chat history\n   */\n  onBeforeClearHistory?(): Promise<void> | void;\n  /**\n   * After clearing the chat history\n   */\n  onAfterClearHistory?(): Promise<void> | void;\n  /**\n   * Before clearing the context\n   */\n  onBeforeClearContext?(ctx: OnBeforeClearContextContext): Promise<void> | void;\n  /**\n   * After clearing the context\n   */\n  onAfterClearContext?(): Promise<void> | void;\n  /**\n   * Failed to clear context\n   */\n  onClearContextError?(): Promise<void> | void;\n  /**\n   * Before stopping responding\n   */\n  onBeforeStopResponding?(): Promise<void> | void;\n  /**\n   * After stopping responding\n   */\n  onAfterStopResponding?(): Promise<void> | void;\n  /**\n   * Stop response failed\n   */\n  onStopRespondingError?(\n    ctx: OnStopRespondingErrorContext,\n  ): Promise<void> | void;\n  /**\n   * Opening remarks Selected events\n   */\n  onOnboardingSelectChange?(\n    ctx: OnOnboardingSelectChangeContext,\n  ): Promise<void> | void;\n  /**\n   * Input click event\n   */\n  onInputClick?(): Promise<void> | void;\n  /**\n   * Selection store data changes\n   */\n  onSelectionChange?(ctx: OnSelectionChangeContext): Promise<void> | void;\n  /**\n   * image click event\n   */\n  onImageClick?(ctx: OnImageClickContext): Promise<void> | void;\n  /**\n   * Text box paste event\n   */\n  onInputPaste?(ctx: OnInputPasteContext): Promise<void> | void;\n  /**\n   * rolling event handling\n   */\n  onViewScroll?(): void;\n  /**\n   * The link of the card type is moved by mouse (including pictures). According to the meaning of the CardBuilder developers, this will be reused in the future as long as it is a similar scene.\n   */\n  onCardLinkElementMouseEnter?(ctx: OnLinkElementContext): void;\n  /**\n   * The link of the card type is moved out with the mouse (including pictures). According to the meaning of the CardBuilder developers, this will be reused in the future as long as it is a similar scene.\n   */\n  onCardLinkElementMouseLeave?(ctx: OnLinkElementContext): void;\n  /**\n   * MdBox type image mouse in\n   */\n  onMdBoxImageElementMouseEnter?(ctx: OnImageElementContext): void;\n  /**\n   * MdBox type image mouse out\n   */\n  onMdBoxImageElementMouseLeave?(ctx: OnImageElementContext): void;\n  /**\n   * MdBox Type Link Mouse In\n   */\n  onMdBoxLinkElementMouseEnter?(ctx: OnLinkElementContext): void;\n  /**\n   * MdBox type Link mouse out\n   */\n  onMdBoxLinkElementMouseLeave?(ctx: OnLinkElementContext): void;\n  /**\n   * Link Click\n   */\n  onMessageLinkClick?(ctx: Omit<OnMessageLinkClickContext, 'event'>): void;\n}\n\nexport abstract class WriteableCommandLifeCycleService<\n  T = unknown,\n  K = unknown,\n> extends WriteableLifeCycleService<T, K> {\n  /**\n   * Before clearing chat history\n   */\n  onBeforeClearHistory?(): Promise<void> | void;\n  /**\n   * After clearing the chat history\n   */\n  onAfterClearHistory?(): Promise<void> | void;\n  /**\n   * Before clearing the context\n   */\n  onBeforeClearContext?(\n    ctx: OnBeforeClearContextContext,\n  ): Promise<OnBeforeClearContextContext> | OnBeforeClearContextContext;\n  /**\n   * After clearing the context\n   */\n  onAfterClearContext?(): Promise<void> | void;\n  /**\n   * Failed to clear context\n   */\n  onClearContextError?(): Promise<void> | void;\n  /**\n   * Before stopping responding\n   */\n  onBeforeStopResponding?(): Promise<void> | void;\n  /**\n   * After stopping responding\n   */\n  onAfterStopResponding?(\n    ctx: OnAfterStopRespondingContext,\n  ): Promise<void> | void;\n  /**\n   * Stop response failed\n   */\n  onStopRespondingError?(\n    ctx: OnStopRespondingErrorContext,\n  ): Promise<void> | void;\n  /**\n   * Opening remarks Selected events\n   */\n  onOnboardingSelectChange?(\n    ctx: OnOnboardingSelectChangeContext,\n  ): Promise<void> | void;\n  /**\n   * Input click event\n   */\n  onInputClick?(): Promise<void> | void;\n  /**\n   * Selection store data changes\n   */\n  onSelectionChange?(ctx: OnSelectionChangeContext): Promise<void> | void;\n  /**\n   * image click event\n   */\n  onImageClick?(ctx: OnImageClickContext): Promise<void> | void;\n  /**\n   * Text box paste event\n   */\n  onInputPaste?(ctx: OnInputPasteContext): Promise<void> | void;\n  /**\n   * rolling event handling\n   */\n  onViewScroll?(): void;\n  /**\n   * The link of the card type is moved by mouse (including pictures). According to the meaning of the CardBuilder developers, this will be reused in the future as long as it is a similar scene.\n   */\n  onCardLinkElementMouseEnter?(ctx: OnLinkElementContext): void;\n  /**\n   * The link of the card type is moved out with the mouse (including pictures). According to the meaning of the CardBuilder developers, this will be reused in the future as long as it is a similar scene.\n   */\n  onCardLinkElementMouseLeave?(ctx: OnLinkElementContext): void;\n  /**\n   * MdBox type image mouse in\n   */\n  onMdBoxImageElementMouseEnter?(ctx: OnImageElementContext): void;\n  /**\n   * MdBox type image mouse out\n   */\n  onMdBoxImageElementMouseLeave?(ctx: OnImageElementContext): void;\n  /**\n   * MdBox Type Link Mouse In\n   */\n  onMdBoxLinkElementMouseEnter?(ctx: OnLinkElementContext): void;\n  /**\n   * MdBox type Link mouse out\n   */\n  onMdBoxLinkElementMouseLeave?(ctx: OnLinkElementContext): void;\n  /**\n   * Link Click\n   */\n  onMessageLinkClick?(ctx: OnMessageLinkClickContext): void;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type CustomComponent } from '../../types/plugin-component';\nimport { type ChatAreaPluginContext } from '../../types/plugin-class/chat-area-plugin-context';\nimport { PluginMode, type PluginName } from '../../constants/plugin';\n\nexport abstract class ChatAreaPlugin<\n  U extends PluginMode = PluginMode.Readonly,\n  T = unknown,\n  K = unknown,\n> {\n  /**\n   * Business Context Information Owned by Business Parties\n   */\n  public pluginBizContext: T;\n  /**\n   * plugin name\n   */\n  public abstract pluginName: PluginName;\n  /**\n   * plugin pattern\n   * @enum PluginMode. Readonly - Read Only\n   * @enum PluginMode. Writeable\n   */\n  public pluginMode: PluginMode = PluginMode.Readonly;\n  /**\n   * Context provided by ChatArea\n   */\n  public chatAreaPluginContext: ChatAreaPluginContext<U>;\n  /**\n   * custom component\n   */\n  public customComponents?: Partial<CustomComponent>;\n  constructor(\n    pluginBizContext: T,\n    chatAreaPluginContext: ChatAreaPluginContext<U>,\n  ) {\n    this.pluginBizContext = pluginBizContext;\n    this.chatAreaPluginContext = chatAreaPluginContext;\n  }\n  /**\n   * Business parties should not use: Inject ChatAreaContext information\n   */\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  public _injectChatAreaContext(\n    chatAreaPluginContext: ChatAreaPluginContext<U>,\n  ) {\n    if (this.chatAreaPluginContext) {\n      console.error('Repeat inject chat area context');\n      return;\n    }\n\n    this.chatAreaPluginContext = chatAreaPluginContext;\n  }\n\n  /**\n   * Public methods of exposure\n   */\n  public publicMethods?: K;\n}\n\nexport abstract class ReadonlyChatAreaPlugin<\n  T = unknown,\n  K = unknown,\n> extends ChatAreaPlugin<PluginMode.Readonly, T, K> {\n  // eslint-disable-next-line @typescript-eslint/no-useless-constructor -- pass-through required\n  constructor(\n    pluginBizContext: T,\n    chatAreaPluginContext: ChatAreaPluginContext<PluginMode.Readonly>,\n  ) {\n    super(pluginBizContext, chatAreaPluginContext);\n  }\n}\n\nexport abstract class WriteableChatAreaPlugin<\n  T = unknown,\n  K = unknown,\n> extends ChatAreaPlugin<PluginMode.Writeable, T, K> {\n  // eslint-disable-next-line @typescript-eslint/no-useless-constructor\n  constructor(\n    pluginBizContext: T,\n    chatAreaPluginContext: ChatAreaPluginContext<PluginMode.Writeable>,\n  ) {\n    super(pluginBizContext, chatAreaPluginContext);\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type OnTextContentRenderingContext,\n  type OnMessageBoxRenderContext,\n} from '../../types/plugin-class/render-life-cycle';\nimport {\n  ReadonlyLifeCycleService,\n  WriteableLifeCycleService,\n} from './life-cycle-service';\n\n/**\n * ! Hope you noticed that the context information for the lifecycle is placed in ctx\n * ! If the judgment is just context, please pay attention to the convergence into ctx and do not add new parameters\n * ! Please pay attention here when CodeReview.\n */\nexport abstract class ReadonlyRenderLifeCycleService<\n  T = unknown,\n  K = unknown,\n> extends ReadonlyLifeCycleService<T, K> {\n  onTextContentRendering?(\n    ctx: OnTextContentRenderingContext,\n  ): OnTextContentRenderingContext;\n  onMessageBoxRender?(\n    ctx: OnMessageBoxRenderContext,\n  ): OnMessageBoxRenderContext;\n}\n\nexport abstract class WriteableRenderLifeCycleService<\n  T = unknown,\n  K = unknown,\n> extends WriteableLifeCycleService<T, K> {\n  onTextContentRendering?(\n    ctx: OnTextContentRenderingContext,\n  ): OnTextContentRenderingContext;\n  onMessageBoxRender?(\n    ctx: OnMessageBoxRenderContext,\n  ): OnMessageBoxRenderContext;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { exhaustiveCheckForRecord } from '@coze-common/chat-area-utils';\n\nimport {\n  type ReadonlyLifeCycleServiceGenerator,\n  type WriteableLifeCycleServiceGenerator,\n} from '../types/utils/create-life-cycle-service';\nimport {\n  type ReadonlyLifeCycleServiceCollection,\n  type WriteableLifeCycleServiceCollection,\n} from '../types/plugin-class/life-cycle';\nimport {\n  type WriteableChatAreaPlugin,\n  type ReadonlyChatAreaPlugin,\n} from '../plugin-class/plugin';\n\n/**\n * To create a helper function for a writable lifecycle\n */\nexport const createWriteableLifeCycleServices = <T = unknown, K = unknown>(\n  plugin: WriteableChatAreaPlugin<T, K>,\n  generator: WriteableLifeCycleServiceGenerator<T, K>,\n): WriteableLifeCycleServiceCollection<T, K> => {\n  const lifeCycleService = generator(plugin);\n\n  // In order not to affect the historical logic, the return value filters out the pluginInstance property\n  bindPluginInstance<T, K>(\n    lifeCycleService as unknown as WriteableLifeCycleServiceCollection<T, K>,\n    plugin,\n  );\n\n  return lifeCycleService as unknown as WriteableLifeCycleServiceCollection<\n    T,\n    K\n  >;\n};\n\n/**\n * To create a helper function for a writable lifecycle\n */\nexport const createReadonlyLifeCycleServices = <T = unknown, K = unknown>(\n  plugin: ReadonlyChatAreaPlugin<T, K>,\n  generator: ReadonlyLifeCycleServiceGenerator<T, K>,\n): ReadonlyLifeCycleServiceCollection<T, K> => {\n  const lifeCycleService = generator(plugin);\n\n  // In order not to affect the historical logic, the return value filters out the pluginInstance property\n  bindPluginInstance<T, K>(\n    lifeCycleService as unknown as ReadonlyLifeCycleServiceCollection<T, K>,\n    plugin,\n  );\n\n  return lifeCycleService as unknown as ReadonlyLifeCycleServiceCollection<\n    T,\n    K\n  >;\n};\n\n/**\n * For adaptation of historical logic, support for continued access to data through pluginInstance\n */\nconst bindPluginInstance = <T = unknown, K = unknown>(\n  lifeCycleService:\n    | ReadonlyLifeCycleServiceCollection<T, K, false>\n    | WriteableLifeCycleServiceCollection<T, K, false>,\n  plugin: ReadonlyChatAreaPlugin<T, K> | WriteableChatAreaPlugin<T, K>,\n) => {\n  const {\n    appLifeCycleService,\n    messageLifeCycleService,\n    commandLifeCycleService,\n    renderLifeCycleService,\n    ...rest\n  } = lifeCycleService;\n  exhaustiveCheckForRecord(rest);\n\n  if (appLifeCycleService) {\n    appLifeCycleService.pluginInstance = plugin;\n  }\n\n  if (messageLifeCycleService) {\n    messageLifeCycleService.pluginInstance = plugin;\n  }\n\n  if (commandLifeCycleService) {\n    commandLifeCycleService.pluginInstance = plugin;\n  }\n\n  if (renderLifeCycleService) {\n    renderLifeCycleService.pluginInstance = plugin;\n  }\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type CustomComponent } from '../types/plugin-component';\n\n/**\n * Create a custom component helper function\n */\nexport const createCustomComponents = (\n  customComponents: Partial<CustomComponent>,\n) => customComponents;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useChatAreaStoreSet } from '../context/use-chat-area-context';\n\nexport const useLatestSectionId = () => {\n  const { useSectionIdStore } = useChatAreaStoreSet();\n\n  const latestSectionId = useSectionIdStore(state => state.latestSectionId);\n\n  return latestSectionId;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useChatAreaStoreSet } from '../context/use-chat-area-context';\nimport { getIsAnswerActionLockMap } from '../../service/chat-action-lock/helper/action-lock-map';\n\nexport const useIsDeleteMessageLock = (groupId: string) => {\n  const { useChatActionStore } = useChatAreaStoreSet();\n  const isSendMessageLock = useChatActionStore(state =>\n    getIsAnswerActionLockMap.deleteMessageGroup(\n      groupId,\n      state.answerActionLockMap,\n      state.globalActionLock,\n    ),\n  );\n  return isSendMessageLock;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { createContext, useContext } from 'react';\nimport { type PropsWithChildren } from 'react';\n\nimport { type PluginName } from '../constants/plugin-name';\n\ninterface PluginScopeContextProps {\n  pluginName?: PluginName;\n}\n\nconst PluginScopeContext = createContext<PluginScopeContextProps>({});\n\nexport const usePluginScopeContext = () => useContext(PluginScopeContext);\n\nexport const PluginScopeContextProvider: React.FC<\n  PropsWithChildren<PluginScopeContextProps>\n> = ({ children, ...props }) => (\n  <PluginScopeContext.Provider value={props}>\n    {children}\n  </PluginScopeContext.Provider>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useShallow } from 'zustand/react/shallow';\n\nimport { useChatAreaStoreSet } from '../../hooks/context/use-chat-area-context';\n\nexport const usePluginList = () => {\n  const { usePluginStore } = useChatAreaStoreSet();\n\n  const pluginList = usePluginStore(\n    useShallow(state => state.pluginInstanceList),\n  );\n\n  return pluginList;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type CustomComponent } from '../types/plugin-component';\nimport { type PluginName } from '../constants/plugin-name';\nimport { usePluginList } from './use-plugin-list';\n\ninterface ComponentConfig<K extends keyof CustomComponent> {\n  pluginName: PluginName;\n  // eslint-disable-next-line @typescript-eslint/naming-convention -- as expected\n  Component: CustomComponent[K];\n}\n\nexport const usePluginCustomComponents = <K extends keyof CustomComponent>(\n  componentKey: K,\n) => {\n  const pluginList = usePluginList();\n  const pluginComponentsList = pluginList\n    .map(_plugin => ({\n      pluginName: _plugin.pluginName,\n      Component: _plugin.customComponents?.[componentKey],\n    }))\n    .filter((componentConfig): componentConfig is ComponentConfig<K> =>\n      Boolean(componentConfig.Component),\n    );\n\n  return pluginComponentsList;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport enum ReportEventNames {\n  ClearHistory = 'chat_area_clear_history',\n  ClearContext = 'chat_area_clear_context',\n  BreakMessage = 'chat_area_break_message',\n  BreakMessageAccurately = 'chat_area_break_message_accurately',\n  Init = 'chat_area_init',\n  GetMessageList = 'chat_area_get_message_list',\n  SendMessage = 'chat_area_send_message',\n  DeleteMessage = 'chat_area_delete_message',\n  TriggerEvent = 'chat_area_trigger_event',\n  UpdateSenderInfoByHistoryFail = 'chat_area_update_sender_info_by_history_fail',\n  NonHistoricalMessageWithoutLocalId = 'non_historical_message_without_local_id',\n  MarkMessageRead = 'chat_area_mark_message_read',\n  LoadSilently = 'chat_area_load_silently',\n  LoadEagerly = 'chat_area_load_eagerly',\n  LoadMoreConsumeMessageIndexChange = 'chat_area_load_more_consume_message_index_change',\n  LoadMoreResetIndexStoreOnClearHistory = 'chat_area_load_more_reset_index_store_on_clear_history',\n  LoadMoreOnMessageUnexpectedIndexChange = 'chat_area_load_more_on_message_unexpected_index_change',\n  GetHooksMessageHeaderConfig = 'get_hooks_message_header_config',\n  MessageUnitRoleHooksError = 'message_unit_role_hooks_error',\n}\n\nexport enum ReportErrorEventNames {\n  OldChatMessageImageStructNotImageObjectError = 'chat_area_old_chat_message_image_struct_not_image_object_error',\n  LoadByScrollPrevFail = 'chat_area_load_by_scroll_prev_fail',\n  LoadByScrollNextFail = 'chat_area_load_by_scroll_next_fail',\n  MarkMessageReadFail = 'chat_area_mark_message_read_fail',\n  LoadSilentlyFail = 'chat_area_load_silently_fail',\n  LoadEagerlyFail = 'chat_area_load_eagerly_fail',\n  RefreshMessageIndexFail = 'chat_area_refresh_message_index_fail',\n  LoadInitialGetUnreadMessageIdFail = 'chat_area_load_initial_get_unread_message_fail',\n  LoadInitialGetReadMessageFail = 'chat_area_load_initial_get_read_message_fail',\n  LoadMoreResetIndexStoreOnClearHistoryFail = 'chat_area_load_more_reset_index_store_on_clear_history_fail',\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type GetGlobalActionLockUpdateFn,\n  type GetIsGlobalActionLockFn,\n  type GetAnswerActionLockUpdateFn,\n  type GetAnswerActionUnLockUpdateFn,\n  type GetIsAnswerActionLockFn,\n} from '../type';\nimport {\n  type GlobalActionLockUpdateFn,\n  type AnswerActionType,\n  type GlobalActionType,\n  type AnswerActionLock,\n} from '../../../store/chat-action';\n\nconst getDefaultAnswerActionLock: () => AnswerActionLock = () => ({\n  deleteMessageGroup: null,\n  regenerate: null,\n});\n\nexport const globalActionLockUpdateFnMap: Record<\n  GlobalActionType,\n  GetGlobalActionLockUpdateFn<GlobalActionType>\n> = {\n  sendMessageToACK:\n    ({ timestamp, param }) =>\n    globalActionLock => {\n      globalActionLock.sendMessageToACK = {\n        timestamp,\n        messageUniqKey: param?.messageUniqKey ?? null,\n      };\n    },\n  clearContext:\n    ({ timestamp }) =>\n    globalActionLock => {\n      globalActionLock.clearContext = {\n        timestamp,\n      };\n    },\n  clearHistory:\n    ({ timestamp }) =>\n    globalActionLock => {\n      globalActionLock.clearHistory = {\n        timestamp,\n      };\n    },\n};\n\nexport const globalActionUnLockUpdateFnMap: Record<\n  GlobalActionType,\n  GlobalActionLockUpdateFn\n> = {\n  sendMessageToACK: globalLock => {\n    globalLock.sendMessageToACK = null;\n  },\n\n  clearContext: globalLock => {\n    globalLock.clearContext = null;\n  },\n  clearHistory: globalLock => {\n    globalLock.clearHistory = null;\n  },\n};\n\nexport const getIsGlobalActionLockMap: Record<\n  GlobalActionType,\n  GetIsGlobalActionLockFn\n> = {\n  sendMessageToACK: globalLock =>\n    Boolean(globalLock.sendMessageToACK) ||\n    Boolean(globalLock.clearHistory) ||\n    Boolean(globalLock.clearContext),\n\n  clearContext: globalLock =>\n    Boolean(globalLock.sendMessageToACK) ||\n    Boolean(globalLock.clearHistory) ||\n    Boolean(globalLock.clearContext),\n\n  clearHistory: globalLock =>\n    Boolean(globalLock.sendMessageToACK) ||\n    Boolean(globalLock.clearHistory) ||\n    Boolean(globalLock.clearContext),\n};\n\nexport const answerActionLockUpdateFnMap: Record<\n  AnswerActionType,\n  GetAnswerActionLockUpdateFn\n> = {\n  deleteMessageGroup:\n    (groupId, { timestamp }) =>\n    lockMap => {\n      const targetGroup = lockMap[groupId];\n      if (!targetGroup) {\n        lockMap[groupId] = {\n          ...getDefaultAnswerActionLock(),\n          deleteMessageGroup: { timestamp },\n        };\n        return;\n      }\n      targetGroup.deleteMessageGroup = { timestamp };\n    },\n  regenerate:\n    (groupId, { timestamp }) =>\n    lockMap => {\n      const targetGroup = lockMap[groupId];\n      if (!targetGroup) {\n        lockMap[groupId] = {\n          ...getDefaultAnswerActionLock(),\n          regenerate: { timestamp },\n        };\n        return;\n      }\n      targetGroup.regenerate = { timestamp };\n    },\n};\n\nexport const answerActionUnLockUpdateFnMap: Record<\n  AnswerActionType,\n  GetAnswerActionUnLockUpdateFn\n> = {\n  deleteMessageGroup: groupId => lockMap => {\n    const targetGroup = lockMap[groupId];\n    if (!targetGroup) {\n      return;\n    }\n    targetGroup.deleteMessageGroup = null;\n  },\n  regenerate: groupId => lockMap => {\n    const targetGroup = lockMap[groupId];\n    if (!targetGroup) {\n      return;\n    }\n    targetGroup.regenerate = null;\n  },\n};\n\nexport const getIsAnswerActionLockMap: Record<\n  AnswerActionType,\n  GetIsAnswerActionLockFn\n> = {\n  deleteMessageGroup: (groupId, lockMap, globalActionLock) =>\n    Boolean(lockMap[groupId]?.deleteMessageGroup) ||\n    globalActionLock.sendMessageToACK?.messageUniqKey === groupId,\n\n  regenerate: (groupId, lockMap, globalActionLock) =>\n    Boolean(lockMap[groupId]?.regenerate) ||\n    getIsGlobalActionLockMap.sendMessageToACK(globalActionLock),\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type Reporter } from '@coze-arch/logger';\n\nimport {\n  type AnswerActionType,\n  type ChatActionStoreAction,\n  type GlobalActionType,\n} from '../../store/chat-action';\nimport {\n  type ChatActionLockEnvValues,\n  type ChatActionLockServiceConstructor,\n  type GlobalLockParamsMap,\n} from './type';\nimport {\n  answerActionLockUpdateFnMap,\n  answerActionUnLockUpdateFnMap,\n  getIsAnswerActionLockMap,\n  getIsGlobalActionLockMap,\n  globalActionLockUpdateFnMap,\n  globalActionUnLockUpdateFnMap,\n} from './helper/action-lock-map';\n\nexport class ChatActionLockService {\n  private updateGlobalActionLockByImmer: ChatActionStoreAction['updateGlobalActionLockByImmer'];\n  private getGlobalActionLock: ChatActionStoreAction['getGlobalActionLock'];\n  private updateAnswerActionLockMapByImmer: ChatActionStoreAction['updateAnswerActionLockMapByImmer'];\n  private getAnswerActionLockMap: ChatActionStoreAction['getAnswerActionLockMap'];\n  private readEnvValues: () => ChatActionLockEnvValues;\n  private getIsEnableLock = () => this.readEnvValues().enableChatActionLock;\n  private reporter: Pick<Reporter, 'info'>;\n\n  constructor({\n    updateAnswerActionLockMapByImmer,\n    updateGlobalActionLockByImmer,\n    getAnswerActionLockMap,\n    getGlobalActionLock,\n    readEnvValues,\n    reporter,\n  }: ChatActionLockServiceConstructor) {\n    this.updateAnswerActionLockMapByImmer = updateAnswerActionLockMapByImmer;\n    this.updateGlobalActionLockByImmer = updateGlobalActionLockByImmer;\n    this.getAnswerActionLockMap = getAnswerActionLockMap;\n    this.getGlobalActionLock = getGlobalActionLock;\n    this.readEnvValues = readEnvValues;\n    this.reporter = reporter;\n  }\n\n  public globalAction = {\n    lock: <T extends GlobalActionType>(\n      action: T,\n      param: GlobalLockParamsMap[T],\n    ): number => {\n      const timestamp = Date.now();\n      if (!this.getIsEnableLock()) {\n        return timestamp;\n      }\n\n      const updateFn = globalActionLockUpdateFnMap[action]({\n        timestamp,\n        param,\n      });\n\n      this.updateGlobalActionLockByImmer(updateFn);\n      this.reporter.info({\n        message: `[chat-area] global action lock: ${action}`,\n      });\n      return timestamp;\n    },\n    unlock: (action: GlobalActionType): void => {\n      const updateFn = globalActionUnLockUpdateFnMap[action];\n      this.updateGlobalActionLockByImmer(updateFn);\n      this.reporter.info({\n        message: `[chat-area] global action unlock, action: ${action}`,\n      });\n    },\n\n    getIsLock: (action: GlobalActionType): boolean => {\n      const globalActionLock = this.getGlobalActionLock();\n      return getIsGlobalActionLockMap[action](globalActionLock);\n    },\n  };\n\n  public answerAction = {\n    lock: (groupId: string, action: AnswerActionType): number => {\n      const timestamp = Date.now();\n      if (!this.getIsEnableLock()) {\n        return timestamp;\n      }\n      const actionLockUpdateFn = answerActionLockUpdateFnMap[action](groupId, {\n        timestamp,\n      });\n\n      this.updateAnswerActionLockMapByImmer(actionLockUpdateFn);\n      this.reporter.info({\n        message: `[chat-area] answer action lock, action: ${action} groupId: ${groupId}`,\n      });\n      return timestamp;\n    },\n    unlock: (groupId: string, action: AnswerActionType): void => {\n      const actionLockUpdateFn = answerActionUnLockUpdateFnMap[action](groupId);\n      this.updateAnswerActionLockMapByImmer(actionLockUpdateFn);\n      this.reporter.info({\n        message: `[chat-area] answer action unlock, action: ${action} groupId: ${groupId}`,\n      });\n    },\n    getIsLock: (groupId: string, action: AnswerActionType): boolean => {\n      const globalActionLock = this.getGlobalActionLock();\n      const lockMap = this.getAnswerActionLockMap();\n      return getIsAnswerActionLockMap[action](\n        groupId,\n        lockMap,\n        globalActionLock,\n      );\n    },\n  };\n}\n\nexport const fallbackChatActionLockService = new ChatActionLockService({\n  updateGlobalActionLockByImmer: () => ({}),\n  getGlobalActionLock: () => ({\n    sendMessageToACK: null,\n    clearContext: null,\n    clearHistory: null,\n  }),\n  updateAnswerActionLockMapByImmer: () => ({}),\n  getAnswerActionLockMap: () => ({}),\n  readEnvValues: () => ({\n    enableChatActionLock: false,\n  }),\n  reporter: {\n    info: () => ({}),\n  },\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type Reporter } from '@coze-arch/logger';\nimport { type ChatMessage } from '@coze-arch/bot-api/developer_api';\n\nimport { getShouldDropMessage } from '../ignore-message';\nimport { type IgnoreMessageType } from '../../context/chat-area-context/type';\nimport { fixMessageStruct, markHistoryMessage } from './fix-message-struct';\n\nexport const fixHistoryMessageList = ({\n  historyMessageList,\n  ignoreMessageConfigList,\n  reporter,\n}: {\n  historyMessageList: ChatMessage[];\n  ignoreMessageConfigList: IgnoreMessageType[];\n  reporter: Reporter;\n}) =>\n  historyMessageList\n    .map(msg => fixMessageStruct(msg, reporter))\n    .filter(msg => !getShouldDropMessage(ignoreMessageConfigList, msg))\n    .map(markHistoryMessage);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { cloneDeep } from 'lodash-es';\nimport { type ContentType, type MessageContent } from '@coze-common/chat-core';\nimport { type Reporter } from '@coze-arch/logger';\n\nimport { getIsImageMessage } from '../../utils/message';\nimport { type Message } from '../../store/types';\nimport { ReportErrorEventNames } from '../../report-events/report-event-names';\n\n// There are problems with downstream dependencies, and it is not easy to modify this time, so cooperate with the server level to smooth the structure at the front end\nexport const fixImageMessage = (message: Message, reporter: Reporter) => {\n  if (!getIsImageMessage(message)) {\n    return message;\n  }\n\n  const fixedMessage = cloneDeep(message);\n\n  // Although I don't understand why this abnormal data is generated online, I still handle it with the bottom line.\n  if (!fixedMessage.content_obj) {\n    fixedMessage.content_obj = {\n      image_list: [\n        {\n          key: '',\n          image_ori: { url: '', width: 0, height: 0 },\n          image_thumb: { url: '', width: 0, height: 0 },\n        },\n      ],\n    };\n  }\n\n  if (!('image_list' in fixedMessage.content_obj)) {\n    fixedMessage.content_obj = {\n      image_list:\n        fixedMessage.content_obj as MessageContent<ContentType.Image>['image_list'],\n    };\n  }\n\n  if (fixedMessage.content_obj.image_list?.length) {\n    fixedMessage.content_obj.image_list?.forEach(img => {\n      if (!img.image_ori) {\n        img.image_ori = {\n          url: '',\n          width: 0,\n          height: 0,\n        };\n        reporter.errorEvent({\n          eventName:\n            ReportErrorEventNames.OldChatMessageImageStructNotImageObjectError,\n          error: new Error('image_ori not exist'),\n        });\n      }\n\n      if (!img.image_thumb) {\n        img.image_thumb = {\n          url: '',\n          width: 0,\n          height: 0,\n        };\n        reporter.errorEvent({\n          eventName:\n            ReportErrorEventNames.OldChatMessageImageStructNotImageObjectError,\n          error: new Error('image_thumb not exist'),\n        });\n      }\n\n      if (!img.image_thumb.url) {\n        img.image_thumb.url = img.image_ori.url;\n      }\n    });\n  }\n\n  fixedMessage.content = JSON.stringify(fixedMessage.content_obj);\n\n  return fixedMessage;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { merge } from 'lodash-es';\nimport { ContentType, messageSource } from '@coze-common/chat-core';\nimport { type Reporter } from '@coze-arch/logger';\nimport { type ChatMessage } from '@coze-arch/bot-api/developer_api';\n\nimport { safeJSONParse } from '../../utils/safe-json-parse';\nimport { modifyFileMessagePercentAndStatus } from '../../utils/modify-file-message-percent-and-status';\nimport { convertMessageSource, getIsFileMessage } from '../../utils/message';\nimport { FileStatus, type Message } from '../../store/types';\nimport { SERVER_MESSAGE_REPLY_ID_PLACEHOLDER_VALUES } from '../../constants/message';\nimport { fixImageMessage } from './fix-image-message';\n\n// The data returned by the backend interface is inconsistent with the core SDK\n// Smooth here\nexport const fixMessageStruct = (\n  message: ChatMessage,\n  reporter: Reporter,\n): Message => {\n  const defaultChatMessage: Message = {\n    role: 'assistant',\n    type: 'answer',\n    content: '',\n    reasoning_content: '',\n    content_type: ContentType.Text,\n    message_id: '',\n    reply_id: '',\n    section_id: '',\n    // todo: fixme\n    // @ts-expect-error fixme\n    extra_info: {\n      local_message_id: '',\n      input_tokens: '',\n      output_tokens: '',\n      token: '',\n      plugin_status: '',\n      time_cost: '',\n      workflow_tokens: '',\n      bot_state: '',\n      plugin_request: '',\n      tool_name: '',\n      plugin: '',\n    },\n    /** Normal, interrupted state, used when pulling the message list, this field is not available when chat is running. */\n    /** interrupt position */\n    broken_pos: 9999999,\n    sender_id: '',\n    mention_list: [],\n    content_obj: safeJSONParse(message.content),\n    is_finish: true,\n  };\n\n  const convertedMessage = {\n    ...message,\n    ...(message.source === undefined\n      ? {}\n      : {\n          source: convertMessageSource(message.source),\n        }),\n  };\n  const res = merge(defaultChatMessage, convertedMessage);\n\n  mutateFixMessageReplyId(res);\n\n  const fixedMessage = fixImageMessage(res, reporter);\n\n  if (getIsFileMessage(fixedMessage)) {\n    return modifyFileMessagePercentAndStatus(fixedMessage, {\n      percent: 100,\n      status: FileStatus.Success,\n    });\n  }\n\n  return fixedMessage;\n};\n\nexport const markHistoryMessage = (message: Message): Message => {\n  const res: Message = {\n    ...message,\n    _fromHistory: true,\n  };\n  return res;\n};\n\nconst mutateFixNoticeMessageReplyId = (message: Message) => {\n  if (message.source !== messageSource.Notice) {\n    return;\n  }\n  if (!SERVER_MESSAGE_REPLY_ID_PLACEHOLDER_VALUES.includes(message.reply_id)) {\n    return;\n  }\n  message.reply_id = `notice_${message.message_id}`;\n};\n\nconst mutateFixAsyncResultReplyId = (message: Message) => {\n  if (message.source !== messageSource.AsyncResult) {\n    return;\n  }\n  message.reply_id = `async-result_${message.message_id}`;\n};\nconst mutateFixTaskTriggerMessageReplyId = (message: Message) => {\n  if (\n    message.source !== messageSource.TaskManualTrigger &&\n    message.type !== 'task_manual_trigger'\n  ) {\n    return;\n  }\n  message.reply_id = `task_manual_trigger_${message.message_id}`;\n};\n\nconst mutateFixMessageReplyId = (message: Message) => {\n  mutateFixNoticeMessageReplyId(message);\n  mutateFixAsyncResultReplyId(message);\n  mutateFixTaskTriggerMessageReplyId(message);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isError, isObject } from 'lodash-es';\nimport { type ChatCoreError } from '@coze-common/chat-core';\n\nimport { safeJSONParse } from '../../utils/safe-json-parse';\n\nexport interface BusinessError {\n  code: number;\n  msg: string;\n}\n\nexport const isBusinessError = (value: unknown): value is BusinessError =>\n  isObject(value) && 'code' in value && 'msg' in value;\n\nexport const isChatCoreError = (error: unknown): error is ChatCoreError =>\n  isError(error) && 'ext' in error && 'flatten' in error;\n\nexport const parseErrorInfoFromErrorMessage = (message?: string) => {\n  if (!message) {\n    return;\n  }\n\n  const unknownInfo = safeJSONParse(message);\n  if (isBusinessError(unknownInfo)) {\n    return unknownInfo;\n  }\n};\nexport enum ChatBusinessErrorCode {\n  SuggestError = 700012051,\n  OutTokenLimit = 702232007,\n  MENTION_BOT_NOT_FOUND = 700012053,\n}\n\nexport enum CozeTokenInsufficient {\n  COZE_TOKEN_INSUFFICIENT = 702082020,\n  COZE_TOKEN_INSUFFICIENT_WORKFLOW = 702095072,\n  COZE_TOKEN_INSUFFICIENT_VOICE = 717995023,\n  COZE_PRO_TOKEN_INSUFFICIENT_VOICE = 717995024,\n}\n\nconst TOAST_ERROR_WHITE_LIST = [700012014, 700015002];\n\nexport const isToastErrorMessage = (code: number | undefined) => {\n  if (IS_OPEN_SOURCE) {\n    return true;\n  }\n  return code && TOAST_ERROR_WHITE_LIST.includes(code);\n};\n\nexport const CODE_JINJA_FORMAT_ERROR = 700012059;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { VerboseMsgType } from '@coze-common/chat-core';\n\nimport {\n  isBackwardsVerboseContent,\n  isJumpToVerboseContent,\n  isKnowledgeRecallVerboseContent,\n  isKnowledgeRecallVerboseContentDeprecated,\n  isLongTermMemoryVerboseContent,\n  isVerboseContent,\n  isVerboseMessage,\n} from '../../utils/verbose';\nimport { safeJSONParse } from '../../utils/safe-json-parse';\nimport { type Message } from '../../store/types';\nimport {\n  IgnoreMessageType,\n  type ChatAreaConfigs,\n} from '../../context/chat-area-context/type';\n\nconst checkIgnoreMessageFuncMap: Record<\n  IgnoreMessageType,\n  (parsedContent: unknown, message: Message) => boolean\n> = {\n  [IgnoreMessageType.Knowledge]: (parsedContent, message) =>\n    message.type === 'knowledge' ||\n    isKnowledgeRecallVerboseContentDeprecated(parsedContent) ||\n    isKnowledgeRecallVerboseContent(parsedContent),\n  [IgnoreMessageType.LongTermMemory]: isLongTermMemoryVerboseContent,\n  [IgnoreMessageType.JumpToAgent]: isJumpToVerboseContent,\n  [IgnoreMessageType.Backwards]: isBackwardsVerboseContent,\n};\n\nconst allVerboseTypesMap: Record<VerboseMsgType, true> = {\n  [VerboseMsgType.BACK_WORD]: true,\n  [VerboseMsgType.GENERATE_ANSWER_FINISH]: true,\n  [VerboseMsgType.JUMP_TO]: true,\n  [VerboseMsgType.LONG_TERM_MEMORY]: true,\n  [VerboseMsgType.STREAM_PLUGIN_FINISH]: true,\n  [VerboseMsgType.KNOWLEDGE_RECALL]: true,\n  [VerboseMsgType.INTERRUPT]: true,\n  [VerboseMsgType.HOOK_CALL]: true,\n};\n\n/**\n * Is it a recognized verbose message?\n */\nexport const isIdentifiedVerboseMessage = (value: unknown) =>\n  (isVerboseContent(value) && allVerboseTypesMap[value.msg_type]) ||\n  isKnowledgeRecallVerboseContentDeprecated(value);\n\n/**\n * !important\n * In addition to displaying incoming ignoreMessageConfigList\n * Implicit handling of all unrecognized verbose messages\n * Be sure to pay attention\n */\nexport const getShouldDropMessage = (\n  ignoreMessageConfigList: ChatAreaConfigs['ignoreMessageConfigList'],\n  message: Message,\n) => {\n  const parsedContent = safeJSONParse(message.content);\n\n  if (!isVerboseMessage(message)) {\n    return false;\n  }\n\n  if (!isIdentifiedVerboseMessage(parsedContent)) {\n    return true;\n  }\n\n  for (const ignoreConfig of ignoreMessageConfigList) {\n    // This is to determine whether the content conforms to the corresponding verbose message, which needs to be guaranteed to be a verbose message first\n    if (checkIgnoreMessageFuncMap[ignoreConfig](parsedContent, message)) {\n      return true;\n    }\n  }\n\n  return false;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type LoadAction } from '../../store/message-index';\nimport { type LoadMoreEnvTools } from './load-more-env-tools';\n\nexport type LoadCommandEnvTools = Omit<\n  LoadMoreEnvTools,\n  'triggerChatListShowUp' | 'injectChatCore' | 'injectGetScrollController'\n>;\n\nexport abstract class LoadCommand {\n  constructor(protected envTools: LoadCommandEnvTools) {}\n\n  abstract load(): Promise<void>;\n  abstract action: LoadAction | null;\n}\n\nexport abstract class LoadEffect {\n  constructor(protected envTools: LoadCommandEnvTools) {}\n\n  abstract run(): void;\n}\n\nexport abstract class LoadAsyncEffect {\n  constructor(protected envTools: LoadCommandEnvTools) {}\n\n  abstract runAsync(): Promise<void>;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { compute } from '@coze-common/chat-area-utils';\n\nimport {\n  LoadAsyncEffect,\n  type LoadCommandEnvTools,\n  LoadEffect,\n} from '../load-command';\nimport { type Message } from '../../../store/types';\nimport { getIsValidMessageIndex } from '../../../store/action-implement/messages/get-message-index-range';\nimport { ReportErrorEventNames } from '../../../report-events/report-event-names';\nimport { type MixInitResponse } from '../../../context/chat-area-context/type';\n\nexport interface LocateUnreadMessageParam {\n  messages: Pick<Partial<Message>, 'message_index' | 'message_id'>[];\n  readIndex?: string;\n}\n\nexport class OnInitialLoadEffect extends LoadAsyncEffect {\n  constructor(envTools: LoadCommandEnvTools, private data: MixInitResponse) {\n    super(envTools);\n  }\n  /**\n   * Enter data\n   * Swipe index data once\n   * Brush it, brush it\n   * No fields on the backend\n   * What if you don't swipe?\n   */\n  async runAsync() {\n    const { data, envTools } = this;\n    const { messageIndexHelper } = envTools;\n    // DO NOT await !\n    messageIndexHelper.recordFirstLoadAndRefreshIndex(data);\n    return new Promise<void>(resolve =>\n      envTools.waitMessagesLengthChangeLayoutEffect(() => {\n        new InitialLoadLocating(envTools, {\n          readIndex: data.read_message_index,\n          messages: data.messageList || [],\n        }).run();\n        resolve();\n      }),\n    );\n  }\n}\n\nexport class InitialLoadLocating extends LoadEffect {\n  constructor(\n    envTools: LoadCommandEnvTools,\n    private data: LocateUnreadMessageParam,\n  ) {\n    super(envTools);\n  }\n\n  run() {\n    const { enableMarkRead } = this.envTools.readEnvValues();\n    if (!enableMarkRead) {\n      return;\n    }\n    this.locateUnreadMessage(this.data);\n  }\n\n  private locateUnreadMessage(param: LocateUnreadMessageParam) {\n    const { readIndex } = param;\n    if (!getIsValidMessageIndex(readIndex)) {\n      return;\n    }\n    if (!param.messages.length) {\n      return;\n    }\n    const { reporter } = this.envTools;\n    const targetMessageBox = this.getNextReadMessageDom({\n      readIndex,\n      messages: param.messages,\n    });\n    if (!targetMessageBox) {\n      reporter.errorEvent({\n        eventName: ReportErrorEventNames.LoadInitialGetUnreadMessageIdFail,\n        error: new Error(`fail to get targetMessageBox of: ${readIndex}`),\n      });\n      return;\n    }\n    targetMessageBox.scrollIntoView();\n  }\n\n  /**\n   * Try to find the message corresponding to the read message index,\n   * If you can't find it, use the current one.\n   */\n  private getNextReadMessageDom({\n    messages,\n    readIndex,\n  }: Required<LocateUnreadMessageParam>): Element | null {\n    const { reporter } = this.envTools;\n    const nextReadIndex = compute(readIndex).next();\n    const messageIds: (string | undefined)[] = [];\n    for (const msg of messages || []) {\n      const index = msg.message_index;\n      if (index === nextReadIndex) {\n        messageIds[0] = msg.message_id;\n      }\n      if (index === readIndex) {\n        messageIds[1] = msg.message_id;\n      }\n      if (messageIds[0] && messageIds[1]) {\n        break;\n      }\n    }\n    if (!messageIds[0] && !messageIds[1]) {\n      reporter.errorEvent({\n        eventName: ReportErrorEventNames.LoadInitialGetReadMessageFail,\n        error: new Error(`read_message_index: ${readIndex}`),\n      });\n      return null;\n    }\n    for (const id of messageIds) {\n      const selector = `[data-message-id=\"${id}\"]`;\n      const targetDom = document.querySelector(selector);\n      if (targetDom) {\n        return targetDom;\n      }\n    }\n    return null;\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LoadEffect } from '../load-command';\nimport { ReportErrorEventNames } from '../../../report-events/report-event-names';\nimport { ReportEventNames } from '../../../report-events';\n\nexport class OnClearHistoryEffect extends LoadEffect {\n  run = () => {\n    const {\n      alignMessageIndexes,\n      resetHasMore,\n      resetCursors,\n      reporter,\n      resetLoadLockAndError,\n    } = this.envTools;\n    try {\n      resetHasMore();\n      resetCursors();\n      alignMessageIndexes();\n      resetLoadLockAndError();\n      reporter.event({\n        eventName: ReportEventNames.LoadMoreResetIndexStoreOnClearHistory,\n      });\n    } catch (e) {\n      reporter.errorEvent({\n        eventName:\n          ReportErrorEventNames.LoadMoreResetIndexStoreOnClearHistoryFail,\n        error: e as Error,\n      });\n    }\n  };\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LoadDirection } from '@coze-common/chat-core';\n\nimport { LoadCommand } from '../load-command';\nimport { type LoadAction } from '../../../store/message-index';\nimport { ReportErrorEventNames } from '../../../report-events/report-event-names';\nimport { getReportError, ReportEventNames } from '../../../report-events';\n\nexport class LoadSilently extends LoadCommand {\n  action: LoadAction = 'load-silently';\n  async load() {\n    const {\n      loadLockErrorHelper,\n      readEnvValues,\n      reporter,\n      insertMessages,\n      messageIndexHelper,\n    } = this.envTools;\n    const action = 'load-silently';\n    const { loadLock } = loadLockErrorHelper.onLoadStart(action);\n    const { nextCursor: cursor } = readEnvValues();\n    try {\n      reporter.event({\n        eventName: ReportEventNames.LoadSilently,\n        meta: {\n          cursor,\n        },\n      });\n      const loadDirection = LoadDirection.Next;\n      const res = await this.envTools.loadRequest({\n        cursor,\n        loadDirection,\n      });\n\n      const isValidLock = loadLockErrorHelper.verifyLock(action, loadLock);\n      if (!isValidLock) {\n        return;\n      }\n      await this.envTools.waitChatProcessFinish();\n      insertMessages(res, { toLatest: true });\n      messageIndexHelper.updateIndexAndHasMoreAfterLoad(res, {\n        refreshIndexByRequest: true,\n        loadDirection,\n      });\n\n      loadLockErrorHelper.onLoadSuccess(action);\n    } catch (e) {\n      loadLockErrorHelper.onLoadError(action);\n      reporter.errorEvent({\n        eventName: ReportErrorEventNames.LoadSilentlyFail,\n        ...getReportError(e),\n      });\n    }\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LoadCommand, type LoadCommandEnvTools } from '../load-command';\n\nexport class LoadPassivelyCommand extends LoadCommand {\n  action = null;\n  constructor(envTools: LoadCommandEnvTools, private endIndex: string) {\n    super(envTools);\n  }\n\n  async load() {\n    const { messageIndexHelper } = this.envTools;\n    messageIndexHelper.updateEndIndexForMore(this.endIndex);\n    await Promise.resolve();\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LoadDirection } from '@coze-common/chat-core';\n\nimport { LoadCommand, type LoadCommandEnvTools } from '../load-command';\nimport { type LoadAction } from '../../../store/message-index';\nimport {\n  ReportErrorEventNames,\n  ReportEventNames,\n} from '../../../report-events/report-event-names';\nimport { getReportError } from '../../../report-events';\nimport {\n  CURSOR_TO_LOAD_LATEST_MESSAGE,\n  LOAD_EAGERLY_LOAD_MESSAGE_COUNT,\n} from '../../../constants/message';\n\n/**\n * Go directly to the bottom data\n */\nexport class LoadEagerly extends LoadCommand {\n  action: LoadAction = 'load-eagerly';\n\n  constructor(\n    envTools: LoadCommandEnvTools,\n    // Voice call unconditional refresh message list dedicated\n    private unconditionally = false,\n  ) {\n    super(envTools);\n  }\n\n  async load() {\n    const { readEnvValues } = this.envTools;\n    const {\n      enableTwoWayLoad,\n      nextHasMore,\n      scrollViewFarFromBottom: needScroll,\n    } = readEnvValues();\n\n    const needLoadDataIndeed = enableTwoWayLoad && nextHasMore;\n    const needLoadData = needLoadDataIndeed || this.unconditionally;\n\n    if (!needScroll && !needLoadData) {\n      return;\n    }\n\n    if (needLoadData) {\n      await this.executeLoad();\n    } else {\n      this.onlyScrollToBottom();\n    }\n  }\n\n  private onlyScrollToBottom() {\n    const { getScrollController } = this.envTools;\n    getScrollController()?.scrollToPercentage(1);\n  }\n\n  private async executeLoad() {\n    const {\n      messageIndexHelper,\n      reporter,\n      loadLockErrorHelper,\n      loadRequest,\n      insertMessages,\n    } = this.envTools;\n    const { action } = this;\n\n    if (loadLockErrorHelper.checkLoadLockUsing(action)) {\n      return;\n    }\n\n    const { loadLock } = loadLockErrorHelper.onLoadStart(action);\n    this.onlyScrollToBottom();\n    try {\n      const loadDirection = LoadDirection.Prev;\n\n      const res = await loadRequest({\n        cursor: CURSOR_TO_LOAD_LATEST_MESSAGE,\n        loadDirection,\n        count: LOAD_EAGERLY_LOAD_MESSAGE_COUNT,\n      });\n\n      const isResValid = loadLockErrorHelper.verifyLock(action, loadLock);\n      if (!isResValid) {\n        return;\n      }\n\n      const abortInfo = messageIndexHelper.getShouldAbortLoadedMessage(\n        res.message_list,\n      );\n      const { abort: abortLoaded } = abortInfo;\n      insertMessages(res, {\n        toLatest: true,\n        clearFirst: abortLoaded,\n      });\n\n      messageIndexHelper.updateIndexAndHasMoreAfterLoad(res, {\n        refreshIndexByRequest: false,\n        loadDirection,\n      });\n      loadLockErrorHelper.onLoadSuccess(action);\n      reporter.event({\n        eventName: ReportEventNames.LoadEagerly,\n        // make TypeScript happy\n        meta: Object(abortInfo),\n      });\n    } catch (err) {\n      reporter.errorEvent({\n        eventName: ReportErrorEventNames.LoadSilentlyFail,\n        ...getReportError(err),\n      });\n      loadLockErrorHelper.onLoadError(action);\n    }\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LoadDirection } from '@coze-common/chat-core';\nimport { safeAsyncThrow } from '@coze-common/chat-area-utils';\nimport { reporter } from '@coze-arch/logger';\n\nimport { LoadCommand } from '../load-command';\nimport { type LoadAction } from '../../../store/message-index';\nimport { ReportErrorEventNames } from '../../../report-events/report-event-names';\nimport { getReportError } from '../../../report-events';\nimport {\n  LOAD_NEXT_ANCHOR_ADDITIONAL_MOVE_DISTANCE,\n  LOAD_NEXT_LOCK_DELAY,\n} from '../../../constants/scroll-list';\n\nexport class LoadByScrollPrev extends LoadCommand {\n  action: LoadAction = 'load-prev';\n  async load() {\n    if (!this.getShouldLoad()) {\n      return;\n    }\n    const {\n      readEnvValues,\n      loadRequest,\n      insertMessages,\n      messageIndexHelper,\n      loadLockErrorHelper,\n    } = this.envTools;\n    const { cursor: prevCursor } = readEnvValues();\n    const { action } = this;\n    const loadDirection = LoadDirection.Prev;\n    const { loadLock } = loadLockErrorHelper.onLoadStart(action);\n\n    try {\n      const res = await loadRequest({\n        cursor: prevCursor,\n        loadDirection,\n      });\n      const isValidLock = loadLockErrorHelper.verifyLock(action, loadLock);\n      if (!isValidLock) {\n        return;\n      }\n\n      insertMessages(res, { toLatest: false });\n      messageIndexHelper.updateIndexAndHasMoreAfterLoad(res, {\n        refreshIndexByRequest: true,\n        loadDirection,\n      });\n\n      loadLockErrorHelper.onLoadSuccess(action);\n    } catch (err) {\n      reporter.errorEvent({\n        eventName: ReportErrorEventNames.LoadByScrollPrevFail,\n        ...getReportError(err),\n      });\n\n      loadLockErrorHelper.onLoadError(action);\n    }\n  }\n\n  private getShouldLoad() {\n    const { readEnvValues, loadLockErrorHelper } = this.envTools;\n    const { prevHasMore } = readEnvValues();\n\n    if (!prevHasMore) {\n      return false;\n    }\n    return !loadLockErrorHelper.checkLoadLockUsing(this.action);\n  }\n}\n\nexport class LoadByScrollNext extends LoadCommand {\n  action: LoadAction = 'load-next';\n\n  async load() {\n    if (!this.getShouldLoad()) {\n      return;\n    }\n    const {\n      readEnvValues,\n      loadRequest,\n      insertMessages,\n      messageIndexHelper,\n      loadLockErrorHelper,\n    } = this.envTools;\n    const { nextCursor } = readEnvValues();\n    const { action } = this;\n\n    const { loadLock } = loadLockErrorHelper.onLoadStart(action);\n\n    try {\n      const res = await loadRequest({\n        cursor: nextCursor,\n        loadDirection: LoadDirection.Next,\n      });\n\n      const isValidLock = loadLockErrorHelper.verifyLock(action, loadLock);\n      if (!isValidLock) {\n        return;\n      }\n\n      messageIndexHelper.updateIndexAndHasMoreAfterLoad(res, {\n        refreshIndexByRequest: true,\n        loadDirection: LoadDirection.Next,\n      });\n      insertMessages(res, { toLatest: true });\n      loadLockErrorHelper.onLoadSuccess(action, {\n        remainLock: true,\n      });\n\n      this.simulateOverflowAnchor(loadLock);\n    } catch (err) {\n      reporter.errorEvent({\n        eventName: ReportErrorEventNames.LoadByScrollNextFail,\n        ...getReportError(err),\n      });\n\n      loadLockErrorHelper.onLoadError(action);\n    }\n  }\n\n  private getShouldLoad(): boolean {\n    const { readEnvValues, loadLockErrorHelper } = this.envTools;\n    const { nextHasMore } = readEnvValues();\n\n    if (!nextHasMore) {\n      return false;\n    }\n    return !loadLockErrorHelper.checkLoadLockUsing(this.action);\n  }\n\n  private simulateOverflowAnchor(loadLock: number) {\n    const verifyLoadLockStillValid = () =>\n      this.envTools.loadLockErrorHelper.verifyLock(this.action, loadLock);\n\n    const scrollController = this.envTools.getScrollController();\n    if (!scrollController) {\n      safeAsyncThrow('cannot get scrollController in simulateOverflowAnchor');\n      return;\n    }\n    const { getOriginScrollInfo } = scrollController;\n\n    const scrollInfo = getOriginScrollInfo();\n\n    this.envTools.waitMessagesLengthChangeLayoutEffect(() => {\n      if (!verifyLoadLockStillValid()) {\n        return;\n      }\n\n      const newScrollInfo = getOriginScrollInfo();\n\n      const properScrollTop =\n        scrollInfo.scrollHeight - newScrollInfo.scrollHeight;\n      const optimizedScrollTop =\n        properScrollTop + LOAD_NEXT_ANCHOR_ADDITIONAL_MOVE_DISTANCE;\n\n      scrollController.scrollTo(() => optimizedScrollTop);\n\n      const unlockLoadScroll = () => {\n        if (!verifyLoadLockStillValid()) {\n          return;\n        }\n\n        const { action } = this;\n        this.envTools.updateLockAndErrorByImmer(state => {\n          state.loadLock[action] = null;\n        });\n      };\n      // I wanted to use requestAnimationFrame, but it didn't work. Let's make a living\n      setTimeout(unlockLoadScroll, LOAD_NEXT_LOCK_DELAY);\n    });\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type ChatCore from '@coze-common/chat-core';\nimport {\n  compareInt64,\n  getIsDiffWithinRange,\n} from '@coze-common/chat-area-utils';\n\nimport { getFakeChatCore } from '../../utils/fake-chat-core';\nimport { ReportEventNames } from '../../report-events';\nimport type { MixInitResponse } from '../../context/chat-area-context/type';\nimport { LOAD_SILENTLY_MAX_NEW_ADDED_COUNT } from '../../constants/message';\nimport type {\n  GetScrollController,\n  LoadMoreEnvTools,\n} from './load-more-env-tools';\nimport {\n  OnInitialLoadEffect,\n  InitialLoadLocating,\n  type LocateUnreadMessageParam,\n} from './command/on-initial-load-effect';\nimport { OnClearHistoryEffect } from './command/on-clear-history-effect';\nimport { LoadSilently } from './command/load-silently';\nimport { LoadPassivelyCommand } from './command/load-passively';\nimport { LoadEagerly } from './command/load-eagerly';\nimport { LoadByScrollNext, LoadByScrollPrev } from './command/load-by-scroll';\n\nexport type LoadMoreClientMethod = Pick<\n  LoadMoreClient,\n  | 'handleInitialLoadIndex'\n  | 'loadPassively'\n  | 'loadEagerly'\n  | 'loadEagerlyUnconditionally'\n  | 'loadByScrollNext'\n  | 'loadByScrollPrev'\n  | 'loadSilently'\n  | 'injectChatCoreIntoEnv'\n  | 'onMessageIndexChange'\n  | 'onClearHistory'\n  | 'injectGetScrollController'\n  | 'clearMessageIndexStore'\n>;\n/**\n * The use of context guarantees is a singleton\n */\nexport class LoadMoreClient {\n  constructor(private loadEnv: LoadMoreEnvTools) {}\n\n  /**\n   * No active request is required when initializing the load\n   * 1. Do data entry processing\n   * 2. Scroll to the first unread item\n   */\n  public handleInitialLoadIndex = async (data: MixInitResponse) => {\n    await new OnInitialLoadEffect(this.loadEnv, data).runAsync();\n  };\n\n  public locateToUnreadMessage = (data: LocateUnreadMessageParam) =>\n    new InitialLoadLocating(this.loadEnv, data).run();\n\n  public injectChatCoreIntoEnv(core: ChatCore | null) {\n    this.loadEnv.injectChatCore(core || getFakeChatCore());\n  }\n\n  public injectGetScrollController(fn: GetScrollController) {\n    this.loadEnv.injectGetScrollController(fn);\n  }\n\n  public loadEagerly = () => new LoadEagerly(this.loadEnv).load();\n  public loadEagerlyUnconditionally = () =>\n    new LoadEagerly(this.loadEnv, true).load();\n  public loadByScrollPrev = () => new LoadByScrollPrev(this.loadEnv).load();\n  public loadByScrollNext = () => new LoadByScrollNext(this.loadEnv).load();\n  public loadSilently = () => new LoadSilently(this.loadEnv).load();\n  public loadPassively = (endIndex: string) =>\n    new LoadPassivelyCommand(this.loadEnv, endIndex).load();\n\n  public onClearHistory = () => new OnClearHistoryEffect(this.loadEnv).run();\n\n  public onMessageIndexChange = async (endIndex: string) => {\n    const { ignoreIndexAndHistoryMessages } = this.loadEnv.readEnvValues();\n    // Ignore push notification (home bot sharing landing page continuation scene)\n    if (ignoreIndexAndHistoryMessages) {\n      return;\n    }\n\n    // Wait for initialization to complete before proceeding with index change event response\n    // Affected by asynchronous process, need to re-read env values\n    await this.loadEnv.waitChatCoreReady();\n    const { maxLoadIndex } = this.loadEnv.readEnvValues();\n\n    const newEndIsGreater = compareInt64(endIndex).greaterThan(maxLoadIndex);\n    if (!newEndIsGreater) {\n      this.loadEnv.reporter.event({\n        eventName: ReportEventNames.LoadMoreOnMessageUnexpectedIndexChange,\n        meta: {\n          maxLoadIndex,\n          newEndIsGreater,\n          endIndex,\n        },\n      });\n      // The back-end did not evade, so remove the judgment first.\n      // return;\n    }\n    // Avoid reply in output\n    await this.loadEnv.waitChatProcessFinish();\n    const shouldBeSilent = getIsDiffWithinRange(\n      endIndex,\n      maxLoadIndex,\n      LOAD_SILENTLY_MAX_NEW_ADDED_COUNT,\n    );\n\n    this.loadEnv.reporter.event({\n      eventName: ReportEventNames.LoadMoreConsumeMessageIndexChange,\n      meta: {\n        shouldBeSilent,\n        endIndex,\n      },\n    });\n\n    if (shouldBeSilent) {\n      await this.loadSilently();\n    } else {\n      await this.loadPassively(endIndex);\n    }\n  };\n\n  public clearMessageIndexStore() {\n    this.loadEnv.clearMessageIndexStore();\n  }\n}\n\nexport const fallbackLoadMoreClient: LoadMoreClientMethod = {\n  handleInitialLoadIndex: () => Promise.resolve(),\n  onClearHistory: () => undefined,\n  loadEagerly: () => Promise.resolve(),\n  loadEagerlyUnconditionally: () => Promise.resolve(),\n  injectChatCoreIntoEnv: () => undefined,\n  injectGetScrollController: () => undefined,\n  loadByScrollPrev: () => Promise.resolve(),\n  loadByScrollNext: () => Promise.resolve(),\n  loadPassively: () => Promise.resolve(),\n  loadSilently: () => Promise.resolve(),\n  onMessageIndexChange: () => Promise.resolve(),\n  clearMessageIndexStore: () => undefined,\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type GetHistoryMessageResponse,\n  LoadDirection,\n} from '@coze-common/chat-core';\nimport {\n  compareInt64,\n  getIsDiffWithinRange,\n  getReportError,\n  updateOnlyDefined,\n} from '@coze-common/chat-area-utils';\n\nimport {\n  type CommonLoadIndex,\n  type LoadMoreEnvTools,\n} from '../load-more-env-tools';\nimport { type Message } from '../../../store/types';\nimport { getMessageIndexRange } from '../../../store/action-implement/messages/get-message-index-range';\nimport { ReportErrorEventNames } from '../../../report-events/report-event-names';\nimport { type MixInitResponse } from '../../../context/chat-area-context/type';\nimport { MIN_MESSAGE_INDEX_DIFF_TO_ABORT_CURRENT } from '../../../constants/message';\n\nexport interface AbortMessageInfo {\n  maxLoadIndex: string;\n  abort: boolean;\n  indexInfo: string;\n}\n/* eslint-disable @typescript-eslint/consistent-type-definitions -- make ts happy */\nexport type HasMoreInfo = {\n  prevHasMore?: boolean;\n  nextHasMore?: boolean;\n};\nexport type CursorInfo = {\n  cursor?: string;\n  nextCursor?: string;\n};\n/* eslint-enable @typescript-eslint/consistent-type-definitions -- resume */\n\nexport class MessageIndexHelper {\n  constructor(private envTools: LoadMoreEnvTools) {}\n\n  public recordFirstLoadAndRefreshIndex = async (\n    data: Pick<\n      MixInitResponse,\n      | 'read_message_index'\n      | 'hasMore'\n      | 'next_cursor'\n      | 'next_has_more'\n      | 'cursor'\n      | 'conversationId'\n    >,\n  ) => {\n    const { updateCursor, updateHasMore, updateIndex, readEnvValues } =\n      this.envTools;\n    updateIndex({\n      readIndex: data?.read_message_index ?? '0',\n    });\n    updateHasMore({\n      prevHasMore: data?.hasMore ?? false,\n      nextHasMore: data?.next_has_more ?? false,\n    });\n    updateOnlyDefined(updateCursor, {\n      cursor: data?.cursor,\n      nextCursor: data?.next_cursor,\n    });\n    if (\n      !readEnvValues().enableMarkRead ||\n      readEnvValues().ignoreIndexAndHistoryMessages\n    ) {\n      return;\n    }\n    await this.refreshIndexByRequest(data.conversationId);\n  };\n\n  /**\n   * Update index prevHasMore and other data after loading\n   */\n  public async updateIndexAndHasMoreAfterLoad(\n    data: CommonLoadIndex,\n    {\n      refreshIndexByRequest,\n      loadDirection,\n    }: {\n      refreshIndexByRequest: boolean;\n      loadDirection: LoadDirection;\n    },\n  ) {\n    const { updateHasMore, updateCursor, updateIndex, readEnvValues } =\n      this.envTools;\n    updateOnlyDefined(updateIndex, {\n      readIndex: data.read_message_index,\n    });\n    // Update hasMore and cursor based on corrected hasMore\n    const hasMoreInfo = this.getHasMoreByDirection(data, loadDirection);\n    updateOnlyDefined(updateHasMore, hasMoreInfo);\n    const cursorInfo = this.getCursorByDirection(data, loadDirection);\n    updateOnlyDefined(updateCursor, cursorInfo);\n\n    const { enableMarkRead } = readEnvValues();\n    if (refreshIndexByRequest && enableMarkRead) {\n      await this.refreshIndexByRequest(null);\n    }\n  }\n\n  public getHasMoreByDirection(\n    data: Pick<GetHistoryMessageResponse, 'hasmore' | 'next_has_more'>,\n    loadDirection: LoadDirection,\n  ): HasMoreInfo {\n    const { hasmore: prevHasMore, next_has_more: nextHasMore } = data;\n    const res: HasMoreInfo = {\n      prevHasMore,\n      nextHasMore,\n    };\n    if (prevHasMore && loadDirection === LoadDirection.Next) {\n      // Load next to you prevHasMore\n      delete res.prevHasMore;\n    }\n    if (nextHasMore && loadDirection === LoadDirection.Prev) {\n      // Load prev nextHasMore\n      delete res.nextHasMore;\n    }\n    return res;\n  }\n\n  /** Here's a problem: load-eagerly is supposed to update all cursors, but loadDirection is passed as Prev */\n  public getCursorByDirection(\n    data: Pick<GetHistoryMessageResponse, 'cursor' | 'next_cursor'>,\n    loadDirection: LoadDirection,\n  ): CursorInfo {\n    if (loadDirection === LoadDirection.Next) {\n      return {\n        nextCursor: data.next_cursor,\n      };\n    }\n    return {\n      cursor: data.cursor,\n    };\n  }\n\n  /**\n   * Verify index data once by sending a request\n   * Home Scene No need to store/debug by conversationId Filter Scene Yes\n   */\n  private async refreshIndexByRequest(conversationId: string | null) {\n    const { requestMessageIndex, reporter, updateIndex } = this.envTools;\n    try {\n      const indexes = await requestMessageIndex(conversationId);\n      updateIndex({\n        readIndex: indexes.read_message_index,\n        endIndex: indexes.end_message_index,\n      });\n    } catch (err) {\n      reporter.errorEvent({\n        eventName: ReportErrorEventNames.LoadSilentlyFail,\n        ...getReportError(err),\n      });\n    }\n  }\n\n  public updateEndIndexForMore = (endIndex: string) => {\n    const { updateHasMore, readEnvValues, updateIndex } = this.envTools;\n    const { maxLoadIndex, endIndex: currentEndIndex } = readEnvValues();\n    if (endIndex === currentEndIndex) {\n      return;\n    }\n    if (compareInt64(maxLoadIndex).greaterThan(endIndex)) {\n      return;\n    }\n    updateHasMore({\n      nextHasMore: true,\n    });\n    updateIndex({\n      endIndex,\n    });\n  };\n\n  public getShouldAbortLoadedMessage(\n    list: Pick<Message, 'message_index'>[],\n  ): AbortMessageInfo {\n    const { maxLoadIndex } = this.envTools.readEnvValues();\n    const { min, max } = getMessageIndexRange(list);\n    const indexInfo = `start ${min}, end ${max}`;\n    if (maxLoadIndex === '0') {\n      return {\n        maxLoadIndex,\n        abort: true,\n        indexInfo,\n      };\n    }\n\n    if (!min || !max) {\n      return {\n        maxLoadIndex,\n        abort: true,\n        indexInfo,\n      };\n    }\n\n    if (compareInt64(min).lesserThan(maxLoadIndex)) {\n      return {\n        maxLoadIndex,\n        abort: false,\n        indexInfo,\n      };\n    }\n\n    const isSmallDiff = getIsDiffWithinRange(\n      maxLoadIndex,\n      min,\n      MIN_MESSAGE_INDEX_DIFF_TO_ABORT_CURRENT,\n    );\n    return {\n      maxLoadIndex,\n      abort: !isSmallDiff,\n      indexInfo,\n    };\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type LoadMoreEnvTools } from '../load-more-env-tools';\nimport { uniquePush } from '../../../utils/array';\nimport { type LoadAction } from '../../../store/message-index';\n\n// Todo single test mutual exclusion, overlay logic\nexport class LoadLockErrorHelper {\n  constructor(private envTools: LoadMoreEnvTools) {}\n\n  private getCurrentLoadLock(action: LoadAction) {\n    const { readEnvValues } = this.envTools;\n    const { loadLock } = readEnvValues();\n    return loadLock[action];\n  }\n\n  public checkLoadLockUsing(action: LoadAction) {\n    const selfLocked = this.getCurrentLoadLock(action) !== null;\n    if (selfLocked) {\n      return true;\n    }\n    const higherPriorityActions = this.getHigherPriorityAction(action);\n    return higherPriorityActions.some(\n      higherAction => this.getCurrentLoadLock(higherAction) !== null,\n    );\n  }\n\n  public onLoadStart(action: LoadAction) {\n    const now = Date.now();\n    const { updateLockAndErrorByImmer } = this.envTools;\n    updateLockAndErrorByImmer(state => {\n      const { loadLock, loadError } = state;\n      loadLock[action] = now;\n      state.loadError = loadError.filter(errorAction => errorAction !== action);\n\n      const coveredActions = this.getCoveredAction(action);\n      coveredActions.forEach(covered => {\n        loadLock[covered] = null;\n        state.loadError = loadError.filter(\n          errorAction => errorAction !== covered,\n        );\n      });\n    });\n    return {\n      loadLock: now,\n    };\n  }\n\n  private getHigherPriorityAction(action: LoadAction): LoadAction[] {\n    if (action === 'load-next') {\n      return ['load-eagerly'];\n    }\n    return [];\n  }\n\n  private getCoveredAction(action: LoadAction): LoadAction[] {\n    if (action === 'load-eagerly') {\n      return ['load-next'];\n    }\n    return [];\n  }\n\n  /**\n   * A response can only be adopted if it is completely consistent.\n   * loadEagerly will forcibly end loadByScrollNext\n   */\n  public verifyLock(action: LoadAction, lock: number): boolean {\n    const currentLock = this.envTools.readEnvValues().loadLock[action];\n    return lock === currentLock;\n  }\n\n  public onLoadSuccess(\n    action: LoadAction,\n    opt?: {\n      remainLock?: boolean;\n    },\n  ) {\n    const { updateLockAndErrorByImmer } = this.envTools;\n    updateLockAndErrorByImmer(state => {\n      const { loadLock, loadError } = state;\n      if (!opt?.remainLock) {\n        loadLock[action] = null;\n      }\n      state.loadError = loadError.filter(load => load !== action);\n    });\n  }\n\n  public onLoadError(action: LoadAction) {\n    const { updateLockAndErrorByImmer } = this.envTools;\n    updateLockAndErrorByImmer(state => {\n      const { loadLock, loadError } = state;\n      loadLock[action] = null;\n      uniquePush(loadError, action);\n    });\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type Reporter } from '@coze-arch/logger';\nimport { type GetConversationParticipantsReadIndexResponse } from '@coze-arch/bot-api/developer_api';\nimport { type ScrollViewController } from '@coze-common/scroll-view';\nimport {\n  type GetHistoryMessageResponse,\n  type LoadDirection,\n} from '@coze-common/chat-core';\nimport type ChatCore from '@coze-common/chat-core';\nimport { Deferred } from '@coze-common/chat-area-utils';\n\nimport { getFakeChatCore, getIsFakeChatCore } from '../../utils/fake-chat-core';\nimport {\n  type MessageIndexAction,\n  type MessageIndexState,\n} from '../../store/message-index';\nimport { MessageIndexHelper } from './helper/message-index-helper';\nimport { LoadLockErrorHelper } from './helper/load-lock-error-helper';\n\nexport type LoadMoreEnvValues = {\n  enableTwoWayLoad: boolean;\n  enableMarkRead: boolean;\n  /** Sending or receiving a reply */\n  isProcessingChat: boolean;\n} & MessageIndexState;\n\nexport type CommonLoadIndex = Pick<\n  GetHistoryMessageResponse,\n  'hasmore' | 'next_cursor' | 'cursor' | 'next_has_more' | 'read_message_index'\n>;\n\ntype ListenProcessChatStateChange = (fn: (isProcessing: boolean) => void) => {\n  dispose: () => void;\n};\n\nexport type LoadMoreEnvConstructParams = Pick<\n  LoadMoreEnvTools,\n  | 'readEnvValues'\n  | 'loadRequest'\n  | 'requestMessageIndex'\n  | 'insertMessages'\n  | 'reporter'\n  | 'updateIndex'\n  | 'updateCursor'\n  | 'updateHasMore'\n  | 'resetCursors'\n  | 'resetHasMore'\n  | 'alignMessageIndexes'\n  | 'resetLoadLockAndError'\n  | 'updateLockAndErrorByImmer'\n  | 'waitMessagesLengthChangeLayoutEffect'\n  | 'clearMessageIndexStore'\n> & {\n  listenProcessChatStateChange: ListenProcessChatStateChange;\n};\n\nexport type GetScrollController = () => ScrollViewController | null;\n\nexport class LoadMoreEnvTools {\n  public loadRequest: (param: {\n    count?: number;\n    cursor: string;\n    loadDirection: LoadDirection;\n  }) => Promise<GetHistoryMessageResponse>;\n  public waitMessagesLengthChangeLayoutEffect: (fn: () => void) => void;\n  public requestMessageIndex: (\n    conversationId: string | null,\n  ) => Promise<\n    Pick<\n      GetConversationParticipantsReadIndexResponse,\n      'end_message_index' | 'read_message_index'\n    >\n  >;\n  public readEnvValues: () => LoadMoreEnvValues;\n  /** Update only when a larger value appears, call it casually */\n  public updateIndex: MessageIndexAction['updateIndex'];\n  public insertMessages: (\n    param: GetHistoryMessageResponse,\n    opt: { toLatest: boolean; clearFirst?: boolean },\n  ) => void;\n  public updateHasMore: MessageIndexAction['updateHasMore'];\n  public updateCursor: MessageIndexAction['updateCursor'];\n  public resetCursors: MessageIndexAction['resetCursors'];\n  public resetHasMore: MessageIndexAction['resetHasMore'];\n  public resetLoadLockAndError: MessageIndexAction['resetLoadLockAndError'];\n  public alignMessageIndexes: MessageIndexAction['alignMessageIndexes'];\n  public updateLockAndErrorByImmer: MessageIndexAction['updateLockAndErrorByImmer'];\n  public getScrollController: GetScrollController;\n  public clearMessageIndexStore: MessageIndexAction['clearAll'];\n  public chatCore: ChatCore;\n  public reporter: Reporter;\n  public loadLockErrorHelper = new LoadLockErrorHelper(this);\n  public messageIndexHelper = new MessageIndexHelper(this);\n  private listenProcessChatStateChange: ListenProcessChatStateChange;\n  private chatCoreDeferred = new Deferred();\n\n  public injectGetScrollController = (fn: GetScrollController) => {\n    this.getScrollController = fn;\n  };\n  public injectChatCore = (core: ChatCore) => {\n    this.chatCore = core;\n    this.chatCoreDeferred.resolve();\n  };\n\n  public async waitChatProcessFinish() {\n    if (!this.readEnvValues().isProcessingChat) {\n      return;\n    }\n    return new Promise<void>(resolve => {\n      const { dispose } = this.listenProcessChatStateChange(isProcessing => {\n        if (!isProcessing) {\n          dispose();\n          resolve();\n        }\n      });\n    });\n  }\n\n  public waitChatCoreReady() {\n    if (getIsFakeChatCore(this.chatCore)) {\n      return this.chatCoreDeferred;\n    }\n  }\n\n  constructor({\n    loadRequest,\n    readEnvValues,\n    updateIndex,\n    insertMessages,\n    updateHasMore,\n    updateCursor,\n    reporter,\n    updateLockAndErrorByImmer,\n    requestMessageIndex,\n    waitMessagesLengthChangeLayoutEffect,\n    listenProcessChatStateChange,\n    alignMessageIndexes,\n    resetCursors,\n    resetHasMore,\n    resetLoadLockAndError,\n    clearMessageIndexStore,\n  }: LoadMoreEnvConstructParams) {\n    this.getScrollController = () => null;\n    this.chatCore = getFakeChatCore();\n    this.insertMessages = insertMessages;\n    this.updateIndex = updateIndex;\n    this.updateHasMore = updateHasMore;\n    this.updateCursor = updateCursor;\n    this.readEnvValues = readEnvValues;\n    this.loadRequest = loadRequest;\n    this.requestMessageIndex = requestMessageIndex;\n    this.reporter = reporter;\n    this.resetHasMore = resetHasMore;\n    this.resetCursors = resetCursors;\n    this.alignMessageIndexes = alignMessageIndexes;\n    this.updateLockAndErrorByImmer = updateLockAndErrorByImmer;\n    this.resetLoadLockAndError = resetLoadLockAndError;\n    this.waitMessagesLengthChangeLayoutEffect =\n      waitMessagesLengthChangeLayoutEffect;\n    this.listenProcessChatStateChange = listenProcessChatStateChange;\n    this.clearMessageIndexStore = clearMessageIndexStore;\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  ContentType,\n  type TextAndFileMixMessageProps,\n} from '@coze-common/chat-core';\nimport { type SendTextMessagePayload } from '@coze-common/chat-uikit-shared';\n\nimport {\n  createNormalizedFilePayload,\n  createNormalizedImagePayload,\n  formatFileDataListToMessagePayload,\n} from '../../utils/upload';\nimport { FileType, type ImageFileData } from '../../store/types';\nimport { type BatchFileUploadStore } from '../../store/batch-upload-file';\nimport {\n  type useSendTextMessage,\n  type useSendMultimodalMessage,\n  type useSendNormalizedMessage,\n} from '../../hooks/messages/use-send-message';\nimport { type SendMessageFrom } from '../../context/chat-area-context/chat-area-callback';\n\ninterface SendMessageServiceConstructorContext {\n  methods: {\n    sendTextMessage: ReturnType<typeof useSendTextMessage>;\n    sendMultimodalMessage: ReturnType<typeof useSendMultimodalMessage>;\n    sendNormalizedMessage: ReturnType<typeof useSendNormalizedMessage>;\n  };\n  storeSets: {\n    useBatchFileUploadStore: BatchFileUploadStore;\n  };\n}\n\nexport interface SendMessagePayload extends SendTextMessagePayload {\n  audioFile?: File;\n}\n\nexport interface SendMessageParams {\n  inputPayload: SendMessagePayload;\n  from: SendMessageFrom;\n}\n\nexport class SendMessageService {\n  context: SendMessageServiceConstructorContext;\n  constructor(params: SendMessageServiceConstructorContext) {\n    this.context = params;\n  }\n\n  sendTextMessage(params: SendMessageParams) {\n    const { methods } = this.context;\n    const { inputPayload, from } = params;\n    return methods.sendTextMessage(inputPayload, from);\n  }\n\n  sendFileMessage(params: SendMessageParams) {\n    const {\n      storeSets: { useBatchFileUploadStore },\n      methods: { sendNormalizedMessage },\n    } = this.context;\n    const { inputPayload, from } = params;\n\n    const fileDataList = useBatchFileUploadStore.getState().getFileDataList();\n    const isFileTypeError = fileDataList.some(\n      fileData => fileData?.fileType !== FileType.File,\n    );\n\n    if (isFileTypeError) {\n      throw new Error(\n        `invalid send single common file message ${fileDataList}`,\n      );\n    }\n\n    const normalizedFilePayload = createNormalizedFilePayload(\n      fileDataList,\n      inputPayload.mentionList,\n    );\n\n    return sendNormalizedMessage({ payload: normalizedFilePayload }, from);\n  }\n\n  sendImageMessage(params: SendMessageParams) {\n    const {\n      storeSets: { useBatchFileUploadStore },\n      methods: { sendNormalizedMessage },\n    } = this.context;\n    const { inputPayload, from } = params;\n\n    const fileDataList = useBatchFileUploadStore.getState().getFileDataList();\n    const isFileTypeError = fileDataList.some(\n      fileData => fileData.fileType !== FileType.Image,\n    );\n\n    if (isFileTypeError) {\n      throw new Error(\n        `invalid send single common file message ${fileDataList}`,\n      );\n    }\n\n    const filteredFileDataList = fileDataList.filter(\n      (fileData): fileData is ImageFileData =>\n        fileData.fileType === FileType.Image,\n    );\n\n    const normalizedImagePayload = createNormalizedImagePayload(\n      filteredFileDataList,\n      inputPayload.mentionList,\n    );\n\n    return sendNormalizedMessage({ payload: normalizedImagePayload }, from);\n  }\n\n  sendMultimodalMessage(params: SendMessageParams) {\n    const {\n      storeSets: { useBatchFileUploadStore },\n      methods: { sendMultimodalMessage },\n    } = this.context;\n    const { inputPayload, from } = params;\n\n    const mixList: TextAndFileMixMessageProps['payload']['mixList'] = [\n      ...formatFileDataListToMessagePayload(\n        useBatchFileUploadStore.getState().getFileDataList(),\n      ),\n      {\n        type: ContentType.Text,\n        text: inputPayload.text,\n      },\n    ];\n    return sendMultimodalMessage(\n      {\n        payload: {\n          mixList,\n          mention_list: inputPayload.mentionList,\n        },\n        audioFile: inputPayload.audioFile,\n      },\n      from,\n    );\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getMinMax } from '@coze-common/chat-area-utils';\n\nimport type { Message } from '../../types';\nimport { type MessageIndexRange } from '../../messages';\n\nexport const getIsValidMessageIndex = (index?: string): index is string =>\n  index !== undefined && index !== '0' && /^\\d+$/.test(index);\n\nconst getIsMessageWithValidIndex = <T extends Pick<Message, 'message_index'>>(\n  msg: T,\n): msg is T & { message_index: string } =>\n  getIsValidMessageIndex(msg.message_index);\n\nexport const getMessageIndexRange = (\n  messages: Pick<Message, 'message_index'>[],\n): MessageIndexRange => {\n  const validMessages = messages.filter(getIsMessageWithValidIndex);\n  const withNoIndexed = validMessages.length !== messages.length;\n  const validIndexes = validMessages.map(msg => msg.message_index);\n\n  const res = getMinMax(...validIndexes);\n\n  return {\n    withNoIndexed,\n    min: res?.min,\n    max: res?.max,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type Message as OriginMessage,\n  type ContentType,\n  type VerboseMsgType,\n  type MessageSource,\n} from '@coze-common/chat-core';\nimport {\n  type AgentType,\n  type UserLabel,\n} from '@coze-arch/bot-api/developer_api';\nimport { type MentionList } from '@coze-common/chat-uikit-shared';\n\n/*  eslint-disable @typescript-eslint/naming-convention -- internal properties don't need to start with _ what to start with? */\ninterface ExtraMessageFields {\n  // Internal properties, only used to send failed scenarios\n  _sendFailed?: boolean;\n  // Internal properties for marking history\n  _fromHistory?: boolean;\n  // Internal property to flag the message as coming from onboarding\n  _fromOnboarding?: boolean;\n}\n/* eslint-enable @typescript-eslint/naming-convention -- explain what... */\n\n// eslint-disable-next-line @typescript-eslint/naming-convention -- non-compliance\ntype _Message<T extends ContentType, V = unknown> = OriginMessage<T, V> &\n  ExtraMessageFields;\n\nexport type Message<\n  T extends ContentType = ContentType,\n  V = unknown,\n> = _Message<T, V> & ExtraMessageFields;\n\nexport interface MessageIdStruct {\n  message_id: string;\n  extra_info: {\n    local_message_id: string;\n  };\n}\n\nexport interface MessagePagination {\n  hasMore: boolean;\n  cursor: string;\n}\n\nexport interface MessageGroupMember {\n  /**\n   * role: user\n   * A conversation user only sends one message\n   */\n  userMessageId: string | null;\n  /**\n   * role: assistant\n   * Type: non answer\n   */\n  functionCallMessageIdList: string[];\n  /**\n   * role: assistant\n   * type: answer\n   */\n  llmAnswerMessageIdList: string[];\n  // The design of todo SuggestionInChat forks with this field\n  /**\n   * @deprecated now useless\n   * type: follow_up\n   */\n  followUpMessageIdList: string[];\n}\n\nexport interface MessageGroupInfo {\n  /**\n   * The user sent a message, only local messages are message_id\n   * reply_id after returning ack\n   */\n  groupId: string;\n  sectionId: string;\n  selectable?: boolean;\n  unSelectableTips?: string;\n  /**\n   * Is it the latest grouping?\n   */\n  isLatest: boolean;\n  /**\n   * Null - do not show split lines\n   * With-onboarding - Show splits and openers\n   * Without-onboarding - Show only split lines\n   */\n  showContextDivider: null | 'with-onboarding' | 'without-onboarding';\n  // todo remove\n  /**\n   * @deprecated suspected useless\n   */\n  showSuggestions?: boolean;\n}\n\nexport type MessageGroup = { memberSet: MessageGroupMember } & MessageGroupInfo;\n\nexport type MessageUniqueKey =\n  | Extract<keyof Message, 'message_id'>\n  | Extract<keyof Message['extra_info'], 'local_message_id'>;\n\nexport type TextMessage = Message<ContentType.Text>;\nexport type ImageMessage = Message<ContentType.Image>;\nexport type FileMessage = Message<ContentType.File>;\nexport type CardMessage = Message<ContentType.Card>;\nexport type FunctionCallMessage = Message<ContentType.Link, { name: string }>;\nexport type MultimodalMessage = Message<ContentType.Mix>;\nexport type NormalizedFileMessage = Message<\n  ContentType.File | ContentType.Image\n>;\n\nexport interface SendFilePayload {\n  file: File;\n  mentionList: MentionList;\n}\n\nexport interface MessageIdStruct {\n  message_id: string;\n  extra_info: {\n    local_message_id: string;\n  };\n}\n\nexport interface MessageExtraInfoBotState {\n  bot_id?: string;\n  agent_id?: string;\n  agent_name?: string;\n  agent_type?: AgentType;\n  awaiting?: string;\n}\n\nexport interface KnowledgeRecallSlice {\n  meta: {\n    dataset: {\n      id: number;\n      name: string;\n    };\n    document: {\n      id: number;\n      source_type: number;\n      format_type: number;\n      name: string;\n    };\n    link: {\n      title: string;\n      url: string;\n    };\n  };\n  score: number;\n  slice: string;\n}\n\nexport interface VerboseContentData {\n  method?: string;\n  condition?: string;\n  agent_name?: string;\n  agent_id?: string;\n  arguments?: string;\n  restart?: boolean; //Whether to go back to the start node\n  wraped_text?: string; //Copywriting for long-term memory display\n  chunks?: KnowledgeRecallSlice[];\n  /** Knowledge base call status code, 0-success 708882003-cloud search authentication failed */\n  status_code?: number;\n}\n\nexport interface MessageMeta\n  extends MessageIdStruct,\n    Pick<ExtraMessageFields, '_fromHistory'> {\n  /** Message display Copy, regenerate and other buttons */\n  showActions: boolean;\n  /** The agent split line is displayed after the message. */\n  showMultiAgentDivider: boolean;\n  /** User question is being sent. */\n  isSending: boolean;\n  /** Message sending or receiving failed */\n  isFail: boolean;\n  /** Message receiving */\n  isReceiving: boolean;\n  /** Exhibits function calls only when true; terminated by the corresponding tool_response;\n   * Note that the non-debug area (home, store, web sdk) uses this value to determine the display of the function call; the debug area has other judgment logic */\n  isFunctionCalling: boolean;\n  /** Whether to show suggestion: Only show the last reply when there is no dividing line */\n  // TODO: lsy confirm whether to delete\n  // showSuggestions: boolean;\n  /** Is it a message from the last message group? */\n  isFromLatestGroup: boolean;\n  /** Contains only message.type === 'answer'  */\n  isGroupFirstAnswer: boolean;\n  /** Contains answer, [function_call, verbose], query; in decreasing order, function_call and verbose in variable order */\n  isGroupLastMessage: boolean;\n  /** The last message of the current group. Type === 'answer' */\n  isGroupLastAnswerMessage: boolean;\n  /**\n   * Whether to hide the avatar\n   */\n  hideAvatar: boolean;\n  role: Message['role'];\n  type: Message['type'];\n  sectionId: string;\n  replyId: string;\n  botState: MessageExtraInfoBotState;\n  /**\n   * Whether there is an agent jump verbose message in the current group, which is used to determine whether to display the agent split line\n   */\n  beforeHasJumpVerbose: boolean;\n  verboseMsgType: VerboseMsgType | '';\n  source: MessageSource | undefined;\n  // Is the card disabled?\n  cardDisabled: boolean;\n}\n\nexport interface OnboardingSuggestionItem {\n  content: string;\n  id: string;\n}\n\ntype Expect<T extends true> = T extends true ? true : never;\n\n// eslint-disable-next-line @typescript-eslint/naming-convention, @typescript-eslint/no-unused-vars -- type structure checking\ntype _ = Expect<Message extends MessageIdStruct ? true : false>;\n\nexport interface SenderInfo {\n  url: string;\n  nickname: string;\n  id: string;\n  allowMention: boolean;\n  allowShare?: boolean;\n}\n\nexport interface UserSenderInfo\n  extends Omit<SenderInfo, 'revealPath' | 'allowMention'> {\n  userUniqueName: string;\n  userLabel: UserLabel | null;\n}\n\nexport type SenderInfoMap = Record<string, SenderInfo>;\nexport type UserInfoMap = Record<string, UserSenderInfo>;\n\nexport enum FileStatus {\n  Init,\n  Uploading,\n  Success,\n  Canceled,\n  Error,\n}\n\nexport enum FileType {\n  File = 'file',\n  Image = 'image',\n}\n\nexport interface BaseFileData {\n  id: string;\n  status: FileStatus;\n  percent: number;\n  uri: string | null;\n  file: File;\n}\n\n/**\n * Except the images are normal files\n */\nexport interface CommonFileData extends BaseFileData {\n  fileType: FileType.File;\n}\n\nexport interface ImageFileData extends BaseFileData {\n  meta: {\n    width: number;\n    height: number;\n  } | null;\n  fileType: FileType.Image;\n}\n\nexport type FileData = CommonFileData | ImageFileData;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createWithEqualityFn } from 'zustand/traditional';\nimport { devtools, subscribeWithSelector } from 'zustand/middleware';\nimport { produce } from 'immer';\n\nimport {\n  isAnswerFinishVerboseMessage,\n  isAllFinishVerboseMessage,\n} from '../utils/verbose';\nimport { type MessageIdStruct, type Message } from './types';\n\nexport type WaitingStoreStateAction = WaitingState & WaitingAction;\n\nexport interface Responding {\n  /** The original message, the reply_id */\n  replyId: string;\n  /** Reply to the message message_id\n   * Function call execution interval: [function_call (index = n), tool_response (index = n + 1) ] tmd\n   * Responding interval: function call & type = answer not is_finish\n   */\n  response: {\n    id: string;\n    type: Message['type'];\n    index: Message['index'];\n    streamPlugin: {\n      streamUuid: string;\n    } | null;\n  }[];\n}\n\nexport const enum WaitingPhase {\n  /** Regular process, no suggestions */\n  Formal = 'formal',\n  /** Generating suggestions */\n  Suggestion = 'suggestion',\n}\n\nexport interface Waiting {\n  /** Question message_id */\n  replyId: string;\n  /** Question local_message_id */\n  questionLocalMessageId?: string;\n  phase: WaitingPhase;\n}\n\n/**\n * Complete process: send - > ack -- > function call - > tool response - > answer is_finish - > follow_up - > pullingStatus settled\n *           |_sending_|___________________waiting__phase:formal_______________|_______waiting__phase:suggestion_____|\n *                            |___________________responding___________________|\n */\nexport interface WaitingState {\n  /**\n   * From start to send message to send successfully (received to ack)\n   */\n  sending: MessageIdStruct | null;\n  /**\n   * Waiting &! responding shows [...] Loading\n   * Waiting interval: [query sent, type = answer is_finish]\n   */\n  waiting: Waiting | null;\n  /**\n   * Generating reply now.\n   * Life: [Received reply, reply is_finish]\n   */\n  responding: Responding | null;\n}\n\ninterface WaitingAction {\n  startSending: (messageIdStruct: MessageIdStruct) => void;\n  clearSending: () => void;\n  startWaiting: (message: Message) => void;\n  updateWaiting: (message: Message) => void;\n  updateResponding: (message: Message) => void;\n  updateRespondingByImmer: (\n    updater: (waitingState: WaitingState) => void,\n  ) => void;\n  /** Note that if you need a responsive effect, you need to execute it directly in the useStore selector, otherwise it will not trigger render. */\n  getIsOnlyWaitingSuggestions: () => boolean;\n  clearAllUnsettledUnconditionally: () => void;\n  clearUnsettledByReplyId: (replyId: string) => void;\n  clearWaitingStore: () => void;\n  getIsSending: () => boolean;\n  getIsWaiting: (phase: WaitingPhase) => boolean;\n  getIsResponding: () => boolean;\n}\n\nexport const findRespondRecord = (\n  message: Message,\n  response: Responding['response'],\n) => response.find(i => i.id === message.message_id);\n\nconst findRespondByIndex = (idx: number, response: Responding['response']) =>\n  response.findIndex(i => i.index === idx);\n\nexport const getResponse = (\n  message: Message,\n): Responding['response'][number] => ({\n  index: message.index,\n  type: message.type,\n  id: message.message_id,\n  streamPlugin: message.extra_info.stream_plugin_running\n    ? {\n        streamUuid: message.extra_info.stream_plugin_running,\n      }\n    : null,\n});\n\nexport const createWaitingStore = (mark: string) => {\n  const useWaitingStore = createWithEqualityFn<WaitingState & WaitingAction>()(\n    devtools(\n      subscribeWithSelector((set, get) => ({\n        sending: null,\n        waiting: null,\n        responding: null,\n        startSending: messageIdStruct =>\n          set({ sending: messageIdStruct }, false, 'startSending'),\n        clearSending: () => set({ sending: null }, false, 'clearSending'),\n        getIsOnlyWaitingSuggestions: () => {\n          const { waiting } = get();\n          return waiting?.phase === WaitingPhase.Suggestion;\n        },\n        startWaiting: message =>\n          set(\n            {\n              waiting: {\n                replyId: message.message_id,\n                questionLocalMessageId: message.extra_info?.local_message_id,\n                phase: WaitingPhase.Formal,\n              },\n            },\n            false,\n            'setWaitingId',\n          ),\n        updateWaiting: message => {\n          const { reply_id } = message;\n          if (get().waiting?.replyId !== reply_id) {\n            return;\n          }\n          if (isAnswerFinishVerboseMessage(message)) {\n            set(\n              produce<WaitingState>(state => {\n                // It has been checked above, and it will not go here.\n                if (!state.waiting) {\n                  throw new Error('is not in waiting');\n                }\n                state.waiting.phase = WaitingPhase.Suggestion;\n              }),\n              false,\n              'updateWaiting',\n            );\n          }\n        },\n        updateResponding: message => {\n          set(\n            produce<WaitingState>(state => {\n              updateRespondingInImmer(state, message);\n            }),\n            false,\n            'updateResponding',\n          );\n        },\n        updateRespondingByImmer: updater => {\n          set(\n            produce<WaitingState>(state => updater(state)),\n            false,\n            'updateRespondingByImmer',\n          );\n        },\n        clearUnsettledByReplyId: replyId => {\n          set(\n            produce<WaitingState>(state => {\n              if (state.waiting?.replyId === replyId) {\n                state.waiting = null;\n              }\n              if (state.responding?.replyId === replyId) {\n                state.responding = null;\n              }\n            }),\n            false,\n            'clearAllUnsettledByReplyId',\n          );\n        },\n        clearAllUnsettledUnconditionally: () => {\n          set(\n            produce<WaitingState>(state => {\n              state.waiting = null;\n              state.responding = null;\n              state.sending = null;\n            }),\n            false,\n            'clearAllUnsettledUnconditionally',\n          );\n        },\n        clearWaitingStore: () => {\n          set({\n            sending: null,\n            waiting: null,\n            responding: null,\n          });\n        },\n        getIsSending: () => !!get().sending,\n        getIsWaiting: (phase: WaitingPhase) => get().waiting?.phase === phase,\n        getIsResponding: () => !!get().responding,\n      })),\n      {\n        name: `botStudio.ChatAreaWaiting.${mark}`,\n        enabled: IS_DEV_MODE,\n      },\n    ),\n  );\n\n  return useWaitingStore;\n};\n\nexport type WaitingStore = ReturnType<typeof createWaitingStore>;\n\nconst isAnswerMessageFinish = (message: Message) =>\n  message.type === 'answer' && message.is_finish;\n\nconst updateRespondingInImmer = (state: WaitingState, message: Message) => {\n  const { responding } = state;\n  const isAllFinish = isAllFinishVerboseMessage(message);\n\n  if (!responding) {\n    // type=answer & is_finish\n    if (isAllFinish) {\n      return;\n    }\n\n    // Only tool_response is an exception (interrupt scenario returns the first tool_response, just return directly)\n    if (message.type === 'tool_response') {\n      return;\n    }\n\n    // Enter\n    state.responding = {\n      replyId: message.reply_id,\n      response: [getResponse(message)],\n    };\n    return;\n  }\n\n  const currentReplyId = responding.replyId;\n  if (currentReplyId !== message.reply_id) {\n    console.error(\n      `updateRespondingInImmer not match reply id, income: ${message.reply_id}, record: ${responding?.replyId}`,\n    );\n    return;\n  }\n\n  // Answer end, interrupt finish package terminates reply state\n  if (isAllFinish) {\n    state.responding = null;\n    return;\n  }\n\n  // Processing answer not completed\n  if (message.type === 'answer') {\n    const record = findRespondRecord(message, responding.response);\n    if (!record) {\n      responding.response.push(getResponse(message));\n    }\n  }\n\n  if (isAnswerMessageFinish(message)) {\n    const record = findRespondRecord(message, responding.response);\n    if (!record) {\n      return;\n    }\n    const index = responding.response.indexOf(record);\n    if (index >= 0) {\n      responding.response.splice(index, 1);\n    }\n  }\n\n  if (message.type === 'tool_response') {\n    handleToolResponseMessage({\n      responding,\n      message,\n    });\n    return;\n  }\n\n  if (message.type === 'function_call') {\n    responding.response.push(getResponse(message));\n    return;\n  }\n};\nconst handleToolResponseMessage = ({\n  responding,\n  message,\n}: {\n  responding: Responding;\n  message: Message;\n}) => {\n  // TODO: Temporarily display loading according to ordinary plugins.\n  handleNormalPluginMessage({ responding, message });\n  // //plugin related news\n  // if (isNormalPlugin(message)) {\n  //   handleNormalPluginMessage({ responding, message });\n  //   return;\n  // }\n  // //3. End of streaming plugin\n  // if (isStreamPluginFinish(message)) {\n  //   handleStreamPluginMessage({ responding, message });\n  // }\n};\nconst handleNormalPluginMessage = ({\n  responding,\n  message,\n}: {\n  responding: Responding;\n  message: Message;\n}) => {\n  const curIndex = message.index;\n  if (typeof curIndex !== 'number') {\n    console.error(`unexpected empty index of ${message.type} ${message.index}`);\n    return;\n  }\n  const targetIndex = curIndex - 1;\n  const functionCallIndex = findRespondByIndex(\n    targetIndex,\n    responding.response,\n  );\n  if (functionCallIndex < 0) {\n    console.error(\n      `updateRespondingInImmer: cannot find related function call , expect index ${targetIndex}`,\n    );\n    return;\n  }\n  responding.response.splice(functionCallIndex, 1);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Cut a section of the size of the left and right sides of the center position from the list to reduce the amount of search calculation\n */\nexport const sliceArrayByIndexRange = <T>(\n  array: T[],\n  center: number,\n  side: number,\n) => {\n  const start = Math.max(center - side, 0);\n  const end = Math.min(center + side, array.length);\n  return array.slice(start, end);\n};\n\n/**\n * notice: execute mutable change\n */\nexport const uniquePush = <T extends string | number>(\n  arr: T[],\n  val: T,\n): void => {\n  if (arr.includes(val)) {\n    return;\n  }\n  arr.push(val);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type MessageBoxTheme } from '@coze-common/chat-uikit';\nimport { ContentType } from '@coze-common/chat-core';\n\nimport { type Message } from '../../store/types';\nimport { type PreferenceContextInterface } from '../../context/preference/types';\nimport { type OnParseReceiveMessageBoxTheme } from '../../context/chat-area-context/chat-area-callback';\n\nexport const getReceiveMessageBoxTheme = ({\n  message,\n  bizTheme,\n  onParseReceiveMessageBoxTheme,\n}: {\n  message: Message;\n  bizTheme: PreferenceContextInterface['theme'];\n  onParseReceiveMessageBoxTheme: OnParseReceiveMessageBoxTheme | undefined;\n}): MessageBoxTheme => {\n  const isThemeDisabled =\n    message.type === 'follow_up' || message.content_type === ContentType.Card;\n  const isBorderTheme = message.content_type === ContentType.Image;\n  const customParsed = onParseReceiveMessageBoxTheme?.({ message });\n\n  if (customParsed) {\n    return customParsed;\n  }\n\n  if (isBorderTheme) {\n    return 'border';\n  }\n\n  if (isThemeDisabled) {\n    return 'none';\n  }\n\n  //  After enabling uikit refactoring, home is whiteness and the rest of the scenes are grey\n  if (bizTheme === 'home') {\n    return 'whiteness';\n  }\n\n  return 'grey';\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const enum EventNames {\n  // resend message\n  RESEND_MESSAGE = 'resendMessage',\n  // Send a text message\n  SEND_TEXT_MESSAGE = 'sendTextMessage',\n  // Update card status\n  UPDATE_CARD_STATUS = 'updateCardStatus',\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const primitiveExhaustiveCheck = (_: never) => 0;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type ChatCore from '@coze-common/chat-core';\nimport { safeAsyncThrow } from '@coze-common/chat-area-utils';\n\nconst fakeChatCoreMark = Symbol('fake-chat-core');\n\nexport const getFakeChatCore = () => {\n  const fakeCore = {} as unknown as ChatCore;\n\n  return new Proxy(fakeCore, {\n    get(_, key) {\n      if (key === fakeChatCoreMark) {\n        return true;\n      }\n\n      const callTip = `This error is caused when calling: ${String(key)}`;\n      safeAsyncThrow(\n        `!!!chatCore not found, make sure to call chatArea hooks inside chatAreaProvider!!! ${callTip}`,\n      );\n\n      // It has been maximally compatible, I feel\n      return () => Object.create(null);\n    },\n  });\n};\n\nexport const getIsFakeChatCore = (core: ChatCore) =>\n  (core as unknown as { [fakeChatCoreMark]: boolean })[fakeChatCoreMark];\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport EventEmitter from 'eventemitter3';\nimport { type UploadPluginInterface } from '@coze-common/chat-core';\n\nimport { type EventPayloadMap } from '../service/upload-plugin';\n\nexport const fileManager = new EventEmitter();\n\nexport const enum FileManagerEventNames {\n  CANCEL_UPLOAD_FILE = 'CANCEL_UPLOAD_FILE',\n}\n\ninterface IFileUploaderMap {\n  [key: string]: UploadPluginInterface<EventPayloadMap>;\n}\n\nconst fileUploaderMap: IFileUploaderMap = {};\n\nexport const addFileUploader = ({\n  localMessageId,\n  uploader,\n}: {\n  localMessageId: string;\n  uploader: UploadPluginInterface<EventPayloadMap>;\n}) => {\n  fileUploaderMap[localMessageId] = uploader;\n};\n\nexport const removeFileUploader = (localMessageId?: string) => {\n  if (!localMessageId) {\n    return;\n  }\n  fileUploaderMap[localMessageId]?.cancel();\n  delete fileUploaderMap[localMessageId];\n};\n\nexport const removeAllFileUploader = () => {\n  Object.keys(fileUploaderMap).forEach(messageId =>\n    removeFileUploader(messageId),\n  );\n};\n\nexport const destroyFileManager = () => {\n  fileManager.removeAllListeners();\n  removeAllFileUploader();\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { VerboseMsgType } from '@coze-common/chat-core';\n\nimport {\n  getVerboseContentObj,\n  isStreamPluginFinish,\n  isVerboseContent,\n  isKnowledgeRecallVerboseContentDeprecated,\n} from '../verbose';\nimport { safeJSONParse } from '../safe-json-parse';\nimport { primitiveExhaustiveCheck } from '../exhaustive-check';\nimport type { Message } from '../../store/types';\nimport {\n  type FunctionCallMessageUnit,\n  type MessageExt,\n  MessageUnitRole,\n} from './types';\n\nexport const getMessageTimeCost = (ext?: MessageExt) => ext?.time_cost;\nexport const getMessageUnitsByFunctionCallMessageList = (\n  functionCallMessageList: Message[],\n) => {\n  // Generate messageUnits\n  const messageUnits = functionCallMessageList\n    .map((m, i) => {\n      const role = getRoleByMessage(m);\n      if (!role) {\n        return null;\n      }\n      return {\n        role,\n        llmOutput: m,\n        // Follow-up unified ID pair matching\n        callId: m.extra_info.call_id,\n        // TODO: [This method is to cover the bottom, and then gradually drop it, all use id matching] The message order is reversed, and the response message is in the first place.\n        apiIndexMark: role === MessageUnitRole.TOOL ? i - 1 : undefined,\n        time: getMessageTimeCost(m.extra_info),\n      };\n    })\n    .filter(Boolean) as FunctionCallMessageUnit[];\n\n  // Modify messageUnits according to tool_response\n  const modifiedMessageUnits = functionCallMessageList.reduceRight(\n    (acc, message, index) => {\n      modifyMessageUnitByToolResponseMessage(message, acc, index);\n      return acc;\n    },\n    messageUnits,\n  );\n\n  // The received message is a flashback and needs to be rendered in order.\n  return modifiedMessageUnits.reverse();\n};\n\n//Get the corresponding role according to the message\nconst getRoleByMessage = (message: Message) => {\n  const { type, content } = message;\n\n  if (type === 'knowledge') {\n    return MessageUnitRole.DATA_SET;\n  }\n  if (type === 'function_call') {\n    return MessageUnitRole.TOOL;\n  }\n\n  if (type !== 'verbose') {\n    return;\n  }\n\n  const parsedContent = safeJSONParse(content);\n\n  if (!isVerboseContent(parsedContent)) {\n    /**\n     * This is the legacy error verbose data, temporarily retained to make the online function normal\n     */\n    if (isKnowledgeRecallVerboseContentDeprecated(parsedContent)) {\n      return MessageUnitRole.DATA_SET;\n    }\n    return;\n  }\n\n  const { msg_type } = parsedContent;\n  if (msg_type === VerboseMsgType.HOOK_CALL) {\n    return MessageUnitRole.HOOKS;\n  }\n  if (msg_type === VerboseMsgType.KNOWLEDGE_RECALL) {\n    return MessageUnitRole.DATA_SET;\n  }\n\n  /** Verbose protocol to render */\n  if (\n    msg_type === VerboseMsgType.JUMP_TO ||\n    msg_type === VerboseMsgType.BACK_WORD ||\n    msg_type === VerboseMsgType.LONG_TERM_MEMORY\n  ) {\n    return MessageUnitRole.VERBOSE;\n  }\n\n  /**\n   * Do nothing with these two verbose messages\n   */\n  if (\n    msg_type === VerboseMsgType.GENERATE_ANSWER_FINISH ||\n    msg_type === VerboseMsgType.STREAM_PLUGIN_FINISH ||\n    msg_type === VerboseMsgType.INTERRUPT\n  ) {\n    return;\n  }\n\n  primitiveExhaustiveCheck(msg_type);\n\n  return;\n};\n\n// Index + 1, streamId bottom matching function_call, compatible scenes: ordinary scenes, streaming plug-ins\nconst findTargetToolUnit = (\n  messageUnits: FunctionCallMessageUnit[],\n  index: number,\n  streamUuid?: string,\n) =>\n  messageUnits.find<FunctionCallMessageUnit>(\n    (unit): unit is FunctionCallMessageUnit =>\n      unit.role === MessageUnitRole.TOOL &&\n      (streamUuid\n        ? unit.streamUuid === streamUuid\n        : unit.apiIndexMark === index),\n  );\n// function_call universal matching mechanism, id pair matching\nconst findTargetFunctionCall = (\n  messageUnits: FunctionCallMessageUnit[],\n  id?: string,\n) =>\n  messageUnits.find<FunctionCallMessageUnit>(\n    (unit): unit is FunctionCallMessageUnit =>\n      unit.role === MessageUnitRole.TOOL && unit.callId === id,\n  );\n\n// Match function_call id, match the id in the tool_response with it, and update the plugin results\nconst handelMatchCallId = (\n  message: Message,\n  messageUnits: FunctionCallMessageUnit[],\n) => {\n  const targetToolUnit = findTargetFunctionCall(\n    messageUnits,\n    message.extra_info.call_id,\n  );\n  if (!targetToolUnit) {\n    return;\n  }\n  targetToolUnit.apiResponse = message;\n  targetToolUnit.isFinish = true;\n  targetToolUnit.time = (\n    Number(targetToolUnit.time ?? '0') +\n    Number(getMessageTimeCost(message.extra_info) ?? '0')\n  ).toFixed(1);\n  return;\n};\n\n/** Process tool_response result, find the corresponding function call, and insert it into the output\n *  Scenario: ID pair matching, index + 1 normal matching, streaming plug-in verbose matching\n */\nconst modifyMessageUnitByToolResponseMessage = (\n  message: Message,\n  messageUnits: FunctionCallMessageUnit[],\n  index: number,\n) => {\n  // Plugin related news\n  // P0, priority matching function call_id\n  if (isHaveFunctionId(message)) {\n    handelMatchCallId(message, messageUnits);\n    return;\n  }\n  // 1. Non-streaming plugins\n  if (isNormalPlugin(message)) {\n    // Get target ToolUnit\n    const targetToolUnit = findTargetToolUnit(messageUnits, index);\n    if (!targetToolUnit) {\n      return;\n    }\n    targetToolUnit.apiResponse = message;\n    targetToolUnit.isFinish = true;\n    targetToolUnit.time = (\n      Number(targetToolUnit.time ?? '0') +\n      Number(getMessageTimeCost(message.extra_info) ?? '0')\n    ).toFixed(1);\n    return;\n  }\n  // 2. Start streaming plugins\n  if (isStreamPluginRunning(message)) {\n    // Get target ToolUnit\n    const targetToolUnit = findTargetToolUnit(messageUnits, index);\n    if (!targetToolUnit) {\n      return;\n    }\n    targetToolUnit.streamUuid = message.extra_info.stream_plugin_running;\n    targetToolUnit.apiResponse = message;\n    return;\n  }\n  // 2. End of streaming plugin\n  if (isStreamPluginFinish(message)) {\n    const messageContentObj =\n      getVerboseContentObj<VerboseMsgType.STREAM_PLUGIN_FINISH>(\n        message.content,\n      );\n    if (!messageContentObj) {\n      return;\n    }\n    const { dataObj } = messageContentObj;\n    if (!dataObj) {\n      return;\n    }\n    const { tool_output_content, uuid } = dataObj;\n    // Get target ToolUnit\n    const targetToolUnit = findTargetToolUnit(messageUnits, index, uuid);\n    if (!targetToolUnit) {\n      return;\n    }\n    targetToolUnit.isFinish = true;\n    targetToolUnit.apiResponse = {\n      ...message,\n      content: tool_output_content,\n    };\n    targetToolUnit.time = (\n      Number(targetToolUnit.time ?? '0') +\n      Number(getMessageTimeCost(message.extra_info) ?? '0')\n    ).toFixed(1);\n  }\n};\n\n// Is it a streaming plugin?\nexport function isStreamPlugin(message: Message): boolean {\n  return isStreamPluginRunning(message) || isStreamPluginFinish(message);\n}\n\nexport function isStreamPluginRunning(message: Message): boolean {\n  return (\n    message.type === 'tool_response' &&\n    !!message.extra_info.stream_plugin_running\n  );\n}\n\nexport function isNormalPlugin(message: Message): boolean {\n  return message.type === 'tool_response' && !isStreamPlugin(message);\n}\n\n// Is there a function_call ID match?\nexport function isHaveFunctionId(message: Message): boolean {\n  return message.type === 'tool_response' && !!message.extra_info.call_id;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ReactNode } from 'react';\n\nimport { type MockHitStatus } from '@coze-arch/bot-api/debugger_api';\nimport { type Layout } from '@coze-common/chat-uikit-shared';\n\nimport { type Message } from '../../store/types';\n\n// TODO: Needs to interface with server level\n\nexport type MessageExt = Message['extra_info'];\nexport enum MessageUnitRole {\n  DATA_SET = 'dataSet',\n  VERBOSE = 'verbose', //New debug protocol. For example: agent node jump\n  TOOL = 'tool',\n  HOOKS = 'hooks',\n}\n\nexport interface BaseMessageUnit {\n  timeIndexMark?: number;\n  time?: string;\n  tokens?: number;\n  agentID?: string;\n  agentName?: string;\n}\n\nexport interface FunctionCallMessageUnit extends BaseMessageUnit {\n  role: MessageUnitRole;\n  llmOutput: Message;\n  apiResponse?: Message;\n  apiIndexMark?: number;\n  // Streaming uuid\n  streamUuid?: string;\n  // Streaming plugin responses need to be updated verbose\n  isFinish?: boolean;\n  // function_call and tool_response matching IDs, common scheme\n  callId?: string;\n}\n\nexport interface MockHitInfo {\n  hitStatus?: MockHitStatus;\n  mockSetName?: string;\n}\n\nexport interface CollapsePanelHeaderProps {\n  messageUnit: FunctionCallMessageUnit;\n  isTopLevelOfTheNestedPanel: boolean;\n  isPanelOpen?: boolean;\n\n  /**\n   * Whether all tools in the conversation corresponding to the message were called successfully\n   */\n  isRelatedChatAllFunctionCallSuccess: boolean;\n\n  /**\n   * Whether the conversation corresponding to the message is over and not interrupted, the final answer has been returned\n   */\n  isRelatedChatComplete: boolean;\n\n  /**\n   * Is it the last function call message about the conversation?\n   */\n  isLatestFunctionCallOfRelatedChat: boolean;\n\n  /**\n   * Is this message from an ongoing conversation?\n   */\n  isMessageFromOngoingChat: boolean;\n  /**\n   * Is this set of messages pretending to interrupt the scene?\n   */\n  isFakeInterruptAnswer: boolean;\n  /**\n   * Can it be expanded?\n   */\n  expandable: boolean;\n\n  /*\n   * Function call hits mockset\n   */\n  hitMockSet?: boolean;\n  /**\n   * Is it a mobile end?\n   */\n  layout?: Layout;\n}\n\nexport type ProcessStatus =\n  | 'fail'\n  | 'default'\n  | 'loading'\n  | 'success'\n  | 'interrupt';\n\nexport interface THeaderConfig {\n  icon: ReactNode;\n  title: ReactNode;\n  status: ProcessStatus;\n}\n\n// interface return structure\nexport interface ExecuteDisplayName {\n  name_executed: string;\n  name_execute_failed: string;\n  name_executing: string;\n}\n\nexport interface HooksCallVerboseData {\n  type: string;\n  uri: string;\n  log_id: string;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function getNewConversationDomId(onboardingId?: string | null) {\n  if (!onboardingId) {\n    return '';\n  }\n\n  return `new-conversation-${onboardingId}`;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const isFileCountExceedsLimit = ({\n  fileCount,\n  fileLimit,\n  existingFileCount,\n}: {\n  fileCount: number;\n  fileLimit: number;\n  existingFileCount: number;\n}): boolean => {\n  const remainingCount = fileLimit - existingFileCount;\n  return fileCount > remainingCount;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type NonNullableType } from '../typing/util-types';\n\nexport const isValidContext = <T extends object>(\n  context: T,\n): context is NonNullableType<T> =>\n  Object.keys(context)\n    .map(keyName => context[keyName as keyof T])\n    .reduce(\n      (prevResult, currentProperty) => prevResult && currentProperty !== null,\n      true,\n    );\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nlet renderLogCount = 1;\nconst RENDER_TIP_COUNT = 2000;\n\nexport const localLog = (...args: unknown[]) => {\n  if (!IS_DEV_MODE) {\n    return;\n  }\n  if (renderLogCount % RENDER_TIP_COUNT === 0) {\n    console.log(\n      `%c ChatArea render:\\t${renderLogCount}`,\n      'background: #fcfaee; padding: 4px; border-radius: 3px;',\n    );\n  }\n  if (String(args?.[0]).includes('render')) {\n    renderLogCount += 1;\n  }\n  // console.debug(...args);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type MessageGroupMember, type MessageGroup } from '../../store/types';\n\nexport const flatMessageGroupIdList = (messageGroupList: MessageGroup[]) => {\n  const messageIdListArray = messageGroupList.map(messageGroup => {\n    const keys = Object.keys(\n      messageGroup.memberSet,\n    ) as (keyof MessageGroupMember)[];\n\n    return keys\n      .map(key => {\n        const messageIdOrList = messageGroup.memberSet[key];\n\n        if (Array.isArray(messageIdOrList)) {\n          return messageIdOrList;\n        }\n        if (messageIdOrList) {\n          return [messageIdOrList];\n        }\n        return [];\n      })\n      .flat();\n  });\n  return messageIdListArray.flat();\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { findMessageById } from '../message';\nimport { type MessageGroup, type Message } from '../../store/types';\nimport { flatMessageGroupIdList } from './flat-message-group-list';\n\nexport const getMessagesByGroup = (group: MessageGroup, messages: Message[]) =>\n  flatMessageGroupIdList([group])\n    .map(id => findMessageById(messages, id))\n    .filter((msg): msg is Message => Boolean(msg));\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { exhaustiveCheckForRecord } from '@coze-common/chat-area-utils';\n\nexport const checkNoneMessageGroupMemberLeft = exhaustiveCheckForRecord;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isEqual } from 'lodash-es';\nimport { safeAsyncThrow } from '@coze-common/chat-area-utils';\nimport { type Reporter } from '@coze-arch/logger';\n\nimport { isJumpToVerbose } from '../verbose';\nimport { stopResponding } from '../stop-responding';\nimport { findMessageById } from '../message';\nimport { FileManagerEventNames, fileManager } from '../file-manage';\nimport { type Message, type MessageGroup } from '../../store/types';\nimport { type ChatActionLockService } from '../../service/chat-action-lock';\nimport { ReportEventNames, getReportError } from '../../report-events';\nimport { type SystemLifeCycleService } from '../../plugin/life-cycle';\nimport { type StoreSet } from '../../context/chat-area-context/type';\nimport { type ChatAreaEventCallback } from '../../context/chat-area-context/chat-area-callback';\nimport { checkNoneMessageGroupMemberLeft } from './message-group-exhaustive-check';\n\nexport const findMessageGroupById = (\n  messageGroupList: MessageGroup[],\n  groupId: string,\n) => {\n  if (!groupId) {\n    return;\n  }\n  return messageGroupList.find(group => group.groupId === groupId);\n};\n\nexport const findMessageGroupByUserMessageId = (\n  messageGroupList: MessageGroup[],\n  userMessageId: string,\n) => {\n  if (!userMessageId) {\n    return;\n  }\n  return messageGroupList.find(\n    group => group.memberSet.userMessageId === userMessageId,\n  );\n};\n\nexport const isMessageGroupEqual = (\n  oldGroup: MessageGroup | undefined,\n  newGroup: MessageGroup | undefined,\n) => isEqual(oldGroup, newGroup);\n\n// eslint-disable-next-line max-lines-per-function -- 0\nexport const deleteMessageGroupById = async (\n  groupId: string,\n  context: {\n    reporter: Reporter;\n    storeSet: Pick<\n      StoreSet,\n      | 'useMessagesStore'\n      | 'useMessageMetaStore'\n      | 'useSuggestionsStore'\n      | 'useWaitingStore'\n      | 'useGlobalInitStore'\n    >;\n    eventCallback?: Pick<\n      ChatAreaEventCallback,\n      'onAfterStopResponding' | 'onDeleteMessage'\n    >;\n    lifeCycleService: SystemLifeCycleService;\n    chatActionLockService: ChatActionLockService;\n  },\n) => {\n  const {\n    storeSet,\n    reporter,\n    eventCallback,\n    lifeCycleService,\n    chatActionLockService,\n  } = context;\n  if (\n    chatActionLockService.answerAction.getIsLock(groupId, 'deleteMessageGroup')\n  ) {\n    return;\n  }\n  const {\n    useMessagesStore,\n    useMessageMetaStore,\n    useSuggestionsStore,\n    useGlobalInitStore,\n  } = storeSet;\n  const chatCore = useGlobalInitStore.getState().getChatCore();\n  const { getMessageGroupById, findMessage, isLastMessageGroup } =\n    useMessagesStore.getState();\n  const { clearSuggestions } = useSuggestionsStore.getState();\n\n  const { getMetaByMessage } = useMessageMetaStore.getState();\n\n  const messageGroup = getMessageGroupById(groupId);\n\n  if (!messageGroup) {\n    safeAsyncThrow(`message group not found, id: ${groupId}`);\n    return;\n  }\n\n  chatActionLockService.answerAction.lock(groupId, 'deleteMessageGroup');\n\n  const {\n    memberSet: {\n      userMessageId,\n      llmAnswerMessageIdList,\n      functionCallMessageIdList,\n      followUpMessageIdList,\n      ...rest\n    },\n  } = messageGroup;\n\n  checkNoneMessageGroupMemberLeft(rest);\n\n  const userMessage = userMessageId ? findMessage(userMessageId) : void 0;\n\n  const userMessageMeta = userMessageId\n    ? getMetaByMessage(userMessageId)\n    : void 0;\n\n  const isLast = isLastMessageGroup(groupId);\n\n  const { deleteMessageByIdList, deleteMessageById } =\n    useMessagesStore.getState();\n\n  try {\n    await lifeCycleService.message.onBeforeDeleteMessage({\n      ctx: {\n        messageGroup,\n      },\n    });\n\n    if (userMessage) {\n      fileManager.emit(\n        FileManagerEventNames.CANCEL_UPLOAD_FILE,\n        userMessage.extra_info.local_message_id,\n      );\n    }\n\n    /**\n     * Normal conversation scene and llm answer separate group scene\n     */\n    const expectToDeleteMessageId =\n      userMessageId || llmAnswerMessageIdList.at(0);\n\n    if (!expectToDeleteMessageId) {\n      throw new Error(\n        `failed to find message to delete ${expectToDeleteMessageId}`,\n      );\n    }\n\n    await Promise.all([\n      chatCore.deleteMessage({\n        message_id: expectToDeleteMessageId,\n      }),\n      userMessageMeta?.isGroupLastMessage && stopResponding(context),\n    ]);\n\n    if (userMessageId) {\n      deleteMessageById(userMessageId);\n    }\n    deleteMessageByIdList(functionCallMessageIdList);\n    deleteMessageByIdList(llmAnswerMessageIdList);\n    deleteMessageByIdList(followUpMessageIdList);\n\n    if (isLast) {\n      clearSuggestions();\n    }\n\n    eventCallback?.onDeleteMessage?.({\n      messageGroup,\n    });\n    await lifeCycleService.message.onAfterDeleteMessage({\n      ctx: {\n        messageGroup,\n      },\n    });\n\n    reporter.successEvent({ eventName: ReportEventNames.DeleteMessage });\n  } catch (e) {\n    await lifeCycleService.message.onDeleteMessageError({\n      messageGroup,\n    });\n    reporter.errorEvent({\n      eventName: ReportEventNames.DeleteMessage,\n      ...getReportError(e),\n    });\n  } finally {\n    chatActionLockService.answerAction.unlock(groupId, 'deleteMessageGroup');\n  }\n};\n\n// Is the message received the first answer?\nexport const isGroupFirstAnswer = (\n  messageGroupList: MessageGroup[],\n  messages: Message[],\n  message: Message,\n) => {\n  if (message.type !== 'answer') {\n    return false;\n  }\n  // Find the corresponding group according to the message\n  const targetGroup = messageGroupList.find(\n    ({ memberSet }) => memberSet.userMessageId === message.reply_id,\n  );\n  if (!targetGroup) {\n    return false;\n  }\n  const answers = targetGroup.memberSet.llmAnswerMessageIdList\n    .map(id => findMessageById(messages, id))\n    .map(m => m?.type === 'answer' && m);\n  // There is no first answer, indicating that the current answer is the first\n  const hasNoAnswer = answers.length === 0;\n  const firstAnswer = answers.at(-1) || null;\n  const isFirstAnswer = firstAnswer?.message_id === message.message_id;\n  return hasNoAnswer || isFirstAnswer;\n};\n\nexport const findGroupJumpVerbose = (\n  messageGroupList: MessageGroup[],\n  messages: Message[],\n  message: Message,\n) => {\n  const targetGroup = messageGroupList.find(\n    group => group.memberSet.userMessageId === message.reply_id,\n  );\n  if (!targetGroup) {\n    return;\n  }\n  return targetGroup.memberSet.functionCallMessageIdList\n    .map(id => findMessageById(messages, id))\n    .find(m => m && isJumpToVerbose(m) && m);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type Message } from '../store/types';\n\nconst functionCallTypes: Message['type'][] = [\n  'function_call',\n  // Partial verbose is used to show intermediate states, like function_call\n  'verbose',\n  'tool_response',\n  'knowledge',\n];\n\nexport const getIsFunctionCallType = (type: Message['type']) =>\n  functionCallTypes.includes(type);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  ContentType,\n  type MessageSource,\n  messageSource,\n} from '@coze-common/chat-core';\nimport { safeAsyncThrow } from '@coze-common/chat-area-utils';\nimport { I18n } from '@coze-arch/i18n';\nimport { Toast } from '@coze-arch/coze-design';\n\nimport {\n  type CardMessage,\n  type FileData,\n  type FileMessage,\n  type ImageMessage,\n  type Message,\n  type MessageIdStruct,\n  type MessageMeta,\n  type MultimodalMessage,\n  type TextMessage,\n} from '../store/types';\nimport { type ChatAreaConfigs } from '../context/chat-area-context/type';\nimport { getIsFunctionCallType } from './function-call-message-type';\n\nexport const getMessageUniqueKey = (message: MessageIdStruct): string => {\n  if (message.message_id) {\n    return message.message_id;\n  }\n  const localMessageId = message.extra_info.local_message_id;\n  if (!localMessageId) {\n    throw new Error('message without any id');\n  }\n  return localMessageId;\n};\n\nexport const findMessageByIdStruct = <Msg extends MessageIdStruct>(\n  messages: Msg[],\n  idStruct: MessageIdStruct,\n) => {\n  const messageId = idStruct.message_id;\n  const item = findMessageById(messages, messageId);\n  if (item !== undefined) {\n    return item;\n  }\n  const localMessageId = idStruct.extra_info.local_message_id;\n  return findMessageById(messages, localMessageId);\n};\n\nexport const findMessagesByReplyId = <Msg extends Pick<Message, 'reply_id'>>(\n  messages: Msg[],\n  replyId: string,\n) => messages.filter(message => message.reply_id === replyId);\n\nexport const findMessageIndexByIdStruct = <Msg extends MessageIdStruct>(\n  messages: Msg[],\n  idStruct: MessageIdStruct,\n) => {\n  const messageId = idStruct.message_id;\n  const idx = findMessageIndexById(messages, messageId);\n  if (idx >= 0) {\n    return idx;\n  }\n  const localMessageId = idStruct.extra_info.local_message_id;\n  return findMessageIndexById(messages, localMessageId);\n};\n\nexport const checkMessageHasUniqId = <Msg extends MessageIdStruct>(\n  msg: Msg,\n  id: string,\n) => msg.message_id === id || msg.extra_info.local_message_id === id;\n\nexport const findMessageById = <Msg extends MessageIdStruct>(\n  messages: Msg[],\n  id: string,\n) => {\n  if (!id) {\n    return;\n  }\n  return messages.find(msg => checkMessageHasUniqId(msg, id));\n};\n\nexport const findMessageIndexById = <Msg extends MessageIdStruct>(\n  messages: Msg[],\n  id: string,\n) => {\n  if (!id) {\n    return -1;\n  }\n  return messages.findIndex(msg => checkMessageHasUniqId(msg, id));\n};\n\nexport const getIsAnswer = (message?: Message): boolean =>\n  Boolean(message && message.type === 'answer');\n\n// text message\nexport const getIsTextMessage = (message?: Message): message is TextMessage =>\n  message?.content_type === ContentType.Text;\n\n// file message\nexport const getIsFileMessage = (message?: Message): message is FileMessage =>\n  message?.content_type === ContentType.File;\n\n// picture message\nexport const getIsImageMessage = (message?: Message): message is ImageMessage =>\n  message?.content_type === ContentType.Image;\n\n// Card message\nexport const getIsCardMessage = (message?: Message): message is CardMessage =>\n  message?.content_type === ContentType.Card;\n\n// Suggestion message\nexport const getIsSuggestions = (message?: Message): message is TextMessage =>\n  message?.content_type === ContentType.Text && message.type === 'follow_up';\n\nexport const getIsMultimodalMessage = (\n  message?: Message,\n): message is MultimodalMessage => message?.content_type === ContentType.Mix;\n\n/** Unconditional, must hide */\nconst hiddenMessageType: Message['type'][] = ['tool_response'];\n\n/**\n * Used for message list filtering to display messages.\n * This layer is the first screening, and the message box will be further filtered.\n *\n * Filter out based on rules:\n * 1. Must not display type (tool_response)\n * 2. Undisplayed type (function call) if from history\n */\nexport const getIsVisibleMessageMeta = (\n  meta: MessageMeta,\n  configs?: Partial<ChatAreaConfigs>,\n) => {\n  if (hiddenMessageType.includes(meta.type)) {\n    return false;\n  }\n\n  const { showFunctionCallDetail = true } = configs ?? {};\n\n  if (\n    !showFunctionCallDetail &&\n    getIsFunctionCallType(meta.type) &&\n    !meta.isFunctionCalling\n  ) {\n    return false;\n  }\n\n  return true;\n};\n\ntype MessageTestField = keyof Pick<Message, 'role' | 'type' | 'content'>;\n// spot check attributes\nconst messageTestFields: MessageTestField[] = ['content', 'type', 'role'];\n\nexport const getIsValidMessage = (\n  struct?: MessageIdStruct,\n): struct is Message =>\n  struct !== undefined && messageTestFields.every(field => field in struct);\n\nexport const getFinalAnswerMessageAndMetaList = ({\n  messageList,\n  metaList,\n}: {\n  messageList: Message[];\n  metaList: MessageMeta[];\n}): [Message[], MessageMeta[]] => {\n  const isValidMessage = (item: Message | MessageMeta) =>\n    (item.role === 'assistant' && item.type === 'answer') ||\n    getIsTriggerMessage(item);\n\n  const finalMessageList = messageList.filter(isValidMessage);\n  const finalMetaList = metaList.filter(isValidMessage);\n\n  return [finalMessageList, finalMetaList];\n};\n\nexport const serializeIdStruct = (msg: MessageIdStruct) =>\n  `message_id: ${msg.message_id}, local message id: ${msg.extra_info.local_message_id}`;\n\nexport const getSendMultimodalMessageStrategy = (\n  text: string,\n  fileDataList: FileData[],\n) => {\n  const hasFile = Boolean(fileDataList.length);\n  const hasText = Boolean(text.trim());\n\n  if (!hasFile && !hasText) {\n    safeAsyncThrow('invalid send message case');\n  }\n\n  if (!hasFile) {\n    return 'text';\n  }\n\n  // if (!hasText) {\n  //   const fileTypeSet = new Set(fileDataList.map(data => data.fileType));\n  //   if (fileTypeSet.size === 1) {\n  //     return fileTypeSet.has(FileType.File) ? 'file' : 'image';\n  //   }\n  // }\n\n  return 'multimodal';\n};\n\nexport const convertMessageSource = (source: number): MessageSource => {\n  const values: number[] = Object.values(messageSource);\n  if (!values.includes(source)) {\n    throw new Error(`unhandled message: ${messageSource}`);\n  }\n  return source as MessageSource;\n};\n\nexport const getIsPureAnswerMessage = ({\n  type,\n  source,\n}: Pick<Message, 'type' | 'source'>): boolean => {\n  if (type !== 'answer') {\n    return false;\n  }\n  if (source === undefined) {\n    return true;\n  }\n  return source === messageSource.Chat;\n};\n\nexport const getIsTriggerMessage = ({\n  type,\n  source,\n}: Pick<Message, 'type' | 'source'>) =>\n  type === 'task_manual_trigger' || source === messageSource.TaskManualTrigger;\n\nexport const getIsNotificationMessage = ({ source }: Pick<Message, 'source'>) =>\n  source === messageSource.Notice;\nexport const getIsAsyncResultMessage = ({ source }: Pick<Message, 'source'>) =>\n  source === messageSource.AsyncResult;\n\n// Card disabled logic:\n// 1. card message\n// 2. Not the last item in the message list with type answer or role user\nexport const getIsCardDisabled = (\n  index: number,\n  messageList: Message[],\n): boolean => {\n  const message = messageList[index];\n\n  if (!message) {\n    throw new Error(`cannot find message of index: ${index}`);\n  }\n  if (message.type !== 'answer') {\n    return false;\n  }\n\n  const isCardContent = getIsCardMessage(message);\n\n  const isNotFirstAnswerQuestion =\n    messageList\n      .filter(item => item.type === 'answer' || item.role === 'user')\n      ?.at(0)?.message_id !== message.message_id;\n\n  return isCardContent && isNotFirstAnswerQuestion;\n};\n\nconst getToastI18nMap = () => ({\n  VOICE_NOT_RECOGNIZE: I18n.t('chat_voice_input_toast_no_content_recognized'),\n  TOKEN_INSUFFICIENT_VOICE: I18n.t('coze_free_credits_insufficient'),\n  PRO_TOKEN_INSUFFICIENT_VOICE: I18n.t('coze_pro_payment_overdue'),\n});\nexport const toastBySendMessageResult = (\n  result: 'LOCKED' | undefined | keyof ReturnType<typeof getToastI18nMap>,\n) => {\n  if (result === 'LOCKED' || typeof result === 'undefined') {\n    return;\n  }\n  const i18nMap = getToastI18nMap();\n  Toast.error({ content: i18nMap[result], showClose: false });\n};\n\nexport const isFallbackErrorMessage = (message: Pick<Message, 'message_id'>) =>\n  /** If it is an error cover message, it is fixed to the end of the _error, which has been agreed with the server level */\n  message.message_id.endsWith('_error');\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { cloneDeep } from 'lodash-es';\nimport { FILE_TYPE_CONFIG, FileTypeEnum } from '@coze-common/chat-core';\nimport { type ContentType, type Message } from '@coze-common/chat-core';\n\nexport const addFileType = (fileMessage: Message<ContentType.File>) => {\n  const copiedFileMessage = cloneDeep(fileMessage);\n\n  if (\n    !copiedFileMessage?.content_obj?.file_list ||\n    !copiedFileMessage?.content_obj?.file_list.length\n  ) {\n    return copiedFileMessage;\n  }\n\n  const fileList = copiedFileMessage?.content_obj?.file_list;\n\n  for (const targetFile of fileList) {\n    if (!targetFile) {\n      return copiedFileMessage;\n    }\n\n    const { file_name, file_type } = targetFile;\n\n    // TODO: Let's discuss the implementation here again\n    const fileType =\n      FILE_TYPE_CONFIG.find(\n        c =>\n          c.fileType === file_type ||\n          c.accept.some(ext => file_name.endsWith(ext)),\n      )?.fileType ?? FileTypeEnum.DEFAULT_UNKNOWN;\n\n    targetFile.file_type = fileType;\n  }\n\n  copiedFileMessage.content = JSON.stringify(copiedFileMessage.content_obj);\n\n  return copiedFileMessage;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { cloneDeep } from 'lodash-es';\nimport { type ContentType } from '@coze-common/chat-core';\n\nimport { type FileStatus, type Message } from '../store/types';\nimport { addFileType } from './add-file-type';\n\nexport const modifyFileMessagePercentAndStatus = (\n  fileMessage: Message<ContentType.File, unknown>,\n  { percent, status }: { percent: number; status: FileStatus },\n) => {\n  const { content_obj } = addFileType(fileMessage);\n\n  const newContent = {\n    file_list: content_obj.file_list.map(fileList => ({\n      ...fileList,\n      upload_percent: percent,\n      upload_status: status,\n    })),\n  };\n\n  return cloneDeep({\n    ...fileMessage,\n    content_obj: newContent,\n    content: JSON.stringify(newContent),\n  });\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst proxyCache = new WeakMap<object, any>();\n\nconst proxyIdentifier = Symbol('proxy-freeze-identifier');\n\n/** Intercepts direct modifications to objects (including arrays); does not handle classes */\nexport function proxyFreeze<T extends object>(target: T, path = 'obj') {\n  if (\n    !IS_DEV_MODE ||\n    target === undefined ||\n    target === null ||\n    typeof target !== 'object'\n  ) {\n    return target;\n  }\n\n  if (proxyCache.has(target)) {\n    return proxyCache.get(target) as T;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-expect-error\n  if (target && target[proxyIdentifier]) {\n    return target;\n  }\n\n  for (const key of Object.keys(target)) {\n    if (!Object.getOwnPropertyDescriptor(target, key)?.writable) {\n      continue;\n    }\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n    // @ts-expect-error\n    target[key] = proxyFreeze(target[key], `${path}.${key}`);\n  }\n\n  const proxyTarget = new Proxy(target, {\n    set: (_, prop) => {\n      console.error(`!!! ${path}.${String(prop)}`);\n      return false;\n    },\n\n    get: (curTarget, key) => {\n      if (key === proxyIdentifier) {\n        return true;\n      }\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-expect-error\n      return curTarget[key];\n    },\n  });\n\n  proxyCache.set(target, proxyTarget);\n  return proxyTarget;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const safeJSONParse = (value?: string): unknown => {\n  if (!value) {\n    return void 0;\n  }\n  try {\n    return JSON.parse(value);\n  } catch {\n    return void 0;\n  }\n};\n\nexport const safeJSONParseV2 = <T = unknown>(\n  value: string,\n  fallback: T | null,\n):\n  | {\n      parseSuccess: true;\n      useFallback: false;\n      value: T;\n    }\n  | {\n      parseSuccess: false;\n      useFallback: true;\n      value: T;\n    }\n  | {\n      parseSuccess: false;\n      useFallback: false;\n      value: null;\n    } => {\n  try {\n    return {\n      parseSuccess: true,\n      value: JSON.parse(value),\n      useFallback: false,\n    };\n  } catch (error) {\n    if (fallback !== null) {\n      return {\n        parseSuccess: false,\n        useFallback: true,\n        value: fallback,\n      };\n    }\n    return {\n      parseSuccess: false,\n      useFallback: false,\n      value: null,\n    };\n  }\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const enum StopRespondingErrorScene {\n  NoWaiting = 'noWaiting',\n  CatchError = 'catchError',\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type ChatCore from '@coze-common/chat-core';\nimport { type Reporter } from '@coze-arch/logger';\n\nimport { type WaitingStore, type Waiting } from '../store/waiting';\nimport { type Message } from '../store/types';\nimport { type MessagesStore } from '../store/messages';\nimport { ReportEventNames, getReportError } from '../report-events';\nimport { type SystemLifeCycleService } from '../plugin/life-cycle';\nimport { StopRespondingErrorScene } from '../plugin/constants/life-cycle-context';\nimport { getLastPureAnswerMessage } from '../hooks/messages/use-anwer-message-helper';\nimport { type StoreSet } from '../context/chat-area-context/type';\nimport { type ChatAreaEventCallback } from '../context/chat-area-context/chat-area-callback';\nimport { getMessagesByGroup } from './message-group/get-message-by-group';\nimport { findMessageById } from './message';\n\n/**\n * @Deprecated No place to use\n */\nexport const getBreakRespondingInfo = (param: {\n  responding: ReturnType<WaitingStore['getState']>['responding'];\n  messages: Message[];\n}) => {\n  const { responding, messages } = param;\n  if (!responding) {\n    return null;\n  }\n  const { replyId, response } = responding;\n  // Question message\n  const questionMessage = findMessageById(messages, replyId);\n  // Answer the message\n  const respondingMessages = response\n    .map(({ id }) => findMessageById(messages, id))\n    .filter((m): m is Message => !!m);\n  return {\n    questionMessage,\n    respondingMessages,\n  };\n};\n\nexport const breakAccurately = async ({\n  finalAnswer,\n  waiting,\n  chatCore,\n  reporter,\n}: {\n  finalAnswer: Message;\n  waiting: Waiting | null;\n  chatCore: ChatCore;\n  reporter: Reporter;\n}) => {\n  try {\n    await chatCore.breakMessage({\n      query_message_id: waiting?.replyId || '',\n      local_message_id: waiting?.questionLocalMessageId || '',\n      answer_message_id: finalAnswer.message_id || '',\n      broken_pos: finalAnswer.content?.length || 0,\n    });\n    reporter.successEvent({ eventName: ReportEventNames.BreakMessage });\n  } catch (e) {\n    reporter.errorEvent({\n      eventName: ReportEventNames.BreakMessage,\n      ...getReportError(e),\n    });\n  }\n};\n\nexport const breakGenerally = async ({\n  waiting,\n  chatCore,\n  reporter,\n}: {\n  waiting: Waiting | null;\n  chatCore: ChatCore;\n  reporter: Reporter;\n}) => {\n  try {\n    await chatCore.breakMessage({\n      query_message_id: waiting?.replyId || '',\n      // If you enter the suggestion generation stage, you should not need to fall back to the local message id.\n      local_message_id: waiting?.questionLocalMessageId || '',\n    });\n    reporter.successEvent({\n      eventName: ReportEventNames.BreakMessageAccurately,\n    });\n  } catch (e) {\n    reporter.errorEvent({\n      eventName: ReportEventNames.BreakMessageAccurately,\n      ...getReportError(e),\n    });\n  }\n};\n\n// Break the message, break the current reply\nexport const stopResponding = async (context: {\n  storeSet: Pick<\n    StoreSet,\n    'useWaitingStore' | 'useMessagesStore' | 'useGlobalInitStore'\n  >;\n  eventCallback?: Pick<ChatAreaEventCallback, 'onAfterStopResponding'>;\n  reporter: Reporter;\n  lifeCycleService: SystemLifeCycleService;\n}) => {\n  const {\n    storeSet: { useGlobalInitStore, useMessagesStore, useWaitingStore },\n    reporter,\n    lifeCycleService,\n  } = context;\n  await lifeCycleService.command.onBeforeStopResponding();\n  const chatCore = useGlobalInitStore.getState().getChatCore();\n  const { waiting, clearAllUnsettledUnconditionally } =\n    useWaitingStore.getState();\n  const { updateMessage } = useMessagesStore.getState();\n\n  const finalAnswer = getLastPureAnswerMessage(\n    useMessagesStore,\n    waiting?.replyId,\n  );\n\n  if (!waiting) {\n    // It may be normal, not in the conversation.\n    console.log('call stop, but not found waiting');\n    await lifeCycleService.command.onStopRespondingError({\n      ctx: {\n        scene: StopRespondingErrorScene.NoWaiting,\n      },\n    });\n    return;\n  }\n\n  clearAllUnsettledUnconditionally();\n\n  // Multiple answers, only the latest answers\n  try {\n    if (finalAnswer) {\n      await breakAccurately({ waiting, finalAnswer, chatCore, reporter });\n      updateMessage({ ...finalAnswer, is_finish: true });\n    } else {\n      await breakGenerally({ waiting, chatCore, reporter });\n    }\n  } catch {\n    await lifeCycleService.command.onStopRespondingError({\n      ctx: {\n        scene: StopRespondingErrorScene.CatchError,\n      },\n    });\n  }\n  invokeOnAfterStopRespondingCallback(waiting.replyId, context);\n};\n\n/** Waiting replyId must be passed in old and cannot be read from store */\nconst invokeOnAfterStopRespondingCallback = async (\n  brokenReplyId: string,\n  chatAreaContext: {\n    eventCallback?: Pick<ChatAreaEventCallback, 'onAfterStopResponding'>;\n    storeSet: Pick<Required<StoreSet>, 'useMessagesStore'>;\n    lifeCycleService: SystemLifeCycleService;\n  },\n) => {\n  const {\n    eventCallback: { onAfterStopResponding: onAfterStopRespondingOld } = {},\n    storeSet: { useMessagesStore },\n    lifeCycleService,\n  } = chatAreaContext;\n\n  const ctx = {\n    brokenReplyId,\n    brokenFlattenMessageGroup: getBreakFlattenMessageGroup(\n      brokenReplyId,\n      useMessagesStore,\n    ),\n  };\n\n  onAfterStopRespondingOld?.(ctx);\n  await lifeCycleService.command.onAfterStopResponding({\n    ctx,\n  });\n};\n\nexport const getBreakFlattenMessageGroup = (\n  brokenReplyId: string,\n  useMessagesStore: MessagesStore,\n): null | Message[] => {\n  const { getMessageGroupById, messages } = useMessagesStore.getState();\n  const group = getMessageGroupById(brokenReplyId);\n  if (!group) {\n    return null;\n  }\n  return getMessagesByGroup(group, messages);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { type ClipboardEvent } from 'react';\n\nimport { isObject } from 'lodash-es';\nimport {\n  getUploader,\n  type CozeUploader,\n  type EventPayloadMaps,\n} from '@coze-studio/uploader-adapter';\nimport { DEFAULT_MAX_FILE_SIZE } from '@coze-common/chat-uikit-shared';\nimport { SUCCESS_FILE_ICON_MAP } from '@coze-common/chat-uikit';\nimport {\n  type TFileTypeConfig,\n  ContentType,\n  type TextMixItem,\n  type TextAndFileMixMessagePropsFilePayload,\n  type TextAndFileMixMessagePropsImagePayload,\n  type ImageModel,\n  type ImageMixItem,\n  type FileModel,\n  type FileMixItem,\n  type NormalizedMessagePropsPayload,\n  type MessageMentionListFields,\n} from '@coze-common/chat-core';\nimport { FILE_TYPE_CONFIG, FileTypeEnum } from '@coze-common/chat-core';\nimport { safeAsyncThrow } from '@coze-common/chat-area-utils';\nimport { type GetUploadAuthTokenData } from '@coze-arch/bot-api/developer_api';\nimport { DeveloperApi } from '@coze-arch/bot-api';\n\nimport { FileType, type FileData, type ImageFileData } from '../store/types';\nimport { getReportError } from '../report-events';\nimport { UPLOAD_FILE_TIMEOUT } from '../constants/file';\n\ntype UploaderInstance = CozeUploader;\nconst removeAllListeners = (instance: UploaderInstance) => {\n  instance.removeAllListeners('stream-progress');\n  instance.removeAllListeners('complete');\n  instance.removeAllListeners('error');\n  instance.removeAllListeners('progress');\n};\n\n// eslint-disable-next-line max-lines-per-function\nexport function uploadFile({\n  file,\n  fileType = 'image',\n  userId,\n  signal,\n  onProgress,\n  onUploaderReady,\n  onUploadError,\n  onGetTokenError,\n  onSuccess,\n}: {\n  file: File;\n  fileType?: 'image' | 'object';\n  userId: string;\n  signal: AbortSignal;\n  onProgress?: (event: EventPayloadMaps['progress']) => void;\n  onUploaderReady?: (uploader: UploaderInstance) => void;\n  onUploadError?: (event: EventPayloadMaps['error']) => void;\n  onGetTokenError?: (error: Error) => void;\n  onSuccess?: (event: EventPayloadMaps['complete']) => void;\n}) {\n  return new Promise<void>(resolve => {\n    let bytedUploader: UploaderInstance | null = null;\n    let shouldContinue = true;\n    signal?.addEventListener('abort', () => {\n      bytedUploader?.cancel();\n      shouldContinue = false;\n      if (bytedUploader) {\n        removeAllListeners(bytedUploader);\n      }\n      resolve();\n    });\n\n    const getToken = async () => {\n      try {\n        const dataAuth = await DeveloperApi.GetUploadAuthToken(\n          {\n            scene: 'bot_task',\n          },\n          { timeout: UPLOAD_FILE_TIMEOUT },\n        );\n        const result = dataAuth.data;\n\n        if (!result) {\n          throw new Error('Invalid GetUploadAuthToken Response');\n        }\n\n        return result;\n      } catch (e) {\n        onGetTokenError?.(getReportError(e).error);\n      }\n    };\n\n    const upload = (authToken: GetUploadAuthTokenData) => {\n      const { service_id, upload_host, auth, schema } =\n        authToken as GetUploadAuthTokenData & { schema: string };\n\n      bytedUploader = getUploader(\n        {\n          schema,\n          useFileExtension: true,\n          // Solve the error problem:\n          userId,\n          appId: APP_ID,\n          // cp-disable-next-line\n          imageHost: `https://${upload_host}`, //imageX upload required\n          imageConfig: {\n            serviceId: service_id || '', // The service id applied for in the video cloud.\n          },\n          objectConfig: {\n            serviceId: service_id || '',\n          },\n          imageFallbackHost: IMAGE_FALLBACK_HOST,\n          region: BYTE_UPLOADER_REGION,\n          uploadTimeout: UPLOAD_FILE_TIMEOUT,\n        },\n        IS_OVERSEA,\n      );\n\n      onUploaderReady?.(bytedUploader);\n\n      bytedUploader.on('complete', inform => {\n        onSuccess?.(inform as any);\n        resolve();\n      });\n\n      bytedUploader.on('error', inform => {\n        onUploadError?.(inform as any);\n      });\n\n      bytedUploader.on('progress', inform => {\n        onProgress?.(inform as any);\n      });\n\n      const fileKey = bytedUploader.addFile({\n        file,\n        stsToken: {\n          CurrentTime: auth?.current_time || '',\n          ExpiredTime: auth?.expired_time || '',\n          SessionToken: auth?.session_token || '',\n          AccessKeyId: auth?.access_key_id || '',\n          SecretAccessKey: auth?.secret_access_key || '',\n        },\n        type: fileType, // Upload file type, three optional values: video (video or audio, default), image (picture), object (normal file)\n      });\n\n      bytedUploader.start(fileKey);\n    };\n    const checkShouldContinue = () => shouldContinue;\n    const start = async () => {\n      if (!checkShouldContinue()) {\n        return;\n      }\n      const authData = await getToken();\n      if (!authData) {\n        return;\n      }\n      if (!checkShouldContinue()) {\n        return;\n      }\n      try {\n        upload(authData);\n      } catch (e) {\n        safeAsyncThrow(\n          `upload error: ${e instanceof Error ? e.message : String(e)}`,\n        );\n      }\n    };\n\n    start();\n  });\n}\n\nexport const isDirectory = (item?: DataTransferItem | null) => {\n  if (typeof item?.webkitGetAsEntry === 'function') {\n    return Boolean(item.webkitGetAsEntry()?.isDirectory);\n  }\n  return false;\n};\n\nexport const getFileListByDrag = (e: HTMLElementEventMap['drop']): File[] => {\n  const fileList = e.dataTransfer?.files;\n\n  const itemList = Array.from(e.dataTransfer?.items ?? []);\n\n  return Array.from(fileList ?? []).filter(\n    (file, index): file is File =>\n      Boolean(file) && !isDirectory(itemList[index]),\n  );\n};\n\nexport const getFileListByPaste = (\n  e: ClipboardEvent<HTMLTextAreaElement>,\n): File[] => {\n  const itemList = Array.from(e.clipboardData?.items ?? []);\n\n  return Array.from(itemList)\n    .map(item => item.getAsFile())\n    .filter(\n      (file, index): file is File =>\n        Boolean(file) && !isDirectory(itemList[index]),\n    );\n};\n\nexport const getFileTypConfig = (file: File) =>\n  FILE_TYPE_CONFIG.find(\n    config =>\n      config.judge?.(file) ||\n      config.accept.some(extension => file.name.endsWith(extension)),\n  );\n\nexport const isFileSizeNotExceed = (file: File) =>\n  file.size <= DEFAULT_MAX_FILE_SIZE;\n\nexport const isNotEmptyFile = (file: File) => file.size > 0;\n\nexport const checkHasFileOnDrag = (e: HTMLElementEventMap['drag']) =>\n  // The basis for the judgment is to directly look at the type explanation of types\n  Boolean(e.dataTransfer?.types.includes('Files'));\n\nexport const formatFileDataListToMessagePayload = (\n  fileDataList: FileData[],\n): (\n  | TextAndFileMixMessagePropsFilePayload\n  | TextAndFileMixMessagePropsImagePayload\n)[] =>\n  fileDataList.map(data => {\n    const { uri } = data;\n    if (!uri) {\n      throw new Error('failed to get file uri');\n    }\n    if (data.fileType === FileType.File) {\n      const filePayload: TextAndFileMixMessagePropsFilePayload = {\n        type: ContentType.File,\n        file: data.file,\n        uri,\n      };\n      return filePayload;\n    }\n    const { meta } = data;\n    const imagePayload: TextAndFileMixMessagePropsImagePayload = {\n      type: ContentType.Image,\n      file: data.file,\n      uri,\n      width: meta?.width ?? 0,\n      height: meta?.height ?? 0,\n    };\n    return imagePayload;\n  });\n\nexport const isMultimodalContentListLike = (\n  value: unknown,\n): value is { item_list: unknown[] } =>\n  isObject(value) && 'item_list' in value && Array.isArray(value.item_list);\n\nexport const isTextMixItem = (value: unknown): value is TextMixItem =>\n  isObject(value) &&\n  'type' in value &&\n  'text' in value &&\n  value.type === ContentType.Text;\n\nexport const isImageModel = (value: unknown): value is ImageModel =>\n  isObject(value) &&\n  'key' in value &&\n  'image_thumb' in value &&\n  'image_ori' in value;\n\nexport const isImageMixItem = (value: unknown): value is ImageMixItem =>\n  isObject(value) &&\n  'type' in value &&\n  'image' in value &&\n  isImageModel(value.image) &&\n  value.type === ContentType.Image;\n\nexport const isFileModel = (value: unknown): value is FileModel =>\n  isObject(value) &&\n  'file_key' in value &&\n  'file_name' in value &&\n  'file_type' in value &&\n  'file_size' in value &&\n  'file_url' in value;\n\nexport const isFileMixItem = (value: unknown): value is FileMixItem =>\n  isObject(value) &&\n  'type' in value &&\n  'file' in value &&\n  isFileMixItem(value.file) &&\n  value.type === ContentType.File;\n\nexport const getCommonFileIcon = (key?: FileTypeEnum) => {\n  if (!key || key === FileTypeEnum.IMAGE) {\n    return;\n  }\n\n  return SUCCESS_FILE_ICON_MAP[key];\n};\n\nexport const createNormalizedFilePayload = (\n  fileDataList: FileData[],\n  mentionList: MessageMentionListFields['mention_list'],\n): NormalizedMessagePropsPayload<ContentType.File> => {\n  const finalFileList = fileDataList.map(fileData => ({\n    ...fileData,\n    fileTypeConfig: getFileTypConfig(fileData.file),\n  }));\n\n  // To narrow the type use\n  const validFinalFileList = finalFileList.filter(\n    (\n      finalFile,\n    ): finalFile is FileData & {\n      fileTypeConfig: TFileTypeConfig & { fileType: FileTypeEnum };\n      uri: string;\n    } =>\n      Boolean(finalFile && finalFile.uri && finalFile.fileTypeConfig?.fileType),\n  );\n\n  const payload: NormalizedMessagePropsPayload<ContentType.File> = {\n    contentType: ContentType.File,\n    contentObj: {\n      file_list: validFinalFileList.map(finalFile => ({\n        file_key: finalFile.uri,\n        file_name: finalFile.file.name,\n        file_size: finalFile.file.size,\n        file_url: '',\n        file_type: finalFile.fileTypeConfig.fileType,\n      })),\n    },\n    mention_list: mentionList,\n  };\n  return payload;\n};\n\nexport const createNormalizedImagePayload = (\n  fileDataList: ImageFileData[],\n  mentionList: MessageMentionListFields['mention_list'],\n): NormalizedMessagePropsPayload<ContentType.Image> => {\n  const finalFileList = fileDataList\n    .map(fileData => ({\n      ...fileData,\n      blobUrl: URL.createObjectURL(fileData.file),\n      fileTypeConfig: getFileTypConfig(fileData.file),\n    }))\n    .filter(\n      (\n        finalFile,\n      ): finalFile is ImageFileData & { uri: string } & {\n        blobUrl: string;\n        fileTypeConfig: TFileTypeConfig;\n      } => Boolean(finalFile.fileTypeConfig && finalFile.uri),\n    );\n\n  const payload: NormalizedMessagePropsPayload<ContentType.Image> = {\n    contentType: ContentType.Image,\n    contentObj: {\n      image_list: finalFileList.map(finalFile => ({\n        key: finalFile.uri,\n        image_thumb: {\n          url: finalFile.blobUrl,\n          width: finalFile.meta?.width ?? 0,\n          height: finalFile.meta?.height ?? 0,\n        },\n        image_ori: {\n          url: finalFile.blobUrl,\n          width: finalFile.meta?.width ?? 0,\n          height: finalFile.meta?.height ?? 0,\n        },\n      })),\n    },\n    mention_list: mentionList,\n  };\n  return payload;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isObject } from 'lodash-es';\nimport {\n  type VerboseContent,\n  VerboseMsgType,\n  FinishReasonType,\n  type AnswerFinishVerboseData,\n} from '@coze-common/chat-core';\n\nimport {\n  type VerboseContentData,\n  type Message,\n  type KnowledgeRecallSlice,\n} from '../store/types';\nimport { safeJSONParseV2 } from './safe-json-parse';\n\nexport type VerboseDataMaps = {\n  [VerboseMsgType.STREAM_PLUGIN_FINISH]: {\n    uuid: string;\n    tool_output_content: string;\n  };\n  [VerboseMsgType.GENERATE_ANSWER_FINISH]: AnswerFinishVerboseData;\n} & {\n  [key in Exclude<\n    VerboseMsgType,\n    [VerboseMsgType.STREAM_PLUGIN_FINISH, VerboseMsgType.GENERATE_ANSWER_FINISH]\n  >]: unknown;\n};\n\nexport interface VerboseContentObj<T extends VerboseMsgType> {\n  msg_type: T;\n  data: string;\n  dataObj: VerboseDataMaps[T] | null;\n}\n\nexport const isVerboseMessage = (message: Message) =>\n  message.type === 'verbose';\n\nexport const isVerboseMessageType = (\n  message: Message,\n  type: VerboseMsgType,\n) => {\n  if (!isVerboseMessage(message)) {\n    return false;\n  }\n  const { content } = message;\n  const verboseContent = safeJSONParseV2<VerboseContent>(content, null).value;\n  if (!verboseContent) {\n    return false;\n  }\n  return verboseContent.msg_type === type;\n};\n\nexport const isVerboseContent = (value: unknown): value is VerboseContent =>\n  isObject(value) && 'msg_type' in value && 'data' in value;\n\nexport function isVerboseContentData(\n  value: unknown,\n): value is VerboseContentData {\n  return isObject(value);\n}\n\n/**\n * @Deprecated This structure is wrong, keep it for now to avoid affecting the line\n */\nexport const isKnowledgeRecallVerboseContentDeprecated = (\n  value: unknown,\n): value is {\n  verbose_type: string;\n  chunks: KnowledgeRecallSlice[];\n} =>\n  isObject(value) &&\n  'verbose_type' in value &&\n  'chunks' in value &&\n  value.verbose_type === 'knowledge';\n\nexport const isKnowledgeRecallVerboseContent = (value: unknown) =>\n  isVerboseContent(value) && value.msg_type === VerboseMsgType.KNOWLEDGE_RECALL;\n\n/**\n * Is it an interrupt authorization message, note no required_action?. submit_tool_outputs?. tool_calls class behavior require_info interrupt is not rendered!!!\n * @param message\n */\nexport const isRequireInfoInterruptMessage = (message: Message) =>\n  isVerboseMessageType(message, VerboseMsgType.INTERRUPT) &&\n  message.required_action?.submit_tool_outputs?.tool_calls?.some(\n    item => item.type === 'require_info',\n  );\n\n/**\n * Determine if the answer is all over\n * @param message\n * At present, there may be a finish package in a group. If you need to filter out the interrupt scene through finish_reason, you will get the finish that answers all the ends.\n */\nexport const isAnswerFinishVerboseMessage = (message: Message) => {\n  const res = getVerboseContentObj<VerboseMsgType.GENERATE_ANSWER_FINISH>(\n    message.content,\n  );\n\n  return (\n    isVerboseMessageType(message, VerboseMsgType.GENERATE_ANSWER_FINISH) &&\n    res?.dataObj?.finish_reason !== FinishReasonType.INTERRUPT\n  );\n};\n\n/**\n * Determine whether the answer is non-aborted\n * @param message\n * At present, finish_reason = 1 interrupt in a group, function_call copy may not be the \"operation suspension\" expressed by the business, but may be a custom \"to be replied\".\n * There may be verbose packages where required_action submit_tool_outputs tool_call type === 'reply_message' for \"to reply\"\n */\nexport const isFakeInterruptVerboseMessage = (message: Message) =>\n  message?.required_action?.submit_tool_outputs?.tool_calls?.some(\n    item => item.type === 'reply_message',\n  );\n/**\n * Determine whether it is generate_answer_finish package, currently including interrupt and answer all over\n * @param message\n */\nexport const isAllFinishVerboseMessage = (message: Message) =>\n  isVerboseMessageType(message, VerboseMsgType.GENERATE_ANSWER_FINISH);\n\n/**\n * Whether the response to the streaming plugin ends verbose\n * @param message\n */\nexport const isStreamPluginFinish = (message: Message) =>\n  isVerboseMessageType(message, VerboseMsgType.STREAM_PLUGIN_FINISH);\n\n/**\n * Is it a jump node?\n * @param message\n */\nexport const isJumpToVerbose = (message: Message) =>\n  isVerboseMessageType(message, VerboseMsgType.JUMP_TO);\nexport const isJumpToVerboseContent = (value: unknown) =>\n  isVerboseContent(value) && value.msg_type === VerboseMsgType.JUMP_TO;\n\n/**\n * Is it a backtracking node?\n * @param message\n */\nexport const isBackwardsVerbose = (message: Message) =>\n  isVerboseMessageType(message, VerboseMsgType.BACK_WORD);\nexport const isBackwardsVerboseContent = (value: unknown) =>\n  isVerboseContent(value) && value.msg_type === VerboseMsgType.BACK_WORD;\n\n/**\n * Is it a long-term memory node?\n * @param message\n */\nexport const isLongTermMemoryVerbose = (message: Message) =>\n  isVerboseMessageType(message, VerboseMsgType.LONG_TERM_MEMORY);\nexport const isLongTermMemoryVerboseContent = (value: unknown) =>\n  isVerboseContent(value) && value.msg_type === VerboseMsgType.LONG_TERM_MEMORY;\n\n/**\n * Get verbose content\n */\nexport const getVerboseContentObj = <T extends keyof VerboseDataMaps>(\n  content: string,\n): VerboseContentObj<T> | null => {\n  const verboseContent = safeJSONParseV2<VerboseContent>(content, null).value;\n  if (!verboseContent) {\n    return null;\n  }\n  const { msg_type, data } = verboseContent;\n  if (!data) {\n    return {\n      msg_type: msg_type as T,\n      data: '',\n      dataObj: null,\n    };\n  }\n  const dataObj = safeJSONParseV2<VerboseDataMaps[T]>(data, null).value;\n  return {\n    msg_type: msg_type as T,\n    data: '',\n    dataObj: dataObj as VerboseDataMaps[T],\n  };\n};\n\n/**\n * Filter Verbose messages based on configuration config\n */\nexport const filterVerboseMessageByVerboseMessageConfig = (\n  message: Message,\n  verboseMessageConfig: {\n    ignoreJumpToAgentMessage: boolean;\n    ignoreLongTermMemoryMessage: boolean;\n    ignoreBackwardsMessage: boolean;\n  },\n) => {\n  const verboseConfig = verboseMessageConfig;\n  const ignoreChecks = {\n    ignoreJumpToAgentMessage: isJumpToVerbose,\n    ignoreLongTermMemoryMessage: isLongTermMemoryVerbose,\n    ignoreBackwardsMessage: isBackwardsVerbose,\n  };\n\n  for (const [ignoreCondition, checkFunction] of Object.entries(ignoreChecks)) {\n    if (\n      verboseConfig[ignoreCondition as keyof typeof ignoreChecks] &&\n      checkFunction(message)\n    ) {\n      return true;\n    }\n  }\n  return false;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type InternalAxiosRequestConfig,\n  type AxiosResponse,\n  type AxiosRequestConfig,\n} from 'axios';\nimport { type FetchSteamConfig } from '@coze-arch/fetch-stream';\n\nimport { type ParsedEvent } from '@/channel/http-chunk/types';\n\nimport { type PartiallyRequired } from '../shared/utils/data-handler';\n\nexport type RequestManagerOptions = {\n  scenes?: {\n    [key in RequestScene]?: SceneConfig;\n  };\n  hooks?: Hooks;\n} & AxiosRequestConfig;\n\nexport type DefaultRequestManagerOptions = {\n  scenes: {\n    [key in RequestScene]: PartiallyRequired<SceneConfig, 'url'>;\n  };\n  hooks: Hooks;\n} & AxiosRequestConfig;\n\ninterface InternalChannelSendMessageConfig {\n  url: string;\n  method: string;\n  headers: [string, string][];\n  body: string;\n}\n\ninterface Hooks {\n  onBeforeRequest?: Array<\n    (\n      requestConfig: InternalAxiosRequestConfig,\n    ) => InternalAxiosRequestConfig | Promise<InternalAxiosRequestConfig>\n  >;\n  onAfterResponse?: Array<\n    (response: AxiosResponse) => AxiosResponse | Promise<AxiosResponse>\n  >;\n  onBeforeSendMessage?: Array<\n    (\n      sendMessageConfig: InternalChannelSendMessageConfig,\n    ) =>\n      | InternalChannelSendMessageConfig\n      | Promise<InternalChannelSendMessageConfig>\n  >;\n  //The reason for this is that OpenSdk and CozeSdk messages are too different, missing Ack messages and need to be constructed.\n  onGetMessageStreamParser?: (\n    requestMessageRawBody: Record<string, unknown>,\n  ) => FetchSteamConfig<ParsedEvent>['streamParser'];\n  onErrorResponse?: Array<(response: AxiosResponse) => Promise<AxiosResponse>>;\n}\n\nexport enum RequestScene {\n  SendMessage = 'sendMessage',\n  ResumeMessage = 'resumeMessage',\n  GetMessage = 'getMessage',\n  ClearHistory = 'clearHistory',\n  ClearMessageContext = 'clearMessageContext',\n  DeleteMessage = 'deleteMessage',\n  BreakMessage = 'breakMessage',\n  ReportMessage = 'reportMessage',\n  ChatASR = 'chatASR',\n}\n\nexport type SceneConfig = {\n  hooks?: Hooks;\n} & AxiosRequestConfig;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Undertake all sdk slardar custom events\n */\nexport enum SlardarEvents {\n  // pull historical exception\n  MESSAGE_FETCH_HISTORY_ERROR = 'message_fetch_history_error',\n  // clear context exception\n  MESSAGE_CLEAR_CONTEXT_ERROR = 'message_clear_context_error',\n  // Clear historical anomalies\n  MESSAGE_CLEAR_HISTORY_ERROR = 'message_clear_history_error',\n  // Delete message exception\n  MESSAGE_DELETE_ERROR = 'message_delete_error',\n  // interrupt message\n  MESSAGE_INTERRUPT_ERROR = 'message_interrupt_error',\n  // Like/click on the message\n  MESSAGE_REPORT_ERROR = 'message_report_error',\n  // speech-to-text\n  CHAT_ASR_ERROR = 'chat_asr_error',\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport EventEmitter from 'eventemitter3';\nimport { type FetchSteamConfig } from '@coze-arch/fetch-stream';\n\nimport { safeJSONParse } from '../../shared/utils/safe-json-parse';\nimport { type ChunkRaw } from '../../message/types';\nimport {\n  type ParsedEvent,\n  type ChannelEventMap,\n  type MessageLifecycleCallbackParams,\n} from './types';\n\nexport interface RetryCounterConfig {\n  maxRetryAttempts?: number;\n}\n\nconst defaultMaxRetryAttempts = 3;\n\nexport class RetryCounter {\n  private attempts = 0;\n  private maxRetryAttempts = 0;\n\n  constructor(config?: RetryCounterConfig) {\n    this.maxRetryAttempts = config?.maxRetryAttempts || defaultMaxRetryAttempts;\n  }\n\n  add = () => {\n    this.attempts++;\n  };\n  reset = () => {\n    this.attempts = 0;\n  };\n\n  matchMaxRetryAttempts = () => this.attempts >= this.maxRetryAttempts;\n}\n\ninterface FetchDataHelperConstructor {\n  localMessageID: string;\n  retryCounterConfig?: RetryCounterConfig;\n  totalFetchTimeout?: number;\n  betweenChunkTimeout?: number;\n  headers?: HeadersInit;\n}\n\nexport class FetchDataHelper {\n  abortSignal: AbortController;\n  seqID?: number;\n  retryCounter: RetryCounter;\n  localMessageID: string;\n  replyID?: string;\n  logID?: string;\n  totalFetchTimeout?: number;\n  betweenChunkTimeout?: number;\n  headers?: HeadersInit;\n\n  constructor({\n    localMessageID,\n    retryCounterConfig,\n    betweenChunkTimeout,\n    totalFetchTimeout,\n    headers,\n  }: FetchDataHelperConstructor) {\n    this.localMessageID = localMessageID;\n    this.retryCounter = new RetryCounter(retryCounterConfig);\n    this.abortSignal = new AbortController();\n    this.betweenChunkTimeout = betweenChunkTimeout;\n    this.totalFetchTimeout = totalFetchTimeout;\n    this.headers = headers;\n  }\n\n  setReplyID = (id: string) => {\n    this.replyID = id;\n  };\n  setSeqID = (id: number) => {\n    this.seqID = id;\n  };\n  setLogID = (id?: string | null) => {\n    if (!id) {\n      return;\n    }\n    this.logID = id;\n  };\n}\nexport enum ChunkEvent {\n  ERROR = 'error',\n  DONE = 'done',\n  MESSAGE = 'message',\n}\n\nexport const streamParser: FetchSteamConfig<\n  ParsedEvent,\n  FetchDataHelper\n>['streamParser'] = (parseEvent, { terminate }) => {\n  const { type } = parseEvent;\n\n  if (type === 'event') {\n    const { data, event } = parseEvent;\n    switch (event) {\n      case ChunkEvent.MESSAGE:\n        return {\n          event,\n          data: safeJSONParse<ChunkRaw>(data, null).value || undefined,\n        };\n      case ChunkEvent.DONE:\n        terminate();\n        return;\n      // An exception occurs during the conversation, for example: the token is exhausted\n      case ChunkEvent.ERROR:\n        return { event, data };\n      default:\n        return;\n    }\n  }\n};\n\nexport const getDataHelperPlaceholder = () =>\n  new FetchDataHelper({\n    localMessageID:\n      'DataClamp placeholder, please check your HttpChunk Instance',\n  });\n\nexport function inValidChunkRaw(value: unknown): value is ChunkRaw {\n  return (\n    value !== null &&\n    typeof value === 'object' &&\n    'seq_id' in value &&\n    'message' in value &&\n    'is_finish' in value &&\n    'seq_id' in value\n  );\n}\n\nexport class CustomEventEmitter extends EventEmitter {\n  public customEmit<K extends keyof ChannelEventMap>(\n    event: K,\n    ...args: Parameters<ChannelEventMap[K]>\n  ) {\n    return super.emit(event, ...args);\n  }\n}\n\nexport const getMessageLifecycleCallbackParam = (\n  dataClump: FetchDataHelper | undefined,\n): MessageLifecycleCallbackParams => {\n  const { localMessageID = '', replyID, logID } = dataClump ?? {};\n  return {\n    localMessageID,\n    replyID,\n    logID,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * HTTP chunk slardar custom event\n */\nexport enum SlardarEvents {\n  // The error occurred in the code calling controller.abort, which is not expected\n  HTTP_CHUNK_UNEXPECTED_ABORT_ERROR = 'http_chunk_unexpected_abort_error',\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport enum HttpChunkEvents {\n  // Received message\n  MESSAGE_RECEIVED = 'http_chunk_message_received',\n  // Abnormal message received\n  MESSAGE_RECEIVED_INVALID = 'http_chunk_message_received_invalid',\n  // overall pull timeout\n  TOTAL_FETCH_TIMEOUT = 'http_chunk_total_fetch_timeout',\n  // Private room timeout\n  BETWEEN_CHUNK_TIMEOUT = 'http_chunk_between_chunk_timeout',\n  // Start fetching\n  FETCH_START = 'http_chunk_fetch_start',\n  // Fetch request successful\n  FETCH_SUCCESS = 'http_chunk_fetch_success',\n  // Fetch request exception\n  FETCH_ERROR = 'http_chunk_fetch_error',\n  // Invalid message format\n  INVALID_MESSAGE = 'http_chunk_invalid_message',\n  // Pull flow starts\n  READ_STREAM_START = 'http_chunk_read_stream_start',\n  // Pull flow anomaly\n  READ_STREAM_ERROR = 'http_chunk_read_stream_error',\n  // Fetch to read stream full success\n  ALL_SUCCESS = 'http_chunk_all_success',\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { SdkEventsEnum } from '../events/sdk-events';\nimport { type DeployVersion, type ENV } from '../../shared/const';\nimport { type RequestManagerOptions } from '../../request-manager/types';\nimport { type UploadPluginConstructor } from '../../plugins/upload-plugin/types/plugin-upload';\nimport type { Message, ImageMessageProps } from '../../message/types';\nexport type {\n  GetHistoryMessageProps,\n  ClearHistoryProps,\n  DeleteMessageProps,\n  BreakMessageProps,\n} from '../../message/types/message-manager';\nimport { ContentType } from '../../message/types';\nimport { type ChatCoreError } from '../../custom-error';\nimport type { TokenManager } from '../../credential';\n\nexport { Message, ContentType, ImageMessageProps };\n\nexport { SdkEventsEnum };\n\nexport type BotUnique =\n  | {\n      bot_id: string;\n    }\n  | {\n      /**\n       * Use the bot template instead of bot_id bot_version draft_mode parameters\n       * For non-safety reasons, use only if you don't want to expose bot_id\n       * botId, presetBot must pass one\n       */\n      preset_bot: PresetBot;\n    };\n\nexport const isPresetBotUnique = <T extends BotUnique>(\n  sth: T,\n): sth is { preset_bot: PresetBot } & Exclude<T, 'bot_id'> =>\n  'preset_bot' in sth && !!sth.preset_bot;\n\nexport type CreateProps = BotUnique & {\n  /**\n   * For computing resource point consumption\n   */\n  space_id?: string;\n  /**\n   * Business party ID for event tracking\n   */\n  biz: Biz;\n  /**\n   * bot version number\n   */\n  bot_version?: string;\n\n  /**\n   *  Draft bots or online bots,\n   */\n  draft_mode?: boolean;\n\n  /**\n   * session id\n   */\n  conversation_id: string;\n\n  /**\n   * Specify the unique user to send\n   */\n  user?: string;\n\n  /**\n   * Scene value, mainly used for server level authentication, default 0 default\n   */\n  scene?: Scene;\n\n  /**\n   * Environment variables to distinguish between testing environment and online environment\n   * For log reporting\n   */\n  env: ENV;\n\n  /**\n   * Differentiate deployment versions\n   */\n\n  deployVersion: DeployVersion;\n\n  /**\n   * Whether to enable debug mode, currently mainly used by the bot editor\n   * After opening, each reply message adds debug_messages field, including all chunk messages spat out by the channel\n   **/\n  enableDebug?: boolean;\n  /**\n   * SDK console log level, default error, the following level will contain the previous level\n   **/\n  logLevel?: LogLevel;\n  /**\n   Interface blocker\n   **/\n  requestManagerOptions?: RequestManagerOptions;\n\n  /**\n   * Token refresh mechanism\n   */\n  tokenManager?: TokenManager;\n};\n\nexport type LogLevel = 'disable' | 'info' | 'error';\n\nexport interface SdkMessageEvent {\n  name: SdkEventsEnum;\n  data: Message<ContentType>[];\n}\n\nexport interface SdkErrorEvent {\n  name: SdkEventsEnum;\n  data: {\n    error: Error;\n  };\n}\nexport type PullingStatus =\n  | 'start'\n  | 'pulling'\n  | 'answerEnd'\n  | 'success'\n  | 'error'\n  | 'timeout';\n\nexport interface SdkPullingStatusEvent {\n  name: SdkEventsEnum;\n  data: {\n    /**\n     * Pull reply message status\n     */\n    pullingStatus: PullingStatus;\n    /**\n     * Local ID of the query\n     */\n    local_message_id: string;\n    /**\n     * The server level of the query message_id\n     */\n    reply_id: string;\n  };\n\n  error?: ChatCoreError;\n\n  /**\n   * Returns in timeout state to terminate the pull\n   * @returns\n   */\n  abort?: () => void;\n}\n\nexport interface SdkEventsCallbackMap {\n  [SdkEventsEnum.MESSAGE_RECEIVED_AND_UPDATE]: (event: SdkMessageEvent) => void;\n  [SdkEventsEnum.ERROR]: (event: SdkErrorEvent) => void;\n  [SdkEventsEnum.MESSAGE_PULLING_STATUS]: (\n    event: SdkPullingStatusEvent,\n  ) => void;\n}\n\nexport type PluginKey = 'upload-plugin';\n\nexport type PluginValue<\n  T,\n  P extends Record<string, unknown>,\n> = T extends 'upload-plugin' ? UploadPluginConstructor<P> : never;\n\n/**\n * Access business direction\n * Currently, enumeration access is used to control the access direction\n * third_part used by open_api SDK, exposed to third parties\n */\nexport type Biz = 'coze_home' | 'bot_editor' | 'third_part';\n\nexport type PresetBot = 'coze_home' | 'prompt_optimize' | '';\n\n/**\n * Interfaces also have this definition enum Scene.\n * Note that the front-end definition is fully aligned with the interface.\n * src/auto-generate/developer_api/namespaces/developer_api.ts\n */\nexport const enum Scene {\n  Default = 0,\n  Explore = 1,\n  BotStore = 2,\n  CozeHome = 3,\n  // Debug area, named and server level aligned\n  Playground = 4,\n  AgentAPP = 6,\n  PromptOptimize = 7,\n  /**\n   * TODO: The front end is increased separately, and an enumeration needs to be aligned with the back end.\n   */\n  OpenAipSdk = 1000,\n}\n\n/**\n * Align developer_api/namespaces/developer_api\n */\nexport const enum LoadDirection {\n  Unknown = 0,\n  Prev = 1,\n  Next = 2,\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport enum SdkEventsEnum {\n  MESSAGE_RECEIVED_AND_UPDATE = 'message_received_and_update',\n  /**\n   * Monitor pull reply message status changes\n   */\n  MESSAGE_PULLING_STATUS = 'message_pulling_status',\n  ERROR = 'error',\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ReportLog, type Tracer } from '../../report-log';\nimport type { ChatCoreError } from '../../custom-error';\n\n/**\n * Undertake all sdk slardar custom events\n */\nexport enum SlardarEvents {\n  // SDK initialization for data statistics\n  SDK_INIT = 'chat_sdk_init',\n  // Upload failed.\n  SDK_MESSAGE_UPLOAD_FAIL = 'chat_sdk_message_upload_fail',\n  // interrupt message\n  SDK_BREAK_MESSAGE = 'chat_sdk_break_message',\n  // messaging link monitoring\n  SDK_MESSAGE_SEND_TRACER = 'chat_sdk_message_send_tracer',\n  // Pull link time monitoring\n  SDK_PULL_STREAM_TRACER = 'chat_sdk_pull_stream_tracer',\n}\n\n/**\n * Slardar Event Tracking\n */\nexport class ReportEventsTracer {\n  private reporter: ReportLog;\n\n  private eventTracers = new Map<\n    string,\n    {\n      trace: Tracer;\n      meta?: Record<string, unknown>;\n    }\n  >();\n\n  constructor(reporter: ReportLog) {\n    this.reporter = reporter;\n  }\n\n  /**\n   * Messaging Event Tracking\n   */\n  sendMessageTracer = {\n    start: (local_message_id: string, meta?: Record<string, unknown>) => {\n      const { trace } = this.createTracer(\n        SlardarEvents.SDK_MESSAGE_SEND_TRACER,\n      );\n      this.setTracer(local_message_id, SlardarEvents.SDK_MESSAGE_SEND_TRACER, {\n        trace,\n      });\n      trace?.('start', {\n        meta,\n      });\n    },\n    success: (local_message_id: string, meta?: Record<string, unknown>) => {\n      const { trace } = this.getTracer(\n        local_message_id,\n        SlardarEvents.SDK_MESSAGE_SEND_TRACER,\n      );\n      trace?.('success', {\n        meta,\n      });\n      this.deleteTracer(\n        local_message_id,\n        SlardarEvents.SDK_MESSAGE_SEND_TRACER,\n      );\n    },\n    error: (chatCoreError: ChatCoreError) => {\n      const { local_message_id } = chatCoreError.ext;\n      if (!local_message_id) {\n        return;\n      }\n      const { trace } = this.getTracer(\n        local_message_id,\n        SlardarEvents.SDK_MESSAGE_SEND_TRACER,\n      );\n      trace?.('error', {\n        meta: chatCoreError.flatten(),\n        error: chatCoreError,\n      });\n      this.deleteTracer(\n        local_message_id,\n        SlardarEvents.SDK_MESSAGE_SEND_TRACER,\n      );\n    },\n    timeout: (local_message_id: string) => {\n      const { trace } = this.getTracer(\n        local_message_id,\n        SlardarEvents.SDK_MESSAGE_SEND_TRACER,\n      );\n      trace?.('timeout');\n      this.deleteTracer(\n        local_message_id,\n        SlardarEvents.SDK_MESSAGE_SEND_TRACER,\n      );\n    },\n  };\n\n  /*\n   * Pull stream event tracking\n   */\n  pullStreamTracer = {\n    start: (local_message_id: string, meta?: Record<string, unknown>) => {\n      const { trace } = this.createTracer(SlardarEvents.SDK_PULL_STREAM_TRACER);\n      this.setTracer(local_message_id, SlardarEvents.SDK_PULL_STREAM_TRACER, {\n        trace,\n        meta,\n      });\n      trace?.('start', {\n        meta,\n      });\n    },\n    success: (local_message_id: string, meta?: Record<string, unknown>) => {\n      const { trace } = this.getTracer(\n        local_message_id,\n        SlardarEvents.SDK_PULL_STREAM_TRACER,\n      );\n      trace?.('success', {\n        meta,\n      });\n      this.deleteTracer(local_message_id, SlardarEvents.SDK_PULL_STREAM_TRACER);\n    },\n    break: (local_message_id: string, meta?: Record<string, unknown>) => {\n      const { trace } = this.getTracer(\n        local_message_id,\n        SlardarEvents.SDK_PULL_STREAM_TRACER,\n      );\n      // Interrupt is successful\n      trace?.('success', {\n        meta,\n      });\n      this.deleteTracer(local_message_id, SlardarEvents.SDK_PULL_STREAM_TRACER);\n    },\n    error: (chatCoreError: ChatCoreError, meta?: Record<string, unknown>) => {\n      const { local_message_id } = chatCoreError.ext;\n      if (!local_message_id) {\n        return;\n      }\n      const { trace } = this.getTracer(\n        local_message_id,\n        SlardarEvents.SDK_PULL_STREAM_TRACER,\n      );\n      trace?.('error', {\n        meta: {\n          ...chatCoreError.flatten(),\n          ...meta,\n        },\n        error: chatCoreError,\n      });\n      this.deleteTracer(local_message_id, SlardarEvents.SDK_PULL_STREAM_TRACER);\n    },\n    timeout: (chatCoreError: ChatCoreError) => {\n      const { local_message_id } = chatCoreError.ext;\n      if (!local_message_id) {\n        return;\n      }\n      const { trace } = this.getTracer(\n        local_message_id,\n        SlardarEvents.SDK_PULL_STREAM_TRACER,\n      );\n      trace?.('timeout', {\n        meta: chatCoreError.flatten(),\n        error: chatCoreError,\n      });\n      this.deleteTracer(local_message_id, SlardarEvents.SDK_PULL_STREAM_TRACER);\n    },\n    receiveAck: (local_message_id: string, meta?: Record<string, unknown>) => {\n      const { trace } = this.getTracer(\n        local_message_id,\n        SlardarEvents.SDK_PULL_STREAM_TRACER,\n      );\n      trace?.('ack', {\n        meta,\n      });\n    },\n    receiveFirstAnsChunk: (\n      local_message_id: string,\n      meta?: Record<string, unknown>,\n    ) => {\n      const { trace } = this.getTracer(\n        local_message_id,\n        SlardarEvents.SDK_PULL_STREAM_TRACER,\n      );\n      trace?.('first_ans_chunk', {\n        meta,\n      });\n    },\n  };\n\n  /**\n   * Assemble to get unique key\n   */\n  static getUniqueKey(local_message_id: string, event: SlardarEvents): string {\n    return `${local_message_id}_${event}`;\n  }\n\n  /**\n   * Get trace based on local_message_id, event\n   */\n  getTracer(local_message_id: string, event: SlardarEvents) {\n    return (\n      this.eventTracers.get(\n        ReportEventsTracer.getUniqueKey(local_message_id, event),\n      ) || {\n        trace: undefined,\n      }\n    );\n  }\n\n  /**\n   * Add trace based on local_message_id and event\n   */\n  setTracer(\n    local_message_id: string,\n    event: SlardarEvents,\n    traceInfo: {\n      trace: Tracer;\n      meta?: Record<string, unknown>;\n    },\n  ) {\n    const { trace, meta } = traceInfo;\n    this.eventTracers.set(\n      ReportEventsTracer.getUniqueKey(local_message_id, event),\n      {\n        trace,\n        meta,\n      },\n    );\n  }\n\n  /**\n   * Delete trace\n   */\n  deleteTracer(local_message_id: string, event: SlardarEvents) {\n    this.eventTracers.delete(\n      ReportEventsTracer.getUniqueKey(local_message_id, event),\n    );\n  }\n\n  /**\n   * Create trace\n   */\n  createTracer(eventName: SlardarEvents) {\n    return this.reporter.slardarTracer({\n      eventName,\n    });\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type Message,\n  type ContentType,\n  type Scene,\n  type LoadDirection,\n} from '../../chat-sdk/types/interface';\n\nexport interface GetHistoryMessageProps {\n  conversation_id: string;\n  cursor: string;\n  count: number;\n  scene?: Scene;\n  bot_id?: string;\n  draft_mode?: boolean;\n  preset_bot?: string;\n  load_direction?: LoadDirection;\n}\n\nexport enum MsgParticipantType {\n  Bot = 1,\n  User = 2,\n}\n\nexport interface ParticipantInfo {\n  id: string;\n  type?: MsgParticipantType;\n  name: string;\n  desc?: string;\n  avatar_url: string;\n  space_id?: string;\n  user_id?: string;\n  user_name?: string;\n  allow_mention: boolean;\n  access_path: string | undefined;\n  /** Is it allowed to be shared? */\n  allow_share?: boolean;\n}\n\nexport interface GetHistoryMessageResponse {\n  message_list: Message<ContentType>[];\n  cursor: string;\n  hasmore: boolean;\n  next_has_more?: boolean;\n  next_cursor?: string;\n  read_message_index?: string;\n  code?: number;\n  msg?: string;\n  participant_info_map?: Record<string, Partial<ParticipantInfo>>;\n  last_section_id: string;\n}\n\nexport interface ClearHistoryProps {\n  bot_id: string;\n  conversation_id: string;\n  scene?: Scene;\n}\n\nexport interface ClearHistoryResponse {\n  code: number;\n  msg: string;\n  new_section_id: string;\n  new_section_message_list: Message<ContentType>[];\n}\n\nexport interface ClearMessageContextProps {\n  conversation_id: string;\n  insert_history_message_list: string[];\n  scene?: Scene;\n}\n\nexport interface ClearMessageContextResponse {\n  code: number;\n  msg: string;\n  new_section_id: string;\n  new_section_message_list: Message<ContentType>[];\n}\n\nexport interface DeleteMessageProps {\n  bot_id: string;\n  conversation_id: string;\n  message_id: string;\n  scene?: Scene;\n}\n\nexport interface DeleteMessageResponse {\n  code: number;\n  msg: string;\n}\n\nexport interface BreakMessageProps {\n  conversation_id: string;\n  /**\n   * local_message_id of interrupted questions\n   */\n  local_message_id: string;\n  /**\n   * Interrupted question id\n   */\n  query_message_id: string;\n  /**\n   * Which reply was interrupted under the current question?\n   * Only delivered if the interrupted message type = 'answer'\n   */\n  answer_message_id?: string;\n  /**\n   * interrupt position\n   * Only delivered if the interrupted message type = 'answer'\n   */\n  broken_pos?: number;\n\n  scene?: Scene;\n}\n\nexport interface BreakMessageResponse {\n  code: number;\n  msg: string;\n}\n\nexport type ClearMessageContextParams = Pick<\n  ClearMessageContextProps,\n  'insert_history_message_list'\n>;\n\n/*\nMessage Like/Click Interface Type Definition\n */\nexport enum MessageFeedbackType {\n  Default = 0,\n  Like = 1,\n  Unlike = 2,\n}\n\nexport enum MessageFeedbackDetailType {\n  UnlikeDefault = 0,\n  UnlikeHarmful = 1, //Harmful information\n  UnlikeIncorrect = 2, //incorrect information\n  UnlikeNotFollowInstructions = 3, //Did not follow instructions\n  UnlikeOthers = 4, //other\n}\n\nexport interface MessageFeedback {\n  feedback_type?: MessageFeedbackType; //feedback type\n  detail_types?: MessageFeedbackDetailType[]; //segmentation type\n  detail_content?: string; //Negative feedback custom content, corresponding to user selection Others\n}\n\nexport enum ReportMessageAction {\n  Feedback = 0,\n  Delete = 1,\n  UpdataCard = 2,\n}\n\nexport interface ReportMessageProps {\n  bot_id?: string; //bot_id\n  biz_conversation_id: string; //Session ID\n  message_id: string; //Message ID\n  scene?: Scene; //The scene of the current session\n  action: ReportMessageAction; //action\n  message_feedback?: MessageFeedback;\n  // Card Status\n  attributes?: {\n    card_status?: Record<string, string>;\n  };\n}\n\nexport interface ReportMessageResponse {\n  code: number;\n  msg: string;\n}\n\n/* Message Like/Click Interface Type Definition: end */\n\nexport type ChatASRProps = FormData;\n\nexport interface ChatASRResponse {\n  code: number;\n  data?: { text?: string };\n  message: string;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { pickBy, type merge, mergeWith, isArray } from 'lodash-es';\n\nexport const filterEmptyField = <T extends Record<string, unknown>>(\n  obj: T,\n): T =>\n  pickBy(\n    obj,\n    value => value !== undefined && value !== null && value !== '',\n  ) as T;\n\nexport type PartiallyRequired<T, K extends keyof T> = Omit<T, K> &\n  Required<Pick<T, K>>;\n\n// Enum to union type\nexport type EnumToUnion<T extends Record<string, string>> = T[keyof T];\n\nexport const muteMergeWithArray = (...args: Parameters<typeof merge>) =>\n  mergeWith(...args, (objValue: unknown, srcValue: unknown) => {\n    if (isArray(objValue)) {\n      return objValue.concat(srcValue);\n    }\n  });\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AxiosError, type AxiosResponse } from 'axios';\n\nexport class ApiError extends AxiosError {\n  public raw?: unknown;\n  type: string;\n\n  logId: string;\n\n  constructor(\n    public code: string,\n    public msg: string | undefined,\n    response: AxiosResponse,\n  ) {\n    super(msg, code, response.config, response.request, response);\n    this.name = 'ApiError';\n    this.type = 'Api Response Error';\n    this.raw = response.data;\n    this.logId = response.headers?.['x-tt-logid'];\n  }\n}\n\nexport const isApiError = (error: unknown): error is ApiError =>\n  error instanceof ApiError;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type AxiosResponse, type InternalAxiosRequestConfig } from 'axios';\n\nimport { type DefaultRequestManagerOptions, RequestScene } from './types';\nimport { ApiError } from './api-error';\n\nconst useApiErrorResponseHook = (response: AxiosResponse) => {\n  const { data = {} } = response;\n  const { code, msg } = data;\n  if (code !== 0) {\n    const apiError = new ApiError(String(code), msg, response);\n\n    return Promise.reject(apiError);\n  }\n\n  return response;\n};\n\nconst useCsrfRequestHook = (config: InternalAxiosRequestConfig) => {\n  config.headers.set('x-requested-with', 'XMLHttpRequest');\n  if (\n    config.method?.toLowerCase() === 'post' &&\n    !config.headers.get('content-type')\n  ) {\n    // The new CSRF protection requires all post requests to have this header.\n    config.headers.set('content-type', 'application/json');\n    if (!config.data) {\n      // Axios will automatically clear the content-type when the data is empty, so you need to set an empty object\n      config.data = {};\n    }\n  }\n  return config;\n};\n\nexport const getDefaultSceneConfig = (): DefaultRequestManagerOptions => ({\n  hooks: {\n    onBeforeRequest: [useCsrfRequestHook],\n    onAfterResponse: [useApiErrorResponseHook],\n  },\n  scenes: {\n    [RequestScene.SendMessage]: {\n      url: '/api/conversation/chat',\n      method: 'POST',\n    },\n    [RequestScene.ResumeMessage]: {\n      url: '/api/conversation/resume_chat',\n      method: 'POST',\n    },\n    [RequestScene.GetMessage]: {\n      url: '/api/conversation/get_message_list',\n      method: 'POST',\n    },\n    [RequestScene.ClearHistory]: {\n      url: '/api/conversation/clear_message',\n      method: 'POST',\n    },\n    [RequestScene.ClearMessageContext]: {\n      url: '/api/conversation/create_section',\n      method: 'POST',\n    },\n    [RequestScene.DeleteMessage]: {\n      url: '/api/conversation/delete_message',\n      method: 'POST',\n    },\n    [RequestScene.BreakMessage]: {\n      url: '/api/conversation/break_message',\n      method: 'POST',\n    },\n    [RequestScene.ReportMessage]: {\n      url: '/api/conversation/message/report',\n      method: 'POST',\n    },\n    [RequestScene.ChatASR]: {\n      url: '/api/audio/transcriptions',\n      method: 'POST',\n    },\n  },\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { merge } from 'lodash-es';\nimport axios, {\n  type AxiosInstance,\n  type AxiosResponse,\n  type InternalAxiosRequestConfig,\n} from 'axios';\n\nimport {\n  muteMergeWithArray,\n  type PartiallyRequired,\n} from '../shared/utils/data-handler';\nimport { type ReportLog } from '../report-log';\nimport {\n  type DefaultRequestManagerOptions,\n  type RequestManagerOptions,\n  type RequestScene,\n  type SceneConfig,\n} from './types';\nimport { getDefaultSceneConfig } from './request-config';\n\nexport interface RequestManagerProps {\n  options?: RequestManagerOptions;\n  reportLog: ReportLog;\n}\nexport class RequestManager {\n  private mergedBaseOptions: DefaultRequestManagerOptions;\n\n  private reportLog: ReportLog;\n\n  private reportLogWithScope: ReportLog;\n\n  request!: AxiosInstance;\n\n  constructor({ options, reportLog }: RequestManagerProps) {\n    this.mergedBaseOptions = muteMergeWithArray(\n      getDefaultSceneConfig(),\n      options,\n    );\n    this.reportLog = reportLog;\n    this.reportLogWithScope = this.reportLog.createLoggerWith({\n      scope: 'RequestManager',\n    });\n    this.createRequest();\n  }\n\n  createRequest() {\n    this.reportLogWithScope.info({\n      message: 'RequestManager is initialized',\n      meta: {\n        ...this.mergedBaseOptions,\n      },\n    });\n    const { baseURL, timeout, headers } = this.mergedBaseOptions;\n    this.request = axios.create({\n      baseURL,\n      timeout,\n      headers,\n    });\n    this.useRequestInterceptor();\n    this.useResponseInterceptor();\n  }\n\n  appendRequestOptions(options: RequestManagerOptions) {\n    this.mergedBaseOptions = muteMergeWithArray(\n      this.mergedBaseOptions,\n      options,\n    );\n  }\n\n  /**\n   * Incoming request hooks can be intercepted separately for each scene\n   */\n  private useRequestInterceptor() {\n    // Execute incoming unified hooks\n    const onCommonBeforeRequest = async (\n      config: InternalAxiosRequestConfig,\n    ) => {\n      const { hooks, scenes, ...rest } = this.mergedBaseOptions;\n      if (!hooks) {\n        return merge(config, rest);\n      }\n      const { onBeforeRequest = [] } = hooks;\n      for (const hook of onBeforeRequest) {\n        config = await hook(config);\n      }\n      return merge(config, rest);\n    };\n    // Execute hooks for each scene\n    const onSceneBeforeRequest = async (config: InternalAxiosRequestConfig) => {\n      const { scenes } = this.mergedBaseOptions;\n      if (!scenes) {\n        return config;\n      }\n      const { url } = config;\n      const targetScene = Object.values(scenes).find(v => v.url === url);\n      if (!targetScene) {\n        return config;\n      }\n      const { hooks, ...rest } = targetScene;\n      if (!hooks) {\n        return merge(config, rest);\n      }\n      const { onBeforeRequest = [] } = hooks;\n      for (const hook of onBeforeRequest) {\n        config = await hook(config);\n      }\n\n      return merge({ ...rest }, config);\n    };\n    this.request.interceptors.request.use(async config => {\n      // eslint-disable-next-line @typescript-eslint/naming-convention -- temporary variable, quite normal\n      const _config = await onCommonBeforeRequest(config);\n      return await onSceneBeforeRequest(_config);\n    });\n  }\n\n  /**\n   * Incoming response hooks, can be intercepted individually for each scene\n   */\n  private useResponseInterceptor() {\n    // Execute incoming unified hooks\n    const onCommonAfterResponse = async (\n      response: AxiosResponse,\n      hooksName: 'onAfterResponse' | 'onErrorResponse' = 'onAfterResponse',\n    ): Promise<AxiosResponse> => {\n      // eslint-disable-next-line @typescript-eslint/naming-convention -- temporary variable, quite normal\n      let _response: AxiosResponse | Promise<AxiosResponse> = response;\n      const { hooks } = this.mergedBaseOptions;\n      if (!hooks) {\n        return response;\n      }\n      const onAfterResponse = hooks[hooksName] || [];\n      for (const hook of onAfterResponse) {\n        _response = await hook(response);\n      }\n      return _response;\n    };\n    // Execute hooks for each scene\n    const onSceneAfterResponse = async (\n      response: AxiosResponse,\n      hooksName: 'onAfterResponse' | 'onErrorResponse' = 'onAfterResponse',\n    ): Promise<AxiosResponse> => {\n      const { scenes } = this.mergedBaseOptions;\n      // eslint-disable-next-line @typescript-eslint/naming-convention -- temporary variable, quite normal\n      let _response: AxiosResponse | Promise<AxiosResponse> = response;\n      if (!scenes) {\n        return response;\n      }\n      const { url } = response.config;\n      const targetScene = Object.values(scenes).find(v => v.url === url);\n      if (!targetScene) {\n        return response;\n      }\n      const { hooks } = targetScene;\n      if (!hooks) {\n        return response;\n      }\n      const onAfterResponse = hooks[hooksName] || [];\n      for (const hook of onAfterResponse) {\n        _response = await hook(response);\n      }\n\n      return _response;\n    };\n    this.request.interceptors.response.use(\n      async response => {\n        // eslint-disable-next-line @typescript-eslint/naming-convention -- temporary variable, quite normal\n        const _response = await onCommonAfterResponse(response);\n        return await onSceneAfterResponse(_response);\n      },\n      async response => {\n        // eslint-disable-next-line @typescript-eslint/naming-convention -- temporary variable, quite normal\n        const _response = await onCommonAfterResponse(\n          response,\n          'onErrorResponse',\n        );\n        return await onSceneAfterResponse(_response, 'onErrorResponse');\n      },\n    );\n  }\n\n  /**\n   * Get configuration information\n   */\n  getSceneConfig(scene: RequestScene): PartiallyRequired<SceneConfig, 'url'> {\n    const { hooks, scenes, ...rest } = this.mergedBaseOptions;\n    return merge(rest, scenes[scene]);\n  }\n}\n\nexport const requestInstance = axios.create();\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ENV, type DeployVersion } from '../const';\n\n/**\n * Get slardar report environment\n * Data isolation between different environments\n * @returns\n */\nexport const getSlardarEnv = ({\n  env,\n  deployVersion,\n}: {\n  env: ENV;\n  deployVersion: DeployVersion;\n}) => [deployVersion, env].join('-');\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport {\n  createMinimalBrowserClient,\n  jsErrorPlugin,\n  customPlugin,\n} from '@coze-studio/slardar-adapter';\n\nimport { CHAT_CORE_VERSION } from '../../shared/const';\ninterface SlardarConfig {\n  env: string;\n}\n\nexport const slardarInstance = createMinimalBrowserClient();\n\nexport const createSlardarConfig = (defaultConfig: SlardarConfig): any => {\n  const { env } = defaultConfig;\n  return {\n    bid: 'bot_studio_sdk',\n    release: CHAT_CORE_VERSION,\n    env,\n    integrations: [jsErrorPlugin(), customPlugin()] as any,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isEmpty } from 'lodash-es';\n\nimport { type ReportLogProps } from './index';\n\nfunction mergeLogOption<T extends ReportLogProps, P extends ReportLogProps>(\n  source1: T,\n  source2: P,\n) {\n  const { meta: meta1, ...rest1 } = source1;\n  const { meta: meta2, ...rest2 } = source2;\n\n  const meta = {\n    ...meta1,\n    ...meta2,\n  };\n\n  const mergedOptions = {\n    ...rest1,\n    ...rest2,\n    ...(isEmpty(meta) ? {} : { meta }),\n  };\n\n  return mergedOptions as T & P;\n}\nexport class LogOptionsHelper<T extends ReportLogProps = ReportLogProps> {\n  static merge<T extends ReportLogProps>(...list: ReportLogProps[]) {\n    return list.filter(Boolean).reduce((r, c) => mergeLogOption(r, c), {}) as T;\n  }\n\n  options: T;\n\n  constructor(options: T) {\n    this.options = options;\n  }\n\n  get() {\n    return this.options;\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  logger,\n  reporter,\n  type Logger,\n  type Reporter,\n} from '@coze-arch/logger';\n\nimport { getSlardarEnv } from '../shared/utils/env';\nimport { type DeployVersion, type ENV } from '../shared/const';\nimport { slardarInstance, createSlardarConfig } from './slardar';\nimport { LogOptionsHelper } from './log-options-helper';\n\n// Get the instance type of the ReportLog class\ntype ReportLogInstance = InstanceType<typeof ReportLog>;\n\n// Get the return type of the slardarTracer method\ntype SlardarTracerReturnType = ReturnType<ReportLogInstance['slardarTracer']>;\n\n// Gets the type of the trace method\nexport type Tracer = SlardarTracerReturnType['trace'];\n\nexport type ReportLogType = 'error' | 'info';\n/**\n * log report\n */\n\nexport interface ReportLogProps {\n  // Back level report, including previous level log\n  logLevel?: 'disable' | 'error' | 'info';\n  env?: ENV;\n  namespace?: string;\n  scope?: string;\n  meta?: Record<string, unknown>;\n  deployVersion?: DeployVersion;\n}\n\nconst defaultReportLogProps: {\n  env: ENV;\n  logLevel: 'disable' | 'error' | 'info';\n  deployVersion: DeployVersion;\n} = {\n  env: 'production',\n  deployVersion: 'release',\n  logLevel: 'error',\n};\n\n/**\n * Namespace cannot be overridden\n */\nconst unChangeProps = {\n  namespace: 'chat-core',\n  meta: {},\n};\n\nexport class ReportLog {\n  ctx: LogOptionsHelper<ReportLogProps>;\n\n  private hasSlardarInitd = false;\n\n  private loggerWithBaseInfo!: Logger;\n\n  private reportLogWithBaseInfo!: Reporter;\n\n  constructor(props?: ReportLogProps) {\n    const options = LogOptionsHelper.merge(props || {}, unChangeProps);\n    this.ctx = new LogOptionsHelper(options);\n    this.initLog(options);\n    this.initReport(options);\n  }\n\n  /**\n   * Instance initialization, all scopes are initialized only once\n   */\n  init() {\n    console.log('debugger slardar instance init', this.hasSlardarInitd);\n    if (this.hasSlardarInitd) {\n      return;\n    }\n    this.hasSlardarInitd = true;\n    const options = this.ctx.get();\n    slardarInstance.init(\n      createSlardarConfig({\n        env: getSlardarEnv({\n          env: options?.env || defaultReportLogProps.env,\n          deployVersion:\n            options?.deployVersion || defaultReportLogProps.deployVersion,\n        }),\n      }),\n    );\n    slardarInstance.start();\n  }\n\n  createLoggerWith(options?: ReportLogProps) {\n    return new ReportLog(this.resolveCloneParams(options || {}));\n  }\n\n  private resolveCloneParams(props: ReportLogProps) {\n    return LogOptionsHelper.merge(this.ctx.get(), props);\n  }\n\n  /**\n   * slardar initialization\n   */\n  private initReport(options?: ReportLogProps) {\n    this.reportLogWithBaseInfo = reporter.createReporterWithPreset(\n      this.resolveCloneParams(options || {}),\n    );\n    this.reportLogWithBaseInfo.init(slardarInstance);\n  }\n\n  /**\n   *  Console log initialization\n   * @param options\n   */\n  private initLog(options?: ReportLogProps) {\n    this.loggerWithBaseInfo = logger.createLoggerWith({\n      ctx: this.resolveCloneParams(options || {}),\n    });\n  }\n\n  // Determine whether to report\n  private isNeedReport(logType: ReportLogType) {\n    const { logLevel } = this.ctx.get();\n    if (logLevel === 'disable') {\n      return false;\n    }\n    if (logLevel === 'error') {\n      return logType === 'error';\n    }\n    return true;\n  }\n\n  info(...args: Parameters<typeof logger.info>) {\n    if (!this.isNeedReport('info')) {\n      return;\n    }\n    this.loggerWithBaseInfo.info(...args);\n  }\n\n  error(...args: Parameters<typeof logger.error>) {\n    if (!this.isNeedReport('error')) {\n      return;\n    }\n    this.loggerWithBaseInfo.error(...args);\n  }\n\n  /**\n   * Slardar log info hierarchy\n   */\n  slardarInfo(...args: Parameters<typeof reporter.info>) {\n    this.reportLogWithBaseInfo.info(...args);\n  }\n\n  /**\n   * Slardar log success level\n   * @param args\n   */\n  slardarSuccess(...args: Parameters<typeof reporter.success>) {\n    this.reportLogWithBaseInfo.success(...args);\n  }\n\n  /**\n   * Slardar log, error level\n   */\n  slardarError(...args: Parameters<typeof reporter.error>) {\n    this.reportLogWithBaseInfo.error(...args);\n  }\n\n  /**\n   * Slardar custom events for event statistics\n   */\n  slardarEvent(...args: Parameters<typeof reporter.event>) {\n    this.reportLogWithBaseInfo.event(...args);\n  }\n\n  /**\n   * Slardar custom success events for event statistics\n   */\n  slardarSuccessEvent(...args: Parameters<typeof reporter.event>) {\n    this.reportLogWithBaseInfo.successEvent(...args);\n  }\n\n  /**\n   * Slardar custom error event, for event statistics, with error type information\n   */\n  slardarErrorEvent(...args: Parameters<typeof reporter.errorEvent>) {\n    this.reportLogWithBaseInfo.errorEvent(...args);\n  }\n\n  /**\n   * Event tracking for link performance statistics\n   */\n  slardarTracer(...args: Parameters<typeof reporter.tracer>) {\n    return this.reportLogWithBaseInfo.tracer(...args);\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport EventEmitter from 'eventemitter3';\n\nimport {\n  type PreSendLocalMessageEventsMap,\n  type ContentType,\n  type Message,\n  PreSendLocalMessageEventsEnum,\n  type LocalMessageStatus,\n} from '../types';\nimport { type ReportLog } from '../../report-log';\nimport { type ChatCoreError } from '../../custom-error';\nimport { type PreSendLocalMessage } from './presend-local-message';\n\nexport interface PreSendLocalMessageEventsManagerProps {\n  reportLog: ReportLog;\n}\n\n/**\n * Mainly handles state management of pre-sent messages\n */\nexport class PreSendLocalMessageEventsManager {\n  private reportLog: ReportLog;\n\n  private reportLogWithScope: ReportLog;\n\n  constructor(props: PreSendLocalMessageEventsManagerProps) {\n    this.reportLog = props.reportLog;\n    this.reportLogWithScope = this.reportLog.createLoggerWith({\n      scope: 'preSendLocalMessageEventsManager',\n    });\n    this.preSendLocalMessageEventsMap = new Map();\n  }\n\n  private preSendLocalMessageEvents: EventEmitter<PreSendLocalMessageEventsEnum> =\n    new EventEmitter();\n\n  private preSendLocalMessageEventsMap: Map<\n    string,\n    PreSendLocalMessage<ContentType>\n  > = new Map();\n\n  // Add local messages that need to be cached\n  add(message: Message<ContentType>) {\n    this.preSendLocalMessageEventsMap.set(\n      message.extra_info.local_message_id,\n      message,\n    );\n    this.reportLogWithScope.info({\n      message: '-',\n      meta: {\n        buffer: this.preSendLocalMessageEventsMap,\n      },\n    });\n  }\n\n  updateLocalMessageStatus(\n    local_message_id: string,\n    local_message_status: LocalMessageStatus,\n  ) {\n    const message = this.preSendLocalMessageEventsMap.get(local_message_id);\n    if (message) {\n      message.local_message_status = local_message_status;\n      this.preSendLocalMessageEventsMap.set(local_message_id, message);\n      this.reportLogWithScope.info({\n        message: '-',\n        meta: {\n          buffer: this.preSendLocalMessageEventsMap,\n          local_message_status,\n        },\n      });\n    }\n  }\n\n  // Get cached local messages\n  getStashedLocalMessage(local_message_id: string) {\n    return this.preSendLocalMessageEventsMap.get(local_message_id);\n  }\n\n  on<T extends PreSendLocalMessageEventsEnum>(\n    event: T,\n    callback: PreSendLocalMessageEventsMap[T],\n  ) {\n    this.preSendLocalMessageEvents.on(event, callback);\n  }\n\n  once<T extends PreSendLocalMessageEventsEnum>(\n    event: T,\n    callback: PreSendLocalMessageEventsMap[T],\n  ) {\n    this.preSendLocalMessageEvents.once(event, callback);\n  }\n\n  emit<T extends PreSendLocalMessageEventsEnum>(\n    event: T,\n    params: Parameters<PreSendLocalMessageEventsMap[T]>[0],\n  ) {\n    this.preSendLocalMessageEvents.emit(event, params);\n    // Sent successfully, clear\n    if (event === PreSendLocalMessageEventsEnum.MESSAGE_SEND_SUCCESS) {\n      const message = params as Message<ContentType>;\n      this.preSendLocalMessageEventsMap.delete(\n        message.extra_info.local_message_id,\n      );\n      this.reportLogWithScope.info({\n        message: '-',\n        meta: {\n          buffer: this.preSendLocalMessageEventsMap,\n        },\n      });\n      return;\n    }\n\n    // Send failed/timed out, clear\n    if (\n      [\n        PreSendLocalMessageEventsEnum.MESSAGE_SEND_FAIL,\n        PreSendLocalMessageEventsEnum.MESSAGE_SEND_TIMEOUT,\n      ].includes(event)\n    ) {\n      const { local_message_id } = (params as ChatCoreError).ext;\n      local_message_id &&\n        this.preSendLocalMessageEventsMap.delete(local_message_id);\n      this.reportLogWithScope.info({\n        message: '-/',\n        meta: {\n          buffer: this.preSendLocalMessageEventsMap,\n        },\n      });\n      return;\n    }\n\n    // Upload status modification\n    if (event === PreSendLocalMessageEventsEnum.FILE_UPLOAD_STATUS_CHANGE) {\n      const message = params as Message<ContentType>;\n      this.preSendLocalMessageEventsMap.set(\n        message.extra_info.local_message_id,\n        message,\n      );\n    }\n  }\n\n  /**\n   * destroy\n   */\n  destroy() {\n    this.preSendLocalMessageEvents.removeAllListeners();\n    this.preSendLocalMessageEventsMap.clear();\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const safeJSONParse = <T = unknown>(\n  value: string,\n  fallback: T | null,\n):\n  | {\n      parseSuccess: true;\n      useFallback: false;\n      value: T;\n    }\n  | {\n      parseSuccess: false;\n      useFallback: true;\n      value: T;\n    }\n  | {\n      parseSuccess: false;\n      useFallback: false;\n      value: null;\n    } => {\n  try {\n    return {\n      parseSuccess: true,\n      value: JSON.parse(value),\n      useFallback: false,\n    };\n  } catch (error) {\n    if (fallback !== null) {\n      return {\n        parseSuccess: false,\n        useFallback: true,\n        value: fallback,\n      };\n    }\n    return {\n      parseSuccess: false,\n      useFallback: false,\n      value: null,\n    };\n  }\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * message management related\n * 1. Get chat history\n * 2. Clear the conversation context\n * 3. Clear history\n * 4. Delete messages\n */\n\nimport { safeJSONParse } from '../shared/utils/safe-json-parse';\nimport { RequestScene } from '../request-manager/types';\nimport { type RequestManager } from '../request-manager';\nimport type { ReportLog } from '../report-log';\nimport {\n  type ReportMessageProps,\n  type BreakMessageProps,\n  type BreakMessageResponse,\n  type ClearHistoryProps,\n  type ClearHistoryResponse,\n  type ClearMessageContextProps,\n  type DeleteMessageProps,\n  type DeleteMessageResponse,\n  type GetHistoryMessageProps,\n  type GetHistoryMessageResponse,\n  type ReportMessageResponse,\n  type ClearMessageContextResponse,\n  type ChatASRProps,\n  type ChatASRResponse,\n} from './types/message-manager';\nimport { ContentType, type MessageContent } from './types';\nimport { SlardarEvents } from './events/slardar-events';\n\nexport interface MessageManagerProps {\n  reportLog: ReportLog;\n  requestManager: RequestManager;\n}\n\nexport class MessageManager {\n  reportLog: ReportLog;\n\n  reportLogWithScope: ReportLog;\n\n  requestManager: RequestManager;\n\n  request: RequestManager['request'];\n\n  constructor(props: MessageManagerProps) {\n    const { reportLog, requestManager } = props;\n    this.reportLog = reportLog;\n    this.requestManager = requestManager;\n    this.request = requestManager.request;\n    this.reportLogWithScope = this.reportLog.createLoggerWith({\n      scope: 'message',\n    });\n  }\n\n  /**\n   * Data conversion of the message history obtained by the interface\n   */\n  static convertMessageList = (\n    messageList: GetHistoryMessageResponse['message_list'],\n  ) => {\n    messageList.forEach(message => {\n      message.content_obj =\n        message.content_type === ContentType.Text\n          ? undefined\n          : safeJSONParse<MessageContent<ContentType>>(message.content, null)\n              .value;\n    });\n    return messageList;\n  };\n\n  /**\n   * Get chat history\n   */\n  async getHistoryMessage(props: GetHistoryMessageProps) {\n    try {\n      const res = await this.request.post(\n        this.requestManager.getSceneConfig(RequestScene.GetMessage).url,\n        props,\n      );\n      const data = res.data as GetHistoryMessageResponse;\n      data.message_list = MessageManager.convertMessageList(data.message_list);\n      return data;\n    } catch (error) {\n      this.reportLogWithScope.slardarErrorEvent({\n        eventName: SlardarEvents.MESSAGE_FETCH_HISTORY_ERROR,\n        error: error as Error,\n      });\n      // Exception should not be omitted here, upstream logical branch checked, no risk\n      throw error;\n    }\n  }\n\n  /**\n   * Clear the conversation context\n   */\n  async clearMessageContextUrl(props: ClearMessageContextProps) {\n    try {\n      const res = await this.request.post(\n        this.requestManager.getSceneConfig(RequestScene.ClearMessageContext)\n          .url,\n        props,\n      );\n      return res.data as ClearMessageContextResponse;\n    } catch (error) {\n      this.reportLogWithScope.slardarErrorEvent({\n        eventName: SlardarEvents.MESSAGE_CLEAR_CONTEXT_ERROR,\n        error: error as Error,\n      });\n    }\n  }\n\n  /**\n   * Clear history\n   */\n  async clearHistory(props: ClearHistoryProps) {\n    try {\n      const res = await this.request.post(\n        this.requestManager.getSceneConfig(RequestScene.ClearHistory).url,\n        props,\n      );\n      return res.data as ClearHistoryResponse;\n    } catch (error) {\n      this.reportLogWithScope.slardarErrorEvent({\n        eventName: SlardarEvents.MESSAGE_CLEAR_HISTORY_ERROR,\n        error: error as Error,\n      });\n    }\n  }\n\n  /**\n   * delete message\n   */\n  async deleteMessage(props: DeleteMessageProps) {\n    try {\n      const res = await this.request.post(\n        this.requestManager.getSceneConfig(RequestScene.DeleteMessage).url,\n        props,\n      );\n      return res.data as DeleteMessageResponse;\n    } catch (error) {\n      this.reportLogWithScope.slardarErrorEvent({\n        eventName: SlardarEvents.MESSAGE_DELETE_ERROR,\n        error: error as Error,\n      });\n    }\n  }\n\n  /**\n   * interrupt message\n   */\n  async breakMessage(props: BreakMessageProps) {\n    try {\n      const res = await this.request.post(\n        this.requestManager.getSceneConfig(RequestScene.BreakMessage).url,\n        props,\n      );\n      return res.data as BreakMessageResponse;\n    } catch (error) {\n      this.reportLogWithScope.slardarErrorEvent({\n        eventName: SlardarEvents.MESSAGE_INTERRUPT_ERROR,\n        error: error as Error,\n      });\n    }\n  }\n\n  /**\n   * Like/click on the message\n   */\n  async reportMessage(props: ReportMessageProps) {\n    try {\n      const res = await this.request.post(\n        this.requestManager.getSceneConfig(RequestScene.ReportMessage).url,\n        props,\n      );\n      return res.data as ReportMessageResponse;\n    } catch (error) {\n      this.reportLogWithScope.slardarErrorEvent({\n        eventName: SlardarEvents.MESSAGE_REPORT_ERROR,\n        error: error as Error,\n      });\n    }\n  }\n\n  /**\n   * speech-to-text\n   */\n  async chatASR(props: ChatASRProps) {\n    try {\n      const res = await this.request.post(\n        this.requestManager.getSceneConfig(RequestScene.ChatASR).url,\n        props,\n        {\n          headers: {\n            /**\n             * https://developer.mozilla.org/zh-CN/docs/Web/API/FormData\n             * If the encoding type for sending is set to \"multipart/form-data\", it will use the same format as the form.\n             */\n            'Content-Type': 'multipart/form-data',\n          },\n        },\n      );\n      return res.data as ChatASRResponse;\n    } catch (error) {\n      this.reportLogWithScope.slardarErrorEvent({\n        eventName: SlardarEvents.CHAT_ASR_ERROR,\n        error: error as Error,\n      });\n      throw error;\n    }\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport interface ExtErrorInfo {\n  code?: number;\n  local_message_id?: string;\n  reply_id?: string;\n  logId?: string;\n  rawError?: unknown;\n}\nexport class ChatCoreError extends Error {\n  ext: ExtErrorInfo;\n  constructor(message: string, ext?: ExtErrorInfo) {\n    super(message);\n    this.name = 'chatCoreError';\n    this.ext = ext || {};\n  }\n\n  /**\n   * Flatten error messages for easy filtering of error messages in slardar\n   */\n  flatten = () => {\n    const { message, ext } = this;\n    return {\n      message,\n      ...ext,\n    };\n  };\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Expose the pre-sent message instance, the pre-sent message is used to be uploaded to the screen after the message is created, and the message format is consistent with Message < T >\n */\n\nimport {\n  type Message,\n  type MessageInfoRole,\n  type ContentType,\n  type MessageType,\n  type MessageStatus,\n  type MessageContent,\n  type ChunkRaw,\n  type LocalMessageStatus,\n} from '../types';\n\nexport class PreSendLocalMessage<T extends ContentType> implements Message<T> {\n  bot_id?: string;\n  preset_bot?: string;\n  user?: string;\n  // TODO: fix me\n  // @ts-expect-error should be fixed\n  extra_info: Message<T>['extra_info'] = {\n    local_message_id: '',\n    input_tokens: '', // User query consumed token\n    output_tokens: '', // LLM output consumed token\n    token: '', // Total token consumption\n    plugin_status: 'success', // \"success\" or \"fail\"\n    time_cost: '', // Intermediate invocation time of procedure\n    workflow_tokens: '',\n    bot_state: '', // {   bot_id?: string;agent_id?: string;agent_name?: string; }\n    plugin_request: '', // Parameters of the plugin request\n    tool_name: '', // Specific API name under the invoked plugin\n    plugin: '', // Name of the plugin invoked\n  };\n  index?: number; // Order of messages in a response\n  is_finish?: boolean; // message status\n  section_id: string; // The context id to which the message belongs\n  content_type: ContentType;\n  debug_messages?: ChunkRaw[];\n  content: string;\n  content_obj: MessageContent<T>;\n  file_upload_result?: 'success' | 'fail'; // file upload status\n  role: MessageInfoRole;\n  type: MessageType;\n  message_status?: MessageStatus;\n  message_id: string;\n  reply_id: string;\n  local_message_status?: LocalMessageStatus;\n  mention_list: { id: string }[];\n\n  constructor(props: Message<T>) {\n    const {\n      bot_id,\n      preset_bot,\n      extra_info: { local_message_id },\n      content_type,\n      content,\n      content_obj,\n      role,\n      type,\n      message_status,\n      message_id,\n      reply_id,\n      user,\n      section_id,\n      local_message_status,\n      mention_list,\n      file_upload_result,\n    } = props;\n    this.bot_id = bot_id;\n    this.preset_bot = preset_bot;\n    this.user = user;\n    this.extra_info.local_message_id = local_message_id;\n    this.content_type = content_type;\n    this.content = content;\n    this.content_obj = content_obj;\n    this.file_upload_result = undefined;\n    this.role = role;\n    this.type = type;\n    this.message_status = message_status;\n    this.message_id = message_id;\n    this.reply_id = reply_id;\n    this.section_id = section_id;\n    this.local_message_status = local_message_status || 'unsent';\n    this.mention_list = mention_list;\n    this.file_upload_result = file_upload_result;\n  }\n\n  static create<T extends ContentType>(props: Message<T>) {\n    return new PreSendLocalMessage(props);\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * 1. Responsible for standardizing imported parameters exported parameters of various types of message creation to reduce message creation costs\n * 2. For the received message, spit out the specified message format for different message types\n */\n\nimport { nanoid } from 'nanoid';\nimport { cloneDeep, merge } from 'lodash-es';\n\nimport {\n  ContentType,\n  type CreateMessageOptions,\n  type ImageMessageProps,\n  type Message,\n  type MessageContent,\n  type MixMessageContent,\n  type NormalizedMessageProps,\n  PreSendLocalMessageEventsEnum,\n  type SendMessage,\n  type SendMessageOptions,\n  type TextAndFileMixMessageProps,\n  type TextAndFileMixMessagePropsPayload,\n  type TextMessageProps,\n} from '../types';\nimport { filterEmptyField } from '../../shared/utils/data-handler';\nimport { FileTypeEnum, getFileInfo } from '../../shared/const';\nimport {\n  type EventPayloadMaps,\n  type UploadPluginConstructor,\n  type UploadPluginInterface,\n  type UploadResult,\n} from '../../plugins/upload-plugin/types/plugin-upload';\nimport { ChatCoreError } from '../../custom-error';\nimport { type Scene } from '../../chat-sdk/types/interface';\nimport { type PreSendLocalMessageEventsManager } from './presend-local-message-events-manager';\nimport { PreSendLocalMessage } from './presend-local-message';\n\n/**\n * Create a pre-sent message\n */\nexport interface PreSendLocalMessageFactoryProps {\n  bot_id?: string;\n  preset_bot?: string;\n  conversation_id: string;\n  user?: string;\n  enableDebug?: false;\n  scene?: Scene;\n  bot_version?: string;\n  draft_mode?: boolean;\n}\n\nexport class PreSendLocalMessageFactory {\n  bot_id?: string;\n\n  preset_bot?: string;\n\n  conversation_id: string;\n\n  user?: string;\n\n  scene?: Scene;\n\n  bot_version?: string;\n\n  draft_mode?: boolean;\n\n  constructor(props: PreSendLocalMessageFactoryProps) {\n    const {\n      bot_id,\n      conversation_id,\n      preset_bot,\n      user,\n      scene,\n      bot_version,\n      draft_mode,\n    } = props;\n    this.bot_id = bot_id;\n    this.preset_bot = preset_bot;\n    this.conversation_id = conversation_id;\n    this.user = user;\n    this.scene = scene;\n    this.bot_version = bot_version;\n    this.draft_mode = draft_mode;\n  }\n\n  /**\n   * Create text message\n   */\n  createTextMessage(\n    props: TextMessageProps,\n    messageEventsManager: PreSendLocalMessageEventsManager,\n    options?: CreateMessageOptions,\n  ): Message<ContentType.Text> {\n    const { payload } = props;\n    const message = PreSendLocalMessage.create<ContentType.Text>(\n      this.assembleMessageCommonProps({\n        content: payload.text,\n        content_obj: payload.text,\n        content_type: ContentType.Text,\n        section_id: options?.section_id || '',\n        mention_list: props.payload.mention_list,\n      }),\n    );\n    messageEventsManager.add(message);\n    return cloneDeep(message);\n  }\n\n  /**\n   * Create image message\n   */\n  createImageMessage<M extends EventPayloadMaps>(props: {\n    messageProps: ImageMessageProps<M>;\n\n    UploadPlugin: UploadPluginConstructor;\n    uploadPluginConstructorOptions: Record<string, unknown>;\n    messageEventsManager: PreSendLocalMessageEventsManager;\n    options?: CreateMessageOptions;\n  }): PreSendLocalMessage<ContentType.Image> {\n    const {\n      payload: { file, mention_list },\n      pluginUploadManager,\n    } = props.messageProps;\n    const {\n      UploadPlugin,\n      messageEventsManager,\n      options,\n      uploadPluginConstructorOptions,\n    } = props;\n    const message = PreSendLocalMessage.create(\n      this.assembleMessageCommonProps<ContentType.Image>({\n        content: JSON.stringify(this.assembleImageMessageContent(file)),\n        content_obj: this.assembleImageMessageContent(file),\n        content_type: ContentType.Image,\n        section_id: options?.section_id || '',\n        mention_list,\n      }),\n    );\n\n    // Pre-sent messages are saved locally\n    messageEventsManager.add(message);\n\n    const uploaderPluginInstance = new UploadPlugin({\n      file,\n      type: 'image',\n      ...uploadPluginConstructorOptions,\n    }) as UploadPluginInterface<M>;\n\n    pluginUploadManager?.(uploaderPluginInstance);\n\n    uploaderPluginInstance.on('complete', info => {\n      this.updateImageMessageContent(message, info.uploadResult);\n      this.updateMessageUploadResult(message, 'success');\n      messageEventsManager.emit(\n        PreSendLocalMessageEventsEnum.FILE_UPLOAD_STATUS_CHANGE,\n        message,\n      );\n    });\n\n    uploaderPluginInstance.on('error', () => {\n      this.updateMessageUploadResult(message, 'fail');\n    });\n\n    return cloneDeep(message);\n  }\n\n  /**\n   * Create file message\n   */\n  createFileMessage<M extends EventPayloadMaps>(props: {\n    messageProps: ImageMessageProps<M>;\n\n    UploadPlugin: UploadPluginConstructor;\n    uploadPluginConstructorOptions: Record<string, unknown>;\n    messageEventsManager: PreSendLocalMessageEventsManager;\n    options?: CreateMessageOptions;\n  }): PreSendLocalMessage<ContentType.File> {\n    const {\n      payload: { file, mention_list },\n      pluginUploadManager,\n    } = props.messageProps;\n    const {\n      UploadPlugin,\n      messageEventsManager,\n      options,\n      uploadPluginConstructorOptions,\n    } = props;\n    const message = PreSendLocalMessage.create(\n      this.assembleMessageCommonProps<ContentType.File>({\n        content: JSON.stringify(this.assembleFileMessageContent(file)),\n        content_obj: this.assembleFileMessageContent(file),\n        content_type: ContentType.File,\n        section_id: options?.section_id || '',\n        mention_list,\n      }),\n    );\n    // Pre-send file messages saved locally\n    messageEventsManager.add(message);\n\n    const uploaderPluginInstance = new UploadPlugin({\n      file,\n      type: 'object',\n      ...uploadPluginConstructorOptions,\n    }) as UploadPluginInterface<M>;\n    pluginUploadManager?.(uploaderPluginInstance);\n\n    uploaderPluginInstance.on('complete', info => {\n      const { uploadResult, type } = info;\n      if (type === 'success') {\n        this.updateFileMessageContent(message, uploadResult);\n        this.updateMessageUploadResult(message, 'success');\n        messageEventsManager.emit(\n          PreSendLocalMessageEventsEnum.FILE_UPLOAD_STATUS_CHANGE,\n          message,\n        );\n      }\n    });\n\n    uploaderPluginInstance.on('error', () => {\n      this.updateMessageUploadResult(message, 'fail');\n      messageEventsManager.emit(\n        PreSendLocalMessageEventsEnum.FILE_UPLOAD_STATUS_CHANGE,\n        message,\n      );\n    });\n    return cloneDeep(message);\n  }\n\n  /**\n   * Create a mixed message\n   */\n  createTextAndFileMixMessage(\n    props: TextAndFileMixMessageProps,\n    messageEventsManager: PreSendLocalMessageEventsManager,\n    options?: CreateMessageOptions,\n  ): Message<ContentType.Mix> {\n    const {\n      payload: { mixList, mention_list },\n    } = props;\n    const message = PreSendLocalMessage.create(\n      this.assembleMessageCommonProps<ContentType.Mix>({\n        content: JSON.stringify(\n          this.assembleTextAndFileMixMessageContent(mixList),\n        ),\n        content_obj: this.assembleTextAndFileMixMessageContent(mixList),\n        content_type: ContentType.Mix,\n        section_id: options?.section_id || '',\n        mention_list,\n      }),\n    );\n    messageEventsManager.add(message);\n    return cloneDeep(message);\n  }\n\n  /**\n   * Create standardized messages\n   */\n  createNormalizedMessage<T extends ContentType>(\n    props: NormalizedMessageProps<T>,\n    messageEventsManager: PreSendLocalMessageEventsManager,\n    options?: CreateMessageOptions,\n  ): Message<T> {\n    const {\n      payload: { contentObj, contentType, mention_list },\n    } = props;\n    const message = PreSendLocalMessage.create(\n      this.assembleMessageCommonProps({\n        content: JSON.stringify(contentObj),\n        content_obj: contentObj,\n        content_type: contentType,\n        section_id: options?.section_id || '',\n        mention_list,\n        file_upload_result: 'success',\n      }),\n    );\n    messageEventsManager.add(message);\n    return cloneDeep(message);\n  }\n\n  /**\n   * Assemble image message content\n   */\n  private assembleImageMessageContent(\n    file: File,\n  ): MessageContent<ContentType.Image> {\n    const blobUrl = URL.createObjectURL(file);\n    return {\n      image_list: [\n        {\n          key: '',\n          image_thumb: {\n            url: blobUrl,\n            width: 0,\n            height: 0,\n          },\n          image_ori: {\n            url: blobUrl,\n            width: 0,\n            height: 0,\n          },\n          feedback: null,\n        },\n      ],\n    };\n  }\n\n  /**\n   * Update image message content\n   */\n  private updateImageMessageContent(\n    message: PreSendLocalMessage<ContentType.Image>,\n    uploadResult: UploadResult,\n  ): void {\n    const {\n      Uri = '',\n      Url = '',\n      ImageWidth = 0,\n      ImageHeight = 0,\n    } = uploadResult;\n    message.content_obj.image_list[0] = {\n      ...message.content_obj.image_list[0],\n      key: Uri,\n      image_thumb: {\n        ...message.content_obj.image_list[0].image_thumb,\n        width: ImageWidth,\n        height: ImageHeight,\n        url: Url,\n      },\n      image_ori: {\n        ...message.content_obj.image_list[0].image_ori,\n        width: ImageWidth,\n        height: ImageHeight,\n        url: Url,\n      },\n    };\n\n    message.content = JSON.stringify(message.content_obj);\n  }\n\n  /**\n   * Update file message content\n   */\n  private updateFileMessageContent(\n    message: PreSendLocalMessage<ContentType.File>,\n    uploadResult: UploadResult,\n  ): void {\n    const { Uri = '', Url = '' } = uploadResult;\n    message.content_obj.file_list[0].file_key = Uri;\n    message.content_obj.file_list[0].file_url = Url;\n    message.content = JSON.stringify(message.content_obj);\n  }\n\n  /**\n   * Update image/file message Upload status: success | failed\n   */\n  private updateMessageUploadResult(\n    message: PreSendLocalMessage<ContentType.Image | ContentType.File>,\n    status: 'success' | 'fail',\n  ) {\n    message.file_upload_result = status;\n    return message;\n  }\n\n  /**\n   * Assemble file message content\n   */\n  private assembleFileMessageContent(\n    file: File,\n  ): MessageContent<ContentType.File> {\n    const fileType = getFileInfo(file)?.fileType;\n    if (!fileType) {\n      throw new ChatCoreError('');\n    }\n    return {\n      file_list: [\n        {\n          file_key: '',\n          file_name: file.name,\n          file_type: fileType,\n          file_size: file.size,\n          file_url: '',\n        },\n      ],\n    };\n  }\n\n  /**\n   * Assemble mixed message content\n   */\n  private assembleTextAndFileMixMessageContent(\n    mixList: TextAndFileMixMessagePropsPayload['mixList'],\n  ): MessageContent<ContentType.Mix> {\n    const itemList = mixList.map(item => {\n      const { type } = item;\n      if (type === ContentType.Text) {\n        return {\n          type,\n          text: item.text,\n        };\n      }\n      if (type === ContentType.File) {\n        const fileType =\n          getFileInfo(item.file)?.fileType || FileTypeEnum.DEFAULT_UNKNOWN;\n\n        return {\n          type,\n          file: {\n            file_key: item.uri,\n            file_name: item.file.name,\n            file_type: fileType,\n            file_size: item.file.size,\n            file_url: '',\n          },\n        };\n      }\n      if (type === ContentType.Image) {\n        const blobUrl = URL.createObjectURL(item.file);\n\n        return {\n          type,\n          image: {\n            key: item.uri,\n            image_thumb: {\n              url: blobUrl,\n              width: item.width,\n              height: item.height,\n            },\n            image_ori: {\n              url: blobUrl,\n              width: item.width,\n              height: item.height,\n            },\n            feedback: null,\n          },\n        };\n      }\n    });\n    return {\n      item_list: itemList as MixMessageContent['item_list'],\n    };\n  }\n\n  /**\n   * Assembly message common field\n   */\n  private assembleMessageCommonProps<T extends ContentType>(\n    props: Pick<\n      PreSendLocalMessage<T>,\n      | 'content'\n      | 'content_type'\n      | 'section_id'\n      | 'content_obj'\n      | 'mention_list'\n      | 'file_upload_result'\n    >,\n  ): Message<T> {\n    const commonProps: Pick<\n      Message<T>,\n      'message_id' | 'reply_id' | 'is_finish' | 'extra_info' | 'role' | 'type'\n    > = {\n      message_id: '',\n      reply_id: '',\n      is_finish: true,\n      // TODO: fix me\n      // @ts-expect-error should be fixed\n      extra_info: {\n        local_message_id: nanoid(),\n        input_tokens: '', // User query consumed token\n        output_tokens: '', // LLM output consumed token\n        token: '', // Total token consumption\n        plugin_status: 'success', // \"success\" or \"fail\"\n        time_cost: '', // Intermediate invocation time of procedure\n        workflow_tokens: '',\n        bot_state: '', // {   bot_id?: string;agent_id?: string;agent_name?: string; }\n        plugin_request: '', // Parameters of the plugin request\n        tool_name: '', // Specific API name under the invoked plugin\n        plugin: '', // Name of the plugin invoked\n      },\n      role: 'user',\n      type: 'question',\n    };\n    return merge(\n      commonProps,\n      this.bot_id ? { bot_id: this.bot_id } : {},\n      this.preset_bot ? { preset_bot: this.preset_bot } : {},\n      this.user ? { user: this.user } : {},\n      this.scene ? { scene: this.scene } : {},\n      props,\n    );\n  }\n\n  /**\n   * Process the message structure sent to the server\n   */\n  getSendMessageStructure(\n    message: PreSendLocalMessage<ContentType>,\n    options: SendMessageOptions,\n  ): SendMessage {\n    const {\n      extra_info: { local_message_id },\n      content_type,\n      content,\n      message_id,\n      mention_list,\n    } = message;\n    const { user, bot_id, preset_bot, scene, bot_version, draft_mode } = this;\n    const { stream, chatHistory, isRegenMessage, extendFiled } = options;\n    const mergedStructure = merge(\n      {\n        bot_id,\n        preset_bot,\n        conversation_id: this.conversation_id,\n        local_message_id,\n        content_type,\n        query: content,\n        user,\n        extra: {},\n        scene,\n        bot_version,\n        draft_mode,\n        stream,\n        chat_history: chatHistory,\n        regen_message_id: isRegenMessage ? message_id : undefined,\n        mention_list,\n      },\n      extendFiled,\n    );\n    return filterEmptyField(mergedStructure);\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Process received Chunk messages\n * 1. Pretreatment: Deserialization\n * 2. Incremental message splicing\n */\nimport { cloneDeep, flow } from 'lodash-es';\n\nimport { safeJSONParse } from '../shared/utils/safe-json-parse';\nimport {\n  type Message,\n  ContentType,\n  type ChunkRaw,\n  type MessageContent,\n  type VerboseContent,\n  VerboseMsgType,\n  type AnswerFinishVerboseData,\n  FinishReasonType,\n} from './types';\n\nexport class StreamBufferHelper {\n  // One-time streaming pull message message cache\n  streamMessageBuffer: Message<ContentType>[] = [];\n\n  // Chunk message cache for one-time streaming pull\n  streamChunkBuffer: ChunkRaw[] = [];\n\n  /**\n   * Added Chunk message cache\n   */\n  pushChunk(chunk: ChunkRaw) {\n    this.streamChunkBuffer.push(chunk);\n  }\n\n  concatContentAndUpdateMessage(message: Message<ContentType>) {\n    const previousIndex = this.streamMessageBuffer.findIndex(\n      item => item.message_id === message.message_id,\n    );\n    // new\n    if (previousIndex === -1) {\n      this.streamMessageBuffer.push(message);\n      return;\n    }\n    // update\n    const previousMessage = this.streamMessageBuffer.at(previousIndex);\n    message.content = (previousMessage?.content || '') + message.content;\n    message.reasoning_content =\n      (previousMessage?.reasoning_content ?? '') +\n      (message.reasoning_content ?? '');\n\n    message.content_obj = message.content;\n    this.streamMessageBuffer.splice(previousIndex, 1, message);\n  }\n\n  /**\n   * Clear message cache\n   */\n  clearMessageBuffer() {\n    this.streamMessageBuffer = [];\n    this.streamChunkBuffer = [];\n  }\n\n  /**\n   * Clear related message cache reply_id\n   * 1. reply_id equal reply\n   * 2, reply_id message_id problem\n   */\n  clearMessageBufferByReplyId(reply_id: string) {\n    this.streamMessageBuffer = this.streamMessageBuffer.filter(\n      message =>\n        message.reply_id !== reply_id && message.message_id !== reply_id,\n    );\n    this.streamChunkBuffer = this.streamChunkBuffer.filter(\n      chunk =>\n        chunk.message.reply_id !== reply_id &&\n        chunk.message.message_id !== reply_id,\n    );\n  }\n\n  /**\n   * Get the chunk in the chunk buffer according to message_id\n   */\n  getChunkByMessageId(message_id: string) {\n    return this.streamChunkBuffer.filter(\n      chunk => chunk.message.message_id === message_id,\n    );\n  }\n}\n\ninterface AddChunkAndProcessOptions {\n  logId?: string;\n}\nexport class ChunkProcessor {\n  streamBuffer: StreamBufferHelper = new StreamBufferHelper();\n\n  bot_id?: string;\n\n  preset_bot?: string;\n\n  enableDebug?: boolean;\n\n  constructor(props: {\n    bot_id?: string;\n    preset_bot?: string;\n    enableDebug?: boolean;\n  }) {\n    const { bot_id, preset_bot, enableDebug } = props;\n    this.bot_id = bot_id;\n    this.preset_bot = preset_bot;\n    this.enableDebug = enableDebug;\n  }\n  /**\n   *  Added chunk, unified processing of chunk messages\n   */\n  addChunkAndProcess(chunk: ChunkRaw, options?: AddChunkAndProcessOptions) {\n    this.streamBuffer.pushChunk(chunk);\n    flow(\n      this.preProcessChunk.bind(this),\n      this.concatChunkMessage.bind(this),\n      this.assembleDebugMessage.bind(this),\n    )(chunk, options) as Message<ContentType>;\n  }\n\n  /**\n   * Get the processed message according to the chunk\n   */\n  getProcessedMessageByChunk(chunk: ChunkRaw) {\n    return this.streamBuffer.streamMessageBuffer.find(\n      message => message.message_id === chunk.message.message_id,\n    ) as Message<ContentType>;\n  }\n\n  /**\n   * Get processed messages according to message_id\n   */\n  getProcessedMessageByMessageId(message_id: string) {\n    return this.streamBuffer.streamMessageBuffer.find(\n      message => message.message_id === message_id,\n    ) as Message<ContentType>;\n  }\n\n  /**\n   * Get the received ack message according to the local_message_id\n   */\n  getAckMessageByLocalMessageId(local_message_id: string) {\n    return this.streamBuffer.streamMessageBuffer.find(\n      message =>\n        message.extra_info.local_message_id === local_message_id &&\n        message.type === 'ack',\n    );\n  }\n\n  /**\n   * Got the first reply according to chunk\n   */\n  getFirstReplyMessageByChunk(chunk: ChunkRaw) {\n    const hasAck = this.streamBuffer.streamMessageBuffer.find(\n      item => item.type === 'ack' && item.message_id === chunk.message.reply_id,\n    );\n    if (!hasAck) {\n      return undefined;\n    }\n    return this.streamBuffer.streamMessageBuffer.find(\n      item => item.type !== 'ack' && item.reply_id === chunk.message.reply_id,\n    );\n  }\n\n  /**\n   * Get ack according to chunk.\n   */\n  getAckMessageByChunk(chunk: ChunkRaw) {\n    return this.streamBuffer.streamMessageBuffer.find(\n      item => item.type === 'ack' && item.message_id === chunk.message.reply_id,\n    );\n  }\n\n  /**\n   * Determine whether it is the first reply message.\n   * First reply except ack\n   */\n  isFirstReplyMessage(chunk: ChunkRaw) {\n    // No ack yet, definitely no first reply.\n    if (!this.getAckMessageByChunk(chunk)) {\n      return false;\n    }\n    return !this.getFirstReplyMessageByChunk(chunk);\n  }\n\n  /**\n   * Get all reply messages according to reply_id\n   */\n  getReplyMessagesByReplyId(reply_id: string) {\n    return this.streamBuffer.streamMessageBuffer.filter(\n      message => message.type !== 'ack' && message.reply_id === reply_id,\n    );\n  }\n\n  /**\n   * Get the length of all reply messages\n   */\n  getReplyMessagesLengthByReplyId(reply_id: string) {\n    return `${this.getReplyMessagesByReplyId(reply_id).reduce(\n      (acc, message) => acc + message.content.length,\n      0,\n    )}`;\n  }\n\n  /**\n   * Use for local logs\n   * @param message\n   * @returns\n   */\n  appendDebugMessage(message: Message<ContentType>) {\n    const cloneMessage = cloneDeep(message);\n    cloneMessage.debug_messages = this.streamBuffer.getChunkByMessageId(\n      message.message_id,\n    );\n    cloneMessage.stream_chunk_buffer = this.streamBuffer.streamChunkBuffer;\n    cloneMessage.stream_message_buffer = this.streamBuffer.streamMessageBuffer;\n    return cloneMessage;\n  }\n\n  /**\n   * Is getting the final answer?\n   */\n  isMessageAnswerEnd(chunk: ChunkRaw): boolean {\n    const { message } = chunk;\n    // Find all corresponding replies\n    const replyMessages = this.getReplyMessagesByReplyId(message.reply_id);\n    // Find if there is a verbose message, and identify the end of the answer, and filter out the finish of the interrupt scene\n    const finalAnswerVerboseMessage = replyMessages.find(replyMessage => {\n      const { type, content } = replyMessage;\n      if (type !== 'verbose') {\n        return false;\n      }\n      const { value: verboseContent } = safeJSONParse<VerboseContent>(\n        content,\n        null,\n      );\n      if (!verboseContent) {\n        return false;\n      }\n      const { value: verboseContentData } =\n        safeJSONParse<AnswerFinishVerboseData>(verboseContent.data, null);\n\n      // At present, there may be a finish package in a group. If you need to filter out the interrupt scene through finish_reason, you will get the finish that answers all the ends.\n      return (\n        verboseContent.msg_type === VerboseMsgType.GENERATE_ANSWER_FINISH &&\n        verboseContentData?.finish_reason !== FinishReasonType.INTERRUPT\n      );\n    });\n    return Boolean(finalAnswerVerboseMessage);\n  }\n\n  /**\n   * preprocess message\n   * 1. Deserialization\n   * 2. Add bot_id, is_finish, index, logId\n   * @param chunk\n   * @param options\n   * @returns\n   */\n  private preProcessChunk(\n    chunk: ChunkRaw,\n    options?: AddChunkAndProcessOptions,\n  ): Message<ContentType> {\n    const { message, is_finish, index } = chunk;\n    const { logId } = options || {};\n\n    return {\n      mention_list: [],\n      ...message,\n      logId,\n      bot_id: this.bot_id,\n      preset_bot: this.preset_bot,\n      is_finish,\n      index,\n      content_obj:\n        message.content_type !== ContentType.Text\n          ? safeJSONParse<MessageContent<ContentType>>(message.content, null)\n              .value\n          : message.content,\n    };\n  }\n\n  /**\n   * incremental message stitching\n   * 1. For incremental messages, you need to splice the previous message\n   */\n  private concatChunkMessage(\n    message: Message<ContentType>,\n  ): Message<ContentType> {\n    this.streamBuffer.concatContentAndUpdateMessage(message);\n\n    return message;\n  }\n\n  // debug_message logic\n  private assembleDebugMessage(\n    message: Message<ContentType>,\n  ): Message<ContentType> {\n    if (!this.enableDebug) {\n      return message;\n    }\n    // All message_id chunk messages pulled by a stream are returned at once\n    message.debug_messages = this.streamBuffer.getChunkByMessageId(\n      message.message_id,\n    );\n    return message;\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FetchStreamErrorCode, fetchStream } from '@coze-arch/fetch-stream';\n\nimport { ABORT_HTTP_CHUNK_MESSAGE } from '../constant';\nimport { RequestScene } from '../../request-manager/types';\nimport { type RequestManager } from '../../request-manager';\nimport { type ReportLog } from '../../report-log';\nimport { type SendMessage } from '../../message/types';\nimport { ChatCoreError } from '../../custom-error';\nimport { type TokenManager } from '../../credential';\nimport {\n  CustomEventEmitter,\n  FetchDataHelper,\n  getDataHelperPlaceholder,\n  getMessageLifecycleCallbackParam,\n  inValidChunkRaw,\n  type RetryCounterConfig,\n  streamParser,\n  ChunkEvent,\n} from './utils';\nimport {\n  type ParsedEvent,\n  type HandleErrorParams,\n  type HandleMessageParams,\n  type HandleMessageSuccessParams,\n  type HandleMessageTimerEndParams,\n  type SendMessageConfig,\n} from './types';\nimport { SlardarEvents } from './events/slardar-events';\nimport { HttpChunkEvents } from './events/http-chunk-events';\n\ninterface HttpChunkAdaptorConfig {\n  retryCounterConfig?: RetryCounterConfig;\n  requestManager: RequestManager;\n  tokenManager?: TokenManager;\n  reportLogWithScope: ReportLog;\n}\n\nconst MAX_DATA_HELPERS = 100;\n\nexport class HttpChunk extends CustomEventEmitter {\n  readonly retryCounterConfig?: RetryCounterConfig;\n  private fetchDataHelperMap: Map<string, FetchDataHelper>;\n  private requestManager: RequestManager;\n  private tokenManager?: TokenManager;\n  private reportLogWithScope: ReportLog;\n  constructor({\n    retryCounterConfig,\n    requestManager,\n    tokenManager,\n    reportLogWithScope,\n  }: HttpChunkAdaptorConfig) {\n    super();\n    this.retryCounterConfig = retryCounterConfig;\n    this.fetchDataHelperMap = new Map();\n    this.requestManager = requestManager;\n    this.tokenManager = tokenManager;\n    this.reportLogWithScope = reportLogWithScope;\n  }\n\n  private handleMessageSuccess = ({\n    fetchDataHelper = getDataHelperPlaceholder(),\n  }: HandleMessageSuccessParams) => {\n    const { localMessageID } = fetchDataHelper;\n\n    this.fetchDataHelperMap.delete(localMessageID);\n\n    this.customEmit(\n      HttpChunkEvents.ALL_SUCCESS,\n      getMessageLifecycleCallbackParam(fetchDataHelper),\n    );\n  };\n\n  private handleMessage = ({\n    message: { data },\n    fetchDataHelper = getDataHelperPlaceholder(),\n  }: HandleMessageParams) => {\n    const { logID, replyID } = fetchDataHelper;\n\n    // The data type thrown from fetch is obtained by assertions, here the runtime defends the type\n    if (!inValidChunkRaw(data)) {\n      this.customEmit(HttpChunkEvents.INVALID_MESSAGE, {\n        logID,\n        replyID,\n      });\n\n      return;\n    }\n    const validChunk = data;\n    fetchDataHelper.setReplyID(validChunk.message.reply_id);\n    this.customEmit(HttpChunkEvents.MESSAGE_RECEIVED, {\n      chunk: validChunk,\n      logID,\n    });\n  };\n\n  private pullMessage = async ({\n    value,\n    // TODO: There is no message retry in this issue\n    isRePullMessage: _isRePullMessage,\n    fetchDataHelper,\n    fetchUrl,\n    scene,\n  }: {\n    value: Record<string, unknown>; // Short URL imported parameters: direct pass-through body does not do specialized processing, external processing business logic\n    isRePullMessage: boolean;\n    fetchDataHelper: FetchDataHelper;\n    fetchUrl: string; // Short URL Link\n    scene: RequestScene;\n  }) => {\n    // TODO: hzf, does not use ternary expressions\n    const headers: [string, string][] = [\n      ['content-type', 'application/json'],\n      ...((this.tokenManager?.getApiKeyAuthorizationValue()\n        ? [['Authorization', this.tokenManager.getApiKeyAuthorizationValue()]]\n        : []) as [string, string][]),\n      ...(fetchDataHelper.headers\n        ? Array.isArray(fetchDataHelper.headers)\n          ? fetchDataHelper.headers\n          : Object.entries(fetchDataHelper.headers)\n        : []),\n    ];\n    const { hooks } = this.requestManager.getSceneConfig?.(scene) || {};\n    const { onBeforeSendMessage = [], onGetMessageStreamParser } = hooks || {};\n\n    // The following parameters can be modified\n    let channelFetchInfo = {\n      url: fetchUrl,\n      body: JSON.stringify(value),\n      headers,\n      method: 'POST',\n    };\n\n    for (const hook of onBeforeSendMessage) {\n      channelFetchInfo = await hook(channelFetchInfo);\n    }\n    await fetchStream<ParsedEvent, FetchDataHelper>(channelFetchInfo.url, {\n      onStart: response => {\n        fetchDataHelper.setLogID(response.headers.get('x-tt-logid'));\n\n        return Promise.resolve();\n      },\n      onFetchStart: localeData => {\n        this.customEmit(\n          HttpChunkEvents.FETCH_START,\n          getMessageLifecycleCallbackParam(localeData),\n        );\n      },\n      onFetchSuccess: localeData => {\n        this.customEmit(\n          HttpChunkEvents.FETCH_SUCCESS,\n          getMessageLifecycleCallbackParam(localeData),\n        );\n      },\n      onStartReadStream: localeData => {\n        this.customEmit(\n          HttpChunkEvents.READ_STREAM_START,\n          getMessageLifecycleCallbackParam(localeData),\n        );\n      },\n      onError: ({ fetchStreamError, dataClump: localeData }) =>\n        this.handleError({\n          errorInfo: {\n            ...fetchStreamError,\n            ext: getMessageLifecycleCallbackParam(localeData),\n          },\n          fetchDataHelper: localeData,\n        }),\n      onAllSuccess: localClump =>\n        this.handleMessageSuccess({ fetchDataHelper: localClump }),\n      validateMessage: ({ message }) => {\n        if (message.event !== ChunkEvent.ERROR) {\n          return {\n            status: 'success',\n          };\n        }\n        return {\n          error: new Error(String(message.data)),\n          status: 'error',\n        };\n      },\n      onMessage: ({ message, dataClump }) =>\n        this.handleMessage({ message, fetchDataHelper: dataClump }),\n      streamParser: onGetMessageStreamParser?.(value) || streamParser,\n      dataClump: fetchDataHelper,\n\n      body: channelFetchInfo.body,\n      headers: channelFetchInfo.headers,\n      method: channelFetchInfo.method,\n\n      signal: fetchDataHelper.abortSignal.signal,\n      totalFetchTimeout: fetchDataHelper.totalFetchTimeout,\n      onTotalFetchTimeout: dataClump =>\n        this.handleTotalFetchTimeout({ fetchDataHelper: dataClump }),\n      betweenChunkTimeout: fetchDataHelper.betweenChunkTimeout,\n      onBetweenChunkTimeout: dataClump =>\n        this.handleBetweenChunkTimeout({ fetchDataHelper: dataClump }),\n    });\n  };\n\n  private handleBetweenChunkTimeout = ({\n    fetchDataHelper = getDataHelperPlaceholder(),\n  }: HandleMessageTimerEndParams) => {\n    this.customEmit(\n      HttpChunkEvents.BETWEEN_CHUNK_TIMEOUT,\n      getMessageLifecycleCallbackParam(fetchDataHelper),\n    );\n  };\n\n  private handleTotalFetchTimeout = ({\n    fetchDataHelper = getDataHelperPlaceholder(),\n  }: HandleMessageTimerEndParams) => {\n    this.customEmit(\n      HttpChunkEvents.TOTAL_FETCH_TIMEOUT,\n      getMessageLifecycleCallbackParam(fetchDataHelper),\n    );\n  };\n\n  private handleError = ({ errorInfo }: HandleErrorParams) => {\n    if (errorInfo.code === FetchStreamErrorCode.FetchException) {\n      this.customEmit(HttpChunkEvents.FETCH_ERROR, errorInfo);\n      return;\n    }\n\n    this.customEmit(HttpChunkEvents.READ_STREAM_ERROR, errorInfo);\n\n    return;\n\n    // TODO: The following should be the logic to re-pull the message. The server level did not have time to do it in this issue.\n    // if (dataClump.retryCounter.matchMaxRetryAttempts()) {\n    //   this.customOnError?.(errorInfo);\n    //   //give up trying and try again\n    //   this.handleFinish();\n    //   return;\n    // }\n\n    // dataClump.retryCounter.add();\n  };\n\n  // Call the chat and resume interfaces to send messages, which has smoothed the difference at the upper level.\n  sendMessage = (value: SendMessage, config?: SendMessageConfig) => {\n    const localMessageID = value.local_message_id;\n\n    if (!localMessageID) {\n      // TODO: Use the same exception class\n      this.customEmit(HttpChunkEvents.FETCH_ERROR, {\n        code: FetchStreamErrorCode.FetchException,\n        msg: 'SendMessageError: SendMessage is Invalid',\n      });\n\n      return;\n    }\n\n    const fetchDataHelper = new FetchDataHelper({\n      localMessageID,\n      retryCounterConfig: this.retryCounterConfig,\n      betweenChunkTimeout: config?.betweenChunkTimeout,\n      totalFetchTimeout: config?.totalFetchTimeout,\n      headers: config?.headers,\n    });\n\n    if (this.fetchDataHelperMap.size >= MAX_DATA_HELPERS) {\n      this.fetchDataHelperMap.clear();\n    }\n\n    this.fetchDataHelperMap.set(localMessageID, fetchDataHelper);\n\n    const scene = config?.requestScene || RequestScene.SendMessage;\n    // Get short URL request link\n    const { url, baseURL } = this.requestManager.getSceneConfig?.(scene) || {};\n\n    const fetchUrl = baseURL ? `${baseURL}${url}` : url;\n    this.pullMessage({\n      value,\n      isRePullMessage: false,\n      fetchDataHelper,\n      fetchUrl,\n      scene,\n    });\n  };\n\n  abort = (localMessageID: string) => {\n    const targetFetchDataHelper = this.fetchDataHelperMap.get(localMessageID);\n    this.fetchDataHelperMap.delete(localMessageID);\n\n    if (targetFetchDataHelper?.abortSignal.signal.aborted) {\n      return;\n    }\n    try {\n      targetFetchDataHelper?.abortSignal.abort?.(ABORT_HTTP_CHUNK_MESSAGE);\n\n      this.reportLogWithScope.slardarSuccessEvent({\n        eventName: SlardarEvents.HTTP_CHUNK_UNEXPECTED_ABORT_ERROR,\n      });\n    } catch (rawError) {\n      const error = new ChatCoreError(\n        'An error occurred in calling abort in synchronous code',\n        { rawError },\n      );\n      this.reportLogWithScope.slardarErrorEvent({\n        eventName: SlardarEvents.HTTP_CHUNK_UNEXPECTED_ABORT_ERROR,\n        error,\n        meta: error.flatten(),\n      });\n    }\n  };\n\n  drop = () => {\n    this.fetchDataHelperMap.forEach(clump => {\n      this.abort(clump.localMessageID);\n    });\n  };\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const FONTIER_LOGID_PLACEHOLDER = 'FONTIER_LOGID_PLACEHOLDER';\nexport const ABORT_HTTP_CHUNK_MESSAGE = 'ABORT_FETCH';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { BETWEEN_CHUNK_TIMEOUT, SEND_MESSAGE_TIMEOUT } from '@/shared/const';\nimport { RequestScene } from '@/request-manager/types';\nimport { type ReportLog } from '@/report-log';\nimport {\n  PreSendLocalMessageEventsEnum,\n  type SendMessage,\n  type SendMessageMergedOptions,\n  type SendMessageOptions,\n  ContentType,\n  type Message,\n} from '@/message/types';\nimport { type PreSendLocalMessageEventsManager } from '@/message/presend-local-message/presend-local-message-events-manager';\nimport {\n  type PreSendLocalMessage,\n  type PreSendLocalMessageFactory,\n} from '@/message';\nimport { ChatCoreError } from '@/custom-error';\nimport { type HttpChunk } from '@/channel/http-chunk';\n\nimport {\n  type ReportEventsTracer,\n  SlardarEvents,\n} from '../events/slardar-events';\n\nexport interface SendMessageServicesProps {\n  preSendLocalMessageFactory: PreSendLocalMessageFactory;\n  httpChunk: HttpChunk;\n  preSendLocalMessageEventsManager: PreSendLocalMessageEventsManager;\n  reportLogWithScope: ReportLog;\n  reportEventsTracer: ReportEventsTracer;\n}\nexport class SendMessageService {\n  preSendLocalMessageFactory: PreSendLocalMessageFactory;\n  httpChunk: HttpChunk;\n  preSendLocalMessageEventsManager: PreSendLocalMessageEventsManager;\n  reportLogWithScope: ReportLog;\n  reportEventsTracer: ReportEventsTracer;\n  constructor({\n    preSendLocalMessageFactory,\n    httpChunk,\n    preSendLocalMessageEventsManager,\n    reportLogWithScope,\n    reportEventsTracer,\n  }: SendMessageServicesProps) {\n    this.preSendLocalMessageFactory = preSendLocalMessageFactory;\n    this.httpChunk = httpChunk;\n    this.preSendLocalMessageEventsManager = preSendLocalMessageEventsManager;\n    this.reportLogWithScope = reportLogWithScope;\n    this.reportEventsTracer = reportEventsTracer;\n  }\n\n  /**\n   * Send resume message\n   */\n  resumeMessage(message: Message<ContentType>, options?: SendMessageOptions) {\n    const mergedOptions: SendMessageMergedOptions = {\n      sendTimeout: SEND_MESSAGE_TIMEOUT,\n      betweenChunkTimeout: BETWEEN_CHUNK_TIMEOUT,\n      stream: true,\n      chatHistory: [],\n      isRegenMessage: false,\n      ...options,\n    };\n\n    const exposedMessage =\n      this.preSendLocalMessageFactory.getSendMessageStructure(\n        message,\n        mergedOptions,\n      );\n\n    this.httpChunk.sendMessage(exposedMessage, {\n      betweenChunkTimeout: options?.betweenChunkTimeout,\n      headers: options?.headers,\n      requestScene: RequestScene.ResumeMessage,\n    });\n  }\n\n  /**\n   * Send message\n   */\n  async sendMessage(\n    message: Message<ContentType>,\n    options?: SendMessageOptions,\n  ): Promise<Message<ContentType>> {\n    const mergedOptions: SendMessageMergedOptions = {\n      sendTimeout: SEND_MESSAGE_TIMEOUT,\n      betweenChunkTimeout: BETWEEN_CHUNK_TIMEOUT,\n      stream: true,\n      chatHistory: [],\n      isRegenMessage: false,\n      ...options,\n    };\n    this.reportLogWithScope.info({\n      message: '',\n      meta: {\n        message,\n      },\n    });\n\n    if (message.content_type === ContentType.Image) {\n      return await this.sendImageMessage(\n        message as PreSendLocalMessage<ContentType.Image>,\n        mergedOptions,\n      );\n    }\n\n    if (message.content_type === ContentType.File) {\n      return await this.sendFileMessage(\n        message as PreSendLocalMessage<ContentType.File>,\n        mergedOptions,\n      );\n    }\n\n    return await this.sendTextMessage(\n      message as PreSendLocalMessage<ContentType.Text>,\n      mergedOptions,\n    );\n  }\n\n  /**\n   * Send picture message\n   */\n  private async sendImageMessage(\n    message: PreSendLocalMessage<ContentType.Image>,\n    options: SendMessageMergedOptions,\n  ) {\n    const uploadMessage = await this.onUploadEventFinish(message, options);\n    const exposedMessage =\n      this.preSendLocalMessageFactory.getSendMessageStructure(\n        uploadMessage,\n        options,\n      );\n    return await this.sendChannelMessage(exposedMessage, options);\n  }\n\n  /**\n   * Send file message\n   * @param message\n   * @param options\n   * @private\n   */\n  private async sendFileMessage(\n    message: PreSendLocalMessage<ContentType.File>,\n    options: SendMessageMergedOptions,\n  ) {\n    const uploadMessage = await this.onUploadEventFinish(message, options);\n    const exposedMessage =\n      this.preSendLocalMessageFactory.getSendMessageStructure(\n        uploadMessage,\n        options,\n      );\n    return await this.sendChannelMessage(exposedMessage, options);\n  }\n\n  /**\n   * Send a text message\n   */\n  private async sendTextMessage(\n    message: PreSendLocalMessage<ContentType.Text>,\n    options: SendMessageMergedOptions,\n  ) {\n    const exposedMessage =\n      this.preSendLocalMessageFactory.getSendMessageStructure(message, options);\n    return await this.sendChannelMessage(exposedMessage, options);\n  }\n\n  /**\n   * Upload image & file upload event complete\n   */\n  private onUploadEventFinish<T extends ContentType.Image | ContentType.File>(\n    message: PreSendLocalMessage<T>,\n    sendMessageOptions?: SendMessageOptions,\n  ): Promise<PreSendLocalMessage<T>> {\n    return new Promise((resolve, reject) => {\n      // If it is to regenerate the message, return it directly.\n      if (sendMessageOptions?.isRegenMessage) {\n        resolve(message);\n        return;\n      }\n      // According to message_id, check whether the upload has been completed\n      const stashedLocalMessage =\n        this.preSendLocalMessageEventsManager.getStashedLocalMessage(\n          message.extra_info.local_message_id,\n        ) as PreSendLocalMessage<T>;\n      if (stashedLocalMessage?.file_upload_result) {\n        if (stashedLocalMessage?.file_upload_result === 'success') {\n          // Todo is changed to directly resolve message, stashed should not be stored in the full amount of requests, which is easy to cause misunderstandings\n          resolve(message);\n          return;\n        }\n        this.reportLogWithScope.slardarEvent({\n          eventName: SlardarEvents.SDK_MESSAGE_UPLOAD_FAIL,\n          meta: {\n            message: '',\n          },\n        });\n        reject(new Error(''));\n        return;\n      }\n\n      // Message upload complete\n      this.preSendLocalMessageEventsManager.on(\n        PreSendLocalMessageEventsEnum.FILE_UPLOAD_STATUS_CHANGE,\n        (preSendLocalMessage: Message<ContentType>) => {\n          if (\n            preSendLocalMessage.extra_info.local_message_id !==\n            message.extra_info.local_message_id\n          ) {\n            return;\n          }\n          if (preSendLocalMessage.file_upload_result === 'success') {\n            resolve(preSendLocalMessage as PreSendLocalMessage<T>);\n          } else {\n            this.reportLogWithScope.slardarEvent({\n              eventName: SlardarEvents.SDK_MESSAGE_UPLOAD_FAIL,\n              meta: {\n                message: '-fail',\n              },\n            });\n            reject(new Error(''));\n          }\n        },\n      );\n    });\n  }\n\n  /**\n   * HttpChunk send message event mode changed to await mode\n   * @Param message The final message format to be sent to the server\n   * @Param options send message configuration\n   */\n  private sendChannelMessage(\n    message: SendMessage,\n    options: SendMessageMergedOptions,\n  ): Promise<Message<ContentType>> {\n    const { sendTimeout, betweenChunkTimeout, headers } = options;\n    const { local_message_id } = message;\n\n    return new Promise((resolve, reject) => {\n      let isHandled = false;\n      const timer = setTimeout(() => {\n        if (isHandled) {\n          return;\n        }\n        isHandled = true;\n        this.preSendLocalMessageEventsManager.updateLocalMessageStatus(\n          message.local_message_id,\n          'send_timeout',\n        );\n        this.reportEventsTracer?.sendMessageTracer.timeout(local_message_id);\n        this.preSendLocalMessageEventsManager.emit(\n          PreSendLocalMessageEventsEnum.MESSAGE_SEND_TIMEOUT,\n          new ChatCoreError('', {\n            local_message_id: message.local_message_id,\n          }),\n        );\n        reject(\n          new ChatCoreError('', {\n            local_message_id: message.local_message_id,\n          }),\n        );\n      }, sendTimeout);\n      this.reportEventsTracer?.sendMessageTracer.start(local_message_id);\n      this.httpChunk.sendMessage(message, {\n        betweenChunkTimeout,\n        headers,\n        requestScene: RequestScene.SendMessage,\n      });\n      // The monitor message was sent successfully.\n      this.preSendLocalMessageEventsManager.once(\n        PreSendLocalMessageEventsEnum.MESSAGE_SEND_SUCCESS,\n        (receiveMessage: Message<ContentType>) => {\n          if (\n            receiveMessage.extra_info.local_message_id !==\n            message.local_message_id\n          ) {\n            return;\n          }\n          if (isHandled) {\n            return;\n          }\n          isHandled = true;\n          clearTimeout(timer);\n          this.preSendLocalMessageEventsManager.updateLocalMessageStatus(\n            receiveMessage.extra_info.local_message_id,\n            'send_success',\n          );\n          this.reportEventsTracer?.sendMessageTracer.success(local_message_id, {\n            logId: receiveMessage.logId,\n          });\n          resolve(receiveMessage);\n        },\n      );\n      // Listening message sending failed\n      this.preSendLocalMessageEventsManager.once(\n        PreSendLocalMessageEventsEnum.MESSAGE_SEND_FAIL,\n        (error: ChatCoreError) => {\n          if (error.ext.local_message_id !== message.local_message_id) {\n            return;\n          }\n          if (isHandled) {\n            return;\n          }\n          isHandled = true;\n          clearTimeout(timer);\n          this.preSendLocalMessageEventsManager.updateLocalMessageStatus(\n            error.ext.local_message_id,\n            'send_fail',\n          );\n          this.reportEventsTracer?.sendMessageTracer.error(error);\n          reject(error);\n        },\n      );\n    });\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { exhaustiveCheckSimple } from '@coze-common/chat-area-utils';\n\nimport type { UploadPluginConstructor } from '@/plugins/upload-plugin/types/plugin-upload';\n\nimport type { PluginKey, PluginValue } from '../types/interface';\n\nexport class PluginsService {\n  //eslint-disable-next-line @typescript-eslint/no-explicit-any -- I didn't think of a suitable type of gymnastics for the time being, use any first,\n  UploadPlugin: UploadPluginConstructor<any> | null = null;\n  uploadPluginConstructorOptions: Record<string, unknown> = {};\n\n  /**\n   * Register plugin\n   */\n  registerPlugin<T extends PluginKey, P extends Record<string, unknown>>(\n    key: T,\n    plugin: PluginValue<T, P>,\n    constructorOptions?: P,\n  ) {\n    if (key === 'upload-plugin') {\n      this.UploadPlugin = plugin;\n      this.uploadPluginConstructorOptions = constructorOptions || {};\n    }\n  }\n\n  /**\n   * Check if the plugin has been registered\n   */\n  checkPluginIsRegistered(key: PluginKey): boolean {\n    if (key === 'upload-plugin') {\n      return !!this.UploadPlugin;\n    }\n\n    return false;\n  }\n\n  getRegisteredPlugin(key: PluginKey) {\n    if (key === 'upload-plugin') {\n      return this.UploadPlugin;\n    }\n    exhaustiveCheckSimple(key);\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { filterEmptyField } from '@/shared/utils/data-handler';\nimport { type ReportLog } from '@/report-log';\nimport type {\n  ClearMessageContextParams,\n  GetHistoryMessageResponse,\n} from '@/message/types/message-manager';\nimport { MessageManager } from '@/message/message-manager';\nimport { type ChunkProcessor } from '@/message';\nimport { type HttpChunk } from '@/channel/http-chunk';\n\nimport {\n  type ChatASRParams,\n  type BreakMessageParams,\n  type DeleteMessageParams,\n  type GetHistoryMessageParams,\n  type ReportMessageParams,\n} from '../types/services/message-manager-service';\nimport type { Scene } from '../types/interface';\nimport {\n  type ReportEventsTracer,\n  SlardarEvents,\n} from '../events/slardar-events';\n\nexport interface MessageManagerServiceProps {\n  messageManager: MessageManager;\n  conversation_id: string;\n  scene?: Scene;\n  bot_id: string;\n  preset_bot: string;\n  draft_mode?: boolean;\n  httpChunk: HttpChunk;\n  chunkProcessor: ChunkProcessor;\n  reportEventsTracer: ReportEventsTracer;\n  reportLogWithScope: ReportLog;\n}\n\nexport class MessageManagerService {\n  messageManager: MessageManager;\n  conversation_id: string;\n  scene?: Scene;\n  bot_id: string;\n  preset_bot: string;\n  draft_mode?: boolean;\n  httpChunk: HttpChunk;\n  chunkProcessor: ChunkProcessor;\n  reportEventsTracer: ReportEventsTracer;\n  reportLogWithScope: ReportLog;\n  constructor({\n    messageManager,\n    conversation_id,\n    scene,\n    bot_id,\n    preset_bot,\n    draft_mode,\n    httpChunk,\n    chunkProcessor,\n    reportEventsTracer,\n    reportLogWithScope,\n  }: MessageManagerServiceProps) {\n    this.messageManager = messageManager;\n    this.conversation_id = conversation_id;\n    this.scene = scene;\n    this.bot_id = bot_id;\n    this.preset_bot = preset_bot;\n    this.draft_mode = draft_mode;\n    this.httpChunk = httpChunk;\n    this.chunkProcessor = chunkProcessor;\n    this.reportEventsTracer = reportEventsTracer;\n    this.reportLogWithScope = reportLogWithScope;\n  }\n  /**\n   * Get chat history\n   */\n  async getHistoryMessage(props: GetHistoryMessageParams) {\n    const params = filterEmptyField({\n      conversation_id: this.conversation_id,\n      scene: this.scene,\n      bot_id: this.bot_id,\n      preset_bot: this.preset_bot,\n      draft_mode: this.draft_mode,\n      ...props,\n    });\n    return await this.messageManager.getHistoryMessage(params);\n  }\n\n  convertMessageList = (data: GetHistoryMessageResponse['message_list']) =>\n    MessageManager.convertMessageList(data);\n\n  /**\n   * Clear the conversation context\n   */\n  async clearMessageContext(params: ClearMessageContextParams) {\n    return await this.messageManager.clearMessageContextUrl({\n      conversation_id: this.conversation_id,\n      scene: this.scene,\n      ...params,\n    });\n  }\n\n  /**\n   * Clear history\n   */\n  async clearHistory() {\n    return await this.messageManager.clearHistory({\n      bot_id: this.bot_id,\n      conversation_id: this.conversation_id,\n      scene: this.scene,\n    });\n  }\n\n  /**\n   * delete message\n   */\n  async deleteMessage(params: DeleteMessageParams) {\n    return await this.messageManager.deleteMessage({\n      bot_id: this.bot_id,\n      conversation_id: this.conversation_id,\n      scene: this.scene,\n      ...params,\n    });\n  }\n\n  /**\n   * Like/click on the message\n   */\n  async reportMessage(params: ReportMessageParams) {\n    return await this.messageManager.reportMessage({\n      bot_id: this.bot_id,\n      biz_conversation_id: this.conversation_id,\n      scene: this.scene,\n      ...params,\n    });\n  }\n\n  /**\n   * interrupt message\n   */\n  async breakMessage(params: BreakMessageParams) {\n    this.httpChunk.abort(params.local_message_id);\n    const contentLength = this.chunkProcessor.getReplyMessagesLengthByReplyId(\n      params.query_message_id,\n    );\n    this.reportEventsTracer?.pullStreamTracer.break(params.local_message_id, {\n      contentLength,\n    });\n    this.reportLogWithScope.slardarEvent({\n      eventName: SlardarEvents.SDK_BREAK_MESSAGE,\n      meta: {\n        ...params,\n      },\n    });\n    return await this.messageManager.breakMessage({\n      conversation_id: this.conversation_id,\n      scene: this.scene,\n      ...params,\n    });\n  }\n\n  /**\n   * ASR speech-to-text\n   */\n  async chatASR(params: ChatASRParams) {\n    return await this.messageManager.chatASR(params);\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type EventEmitter from 'eventemitter3';\n\nimport { type ReportLog } from '@/report-log';\nimport { PreSendLocalMessageEventsEnum } from '@/message/types';\nimport { type PreSendLocalMessageEventsManager } from '@/message/presend-local-message/presend-local-message-events-manager';\nimport { type ChunkProcessor } from '@/message';\nimport { ChatCoreError } from '@/custom-error';\nimport type {\n  ErrorInfo,\n  MessageLifecycleCallbackParams,\n  OnMessageCallbackParams,\n} from '@/channel/http-chunk/types';\nimport { HttpChunkEvents } from '@/channel/http-chunk/events/http-chunk-events';\nimport { type HttpChunk } from '@/channel/http-chunk';\n\nimport {\n  type PullingStatus,\n  type SdkEventsCallbackMap,\n  SdkEventsEnum,\n} from '../types/interface';\nimport { type ReportEventsTracer } from '../events/slardar-events';\n\nexport interface HttpChunkServiceProps {\n  httpChunk: HttpChunk;\n  reportLogWithScope: ReportLog;\n  chunkProcessor: ChunkProcessor;\n  preSendLocalMessageEventsManager: PreSendLocalMessageEventsManager;\n  chatSdkEventEmit: <T extends SdkEventsEnum>(\n    event: T,\n    ...args: Parameters<SdkEventsCallbackMap[T]>\n  ) => void;\n  chatSdkEventBus: EventEmitter<SdkEventsEnum>;\n  reportEventsTracer: ReportEventsTracer;\n}\nexport class HttpChunkService {\n  httpChunk: HttpChunk;\n  reportLogWithScope: ReportLog;\n  chunkProcessor: ChunkProcessor;\n  preSendLocalMessageEventsManager: PreSendLocalMessageEventsManager;\n  chatSdkEventEmit: <T extends SdkEventsEnum>(\n    event: T,\n    ...args: Parameters<SdkEventsCallbackMap[T]>\n  ) => void;\n  chatSdkEventBus: EventEmitter<SdkEventsEnum>;\n  reportEventsTracer: ReportEventsTracer;\n  constructor({\n    httpChunk,\n    reportLogWithScope,\n    chunkProcessor,\n    preSendLocalMessageEventsManager,\n    chatSdkEventEmit,\n    chatSdkEventBus,\n    reportEventsTracer,\n  }: HttpChunkServiceProps) {\n    this.httpChunk = httpChunk;\n    this.reportLogWithScope = reportLogWithScope;\n    this.chunkProcessor = chunkProcessor;\n    this.preSendLocalMessageEventsManager = preSendLocalMessageEventsManager;\n    this.chatSdkEventEmit = chatSdkEventEmit;\n    this.reportEventsTracer = reportEventsTracer;\n    this.chatSdkEventBus = chatSdkEventBus;\n  }\n  /**\n   * Handle events listened to by the channel\n   */\n  onHttpChunkEvents() {\n    this.httpChunk.on(\n      HttpChunkEvents.FETCH_START,\n      this.handleHttpChunkFetchStart,\n    );\n    // read stream\n    this.httpChunk.on(\n      HttpChunkEvents.MESSAGE_RECEIVED,\n      this.handleHttpChunkMessageReceived,\n    );\n    // Overall flow success\n    this.httpChunk.on(\n      HttpChunkEvents.ALL_SUCCESS,\n      this.handleHttpChunkStreamSuccess,\n    );\n    // Start reading stream\n    this.httpChunk.on(\n      HttpChunkEvents.READ_STREAM_START,\n      this.handleHttpChunkReadStreamStart,\n    );\n    // Fetch phase exception, not yet reached the read stream phase\n    this.httpChunk.on(\n      HttpChunkEvents.FETCH_ERROR,\n      this.handleHttpChunkFetchError,\n    );\n    this.httpChunk.on(\n      HttpChunkEvents.READ_STREAM_ERROR,\n      this.handleReadStreamError,\n    );\n    // Private room timeout\n    this.httpChunk.on(\n      HttpChunkEvents.BETWEEN_CHUNK_TIMEOUT,\n      this.handleHttpChunkTimeout,\n    );\n  }\n\n  private handleHttpChunkFetchStart = ({\n    localMessageID,\n  }: MessageLifecycleCallbackParams) => {\n    this.reportEventsTracer?.pullStreamTracer?.start(localMessageID);\n  };\n\n  private handleHttpChunkMessageReceived = (\n    receiveMessage: OnMessageCallbackParams,\n  ) => {\n    const { chunk, logID } = receiveMessage;\n    const ackMessage = this.chunkProcessor.getAckMessageByChunk(chunk);\n    const { local_message_id = '' } =\n      ackMessage?.extra_info || receiveMessage.chunk.message.extra_info;\n\n    let pullingStatus: PullingStatus = 'pulling';\n    // Is it the final answer?\n    if (this.chunkProcessor.isMessageAnswerEnd(chunk)) {\n      pullingStatus = 'answerEnd';\n    }\n\n    this.chatSdkEventEmit(SdkEventsEnum.MESSAGE_PULLING_STATUS, {\n      name: SdkEventsEnum.MESSAGE_PULLING_STATUS,\n      data: {\n        pullingStatus,\n        local_message_id,\n        reply_id: receiveMessage.chunk.message.reply_id || '',\n      },\n    });\n\n    const hasOnMessage = this.chatSdkEventBus\n      .eventNames()\n      .includes(SdkEventsEnum.MESSAGE_RECEIVED_AND_UPDATE);\n\n    // Determine whether the received message already exists\n    if (this.chunkProcessor.isFirstReplyMessage(chunk)) {\n      this.reportEventsTracer?.pullStreamTracer?.receiveFirstAnsChunk(\n        local_message_id,\n        {\n          logId: logID,\n        },\n      );\n    }\n    this.chunkProcessor.addChunkAndProcess(chunk, {\n      logId: logID,\n    });\n    const processedMessage =\n      this.chunkProcessor.getProcessedMessageByChunk(chunk);\n\n    hasOnMessage &&\n      this.reportLogWithScope.info({\n        message: '&',\n        meta: {\n          logMessageWithDebugInfo:\n            this.chunkProcessor.appendDebugMessage(processedMessage),\n        },\n      });\n\n    if (chunk.message.type === 'ack') {\n      this.reportEventsTracer?.pullStreamTracer?.receiveAck(local_message_id, {\n        logId: logID,\n      });\n      this.preSendLocalMessageEventsManager.emit(\n        PreSendLocalMessageEventsEnum.MESSAGE_SEND_SUCCESS,\n        processedMessage,\n      );\n      return;\n    }\n\n    this.chatSdkEventEmit(SdkEventsEnum.MESSAGE_RECEIVED_AND_UPDATE, {\n      name: SdkEventsEnum.MESSAGE_RECEIVED_AND_UPDATE,\n      data: [processedMessage],\n    });\n  };\n\n  // read stream exception\n  private handleReadStreamError = (errorInfo: ErrorInfo) => {\n    const {\n      ext: {\n        localMessageID: local_message_id = '',\n        replyID: reply_id = '',\n        logID: logId = '',\n      } = {},\n      code,\n      msg,\n    } = errorInfo;\n\n    const chatCoreError = new ChatCoreError(msg, {\n      code,\n      local_message_id,\n      logId,\n      reply_id,\n      rawError: errorInfo,\n    });\n\n    const stashedAckMessage =\n      this.chunkProcessor.getAckMessageByLocalMessageId(local_message_id);\n\n    // The read stream is abnormal, do you want to distinguish between receiving it in the first package?\n    if (!stashedAckMessage) {\n      this.preSendLocalMessageEventsManager.emit(\n        PreSendLocalMessageEventsEnum.MESSAGE_SEND_FAIL,\n        chatCoreError,\n      );\n      return;\n    }\n\n    // If the message is sent successfully, it means that the pull phase failed.\n    if (stashedAckMessage) {\n      this.chatSdkEventEmit(SdkEventsEnum.MESSAGE_PULLING_STATUS, {\n        name: SdkEventsEnum.MESSAGE_PULLING_STATUS,\n        data: {\n          pullingStatus: 'error',\n          local_message_id,\n          reply_id,\n        },\n        error: chatCoreError,\n      });\n    }\n    const contentLength =\n      this.chunkProcessor.getReplyMessagesLengthByReplyId(reply_id);\n    this.reportEventsTracer?.pullStreamTracer?.error(chatCoreError, {\n      contentLength,\n    });\n  };\n\n  // Fetch is abnormal, it has not yet reached the pull flow stage\n  private handleHttpChunkFetchError = (errorInfo: ErrorInfo) => {\n    const {\n      ext: {\n        localMessageID: local_message_id = '',\n        replyID: reply_id = '',\n        logID: logId = '',\n      } = {},\n      code,\n      msg,\n    } = errorInfo;\n\n    const chatCoreError = new ChatCoreError(msg, {\n      code,\n      local_message_id,\n      logId,\n      reply_id,\n      rawError: errorInfo,\n    });\n    this.preSendLocalMessageEventsManager.emit(\n      PreSendLocalMessageEventsEnum.MESSAGE_SEND_FAIL,\n      chatCoreError,\n    );\n  };\n\n  private handleHttpChunkStreamSuccess = ({\n    localMessageID,\n    replyID,\n  }: MessageLifecycleCallbackParams) => {\n    this.chatSdkEventEmit(SdkEventsEnum.MESSAGE_PULLING_STATUS, {\n      name: SdkEventsEnum.MESSAGE_PULLING_STATUS,\n      data: {\n        pullingStatus: 'success',\n        local_message_id: localMessageID,\n        reply_id: replyID || '',\n      },\n    });\n    const contentLength =\n      replyID && this.chunkProcessor.getReplyMessagesLengthByReplyId(replyID);\n    this.reportEventsTracer?.pullStreamTracer?.success(localMessageID, {\n      contentLength,\n    });\n    this.reportLogWithScope.info({\n      message: '',\n      meta: {\n        local_message_id: localMessageID,\n        reply_id: replyID || '',\n        streamBuffer: this.chunkProcessor.streamBuffer,\n      },\n    });\n    replyID &&\n      this.chunkProcessor.streamBuffer.clearMessageBufferByReplyId(replyID);\n  };\n\n  private handleHttpChunkReadStreamStart = ({\n    localMessageID,\n    replyID,\n    logID,\n  }: MessageLifecycleCallbackParams) => {\n    this.reportLogWithScope.info({\n      message: '',\n      meta: {\n        local_message_id: localMessageID,\n        reply_id: replyID || '',\n        logID,\n      },\n    });\n\n    this.chatSdkEventEmit(SdkEventsEnum.MESSAGE_PULLING_STATUS, {\n      name: SdkEventsEnum.MESSAGE_PULLING_STATUS,\n      data: {\n        pullingStatus: 'start',\n        local_message_id: localMessageID,\n        reply_id: replyID || '',\n      },\n    });\n  };\n\n  private handleHttpChunkTimeout = (\n    rawError: MessageLifecycleCallbackParams,\n  ) => {\n    const { localMessageID, replyID, logID } = rawError;\n\n    const chatCoreError = new ChatCoreError('', {\n      local_message_id: localMessageID,\n      reply_id: replyID || '',\n      logId: logID,\n    });\n\n    this.reportLogWithScope.info({\n      message: '',\n      meta: {\n        chatCoreError,\n      },\n    });\n\n    this.chatSdkEventEmit(SdkEventsEnum.MESSAGE_PULLING_STATUS, {\n      name: SdkEventsEnum.MESSAGE_PULLING_STATUS,\n      data: {\n        pullingStatus: 'timeout',\n        local_message_id: localMessageID,\n        reply_id: replyID || '',\n      },\n      error: chatCoreError,\n      abort: () => {\n        this.httpChunk.abort(localMessageID);\n      },\n    });\n  };\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ReportLog } from '@/report-log';\nimport type { EventPayloadMaps } from '@/plugins/upload-plugin/types/plugin-upload';\nimport type {\n  ContentType,\n  CreateMessageOptions,\n  FileMessageProps,\n  ImageMessageProps,\n  Message,\n  NormalizedMessageProps,\n  TextAndFileMixMessageProps,\n  TextMessageProps,\n} from '@/message/types';\nimport { type PreSendLocalMessageEventsManager } from '@/message/presend-local-message/presend-local-message-events-manager';\nimport { type PreSendLocalMessageFactory } from '@/message';\n\nimport { type PluginsService } from './plugins-service';\n\nexport interface CreateMessageServicesProps {\n  preSendLocalMessageFactory: PreSendLocalMessageFactory;\n  preSendLocalMessageEventsManager: PreSendLocalMessageEventsManager;\n  reportLogWithScope: ReportLog;\n  pluginsService: PluginsService;\n}\n\nexport class CreateMessageService {\n  preSendLocalMessageFactory: PreSendLocalMessageFactory;\n  preSendLocalMessageEventsManager: PreSendLocalMessageEventsManager;\n  reportLogWithScope: ReportLog;\n  pluginsService: PluginsService;\n  constructor({\n    preSendLocalMessageFactory,\n    preSendLocalMessageEventsManager,\n    reportLogWithScope,\n    pluginsService,\n  }: CreateMessageServicesProps) {\n    this.preSendLocalMessageFactory = preSendLocalMessageFactory;\n    this.preSendLocalMessageEventsManager = preSendLocalMessageEventsManager;\n    this.reportLogWithScope = reportLogWithScope;\n    this.pluginsService = pluginsService;\n  }\n\n  /**\n   * Create text message\n   */\n  createTextMessage(\n    props: TextMessageProps,\n    options?: CreateMessageOptions,\n  ): Message<ContentType.Text> {\n    return this.preSendLocalMessageFactory.createTextMessage(\n      props,\n      this.preSendLocalMessageEventsManager,\n      options,\n    );\n  }\n\n  /**\n   * Create image message\n   */\n  createImageMessage<M extends EventPayloadMaps = EventPayloadMaps>(\n    props: ImageMessageProps<M>,\n    options?: CreateMessageOptions,\n  ): Message<ContentType.Image> {\n    const { UploadPlugin, uploadPluginConstructorOptions } =\n      this.pluginsService;\n    if (!UploadPlugin) {\n      this.reportLogWithScope.info({\n        message: '',\n      });\n      throw new Error('');\n    }\n    return this.preSendLocalMessageFactory.createImageMessage({\n      messageProps: props,\n      UploadPlugin,\n      uploadPluginConstructorOptions,\n      messageEventsManager: this.preSendLocalMessageEventsManager,\n      options,\n    });\n  }\n\n  /**\n   * Create file message\n   */\n  createFileMessage<M extends EventPayloadMaps = EventPayloadMaps>(\n    props: FileMessageProps<M>,\n    options?: CreateMessageOptions,\n  ): Message<ContentType.File> {\n    const { UploadPlugin, uploadPluginConstructorOptions } =\n      this.pluginsService;\n    if (!UploadPlugin) {\n      this.reportLogWithScope.info({\n        message: '',\n      });\n      throw new Error('');\n    }\n    return this.preSendLocalMessageFactory.createFileMessage({\n      messageProps: props,\n      UploadPlugin,\n      uploadPluginConstructorOptions,\n      messageEventsManager: this.preSendLocalMessageEventsManager,\n      options,\n    });\n  }\n\n  /**\n   * Create a mixed message\n   */\n  createTextAndFileMixMessage(\n    props: TextAndFileMixMessageProps,\n    options?: CreateMessageOptions,\n  ): Message<ContentType.Mix> {\n    return this.preSendLocalMessageFactory.createTextAndFileMixMessage(\n      props,\n      this.preSendLocalMessageEventsManager,\n      options,\n    );\n  }\n\n  /**\n   * Create standardized messages, messages with payload content structure already processed\n   */\n  createNormalizedPayloadMessage<T extends ContentType>(\n    props: NormalizedMessageProps<T>,\n    options?: CreateMessageOptions,\n  ): Message<T> {\n    return this.preSendLocalMessageFactory.createNormalizedMessage<T>(\n      props,\n      this.preSendLocalMessageEventsManager,\n      options,\n    );\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @module @coze-common/chat-core\n * Expose all external interfaces\n */\nimport EventEmitter from 'eventemitter3';\nimport { type InternalAxiosRequestConfig } from 'axios';\n\nimport { type DeployVersion, type ENV } from '@/shared/const';\nimport { type RequestManagerOptions } from '@/request-manager/types';\nimport { RequestManager } from '@/request-manager';\nimport { ReportLog } from '@/report-log';\nimport { type EventPayloadMaps } from '@/plugins/upload-plugin/types/plugin-upload';\nimport {\n  type GetHistoryMessageResponse,\n  type ClearMessageContextParams,\n} from '@/message/types/message-manager';\nimport {\n  type CreateMessageOptions,\n  type FileMessageProps,\n  type ImageMessageProps,\n  type NormalizedMessageProps,\n  type SendMessageOptions,\n} from '@/message/types';\nimport { PreSendLocalMessageEventsManager } from '@/message/presend-local-message/presend-local-message-events-manager';\nimport { MessageManager } from '@/message/message-manager';\nimport { ChunkProcessor, PreSendLocalMessageFactory } from '@/message';\nimport { HttpChunk } from '@/channel/http-chunk';\n\nimport {\n  type ChatASRParams,\n  type BreakMessageParams,\n  type DeleteMessageParams,\n  type GetHistoryMessageParams,\n  type ReportMessageParams,\n} from './types/services/message-manager-service';\nimport { isPresetBotUnique, SdkEventsEnum } from './types/interface';\nimport type {\n  Biz,\n  BotUnique,\n  CreateProps,\n  LogLevel,\n  Message,\n  PluginKey,\n  PluginValue,\n  PresetBot,\n  Scene,\n  SdkEventsCallbackMap,\n  ContentType,\n} from './types/interface';\nimport { SendMessageService } from './services/send-message-service';\nimport { PluginsService } from './services/plugins-service';\nimport { MessageManagerService } from './services/message-manager-service';\nimport { HttpChunkService } from './services/http-chunk-service';\nimport { CreateMessageService } from './services/create-message-service';\nimport { ReportEventsTracer, SlardarEvents } from './events/slardar-events';\nimport { type TokenManager } from '../credential';\n\nexport default class ChatSDK {\n  private static instances: Map<string, ChatSDK> = new Map();\n  /**\n   *  Pre-send Message Factory: Create pre-send messages for use on the screen\n   */\n  private preSendLocalMessageFactory!: PreSendLocalMessageFactory;\n\n  /**\n   * Process received chunk messages into a unified message format\n   */\n  private chunkProcessor!: ChunkProcessor;\n\n  private messageManager!: MessageManager;\n\n  /**\n   * Streaming\n   */\n  private httpChunk!: HttpChunk;\n\n  private reportLog!: ReportLog;\n\n  private reportLogWithScope!: ReportLog;\n\n  private requestManager!: RequestManager;\n\n  /**\n   * Maintain local message sending events:\n   */\n\n  private preSendLocalMessageEventsManager!: PreSendLocalMessageEventsManager;\n\n  static EVENTS = SdkEventsEnum;\n\n  biz!: Biz;\n\n  bot_id!: string;\n\n  space_id?: string;\n\n  preset_bot!: PresetBot;\n\n  /**\n   * The current chat-core life cycle takes a bot_id and user as dimensions\n   * If one user is supported for multiple conversation_id, it needs to be adjusted\n   */\n  user!: string;\n\n  scene?: Scene;\n\n  /**\n   * usage environment\n   */\n  env!: ENV;\n\n  deployVersion!: DeployVersion;\n\n  bot_version?: string;\n\n  draft_mode?: boolean;\n\n  conversation_id!: string;\n\n  enableDebug?: boolean;\n\n  logLevel?: LogLevel;\n\n  tokenManager?: TokenManager;\n\n  private requestManagerOptions?: RequestManagerOptions;\n\n  private eventBus: EventEmitter<SdkEventsEnum> = new EventEmitter();\n\n  private reportEventsTracer!: ReportEventsTracer;\n\n  private sendMessageService!: SendMessageService;\n\n  private createMessageService!: CreateMessageService;\n\n  private messageManagerService!: MessageManagerService;\n\n  private httpChunkService!: HttpChunkService;\n\n  private pluginsService!: PluginsService;\n\n  constructor(props: CreateProps) {\n    /** Initialize construction parameters */\n    this.initProps(props);\n    this.initModules(props);\n    this.initServices();\n    this.onEvents();\n    this.reportLogWithScope.slardarEvent({\n      eventName: SlardarEvents.SDK_INIT,\n      meta: props,\n    });\n  }\n\n  /**\n   * Create a chatBot instance\n   *1. For the same bot_id/preset_bot, repeated calls, sdk will only create one instance\n   *2. Multiple bot_id/presetBot, corresponding to multiple SDK instances, maintaining its own events\n   */\n  static create(props: CreateProps) {\n    const { unique_key } = ChatSDK.getUniqueKey(props);\n    // For the same bot_id/preset_bot, repeated calls, create will only create one instance\n    if (ChatSDK.instances.has(unique_key)) {\n      console.error('duplicate chat core instance error');\n      return ChatSDK.instances.get(unique_key);\n    }\n\n    const instance = new ChatSDK(props);\n    ChatSDK.instances.set(unique_key, instance);\n    return instance;\n  }\n\n  /**\n   *  Get sdk unique key preset_bot > bot_id\n   * @param props\n   * @returns\n   */\n  static getUniqueKey(props: BotUnique): {\n    unique_key: string;\n    bot_id: string;\n    preset_bot: PresetBot;\n  } {\n    if (isPresetBotUnique(props)) {\n      return {\n        unique_key: props.preset_bot,\n        bot_id: '',\n        preset_bot: props.preset_bot,\n      };\n    }\n\n    return {\n      unique_key: props.bot_id,\n      bot_id: props.bot_id,\n      preset_bot: '',\n    };\n  }\n\n  private initProps(props: CreateProps) {\n    const { bot_id, preset_bot } = ChatSDK.getUniqueKey(props);\n    const {\n      enableDebug,\n      logLevel,\n      conversation_id,\n      biz,\n      user,\n      env,\n      deployVersion,\n      scene,\n      bot_version,\n      draft_mode,\n      space_id,\n    } = props;\n    this.bot_id = bot_id;\n    this.space_id = space_id;\n    this.preset_bot = preset_bot;\n    this.conversation_id = conversation_id;\n    this.biz = biz;\n    this.enableDebug = enableDebug || false;\n    this.logLevel = logLevel || 'error';\n    this.user = user || '';\n    this.env = env;\n    this.deployVersion = deployVersion;\n    this.scene = scene;\n    this.bot_version = bot_version;\n    this.draft_mode = draft_mode;\n  }\n\n  /** Initializing Dependency Module Instances */\n  private initModules(props: CreateProps) {\n    this.initReportLog();\n    this.reportEventsTracer = new ReportEventsTracer(this.reportLogWithScope);\n    this.initRequestManager(props);\n    this.initTokenManager(this.requestManager, props);\n    this.preSendLocalMessageEventsManager =\n      new PreSendLocalMessageEventsManager({\n        reportLog: this.reportLog,\n      });\n    /** Initialize the pre-sent message factory */\n    this.preSendLocalMessageFactory = new PreSendLocalMessageFactory({\n      bot_id: this.bot_id,\n      preset_bot: this.preset_bot,\n      conversation_id: this.conversation_id,\n      user: this.user,\n      scene: this.scene,\n      bot_version: this.bot_version,\n      draft_mode: this.draft_mode,\n    });\n    /** Initialize processing of received chunk messages into a unified message format */\n    this.chunkProcessor = new ChunkProcessor({\n      bot_id: this.bot_id,\n      preset_bot: this.preset_bot,\n      enableDebug: this.enableDebug,\n    });\n    this.httpChunk = new HttpChunk({\n      tokenManager: props.tokenManager,\n      requestManager: this.requestManager,\n      reportLogWithScope: this.reportLogWithScope,\n    });\n    /**\n     * Initialize the message manager: message deletion/history, etc\n     */\n    this.messageManager = new MessageManager({\n      reportLog: this.reportLog,\n      requestManager: this.requestManager,\n    });\n  }\n\n  private onEvents() {\n    this.httpChunkService.onHttpChunkEvents();\n  }\n\n  private initServices() {\n    this.pluginsService = new PluginsService();\n    this.createMessageService = new CreateMessageService({\n      preSendLocalMessageFactory: this.preSendLocalMessageFactory,\n      preSendLocalMessageEventsManager: this.preSendLocalMessageEventsManager,\n      reportLogWithScope: this.reportLogWithScope,\n      pluginsService: this.pluginsService,\n    });\n    this.sendMessageService = new SendMessageService({\n      preSendLocalMessageFactory: this.preSendLocalMessageFactory,\n      httpChunk: this.httpChunk,\n      preSendLocalMessageEventsManager: this.preSendLocalMessageEventsManager,\n      reportLogWithScope: this.reportLogWithScope,\n      reportEventsTracer: this.reportEventsTracer,\n    });\n    this.messageManagerService = new MessageManagerService({\n      messageManager: this.messageManager,\n      conversation_id: this.conversation_id,\n      scene: this.scene,\n      bot_id: this.bot_id,\n      preset_bot: this.preset_bot,\n      draft_mode: this.draft_mode,\n      httpChunk: this.httpChunk,\n      chunkProcessor: this.chunkProcessor,\n      reportEventsTracer: this.reportEventsTracer,\n      reportLogWithScope: this.reportLogWithScope,\n    });\n    this.httpChunkService = new HttpChunkService({\n      httpChunk: this.httpChunk,\n      reportLogWithScope: this.reportLogWithScope,\n      chunkProcessor: this.chunkProcessor,\n      preSendLocalMessageEventsManager: this.preSendLocalMessageEventsManager,\n      chatSdkEventEmit: this.emit.bind(this),\n      chatSdkEventBus: this.eventBus,\n      reportEventsTracer: this.reportEventsTracer,\n    });\n  }\n\n  private initReportLog() {\n    this.reportLog = new ReportLog({\n      logLevel: this.logLevel,\n      env: this.env,\n      deployVersion: this.deployVersion,\n      meta: {\n        biz: this.biz,\n        chatCoreVersion: '1.1.0',\n      },\n    });\n    this.reportLog.init();\n    this.reportLogWithScope = this.reportLog.createLoggerWith({\n      scope: 'chat-sdk',\n    });\n  }\n\n  private initTokenManager(requestManager: RequestManager, props: CreateProps) {\n    this.tokenManager = props.tokenManager;\n\n    if (!this.tokenManager) {\n      return;\n    }\n    const tokenManagerRequestHook = (config: InternalAxiosRequestConfig) => {\n      if (!this.tokenManager) {\n        return config;\n      }\n      const apiKeyAuthValue = this.tokenManager.getApiKeyAuthorizationValue();\n      if (apiKeyAuthValue) {\n        config.headers.set('Authorization', apiKeyAuthValue);\n      }\n      return config;\n    };\n    const options: RequestManagerOptions = {\n      hooks: {\n        onBeforeRequest: [tokenManagerRequestHook],\n      },\n    };\n    requestManager.appendRequestOptions(options);\n  }\n\n  private initRequestManager(props: CreateProps) {\n    this.requestManagerOptions = props.requestManagerOptions;\n    this.requestManager = new RequestManager({\n      options: this.requestManagerOptions,\n      reportLog: this.reportLog,\n    });\n  }\n\n  /**\n   * Destroy the SDK instance.\n   * Clear all listening events\n   */\n  destroy() {\n    // Clear all htpChunk listening events\n    this.httpChunk.drop();\n    // Clear sdk time\n    this.eventBus.removeAllListeners();\n    // Clear all cached chunks\n    this.chunkProcessor.streamBuffer.clearMessageBuffer();\n    // Clear the corresponding instance\n    const { unique_key } = ChatSDK.getUniqueKey({\n      bot_id: this.bot_id,\n      preset_bot: this.preset_bot,\n    });\n    ChatSDK.instances.delete(unique_key);\n    // Clear pre-sent message cache\n    this.preSendLocalMessageEventsManager.destroy();\n    this.reportLogWithScope.info({\n      message: 'SDK',\n    });\n  }\n\n  /**\n   * Monitor sdk events\n   */\n  on<T extends SdkEventsEnum>(event: T, fn: SdkEventsCallbackMap[T]) {\n    // Repeated listening, error message\n    if (this.eventBus.eventNames().includes(event)) {\n      this.reportLogWithScope.slardarError({\n        message: '',\n        error: new Error(''),\n        meta: {\n          event,\n        },\n      });\n    }\n    this.eventBus.on(event, fn);\n\n    return () => {\n      this.eventBus.off(event, fn);\n    };\n  }\n\n  off<T extends SdkEventsEnum>(event: T, fn: SdkEventsCallbackMap[T]) {\n    this.eventBus.off(event, fn);\n  }\n\n  private emit<T extends SdkEventsEnum>(\n    event: T,\n    ...args: Parameters<SdkEventsCallbackMap[T]>\n  ) {\n    this.eventBus.emit(event, ...args);\n  }\n\n  createTextMessage(\n    ...args: Parameters<CreateMessageService['createTextMessage']>\n  ) {\n    return this.createMessageService.createTextMessage(...args);\n  }\n\n  createImageMessage<M extends EventPayloadMaps = EventPayloadMaps>(\n    props: ImageMessageProps<M>,\n    options?: CreateMessageOptions,\n  ) {\n    return this.createMessageService.createImageMessage(props, options);\n  }\n\n  createFileMessage<M extends EventPayloadMaps = EventPayloadMaps>(\n    props: FileMessageProps<M>,\n    options?: CreateMessageOptions,\n  ) {\n    return this.createMessageService.createFileMessage<M>(props, options);\n  }\n\n  createTextAndFileMixMessage(\n    ...args: Parameters<CreateMessageService['createTextAndFileMixMessage']>\n  ) {\n    return this.createMessageService.createTextAndFileMixMessage(...args);\n  }\n\n  createNormalizedPayloadMessage<T extends ContentType>(\n    props: NormalizedMessageProps<T>,\n    options?: CreateMessageOptions,\n  ): Message<T> {\n    return this.createMessageService.createNormalizedPayloadMessage(\n      props,\n      options,\n    );\n  }\n\n  resumeMessage(message: Message<ContentType>, options?: SendMessageOptions) {\n    return this.sendMessageService.resumeMessage(message, options);\n  }\n\n  sendMessage(\n    message: Message<ContentType>,\n    options?: SendMessageOptions,\n  ): Promise<Message<ContentType>> {\n    return this.sendMessageService.sendMessage(message, options);\n  }\n\n  registerPlugin<T extends PluginKey, P extends Record<string, unknown>>(\n    key: T,\n    plugin: PluginValue<T, P>,\n    constructorOptions?: P,\n  ) {\n    this.pluginsService.registerPlugin(key, plugin, constructorOptions);\n  }\n\n  checkPluginIsRegistered(key: PluginKey): boolean {\n    return this.pluginsService.checkPluginIsRegistered(key);\n  }\n\n  getRegisteredPlugin(key: PluginKey) {\n    return this.pluginsService.getRegisteredPlugin(key);\n  }\n\n  getHistoryMessage(params: GetHistoryMessageParams) {\n    return this.messageManagerService.getHistoryMessage(params);\n  }\n\n  static convertMessageList = (\n    data: GetHistoryMessageResponse['message_list'],\n  ) => MessageManager.convertMessageList(data);\n\n  clearMessageContext(params: ClearMessageContextParams) {\n    return this.messageManagerService.clearMessageContext(params);\n  }\n\n  clearHistory() {\n    return this.messageManagerService.clearHistory();\n  }\n\n  deleteMessage(params: DeleteMessageParams) {\n    return this.messageManagerService.deleteMessage(params);\n  }\n\n  reportMessage(params: ReportMessageParams) {\n    return this.messageManagerService.reportMessage(params);\n  }\n\n  breakMessage(params: BreakMessageParams) {\n    return this.messageManagerService.breakMessage(params);\n  }\n\n  chatASR(params: ChatASRParams) {\n    if (this.space_id) {\n      params.append('space_id', this.space_id);\n    }\n    return this.messageManagerService.chatASR(params);\n  }\n\n  updateConversationId(conversationId: string) {\n    this.conversation_id = conversationId;\n    this.messageManagerService.conversation_id = conversationId;\n    this.preSendLocalMessageFactory.conversation_id = conversationId;\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Responsible for token verification, automatically refresh the token\n * Exposed to the service party, the service party decides whether to single-case or multiple-case authentication\n */\nexport interface TokenManagerProps {\n  token?: string;\n  // Authorization: Bearer {sdk_verify_token}\n  apiKey?: string;\n  tokenRefresher?: () => Promise<string>;\n}\nexport default class TokenManager {\n  private token?: string;\n\n  private apiKey?: string;\n\n  private tokenRefresher?: () => Promise<string>;\n\n  constructor(props: TokenManagerProps) {\n    const { token, tokenRefresher, apiKey } = props;\n    this.token = token;\n    this.apiKey = apiKey;\n    this.tokenRefresher = tokenRefresher;\n  }\n\n  /**\n   * Get token\n   */\n  getToken() {\n    // TODO: No token, get the latest token\n    return this.token;\n  }\n  updateToken(token: string) {\n    this.token = token;\n  }\n  updateApiKey(apiKey: string) {\n    this.apiKey = apiKey;\n  }\n\n  /**\n   * Get apiKey\n   */\n  getApiKey() {\n    return this.apiKey;\n  }\n\n  /**\n   * Get the Authorization value assembled by apiKey\n   */\n  getApiKeyAuthorizationValue() {\n    return `Bearer ${this?.getApiKey()}`;\n  }\n\n  /**\n   * Refresh apiKey\n   */\n  refreshApiKey(apiKey: string) {\n    this.apiKey = apiKey;\n  }\n  // TODO: Supplementary refresh mechanism\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport ChatCore from './chat-sdk';\nexport { TokenManager } from './credential';\nexport {\n  UploadPluginConstructor,\n  UploadEventName,\n  UploadResult,\n  BaseEventInfo,\n  CompleteEventInfo,\n  ProgressEventInfo,\n  EventPayloadMaps,\n  UploadPluginInterface,\n} from './plugins/upload-plugin/types/plugin-upload';\nexport {\n  type MsgParticipantType,\n  type ParticipantInfo,\n  GetHistoryMessageResponse,\n} from './message/types/message-manager';\nexport type {\n  CreateProps as CreateChatCoreProps,\n  SdkMessageEvent,\n  SdkPullingStatusEvent,\n  SdkErrorEvent,\n} from './chat-sdk/types/interface';\nexport { SdkEventsEnum } from './chat-sdk/types/interface';\n\nexport default ChatCore;\nexport { ChatCore };\n\nexport {\n  Message,\n  ContentType,\n  VerboseContent,\n  VerboseMsgType,\n  AnswerFinishVerboseData,\n  FinishReasonType,\n  type MessageContent,\n  type TextMixItem,\n  type TextAndFileMixMessagePropsFilePayload,\n  type TextAndFileMixMessagePropsImagePayload,\n  type ImageModel,\n  type ImageMixItem,\n  type FileModel,\n  type FileMixItem,\n  messageSource,\n  type MessageSource,\n  type SendMessageOptions,\n  type NormalizedMessageProps,\n  type NormalizedMessagePropsPayload,\n  type MessageMentionListFields,\n  type TextAndFileMixMessageProps,\n  type TextMessageProps,\n  taskType,\n  ChatMessageMetaType,\n  type ChatMessageMetaInfo,\n  type InterruptToolCallsType,\n} from './message/types';\nexport { ChatCoreError } from './custom-error';\nexport {\n  MessageFeedbackDetailType,\n  MessageFeedbackType,\n  ReportMessageAction,\n  type ReportMessageProps,\n  type ClearMessageContextParams,\n  type ClearMessageContextProps,\n} from './message/types/message-manager';\n\nexport { ChatCoreUploadPlugin } from './plugins/upload-plugin';\nexport {\n  RequestScene,\n  type RequestManagerOptions,\n  type SceneConfig,\n} from './request-manager/types';\n\nexport { ApiError } from './request-manager/api-error';\n\nexport {\n  Scene,\n  CreateProps,\n  PresetBot,\n  LoadDirection,\n  PluginKey,\n} from './chat-sdk/types/interface';\nexport { getFileInfo } from './shared/const';\nexport { FILE_TYPE_CONFIG, FileTypeEnum } from './shared/const';\n\nexport { type FileType } from './plugins/upload-plugin/types/plugin-upload';\n\nexport { getSlardarEnv } from './shared/utils/env';\n\nexport {\n  type ImageMessageContent,\n  type FileMessageContent,\n  type MixMessageContent,\n} from './message/types';\nexport { TFileTypeConfig } from './shared/const';\n\nexport { MessageType } from './message/types';\n\nexport { Biz } from './chat-sdk/types/interface';\nexport { ParsedEvent } from './channel/http-chunk/types';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type RequiredAction } from '@coze-arch/bot-api/developer_api';\n\nimport { type PartiallyRequired } from '../../shared/utils/data-handler';\nimport { type FileType } from '../../shared/const';\nimport {\n  type EventPayloadMaps,\n  type UploadPluginInterface,\n} from '../../plugins/upload-plugin/types/plugin-upload';\nimport { type ChatCoreError } from '../../custom-error';\nimport { type Scene } from '../../chat-sdk/types/interface';\n\ntype JSONstring<T = object> = T extends object ? string : never;\n\n/** Enumeration following copilot definition */\nexport enum ChatMessageMetaType {\n  /** Compatible value */\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  Default_0,\n  /** End-to-side direct replacement */\n  Replaceable,\n  /** insert reference */\n  Insertable,\n  /** document citation */\n  DocumentRef,\n  /** Knowledge Base Reference Card */\n  KnowledgeCard,\n  /** The embedded multimedia information is only used by Alice for the end. Because full link multiplexing uses this field, it has been changed here. */\n  EmbeddedMultimedia = 100,\n}\n\nexport interface ChatMessageMetaInfo {\n  type?: ChatMessageMetaType;\n  info?: JSONstring;\n}\n\n// Server level returned chunks\nexport interface ChunkRaw {\n  index: number;\n  seq_id: number;\n  is_finish: boolean;\n  message: MessageRaw;\n}\n\nexport interface MessageExtraInfo {\n  local_message_id: string; // Front-end message id, used to pre-send message body updates\n  input_tokens: string; // User query consumed token\n  output_tokens: string; // LLM output consumed token\n  token: string; // Total token consumption\n  plugin_status: string; // \"0\" === success or \"1\" === fail\n  time_cost: string; // Intermediate invocation time of procedure\n  workflow_tokens: string;\n  bot_state: string; // {   bot_id?: string;agent_id?: string;agent_name?: string; }\n  plugin_request: string; // Parameters of the plugin request\n  tool_name: string; // Specific API name under the invoked plugin\n  plugin: string; // Name of the plugin invoked\n  log_id?: string; // Chat logId\n  mock_hit_info?: string; // Plugin hit mockset info\n  execute_display_name: string; // display name\n  /** The identifier returned by the streaming plugin to replace the tool response content, which is not available in the normal plugin */\n  stream_plugin_running?: string;\n  /** Currently only intermediate messages are returned.*/\n  message_title?: string;\n  remove_query_id?: string; // This field represents the trigger to erase the user qeury security policy, and the value is the message_id of the user message that needs to be erased\n  new_section_id?: string; // This field represents the trigger to clear the context security policy\n  /** Corresponding to timed task task_type, 1-preset task, 2-user task, 3-Plugin background task */\n  task_type?: string;\n  call_id?: string; // function_call and tool_response matching IDs\n}\n\n// Message structure returned by server level\nexport interface MessageRaw {\n  role: MessageInfoRole; // The role of the sender of the message\n  type: MessageType; // Mainly used to distinguish the type of bot return information for role = assistant\n  section_id: string;\n  content_type: ContentType;\n  content: string;\n  reasoning_content?: string;\n  content_time?: number; // Message sending time, server level is Int64, you need to transfer it when you get the interface.\n  user?: string; // user unique identity\n  /**\n   * Pull history only\n   */\n  message_status?: MessageStatus;\n  message_id: string; // Backend message id, there may be multiple replies\n  reply_id: string; // Reply id, query messageId\n  broken_pos?: number; // Interrupt position, only valid for type = 'answer'\n  /** LaLiu ack has it, no follow-up */\n  mention_list?: MessageMentionListFields['mention_list'];\n  /** Sender ID */\n  sender_id?: string;\n  extra_info: MessageExtraInfo;\n  source?: MessageSource;\n  reply_message?: Message<ContentType>;\n  meta_infos?: Array<ChatMessageMetaInfo>;\n  /** Interrupt message server level pass through the parameters of the middle station, get the interrupt scene, continue chat id */\n  required_action?: RequiredAction;\n  /** Card Status */\n  card_status?: Record<string, string>;\n}\n\nexport const messageSource = {\n  /** normal chat message */\n  Chat: 0,\n  /** timed task */\n  TaskManualTrigger: 1,\n  /** notify */\n  Notice: 2,\n  /** asynchronous result */\n  AsyncResult: 3,\n} as const;\n\nexport const taskType = {\n  /** preset task */\n  PresetTask: '1',\n  /** user task */\n  CreatedByUserTask: '2',\n  /** Plugin background task */\n  PluginTask: '3',\n} as const;\n\nexport type MessageSource = (typeof messageSource)[keyof typeof messageSource];\n\n// Processor processed chunks\nexport interface Chunk<T extends ContentType> {\n  index: number;\n  seq_id: number;\n  is_finish: boolean;\n  message: Message<T>;\n}\n\n// Message processed by Processor\nexport type Message<T extends ContentType, V = unknown> = MessageRaw &\n  MessageMentionListFields & {\n    bot_id?: string;\n    preset_bot?: string;\n    index?: number; // Temporary state, ordering of messages in a response\n    is_finish?: boolean; // Temporary state that identifies whether the message has been pulled\n    /**\n     * Content is deserialized\n     */\n    content_obj: MessageContent<T, V>;\n    /**\n     * SDK has enabled the enableDebug mode, and each reply message adds debug_messages field, including all chunk messages spit out by the channel\n     */\n    debug_messages?: ChunkRaw[];\n    stream_chunk_buffer?: ChunkRaw[];\n    stream_message_buffer?: Message<ContentType>[];\n    /**\n     * Older interfaces may not have this field; only common display types such as query, answer, notice, etc. are counted.\n     * - int64 type, counting starts at \"1\".\n     * - Although I don't think there will be more than Number. MAX_SAFE_INTEGER alone, I still use the big-integer library to handle it.\n     * - Do not brush old data, so  old data  unconventional messages, the value is \"0\"\n     */\n    message_index?: string;\n    /**\n     * Pre-send message return only\n     */\n    file_upload_result?: 'success' | 'fail'; // file upload status\n    /**\n     * Local message status, only pre-sent messages are returned\n     */\n    local_message_status?: LocalMessageStatus;\n    /**\n     * Only if the message returns, pull chat history None\n     */\n    logId?: string; // Chat logId\n  };\n\n// The structure of the message sent to the server\nexport interface SendMessage\n  extends MessageMentionListFields,\n    ResumeMessage,\n    Record<string, unknown> {\n  bot_id?: string;\n  preset_bot?: string;\n  conversation_id: string;\n  stream?: boolean;\n  user?: string;\n  query: string;\n  extra: Record<string, string>;\n  draft_mode?: boolean; // Draft bot or online bot\n  content_type?: string; // Files files pictures images etc\n  regen_message_id?: string; // Retry message id\n  local_message_id: string; // The local message_id on the front end is passed back in the extra_info\n  chat_history?: Message<ContentType>[]; // Specify the chat context, server level does not drop library\n}\n// The resume structure sent to the server, the chat type itself is missing, and this issue only supplements resume-related\nexport interface ResumeMessage {\n  conversation_id: string;\n  scene?: Scene; // scene value\n  resume_message_id?: string; // Continue chatting with the ID required for the scene server level, which is reply_id\n  interrupt_message_id?: string; // Interrupted verbose message id\n  tool_outputs?: {\n    tool_call_id?: string; // Password interrupt tool_call.id in verbose messages\n    output?: string; // Geographical location authorization scene transmission longitude and latitude\n  }[];\n}\n\nexport type LocalMessageStatus =\n  | 'unsent'\n  | 'send_success'\n  | 'send_fail'\n  | 'send_timeout';\n\nexport enum ContentType {\n  Text = 'text',\n  Link = 'link',\n  Music = 'music',\n  Video = 'video',\n  Card = 'card',\n  Image = 'image',\n  File = 'file',\n  Tako = 'tako',\n  Custom = 'custom',\n  Mix = 'mix',\n}\n\nexport type MessageInfoRole = 'user' | 'assistant';\n\nexport type MessageType =\n  | 'answer'\n  | 'function_call'\n  | 'tool_response'\n  | 'follow_up'\n  | 'ack'\n  | 'question'\n  | 'knowledge'\n  | 'verbose'\n  | 'task_manual_trigger'\n  | '';\n\nexport type MessageStatus = 'available' | 'broken';\n\nexport type ResponseStatus = 'responding' | 'endResponse' | 'interrupt';\n\nexport enum PreSendLocalMessageEventsEnum {\n  FILE_UPLOAD_STATUS_CHANGE = 'file_upload_status_change',\n  MESSAGE_SEND_SUCCESS = 'message_send_success',\n  MESSAGE_SEND_FAIL = 'message_send_fail',\n  MESSAGE_SEND_TIMEOUT = 'message_send_timeout',\n}\n\nexport interface PreSendLocalMessageEventsMap {\n  [PreSendLocalMessageEventsEnum.FILE_UPLOAD_STATUS_CHANGE]: (\n    message: Message<ContentType>,\n  ) => void;\n  [PreSendLocalMessageEventsEnum.MESSAGE_SEND_SUCCESS]: (\n    message: Message<ContentType>,\n  ) => void;\n  [PreSendLocalMessageEventsEnum.MESSAGE_SEND_FAIL]: (\n    chatCoreError: ChatCoreError,\n  ) => void;\n  [PreSendLocalMessageEventsEnum.MESSAGE_SEND_TIMEOUT]: (\n    chatCoreError: ChatCoreError,\n  ) => void;\n}\n\nexport type TextMessageContent = string;\n\nexport interface ImageModel {\n  key: string;\n  image_thumb: {\n    url: string;\n    width: number;\n    height: number;\n  };\n  image_ori: {\n    url: string;\n    width: number;\n    height: number;\n  };\n  feedback?: null;\n}\n\nexport interface FileModel {\n  file_key: string;\n  file_name: string;\n  file_type: FileType;\n  file_size: number;\n  file_url: string;\n}\n\nexport interface ImageMessageContent {\n  image_list: ImageModel[];\n}\n\nexport interface FileMessageContent {\n  file_list: FileModel[];\n}\n\nexport interface MixMessageContent {\n  item_list: (ImageMixItem | TextMixItem | FileMixItem | ReferMixItem)[];\n}\n\nexport interface ContentTypeMap {\n  [ContentType.Text]: TextMessageContent;\n  [ContentType.Image]: ImageMessageContent;\n  [ContentType.File]: FileMessageContent;\n  [ContentType.Mix]: MixMessageContent;\n}\n\nexport type MessageContent<\n  T extends ContentType,\n  V = unknown,\n> = T extends keyof ContentTypeMap ? ContentTypeMap[T] : V;\n\nexport interface MessageExtProps {\n  input_price: string;\n  input_tokens: string;\n  is_finish: string;\n  output_price: string;\n  output_tokens: string;\n  token: string;\n  total_price: string;\n  has_suggest: string;\n  time_cost: string;\n}\n\nexport interface MessageMentionListFields {\n  /** \\ @bot function, the bot id mentioned when entering */\n  mention_list: { id: string }[];\n}\n\ninterface TextMessagePropsPayload extends MessageMentionListFields {\n  text: string;\n}\n\ninterface FileMessagePropsPayload extends MessageMentionListFields {\n  file: File;\n}\n\nexport interface TextAndFileMixMessagePropsTextPayload {\n  type: ContentType.Text;\n  text: string;\n}\n\nexport interface TextAndFileMixMessagePropsFilePayload {\n  type: ContentType.File;\n  file: File;\n  uri: string;\n}\n\nexport interface TextAndFileMixMessagePropsImagePayload {\n  type: ContentType.Image;\n  file: File;\n  uri: string;\n  width: number;\n  height: number;\n}\n\nexport interface TextAndFileMixMessagePropsPayload\n  extends MessageMentionListFields {\n  mixList: (\n    | TextAndFileMixMessagePropsTextPayload\n    | TextAndFileMixMessagePropsFilePayload\n    | TextAndFileMixMessagePropsImagePayload\n  )[];\n}\n\nexport interface TextMessageProps {\n  payload: TextMessagePropsPayload;\n}\n\nexport interface ImageMessageProps<U extends EventPayloadMaps> {\n  payload: FileMessagePropsPayload;\n  pluginUploadManager?: (uploadPlugin: UploadPluginInterface<U>) => void;\n}\n\nexport interface FileMessageProps<U extends EventPayloadMaps> {\n  payload: FileMessagePropsPayload;\n  pluginUploadManager?: (uploadPlugin: UploadPluginInterface<U>) => void;\n}\n\nexport interface TextMixItem {\n  type: ContentType.Text;\n  text: string;\n}\n\nexport interface FileMixItem {\n  type: ContentType.File;\n  file: FileModel;\n}\n\nexport interface ImageMixItem {\n  type: ContentType.Image;\n  image: ImageModel;\n}\n\nexport interface ReferMixItem {\n  type: ContentType.Text;\n  text: string;\n}\n\nexport interface TextAndFileMixMessageProps {\n  payload: TextAndFileMixMessagePropsPayload;\n}\n\nexport interface NormalizedMessagePropsPayload<T extends ContentType>\n  extends MessageMentionListFields {\n  contentType: T;\n  contentObj: MessageContent<T>;\n}\n\nexport interface NormalizedMessageProps<T extends ContentType> {\n  payload: NormalizedMessagePropsPayload<T>;\n}\n\nexport interface SendMessageOptions {\n  sendTimeout?: number;\n  betweenChunkTimeout?: number;\n  stream?: boolean;\n  chatHistory?: Message<ContentType>[];\n  // Parameters will be passed through to the chat interface\n  extendFiled?: Record<string, unknown>;\n  // Password header\n  headers?: HeadersInit;\n  // Whether to regenerate the message, the default is false\n  isRegenMessage?: boolean;\n}\n\nexport type SendMessageMergedOptions = PartiallyRequired<\n  SendMessageOptions,\n  'sendTimeout' | 'betweenChunkTimeout'\n>;\n\nexport interface CreateMessageOptions {\n  section_id?: string;\n}\n\nexport enum VerboseMsgType {\n  /** jump node */\n  JUMP_TO = 'multi_agents_jump_to_agent',\n  /** backtracking node */\n  BACK_WORD = 'multi_agents_backwards',\n  /** long-term memory node */\n  LONG_TERM_MEMORY = 'time_capsule_recall',\n  /** finish answer*/\n  GENERATE_ANSWER_FINISH = 'generate_answer_finish',\n  /** Streaming plugin call status */\n  STREAM_PLUGIN_FINISH = 'stream_plugin_finish',\n  /** knowledge base recall */\n  KNOWLEDGE_RECALL = 'knowledge_recall',\n  /** Interrupt message: Currently used for geolocation authorization/workflow question pending reply */\n  INTERRUPT = 'interrupt',\n  /** Hooks call */\n  HOOK_CALL = 'hook_call',\n}\n\nexport enum InterruptToolCallsType {\n  FunctionType = 'function', // Tool result reporting\n  RequireInfoType = 'require_info', // Required information, such as geographical location\n  ReplyMessage = 'reply_message', // Question Node\n}\n\nexport interface VerboseContent {\n  msg_type: VerboseMsgType;\n  data: string;\n}\n\nexport enum FinishReasonType {\n  /** Normal answer all over */\n  ALL_FINISH = 0,\n  /** end of interrupt */\n  INTERRUPT = 1,\n}\n\nexport interface AnswerFinishVerboseData {\n  finish_reason?: FinishReasonType;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * SDK version number\n */\nexport const CHAT_CORE_VERSION = '1.1.0';\n\n/**\n * usage environment\n */\nexport type ENV = 'local' | 'boe' | 'production' | 'thirdPart';\n\n/**\n * Deployment version\n * Release: Official Version\n * Inhouse: dogfooding version\n */\n\nexport type DeployVersion = 'release' | 'inhouse';\n\n// 1min -> 60s\nexport const SECONDS_PER_MINUTE = 60;\n\n// 1s -> 1000ms\nexport const SECONDS_PER_SECOND = 1000;\n\n// 1min -> 60*1000ms\nexport const MILLISECONDS_PER_MINUTE = SECONDS_PER_MINUTE * SECONDS_PER_SECOND;\n\n// Pull stream timeout\n// eslint-disable-next-line @typescript-eslint/no-magic-numbers -- 5min more semantic\nexport const BETWEEN_CHUNK_TIMEOUT = 5 * MILLISECONDS_PER_MINUTE;\n\n// Send message timed out\nexport const SEND_MESSAGE_TIMEOUT = MILLISECONDS_PER_MINUTE;\n\nconst MAX_RANDOM_NUMBER = 0x10000000;\n\nfunction getRandomDeviceID() {\n  return Math.abs(Date.now() ^ (Math.random() * MAX_RANDOM_NUMBER));\n}\n\nexport const randomDeviceID = getRandomDeviceID();\n\n// WS maximum number of retries\nexport const WS_MAX_RETRY_COUNT = 10;\n\nexport {\n  FileTypeEnum,\n  FileType,\n  TFileTypeConfig,\n  FILE_TYPE_CONFIG,\n  getFileInfo,\n} from '@coze-studio/file-kit/logic';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ForwardRefExoticComponent, type RefAttributes } from 'react';\n\nimport type { ContentType, Message } from '@coze-common/chat-core';\nimport { type IconProps } from '@douyinfe/semi-icons';\n\nimport {\n  type IFileAttributeKeys,\n  type IFileCardTooltipsCopyWritingConfig,\n} from './file';\nimport { type ISimpleFunctionContentCopywriting } from './copywriting';\nimport { type ContentBoxType } from './content';\n\nexport type ICardEmptyConfig = Partial<{\n  title: string;\n  description: string;\n}>;\n\nexport interface ICopywritingConfig {\n  cardEmpty?: ICardEmptyConfig;\n  file?: IFileCardTooltipsCopyWritingConfig;\n}\n\nexport type IMessage = Message<ContentType>;\n\nexport interface IBaseContentProps {\n  message: IMessage;\n  readonly?: boolean;\n  showBackground?: boolean;\n  className?: string;\n}\n\nexport interface IContentConfig<T = Record<string, unknown>> {\n  enable?: boolean;\n  copywriting?: T;\n}\n\n/**\n * Follow-up maintenance Note that cards of types that require extended parameters are turned off by default\n */\nexport type IContentConfigs = Partial<{\n  [ContentBoxType.TAKO]: IContentConfig;\n  [ContentBoxType.CARD]: IContentConfig<ICardCopywritingConfig> & {\n    region: unknown;\n  };\n  [ContentBoxType.IMAGE]: IContentConfig;\n  [ContentBoxType.TEXT]: IContentConfig;\n  [ContentBoxType.FILE]: IContentConfig<IFileCopywritingConfig> & {\n    fileAttributeKeys?: IFileAttributeKeys;\n  };\n  [ContentBoxType.SIMPLE_FUNCTION]: IContentConfig<ISimpleFunctionContentCopywriting>;\n}>;\n\nexport interface ICardCopywritingConfig {\n  empty: ICardEmptyConfig;\n}\n\nexport interface IFileCopywritingConfig {\n  tooltips: IFileCardTooltipsCopyWritingConfig;\n}\n\nexport type IChatUploadCopywritingConfig = Partial<{\n  fileSizeReachLimitToast: string;\n  fileExceedsLimitToast: string;\n  fileEmptyToast: string;\n}>;\n\nexport enum Layout {\n  MOBILE = 'mobile',\n  PC = 'pc',\n}\n\nexport type IconType = ForwardRefExoticComponent<\n  Omit<IconProps, 'ref' | 'svg'> & RefAttributes<HTMLSpanElement>\n>;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type FileMessageContent,\n  type ImageMessageContent,\n} from '@coze-common/chat-core';\nimport { type MdBoxLazyProps } from '@coze-arch/bot-md-box-adapter/lazy';\n\nimport { type IMessage } from './common';\n\nexport type IContent = ISuggestionContent | IImageContent;\n\nexport type ISuggestionContent = IMessage[];\n\nexport type IImageContent = ImageMessageContent;\n\nexport interface IFileContent {\n  file_list: Array<\n    FileMessageContent['file_list'][0] & {\n      upload_status?: number;\n      upload_percent?: number;\n    }\n  >;\n}\n\nexport const enum ContentBoxType {\n  TEXT = 1,\n  IMAGE = 2,\n  CARD = 3,\n  FILE = 4,\n  TAKO = 5,\n  SUGGESTION = 100,\n  SIMPLE_FUNCTION = 101,\n}\n\nexport interface IFunctionCallContent {\n  name: string;\n  arguments: {\n    name: string;\n    description: string;\n  };\n}\n\nexport type GetBotInfo = (id: string) => { nickname: string } | undefined;\n\nexport type MdBoxProps = Pick<\n  MdBoxLazyProps,\n  'insertedElements' | 'enabledHtmlTags' | 'slots'\n>;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type RefObject } from 'react';\n\nimport { type Emitter } from 'mitt';\n\nexport enum UIKitEvents {\n  WINDOW_RESIZE,\n  AFTER_CARD_RENDER,\n}\n\n// eslint-disable-next-line @typescript-eslint/consistent-type-definitions -- mitt's type does not recognize interface\nexport type UIKitEventMap = {\n  [UIKitEvents.WINDOW_RESIZE]: undefined;\n  [UIKitEvents.AFTER_CARD_RENDER]: { messageId: string };\n};\n\nexport type UIKitEventCenter = Emitter<UIKitEventMap>;\n\nexport interface UIKitEventProviderProps {\n  chatContainerRef: RefObject<HTMLDivElement>;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FILE_TYPE_CONFIG } from '@coze-common/chat-core/shared/const';\n\nconst BYTES = 1024;\nexport const MAX_FILE_MBYTE = 500;\n\nexport const DEFAULT_MAX_FILE_SIZE = MAX_FILE_MBYTE * BYTES * BYTES;\n\nexport const enum UploadType {\n  IMAGE = 0,\n  FILE = 1,\n}\n\nexport const ACCEPT_FILE_EXTENSION = FILE_TYPE_CONFIG.map(cnf => cnf.accept)\n  .flat(1)\n  .join(',');\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, type RefObject } from 'react';\n\nimport { type Emitter } from 'mitt';\n\nimport { UIKitEvents, type UIKitEventMap } from './type';\n\nexport const useObserveChatContainer = ({\n  eventCenter,\n  chatContainerRef,\n}: {\n  eventCenter: Emitter<UIKitEventMap>;\n  chatContainerRef: RefObject<HTMLDivElement>;\n}) => {\n  useEffect(() => {\n    if (!chatContainerRef.current) {\n      return;\n    }\n    const resizeObserver = new ResizeObserver(() => {\n      eventCenter.emit(UIKitEvents.WINDOW_RESIZE);\n    });\n\n    resizeObserver.observe(chatContainerRef.current);\n\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, []);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type PropsWithChildren, createContext } from 'react';\n\nimport mitt from 'mitt';\nimport { useCreation } from 'ahooks';\n\nimport {\n  type UIKitEventMap,\n  type UIKitEventCenter,\n  type UIKitEventProviderProps,\n} from './type';\nimport { useObserveChatContainer } from './hooks';\n\nexport const UIKitEventContext = createContext<UIKitEventCenter | null>(null);\n\nexport const UIKitEventProvider: React.FC<\n  PropsWithChildren<UIKitEventProviderProps>\n> = ({ chatContainerRef, children }) => {\n  const eventCenter = useCreation(() => mitt<UIKitEventMap>(), []);\n\n  useObserveChatContainer({ eventCenter, chatContainerRef });\n\n  return (\n    <UIKitEventContext.Provider value={eventCenter}>\n      {children}\n    </UIKitEventContext.Provider>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useContext } from 'react';\n\nimport { UIKitEventContext } from './context';\n\nexport const useUiKitEventCenter = () => useContext(UIKitEventContext);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const enum UiKitReportEvents {\n  FailReadLocalStorage = 'uikit_FailReadLocalStorage',\n  FailWriteLocalStorage = 'uikit_FailWriteLocalStorage',\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isObject } from 'lodash-es';\nimport { type Reporter } from '@coze-arch/logger';\n\nimport { UiKitReportEvents } from '../report-event';\nimport { type StoreStruct } from './type';\n\nconst PERSIST_CACHE_KEY = 'cache:@coze-common/chat-area';\n\nconst cachedReadWholeStore = (() => {\n  let cached: Partial<StoreStruct> | null;\n  return (reporter: Reporter) => {\n    if (!cached) {\n      cached = readFromCache(reporter);\n    }\n    return cached;\n  };\n})();\n\nconst getPlaceholderStruct = (): Partial<StoreStruct> => ({});\n\nexport type ReadLocalStoreValue = <K extends keyof StoreStruct>(\n  name: K,\n  fallbackValue: StoreStruct[K],\n) => StoreStruct[K];\nexport type WriteLocalStoreValue = <K extends keyof StoreStruct>(\n  name: K,\n  value: StoreStruct[K],\n) => void;\n\nexport const getReadLocalStoreValue =\n  (reporter: Reporter): ReadLocalStoreValue =>\n  (name, fallbackValue) => {\n    const readStruct = cachedReadWholeStore(reporter);\n    if (!readStruct) {\n      return fallbackValue;\n    }\n    return readStruct[name] ?? fallbackValue;\n  };\n\nexport const getWriteLocalStoreValue =\n  (reporter: Reporter): WriteLocalStoreValue =>\n  (name, value) => {\n    const readStruct = cachedReadWholeStore(reporter);\n    const writeStruct = readStruct || getPlaceholderStruct();\n    writeStruct[name] = value;\n    saveToCache(reporter, writeStruct);\n  };\n\nconst readFromCache = (reporter: Reporter): Partial<StoreStruct> | null => {\n  try {\n    const content = window.localStorage.getItem(PERSIST_CACHE_KEY);\n    if (!content) {\n      return null;\n    }\n    const res = JSON.parse(content);\n    if (isObject(res)) {\n      return res as StoreStruct;\n    }\n    return null;\n  } catch (e) {\n    reporter.errorEvent({\n      eventName: UiKitReportEvents.FailReadLocalStorage,\n      error: e,\n    });\n    return null;\n  }\n};\n\nconst saveToCache = (reporter: Reporter, struct: Partial<StoreStruct>) => {\n  try {\n    if (isObject(struct)) {\n      const content = JSON.stringify(struct);\n      window.localStorage.setItem(PERSIST_CACHE_KEY, content);\n    }\n  } catch (e) {\n    reporter.errorEvent({\n      eventName: UiKitReportEvents.FailWriteLocalStorage,\n      error: e,\n    });\n  }\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type AudioWaveProps } from './type';\n\nexport const getBarHeights = (\n  waveBarNumber: number,\n  volumeRealNumber: number,\n) => {\n  if (volumeRealNumber <= 0) {\n    return new Array(waveBarNumber).fill(8);\n  }\n  const waveBarHeights = new Array(waveBarNumber)\n    .fill(0)\n    .map((_item, index) =>\n      getBarHeight3(index, waveBarNumber, volumeRealNumber),\n    );\n  const minHeight = Math.min(...waveBarHeights);\n  const maxHeight = Math.max(...waveBarHeights);\n  const heightSpan = maxHeight - minHeight;\n  return waveBarHeights.map(\n    item =>\n      8 +\n      ((item - minHeight) / (maxHeight - minHeight)) * Math.min(12, heightSpan),\n  );\n};\n\nexport const getBarHeight3 = (\n  index: number,\n  maxNumber: number,\n  volumeNumber: number,\n) => {\n  const percent = index / maxNumber;\n  const maxHeight = 24;\n  let baseHeight = 2;\n  let randomMin = -2;\n  let randomMax = 2;\n  if (percent < 1 / 6) {\n    baseHeight = 1 + (4 - 1) * percent * 6;\n    randomMin = 0.1 + (-0.8 - 0.1) * percent * 6;\n    randomMax = 0.3 + (0.6 - 0.3) * percent * 6;\n  } else if (percent < 2 / 6) {\n    baseHeight = 4 + (2 - 4) * (percent - 1 / 6) * 6;\n    randomMin = -0.8 + (-0.0 + 0.8) * (percent - 1 / 6) * 6;\n    randomMax = 0.6 + (0.6 - 0.6) * (percent - 1 / 6) * 6;\n  } else if (percent < 3 / 6) {\n    baseHeight = 2 + (8 - 2) * (percent - 2 / 6) * 6;\n    randomMin = 0.0 + (Number(-1.6) - 0.0) * (percent - 2 / 6) * 6;\n    randomMax = 0.6 + (1.2 - 0.6) * (percent - 2 / 6) * 6;\n  } else if (percent < 4 / 6) {\n    baseHeight = 8 + (2 - 8) * (percent - 3 / 6) * 6;\n    randomMin = -1.6 + (0.0 + 1.6) * (percent - 3 / 6) * 6;\n    randomMax = 1.2 + (0.6 - 1.2) * (percent - 3 / 6) * 6;\n  } else if (percent < 5 / 6) {\n    baseHeight = 2 + (4 - 2) * (percent - 4 / 6) * 6;\n    randomMin = 0.0 + (Number(-0.8) - 0.0) * (percent - 4 / 6) * 6;\n    randomMax = 0.6 + (0.6 - 0.6) * (percent - 4 / 6) * 6;\n  } else if (percent < 1) {\n    baseHeight = 4 + (1 - 4) * (percent - 5 / 6) * 6;\n    randomMin = -0.8 + (0.1 + 0.8) * (percent - 5 / 6) * 6;\n    randomMax = 0.1 + (0.3 - 0.6) * (percent - 5 / 6) * 6;\n  }\n  const height =\n    baseHeight +\n    volumeNumber *\n      (Math.random() * (randomMax - randomMin) + randomMin) *\n      (maxHeight - baseHeight);\n  return height;\n};\n\nexport const getBarBgColor = (\n  index: number,\n  maxNumber: number,\n  type: AudioWaveProps['type'],\n) => {\n  let bgColor = '#FFF';\n  switch (type) {\n    case 'primary':\n      {\n        /*\n         * implement : fill: linear-gradient(90deg, rgba(83, 71, 255, 0.20) 0%, #5347FF 20%, #B125F1 80%, rgba(177, 37, 241, 0.20) 100%);\n         */\n        let opacity = 0;\n        let rColor = 0;\n        let gColor = 0;\n        let bColor = 0;\n        const percent = index / maxNumber;\n        if (percent < 0.2) {\n          opacity = 0.2 + ((1 - 0.2) * percent) / 0.2;\n          rColor = 83;\n          gColor = 71;\n          bColor = 255;\n        } else if (percent < 0.8) {\n          opacity = 1;\n          rColor = Math.round(83 + ((177 - 83) * (percent - 0.2)) / 0.6);\n          gColor = Math.round(71 + ((37 - 71) * (percent - 0.2)) / 0.6);\n          bColor = Math.round(255 + ((241 - 255) * (percent - 0.2)) / 0.6);\n        } else {\n          opacity = 1 - ((1 - 0.2) * (percent - 0.8)) / 0.2;\n          rColor = 177;\n          gColor = 37;\n          bColor = 241;\n        }\n        bgColor = `rgba(${rColor}, ${gColor}, ${bColor}, ${opacity.toFixed(\n          2,\n        )})`;\n      }\n      break;\n    case 'warning':\n      {\n        bgColor = '#FF0030';\n      }\n      break;\n    default:\n      {\n        /*\n         * implement : fill: linear-gradient(90deg, rgba(255, 255, 255, 0.20) 0%, #FFF 20%, rgba(255, 255, 255, 0.90) 80%, rgba(255, 255, 255, 0.20) 100%);\n         */\n        let opacity = 0;\n        const percent = index / maxNumber;\n        if (percent < 0.2) {\n          opacity = 0.2 + ((1 - 0.2) * percent) / 0.2;\n        } else if (percent < 0.8) {\n          opacity = 1 - ((1 - 0.9) * (percent - 0.2)) / 0.6;\n        } else {\n          opacity = 0.9 - ((0.9 - 0.2) * (percent - 0.8)) / 0.2;\n        }\n        bgColor = `rgba(255, 255, 255, ${opacity.toFixed(2)})`;\n      }\n      break;\n  }\n  return bgColor;\n};\n","\n      import API from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from 'classnames';\nimport { Space } from '@coze-arch/coze-design';\n\nimport { getBarBgColor, getBarHeights } from './utils';\nimport { type AudioWaveProps } from './type';\n\nimport styles from './index.module.less';\n\nconst waveBarNumberMap = {\n  large: 41,\n  medium: 29,\n  small: 4,\n};\nexport const AudioWave = ({\n  size = 'medium',\n  volumeNumber = 0,\n  type = 'default',\n  wrapperClassName,\n  waveClassName,\n}: AudioWaveProps) => {\n  const volumeRealNumber = Math.max(Math.min(volumeNumber, 100), 0);\n  const waveBarNumber = waveBarNumberMap[size] || 29;\n  const waveBarHeights = getBarHeights(waveBarNumber, volumeRealNumber);\n\n  return (\n    <Space\n      spacing={3}\n      align=\"center\"\n      className={classNames(styles.container, wrapperClassName)}\n    >\n      {waveBarHeights.map((height, index) => (\n        <div\n          className={classNames(\n            styles[`audio-wave-${index}`],\n            styles[type],\n            styles.bar,\n            styles[size],\n            waveClassName,\n          )}\n          style={{\n            backgroundColor: getBarBgColor(index, waveBarNumber, type),\n            height,\n          }}\n          key={`${type}_${index}`}\n        />\n      ))}\n    </Space>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { forwardRef, useEffect, useRef, useState } from 'react';\n\nimport { useThrottleFn } from 'ahooks';\nimport { type AudioRecordProps, Layout } from '@coze-common/chat-uikit-shared';\n\nimport { type AudioWaveProps } from './audio-wave/type';\nimport { AudioWave } from './audio-wave';\n\nexport const AudioRecord = forwardRef<\n  HTMLDivElement,\n  AudioRecordProps & { layout: Layout }\n>(({ isRecording, getVolume, isPointerMoveOut, layout, text }, ref) => {\n  const [volumeNumber, setVolumeNumber] = useState(0);\n  const animationIdRef = useRef<number | null>(null);\n  const { run, flush } = useThrottleFn(\n    () => {\n      setVolumeNumber(getVolume?.() ?? 0);\n      animationIdRef.current = requestAnimationFrame(run);\n    },\n    { wait: 100 },\n  );\n\n  const getAudioWaveTheme = (): AudioWaveProps['type'] => {\n    if (layout === Layout.MOBILE) {\n      return 'default';\n    }\n    if (isPointerMoveOut) {\n      return 'warning';\n    }\n    return 'primary';\n  };\n\n  useEffect(() => {\n    if (!isRecording) {\n      return;\n    }\n\n    run();\n\n    return () => {\n      flush();\n      if (typeof animationIdRef.current !== 'number') {\n        return;\n      }\n      cancelAnimationFrame(animationIdRef.current);\n      animationIdRef.current = null;\n    };\n  }, [isRecording]);\n\n  return (\n    <div ref={ref} className=\"w-full h-32px relative\">\n      <div className=\"w-full h-full flex items-center justify-center pointer-events-none\">\n        {isRecording ? (\n          <AudioWave\n            size=\"medium\"\n            type={getAudioWaveTheme()}\n            volumeNumber={volumeNumber}\n          />\n        ) : (\n          <div className=\"coz-fg-primary text-lg font-medium leading-[20px]\">\n            {text}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n});\n\nexport { AudioWave };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext, useContext } from 'react';\n\nimport { type IEventCallbacks } from '@coze-common/chat-uikit-shared';\n/**\n * In order to support CozeImage's empty fetching and performance optimization, consider the temporarily opened Context, don't use it indiscriminately...\n */\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport const OnboardingContext = createContext<{\n  imageAutoSizeContainerWidth: number | undefined;\n  eventCallbacks: IEventCallbacks | undefined;\n}>({\n  imageAutoSizeContainerWidth: undefined,\n  eventCallbacks: undefined,\n});\n\nexport const useOnboardingContext = () => useContext(OnboardingContext);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext, useContext } from 'react';\n\nimport {\n  type Layout,\n  type IEventCallbacks,\n} from '@coze-common/chat-uikit-shared';\n\nexport interface UIKitMessageBoxContextProps {\n  imageAutoSizeContainerWidth?: number;\n  layout?: Layout;\n  enableImageAutoSize?: boolean;\n  eventCallbacks?: IEventCallbacks;\n  onError?: (error: unknown) => void;\n}\n\nexport const UIKitMessageBoxContext =\n  createContext<UIKitMessageBoxContextProps>({});\n\nexport const UIKitMessageBoxProvider = UIKitMessageBoxContext.Provider;\n\nexport const useUiKitMessageBoxContext = () =>\n  useContext(UIKitMessageBoxContext);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const safeParseUrl = (url: string) => {\n  try {\n    return new URL(url);\n  } catch (err) {\n    return null;\n  }\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { type FC, useEffect, useRef } from 'react';\n\nimport { isObject, isString, omit } from 'lodash-es';\nimport cs from 'classnames';\nimport { typeSafeJsonParse } from '@coze-common/chat-area-utils';\nimport {\n  LinkType,\n  type MdBoxLinkProps,\n} from '@coze-arch/bot-md-box-adapter/lazy';\n\nimport { useOnboardingContext } from '../../../context/onboarding';\nimport { useUiKitMessageBoxContext } from '../../../context/message-box';\nimport { safeParseUrl } from './utils';\n\nconst isHttpLink = (link: string) => {\n  const parsedLink = safeParseUrl(link);\n\n  if (!parsedLink) {\n    return false;\n  }\n\n  return parsedLink.protocol === 'http:' || parsedLink.protocol === 'https:';\n};\n\nconst isCocoLink = (link: string) => {\n  const parsedLink = safeParseUrl(link);\n\n  if (!parsedLink) {\n    return false;\n  }\n\n  return parsedLink.protocol === 'coco:';\n};\n\n/** Components replaced by linked elements */\nexport const CozeLink: FC<\n  MdBoxLinkProps & {\n    onLinkElementEnter?: (params: {\n      element: HTMLElement;\n      link: string;\n    }) => void;\n    onLinkElementLeave?: (params: {\n      element: HTMLElement;\n      link: string;\n    }) => void;\n  }\n  // eslint-disable-next-line @coze-arch/max-line-per-function\n> = ({\n  className,\n  style,\n  href,\n  children,\n  onSendMessage,\n  onLinkClick,\n  onLinkRender,\n  onOpenLink,\n  type: _type,\n  onLinkElementEnter: onLinkElementEnterFromProps,\n  onLinkElementLeave: onLinkElementLeaveFromProps,\n  ...restProps\n}) => {\n  const handleOpenLink = (url?: string) => {\n    if (onOpenLink) {\n      onOpenLink?.(url);\n      return;\n    }\n\n    window.open(url);\n  };\n  const parsedUrl = href ? safeParseUrl(href) : null;\n\n  const containerRef = useRef<HTMLAnchorElement | null>(null);\n\n  const { eventCallbacks } = useUiKitMessageBoxContext();\n\n  const { eventCallbacks: eventCallbacksFromOnboarding } =\n    useOnboardingContext();\n  const {\n    onMdBoxLinkElementEnter: onLinkElementEnterFromEventCallback,\n    onMdBoxLinkElementLeave: onLinkElementLeaveFromEventCallback,\n  } = eventCallbacks ?? {};\n\n  const {\n    onMdBoxLinkElementEnter: onMdBoxLinkElementEnterFromOnboarding,\n    onMdBoxLinkElementLeave: onMdBoxLinkElementLeaveFromOnboarding,\n  } = eventCallbacksFromOnboarding ?? {};\n\n  const onLinkElementEnter =\n    onLinkElementEnterFromProps ??\n    onLinkElementEnterFromEventCallback ??\n    onMdBoxLinkElementEnterFromOnboarding;\n\n  const onLinkElementLeave =\n    onLinkElementLeaveFromProps ??\n    onLinkElementLeaveFromEventCallback ??\n    onMdBoxLinkElementLeaveFromOnboarding;\n\n  const onClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    /* istanbul ignore if */\n    if (!href || !parsedUrl) {\n      event.preventDefault();\n      return;\n    }\n\n    if (isCocoLink(href)) {\n      event.preventDefault();\n      const message = parsedUrl.searchParams.get('msg');\n      const ext = parsedUrl.searchParams.get('ext');\n      const extObj = ext\n        ? typeSafeJsonParse(ext, error => {\n            reportError(error);\n          })\n        : undefined;\n      const wikiLink =\n        isObject(extObj) &&\n        's$wiki_link' in extObj &&\n        isString(extObj?.s$wiki_link)\n          ? extObj?.s$wiki_link\n          : '';\n\n      /* istanbul ignore if */\n      if (wikiLink) {\n        if (isHttpLink(wikiLink)) {\n          onLinkClick?.(event, {\n            url: href,\n            parsedUrl,\n            exts: { wiki_link: wikiLink, type: LinkType.wiki },\n            openLink: handleOpenLink,\n          });\n        }\n\n        return;\n      }\n\n      if (message) {\n        onSendMessage?.(message);\n        return;\n      }\n\n      onLinkClick?.(event, {\n        url: href,\n        parsedUrl,\n        exts: { type: LinkType.coco },\n        openLink: handleOpenLink,\n      });\n    }\n\n    if (!isHttpLink(href)) {\n      return;\n    }\n\n    /* istanbul ignore else */\n    if (onLinkClick) {\n      onLinkClick(event, {\n        url: href,\n        parsedUrl,\n        exts: {\n          type: LinkType.normal,\n        },\n        openLink: handleOpenLink,\n      });\n    } else {\n      event.preventDefault();\n      event.stopPropagation();\n      window.open(href);\n    }\n  };\n\n  useEffect(() => {\n    if (href && parsedUrl) {\n      onLinkRender?.({\n        url: href,\n        parsedUrl,\n      });\n    }\n  }, [href]);\n\n  const handleMouseEnter = () => {\n    if (!containerRef.current) {\n      return;\n    }\n    onLinkElementEnter?.({\n      element: containerRef.current,\n      link: href ?? '',\n    });\n  };\n\n  const handleMouseLeave = () => {\n    if (!containerRef.current) {\n      return;\n    }\n    onLinkElementLeave?.({\n      element: containerRef.current,\n      link: href ?? '',\n    });\n  };\n\n  return (\n    <a\n      {...omit(restProps, 'href')}\n      className={cs(['!coz-fg-hglt'], className)}\n      style={style}\n      onClick={onClick}\n      href={parsedUrl ? href : undefined}\n      target=\"_blank\"\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={handleMouseLeave}\n      ref={containerRef}\n    >\n      {children}\n    </a>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const getImageDisplayAttribute = (\n  width: number,\n  height: number,\n  contentWidth: number,\n) => {\n  // image scale\n  const imageRatio = width / height;\n\n  // display width\n  let displayWidth = contentWidth;\n  // display height\n  let displayHeight = contentWidth / imageRatio;\n  // Whether to cut\n  let isCover = false;\n\n  // (Small size drawing)\n\n  if (width <= contentWidth && height <= 240) {\n    displayWidth = width;\n    displayHeight = height;\n  } else if (imageRatio > contentWidth / 120) {\n    displayWidth = contentWidth;\n    displayHeight = 120;\n    isCover = true;\n    // (Long vertical) Image width: Image height < = 0.5\n  } else if (imageRatio <= 0.5) {\n    displayWidth = 120;\n    displayHeight = 240;\n    isCover = true;\n    // (Equivalent display picture)\n  } else if (0.5 <= imageRatio && imageRatio <= contentWidth / 240) {\n    displayWidth = 240 * imageRatio;\n    displayHeight = 240;\n    // (Medium and long horizontal chart)\n  } else if (\n    contentWidth / 240 <= imageRatio &&\n    imageRatio <= contentWidth / 240\n  ) {\n    displayWidth = contentWidth;\n    displayHeight = contentWidth / imageRatio;\n  }\n\n  return {\n    displayHeight,\n    displayWidth,\n    isCover,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable react-hooks/rules-of-hooks */\nimport {\n  type CSSProperties,\n  useEffect,\n  useState,\n  type FC,\n  useRef,\n  memo,\n} from 'react';\n\nimport { isEqual } from 'lodash-es';\nimport classNames from 'classnames';\nimport { ImagePreview, Skeleton } from '@coze-arch/coze-design';\nimport { ImageStatus } from '@coze-arch/bot-md-box-adapter/lazy';\nimport { type MdBoxImageProps } from '@coze-arch/bot-md-box-adapter';\n\nimport { getImageDisplayAttribute } from '../../utils/image/get-image-display-attribute';\nimport { useOnboardingContext } from '../../context/onboarding';\nimport { useUiKitMessageBoxContext } from '../../context/message-box';\nimport DefaultImage from '../../assets/image-default.png';\n\ninterface OriginImageInfo {\n  width?: number;\n  height?: number;\n}\n\nexport type CozeImageProps = MdBoxImageProps & {\n  imageAutoSizeContainerWidth?: number;\n  enablePreview?: boolean;\n  onImageElementEnter?: (params: {\n    element: HTMLElement;\n    link: string;\n  }) => void;\n  onImageElementLeave?: (params: {\n    element: HTMLElement;\n    link: string;\n  }) => void;\n};\n\nconst TIME_OUT = 10000;\n\n// TODO: @liushuoyan see if you can get a slot or something here\n// eslint-disable-next-line @typescript-eslint/naming-convention, @coze-arch/max-line-per-function\nexport const _CozeImage: FC<CozeImageProps> = props => {\n  const [showPreview, setShowPreview] = useState(false);\n  const {\n    className,\n    src,\n    onImageClick,\n    imageAutoSizeContainerWidth: imageAutoSizeContainerWidthFromProps,\n    enablePreview,\n    style,\n  } = props;\n\n  const containerRef = useRef<HTMLDivElement | null>(null);\n\n  const {\n    imageAutoSizeContainerWidth: imageAutoSizeContainerWidthFromContext,\n    eventCallbacks,\n    onError,\n  } = useUiKitMessageBoxContext();\n\n  const {\n    onMdBoxImageElementEnter: onImageElementEnterFromEventCallback,\n    onMdBoxImageElementLeave: onImageElementLeaveFromEventCallback,\n  } = eventCallbacks ?? {};\n\n  const {\n    imageAutoSizeContainerWidth:\n      imageAutoSizeContainerWidthFromOnboardingContext,\n    eventCallbacks: eventCallbacksFromOnboarding,\n  } = useOnboardingContext();\n\n  const {\n    onMdBoxImageElementEnter: onMdBoxImageElementEnterFromOnboarding,\n    onMdBoxImageElementLeave: onMdBoxImageElementLeaveFromOnboarding,\n  } = eventCallbacksFromOnboarding ?? {};\n\n  const onImageElementEnter =\n    props.onImageElementEnter ??\n    onImageElementEnterFromEventCallback ??\n    onMdBoxImageElementEnterFromOnboarding;\n\n  const onImageElementLeave =\n    props.onImageElementLeave ??\n    onImageElementLeaveFromEventCallback ??\n    onMdBoxImageElementLeaveFromOnboarding;\n\n  const imageAutoSizeContainerWidth =\n    imageAutoSizeContainerWidthFromProps ??\n    imageAutoSizeContainerWidthFromContext ??\n    imageAutoSizeContainerWidthFromOnboardingContext;\n\n  const originImageInfoRef = useRef<OriginImageInfo>({});\n  const [imageStyles, setImageStyles] = useState<CSSProperties>({});\n\n  // loading status\n  const [loading, setLoading] = useState(true);\n  const [imageSrc, setImageSrc] = useState(DefaultImage);\n\n  const timeout = useRef<NodeJS.Timeout | null>(null);\n\n  const resetImageSize = (width: number, height: number) => {\n    if (!imageAutoSizeContainerWidth) {\n      return;\n    }\n\n    const { displayHeight, displayWidth, isCover } = getImageDisplayAttribute(\n      width,\n      height,\n      imageAutoSizeContainerWidth,\n    );\n\n    setImageStyles({\n      display: 'block',\n      width: displayWidth,\n      height: displayHeight,\n      objectFit: isCover ? 'cover' : undefined,\n      objectPosition: 'left top',\n    });\n  };\n\n  const clearImageErrorTimeout = () => {\n    if (!timeout.current) {\n      return;\n    }\n\n    clearTimeout(timeout.current);\n  };\n\n  const builtinLoadImage = ({ loadImageSrc }: { loadImageSrc: string }) => {\n    const image = new Image();\n    image.src = loadImageSrc;\n\n    clearImageErrorTimeout();\n\n    image.onload = () => {\n      clearImageErrorTimeout();\n      originImageInfoRef.current = {\n        width: image.width,\n        height: image.height,\n      };\n      resetImageSize(image.width, image.height);\n      setImageSrc(loadImageSrc);\n      setLoading(false);\n    };\n\n    image.onerror = () => {\n      clearImageErrorTimeout();\n      timeout.current = setTimeout(() => {\n        setImageSrc(DefaultImage);\n        setLoading(false);\n\n        onError?.(new Error('coze image load error: time out'));\n      }, TIME_OUT);\n    };\n  };\n\n  useEffect(() => {\n    setLoading(true);\n\n    builtinLoadImage({\n      loadImageSrc: src ?? '',\n    });\n  }, [src]);\n\n  useEffect(() => {\n    if (!imageAutoSizeContainerWidth || !originImageInfoRef.current) {\n      return;\n    }\n\n    if (\n      !originImageInfoRef.current.width ||\n      !originImageInfoRef.current.height\n    ) {\n      return;\n    }\n\n    resetImageSize(\n      originImageInfoRef.current.width,\n      originImageInfoRef.current.height,\n    );\n  }, [imageAutoSizeContainerWidth, originImageInfoRef.current]);\n\n  const handleMouseEnter = () => {\n    if (!containerRef.current) {\n      return;\n    }\n    onImageElementEnter?.({\n      element: containerRef.current,\n      link: src ?? '',\n    });\n  };\n\n  const handleMouseLeave = () => {\n    if (!containerRef.current) {\n      return;\n    }\n    onImageElementLeave?.({\n      element: containerRef.current,\n      link: src ?? '',\n    });\n  };\n\n  return (\n    <div\n      ref={containerRef}\n      className={classNames('w-fit', className)}\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={handleMouseLeave}\n      style={style}\n    >\n      {enablePreview && src ? (\n        <ImagePreview\n          src={src ?? ''}\n          visible={showPreview}\n          onVisibleChange={() => setShowPreview(false)}\n        />\n      ) : null}\n      <Skeleton\n        style={{ width: 240, height: 120 }}\n        className=\"coz-mg-secondary\"\n        loading={loading}\n        active\n      >\n        <img\n          src={imageSrc ?? ''}\n          style={imageStyles}\n          className={classNames('rounded-[8px]', className, {\n            'cursor-zoom-in': Boolean(onImageClick) || enablePreview,\n          })}\n          onClick={e => {\n            onImageClick?.(e, {\n              src: imageSrc ?? '',\n              status: ImageStatus.Success,\n            });\n\n            if (enablePreview) {\n              setShowPreview(true);\n            }\n          }}\n        />\n      </Skeleton>\n    </div>\n  );\n};\n\nexport const CozeImage = memo(_CozeImage, (prevProps, nextProps) =>\n  isEqual(prevProps, nextProps),\n);\n\nexport const CozeImageWithPreview: FC<CozeImageProps> = props => (\n  <CozeImage {...props} enablePreview={true} />\n);\n\nCozeImageWithPreview.displayName = 'CozeImageWithPreview';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ComponentPropsWithRef, type FC } from 'react';\n\nimport { MdBoxLazy } from '@coze-arch/bot-md-box-adapter/lazy';\n\nimport { CozeLink } from '../../md-box-slots/link';\nimport { CozeImage } from '../../md-box-slots/coze-image';\n\nexport const LazyCozeMdBox: FC<\n  ComponentPropsWithRef<typeof MdBoxLazy>\n> = props => (\n  <MdBoxLazy\n    slots={{\n      Image: CozeImage,\n      Link: CozeLink,\n    }}\n    {...props}\n  />\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const isText = (value: any): value is string =>\n  value && typeof value === 'string';\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type MouseEvent, type FC, useRef } from 'react';\n\nimport {\n  type IOnImageClickParams,\n  type IOnLinkClickParams,\n  type IBaseContentProps,\n  type MdBoxProps,\n} from '@coze-common/chat-uikit-shared';\nimport { Image } from '@coze-arch/bot-md-box-adapter/slots';\nimport { type ImageOptions } from '@coze-arch/bot-md-box-adapter';\n\nimport { CozeLink } from '../../md-box-slots/link';\nimport { CozeImage } from '../../md-box-slots/coze-image';\nimport { LazyCozeMdBox } from '../../common/coze-md-box/lazy';\nimport { isText } from '../../../utils/is-text';\nimport './index.less';\n\nexport type IMessageContentProps = IBaseContentProps & {\n  onImageClick?: (params: IOnImageClickParams) => void;\n  mdBoxProps?: MdBoxProps;\n  enableAutoSizeImage?: boolean;\n  imageOptions?: ImageOptions;\n  onLinkClick?: (\n    params: IOnLinkClickParams,\n    event: MouseEvent<Element, globalThis.MouseEvent>,\n  ) => void;\n};\n\nexport const TextContent: FC<IMessageContentProps> = props => {\n  const {\n    message,\n    readonly,\n    onImageClick,\n    onLinkClick,\n    mdBoxProps,\n    enableAutoSizeImage,\n    imageOptions,\n  } = props;\n  const MdBoxLazy = LazyCozeMdBox;\n  const contentRef = useRef<HTMLDivElement | null>(null);\n  const { content } = message;\n\n  if (!isText(content)) {\n    return null;\n  }\n\n  const isStreaming = !message.is_finish;\n  const text = content.slice(0, message.broken_pos ?? Infinity);\n  return (\n    <div\n      className=\"chat-uikit-text-content\"\n      data-testid=\"bot.ide.chat_area.message.text-answer-message-content\"\n      ref={contentRef}\n      data-grab-mark={message.message_id}\n      data-grab-source={message.source}\n    >\n      <MdBoxLazy\n        markDown={text}\n        autoFixSyntax={{ autoFixEnding: isStreaming }}\n        showIndicator={isStreaming}\n        smooth={isStreaming}\n        imageOptions={{ forceHttps: !IS_OPEN_SOURCE, ...imageOptions }}\n        eventCallbacks={{\n          onImageClick: (e, eventData) => {\n            eventData.src &&\n              onImageClick?.({\n                message,\n                extra: { url: eventData.src },\n              });\n          },\n          onLinkClick: (e, eventData) => {\n            onLinkClick?.(\n              {\n                message,\n                extra: { ...eventData },\n              },\n              e,\n            );\n\n            if (readonly) {\n              e.preventDefault();\n              e.stopPropagation();\n            }\n          },\n        }}\n        {...mdBoxProps}\n        slots={{\n          Image: enableAutoSizeImage ? CozeImage : Image,\n          Link: CozeLink,\n          ...mdBoxProps?.slots,\n        }}\n      ></MdBoxLazy>\n    </div>\n  );\n};\n\nTextContent.displayName = 'TextContent';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type IImageContent } from '@coze-common/chat-uikit-shared';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const isImage = (value: any): value is IImageContent =>\n  value && 'image_list' in value;\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, useState, type FC } from 'react';\n\nimport { isEmpty } from 'lodash-es';\nimport classNames from 'classnames';\nimport { type ContentType, type Message } from '@coze-common/chat-core';\nimport {\n  safeAsyncThrow,\n  typeSafeJsonParseEnhanced,\n} from '@coze-common/chat-area-utils';\nimport { Skeleton } from '@coze-arch/coze-design';\nimport { type IImageContent } from '@coze-common/chat-uikit-shared';\n\nimport { type IImageMessageContentProps } from '../image-content';\nimport { isImage } from '../../../utils/is-image';\nimport { getImageDisplayAttribute } from '../../../utils/image/get-image-display-attribute';\nimport { useUiKitMessageBoxContext } from '../../../context/message-box';\nimport DefaultImage from '../../../assets/image-default.png';\n\nimport './index.less';\n\ninterface ImageInfo {\n  url: string;\n  displayWidth: number;\n  displayHeight: number;\n}\ntype IBlobImageMap = Record<string, ImageInfo>;\n\ninterface SingleImageContentWithAutoSizeProps\n  extends IImageMessageContentProps {\n  content_obj: IImageContent;\n}\n\nexport const SingleImageContentWithAutoSize: FC<\n  IImageMessageContentProps\n> = props => {\n  const { message } = props;\n\n  const {\n    content_obj = typeSafeJsonParseEnhanced<Message<ContentType.Image>>({\n      str: message.content,\n      onParseError: e => {\n        safeAsyncThrow(e.message);\n      },\n      onVerifyError: e => {\n        safeAsyncThrow(e.message);\n      },\n      verifyStruct: (sth: unknown): sth is Message<ContentType.Image> =>\n        Boolean(sth && 'image_list' in { ...sth }),\n    }),\n  } = message;\n  // Type guards generally do not affect the order of hooks\n  if (!isImage(content_obj)) {\n    return null;\n  }\n  return (\n    <SingleImageContentWithAutoSizeImpl content_obj={content_obj} {...props} />\n  );\n};\n\n/**\n * There's a reason for this.\n * The front-end compute groupId is grouped by replyId (localMessageId before server level is not ack)\n * Therefore, after the server level ack, the key of the loop will change, causing the component to unmount - > mount (destroy and rebuild).\n * Therefore, it is necessary to use a more trick way to achieve the problem of picture display optimization\n */\nconst blobImageMap: IBlobImageMap = {};\nconst isBlob = (url: string) => url?.startsWith('blob:');\n\nconst SingleImageContentWithAutoSizeImpl: FC<\n  SingleImageContentWithAutoSizeProps\n> = props => {\n  const { message, onImageClick, className, content_obj } = props;\n  const { imageAutoSizeContainerWidth = 0 } = useUiKitMessageBoxContext();\n  const localMessageId = message.extra_info.local_message_id;\n\n  // The picture sent by the current server level ori = thumb, so just use one for now.\n  const currentImageUrl = content_obj?.image_list?.at(0)?.image_ori?.url ?? '';\n\n  const { displayHeight, displayWidth, isCover } = getImageDisplayAttribute(\n    content_obj.image_list.at(0)?.image_ori.width ?? 0,\n    content_obj.image_list.at(0)?.image_ori.height ?? 0,\n    imageAutoSizeContainerWidth,\n  );\n\n  if (isBlob(currentImageUrl) && imageAutoSizeContainerWidth > 0) {\n    blobImageMap[localMessageId] = {\n      url: currentImageUrl,\n      displayHeight,\n      displayWidth,\n    };\n  }\n\n  const [imageInfo, setImageInfo] = useState<ImageInfo>(\n    blobImageMap[localMessageId] ?? {\n      url: currentImageUrl,\n      displayWidth,\n      displayHeight,\n    },\n  );\n\n  useEffect(() => {\n    const preloadImage = new Image();\n\n    if (currentImageUrl.startsWith('http')) {\n      preloadImage.src = currentImageUrl;\n      preloadImage.onload = () => {\n        setImageInfo({\n          url: currentImageUrl,\n          displayHeight,\n          displayWidth,\n        });\n      };\n    }\n\n    return () => {\n      preloadImage.onload = null;\n    };\n  }, [currentImageUrl, imageAutoSizeContainerWidth]);\n\n  return (\n    <Skeleton\n      loading={isEmpty(imageInfo?.url)}\n      style={{\n        width: imageInfo?.displayWidth,\n        height: imageInfo?.displayHeight,\n      }}\n    >\n      <img\n        src={imageInfo?.url ?? DefaultImage}\n        style={{\n          width: imageInfo?.displayWidth,\n          height: imageInfo?.displayHeight,\n          maxWidth: '100%',\n          objectFit: isCover ? 'cover' : undefined,\n          objectPosition: 'left top',\n        }}\n        onClick={e =>\n          onImageClick?.({\n            message,\n            extra: {\n              url: imageInfo?.url,\n            },\n          })\n        }\n        className={classNames('block', className, {\n          'cursor-zoom-in': Boolean(onImageClick),\n        })}\n      />\n    </Skeleton>\n  );\n};\n\nSingleImageContentWithAutoSize.displayName = 'SingleImageContentWithAutoSize';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @Deprecated very very bad, change to typeSafeJsonParse ASAP.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const safeJSONParse: (v: any, emptyValue?: any) => any = (\n  v,\n  emptyValue,\n) => {\n  try {\n    const json = JSON.parse(v);\n    return json;\n  } catch (e) {\n    return emptyValue ?? void 0;\n  }\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from 'classnames';\nimport { Image } from '@coze-arch/coze-design';\n\nimport EmptyImage from '../../../assets/image-empty.png';\n\nimport './index.less';\n\nexport interface SingleImageContentUIProps {\n  thumbUrl: string;\n  originalUrl: string;\n  onClick?: (originUrl: string) => void;\n  className?: string;\n}\n\nexport const SingleImageContentUI: React.FC<SingleImageContentUIProps> = ({\n  thumbUrl,\n  originalUrl,\n  onClick,\n  className,\n}) => (\n  <div\n    className={classNames(className, 'chat-uikit-single-image-content')}\n    onClick={() => onClick?.(originalUrl)}\n  >\n    <Image\n      src={thumbUrl || EmptyImage}\n      className=\"chat-uikit-single-image-content__image\"\n      /**\n       * The preview function that comes with the semi Image component is not used here. There are side effects in the incoming onImageClick callback that will pull the preview component\n       */\n      preview={false}\n    />\n  </div>\n);\n\nSingleImageContentUI.displayName = 'SingleImageContentUI';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState, type FC, useEffect } from 'react';\n\nimport { type IImageMessageContentProps } from '../image-content';\nimport { safeJSONParse } from '../../../utils/safe-json-parse';\nimport { isImage } from '../../../utils/is-image';\nimport { SingleImageContentUI } from './single-image-content-ui';\n\nimport './index.less';\n\ntype IBlobImageMap = Record<string, string>;\n\n/**\n * There's a reason for this.\n * The front-end compute groupId is grouped by replyId (localMessageId before server level is not ack)\n * Therefore, after the server level ack, the key of the loop will change, causing the component to unmount - > mount (destroy and rebuild).\n * Therefore, it is necessary to use a more trick way to achieve the problem of picture display optimization\n */\nconst blobImageMap: IBlobImageMap = {};\nconst isBlob = (url: string) => url?.startsWith('blob:');\n\n/**\n * @Deprecated is no longer maintained, please migrate to SingleImageContentWithAutoSize component as soon as possible\n */\nexport const SingleImageContent: FC<IImageMessageContentProps> = props => {\n  const { message, onImageClick } = props;\n\n  // @Liushuoyan here type rout, introduced any\n  const { content_obj = safeJSONParse(message.content) } = message;\n\n  const localMessageId = message.extra_info.local_message_id;\n\n  // The picture sent by the current server level ori = thumb, so just use one for now.\n  const currentImageUrl = content_obj?.image_list?.at(0)?.image_ori?.url ?? '';\n\n  if (isBlob(currentImageUrl)) {\n    blobImageMap[localMessageId] = currentImageUrl;\n  }\n\n  const [imageUrl, setImageUrl] = useState<string>(\n    isBlob(currentImageUrl) ? currentImageUrl : blobImageMap[localMessageId],\n  );\n\n  useEffect(() => {\n    const preloadImage = new Image();\n    if (currentImageUrl.startsWith('http')) {\n      preloadImage.src = currentImageUrl;\n      preloadImage.onload = () => {\n        setImageUrl(currentImageUrl);\n      };\n    }\n\n    return () => {\n      preloadImage.onload = null;\n    };\n  }, [currentImageUrl]);\n\n  if (!isImage(content_obj)) {\n    return null;\n  }\n\n  return (\n    <SingleImageContentUI\n      onClick={originUrl => {\n        onImageClick?.({\n          message,\n          extra: { url: originUrl },\n        });\n      }}\n      thumbUrl={imageUrl}\n      originalUrl={imageUrl}\n    />\n  );\n};\n\nSingleImageContent.displayName = 'SingleImageContent';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type IFunctionCallContent,\n  type IMessage,\n} from '@coze-common/chat-uikit-shared';\n\nexport const isFunctionCall = (\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value: any,\n  message: IMessage,\n): value is IFunctionCallContent => value && message.type === 'function_call';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport { typeSafeJsonParse } from '@coze-common/chat-area-utils';\nimport { IconCozLoading } from '@coze-arch/coze-design/icons';\nimport { Typography } from '@coze-arch/coze-design';\n\nimport { isFunctionCall } from '../../../utils/is-function-call';\nimport { type ISimpleFunctionMessageContentProps } from './type';\n\nexport const SimpleFunctionContent: FC<\n  ISimpleFunctionMessageContentProps\n> = props => {\n  const { message, copywriting } = props;\n\n  const { content } = message;\n\n  const contentObj = typeSafeJsonParse(content, () => undefined);\n\n  if (!isFunctionCall(contentObj, message)) {\n    return null;\n  }\n\n  return (\n    <div\n      // chat-uikit-simple-function-content\n      className=\"coz-fg-hglt select-none flex items-center max-w-[230px] text-xxl leading-[26px]\"\n    >\n      <IconCozLoading\n        // chat-uikit-simple-function-content__prefix-icon\n        className=\"animate-spin\"\n      />\n      <div\n        // chat-uikit-simple-function-content__prefix-text\n        className=\"mr-[4px] ml-[8px]\"\n      >\n        {copywriting?.using ?? 'using'}\n      </div>\n      <Typography.Text\n        // chat-uikit-simple-function-content__plugin-name\n        className=\"coz-fg-hglt flex-1 text-xxl font-bold leading-[26px]\"\n        ellipsis={{\n          showTooltip: {\n            opts: {\n              content: contentObj.name,\n              style: { wordWrap: 'inherit' },\n            },\n          },\n        }}\n      >\n        {contentObj.name}\n      </Typography.Text>\n    </div>\n  );\n};\n\nSimpleFunctionContent.displayName = 'SimpleFunctionContent';\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport { type MessageMentionListFields } from '@coze-common/chat-core/src/message/types';\nimport {\n  type IBaseContentProps,\n  type GetBotInfo,\n} from '@coze-common/chat-uikit-shared';\n\nimport { ThinkingPlaceholder } from '../../chat';\nimport { isText } from '../../../utils/is-text';\n\nimport './index.less';\n\nexport type IPlainTextMessageContentProps = Omit<\n  IBaseContentProps,\n  'message'\n> & {\n  getBotInfo: GetBotInfo;\n  content: string;\n  mentioned: MessageMentionListFields['mention_list'][0] | undefined;\n  isContentLoading: boolean | undefined;\n};\n\nexport const PlainTextContent: FC<IPlainTextMessageContentProps> = props => {\n  const { content, isContentLoading } = props;\n\n  if (!isText(content)) {\n    return null;\n  }\n\n  return (\n    <div className=\"chat-uikit-plain-text-content\">\n      {isContentLoading ? (\n        <ThinkingPlaceholder className=\"!p-0 !h-20px\" />\n      ) : (\n        <span>{`${getMentionBotContent(props)}${content}`}</span>\n      )}\n    </div>\n  );\n};\n\nPlainTextContent.displayName = 'PlainTextContent';\n\nconst getMentionBotContent = ({\n  mentioned,\n  getBotInfo,\n}: IPlainTextMessageContentProps) => {\n  // The interface does not necessarily return mention_list\n  if (!mentioned) {\n    return '';\n  }\n  const name = getBotInfo(mentioned.id)?.nickname;\n  if (!name) {\n    return '';\n  }\n  return `@${name} `;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isObject } from 'lodash-es';\nimport {\n  ContentType,\n  type ImageModel,\n  type ImageMixItem,\n  type TextMixItem,\n  type FileModel,\n  type FileMixItem,\n} from '@coze-common/chat-core/message/types';\n\nexport const isMultimodalContentListLike = (\n  value: unknown,\n): value is { item_list: unknown[] } =>\n  isObject(value) && 'item_list' in value && Array.isArray(value.item_list);\n\nexport const isTextMixItem = (value: unknown): value is TextMixItem =>\n  isObject(value) &&\n  'type' in value &&\n  'text' in value &&\n  value.type === ContentType.Text;\n\nexport const isImageModel = (value: unknown): value is ImageModel =>\n  isObject(value) &&\n  'key' in value &&\n  'image_thumb' in value &&\n  'image_ori' in value;\n\nexport const isImageMixItem = (value: unknown): value is ImageMixItem =>\n  isObject(value) &&\n  'type' in value &&\n  'image' in value &&\n  isImageModel(value.image) &&\n  value.type === ContentType.Image;\n\nexport const isFileModel = (value: unknown): value is FileModel =>\n  isObject(value) &&\n  'file_key' in value &&\n  'file_name' in value &&\n  'file_type' in value &&\n  'file_size' in value &&\n  'file_url' in value;\n\nexport const isFileMixItem = (value: unknown): value is FileMixItem =>\n  isObject(value) &&\n  'type' in value &&\n  'file' in value &&\n  isFileModel(value.file) &&\n  value.type === ContentType.File;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { cva, type VariantProps } from 'class-variance-authority';\n\nconst messageBoxInnerVariants = cva(\n  [\n    'coz-fg-primary',\n    'w-fit',\n    'max-w-full',\n    'text-lg',\n    'font-normal',\n    'leading-[1.5]',\n    'rounded-normal',\n    'mb-4px',\n    'overflow-hidden',\n  ],\n  {\n    variants: {\n      color: {\n        primary: ['chat-uikit-message-box-bg-primary'],\n        whiteness: ['bg-[var(--coz-mg-card)]'],\n        grey: ['bg-[var(--coz-mg-primary)]'],\n      },\n      border: {\n        highlight: ['coz-stroke-hglt', 'border-[1px]', 'border-solid'],\n        primary: ['coz-stroke-primary', 'border-[1px]', 'border-solid'],\n      },\n      showBackground: {\n        true: [],\n      },\n      tight: {\n        true: ['p-0'],\n        false: ['py-12px', 'px-16px'],\n      },\n    },\n    compoundVariants: [\n      {\n        color: 'primary',\n        showBackground: true,\n        className: [\n          '!coz-bg-image-user',\n          '!coz-stroke-image-user',\n          '!coz-fg-white',\n        ],\n      },\n      {\n        color: 'whiteness',\n        showBackground: true,\n        className: [\n          '!coz-bg-image-bots',\n          '!coz-stroke-image-bots',\n          'border-[1px]',\n          'border-solid',\n        ],\n      },\n      {\n        color: 'grey',\n        showBackground: true,\n        className: [\n          '!coz-bg-image-bots',\n          '!coz-stroke-image-bots',\n          '!coz-fg-white',\n        ],\n      },\n    ],\n  },\n);\nexport type MessageBoxInnerVariantProps = Required<\n  VariantProps<typeof messageBoxInnerVariants>\n>;\nexport const typeSafeMessageBoxInnerVariants: (\n  props: MessageBoxInnerVariantProps,\n) => string = messageBoxInnerVariants;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ReactNode, type FC } from 'react';\n\nimport { type TextMixItem } from '@coze-common/chat-core';\nimport { type GetBotInfo, type IMessage } from '@coze-common/chat-uikit-shared';\n\nimport { PlainTextContent } from '../plain-text-content';\nimport { typeSafeMessageBoxInnerVariants } from '../../../variants/message-box-inner-variants';\nimport { isTextMixItem } from '../../../utils/multimodal';\n\nexport interface TextItemListProps {\n  textItemList: TextMixItem[];\n  renderTextContentAddonTop: ReactNode;\n  message: IMessage;\n  showBackground: boolean;\n  getBotInfo: GetBotInfo;\n  isContentLoading: boolean | undefined;\n}\n\nexport const TextItemList: FC<TextItemListProps> = ({\n  textItemList,\n  renderTextContentAddonTop,\n  message,\n  showBackground,\n  getBotInfo,\n  isContentLoading,\n}) => (\n  <>\n    {textItemList.map(item => {\n      if (isTextMixItem(item)) {\n        const TextContentAddonTop = renderTextContentAddonTop;\n        const isTextAndMentionedEmpty =\n          !item.text && !message.mention_list.at(0);\n\n        if (isTextAndMentionedEmpty) {\n          return null;\n        }\n\n        return (\n          /**\n           * TODO: Since the current design does not support one message to render multiple content, you need to borrow the text bubble background color of the sent message.\n           * Currently only users can send multimodal messages\n           */\n          <div\n            className={typeSafeMessageBoxInnerVariants({\n              color: 'primary',\n              border: null,\n              tight: false,\n              showBackground,\n            })}\n            style={{ width: 'fit-content' }}\n            key={item.text}\n          >\n            {TextContentAddonTop}\n            <PlainTextContent\n              isContentLoading={isContentLoading}\n              content={item.text}\n              mentioned={message.mention_list.at(0)}\n              getBotInfo={getBotInfo}\n            />\n          </div>\n        );\n      }\n    })}\n  </>\n);\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport classNames from 'classnames';\nimport { Row, Col } from '@coze-arch/coze-design';\nimport { Image } from '@coze-arch/bot-md-box-adapter/slots';\nimport {\n  type OnImageClickCallback,\n  type OnImageRenderCallback,\n} from '@coze-arch/bot-md-box-adapter';\n\nimport './index.less';\n\nexport enum CompressAlgorithm {\n  None = 0,\n  Snappy = 1,\n  Zstd = 2,\n}\nexport interface MsgContentData {\n  card_data?: string;\n  compress?: CompressAlgorithm;\n}\n\nexport interface ContentBoxEvents {\n  onError?: (err: unknown) => void;\n  onLoadStart?: () => void;\n  onLoadEnd?: () => void;\n  onLoad?: () => Promise<MsgContentData | undefined>;\n}\n\nexport interface BaseContentBoxProps {\n  /** Whether in the browser window, true: in, false: not, undefined: not detected */\n  inView?: boolean;\n  contentBoxEvents?: ContentBoxEvents;\n}\n\nexport interface ImageMessageContent {\n  key: string;\n  image_thumb: {\n    url: string;\n    width: number;\n    height: number;\n  };\n  image_ori: {\n    url: string;\n    width: number;\n    height: number;\n  };\n  request_id?: string;\n}\n\nexport interface ImageContent {\n  image_list: ImageMessageContent[];\n}\n\nexport interface ImageBoxProps extends BaseContentBoxProps {\n  data: ImageContent;\n  eventCallbacks?: {\n    onImageClick?: OnImageClickCallback;\n    onImageRender?: OnImageRenderCallback;\n  };\n}\nconst getImageBoxGutterAndSpan = (\n  length: number,\n): {\n  gutter: React.ComponentProps<typeof Row>['gutter'];\n  span: React.ComponentProps<typeof Col>['span'];\n} => {\n  if (length === 1) {\n    return { gutter: [1, 1], span: 24 };\n  }\n  return { gutter: [2, 2], span: 12 };\n};\n\nexport const ImageBox: FC<ImageBoxProps> = ({ data, eventCallbacks }) => {\n  const { onImageClick, onImageRender } = eventCallbacks || {};\n  const { image_list = [] } = data || {};\n\n  const layout = getImageBoxGutterAndSpan(image_list?.length);\n\n  return (\n    <div className={classNames('chat-uikit-image-box', 'rounded-normal')}>\n      <Row gutter={layout.gutter}>\n        {image_list.map(({ image_thumb }, index) => (\n          <Col span={layout.span} key={index}>\n            <Image\n              onImageClick={onImageClick}\n              onImageRender={onImageRender}\n              src={image_thumb.url}\n              imageOptions={{\n                squareContainer: true,\n              }}\n              className=\"object-cover\"\n            />\n          </Col>\n        ))}\n      </Row>\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ContentType, type Message } from '@coze-common/chat-core';\n\nexport const makeFakeImageMessage = ({\n  originMessage,\n  key,\n  url,\n  width,\n  height,\n}: {\n  originMessage: Message<ContentType>;\n  key: string;\n  url: string;\n  width: number;\n  height: number;\n}) => {\n  const contentObj = {\n    image_list: [\n      {\n        key,\n        image_ori: {\n          url,\n          width,\n          height,\n        },\n        image_thumb: {\n          url,\n          width,\n          height,\n        },\n      },\n    ],\n  };\n  const imageMessage: Message<ContentType.Image> = {\n    ...originMessage,\n    content_obj: contentObj,\n    content: JSON.stringify(contentObj),\n    content_type: ContentType.Image,\n  };\n\n  return imageMessage;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport { type ImageMixItem } from '@coze-common/chat-core';\nimport {\n  type IOnImageClickParams,\n  type IMessage,\n} from '@coze-common/chat-uikit-shared';\n\nimport { SingleImageContentWithAutoSize } from '../single-image-content/auto-size';\nimport { ImageBox } from '../image-content/image-box';\nimport { typeSafeMessageBoxInnerVariants } from '../../../variants/message-box-inner-variants';\nimport { makeFakeImageMessage } from '../../../utils/make-fake-image-message';\n\ninterface ImageItemListProps {\n  imageItemList: ImageMixItem[];\n  message: IMessage;\n  onImageClick?: (params: IOnImageClickParams) => void;\n}\n\nexport const ImageItemList: FC<ImageItemListProps> = ({\n  imageItemList,\n  message,\n  onImageClick,\n}) => {\n  const handleImageClick = (originUrl: string) => {\n    onImageClick?.({ message, extra: { url: originUrl } });\n  };\n\n  return (\n    <>\n      {Boolean(imageItemList.length) &&\n        (imageItemList.length === 1 ? (\n          <SingleImageContentWithAutoSize\n            key={imageItemList[0].image.image_thumb.url}\n            message={makeFakeImageMessage({\n              originMessage: message,\n              url: imageItemList[0].image.image_ori.url,\n              key: imageItemList[0].image.image_ori.url,\n              width: imageItemList[0].image.image_ori.width,\n              height: imageItemList[0].image.image_ori.height,\n            })}\n            onImageClick={onImageClick}\n            className=\"mb-[16px] rounded-[16px] overflow-hidden\"\n          />\n        ) : (\n          <div\n            // Here we borrow the style of messageBoxInner\n            className={typeSafeMessageBoxInnerVariants({\n              color: 'whiteness',\n              border: null,\n              tight: true,\n              showBackground: false,\n            })}\n            style={{ width: '240px' }}\n            key={imageItemList[0].image.image_thumb.url}\n          >\n            <ImageBox\n              data={{ image_list: imageItemList.map(item => item.image) }}\n              eventCallbacks={{\n                onImageClick: (_, eventData) =>\n                  handleImageClick(eventData.src ?? ''),\n              }}\n            />\n          </div>\n        ))}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport { Tooltip, type TooltipProps } from '@coze-arch/coze-design';\n// import { type TooltipProps } from '@douyinfe/semi-ui/lib/es/tooltip';\n\ntype IProps = {\n  children: JSX.Element;\n  hideToolTip?: boolean;\n} & TooltipProps;\n\nexport const UIKitTooltip: FC<IProps> = props => {\n  const {\n    content,\n    children,\n    hideToolTip,\n    theme = 'dark',\n    ...restProps\n  } = props;\n  return content ? (\n    <Tooltip\n      trigger={hideToolTip ? 'custom' : 'hover'}\n      visible={hideToolTip ? false : undefined}\n      content={content}\n      theme={theme}\n      {...restProps}\n      style={{ marginBottom: '8px' }}\n    >\n      {children}\n    </Tooltip>\n  ) : (\n    <>{children}</>\n  );\n};\n\nUIKitTooltip.displayName = 'UIKitTooltip';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const getFileExtensionAndName = (fileName: string) => {\n  const dotIndex = fileName.lastIndexOf('.');\n  if (dotIndex < 0) {\n    return {\n      nameWithoutExtension: fileName,\n      extension: '',\n    };\n  }\n  /**\n   * eg: .docx\n   */\n  const extension = fileName.slice(dotIndex);\n  const nameWithoutExtension = fileName.slice(0, dotIndex);\n  return {\n    extension,\n    nameWithoutExtension,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const convertBytes = (bytes: number, decimals = 2) => {\n  if (!bytes) {\n    return '0 Byte';\n  }\n\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  const digit = parseFloat((bytes / Math.pow(k, i)).toFixed(dm));\n\n  return `${digit} ${sizes[i]}`;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { cva, type VariantProps } from 'class-variance-authority';\n\nconst fileCardVariants = cva(\n  [\n    'select-none',\n    'relative',\n    'overflow-hidden',\n    'flex',\n    'flex-row',\n    'items-center',\n    'box-border',\n    'p-12px',\n    'border-[1px]',\n    'border-solid',\n    'rounded-normal',\n    'coz-mg-card',\n    'w-full',\n  ],\n  {\n    variants: {\n      layout: {\n        pc: ['min-w-[282px]', 'max-w-[320px]'],\n        mobile: ['w-full'],\n      },\n      isError: {\n        true: ['coz-stroke-hglt-red'],\n        false: ['coz-stroke-primary'],\n      },\n      showBackground: {\n        true: ['!coz-bg-image-bots', '!coz-stroke-image-bots'],\n        false: [],\n      },\n    },\n    compoundVariants: [\n      {\n        showBackground: true,\n        isError: false,\n        className: [],\n      },\n    ],\n  },\n);\n\nconst fileCardNameVariants = cva(['text-lg', 'font-normal', 'leading-[20px]'], {\n  variants: {\n    layout: {\n      pc: ['w-[180px]'],\n      mobile: ['w-full', 'max-w-[calc(100vw-170px)]'],\n    },\n    isCanceled: {\n      true: ['coz-fg-dim'],\n      false: ['coz-fg-primary'],\n    },\n  },\n});\n\nexport const typeSafeFileCardVariants: (\n  props: Required<VariantProps<typeof fileCardVariants>>,\n) => string = fileCardVariants;\n\nexport const typeSafeFileCardNameVariants: (\n  props: Required<VariantProps<typeof fileCardNameVariants>>,\n) => string = fileCardNameVariants;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FileTypeEnum } from '@coze-common/chat-core/shared/const';\n\nimport EXCELSuccess from '../../../../../assets/file/xlsx-success.svg';\nimport EXCELFail from '../../../../../assets/file/xlsx-fail.svg';\nimport VIDEOSuccess from '../../../../../assets/file/video-success.svg';\nimport VIDEOFail from '../../../../../assets/file/video-fail.svg';\nimport TXTSuccess from '../../../../../assets/file/txt-success.svg';\nimport TXTFail from '../../../../../assets/file/txt-fail.svg';\nimport PPTSuccess from '../../../../../assets/file/ppt-success.svg';\nimport PPTFail from '../../../../../assets/file/ppt-fail.svg';\nimport PDFSuccess from '../../../../../assets/file/pdf-success.svg';\nimport PDFFail from '../../../../../assets/file/pdf-fail.svg';\nimport DOCXSuccess from '../../../../../assets/file/docx-success.svg';\nimport DOCXFail from '../../../../../assets/file/docx-fail.svg';\nimport DefaultUnknownSuccess from '../../../../../assets/file/default-unknown-success.svg';\nimport DefaultUnknownFail from '../../../../../assets/file/default-unknown-fail.svg';\nimport CSVSuccess from '../../../../../assets/file/csv-success.svg';\nimport CSVFail from '../../../../../assets/file/csv-fail.svg';\nimport CODESuccess from '../../../../../assets/file/code-success.svg';\nimport CODEFail from '../../../../../assets/file/code-fail.svg';\nimport AUDIOSuccess from '../../../../../assets/file/audio-success.svg';\nimport AUDIOFail from '../../../../../assets/file/audio-fail.svg';\nimport ARCHIVESuccess from '../../../../../assets/file/archive-success.svg';\nimport ARCHIVEFail from '../../../../../assets/file/archive-fail.svg';\n\nexport const SUCCESS_FILE_ICON_MAP = {\n  [FileTypeEnum.CSV]: CSVSuccess,\n  [FileTypeEnum.DOCX]: DOCXSuccess,\n  [FileTypeEnum.EXCEL]: EXCELSuccess,\n  [FileTypeEnum.PDF]: PDFSuccess,\n  [FileTypeEnum.AUDIO]: AUDIOSuccess,\n  [FileTypeEnum.VIDEO]: VIDEOSuccess,\n  [FileTypeEnum.ARCHIVE]: ARCHIVESuccess,\n  [FileTypeEnum.CODE]: CODESuccess,\n  [FileTypeEnum.TXT]: TXTSuccess,\n  [FileTypeEnum.PPT]: PPTSuccess,\n  [FileTypeEnum.DEFAULT_UNKNOWN]: DefaultUnknownSuccess,\n};\n\nexport const FAIL_FILE_ICON_MAP = {\n  [FileTypeEnum.CSV]: CSVFail,\n  [FileTypeEnum.DOCX]: DOCXFail,\n  [FileTypeEnum.EXCEL]: EXCELFail,\n  [FileTypeEnum.PDF]: PDFFail,\n  [FileTypeEnum.AUDIO]: AUDIOFail,\n  [FileTypeEnum.VIDEO]: VIDEOFail,\n  [FileTypeEnum.ARCHIVE]: ARCHIVEFail,\n  [FileTypeEnum.CODE]: CODEFail,\n  [FileTypeEnum.TXT]: TXTFail,\n  [FileTypeEnum.PPT]: PPTFail,\n  [FileTypeEnum.DEFAULT_UNKNOWN]: DefaultUnknownFail,\n};\n\nexport const FILE_CARD_WIDTH = 280;\nexport const PERCENT_DENOMINATOR = 100;\n","\n      import API from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./file-card.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./file-card.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport classNames from 'classnames';\nimport {\n  IconCozCopy,\n  IconCozCross,\n  IconCozRefresh,\n} from '@coze-arch/coze-design/icons';\nimport { IconButton, Typography } from '@coze-arch/coze-design';\nimport { Layout } from '@coze-common/chat-uikit-shared';\n\nimport { UIKitTooltip } from '../../../../common/tooltips';\nimport { getFileExtensionAndName } from '../../../../../utils/file-name';\nimport { convertBytes } from '../../../../../utils/convert-bytes';\nimport {\n  typeSafeFileCardNameVariants,\n  typeSafeFileCardVariants,\n} from './variants';\nimport { type IFileCardProps } from './type';\nimport {\n  FAIL_FILE_ICON_MAP,\n  FILE_CARD_WIDTH,\n  PERCENT_DENOMINATOR,\n  SUCCESS_FILE_ICON_MAP,\n} from './constants';\n\nimport './file-card.less';\n\n// eslint-disable-next-line @coze-arch/max-line-per-function\nconst FileCard: FC<IFileCardProps> = props => {\n  const {\n    file,\n    attributeKeys,\n    tooltipsCopywriting,\n    readonly,\n    onCancel,\n    onCopy,\n    onRetry,\n    className,\n    layout,\n    showBackground,\n  } = props;\n\n  const { statusKey, statusEnum, percentKey } = attributeKeys;\n\n  const percent = file[percentKey];\n\n  const fileIconMap = [statusEnum.cancelEnum, statusEnum.failEnum].includes(\n    file[statusKey],\n  )\n    ? FAIL_FILE_ICON_MAP\n    : SUCCESS_FILE_ICON_MAP;\n\n  const buttonsVisible = !readonly;\n  const { extension, nameWithoutExtension } = getFileExtensionAndName(\n    file.file_name,\n  );\n\n  const isCanceled = file[statusKey] === statusEnum.cancelEnum;\n\n  return (\n    <div\n      // className={classNames(className, 'chat-uikit-file-card', {\n      //   'chat-uikit-file-card--error': file[statusKey] === statusEnum.failEnum,\n      //   'chat-uikit-file-card-pc': layout === Layout.PC,\n      //   'chat-uikit-file-card-mobile': layout === Layout.MOBILE,\n      //   '!coz-bg-image-bots !coz-stroke-image-bots':\n      //     showBackground && file[statusKey] !== statusEnum.failEnum,\n      // })}\n      className={classNames(\n        typeSafeFileCardVariants({\n          isError: file[statusKey] === statusEnum.failEnum,\n          layout: layout === Layout.PC ? 'pc' : 'mobile',\n          showBackground,\n        }),\n        className,\n      )}\n    >\n      <img\n        src={fileIconMap[file.file_type]}\n        // chat-uikit-file-card__icon\n        className=\"h-[32px] w-[32px]\"\n      ></img>\n      <div\n        // chat-uikit-file-card__info\n        className=\"flex flex-1 flex-col ml-8px overflow-hidden\"\n      >\n        <Typography.Text\n          ellipsis={{\n            showTooltip:\n              layout === Layout.MOBILE\n                ? false\n                : {\n                    opts: {\n                      content: file.file_name,\n                      style: { wordWrap: 'break-word' },\n                    },\n                  },\n            suffix: extension,\n          }}\n          // chat-uikit-file-card__info__name\n          // chat-uikit-file-card__info__name_pc\n          // chat-uikit-file-card__info__name_mobile\n          className={typeSafeFileCardNameVariants({\n            isCanceled,\n            layout: layout === Layout.PC ? 'pc' : 'mobile',\n          })}\n        >\n          {nameWithoutExtension}\n        </Typography.Text>\n        <span\n          // chat-uikit-file-card__info__size\n          className={classNames(\n            'text-base font-normal leading-[16px]',\n            isCanceled ? 'coz-fg-dim' : 'coz-fg-secondary',\n          )}\n        >\n          {convertBytes(file.file_size)}\n        </span>\n      </div>\n      {buttonsVisible ? (\n        <>\n          <div\n            // chat-uikit-file-card__buttons\n            className=\"ml-8px\"\n          >\n            {file[statusKey] === statusEnum.uploadingEnum && (\n              <UIKitTooltip\n                theme=\"light\"\n                position=\"top\"\n                content={tooltipsCopywriting?.cancel}\n                hideToolTip={layout === Layout.MOBILE}\n              >\n                <IconButton\n                  // chat-uikit-file-card__buttons__button\n                  icon={\n                    <IconCozCross // chat-uikit-file-card__buttons__icon\n                    />\n                  }\n                  size=\"small\"\n                  color=\"secondary\"\n                  onClick={onCancel}\n                />\n              </UIKitTooltip>\n            )}\n            {[statusEnum.cancelEnum, statusEnum.failEnum].includes(\n              file[statusKey],\n            ) && (\n              <UIKitTooltip\n                theme=\"light\"\n                position=\"top\"\n                content={tooltipsCopywriting?.retry}\n                hideToolTip={layout === Layout.MOBILE}\n              >\n                <IconButton\n                  // chat-uikit-file-card__buttons__button\n\n                  icon={\n                    <IconCozRefresh // chat-uikit-file-card__buttons__icon\n                    />\n                  }\n                  size=\"small\"\n                  color=\"secondary\"\n                  onClick={onRetry}\n                />\n              </UIKitTooltip>\n            )}\n            {file[statusKey] === statusEnum.successEnum && (\n              <UIKitTooltip\n                theme=\"light\"\n                position=\"top\"\n                content={tooltipsCopywriting?.copy}\n                hideToolTip={layout === Layout.MOBILE}\n              >\n                <IconButton\n                  // chat-uikit-file-card__buttons__button\n\n                  icon={\n                    <IconCozCopy // chat-uikit-file-card__buttons__icon\n                    />\n                  }\n                  size=\"small\"\n                  color=\"secondary\"\n                  onClick={onCopy}\n                />\n              </UIKitTooltip>\n            )}\n          </div>\n          {file[statusKey] === statusEnum.uploadingEnum && (\n            <div\n              // chat-uikit-file-card__progress-wrap\n              className={classNames(\n                // TODO: ui supplement progress bar color\n                'coz-fg-hglt-dim absolute top-0 left-0 w-[280px] h-[72px]',\n                'chat-uikit-file-card-progress-animation',\n              )}\n              style={{\n                width: `${FILE_CARD_WIDTH * (percent / PERCENT_DENOMINATOR)}px`,\n              }}\n            />\n          )}\n        </>\n      ) : null}\n    </div>\n  );\n};\n\nFileCard.displayName = 'FileCard';\n\nexport default FileCard;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport { type FileMixItem } from '@coze-common/chat-core';\nimport {\n  type IFileAttributeKeys,\n  type IOnCopyUploadParams,\n  type IOnRetryUploadParams,\n  type IOnCancelUploadParams,\n  type IMessage,\n  type IFileCopywritingConfig,\n  type Layout,\n} from '@coze-common/chat-uikit-shared';\n\nimport FileCard from '../file-content/components/FileCard';\nimport { isFileMixItem } from '../../../utils/multimodal';\n\nexport interface FileItemListProps {\n  message: IMessage;\n  fileItemList: FileMixItem[];\n  fileAttributeKeys?: IFileAttributeKeys;\n  fileCopywriting?: IFileCopywritingConfig;\n  readonly?: boolean;\n  layout: Layout;\n  showBackground: boolean;\n  onCancel?: (params: IOnCancelUploadParams) => void;\n  onCopy?: (params: IOnCopyUploadParams) => void;\n  onRetry?: (params: IOnRetryUploadParams) => void;\n}\n\nexport const FileItemList: FC<FileItemListProps> = ({\n  fileItemList,\n  fileAttributeKeys,\n  fileCopywriting,\n  readonly,\n  onRetry,\n  onCancel,\n  onCopy,\n  message,\n  layout,\n  showBackground,\n}) => {\n  /**\n   * Handle the event of clicking Cancel Upload\n   */\n  const handleCancel = () => {\n    onCancel?.({ message, extra: {} });\n  };\n\n  /**\n   * Handling events that retry uploads\n   */\n  const handleRetry = () => {\n    onRetry?.({ message, extra: {} });\n  };\n\n  /**\n   * Handling events that copy file addresses\n   */\n  const handleCopy = () => {\n    onCopy?.({ message, extra: {} });\n  };\n\n  return (\n    <>\n      {fileItemList.map(item => {\n        if (isFileMixItem(item) && fileAttributeKeys) {\n          return (\n            <FileCard\n              className=\"chat-uikit-multi-modal-file-image-content select-none\"\n              key={item.file.file_key}\n              file={item.file}\n              attributeKeys={fileAttributeKeys}\n              tooltipsCopywriting={fileCopywriting?.tooltips}\n              readonly={readonly}\n              onCancel={handleCancel}\n              onCopy={handleCopy}\n              onRetry={handleRetry}\n              layout={layout}\n              showBackground={showBackground}\n            />\n          );\n        }\n        return null;\n      })}\n    </>\n  );\n};\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ReactNode } from 'react';\n\nimport {\n  type FileMixItem,\n  type TextMixItem,\n  type ImageMixItem,\n} from '@coze-common/chat-core';\nimport { type GetBotInfo } from '@coze-common/chat-uikit-shared';\n\nimport { type IImageMessageContentProps } from '../image-content';\nimport { type IProps as IFileContentProps } from '../file-content';\nimport {\n  isFileMixItem,\n  isImageMixItem,\n  isMultimodalContentListLike,\n  isTextMixItem,\n} from '../../../utils/multimodal';\nimport { TextItemList } from './text-item-list';\nimport { ImageItemList } from './image-item-list';\nimport { FileItemList } from './file-item-list';\n\nimport './index.less';\n\nexport type MultimodalContentProps = IImageMessageContentProps &\n  IFileContentProps & {\n    getBotInfo: GetBotInfo;\n    renderTextContentAddonTop?: ReactNode;\n    isContentLoading: boolean | undefined;\n  };\n\n/**\n * This component is not simple and should not actually be called Content.\n */\n\n// TODO: @liushuoyan provides the switch~~\nexport const MultimodalContent: React.FC<MultimodalContentProps> = ({\n  renderTextContentAddonTop,\n  message,\n  getBotInfo,\n  fileAttributeKeys,\n  copywriting: fileCopywriting,\n  onCancel,\n  onCopy,\n  onRetry,\n  readonly,\n  onImageClick,\n  layout,\n  showBackground,\n  isContentLoading,\n}) => {\n  const { content_obj } = message;\n  if (!isMultimodalContentListLike(content_obj)) {\n    // TODO: Broke news should need to add a unified bottom line and report\n    return null;\n  }\n\n  const fileItemList = content_obj.item_list.filter(\n    (item): item is FileMixItem => isFileMixItem(item),\n  );\n\n  const textItemList = content_obj.item_list.filter(\n    (item): item is TextMixItem => isTextMixItem(item),\n  );\n\n  const imageItemList = content_obj.item_list.filter(\n    (item): item is ImageMixItem => isImageMixItem(item),\n  );\n\n  return (\n    <>\n      <FileItemList\n        fileItemList={fileItemList}\n        fileAttributeKeys={fileAttributeKeys}\n        fileCopywriting={fileCopywriting}\n        readonly={readonly}\n        onRetry={onRetry}\n        onCancel={onCancel}\n        onCopy={onCopy}\n        message={message}\n        layout={layout}\n        showBackground={showBackground}\n      />\n\n      <ImageItemList\n        imageItemList={imageItemList}\n        message={message}\n        onImageClick={onImageClick}\n      />\n\n      <TextItemList\n        textItemList={textItemList}\n        renderTextContentAddonTop={renderTextContentAddonTop}\n        message={message}\n        showBackground={showBackground}\n        getBotInfo={getBotInfo}\n        isContentLoading={isContentLoading}\n      />\n    </>\n  );\n};\n\nMultimodalContent.displayName = 'MultimodalContent';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ErrorBoundary } from 'react-error-boundary';\nimport { type FC } from 'react';\n\nimport { Image } from '@coze-arch/coze-design';\nimport {\n  type IOnImageClickParams,\n  type IBaseContentProps,\n} from '@coze-common/chat-uikit-shared';\n\nimport { safeJSONParse } from '../../../utils/safe-json-parse';\nimport { isImage } from '../../../utils/is-image';\nimport defaultImage from '../../../assets/image-empty.png';\nimport { ImageBox } from './image-box';\n\nimport './index.less';\n\nexport type IImageMessageContentProps = IBaseContentProps & {\n  onImageClick?: (params: IOnImageClickParams) => void;\n};\n\nexport const ImageContentImpl: FC<IImageMessageContentProps> = props => {\n  const { message, onImageClick } = props;\n\n  const { content_obj = safeJSONParse(message.content) } = message;\n\n  if (!isImage(content_obj)) {\n    return null;\n  }\n\n  return (\n    <div className=\"chat-uikit-image-content\">\n      <ImageBox\n        data={{\n          image_list: content_obj?.image_list ?? [],\n        }}\n        eventCallbacks={{\n          onImageClick: (e, eventData) => {\n            onImageClick?.({\n              message,\n              extra: { url: eventData.src as string },\n            });\n          },\n        }}\n      />\n    </div>\n  );\n};\n\nImageContentImpl.displayName = 'ImageContentImpl';\n\nexport const ImageContent: FC<IImageMessageContentProps> = props => (\n  <ErrorBoundary\n    fallback={\n      <div className=\"chat-uikit-image-error-boundary\">\n        <Image src={defaultImage} preview={false} />\n      </div>\n    }\n  >\n    <ImageContentImpl {...props} />\n  </ErrorBoundary>\n);\n\nImageContent.displayName = 'ImageContent';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type IFileContent } from '@coze-common/chat-uikit-shared';\n\nexport const isFile = (\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  value: any,\n): value is IFileContent => value && 'file_list' in value;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport classNames from 'classnames';\nimport {\n  type IFileAttributeKeys,\n  type IOnRetryUploadParams,\n  type IOnCancelUploadParams,\n  type IOnCopyUploadParams,\n  type IFileCopywritingConfig,\n  type IBaseContentProps,\n  type Layout,\n} from '@coze-common/chat-uikit-shared';\n\nimport { safeJSONParse } from '../../../utils/safe-json-parse';\nimport { isFile } from '../../../utils/is-file';\nimport FileCard from './components/FileCard';\n\nexport type IProps = IBaseContentProps & {\n  copywriting?: IFileCopywritingConfig;\n  fileAttributeKeys?: IFileAttributeKeys;\n  onCancel?: (params: IOnCancelUploadParams) => void;\n  onRetry?: (params: IOnRetryUploadParams) => void;\n  onCopy?: (params: IOnCopyUploadParams) => void;\n  layout: Layout;\n  showBackground: boolean;\n};\n\nexport const FileContent: FC<IProps> = props => {\n  const {\n    message,\n    copywriting,\n    fileAttributeKeys,\n    readonly,\n    onCancel,\n    onCopy,\n    onRetry,\n    layout,\n    showBackground,\n  } = props;\n\n  const { content_obj = safeJSONParse(message.content) } = message;\n\n  /**\n   * Determine whether it is a card of file type, or refuse to use the card without configuring the file attribute config\n   */\n  if (\n    !isFile(content_obj) ||\n    !fileAttributeKeys ||\n    content_obj.file_list.length <= 0\n  ) {\n    return null;\n  }\n\n  /**\n   * Handle the event of clicking Cancel Upload\n   */\n  const handleCancel = () => {\n    onCancel?.({ message, extra: {} });\n  };\n\n  /**\n   * Handling events that retry uploads\n   */\n  const handleRetry = () => {\n    onRetry?.({ message, extra: {} });\n  };\n\n  /**\n   * Handling events that copy file addresses\n   */\n  const handleCopy = (fileIndex?: number) => {\n    onCopy?.({ message, extra: { fileIndex } });\n  };\n\n  return (\n    <>\n      {content_obj.file_list.map((file, index) => (\n        <FileCard\n          file={file}\n          attributeKeys={fileAttributeKeys}\n          tooltipsCopywriting={copywriting?.tooltips}\n          readonly={readonly}\n          onCancel={handleCancel}\n          onCopy={() => handleCopy(index)}\n          onRetry={handleRetry}\n          layout={layout}\n          showBackground={showBackground}\n          className={classNames({\n            'mb-[8px]': index < content_obj.file_list.length - 1,\n          })}\n        />\n      ))}\n    </>\n  );\n};\n\nFileContent.displayName = 'FileContent';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const defaultEnable = (value?: boolean) => {\n  if (typeof value === 'undefined') {\n    return true;\n  }\n  return value;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type MessageType } from '@coze-common/chat-core';\n\nexport const MESSAGE_TYPE_VALID_IN_TEXT_LIST: Omit<MessageType[], ''> = [\n  'answer',\n  'question',\n  'ack',\n  'task_manual_trigger',\n];\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ReactNode, type FC } from 'react';\n\nimport {\n  type IEventCallbacks,\n  ContentBoxType,\n  type MdBoxProps,\n  type GetBotInfo,\n  type Layout,\n  type IContentConfigs,\n  type IMessage,\n} from '@coze-common/chat-uikit-shared';\nimport { ContentType } from '@coze-common/chat-core';\n\nimport { TextContent } from '../../contents/text-content';\nimport { SingleImageContentWithAutoSize } from '../../contents/single-image-content/auto-size';\nimport { SingleImageContent } from '../../contents/single-image-content';\nimport { SimpleFunctionContent } from '../../contents/simple-function-content';\nimport { PlainTextContent } from '../../contents/plain-text-content';\nimport { MultimodalContent } from '../../contents/multimodal-content';\nimport { ImageContent } from '../../contents/image-content';\nimport { FileContent } from '../../contents/file-content';\nimport { isImage } from '../../../utils/is-image';\nimport { defaultEnable } from '../../../utils/default-enable';\nimport { MESSAGE_TYPE_VALID_IN_TEXT_LIST } from '../../../constants/content-box';\n\nexport interface EnhancedContentConfig {\n  rule: (params: {\n    message: IMessage;\n    contentType: ContentType;\n    contentConfigs: IContentConfigs | undefined;\n  }) => boolean;\n  render: (params: {\n    message: IMessage;\n    eventCallbacks: IEventCallbacks | undefined;\n    contentConfigs: IContentConfigs | undefined;\n    options: {\n      isCardDisabled?: boolean;\n      isContentLoading?: boolean;\n      showBackground: boolean;\n      readonly?: boolean;\n    };\n  }) => ReactNode;\n}\n\nexport interface IContentBoxProps {\n  /**\n   * Message body content of the Core SDK\n   */\n  message: IMessage;\n  /**\n   * event callback object\n   */\n  eventCallbacks?: IEventCallbacks;\n  /**\n   * Content of the card configuration\n   */\n  contentConfigs?: IContentConfigs;\n  /**\n   * Is it read-only?\n   */\n  readonly?: boolean;\n  getBotInfo: GetBotInfo;\n  layout: Layout;\n  /**\n   * In mix mode, slot the text card\n   */\n  multimodalTextContentAddonTop?: ReactNode;\n  showBackground: boolean;\n  /**\n   * Enable the ability to automatically adapt pictures\n   */\n  enableAutoSizeImage?: boolean;\n\n  /**\n   * mdBox configuration\n   */\n  mdBoxProps?: MdBoxProps;\n  /**\n   * Is the card status disabled?\n   */\n  isCardDisabled?: boolean;\n  isContentLoading?: boolean;\n  enhancedContentConfigList?: EnhancedContentConfig[];\n}\n\n// eslint-disable-next-line complexity, @coze-arch/max-line-per-function, @coze-arch/max-line-per-function\nexport const ContentBox: FC<IContentBoxProps> = props => {\n  const {\n    message,\n    contentConfigs,\n    readonly,\n    getBotInfo,\n    layout,\n    showBackground,\n    enableAutoSizeImage,\n    isCardDisabled,\n    isContentLoading,\n    enhancedContentConfigList,\n  } = props;\n  /**\n   * Content Enable Configuration Start\n   */\n  const isTextEnable = defaultEnable(\n    contentConfigs?.[ContentBoxType.TEXT]?.enable,\n  );\n  const isImageEnable = defaultEnable(\n    contentConfigs?.[ContentBoxType.IMAGE]?.enable,\n  );\n  const isFileEnable = contentConfigs?.[ContentBoxType.FILE]?.enable;\n\n  const isSimpleFunctionEnable =\n    contentConfigs?.[ContentBoxType.SIMPLE_FUNCTION]?.enable;\n  /**\n   * Content Enable Configuration End\n   */\n\n  const enhancedContentConfig = enhancedContentConfigList?.find(config =>\n    config.rule({ contentType: message.content_type, contentConfigs, message }),\n  );\n\n  if (enhancedContentConfig) {\n    return enhancedContentConfig.render({\n      message,\n      eventCallbacks: props.eventCallbacks,\n      contentConfigs,\n      options: { isCardDisabled, isContentLoading, showBackground, readonly },\n    });\n  }\n  /**\n   * Handling of text types\n   * There are currently two cases here, the first is message.type = 'follow_up' means suggestion, the second is plain text message\n   */\n  if (message.content_type === ContentType.Text) {\n    const { eventCallbacks, mdBoxProps } = props;\n    const { onImageClick, onLinkClick } = eventCallbacks ?? {};\n    if (\n      MESSAGE_TYPE_VALID_IN_TEXT_LIST.includes(message.type) &&\n      isTextEnable\n    ) {\n      return message.role === 'user' ? (\n        <PlainTextContent\n          isContentLoading={isContentLoading}\n          content={message.content}\n          getBotInfo={getBotInfo}\n          mentioned={message.mention_list.at(0)}\n        />\n      ) : (\n        <TextContent\n          message={message}\n          readonly={readonly}\n          onImageClick={onImageClick}\n          onLinkClick={onLinkClick}\n          enableAutoSizeImage={enableAutoSizeImage}\n          mdBoxProps={mdBoxProps}\n        />\n      );\n    }\n  }\n\n  /**\n   * FIle type content\n   */\n  if (message.content_type === ContentType.File && isFileEnable) {\n    const { copywriting, fileAttributeKeys } =\n      contentConfigs[ContentBoxType.FILE] ?? {};\n    const { eventCallbacks } = props;\n    const { onCancelUpload, onCopyUpload, onRetryUpload } =\n      eventCallbacks ?? {};\n    return (\n      <FileContent\n        message={message}\n        copywriting={copywriting}\n        fileAttributeKeys={fileAttributeKeys}\n        readonly={readonly}\n        onCancel={onCancelUpload}\n        onCopy={onCopyUpload}\n        onRetry={onRetryUpload}\n        layout={layout}\n        showBackground={showBackground}\n      />\n    );\n  }\n\n  /**\n   * Image type content\n   */\n  if (message.content_type === ContentType.Image && isImageEnable) {\n    const { eventCallbacks } = props;\n    const { onImageClick } = eventCallbacks ?? {};\n\n    if (!isImage(message.content_obj)) {\n      return null;\n    }\n\n    const UsedSingleImageContent = enableAutoSizeImage\n      ? SingleImageContentWithAutoSize\n      : SingleImageContent;\n\n    const isMultipleImage = message.content_obj.image_list.length > 1;\n\n    if (isMultipleImage) {\n      return <ImageContent message={message} onImageClick={onImageClick} />;\n    }\n\n    return (\n      <UsedSingleImageContent message={message} onImageClick={onImageClick} />\n    );\n  }\n\n  /**\n   * Function type\n   */\n  if (message.type === 'function_call' && isSimpleFunctionEnable) {\n    const { copywriting } =\n      contentConfigs[ContentBoxType.SIMPLE_FUNCTION] ?? {};\n\n    return (\n      <SimpleFunctionContent message={message} copywriting={copywriting} />\n    );\n  }\n\n  /**\n   * Multimodal messages with simultaneous text transmission\n   */\n  if (\n    message.content_type === ContentType.Mix &&\n    isFileEnable &&\n    isImageEnable &&\n    isTextEnable\n  ) {\n    const { copywriting, fileAttributeKeys } =\n      contentConfigs[ContentBoxType.FILE] ?? {};\n    const { eventCallbacks } = props;\n    const { onCancelUpload, onCopyUpload, onRetryUpload, onImageClick } =\n      eventCallbacks ?? {};\n    return (\n      <MultimodalContent\n        isContentLoading={isContentLoading}\n        renderTextContentAddonTop={props.multimodalTextContentAddonTop}\n        message={message}\n        getBotInfo={getBotInfo}\n        fileAttributeKeys={fileAttributeKeys}\n        copywriting={copywriting}\n        readonly={readonly}\n        onCancel={onCancelUpload}\n        onCopy={onCopyUpload}\n        onRetry={onRetryUpload}\n        onImageClick={onImageClick}\n        layout={layout}\n        showBackground={showBackground}\n      />\n    );\n  }\n\n  return <span>Not Support {message.content_type} Content</span>;\n};\n\nContentBox.displayName = 'UIKitContentBox';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport cs from 'classnames';\n\nimport { UIKitTooltip } from '../tooltips';\n\nexport interface UserLabelInfo {\n  label_name?: string;\n  icon_url?: string;\n  jump_link?: string;\n}\n\nexport const UserLabel: FC<{\n  userLabel?: UserLabelInfo | null;\n}> = ({ userLabel }) => {\n  if (!userLabel?.icon_url || !userLabel?.label_name) {\n    return null;\n  }\n\n  return (\n    <UIKitTooltip content={userLabel.label_name} theme=\"light\">\n      <div\n        className={cs(\n          'flex-[0_0_auto] flex items-center h-[20px] ml-[4px]',\n          userLabel?.jump_link && 'cursor-pointer',\n        )}\n        onClick={event => {\n          if (userLabel?.jump_link) {\n            event?.preventDefault();\n            event?.stopPropagation();\n            window.open(userLabel?.jump_link, '_blank');\n          }\n        }}\n      >\n        <img src={userLabel.icon_url} width={14} height={14} />\n      </div>\n    </UIKitTooltip>\n  );\n};\n\n// TODO: Added show background variant\nexport const UserName: FC<{\n  userUniqueName?: string;\n  className?: string;\n  showBackground: boolean | undefined;\n}> = ({ userUniqueName, className, showBackground }) => {\n  if (!userUniqueName) {\n    return null;\n  }\n\n  return (\n    <div\n      className={cs(\n        'coz-fg-secondary text-[12px] leading-[16px] font-normal ml-[4px]',\n        showBackground && '!coz-fg-images-secondary',\n        className,\n      )}\n    >\n      @{userUniqueName}\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport dayjs from 'dayjs';\n\nexport const formatMessageBoxContentTime = (contentTime: number): string => {\n  if (contentTime < 1) {\n    return '';\n  }\n  // Day: hh: mm; across the sky: mm-dd hh: mm; New Year's Eve: yyyy-mm-dd hh: mm\n  const now = Date.now();\n  const today = dayjs(now);\n  const messageDay = dayjs(contentTime);\n  if (today.year() !== messageDay.year()) {\n    return messageDay.format('YYYY-MM-DD HH:mm');\n  }\n  if (\n    today.month() !== messageDay.month() ||\n    today.date() !== messageDay.date()\n  ) {\n    return messageDay.format('MM-DD HH:mm');\n  }\n  return messageDay.format('HH:mm');\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from 'classnames';\n\nimport { formatMessageBoxContentTime } from '../../../utils/date-time';\n\nexport const MessageContentTime = ({\n  contentTime,\n  className,\n  showBackground,\n}: {\n  contentTime?: number;\n  className?: string;\n  showBackground: boolean;\n}) => {\n  if (!contentTime) {\n    return null;\n  }\n  return (\n    <span\n      className={classNames(\n        'text-[12px] leading-[16px] ml-[8px] font-normal',\n        'chat-uikit-message-box-container__message-content-time',\n        {\n          'coz-fg-images-secondary': showBackground,\n          'coz-fg-secondary': !showBackground,\n        },\n        className,\n      )}\n    >\n      {formatMessageBoxContentTime(contentTime)}\n    </span>\n  );\n};\n\nMessageContentTime.displayName = 'MessageContentTime';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, type RefObject } from 'react';\n\nimport { useDebounceFn } from 'ahooks';\nimport {\n  UIKitEvents,\n  useUiKitEventCenter,\n} from '@coze-common/chat-uikit-shared';\n\nexport const useObserveCardContainer = ({\n  messageId,\n  cardContainerRef,\n  onResize,\n}: {\n  messageId: string | null;\n  cardContainerRef: RefObject<HTMLDivElement>;\n  onResize: () => void;\n}) => {\n  const eventCenter = useUiKitEventCenter();\n\n  /** If there is no change within 30s, the observer will be automatically cleared. */\n  const debouncedDisconnect = useDebounceFn(\n    (getResizeObserver: () => ResizeObserver | null) => {\n      const resizeObserver = getResizeObserver();\n      resizeObserver?.disconnect();\n    },\n    {\n      wait: 30000,\n    },\n  );\n\n  useEffect(() => {\n    if (!eventCenter) {\n      return;\n    }\n\n    let resizeObserver: ResizeObserver | null = null;\n\n    const onAfterCardRender = ({\n      messageId: renderCardMessageId,\n    }: {\n      messageId: string;\n    }) => {\n      if (!cardContainerRef.current) {\n        return;\n      }\n\n      if (renderCardMessageId !== messageId) {\n        return;\n      }\n\n      resizeObserver = new ResizeObserver(() => {\n        debouncedDisconnect.run(() => resizeObserver);\n        onResize();\n      });\n\n      resizeObserver.observe(cardContainerRef.current);\n    };\n\n    eventCenter.on(UIKitEvents.AFTER_CARD_RENDER, onAfterCardRender);\n\n    return () => {\n      eventCenter.off(UIKitEvents.AFTER_CARD_RENDER, onAfterCardRender);\n      resizeObserver?.disconnect();\n    };\n  }, []);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext, type ComponentType, type ReactNode } from 'react';\n\nimport { type SendButtonProps } from '@coze-common/chat-uikit-shared';\n\n/* eslint-disable @typescript-eslint/naming-convention */\nexport interface UIKitCustomComponentsMap {\n  MentionOperateTool: ComponentType<{\n    senderId: string;\n  }>;\n  SendButton: ComponentType<SendButtonProps>;\n  AvatarWrap: ComponentType<{\n    children: ReactNode;\n  }>;\n}\n/* eslint-enable @typescript-eslint/naming-convention */\n\nexport interface UIKitCustomComponents {\n  uiKitCustomComponents?: Partial<UIKitCustomComponentsMap>;\n}\n\nexport const UIKitCustomComponentsContext =\n  createContext<UIKitCustomComponents>({});\n\nexport const UIKitCustomComponentsProvider =\n  UIKitCustomComponentsContext.Provider;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useContext } from 'react';\n\nimport {\n  UIKitCustomComponentsContext,\n  UIKitCustomComponentsMap,\n  UIKitCustomComponents,\n  UIKitCustomComponentsProvider,\n} from './custom-components-context';\n\nexport {\n  UIKitCustomComponentsContext,\n  UIKitCustomComponentsMap,\n  UIKitCustomComponents,\n  UIKitCustomComponentsProvider,\n};\n\nexport const useUIKitCustomComponent = () =>\n  useContext(UIKitCustomComponentsContext).uiKitCustomComponents || {};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { cva, type VariantProps } from 'class-variance-authority';\n\nexport const messageBoxContainerVariants = cva(['flex', 'flex-row', 'my-0'], {\n  variants: {\n    isMobileLayout: {\n      true: ['mx-[12px]'],\n      false: ['mx-[24px]'],\n    },\n  },\n});\n\nexport const botNicknameVariants = cva(\n  [\n    'text-base',\n    'font-normal',\n    'leading-[16px]',\n    'break-words',\n    'flex-shrink-0',\n    '!max-w-[400px]',\n  ],\n  {\n    variants: {\n      showBackground: {\n        true: ['coz-fg-images-user-name'],\n        false: ['coz-fg-secondary'],\n      },\n    },\n  },\n);\nexport type BotNicknameVariantsProps = Required<\n  VariantProps<typeof botNicknameVariants>\n>;\nexport const typeSafeBotNicknameVariants: (\n  props: BotNicknameVariantsProps,\n) => string = botNicknameVariants;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { exhaustiveCheckSimple } from '@coze-common/chat-area-utils';\n\nimport { type MessageBoxInnerVariantProps } from '../../../variants/message-box-inner-variants';\nimport { type MessageBoxTheme } from './type';\n\nexport const getMessageBoxInnerVariantsByTheme: (props: {\n  theme: MessageBoxTheme;\n}) => Pick<MessageBoxInnerVariantProps, 'color' | 'border' | 'tight'> = ({\n  theme,\n}) => {\n  if (theme === 'primary' || theme === 'whiteness' || theme === 'grey') {\n    return { color: theme, border: null, tight: false };\n  }\n  if (theme === 'colorful') {\n    return { color: 'primary', border: null, tight: false };\n  }\n  if (theme === 'border') {\n    return { color: 'whiteness', border: 'primary', tight: true };\n  }\n\n  if (theme === 'color-border') {\n    return { color: 'whiteness', border: 'highlight', tight: false };\n  }\n  if (theme === 'color-border-card') {\n    return { color: 'whiteness', border: 'highlight', tight: true };\n  }\n  if (theme === 'none') {\n    return { tight: true, color: null, border: null };\n  }\n  exhaustiveCheckSimple(theme);\n  return { tight: false, color: null, border: null };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useRef, useEffect, type ComponentType } from 'react';\n\nimport { type FallbackProps } from '@coze-arch/logger';\nimport { I18n } from '@coze-arch/i18n';\n\nimport { useUiKitMessageBoxContext } from '../../../context/message-box';\nexport const FallbackComponent: ComponentType<FallbackProps> = ({ error }) => {\n  const { onError } = useUiKitMessageBoxContext();\n\n  const reported = useRef(false);\n\n  useEffect(() => {\n    if (!onError || !error) {\n      return;\n    }\n\n    if (reported.current) {\n      return;\n    }\n\n    onError(error);\n    reported.current = true;\n  }, [onError, error]);\n\n  return (\n    <div className=\"p-[12px]\">\n      <span className=\"text-[14px] font-medium text-[#222222]\">\n        {I18n.t('message_content_error')}\n      </span>\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type PropsWithChildren, type FC } from 'react';\nexport const DefaultAvatarWrap: FC<PropsWithChildren> = ({ children }) => (\n  <>{children}</>\n);\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./message-box.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./message-box.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type PropsWithChildren,\n  type FC,\n  useRef,\n  useState,\n  useEffect,\n} from 'react';\n\nimport classnames from 'classnames';\nimport { useClickAway, useHover, useUpdateEffect } from 'ahooks';\nimport {\n  Layout,\n  UIKitEvents,\n  useUiKitEventCenter,\n} from '@coze-common/chat-uikit-shared';\nimport { useEventCallback } from '@coze-common/chat-hooks';\nimport { ErrorBoundary } from '@coze-arch/logger';\nimport { Avatar, Typography } from '@coze-arch/coze-design';\n\nimport { UserLabel, UserName } from '../user-label';\nimport { MessageContentTime } from '../message-content-time';\nimport { typeSafeMessageBoxInnerVariants } from '../../../variants/message-box-inner-variants';\nimport { useObserveCardContainer } from '../../../hooks/use-observe-card-container';\nimport { UIKitMessageBoxProvider } from '../../../context/message-box';\nimport { useUIKitCustomComponent } from '../../../context/custom-components';\nimport defaultAvatar from '../../../assets/default-avatar.png';\nimport {\n  typeSafeBotNicknameVariants,\n  messageBoxContainerVariants,\n} from './variants';\nimport { getMessageBoxInnerVariantsByTheme } from './utils';\nimport { type MessageBoxWrapProps } from './type';\nimport { FallbackComponent } from './fallback';\nimport { DefaultAvatarWrap } from './default-avatar-wrap';\nimport './message-box.less';\n\nexport const MessageBoxWrap: FC<\n  PropsWithChildren<MessageBoxWrapProps>\n  // eslint-disable-next-line @coze-arch/max-line-per-function\n> = props => {\n  const {\n    children,\n    theme,\n    nickname,\n    avatar,\n    showUserInfo,\n    renderFooter,\n    hoverContent,\n    right,\n    senderId,\n    classname,\n    messageBubbleClassname,\n    messageBubbleWrapperClassname,\n    messageBoxWrapperClassname,\n    messageHoverWrapperClassName,\n    messageErrorWrapperClassname,\n    isHoverShowUserInfo = true,\n    layout,\n    contentTime,\n    showBackground,\n    extendedUserInfo,\n    topRightSlot,\n    imageAutoSizeContainerWidth,\n    enableImageAutoSize,\n    messageId,\n    eventCallbacks,\n    onError,\n  } = props;\n  const { userLabel, userUniqueName } = extendedUserInfo ?? {};\n  const [botAvatar, setBotAvatar] = useState(avatar || defaultAvatar);\n  const { MentionOperateTool = () => null, AvatarWrap = DefaultAvatarWrap } =\n    useUIKitCustomComponent();\n  const wrapRef = useRef<HTMLDivElement>(null);\n  const messageContainerRef = useRef<HTMLDivElement>(null);\n  const messageFooterRef = useRef<HTMLDivElement>(null);\n  const eventCenter = useUiKitEventCenter();\n  const isMobileLayout = layout === Layout.MOBILE;\n  const refreshContainerWidthConditionally = useEventCallback(() => {\n    if (!messageContainerRef.current || !messageFooterRef.current) {\n      return;\n    }\n\n    const currentMessageWidth = `${messageContainerRef.current.offsetWidth}px`;\n    const currentFooterWidth = messageFooterRef.current.style.width;\n\n    if (currentFooterWidth === currentMessageWidth) {\n      return;\n    }\n\n    messageFooterRef.current.style.width = currentMessageWidth;\n  });\n\n  useUpdateEffect(() => {\n    setBotAvatar(avatar || defaultAvatar);\n  }, [avatar]);\n  useObserveCardContainer({\n    messageId,\n    cardContainerRef: messageContainerRef,\n    onResize: refreshContainerWidthConditionally,\n  });\n\n  useEffect(() => {\n    if (!eventCenter) {\n      return;\n    }\n    eventCenter.on(\n      UIKitEvents.WINDOW_RESIZE,\n      refreshContainerWidthConditionally,\n    );\n\n    return () => {\n      eventCenter.off(\n        UIKitEvents.WINDOW_RESIZE,\n        refreshContainerWidthConditionally,\n      );\n    };\n  }, []);\n\n  const isHovering = useHover(() => wrapRef.current);\n\n  // Adapt mobile end mobile end has no hover effect, use click interaction\n  const [hoverContentVisible, setHoverContentVisible] =\n    useState<boolean>(false);\n\n  useClickAway(() => {\n    setHoverContentVisible(false);\n  }, wrapRef);\n\n  return (\n    <UIKitMessageBoxProvider\n      value={{\n        layout,\n        imageAutoSizeContainerWidth,\n        enableImageAutoSize,\n        eventCallbacks,\n        onError,\n      }}\n    >\n      <div\n        // chat-uikit-message-box\n        className={classnames('max-w-full', classname)}\n        ref={wrapRef}\n        onClick={() => {\n          if (isMobileLayout) {\n            setHoverContentVisible(true);\n          }\n        }}\n      >\n        <div\n          // chat-uikit-message-box-container chat-uikit-message-box-container-pc\n          className={classnames(\n            messageBoxContainerVariants({ isMobileLayout }),\n            messageBoxWrapperClassname,\n          )}\n        >\n          <div\n            // chat-uikit-message-box-container__avatar-wrap\n            className=\"mr-[12px] w-32px h-32px\"\n          >\n            {showUserInfo ? (\n              <AvatarWrap>\n                <Avatar\n                  // chat-uikit-message-box-container__avatar-wrap__avatar\n                  size=\"small\"\n                  src={botAvatar}\n                  onError={() => setBotAvatar(defaultAvatar)}\n                ></Avatar>\n              </AvatarWrap>\n            ) : null}\n          </div>\n          <div\n            // chat-uikit-message-box-container__message\n            className=\"flex-1 max-w-[calc(100%-44px)]\"\n          >\n            {/* TODO: Rendering multiple content within a message is not supported */}\n            <div\n              // chat-uikit-message-box-container__message__message-box\n              className=\"relative flex flex-col w-fit max-w-full\"\n            >\n              {showUserInfo && nickname ? (\n                <div\n                  // chat-uikit-message-box-container__message__nickname\n                  className=\"flex\"\n                >\n                  <Typography.Text\n                    ellipsis={{\n                      showTooltip: {\n                        opts: {\n                          content: nickname,\n                        },\n                      },\n                    }}\n                    // chat-uikit-message-box-container__message__nickname-text\n                    className={typeSafeBotNicknameVariants({\n                      showBackground: Boolean(showBackground),\n                    })}\n                  >\n                    {nickname}\n                  </Typography.Text>\n                  <UserLabel userLabel={userLabel} />\n                  <div\n                    // chat-uikit-message-box-container__message__nickname-partner\n                    className=\"flex shrink w-full h-[20px]\"\n                  >\n                    {isHovering && isHoverShowUserInfo ? (\n                      <>\n                        <UserName\n                          userUniqueName={userUniqueName}\n                          showBackground={showBackground}\n                        />\n                        <MentionOperateTool senderId={senderId} />\n                        <MessageContentTime\n                          contentTime={contentTime}\n                          showBackground={Boolean(showBackground)}\n                          className=\"flex-shrink-0\"\n                        />\n                      </>\n                    ) : null}\n\n                    <div className=\"flex gap-x-[8px] ml-auto\">\n                      {topRightSlot}\n                    </div>\n                  </div>\n                </div>\n              ) : null}\n              <div\n                ref={messageContainerRef}\n                // chat-uikit-message-box-container__message__message-box__content\n                className={classnames(\n                  messageBubbleWrapperClassname,\n                  'select-text relative flex flex-row w-fit max-w-full',\n                )}\n              >\n                <div\n                  // className={classnames('chat-uikit-message-box-inner', {\n                  //   'chat-uikit-message-box-inner--primary':\n                  //     theme === 'primary',\n                  //   'chat-uikit-message-box-inner--whiteness':\n                  //     theme === 'whiteness',\n                  //   'chat-uikit-message-box-inner--colorful':\n                  //     theme === 'colorful',\n                  //   'chat-uikit-message-box-inner--border': theme === 'border',\n                  //   'chat-uikit-message-box-inner--none': theme === 'none',\n                  //   '!coz-bg-image-user !coz-stroke-image-user':\n                  //     showBackground && theme === 'primary',\n                  //   '!coz-stroke-image-user !coz-bg-image-bots':\n                  //     showBackground && theme === 'border',\n                  //   '!coz-bg-image-bots !coz-stroke-image-bots':\n                  //     showBackground && theme === 'whiteness',\n                  //   'chat-uikit-message-box-inner--color-border':\n                  //     theme === 'color-border',\n                  //   'chat-uikit-message-box-inner--color-border-card':\n                  //     theme === 'color-border-card',\n                  // })}\n                  className={classnames(\n                    messageBubbleClassname,\n                    typeSafeMessageBoxInnerVariants({\n                      showBackground: Boolean(showBackground),\n                      ...getMessageBoxInnerVariantsByTheme({ theme }),\n                    }),\n                    layout === Layout.MOBILE ? '!text-[16px]' : '',\n                  )}\n                >\n                  <ErrorBoundary\n                    errorBoundaryName=\"chat-message-box-children\"\n                    FallbackComponent={FallbackComponent}\n                  >\n                    {children}\n                  </ErrorBoundary>\n                </div>\n                <div\n                  // chat-uikit-message-box-container__message__message-box__content__right\n                  className={classnames(\n                    'absolute right-0 bottom-[1px]',\n                    messageErrorWrapperClassname,\n                  )}\n                >\n                  {right}\n                </div>\n                {isHovering || hoverContentVisible ? (\n                  <div\n                    // chat-uikit-message-box-container__message__message-box__hover-container\n                    className={classnames(\n                      'absolute right-[-12px] bottom-[-20px]',\n                      messageHoverWrapperClassName,\n                    )}\n                  >\n                    {hoverContent}\n                  </div>\n                ) : null}\n              </div>\n              {/* Please read the refreshContainerWidthConditionally above before changing the style of this dom */}\n              <div\n                ref={messageFooterRef}\n                // chat-uikit-message-box-container__message__message-box__footer\n                className=\"overflow-visible\"\n              >\n                {renderFooter?.(refreshContainerWidthConditionally)}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </UIKitMessageBoxProvider>\n  );\n};\n\nMessageBoxWrap.displayName = 'UIKitMessageBoxWrap';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport { Layout } from '@coze-common/chat-uikit-shared';\n\nimport { ContentBox } from '../content-box';\nimport {\n  type MessageBoxProps,\n  type MessageBoxShellProps,\n  type NormalMessageBoxProps,\n} from './type';\nimport { MessageBoxWrap } from './message-box-wrap';\n\nexport const MessageBox: FC<\n  MessageBoxShellProps | NormalMessageBoxProps\n> = props => {\n  const {\n    theme = 'none',\n    renderFooter,\n    hoverContent,\n    senderInfo,\n    showUserInfo,\n    right,\n    classname,\n\n    messageBubbleClassname,\n    messageBubbleWrapperClassname,\n    messageBoxWrapperClassname,\n    messageHoverWrapperClassName,\n    messageErrorWrapperClassname,\n    isHoverShowUserInfo,\n\n    layout = Layout.PC,\n    showBackground = false,\n    topRightSlot,\n    imageAutoSizeContainerWidth,\n    enableImageAutoSize,\n    messageId,\n    eventCallbacks,\n    onError,\n  } = props ?? {};\n  const { url, nickname, id, userLabel, userUniqueName } = senderInfo ?? {};\n\n  return (\n    <MessageBoxWrap\n      messageId={messageId}\n      theme={theme}\n      avatar={url}\n      nickname={nickname}\n      showUserInfo={showUserInfo}\n      renderFooter={renderFooter}\n      hoverContent={hoverContent}\n      right={right}\n      senderId={id || ''}\n      classname={classname}\n      messageBubbleWrapperClassname={messageBubbleWrapperClassname}\n      messageBubbleClassname={messageBubbleClassname}\n      messageBoxWrapperClassname={messageBoxWrapperClassname}\n      messageHoverWrapperClassName={messageHoverWrapperClassName}\n      messageErrorWrapperClassname={messageErrorWrapperClassname}\n      isHoverShowUserInfo={isHoverShowUserInfo}\n      layout={layout}\n      contentTime={getMessageContentTime(props)}\n      showBackground={showBackground}\n      extendedUserInfo={{\n        userLabel,\n        userUniqueName,\n      }}\n      topRightSlot={topRightSlot}\n      imageAutoSizeContainerWidth={imageAutoSizeContainerWidth}\n      enableImageAutoSize={enableImageAutoSize}\n      eventCallbacks={eventCallbacks}\n      onError={onError}\n    >\n      {getMessageBoxContent(props)}\n    </MessageBoxWrap>\n  );\n};\n\nconst getMessageContentTime = (props: MessageBoxProps): number | undefined => {\n  if ('message' in props) {\n    return Number(props.message.content_time);\n  }\n};\n\nconst getMessageBoxContent = (props: MessageBoxProps) => {\n  if ('children' in props) {\n    return props.children;\n  }\n\n  const {\n    message,\n    contentConfigs,\n    eventCallbacks,\n    getBotInfo,\n    layout = Layout.PC,\n    showBackground = false,\n    isContentLoading,\n    isCardDisabled,\n  } = props;\n\n  return (\n    <ContentBox\n      message={message}\n      contentConfigs={contentConfigs}\n      eventCallbacks={eventCallbacks}\n      getBotInfo={getBotInfo}\n      layout={layout}\n      showBackground={showBackground}\n      isContentLoading={isContentLoading}\n      isCardDisabled={isCardDisabled}\n    />\n  );\n};\n\nMessageBox.displayName = 'UIKitMessageBox';\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { forwardRef } from 'react';\n\nimport classNames from 'classnames';\nimport { IconButton, type ButtonProps } from '@coze-arch/coze-design';\nimport { type Button as SemiButton } from '@douyinfe/semi-ui';\n\nimport styles from './index.module.less';\n\nexport const OutlinedIconButton = forwardRef<\n  SemiButton,\n  ButtonProps & { showBackground: boolean }\n>(({ className, showBackground, ...restProps }, ref) => (\n  <IconButton\n    ref={ref}\n    className={classNames(\n      className,\n      showBackground\n        ? ['!coz-bg-image-bots', styles['outlined-icon-button-background']]\n        : styles['outlined-icon-button'],\n      styles['base-outlined-icon-button'],\n    )}\n    {...restProps}\n  />\n));\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type RefObject, useEffect, useRef } from 'react';\n\nimport { useLatest, useKeyPress } from 'ahooks';\nimport {\n  type AudioRecordEvents,\n  type AudioRecordOptions,\n} from '@coze-common/chat-uikit-shared';\nimport { useEventCallback } from '@coze-common/chat-hooks';\n\ntype EventType = MouseEvent | TouchEvent | KeyboardEvent;\n\nexport interface UseAudioRecordInteractionProps {\n  target: RefObject<HTMLElement>;\n  events: AudioRecordEvents;\n  options?: AudioRecordOptions;\n}\n\nconst touchSupported: boolean = 'ontouchstart' in window;\n\nconst isTouchEvent = (eventType: unknown): eventType is TouchEvent =>\n  'TouchEvent' in window && eventType instanceof TouchEvent;\n\nconst getClientPosition = (event: TouchEvent | MouseEvent) => {\n  if (isTouchEvent(event)) {\n    return {\n      clientX: event.touches[0]?.clientX ?? 0,\n      clientY: event.touches[0]?.clientY ?? 0,\n    };\n  }\n  return event;\n};\n\n// eslint-disable-next-line max-lines-per-function, @coze-arch/max-line-per-function\nexport const useAudioRecordInteraction = ({\n  target,\n  events,\n  options = {},\n}: UseAudioRecordInteractionProps) => {\n  const { onStart, onEnd, onMoveEnter, onMoveLeave } = events;\n  const {\n    shortcutKey = () => false,\n    getIsShortcutKeyDisabled,\n    enabled = true,\n    getActiveZoneTarget,\n  } = options;\n  const onStartRef = useLatest(onStart);\n  const onEndRef = useLatest(onEnd);\n  const onMoveEnterRef = useLatest(onMoveEnter);\n  const onMoveLeaveRef = useLatest(onMoveLeave);\n  const isKeydown = useRef(false);\n  const isMouseOrTouchDown = useRef(false);\n  const isMoveLeave = useRef(false);\n\n  const onKeyDown = (eventType: KeyboardEvent) => {\n    if (!enabled) {\n      return;\n    }\n    if (getIsShortcutKeyDisabled?.()) {\n      return onKeyUp(eventType);\n    }\n    if (isKeydown.current) {\n      return;\n    }\n    isKeydown.current = true;\n    onStartRef.current?.(eventType);\n  };\n\n  const onKeyUp = (eventType: KeyboardEvent | undefined) => {\n    if (!enabled) {\n      return;\n    }\n    if (!isKeydown.current) {\n      return;\n    }\n    isKeydown.current = false;\n    onEndRef.current?.(eventType);\n  };\n\n  const onPointerMove = useEventCallback(\n    (eventType: TouchEvent | MouseEvent) => {\n      eventType.preventDefault();\n      const activeZoneElement = getActiveZoneTarget?.() || target.current;\n\n      if (!isMouseOrTouchDown.current || !activeZoneElement) {\n        return;\n      }\n      const { clientX, clientY } = getClientPosition(eventType);\n      // Get the boundary information of the element\n      const rect = activeZoneElement.getBoundingClientRect();\n      const isOutRect =\n        clientX < rect.left ||\n        clientX > rect.right ||\n        clientY < rect.top ||\n        clientY > rect.bottom;\n\n      // Determine whether the touch point is within the scope of the element\n      if (isOutRect && !isMoveLeave.current) {\n        isMoveLeave.current = true;\n        onMoveLeaveRef.current?.();\n      }\n\n      if (!isOutRect && isMoveLeave.current) {\n        isMoveLeave.current = false;\n        onMoveEnterRef.current?.();\n      }\n    },\n  );\n\n  const onClickOrTouchStart = useEventCallback((eventType: EventType) => {\n    isMoveLeave.current = false;\n\n    if (isMouseOrTouchDown.current) {\n      return;\n    }\n    isMouseOrTouchDown.current = true;\n\n    if (isTouchEvent(eventType)) {\n      eventType.preventDefault();\n      document.addEventListener('touchmove', onPointerMove);\n    } else {\n      document.addEventListener('mousemove', onPointerMove);\n    }\n\n    onStartRef.current?.(eventType);\n  });\n\n  const onClickOrTouchEnd = useEventCallback((eventType: EventType) => {\n    if (!isMouseOrTouchDown.current) {\n      return;\n    }\n\n    document.removeEventListener('mousemove', onPointerMove);\n    document.removeEventListener('touchmove', onPointerMove);\n\n    isMouseOrTouchDown.current = false;\n    onEndRef.current?.(eventType);\n  });\n\n  useKeyPress(shortcutKey, onKeyDown, {\n    exactMatch: true,\n    events: ['keydown'],\n  });\n\n  useKeyPress(shortcutKey, onKeyUp, {\n    exactMatch: false,\n    events: ['keyup'],\n  });\n\n  useEffect(() => {\n    const onWindowBlur = () => {\n      onKeyUp(undefined);\n    };\n    window.addEventListener('blur', onWindowBlur);\n    return () => {\n      window.removeEventListener('blur', onWindowBlur);\n    };\n  }, []);\n\n  useEffect(() => {\n    const element = target.current;\n\n    if (!element || !enabled) {\n      return;\n    }\n\n    if (!touchSupported) {\n      element.addEventListener('mousedown', onClickOrTouchStart);\n      // ! caution document\n      document.addEventListener('mouseup', onClickOrTouchEnd);\n    } else {\n      element.addEventListener('touchstart', onClickOrTouchStart);\n      element.addEventListener('touchend', onClickOrTouchEnd);\n    }\n\n    return () => {\n      if (!touchSupported) {\n        element.removeEventListener('mousedown', onClickOrTouchStart);\n        // ! caution document\n        document.removeEventListener('mouseup', onClickOrTouchEnd);\n      } else {\n        element.removeEventListener('touchstart', onClickOrTouchStart);\n        element.removeEventListener('touchend', onClickOrTouchEnd);\n      }\n    };\n  });\n  useEffect(\n    () => () => {\n      // Avoid events that cannot be uninstalled under abnormal circumstances\n      document.removeEventListener('mousemove', onPointerMove);\n      document.removeEventListener('touchmove', onPointerMove);\n    },\n    [],\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport {\n  type IChatUploadCopywritingConfig,\n  DEFAULT_MAX_FILE_SIZE,\n  UploadType,\n} from '@coze-common/chat-uikit-shared';\nimport {\n  FILE_TYPE_CONFIG,\n  FileTypeEnum,\n} from '@coze-common/chat-core/shared/const';\nimport { Toast, Upload } from '@coze-arch/coze-design';\n\ninterface IChatUploadProps {\n  /**\n   * Upload event callback\n   * @param uploadType [IMAGE = 0 FILE = 1]\n   * @param file\n   * @returns void\n   */\n  onUpload: (uploadType: UploadType, file: File) => void;\n  /**\n   * Copywriting information configuration\n   */\n  copywritingConfig?: IChatUploadCopywritingConfig;\n  /**\n   * Maximum file size (in bytes)\n   */\n  maxFileSize?: number;\n  isDisabled?: boolean;\n  children: JSX.Element;\n  limitFileCount?: number;\n  isFileCountExceedsLimit: (fileCount: number) => boolean;\n}\n\nconst findFileTypeConfig = (file: File) =>\n  FILE_TYPE_CONFIG.find(\n    cnf => cnf.judge?.(file) || cnf.accept.some(ext => file.name.endsWith(ext)),\n  );\n\nexport const ChatUpload: FC<IChatUploadProps> = props => {\n  const {\n    copywritingConfig = {},\n    maxFileSize = DEFAULT_MAX_FILE_SIZE,\n    children,\n    onUpload,\n    isDisabled,\n    isFileCountExceedsLimit,\n    limitFileCount = 1,\n  } = props;\n\n  /**\n   * handle uploads\n   * @param fileList\n   * @returns void\n   */\n  const handleUpload = (fileList: File[]) => {\n    const { fileSizeReachLimitToast, fileExceedsLimitToast, fileEmptyToast } =\n      copywritingConfig;\n\n    if (isFileCountExceedsLimit(fileList.length)) {\n      Toast.warning({\n        showClose: false,\n        content: fileExceedsLimitToast,\n      });\n      return;\n    }\n\n    if (!fileList.length) {\n      return;\n    }\n\n    // Is there a file that is out of size?\n    const hasOverflowLimitFileSize = fileList.some(\n      file => file.size > maxFileSize,\n    );\n    const hasEmptyFile = fileList.some(file => file.size <= 0);\n\n    // Error handling if the file size exceeds the expected size\n    if (hasOverflowLimitFileSize) {\n      Toast.warning({\n        showClose: false,\n        content: fileSizeReachLimitToast,\n      });\n    }\n\n    if (hasEmptyFile) {\n      Toast.warning({\n        showClose: false,\n        content: fileEmptyToast,\n      });\n    }\n\n    const verifiedFileTypeConfigList = fileList\n      .filter(file => file.size <= maxFileSize && file.size > 0)\n      .map(file => ({\n        file,\n        fileTypeConfig: findFileTypeConfig(file),\n      }));\n\n    for (const fileConfig of verifiedFileTypeConfigList) {\n      if (fileConfig.fileTypeConfig?.fileType === FileTypeEnum.IMAGE) {\n        onUpload?.(UploadType.IMAGE, fileConfig.file);\n      } else {\n        onUpload?.(UploadType.FILE, fileConfig.file);\n      }\n    }\n  };\n\n  return (\n    <Upload\n      limit={limitFileCount === 1 ? 1 : undefined}\n      draggable={false}\n      action=\"\"\n      fileList={[]}\n      onFileChange={handleUpload}\n      disabled={isDisabled}\n      multiple={limitFileCount > 1}\n      uploadTrigger={'custom'}\n    >\n      {children}\n    </Upload>\n  );\n};\n\nChatUpload.displayName = 'UiKitChatUpload';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  useState,\n  type KeyboardEvent,\n  useRef,\n  useEffect,\n  type KeyboardEventHandler,\n  type CompositionEvent,\n} from 'react';\n\nimport { type TextAreaRef } from 'rc-textarea';\nimport {\n  type InputNativeCallbacks,\n  type InputController,\n  type InputState,\n} from '@coze-common/chat-uikit-shared';\nimport { useImperativeLayoutEffect } from '@coze-common/chat-hooks';\n\ntype KeyboardGeneralEvent = KeyboardEvent<HTMLElement>;\n\n// eslint-disable-next-line max-lines-per-function, @coze-arch/max-line-per-function -- x.x\nexport const useTextSend = ({\n  onSubmit,\n  defaultValue = '',\n  allowEmpty = false,\n  onBeforeSubmit,\n  isDisabled = false,\n  inputNativeCallbacks = {},\n}: {\n  onSubmit: (text: string) => void;\n  defaultValue?: string;\n  /**\n   * Whether to allow empty string submission\n   * @default false\n   */\n  allowEmpty?: boolean;\n  onBeforeSubmit?: () => boolean;\n  isDisabled?: boolean;\n  inputNativeCallbacks?: InputNativeCallbacks;\n}) => {\n  const [inputText, setInputText] = useState(defaultValue);\n  const composingRef = useRef(false);\n  const rcTextareaRef = useRef<TextAreaRef>(null);\n  const selectionRef = useRef<{ start: number; end: number }>({\n    start: 0,\n    end: 0,\n  });\n  const getTextarea = () => rcTextareaRef.current?.resizableTextArea.textArea;\n  const waitAndUpdateSelectPos = useImperativeLayoutEffect(() =>\n    updateSelectPos(),\n  );\n\n  const readState = (): InputState => {\n    const state: InputState = {\n      inputText,\n      isComposing: composingRef.current,\n      isDisabled,\n      selection: selectionRef.current,\n      hasSelection: selectionRef.current.start !== selectionRef.current.end,\n    };\n    return state;\n  };\n  const readStateRef = useRef<() => InputState>();\n  readStateRef.current = readState;\n\n  useEffect(() => {\n    if (!inputNativeCallbacks.getController) {\n      return;\n    }\n    const controller: InputController = {\n      requireSetMousePosition,\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion -- .\n      readState: () => readStateRef.current!(),\n      setInputText: (updater: string | ((pre: string) => string)) => {\n        setInputText(updater);\n        waitAndUpdateSelectPos();\n      },\n      focus: () => {\n        getTextarea()?.focus();\n      },\n    };\n    inputNativeCallbacks.getController(controller);\n  }, [inputNativeCallbacks.getController]);\n\n  const requireSetMousePosition = useImperativeLayoutEffect((pos: number) => {\n    const textarea = getTextarea();\n    if (!textarea) {\n      return;\n    }\n    textarea.focus();\n    textarea.setSelectionRange(pos, pos);\n  });\n\n  const updateSelectPos = () => {\n    const textarea = getTextarea();\n    if (!textarea) {\n      return;\n    }\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    selectionRef.current = { start, end };\n  };\n\n  const submit = () => {\n    if (!allowEmpty && !inputText.trim()) {\n      return;\n    }\n\n    if (isDisabled) {\n      return;\n    }\n    if (onBeforeSubmit && !onBeforeSubmit()) {\n      return;\n    }\n\n    onSubmit(inputText);\n\n    setInputText('');\n  };\n\n  const onKeydownToSubmit = (evt: KeyboardGeneralEvent) => {\n    if (evt.code !== 'Enter') {\n      return;\n    }\n\n    if (composingRef.current || isPressEnterToChangeLine(evt)) {\n      return;\n    }\n    evt.preventDefault();\n\n    submit();\n  };\n\n  const onKeyUp: KeyboardEventHandler<HTMLTextAreaElement> = e => {\n    updateSelectPos();\n    inputNativeCallbacks.onAfterProcessKeyUp?.(e);\n  };\n\n  const onKeyDown = (evt: KeyboardEvent<HTMLTextAreaElement>) => {\n    updateSelectPos();\n    const res = inputNativeCallbacks.onBeforeProcessKeyDown?.(evt);\n    if (res?.exit) {\n      return;\n    }\n\n    if ((evt.metaKey || evt.altKey || evt.ctrlKey) && evt.code === 'Enter') {\n      handleNewLine();\n      return;\n    }\n\n    onKeydownToSubmit(evt);\n  };\n\n  const handleNewLine = () => {\n    const textarea = getTextarea();\n    if (!textarea) {\n      return;\n    }\n\n    // Calculate the current position of the cursor\n    const cursorPosition = textarea.selectionStart;\n\n    // Inserts a new row at the cursor position\n    const newValue = `${inputText.substring(\n      0,\n      cursorPosition,\n    )}\\n${inputText.substring(cursorPosition)}`;\n\n    setInputText(newValue);\n\n    setTimeout(() => {\n      textarea.selectionStart = cursorPosition + 1;\n      textarea.selectionEnd = cursorPosition + 1;\n    }, 0);\n  };\n\n  const onChange = (evt: { target: { value: string } }) => {\n    updateSelectPos();\n    const val = evt.target.value;\n    setInputText(val);\n    Promise.resolve().then(() => {\n      inputNativeCallbacks?.onAfterOnChange?.();\n    });\n  };\n\n  return {\n    onChange,\n    setIsComposing: (\n      _: CompositionEvent<HTMLTextAreaElement>,\n      composing: boolean,\n    ) => {\n      composingRef.current = composing;\n    },\n    submit,\n    onKeyDown,\n    inputText,\n    setInputText,\n    rcTextareaRef,\n    updateSelectPos,\n    onKeyUp,\n  };\n};\n\nconst isPressEnterToChangeLine = (evt: KeyboardGeneralEvent) => {\n  if (evt.code !== 'Enter') {\n    return false;\n  }\n  return evt.shiftKey || evt.altKey || evt.metaKey;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport classNames from 'classnames';\nimport { IconCozSendFill } from '@coze-arch/coze-design/icons';\nimport { IconButton } from '@coze-arch/coze-design';\nimport { Layout, type SendButtonProps } from '@coze-common/chat-uikit-shared';\n\nimport { UIKitTooltip } from '../../../../common/tooltips';\n\nconst SendButton: FC<SendButtonProps> = props => {\n  const { isDisabled, tooltipContent, onClick, layout } = props;\n  return (\n    <UIKitTooltip\n      content={tooltipContent}\n      hideToolTip={layout === Layout.MOBILE}\n    >\n      <IconButton\n        className={classNames('!rounded-full', !isDisabled && '!coz-fg-hglt')}\n        disabled={isDisabled}\n        data-testid=\"bot-home-chart-send-button\"\n        size=\"default\"\n        color=\"secondary\"\n        icon={<IconCozSendFill className=\"text-18px\" />}\n        onClick={onClick}\n      />\n    </UIKitTooltip>\n  );\n};\n\nexport default SendButton;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ReactNode, type FC } from 'react';\n\nimport classNames from 'classnames';\nimport { IconCozPlusCircle } from '@coze-arch/coze-design/icons';\nimport { IconButton } from '@coze-arch/coze-design';\nimport { Layout } from '@coze-common/chat-uikit-shared';\n\nimport { UIKitTooltip } from '../../../../common/tooltips';\n\ninterface IProps {\n  isDisabled?: boolean;\n  tooltipContent?: ReactNode;\n  layout: Layout;\n}\n\nconst MoreButton: FC<IProps> = props => {\n  const { isDisabled, tooltipContent, layout } = props;\n\n  return (\n    <UIKitTooltip\n      // Collapse tooltip when the selected file event is invoked\n      disableFocusListener\n      content={tooltipContent}\n      hideToolTip={layout === Layout.MOBILE}\n    >\n      <IconButton\n        className=\"!rounded-full\"\n        data-testid=\"chat-area.chat-upload-button\"\n        color=\"secondary\"\n        disabled={isDisabled}\n        icon={\n          <IconCozPlusCircle\n            className={classNames(\n              isDisabled ? 'coz-fg-dim' : 'coz-fg-primary',\n              'text-18px',\n            )}\n          />\n        }\n      />\n    </UIKitTooltip>\n  );\n};\n\nexport default MoreButton;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ReactNode, type FC } from 'react';\n\nimport classNames from 'classnames';\nimport { IconCozBroom } from '@coze-arch/coze-design/icons';\nimport { Layout } from '@coze-common/chat-uikit-shared';\n\nimport { UIKitTooltip } from '../../../../common/tooltips';\nimport { OutlinedIconButton } from '../../../../common';\n\ninterface IProps {\n  isDisabled?: boolean;\n  tooltipContent?: ReactNode;\n  onClick: () => void;\n  layout: Layout;\n  className: string;\n  showBackground: boolean;\n}\n\nconst ClearHistoryButton: FC<IProps> = props => {\n  const {\n    isDisabled,\n    tooltipContent,\n    onClick,\n    layout,\n    className,\n    showBackground,\n  } = props;\n\n  return (\n    <UIKitTooltip\n      content={tooltipContent}\n      hideToolTip={layout === Layout.MOBILE}\n    >\n      <OutlinedIconButton\n        data-testid=\"bot-edit-debug-chat-clear-button\"\n        showBackground={showBackground}\n        disabled={isDisabled}\n        icon={<IconCozBroom className=\"text-18px\" />}\n        size=\"default\"\n        onClick={onClick}\n        className={classNames('mr-12px', '!rounded-full', className)}\n      />\n    </UIKitTooltip>\n  );\n};\n\nexport default ClearHistoryButton;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ReactNode, type FC } from 'react';\n\nimport classNames from 'classnames';\nimport { IconCozChatPlus } from '@coze-arch/coze-design/icons';\nimport { Layout } from '@coze-common/chat-uikit-shared';\n\nimport { UIKitTooltip } from '../../../../common/tooltips';\nimport { OutlinedIconButton } from '../../../../common';\n\ninterface IProps {\n  isDisabled?: boolean;\n  tooltipContent?: ReactNode;\n  onClick: () => void;\n  layout: Layout;\n  className: string;\n  showBackground: boolean;\n}\n\nconst ClearContextButton: FC<IProps> = props => {\n  const {\n    isDisabled,\n    tooltipContent,\n    onClick,\n    layout,\n    className,\n    showBackground,\n  } = props;\n\n  return (\n    <UIKitTooltip\n      content={tooltipContent}\n      hideToolTip={layout === Layout.MOBILE}\n    >\n      <OutlinedIconButton\n        data-testid=\"chat-input-clear-context-button\"\n        showBackground={showBackground}\n        disabled={isDisabled}\n        icon={<IconCozChatPlus className=\"text-18px\" />}\n        size=\"default\"\n        onClick={onClick}\n        className={classNames('mr-12px', '!rounded-full', className)}\n      />\n    </UIKitTooltip>\n  );\n};\n\nexport default ClearContextButton;\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  forwardRef,\n  useImperativeHandle,\n  useState,\n  type Dispatch,\n  type ForwardRefExoticComponent,\n  type PropsWithChildren,\n  type PropsWithoutRef,\n  type RefAttributes,\n  type RefObject,\n  type SetStateAction,\n  useRef,\n  useEffect,\n} from 'react';\n\nimport Textarea, { type TextAreaRef } from 'rc-textarea';\nimport { merge } from 'lodash-es';\nimport classNames from 'classnames';\nimport { useControllableValue, useUpdateEffect } from 'ahooks';\nimport {\n  IconCozKeyboard,\n  IconCozMicrophone,\n} from '@coze-arch/coze-design/icons';\nimport { Divider, IconButton } from '@coze-arch/coze-design';\nimport {\n  type IChatInputProps,\n  type InputMode,\n  Layout,\n} from '@coze-common/chat-uikit-shared';\n\nimport { AudioRecord } from '../audio-record';\nimport { UIKitTooltip } from '../../common';\nimport { useAudioRecordInteraction } from '../../../hooks/use-audio-record-interaction';\nimport { ChatUpload } from '../../../components/chat/chat-upload';\nimport { useTextSend } from './use-text-area';\nimport BuiltinSendButton from './components/send-button';\nimport MoreButton from './components/more-button';\nimport ClearHistoryButton from './components/clear-history-button';\nimport ClearContextButton from './components/clear-context-button';\n\nimport styles from './index.module.less';\n\nconst DEFAULT_HEIGHT = 24;\n\nexport interface UiKitChatInputButtonConfig {\n  isSendButtonVisible: boolean;\n  isClearHistoryButtonVisible: boolean;\n  isMoreButtonVisible: boolean;\n  isClearContextButtonVisible: boolean;\n}\n\nexport type ChatInputTooltipComponent = ForwardRefExoticComponent<\n  PropsWithoutRef<PropsWithChildren> &\n    RefAttributes<{\n      close: () => void;\n    }>\n>;\n\nexport interface InputRefObject {\n  input: RefObject<TextAreaRef>;\n  setValue: Dispatch<SetStateAction<string>>;\n  sendMessage: IChatInputProps['onSendMessage'];\n}\n\nexport const ChatInput = forwardRef<InputRefObject, IChatInputProps>(\n  // eslint-disable-next-line complexity, @coze-arch/max-line-per-function, max-lines-per-function\n  (props, ref) => {\n    const {\n      onBeforeSubmit,\n      onFocus,\n      onBlur,\n      isReadonly,\n      leftActions,\n      rightActions,\n      addonTop,\n      addonLeft,\n      aboveOutside,\n      buildInButtonConfig,\n      buildInButtonStatus,\n      copywritingConfig,\n      onSendMessage,\n      onClearHistory,\n      onClearContext,\n      onUpload,\n      onInputClick,\n      hasOtherContentToSend,\n      layout,\n      isFileCountExceedsLimit,\n      inputTooltip: InputTooltip,\n      showBackground,\n      limitFileCount,\n      onPaste,\n      CustomSendButton,\n      isInputReadonly,\n      inputNativeCallbacks,\n      audioRecordEvents = {},\n      audioRecordState = {},\n      audioRecordOptions,\n      className: _className,\n      wrapperClassName,\n      ...inputModeProps\n    } = props;\n\n    const {\n      isSendButtonVisible = true,\n      isClearHistoryButtonVisible = true,\n      isMoreButtonVisible = true,\n      isClearContextButtonVisible = false,\n    } = buildInButtonConfig ?? {};\n\n    const {\n      isClearHistoryButtonDisabled,\n      isMoreButtonDisabled,\n      isSendButtonDisabled,\n      isClearContextButtonDisabled,\n    } = buildInButtonStatus ?? {};\n    const { tooltip, inputPlaceholder, uploadConfig, bottomTips } =\n      copywritingConfig ?? {};\n    const {\n      sendButtonTooltipContent,\n      clearHistoryButtonTooltipContent,\n      clearContextButtonTooltipContent,\n      moreButtonTooltipContent,\n      audioButtonTooltipContent,\n      keyboardButtonTooltipContent,\n    } = tooltip ?? {};\n    const [isMultiLines, setIsMultiLines] = useState(false);\n    const [breakLength, setBreakLength] = useState(0);\n    const [isFocus, setIsFocus] = useState(false);\n    const [mode, setMode] = useControllableValue<InputMode>(inputModeProps, {\n      defaultValue: 'input',\n      valuePropName: 'inputMode',\n      trigger: 'onInputModeChange',\n    });\n    const audioButtonWrapperRef = useRef<HTMLDivElement>(null);\n\n    useAudioRecordInteraction({\n      target: audioButtonWrapperRef,\n      events: audioRecordEvents,\n      options: merge({}, audioRecordOptions, {\n        enabled: mode === 'audio' && audioRecordOptions?.enabled,\n      }),\n    });\n\n    const inputSizeRef = useRef<HTMLDivElement>(null);\n    const [inputWidth, setInputWidth] = useState<'100%' | number>('100%');\n    useEffect(() => {\n      const target = inputSizeRef.current;\n      if (!target) {\n        return;\n      }\n      const observer = new ResizeObserver(() => {\n        setInputWidth(target.clientWidth);\n      });\n      observer.observe(target);\n      return () => {\n        observer.disconnect();\n      };\n    }, []);\n\n    const isInputMode = mode === 'input';\n    const isAudioMode = mode === 'audio';\n\n    const handleClickContextButtonClick = () => {\n      onClearContext?.();\n    };\n    /**\n     * Handle the Clear History button click event\n     */\n    const handleClearHistoryButtonClick = () => {\n      onClearHistory?.();\n    };\n\n    /**\n     * Handle user sending messages\n     * @Param text The text of the message sent by the user\n     */\n    const handleSendMessage = (text: string) => {\n      onSendMessage?.({\n        text,\n        mentionList: [],\n      });\n      setIsMultiLines(false);\n      setBreakLength(0);\n    };\n\n    const {\n      onChange,\n      setIsComposing,\n      onKeyDown,\n      inputText,\n      setInputText,\n      submit: handleSendButtonClick,\n      rcTextareaRef,\n      updateSelectPos,\n      onKeyUp,\n    } = useTextSend({\n      onSubmit: handleSendMessage,\n      onBeforeSubmit,\n      isDisabled: isSendButtonDisabled,\n      allowEmpty: hasOtherContentToSend,\n      inputNativeCallbacks,\n    });\n    const buttonClass = showBackground ? '!coz-fg-images-white' : '';\n\n    const handleResize = ({ height }: { height: number }) => {\n      if (\n        !isMultiLines &&\n        height > DEFAULT_HEIGHT &&\n        // Judging by the length of inputText, excluding the resize caused by placeholder will not be processed.\n        inputText?.trim()?.length !== 0\n      ) {\n        setIsMultiLines(true);\n        setBreakLength(inputText.length);\n      }\n    };\n\n    const handleOnChange = (evt: { target: { value: string } }) => {\n      onChange(evt);\n      if (isMultiLines && evt.target.value.length < breakLength) {\n        setIsMultiLines(false);\n      }\n    };\n\n    /** Calculate the readonly value of the compound condition */\n    const finalClearHistoryButtonDisable =\n      isClearHistoryButtonDisabled || isReadonly;\n    const finalSendButtonDisable =\n      (Boolean(!inputText?.trim()) && !hasOtherContentToSend) ||\n      isSendButtonDisabled ||\n      isReadonly;\n    const finalMoreButtonDisable = isMoreButtonDisabled || isReadonly;\n    const finalClearContextButtonDisable =\n      isClearContextButtonDisabled || isReadonly;\n\n    const getFinalSendButtonVisible = () => {\n      const visibleCondition = isSendButtonVisible && isInputMode;\n      if (audioRecordOptions?.enabled) {\n        return visibleCondition && inputText;\n      }\n      return visibleCondition;\n    };\n    useUpdateEffect(() => {\n      if (mode !== 'input') {\n        return;\n      }\n      rcTextareaRef.current?.focus();\n    }, [mode]);\n    useImperativeHandle(ref, () => ({\n      input: rcTextareaRef,\n      setValue: setInputText,\n      sendMessage: onSendMessage,\n    }));\n\n    const SendButton = CustomSendButton ?? BuiltinSendButton;\n\n    return (\n      <div className={styles['input-container']}>\n        <div\n          className={classNames(\n            styles['input-wrap'],\n            'py-0',\n            layout === Layout.MOBILE ? 'px-[16px]' : 'px-[24px]',\n            'input-wraper-for-reset',\n          )}\n        >\n          {aboveOutside}\n          <div\n            className={classNames(\n              styles['left-actions-container'],\n              ['mb-8px'],\n              typeof audioRecordState.isRecording === 'boolean' &&\n                audioRecordState.isRecording\n                ? [styles['animate-left'], '!w-0']\n                : styles['animate-left-revert'],\n            )}\n          >\n            {leftActions}\n            {isClearContextButtonVisible ? (\n              <ClearContextButton\n                showBackground={Boolean(showBackground)}\n                tooltipContent={clearContextButtonTooltipContent}\n                isDisabled={finalClearContextButtonDisable}\n                onClick={handleClickContextButtonClick}\n                data-testid=\"bot-edit-debug-chat-clear-button\"\n                layout={layout}\n                className={buttonClass}\n              ></ClearContextButton>\n            ) : null}\n            {isClearHistoryButtonVisible ? (\n              <ClearHistoryButton\n                showBackground={Boolean(showBackground)}\n                tooltipContent={clearHistoryButtonTooltipContent}\n                isDisabled={finalClearHistoryButtonDisable}\n                onClick={handleClearHistoryButtonClick}\n                data-testid=\"bot-edit-debug-chat-clear-button\"\n                layout={layout}\n                className={buttonClass}\n              />\n            ) : null}\n          </div>\n          <div\n            ref={inputSizeRef}\n            className=\"flex-[1] flex justify-end overflow-hidden\"\n          >\n            <div\n              style={{ width: inputWidth }}\n              className={classNames(\n                styles['textarea-with-top-rows'],\n                ['coz-bg-max', 'coz-stroke-plus', 'relative'],\n                isFocus && styles['input-focus'],\n                (isFocus || audioRecordState.isRecording) && [\n                  '!coz-stroke-hglt',\n                ],\n                audioRecordState.isRecording &&\n                  audioRecordState.isPointerMoveOut &&\n                  '!coz-stroke-hglt-red',\n                audioRecordState.isRecording\n                  ? 'overflow-visible'\n                  : 'overflow-hidden',\n                mode === 'audio' && 'cursor-pointer',\n                (mode === 'audio' || audioRecordState.isRecording) &&\n                  'hover:coz-stroke-hglt',\n                showBackground && styles['background-theme'],\n                { '!coz-bg-image-bots': showBackground },\n                layout === Layout.MOBILE &&\n                  audioRecordState.isRecording &&\n                  (audioRecordState.isPointerMoveOut\n                    ? styles['mobile-audio-bg-danger']\n                    : styles['mobile-audio-bg']),\n                wrapperClassName,\n              )}\n            >\n              {addonTop}\n              <div\n                className={classNames(\n                  styles['textarea-with-actions-container'],\n                  styles['coz-textarea-with-actions-container-padding'],\n                  'py-8px',\n                  'pr-8px',\n                  'pl-20px',\n                  {\n                    [styles['textarea-with-actions-container__row']]:\n                      !isMultiLines,\n                    [styles['textarea-with-actions-container__col']]:\n                      isMultiLines,\n                  },\n                )}\n              >\n                {InputTooltip ? (\n                  <InputTooltip>\n                    <i className={styles['input-tooltip-anchor']} />\n                  </InputTooltip>\n                ) : null}\n                {addonLeft}\n                {isInputMode ? (\n                  <Textarea\n                    data-testid=\"bot.ide.chat_area.chat_input.textarea\"\n                    disabled={isInputReadonly || isReadonly}\n                    className={classNames(\n                      styles.textarea,\n                      [\n                        'coz-fg-primary',\n                        'coz-bg-max',\n                        'disabled:coz-bg-max',\n                        'placeholder:coz-fg-dim',\n                      ],\n                      {\n                        [styles['textarea--with-margin']]: isMultiLines,\n                      },\n                    )}\n                    autoSize={{\n                      minRows: 1,\n                      maxRows: 5,\n                    }}\n                    classNames={{\n                      textarea: classNames(\n                        styles.textarea,\n                        layout === Layout.MOBILE\n                          ? 'text-[16px]'\n                          : 'text-[14px]',\n                      ),\n                    }}\n                    ref={rcTextareaRef}\n                    placeholder={inputPlaceholder}\n                    onChange={handleOnChange}\n                    value={inputText}\n                    onCompositionStart={evt => setIsComposing(evt, true)}\n                    onCompositionEnd={evt => setIsComposing(evt, false)}\n                    onKeyDown={onKeyDown}\n                    onKeyUp={onKeyUp}\n                    onResize={handleResize}\n                    onSelect={updateSelectPos}\n                    onClick={onInputClick}\n                    onFocus={e => {\n                      onFocus?.(e);\n                      setIsFocus(true);\n                    }}\n                    onBlur={e => {\n                      onBlur?.(e);\n                      setIsFocus(false);\n                    }}\n                    onPaste={onPaste}\n                  />\n                ) : null}\n                {isAudioMode ? (\n                  <AudioRecord\n                    ref={audioButtonWrapperRef}\n                    {...audioRecordState}\n                    layout={layout}\n                  />\n                ) : null}\n\n                <div\n                  className={classNames(\n                    audioRecordState.isRecording\n                      ? 'opacity-0 w-0'\n                      : 'opacity-100',\n                    styles['textarea-actions-container'],\n                    styles['textarea-actions-container-transition'],\n                  )}\n                >\n                  <div className={styles['textarea-actions-right']}>\n                    {getFinalSendButtonVisible() ? (\n                      <SendButton\n                        tooltipContent={sendButtonTooltipContent}\n                        isDisabled={finalSendButtonDisable}\n                        onClick={handleSendButtonClick}\n                        layout={layout}\n                      />\n                    ) : null}\n                    {!inputText &&\n                    !isAudioMode &&\n                    audioRecordOptions?.enabled ? (\n                      <UIKitTooltip\n                        content={audioButtonTooltipContent}\n                        hideToolTip={layout === Layout.MOBILE}\n                      >\n                        <IconButton\n                          className=\"!rounded-full\"\n                          color=\"secondary\"\n                          icon={<IconCozMicrophone className=\"text-18px\" />}\n                          onClick={() => {\n                            setMode('audio');\n                          }}\n                        />\n                      </UIKitTooltip>\n                    ) : null}\n                    {isAudioMode ? (\n                      <UIKitTooltip\n                        content={keyboardButtonTooltipContent}\n                        hideToolTip={layout === Layout.MOBILE}\n                      >\n                        <IconButton\n                          className=\"!rounded-full\"\n                          color=\"secondary\"\n                          icon={<IconCozKeyboard className=\"text-18px\" />}\n                          onClick={() => {\n                            setMode('input');\n                          }}\n                        />\n                      </UIKitTooltip>\n                    ) : null}\n                  </div>\n                  {rightActions || isMoreButtonVisible ? (\n                    <>\n                      <Divider layout=\"vertical\" style={{ height: '14px' }} />\n                      <div className={styles['textarea-actions-left']}>\n                        {rightActions}\n                        {isMoreButtonVisible ? (\n                          <ChatUpload\n                            onUpload={(uploadType, file) =>\n                              onUpload?.(uploadType, { file, mentionList: [] })\n                            }\n                            isFileCountExceedsLimit={isFileCountExceedsLimit}\n                            copywritingConfig={uploadConfig}\n                            isDisabled={finalMoreButtonDisable}\n                            limitFileCount={limitFileCount}\n                          >\n                            <MoreButton\n                              tooltipContent={moreButtonTooltipContent}\n                              isDisabled={finalMoreButtonDisable}\n                              layout={layout}\n                            />\n                          </ChatUpload>\n                        ) : null}\n                      </div>\n                    </>\n                  ) : null}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        {bottomTips ? (\n          <div\n            className={classNames(\n              styles['bottom-tips'],\n              'coz-fg-dim',\n              showBackground && '!coz-fg-images-secondary',\n            )}\n          >\n            <span>{bottomTips}</span>\n          </div>\n        ) : null}\n      </div>\n    );\n  },\n);\n\nChatInput.displayName = 'UiKitChatInput';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { cva, type VariantProps } from 'class-variance-authority';\nconst suggestionItemVariants = cva(\n  [\n    'w-fit',\n    'border-[1px]',\n    'border-solid',\n    'rounded-normal',\n    'coz-fg-primary',\n    'py-6px',\n    'px-16px',\n    'flex',\n    'items-center',\n    'justify-center',\n    'mb-8px',\n    'max-w-full',\n    'text-[14px]',\n    'font-normal',\n    'leading-[20px]',\n    'break-words',\n  ],\n  {\n    variants: {\n      showBackground: {\n        true: ['coz-bg-image-question', 'coz-stroke-image-bots'],\n        false: ['coz-stroke-plus'],\n      },\n      color: {\n        white: [],\n        grey: [],\n      },\n      readonly: {\n        true: ['cursor-default'],\n        false: ['cursor-pointer'],\n      },\n    },\n    compoundVariants: [\n      {\n        showBackground: false,\n        color: 'white',\n        className: [],\n      },\n      {\n        showBackground: false,\n        color: 'grey',\n        className: ['bg-[var(--coz-mg-secondary)]'],\n      },\n      {\n        readonly: false,\n        showBackground: false,\n        className: [\n          'hover:bg-[var(--coz-mg-secondary-hovered)]',\n          'active:bg-[var(--coz-mg-secondary-pressed)]',\n        ],\n      },\n      {\n        readonly: false,\n        showBackground: true,\n        className: ['chat-uikit-suggestion-item-background-mg'],\n      },\n    ],\n  },\n);\n\ntype SuggestionItemVariantsProps = VariantProps<typeof suggestionItemVariants>;\n\nexport const typeSafeSuggestionItemVariants: (\n  props: Required<SuggestionItemVariantsProps>,\n) => string = suggestionItemVariants;\n","\n      import API from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport classNames from 'classnames';\nimport { type IMessage } from '@coze-common/chat-uikit-shared';\n\nimport { isText } from '../../../../../utils/is-text';\nimport { typeSafeSuggestionItemVariants } from './variants';\nimport './index.less';\n\ninterface ISuggestionItemProps {\n  message?: Pick<IMessage, 'content_obj' | 'sender_id'>;\n  content?: string;\n  readonly?: boolean;\n  showBackground?: boolean;\n  className?: string;\n  color?: 'white' | 'grey';\n  onSuggestionClick?: (sugParam: {\n    text: string;\n    mentionList: { id: string }[];\n  }) => void;\n}\n\nexport const SuggestionItem: FC<ISuggestionItemProps> = props => {\n  const {\n    content,\n    message,\n    readonly,\n    onSuggestionClick,\n    showBackground,\n    className,\n    color,\n  } = props;\n  const { content_obj = content } = message ?? {};\n\n  if (!isText(content_obj)) {\n    return null;\n  }\n\n  return (\n    <div\n      className={classNames(\n        className,\n        '!bg-[235, 235, 235, 0.75]',\n        typeSafeSuggestionItemVariants({\n          showBackground: Boolean(showBackground),\n          readonly: Boolean(readonly),\n          color: color ?? 'white',\n        }),\n      )}\n      onClick={() => {\n        if (readonly) {\n          return;\n        }\n\n        const senderId = message?.sender_id;\n        onSuggestionClick?.({\n          text: content_obj,\n          mentionList: senderId ? [{ id: senderId }] : [],\n        });\n      }}\n    >\n      <span className=\"w-full\">{content_obj}</span>\n    </div>\n  );\n};\n\nSuggestionItem.displayName = 'SuggestionItem';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const NO_MESSAGE_ID_MARK = 'NO_MESSAGE_ID';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { cva, type VariantProps } from 'class-variance-authority';\n\nexport const botInfoNameVariants = cva(\n  ['leading-[28px]', 'font-medium', 'text-20px'],\n  {\n    variants: {\n      showBackground: {\n        true: ['coz-fg-images-user-name'],\n        false: ['coz-fg-plus'],\n      },\n    },\n  },\n);\n\nexport type BotInfoVariantProps = VariantProps<typeof botInfoNameVariants>;\n\nexport const typeSafeBotInfoNameVariants: (\n  props: BotInfoVariantProps,\n) => string = botInfoNameVariants;\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type CSSProperties,\n  useState,\n  forwardRef,\n  type FC,\n  useContext,\n} from 'react';\n\nimport classNames from 'classnames';\nimport { useUpdateEffect } from 'ahooks';\nimport { Avatar, Typography } from '@coze-arch/coze-design';\nimport {\n  MdBoxLazy,\n  type MdBoxLazyProps,\n} from '@coze-arch/bot-md-box-adapter/lazy';\nimport {\n  Layout,\n  type IMessage,\n  type IEventCallbacks,\n} from '@coze-common/chat-uikit-shared';\n\nimport { CozeLink } from '../../md-box-slots/link';\nimport {\n  type CozeImageProps,\n  CozeImageWithPreview,\n} from '../../md-box-slots/coze-image';\nimport { SuggestionItem } from '../../contents/suggestion-content/components/suggestion-item';\nimport { OnboardingContext } from '../../../context/onboarding';\nimport { NO_MESSAGE_ID_MARK } from '../../../constants/grab';\nimport defaultAvatar from '../../../assets/default-square-avatar.png';\nimport {\n  typeSafeBotInfoNameVariants,\n  type BotInfoVariantProps,\n} from './variants';\n\nimport './index.less';\n\ninterface OnBoardingProps {\n  avatar?: string;\n  name?: string;\n  prologue?: string;\n  suggestionList?: IMessage[];\n  /**\n   * SuggestionList Whether to wrap display, default false\n   */\n  suggestionsWrap?: boolean;\n  readonly?: boolean;\n  suggestionListWithString?: string[];\n  /**\n   * suggestionListWithString whether to wrap, default false\n   */\n  suggestionsWithStringWrap?: boolean;\n  onSuggestionClick?: (content: string) => void;\n  className?: string;\n  prologueClassName?: string;\n  mdBoxProps?: Pick<MdBoxLazyProps, 'insertedElements' | 'slots'>;\n  style?: CSSProperties;\n  showBackground?: boolean;\n  layout?: Layout;\n  enableAutoSizeImage?: boolean;\n  imageAutoSizeContainerWidth?: number;\n  eventCallbacks?: IEventCallbacks;\n  suggestionItemColor?: 'white' | 'grey';\n}\n\ninterface BotInfoProps {\n  wrapperClassName?: string;\n  avatar: string | undefined;\n  onError: () => void;\n  name: string | undefined;\n}\n\nconst BotInfo: React.FC<BotInfoProps & BotInfoVariantProps> = ({\n  avatar,\n  wrapperClassName,\n  onError,\n  name,\n  showBackground,\n}) => (\n  <div className={wrapperClassName}>\n    <Avatar\n      className={classNames('h-[64px] w-[64px]', 'rounded-[16px]')}\n      src={avatar}\n      shape=\"square\"\n      onError={onError}\n    ></Avatar>\n    {name ? (\n      <Typography.Text\n        ellipsis\n        className={typeSafeBotInfoNameVariants({\n          showBackground: Boolean(showBackground),\n        })}\n      >\n        {name}\n      </Typography.Text>\n    ) : null}\n  </div>\n);\n\nexport const OnBoarding = forwardRef<HTMLDivElement, OnBoardingProps>(\n  (props, ref) => {\n    const {\n      avatar,\n      name,\n      prologue,\n      suggestionList,\n      readonly,\n      suggestionListWithString,\n      onSuggestionClick,\n      className,\n      prologueClassName,\n      mdBoxProps,\n      style,\n      showBackground,\n      layout,\n      enableAutoSizeImage,\n      imageAutoSizeContainerWidth,\n      eventCallbacks,\n      suggestionsWrap = false,\n      suggestionsWithStringWrap = false,\n      suggestionItemColor,\n    } = props;\n    const [botAvatar, setBotAvatar] = useState(avatar || defaultAvatar);\n    const suggestions = suggestionList || suggestionListWithString;\n    const isOnboardingEmpty = !prologue && !suggestions?.length;\n    useUpdateEffect(() => {\n      setBotAvatar(avatar || defaultAvatar);\n    }, [avatar]);\n    return (\n      <OnboardingContext.Provider\n        value={{\n          imageAutoSizeContainerWidth,\n          eventCallbacks,\n        }}\n      >\n        <div\n          ref={ref}\n          className={classNames('chat-uikit-on-boarding', className, {\n            'chat-uikit-on-boarding-pc': layout === Layout.PC,\n          })}\n          style={style}\n        >\n          <BotInfo\n            wrapperClassName={classNames(\n              'chat-uikit-on-boarding__bot',\n              !isOnboardingEmpty &&\n                'chat-uikit-on-boarding__bot__with__onboarding',\n            )}\n            avatar={botAvatar}\n            name={name}\n            showBackground={showBackground}\n            onError={() => setBotAvatar(defaultAvatar)}\n          />\n          <div className={classNames('chat-uikit-on-boarding__prologue-sug')}>\n            {prologue ? (\n              <div\n                className={classNames(\n                  [\n                    'py-12px',\n                    'px-16px',\n                    layout === Layout.MOBILE ? 'text-[16px]' : 'text-lg',\n                    'leading-[20px]',\n                    'rounded-normal',\n                    'bg-[var(--coz-mg-primary)]',\n                  ],\n                  'chat-uikit-on-boarding__prologue',\n                  prologueClassName,\n                  {\n                    '!coz-bg-image-bots !coz-stroke-image-bots': showBackground,\n                  },\n                )}\n                data-grab-mark={NO_MESSAGE_ID_MARK}\n              >\n                <MdBoxLazy\n                  markDown={prologue}\n                  autoFixSyntax={{ autoFixEnding: false }}\n                  slots={{\n                    Image: enableAutoSizeImage\n                      ? CozeImageWithSizeProps\n                      : undefined,\n                    Link: CozeLink,\n                  }}\n                  {...mdBoxProps}\n                ></MdBoxLazy>\n              </div>\n            ) : null}\n            {Boolean(suggestionList?.length) && (\n              <div\n                className={classNames(\n                  'chat-uikit-on-boarding__suggestions',\n                  'mt-8px',\n                  {\n                    'flex-wrap !flex-row gap-2': suggestionsWrap,\n                  },\n                )}\n              >\n                {suggestionList?.map((message, index) => (\n                  <SuggestionItem\n                    key={index}\n                    className={classNames({\n                      '!mb-0': suggestionsWrap,\n                    })}\n                    message={message}\n                    readonly={readonly}\n                    onSuggestionClick={({ text }) => onSuggestionClick?.(text)}\n                    showBackground={showBackground}\n                    color={suggestionItemColor}\n                  ></SuggestionItem>\n                ))}\n              </div>\n            )}\n            {Boolean(suggestionListWithString?.length) && (\n              <div\n                className={classNames(\n                  'chat-uikit-on-boarding__suggestions',\n                  'mt-8px',\n                  {\n                    'flex-wrap !flex-row gap-2': suggestionsWithStringWrap,\n                  },\n                )}\n              >\n                {suggestionListWithString?.map((content, index) => (\n                  <SuggestionItem\n                    key={index}\n                    className={classNames({\n                      '!mb-0': suggestionsWithStringWrap,\n                    })}\n                    content={content}\n                    readonly={readonly}\n                    onSuggestionClick={({ text }) => onSuggestionClick?.(text)}\n                    showBackground={showBackground}\n                    color={suggestionItemColor}\n                  ></SuggestionItem>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </OnboardingContext.Provider>\n    );\n  },\n);\n\nconst CozeImageWithSizeProps: FC<CozeImageProps> = props => {\n  const { imageAutoSizeContainerWidth } = useContext(OnboardingContext);\n  return (\n    <CozeImageWithPreview\n      {...props}\n      imageAutoSizeContainerWidth={imageAutoSizeContainerWidth}\n    />\n  );\n};\n\nCozeImageWithSizeProps.displayName = 'CozeImageWithSizeProps';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport classNames from 'classnames';\nimport { IconCozStopCircle } from '@coze-arch/coze-design/icons';\nimport { Button } from '@coze-arch/coze-design';\n\ninterface IProps {\n  className?: string;\n  content: string;\n  onClick?: () => void;\n}\n\nexport const StopRespondButton: FC<IProps> = props => {\n  const { content, onClick, className } = props;\n  return (\n    <Button\n      color=\"secondary\"\n      onClick={onClick}\n      className={classNames(\n        'coz-stroke-primary',\n        'coz-fg-primary',\n        'border-[1px]',\n        'border-solid',\n        'coz-shadow-default',\n        className,\n      )}\n      icon={<IconCozStopCircle />}\n    >\n      {content}\n    </Button>\n  );\n};\n\nStopRespondButton.displayName = 'StopRespondButton';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { cva, type VariantProps } from 'class-variance-authority';\n\nconst thinkingPlaceholderVariants = cva(\n  [\n    'h-[44px]',\n    'w-fit',\n    'flex',\n    'justify-center',\n    'items-center',\n    'py-12px',\n    'px-16px',\n    'rounded-normal',\n  ],\n  {\n    variants: {\n      backgroundColor: {\n        whiteness: ['bg-[var(--coz-mg-card)]'],\n        grey: ['bg-[var(--coz-mg-primary)]'],\n        primary: ['bg-[var(coz-mg-hglt-plus)]'],\n        withBackground: ['coz-bg-image-bots', 'coz-stroke-image-bots'],\n        none: ['coz-stroke-primary'],\n      },\n    },\n  },\n);\n\nexport type ThinkingPlaceholderVariantProps = Required<\n  VariantProps<typeof thinkingPlaceholderVariants>\n>;\nexport const typeSafeThinkingPlaceholderVariants: (\n  props: ThinkingPlaceholderVariantProps,\n) => string = thinkingPlaceholderVariants;\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./animation.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./animation.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport classNames from 'classnames';\n\nimport {\n  type ThinkingPlaceholderVariantProps,\n  typeSafeThinkingPlaceholderVariants,\n} from './variant';\nimport { type IThinkingPlaceholderProps } from './type';\nimport './animation.less';\n\nconst getVariantByProps = ({\n  theme,\n  showBackground,\n}: {\n  theme: IThinkingPlaceholderProps['theme'];\n  showBackground: boolean;\n}): ThinkingPlaceholderVariantProps => {\n  if (showBackground) {\n    return { backgroundColor: 'withBackground' };\n  }\n  if (!theme) {\n    return { backgroundColor: null };\n  }\n  return { backgroundColor: theme };\n};\n\nexport const ThinkingPlaceholder: FC<IThinkingPlaceholderProps> = props => {\n  const { className, theme = 'none', showBackground } = props;\n\n  return (\n    <div\n      className={classNames(\n        typeSafeThinkingPlaceholderVariants(\n          getVariantByProps({ showBackground: Boolean(showBackground), theme }),\n        ),\n        className,\n      )}\n    >\n      <div className=\"chat-uikit-coz-thinking-placeholder\"></div>\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const MODE_CONFIG = {\n  pc: {\n    size: {\n      width: 486,\n      height: 346,\n    },\n    centerWidth: 346,\n  },\n  mobile: {\n    size: {\n      width: 248,\n      height: 346,\n    },\n    centerWidth: 206,\n  },\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MODE_CONFIG } from './const';\n\n// Enter the transparency factor and color to return a new color\nexport function addAlpha(color: string, alpha: number): string {\n  const regex = /^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/;\n  if (!regex.test(color)) {\n    return color;\n  }\n\n  const values: string[] = color.slice(5, -1).split(',');\n  values.push(alpha.toString());\n\n  const newColor = `rgba(${values.join(',')})`;\n\n  return newColor;\n}\n\n// Image aspect ratio\nexport const getStandardRatio = (mode: 'pc' | 'mobile'): number =>\n  MODE_CONFIG[mode].size.width / MODE_CONFIG[mode].size.height;\n\n// Calculate whether to display gradual change Shadow = Screen Width > Image Width * (1- 2 * Left/Right Shadow Position)\nexport const computeShowGradient = (\n  width: number,\n  imgWidth: number,\n  percent: number,\n): boolean => width > imgWidth * (1 - (percent > 0 ? percent : 0) * 2);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useRef } from 'react';\n\nimport { useSize } from 'ahooks';\n\nimport { getStandardRatio } from '../utils';\nimport { type BackgroundImageInfo } from '../types';\nimport { MODE_CONFIG } from '../const';\n\nexport const useGetResponsiveBackgroundInfo = ({\n  backgroundInfo,\n}: {\n  backgroundInfo?: BackgroundImageInfo;\n}) => {\n  const targetRef = useRef(null);\n\n  const size = useSize(targetRef);\n  const { width = 0, height = 0 } = size ?? {};\n\n  const isMobileMode = width / height <= getStandardRatio('mobile');\n\n  const mobileBackgroundInfo = backgroundInfo?.mobile_background_image;\n  const pcBackgroundInfo = backgroundInfo?.web_background_image;\n\n  const currentBackgroundInfo = isMobileMode\n    ? mobileBackgroundInfo\n    : pcBackgroundInfo;\n\n  const { theme_color } = currentBackgroundInfo ?? {};\n  const { size: cropperSize } = MODE_CONFIG[isMobileMode ? 'mobile' : 'pc'];\n\n  return {\n    targetRef,\n    currentBackgroundInfo,\n    targetWidth: width,\n    targetHeight: height,\n    currentThemeColor: theme_color,\n    cropperSize,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState, useEffect } from 'react';\n\nimport { isEmpty } from 'lodash-es';\nimport classNames from 'classnames';\n\nimport { addAlpha, computeShowGradient } from './utils';\nimport {\n  type CanvasPosition,\n  type GradientPosition,\n  type BackgroundImageInfo,\n} from './types';\nimport { useGetResponsiveBackgroundInfo } from './hooks/use-get-background-info';\n\nexport interface WithRuleImgBackgroundProps {\n  preview?: boolean;\n  backgroundInfo?: BackgroundImageInfo;\n  onError?: () => void;\n}\n\nexport const Gradient: React.FC<{\n  position: number;\n  preview: boolean;\n  showGradient: boolean;\n  background: string;\n  direction: 'left' | 'right';\n}> = ({ position, preview, showGradient, background, direction }) => (\n  <div\n    className={classNames('absolute -translate-y-1/2 top-1/2 h-full z-10', {\n      'transition-all duration-500': !preview,\n    })}\n    style={{\n      [direction]: `${(position > 0 ? position : 0) * 100 - 0.1}%`, // 0.1 is shadow compensation to prevent gaps.\n      width: '10%',\n      background,\n      opacity: showGradient ? 1 : 0,\n    }}\n  ></div>\n);\nconst getGradient = (\n  gradient: GradientPosition,\n  canvasData: CanvasPosition,\n  cropperWidth = 1,\n) => {\n  const { left: cropperImgLeft = 0, width: cropperImgWidth = 0 } = canvasData;\n  // Pseudo-cropping, compatibility with inaccurate historical gradients\n  if (!isEmpty(canvasData)) {\n    return {\n      left: cropperImgLeft / cropperWidth,\n      right: (cropperWidth - cropperImgWidth - cropperImgLeft) / cropperWidth,\n    };\n  } else {\n    return gradient;\n  }\n};\nexport const WithRuleImgBackground: React.FC<WithRuleImgBackgroundProps> = ({\n  preview = false,\n  backgroundInfo,\n}) => {\n  const {\n    currentBackgroundInfo,\n    targetHeight,\n    targetWidth,\n    targetRef,\n    cropperSize,\n  } = useGetResponsiveBackgroundInfo({\n    backgroundInfo,\n  });\n\n  const {\n    theme_color,\n    gradient_position = {},\n    canvas_position = {},\n  } = currentBackgroundInfo ?? {};\n  const { left: gradientLeft = 0, right: gradientRight = 0 } = getGradient(\n    gradient_position,\n    canvas_position,\n    cropperSize.width,\n  );\n  const { top: cropperImgTop = 0, height: cropperImgHeight = 0 } =\n    canvas_position;\n\n  const [themeColor, setThemeColor] = useState(theme_color ?? 'transparent');\n\n  // Calculate the width of the image rendering area in proportion to the cropping box\n  const imgWidth = (targetHeight * cropperSize.width) / cropperSize.height;\n\n  const mediumColor = addAlpha(themeColor, 0.95);\n\n  useEffect(() => {\n    if (theme_color) {\n      setThemeColor(theme_color);\n    }\n  }, [currentBackgroundInfo]);\n\n  return (\n    <div\n      data-testid=\"chat.with_rule_img_background\"\n      ref={targetRef}\n      className={\n        'rule-img-background absolute left-1/2 -translate-x-1/2 w-full h-full overflow-hidden pointer-events-none'\n      }\n      style={{\n        background: preview ? 'none' : themeColor,\n        zIndex: preview ? 100 : 0,\n      }}\n    >\n      {/* Black shadow on background cover */}\n      <div className=\"bg-[rgba(0,0,0,0.12)] absolute w-full h-full z-[200] rounded-t-[6px]\"></div>\n\n      <div className=\"relative w-fit h-fit left-1/2 -translate-x-1/2\">\n        {\n          <Gradient\n            preview={preview}\n            showGradient={computeShowGradient(\n              targetWidth,\n              imgWidth,\n              gradientLeft,\n            )}\n            position={gradientLeft}\n            direction=\"left\"\n            background={`linear-gradient(90deg,  ${themeColor} 10%, ${mediumColor} 28%, transparent 92.4%)`}\n          />\n        }\n        {preview ? (\n          <div\n            style={{\n              height: targetHeight,\n              width: targetWidth,\n            }}\n          ></div>\n        ) : (\n          <div\n            style={{\n              width: imgWidth,\n              height: targetHeight,\n              position: 'relative',\n              overflow: 'hidden',\n            }}\n          >\n            <img\n              src={currentBackgroundInfo?.origin_image_url}\n              alt=\"\"\n              style={{\n                height: `${(cropperImgHeight / cropperSize.height) * 100}%`,\n                position: 'absolute',\n                left: `${\n                  gradientLeft ? gradientLeft * 100 : -gradientRight * 2 * 100\n                }%`,\n                top: `${(cropperImgTop / cropperSize.height) * 100}%`,\n              }}\n            />\n          </div>\n        )}\n\n        {\n          <Gradient\n            preview={preview}\n            showGradient={computeShowGradient(\n              targetWidth,\n              imgWidth,\n              gradientRight,\n            )}\n            position={gradientRight}\n            direction=\"right\"\n            background={`linear-gradient(90deg,  transparent 10% , ${mediumColor} 72%, ${themeColor} 92%)`}\n          />\n        }\n      </div>\n    </div>\n  );\n};\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { PropsWithChildren } from 'react';\n\nimport classNames from 'classnames';\nimport './index.less';\n\n/**\n * Sleeve component, the default width bar, is used to help the isolated component maintain width alignment with the message box\n */\nexport const FullWidthAligner = (\n  props: PropsWithChildren<{\n    alignWidth?: string;\n    className?: string;\n    innerWrapClassName?: string;\n  }>,\n) => {\n  const { alignWidth, children, className, innerWrapClassName } = props;\n  return (\n    <div\n      className={classNames('full-width-aligner', className)}\n      style={{\n        width: alignWidth || '100%',\n      }}\n    >\n      <span\n        className={classNames(\n          'full-width-aligner-inner-wrap',\n          innerWrapClassName,\n        )}\n      >\n        {children}\n      </span>\n    </div>\n  );\n};\n\nFullWidthAligner.displayName = 'UIKitFullWidthAligner';\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./animation.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./animation.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from 'classnames';\nimport { IconCozLongArrowUp } from '@coze-arch/coze-design/icons';\n\nimport { OutlinedIconButton } from '../button';\nimport { type ToNewestTipProps } from './type';\nimport './animation.less';\n\nexport const ToNewestTipUI = (props: ToNewestTipProps) => {\n  const { onClick, style, className, show, showBackground } = props;\n  return (\n    <OutlinedIconButton\n      className={classNames(\n        [\n          'shadow-normal',\n          'coz-fg-hglt',\n          'to-newest-tip-ui-animation',\n          '!rounded-full',\n        ],\n        !show && ['pointer-events-none', 'opacity-0'],\n        className,\n      )}\n      size=\"large\"\n      onClick={onClick}\n      style={style}\n      icon={<IconCozLongArrowUp className=\"rotate-180\" />}\n      showBackground={showBackground}\n    />\n  );\n};\n\nToNewestTipUI.displayName = 'UIKitToNewestTip';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext, useContext } from 'react';\n\nimport {\n  type ReadLocalStoreValue,\n  type WriteLocalStoreValue,\n} from '../../utils/local-cache';\n\ninterface LocalCacheContext {\n  readLocalStoreValue: ReadLocalStoreValue;\n  writeLocalStoreValue: WriteLocalStoreValue;\n}\n\nexport const LocalCacheContext = createContext<LocalCacheContext>({\n  readLocalStoreValue: () => {\n    throw new Error('unimplemented readLocalStoreValue');\n  },\n  writeLocalStoreValue: () => {\n    throw new Error('unimplemented writeLocalStoreValue');\n  },\n});\n\nexport const useLocalCache = () => useContext(LocalCacheContext);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const MESSAGE_BOX_CONTAINER_MARGIN_X_PC = 24;\nexport const MESSAGE_BOX_CONTAINER_MARGIN_X_MOBILE = 10;\nexport const MESSAGE_BOX_AVATAR_SIZE = 32;\nexport const MESSAGE_BOX_AVATAR_MARGIN_RIGHT = 12;\nexport const MESSAGE_BOX_BORDER = 1;\n\nexport const EXPECT_CONTEXT_WIDTH_PC =\n  MESSAGE_BOX_CONTAINER_MARGIN_X_PC * 2 +\n  MESSAGE_BOX_AVATAR_SIZE +\n  MESSAGE_BOX_AVATAR_MARGIN_RIGHT +\n  MESSAGE_BOX_BORDER * 2;\n\nexport const EXPECT_CONTEXT_WIDTH_MOBILE =\n  MESSAGE_BOX_CONTAINER_MARGIN_X_MOBILE * 2 +\n  MESSAGE_BOX_AVATAR_SIZE +\n  MESSAGE_BOX_AVATAR_MARGIN_RIGHT +\n  MESSAGE_BOX_BORDER * 2;\n\nexport const MD_BOX_INNER_PADDING = 26;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { cva, type VariantProps } from 'class-variance-authority';\n\nconst audioStaticToastVariants = cva(['px-24px', 'py-10px', 'rounded-[99px]'], {\n  variants: {\n    theme: {\n      primary: ['bg-[#F2F3F7]'],\n      danger: ['bg-[#FFEFF1]'],\n      background: ['coz-bg-image-bots'],\n    },\n    color: {\n      primary: ['coz-fg-primary'],\n      danger: ['coz-fg-hglt-red'],\n    },\n  },\n});\n\nexport type AudioStaticToastVariantsProps = Required<\n  VariantProps<typeof audioStaticToastVariants>\n>;\nexport const typeSafeAudioStaticToastVariants: (\n  props: AudioStaticToastVariantsProps,\n) => string = audioStaticToastVariants;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type PropsWithChildren } from 'react';\n\nimport classNames from 'classnames';\n\nimport { typeSafeAudioStaticToastVariants } from './variant';\n\nexport interface AudioStaticToastProps {\n  theme?: 'danger' | 'primary' | 'background';\n  className?: string;\n  color?: 'primary' | 'danger';\n}\n\nexport const AudioStaticToast: React.FC<\n  PropsWithChildren<AudioStaticToastProps>\n> = ({ children, theme = 'primary', color = 'primary', className }) => {\n  const cvaClassNames = typeSafeAudioStaticToastVariants({ theme, color });\n  return <div className={classNames(cvaClassNames, className)}>{children}</div>;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState, useRef, useLayoutEffect } from 'react';\n\n// eslint-disable-next-line @typescript-eslint/no-invalid-void-type -- x\ntype Destructor = (() => void) | void;\ntype Fn<ARGS extends unknown[]> = (...args: ARGS) => Destructor;\n\nexport const useImperativeLayoutEffect = <Params extends unknown[]>(\n  effect: Fn<Params>,\n) => {\n  const [effectValue, setEffectValue] = useState(0);\n  const paramRef = useRef<Params>();\n  const effectRef = useRef<Fn<Params>>(() => undefined);\n  effectRef.current = effect;\n  useLayoutEffect(() => {\n    if (!effectValue) {\n      return;\n    }\n    // After one run, it must not be undefined.\n    return paramRef.current && effectRef.current(...paramRef.current);\n  }, [effectValue]);\n\n  return (...args: Params) => {\n    paramRef.current = args;\n    setEffectValue(pre => pre + 1);\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useRef } from 'react';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any -- .\ntype Fn<ARGS extends any[], R> = (...args: ARGS) => R;\n\n// https://github.com/Volune/use-event-callback/blob/master/src/index.ts\n// eslint-disable-next-line @typescript-eslint/no-explicit-any -- .\nexport const useEventCallback = <A extends any[], R>(\n  fn: Fn<A, R>,\n): Fn<A, R> => {\n  const ref = useRef(fn);\n  ref.current = fn;\n  const exposedRef = useRef((...args: A) => ref.current(...args));\n  return exposedRef.current;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isNumber, isObject, isString } from 'lodash-es';\n\ntype CheckMethodName = 'is-string' | 'is-number';\n\nconst checkMethodsMap = new Map<CheckMethodName, (sth: unknown) => boolean>([\n  ['is-string', isString],\n  ['is-number', isNumber],\n]);\n\n/**\n * think about:\n * https://www.npmjs.com/package/type-plus\n * https://www.npmjs.com/package/generic-type-guard\n * https://github.com/runtypes/runtypes\n */\nexport const performSimpleObjectTypeCheck = <T extends Record<string, unknown>>(\n  sth: unknown,\n  pairs: [key: keyof T, checkMethod: CheckMethodName][],\n): sth is T => {\n  if (!isObject(sth)) {\n    return false;\n  }\n  return pairs.every(([k, type]) => {\n    if (!(k in sth)) {\n      return false;\n    }\n    // eslint-disable-next-line @typescript-eslint/ban-ts-comment -- runtime safe\n    // @ts-expect-error\n    const val = sth[k];\n    return checkMethodsMap.get(type)?.(val);\n  });\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const typeSafeJsonParse = (\n  str: string,\n  onParseError: (error: Error) => void,\n): unknown => {\n  try {\n    return JSON.parse(str);\n  } catch (e) {\n    onParseError(e as Error);\n    return null;\n  }\n};\n\n/**\n * Generic type annotations may require the use of type declarations.\n * refer: https://github.com/microsoft/TypeScript/issues/15300.\n */\nexport const typeSafeJsonParseEnhanced = <T>({\n  str,\n  onParseError,\n  verifyStruct,\n  onVerifyError,\n}: {\n  str: string;\n  onParseError: (error: Error) => void;\n  /**\n   * Implement a type check that returns whether it passes (boolean); in fact, it depends on self-awareness.\n   * It can be defined separately or written as an internal connection function, but note that the return value is marked as predicate,\n   * refer: https://github.com/microsoft/TypeScript/issues/38390.\n   */\n  verifyStruct: (sth: unknown) => sth is T;\n  /** Error cause: validation crashed; validation failed */\n  onVerifyError: (error: Error) => void;\n}): T | null => {\n  const res = typeSafeJsonParse(str, onParseError);\n\n  function assertStruct(resLocal: unknown): asserts resLocal is T {\n    const ok = verifyStruct(resLocal);\n    if (!ok) {\n      throw new Error('verify struct no pass');\n    }\n  }\n\n  try {\n    assertStruct(res);\n    return res;\n  } catch (e) {\n    onVerifyError(e as Error);\n    return null;\n  }\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isObject } from 'lodash-es';\n\n/**\n * @param inputError can pass anything, usually catch (e) that e.\n * @param reason redundant explanation, I feel there is eventName, it's useless\n */\nexport const getReportError = (\n  inputError: unknown,\n  reason?: string,\n): {\n  error: Error;\n  meta: Record<string, unknown>;\n} => {\n  if (inputError instanceof Error) {\n    return {\n      error: inputError,\n      meta: { reason },\n    };\n  }\n  if (!isObject(inputError)) {\n    return {\n      error: new Error(String(inputError)),\n      meta: { reason },\n    };\n  }\n  return {\n    error: new Error(''),\n    meta: { ...covertInputObject(inputError), reason },\n  };\n};\n\nconst covertInputObject = (inputError: object) => {\n  if ('reason' in inputError) {\n    return {\n      ...inputError,\n      reasonOfInputError: inputError.reason,\n    };\n  }\n  return inputError;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Off-line environment blocking; only exception output and asynchronous errors are thrown after build\n */\nexport const safeAsyncThrow = (e: string) => {\n  const err = new Error(`[chat-area] ${e}`);\n  if (IS_DEV_MODE || IS_BOE) {\n    throw err;\n  }\n\n  setTimeout(() => {\n    throw err;\n  });\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isUndefined, omitBy } from 'lodash-es';\n\n/**\n * Zustand updates helper methods, checking imported parameter objects, discarding items with undefined values.\n * Zustand itself has no filtering logic. If there is no problem with the type, it may accidentally set the item to an undefined value\n */\nexport const updateOnlyDefined = <T extends Record<string, unknown>>(\n  updater: (sth: T) => void,\n  val: T,\n) => {\n  const left = omitBy(val, isUndefined) as T;\n  if (!Object.keys(left).length) {\n    return;\n  }\n  updater(left);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport bigInt, { max, min } from 'big-integer';\n\nexport const sortInt64CompareFn = (a: string, b: string) =>\n  bigInt(a).compare(b);\n\n/** O (1) Traversal */\nexport const getMinMax = (...nums: string[]) => {\n  const num = nums.at(0);\n  if (num === undefined) {\n    return null;\n  }\n  let minRes = bigInt(num);\n  let maxRes = bigInt(num);\n  for (const curStr of nums) {\n    const cur = bigInt(curStr);\n    minRes = min(minRes, cur);\n    maxRes = max(maxRes, cur);\n  }\n  return {\n    min: minRes.toString(),\n    max: maxRes.toString(),\n  };\n};\n\nexport const getIsDiffWithinRange = (a: string, b: string, range: number) => {\n  const diff = bigInt(a).minus(bigInt(b));\n  const abs = diff.abs();\n  return abs.lesser(bigInt(range));\n};\n\nexport const getInt64AbsDifference = (a: string, b: string) => {\n  const diff = bigInt(a).minus(bigInt(b));\n  const abs = diff.abs();\n  return abs.toJSNumber();\n};\n\nexport const compareInt64 = (a: string) => {\n  const bigA = bigInt(a);\n  return {\n    greaterThan: (b: string) => bigA.greater(bigInt(b)),\n    lesserThan: (b: string) => bigA.lesser(bigInt(b)),\n    eq: (b: string) => bigA.eq(bigInt(b)),\n  };\n};\n\nexport const compute = (a: string) => {\n  const bigA = bigInt(a);\n  return {\n    add: (b: string) => bigA.add(b).toString(),\n    subtract: (b: string) => bigA.subtract(b).toString(),\n    prev: () => bigA.prev().toString(),\n    next: () => bigA.next().toString(),\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const sleep = (t = 0) => new Promise(resolve => setTimeout(resolve, t));\n\nexport class Deferred<T = void> {\n  promise: Promise<T>;\n  resolve!: (value: T) => void;\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any -- .\n  reject!: (reason?: any) => void;\n  then: Promise<T>['then'];\n  constructor() {\n    this.promise = new Promise<T>((resolve, reject) => {\n      this.resolve = resolve;\n      this.reject = reject;\n    });\n    this.then = this.promise.then.bind(this.promise);\n  }\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { safeAsyncThrow } from './safe-async-throw';\n\nexport const flatMapByKeyList = <T>(\n  map: Map<string, T>,\n  arr: string[],\n): T[] => {\n  const res: T[] = [];\n  for (const key of arr) {\n    const val = map.get(key);\n    if (!val) {\n      safeAsyncThrow(`[flatMapByKeyList] cannot find ${key} in map`);\n      continue;\n    }\n    res.push(val);\n  }\n  return res;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Check for no missing items\n */\nexport const exhaustiveCheckForRecord = (_: Record<string, never>) => undefined;\n\nexport const exhaustiveCheckSimple = (_: never) => undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { sleep } from './async';\n\ntype Fn<ARGS extends unknown[], Ret = unknown> = (...args: ARGS) => Ret;\n\n/**\n * Limit viewership of asynchronous methods with limited viewership of the form:\n * 1. The first limited requests in timeWindow are not limited and sent immediately\n * 2. After more than the limit of requests in timeWindow, add onLimitDelay millisecond delay to each request in turn\n *\n * Note that the queue is added, as invoked: [1 (0ms), 2 (0ms), 3 (0ms), 4 (0ms) ]; limit: [1 (0ms), 2 (0ms), 3 (100ms), 4 (200ms) ]\n *\n * Another note: This design has been slammed, arguing that debounce can be replaced and the implementation is too complex, but consider:\n * 1. Support the pull of the list loaded in both directions. Simple use of debounce may cause the request to be lost on one side; adding a delay can ensure that the request is not lost\n * 2. Once the list is pulled, it may lead to malignant problems, such as dense high-frequency access to the server level interface\n *\n * The above scenarios should not usually appear, so the limited design is only a cover for extreme scenarios, and the upper UI errors should be properly resolved\n * TODO: wlt - supplementary testcase\n */\nexport class RateLimit<ARGS extends unknown[], Ret> {\n  constructor(\n    private fn: Fn<ARGS, Promise<Ret>>,\n    private config: {\n      onLimitDelay: number;\n      limit: number;\n      timeWindow: number;\n    },\n  ) {}\n\n  private records: number[] = [];\n\n  private getNewInvokeDelay(): number {\n    const { timeWindow, limit, onLimitDelay } = this.config;\n    const now = Date.now();\n    const windowEdge = now - timeWindow;\n    const idx = this.records.findIndex(t => t >= windowEdge);\n    if (idx < 0) {\n      return 0;\n    }\n    const lasts = this.records.slice(idx);\n    if (lasts.length < limit) {\n      return 0;\n    }\n    const last = lasts.at(-1);\n    if (!last) {\n      return 0;\n    }\n    return last + onLimitDelay - now;\n  }\n\n  private clearRecords() {\n    const { timeWindow } = this.config;\n    const now = Date.now();\n    const windowEdge = now - timeWindow;\n    const idx = this.records.findLastIndex(t => t < windowEdge);\n    if (idx >= 0) {\n      this.records = this.records.slice(idx + 1);\n    }\n  }\n\n  invoke = async (...args: ARGS): Promise<Ret> => {\n    const invokeDelay = this.getNewInvokeDelay();\n    const now = Date.now();\n    this.records.push(invokeDelay + now);\n    if (invokeDelay) {\n      await sleep(invokeDelay);\n    }\n    this.clearRecords();\n    return this.fn(...args);\n  };\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type Text, type Link, type Parent, type Image } from 'mdast';\nimport { isObject, isUndefined } from 'lodash-es';\n/**\n * Convert markdown to plain text\n * @param markdown Markdown text\n * @Returns string plain text\n */\nexport const getTextFromAst = (ast: unknown): string => {\n  if (isParent(ast)) {\n    return `${ast.children.map(child => getTextFromAst(child)).join('')}`;\n  }\n\n  if (isText(ast)) {\n    return ast.value;\n  }\n\n  if (isLink(ast)) {\n    return `[${getTextFromAst(ast.children)}](${ast.url})`;\n  }\n\n  if (isImage(ast)) {\n    return `![${ast.alt}](${ast.url})`;\n  }\n\n  return '';\n};\n\nconst isParent = (ast: unknown): ast is Parent =>\n  !!ast && isObject(ast) && 'children' in ast && !isUndefined(ast?.children);\n\nconst isLink = (ast: unknown): ast is Link =>\n  isObject(ast) && 'type' in ast && !isUndefined(ast) && ast.type === 'link';\n\nconst isImage = (ast: unknown): ast is Image =>\n  !isUndefined(ast) && isObject(ast) && 'type' in ast && ast.type === 'image';\n\nconst isText = (ast: unknown): ast is Text =>\n  !isUndefined(ast) && isObject(ast) && 'type' in ast && ast.type === 'text';\n\nexport const parseMarkdownHelper = {\n  isParent,\n  isLink,\n  isImage,\n  isText,\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport mitt from 'mitt';\n\n/**\n * @Params to refresh the favorites list\n * @Params id - the bot id of the operation\n * @Params numDelta - Favorites change\n * @Params emitPosition - trigger location for event tracking, provenance, etc\n */\nexport interface RefreshFavListParams {\n  id?: string;\n  numDelta: number;\n  emitPosition?: string;\n}\n\nexport interface CreateProjectByCopyTemplateFromSidebarParam {\n  toSpaceId: string;\n}\n\n/**\n * transaction table\n *\n * Key is the event name and value is the parameter type\n */\n// eslint-disable-next-line @typescript-eslint/consistent-type-definitions -- mitt can't use interface\ntype EventMap = {\n  /**\n   * Refresh Favorites List\n   *\n   * There is a collection list in the secondary navigation of the homepage and workspace, and the collection list needs to be refreshed in conjunction when the bot card is quickly collected.\n   * Deleting the bot and migrating the bot also need to be refreshed, which is regarded as canceling the collection.\n   *\n   * @Params refreshFavList - Parameters to refresh the favorites list\n   * @Params id - the bot id of the operation\n   * @Params numDelta - Favorites change\n   * @Params emitPosition - trigger location for event tracking, provenance, etc\n   */\n  refreshFavList: RefreshFavListParams;\n  /**\n   * New project in the left sidebar\n   * This event is triggered when you select Create by Template and successfully create a task\n   */\n  createProjectByCopyTemplateFromSidebar: CreateProjectByCopyTemplateFromSidebarParam;\n};\n\nexport type CozeMittEventType = keyof EventMap;\n\nexport const cozeMitt = mitt<EventMap>();\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type WorkflowJSON,\n  type WorkflowDocument,\n  type WorkflowNodeJSON,\n  type WorkflowNodeEntity,\n} from '@flowgram.ai/free-layout-core';\n\n/**\n * Global data transformation\n */\nexport interface WorkflowJSONFormatContribution {\n  /**\n   * Called during data initialization\n   */\n  formatOnInit?: (json: WorkflowJSON, doc: WorkflowDocument) => WorkflowJSON;\n  /**\n   * Called when data is submitted\n   */\n  formatOnSubmit?: (json: WorkflowJSON, doc: WorkflowDocument) => WorkflowJSON;\n  /**\n   * Transform node initialization data\n   * @param data\n   * Parameters initialized by @param\n   */\n  formatNodeOnInit?: (\n    data: WorkflowNodeJSON,\n    doc: WorkflowDocument,\n    isClone?: boolean,\n  ) => WorkflowNodeJSON;\n  /**\n   * Unified conversion form submission data\n   * @param data\n   */\n  formatNodeOnSubmit?: (\n    data: WorkflowNodeJSON,\n    doc: WorkflowDocument,\n    node: WorkflowNodeEntity,\n  ) => WorkflowNodeJSON;\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport const WorkflowJSONFormatContribution = Symbol(\n  'WorkflowJSONFormatContribution',\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useLayoutEffect } from 'react';\n\nimport {\n  type Entity,\n  EntityManager,\n  type EntityRegistry,\n  usePlaygroundContainer,\n  useRefresh,\n} from '@flowgram.ai/free-layout-editor';\n\n/**\n * Get entities and listen for changes\n * Please use useConfigEntity instead\n * @deprecated\n */\nexport function useEntity<T extends Entity>(\n  entityRegistry: EntityRegistry,\n  autoCreate = true,\n): T {\n  const entityManager = usePlaygroundContainer().get(EntityManager);\n  const entity = entityManager.getEntity<T>(entityRegistry, autoCreate) as T;\n  const refresh = useRefresh(entity.version);\n  useLayoutEffect(() => {\n    const dispose = entity.onEntityChange(() => {\n      refresh(entity.version);\n    });\n    return () => dispose.dispose();\n  }, [entityManager, refresh, entity]);\n  return entity;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport Uploader, { type ImageXFileOption } from 'tt-uploader';\nimport {\n  type Config,\n  type STSToken,\n  type ObjectSync,\n} from '@coze-arch/uploader-interface';\n\nexport interface FileOption {\n  file: Blob;\n  stsToken: STSToken;\n  type?: any;\n  callbackArgs?: string;\n  testHost?: string;\n  objectSync?: ObjectSync;\n}\n\nexport const getUploader = (config: Config, isOversea?: boolean) => {\n  const imageHost = (\n    config.imageHost ||\n    config.imageFallbackHost ||\n    ''\n  ).replace(/^https:\\/\\//, config.schema ? `${config.schema}://` : '');\n  const uploader = new Uploader({\n    /**\n     * The schema needs to be dynamically obtained according to the deployment environment of the current user\n     * Schema compatibility with special HTTP scenario fields\n     */\n    schema: config.schema,\n    region: isOversea ? 'ap-singapore-1' : 'cn-north-1',\n    imageHost,\n    appId: config.appId,\n    userId: config.userId,\n    useFileExtension: config.useFileExtension,\n    uploadTimeout: config.uploadTimeout,\n    imageConfig: config.imageConfig,\n  } as any);\n\n  const originalAddImageFile: (option: ImageXFileOption) => string =\n    uploader.addImageFile.bind(uploader);\n\n  uploader.addFile = function (options: FileOption) {\n    const imageOptions: ImageXFileOption = {\n      file: options.file,\n      stsToken: options.stsToken,\n    };\n    return originalAddImageFile(imageOptions);\n  };\n  return uploader as CozeUploader;\n};\n\ntype UploadEventName = 'complete' | 'error' | 'progress' | 'stream-progress';\n\nexport type CozeUploader = Uploader & {\n  addFile: (options: FileOption) => string;\n  removeAllListeners: (eventName: UploadEventName) => void;\n};\n\nexport {\n  type Config,\n  type EventPayloadMaps,\n} from '@coze-arch/uploader-interface';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable @typescript-eslint/no-empty-function */\n/* eslint-disable @typescript-eslint/no-useless-constructor */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nexport interface ConnectionOptions {\n  // The business parameters of the call, corresponding to headers in the message structure ['X-Coze-Biz']\n  biz: string;\n  // The ID of the service sent to\n  service?: number;\n  // Whether to accept all messages. Default false, onMessage will only emit biz related messages\n  acceptAllBizMessages?: boolean;\n  // The accepted biz message, the default is the incoming biz.\n  acceptBiz?: string[];\n  // FWS initialization parameter\n  fwsOptions?: any;\n}\n\nexport interface FrontierEventMap {\n  error: any;\n  message: any;\n  open: any;\n  close: any;\n  ack: any;\n}\n\nexport class Connection {\n  readonly service?: number;\n\n  constructor(props: ConnectionOptions, channel: any) {}\n\n  /**\n   * Get connection parameters\n   */\n  getInitConfig() {}\n\n  getLaunchConfig() {}\n\n  /**\n   * Monitor fws\n   */\n  addEventListener(event: string, listener: (data: any) => void) {}\n\n  /**\n   * Remove fws listening\n   */\n  removeEventListener<T extends keyof Record<string, any>>(\n    event: T,\n    listener: (data: Record<string, any>[T]) => void,\n  ) {}\n\n  send(data: any, options: any = {}) {}\n\n  reconnect() {}\n\n  pingOnce() {}\n\n  // To close the connection, you need to notify the manager, and it will decide whether to really close the channel\n  close() {}\n\n  destroy() {}\n}\n\nexport class WebSocketManager {\n  deviceId = '';\n\n  channel: any = null;\n\n  /**\n   * Create a connection instance\n   */\n  createConnection(options: ConnectionOptions): Connection {\n    return new Connection(options, this.channel);\n  }\n\n  /**\n   * Create a new WS channel without reusing the existing channel\n   */\n  createChannel(options: ConnectionOptions) {}\n}\n\nexport default new WebSocketManager();\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport s from './index.module.less';\n\nexport const CaseBlock: React.FC<{\n  label: string;\n  content: React.ReactNode;\n}> = ({ label, content }) => (\n  <div role=\"article\" className=\"flex flex-col gap-[4px]\">\n    <div className={s['case-block-label']}>{label}</div>\n    <div className=\"flex\">{content}</div>\n  </div>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { type ReactNode } from 'react';\n\nimport { I18n } from '@coze-arch/i18n';\n\nimport { CaseBlock } from './case-block';\n\nimport s from './index.module.less';\n\nconst TipContent: React.FC<{ description: ReactNode }> = ({ description }) => (\n  <div className={s['rewrite-block-content']}>{description}</div>\n);\n\nexport const RewriteTips: React.FC = () => {\n  const caseList = [\n    {\n      labelKey: 'kl_write_035',\n      contentKey: 'kl_write_036',\n    },\n    {\n      labelKey: 'kl_write_037',\n      contentKey: 'kl_write_038',\n    },\n    {\n      labelKey: 'kl_write_039',\n      contentKey: 'kl_write_040',\n    },\n  ] as const;\n\n  return (\n    <div className=\"flex flex-col gap-[8px]\">\n      <div className={s['tips-headline']}>{I18n.t('kl_write_034')}</div>\n      {caseList.map(({ labelKey, contentKey }) => (\n        <CaseBlock\n          key={labelKey}\n          label={I18n.t(labelKey)}\n          content={<TipContent description={I18n.t(contentKey)} />}\n        />\n      ))}\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { I18n } from '@coze-arch/i18n';\n\nimport { CaseBlock } from './case-block';\n\nimport s from './index.module.less';\n\ninterface TipContentProps {\n  labelContentPairs: {\n    label: string;\n    content: string;\n  }[];\n}\n\nconst TipContent: React.FC<TipContentProps> = ({ labelContentPairs }) => (\n  <div className={s['rerank-block-content']}>\n    {labelContentPairs.map(({ label, content }, index) => (\n      <div key={`${label}-${index}`} className=\"flex items-center\">\n        <div\n          style={{\n            minWidth: '50px',\n            color: 'var(--Fg-COZ-fg-hglt, #543EF7)',\n          }}\n          className={s['rerank-block-content-text']}\n        >\n          {label}\n        </div>\n        <div\n          style={{\n            color: 'var(--Fg-COZ-fg-primary, rgba(32, 41, 65, 0.89))',\n          }}\n          className={s['rerank-block-content-text']}\n        >\n          {content}\n        </div>\n      </div>\n    ))}\n  </div>\n);\n\nexport const RerankTips: React.FC = () => {\n  const labelContentPairs = [\n    {\n      label: I18n.t('kl_write_041', { index: 'A' }),\n      content: I18n.t('kl_write_042'),\n    },\n    {\n      label: I18n.t('kl_write_041', { index: 'B' }),\n      content: I18n.t('kl_write_043'),\n    },\n    {\n      label: I18n.t('kl_write_041', { index: 'C' }),\n      content: I18n.t('kl_write_044'),\n    },\n    {\n      label: I18n.t('kl_write_041', { index: 'D' }),\n      content: I18n.t('kl_write_045'),\n    },\n  ];\n\n  const secLabelContentPairs = [\n    {\n      label: I18n.t('kl_write_041', { index: 'C' }),\n      content: I18n.t('kl_write_044'),\n    },\n    {\n      label: I18n.t('kl_write_041', { index: 'D' }),\n      content: I18n.t('kl_write_045'),\n    },\n    {\n      label: I18n.t('kl_write_041', { index: 'B' }),\n      content: I18n.t('kl_write_043'),\n    },\n    {\n      label: I18n.t('kl_write_041', { index: 'A' }),\n      content: I18n.t('kl_write_042'),\n    },\n  ];\n\n  return (\n    <div className=\"flex flex-col gap-[8px]\">\n      <div className={s['tips-headline']}>{I18n.t('kl_write_034')}</div>\n      <CaseBlock\n        label={I18n.t('kl_write_046')}\n        content={<TipContent labelContentPairs={labelContentPairs} />}\n      />\n      <CaseBlock\n        label={I18n.t('kl_write_047')}\n        content={<TipContent labelContentPairs={secLabelContentPairs} />}\n      />\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ReactNode, type Ref, forwardRef } from 'react';\n\nimport Icon, { type IconProps } from '@douyinfe/semi-icons';\n\nexport const IconFactory = (svg: ReactNode) =>\n  forwardRef(\n    (props: Omit<IconProps, 'svg' | 'ref'>, ref: Ref<HTMLSpanElement>) => (\n      <Icon svg={svg} {...props} ref={ref} />\n    ),\n  );\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable max-lines */\nimport { IconFactory } from './factory';\nimport { ReactComponent as SvtPlaygroundIcon } from './assets/playground-icon.svg';\nimport { ReactComponent as SvtPlaygroundIconFill } from './assets/playground-icon-fill.svg';\nimport { ReactComponent as SvgMarIcon } from './assets/mar.svg';\nimport { ReactComponent as SvgMarColorIcon } from './assets/mar-c.svg';\nimport { ReactComponent as SvgLocalPluginIcon } from './assets/localIcon.svg';\nimport { ReactComponent as SvgWeixinIcon } from './assets/icons/third-party-icons/weixin.svg';\nimport { ReactComponent as SvgTextFileIcon } from './assets/icons/third-party-icons/text-file.svg';\nimport { ReactComponent as SvgSheetFileIcon } from './assets/icons/third-party-icons/sheet-file.svg';\nimport { ReactComponent as SvgNotionIcon } from './assets/icons/third-party-icons/notion.svg';\nimport { ReactComponent as SvgGoogleIcon } from './assets/icons/third-party-icons/google.svg';\nimport { ReactComponent as SvgFolderIcon } from './assets/icons/third-party-icons/folder.svg';\nimport { ReactComponent as SvgFeishuIcon } from './assets/icons/third-party-icons/feishu.svg';\nimport { ReactComponent as SvgStoreMenuWorkflow } from './assets/icons/store-menu-workflow.svg';\nimport { ReactComponent as SvgStoreMenuWorkflowSelected } from './assets/icons/store-menu-workflow-selected.svg';\nimport { ReactComponent as SvgStoreIcon } from './assets/icons/store-icon.svg';\nimport { ReactComponent as SvgSpanWorkflow } from './assets/icons/span-type/icon-workflow.svg';\nimport { ReactComponent as SvgSpanWorkflowStart } from './assets/icons/span-type/icon-workflow-start.svg';\nimport { ReactComponent as SvgSpanWorkflowEnd } from './assets/icons/span-type/icon-workflow-end.svg';\nimport { ReactComponent as SvgSpanVar } from './assets/icons/span-type/icon-var.svg';\nimport { ReactComponent as SvgSpanUnknown } from './assets/icons/span-type/icon-unknown.svg';\nimport { ReactComponent as SvgSpanPluginTool } from './assets/icons/span-type/icon-plugin-tool.svg';\nimport { ReactComponent as SvgSpanNodeDamaged } from './assets/icons/span-type/icon-node-damaged.svg';\nimport { ReactComponent as SvgSpanMessage } from './assets/icons/span-type/icon-message.svg';\nimport { ReactComponent as SvgSpanLLMCall } from './assets/icons/span-type/icon-llm-call.svg';\nimport { ReactComponent as SvgSpanKnowledge } from './assets/icons/span-type/icon-knowledge.svg';\nimport { ReactComponent as SvgSpanHook } from './assets/icons/span-type/icon-hook.svg';\nimport { ReactComponent as SvgSpanDatabase } from './assets/icons/span-type/icon-database.svg';\nimport { ReactComponent as SvgSpanCondition } from './assets/icons/span-type/icon-condition.svg';\nimport { ReactComponent as SvgSpanCode } from './assets/icons/span-type/icon-code.svg';\nimport { ReactComponent as SvgSpanCard } from './assets/icons/span-type/icon-card.svg';\nimport { ReactComponent as SvgSpanBot } from './assets/icons/span-type/icon-bot.svg';\nimport { ReactComponent as SvgSpanBMParallel } from './assets/icons/span-type/icon-bm-parallel.svg';\nimport { ReactComponent as SvgSpanBMConnector } from './assets/icons/span-type/icon-bm-connector.svg';\nimport { ReactComponent as SvgSpanBMBatch } from './assets/icons/span-type/icon-bm-batch.svg';\nimport { ReactComponent as SvgSpanAgent } from './assets/icons/span-type/icon-agent.svg';\nimport { ReactComponent as SvgTemplateShortcutTransparency } from './assets/icons/shortcut-icons/top_panel_close_transparency.svg';\nimport { ReactComponent as SvgLoadMoreShortcuts } from './assets/icons/shortcut-icons/icon_more.svg';\nimport { ReactComponent as SvgShortcutTrash } from './assets/icons/shortcut-icons/icon-trash.svg';\nimport { ReactComponent as SvgTemplateShortcut } from './assets/icons/shortcut-icons/icon-template-shortcut.svg';\nimport { ReactComponent as SvgShortcutEdit } from './assets/icons/shortcut-icons/icon-edit.svg';\nimport { ReactComponent as SvgShortcutDrag } from './assets/icons/shortcut-icons/icon-drag.svg';\nimport { ReactComponent as SvgShortcutDisorder } from './assets/icons/shortcut-icons/icon-disorder.svg';\nimport { ReactComponent as SvgShortcutComponentTag } from './assets/icons/shortcut-icons/icon-comp-tag.svg';\nimport { ReactComponent as SvgTemplateShortcutClose } from './assets/icons/shortcut-icons/icon-close.svg';\nimport { ReactComponent as SvgSceneListEmptyIcon } from './assets/icons/scene-list-empty.svg';\nimport { ReactComponent as SvgExampleNormalIcon } from './assets/icons/plugin-example/icon-example-normal.svg';\nimport { ReactComponent as SvgExampleNoneIcon } from './assets/icons/plugin-example/icon-example-none.svg';\nimport { ReactComponent as SvgExampleInvalidIcon } from './assets/icons/plugin-example/icon-example-invalid.svg';\nimport { ReactComponent as MenuCollapse } from './assets/icons/menu-collapse.svg';\nimport { ReactComponent as SvgValcanoColored } from './assets/icons/logo-volcano-colored.svg';\nimport { ReactComponent as SvgLargeEmptyIcon } from './assets/icons/large-empty.svg';\nimport { ReactComponent as SvgKnowledgeTableAvatar } from './assets/icons/knowledge/table-type-avatar.svg';\nimport { ReactComponent as SvgKnowledgeImgAvatar } from './assets/icons/knowledge/img-type-avatar.svg';\nimport { ReactComponent as SvgUpdateFrequency } from './assets/icons/knowledge/icon_forward-15s_outlined.svg';\nimport { ReactComponent as SvgKnowledgeEdit } from './assets/icons/knowledge/icon_edit_round_outlined.svg';\nimport { ReactComponent as SvgArrowKnowledgeIcon } from './assets/icons/knowledge/icon_arrow-right_fill.svg';\nimport { ReactComponent as SvgViewContentOutlinedIcon } from './assets/icons/knowledge/icon-view-content-outlined.svg';\nimport { ReactComponent as SvgUpdateTableConfig } from './assets/icons/knowledge/icon-update-table-config.svg';\nimport { ReactComponent as SvgKnowledgeSetting } from './assets/icons/knowledge/icon-knwoledge-setting.svg';\nimport { ReactComponent as SvgKnowledgeSettingOutlinedIcon } from './assets/icons/knowledge/icon-knowledge-setting-outlined.svg';\nimport { ReactComponent as SvgDragOutlined } from './assets/icons/knowledge/icon-drag-outlined.svg';\nimport { ReactComponent as SvgDocResegment } from './assets/icons/knowledge/icon-doc-resegment.svg';\nimport { ReactComponent as SvgDocRefreshOutlinedIcon } from './assets/icons/knowledge/icon-doc-refresh-outlined.svg';\nimport { ReactComponent as SvgDocLinkOutlinedIcon } from './assets/icons/knowledge/icon-doc-link-outlined.svg';\nimport { ReactComponent as SvgAddIcon } from './assets/icons/knowledge/icon-add-middle-outlined.svg';\nimport { ReactComponent as SvgKnowledgeDocAvatar } from './assets/icons/knowledge/document-type-avatar.svg';\nimport { ReactComponent as SvgXColorful } from './assets/icons/icon_x_colorful.svg';\nimport { ReactComponent as SvgWeiboColorful } from './assets/icons/icon_weibo_colorful.svg';\nimport { ReactComponent as SvgWeChatColorful } from './assets/icons/icon_wechat_colorful.svg';\nimport { ReactComponent as SvgWarningSize24 } from './assets/icons/icon_warning_size_24.svg';\nimport { ReactComponent as SvgWaringOrangeIcon } from './assets/icons/icon_warning_colorful-dm.svg';\nimport { ReactComponent as SvgWarning } from './assets/icons/icon_warning.svg';\nimport { ReactComponent as SvgWaringRedIcon } from './assets/icons/icon_warning-red_colorful-dm.svg';\nimport { ReactComponent as SvgViewinchatOutlined } from './assets/icons/icon_viewinchat_outlined.svg';\nimport { ReactComponent as SvgUpOutlinedBold } from './assets/icons/icon_up-bold_outlined.svg';\nimport { ReactComponent as SvgTrashCan } from './assets/icons/icon_trash_can.svg';\nimport { ReactComponent as SvgTimeOutlinedIcon } from './assets/icons/icon_time_outlined.svg';\nimport { ReactComponent as SvgThumbupOutlined } from './assets/icons/icon_thumbsup_outlined.svg';\nimport { ReactComponent as SvgIconThumbupFilled } from './assets/icons/icon_thumbsup_filled.svg';\nimport { ReactComponent as SvgThumbdownOutlined } from './assets/icons/icon_thumbdown_outlined.svg';\nimport { ReactComponent as SvgIconThumbdownFilled } from './assets/icons/icon_thumbdown_filled.svg';\nimport { ReactComponent as SvgSucceed } from './assets/icons/icon_succeed.svg';\nimport { ReactComponent as SvgStrikethrough } from './assets/icons/icon_strikethrough.svg';\nimport { ReactComponent as SvgAiStopGenIcon } from './assets/icons/icon_stop_ai_gen.svg';\nimport { ReactComponent as SvgSpeakerOutlined } from './assets/icons/icon_speaker_outlined.svg';\nimport { ReactComponent as SVGIconSideFoldOutlined } from './assets/icons/icon_side-fold_outlined.svg';\nimport { ReactComponent as SvgShareIcon } from './assets/icons/icon_share_outlined.svg';\nimport { ReactComponent as SvgHotIconSettingOutlined } from './assets/icons/icon_setting_outlined.svg';\nimport { ReactComponent as SvgSelectorIcon } from './assets/icons/icon_selector.svg';\nimport { ReactComponent as SvgSelectArrowIcon } from './assets/icons/icon_select_arrow.svg';\nimport { ReactComponent as SvgReplyOutlined } from './assets/icons/icon_reply_outlined.svg';\nimport { ReactComponent as SvgReplyCnOutlined } from './assets/icons/icon_reply-cn_outlined.svg';\nimport { ReactComponent as SvgRedditColorful } from './assets/icons/icon_reddit_colorful.svg';\nimport { ReactComponent as SvgReadInfoOutlined } from './assets/icons/icon_readinfo_outlined.svg';\nimport { ReactComponent as SvgQzoneColorful } from './assets/icons/icon_qzone_colorful.svg';\nimport { ReactComponent as SvgQuotation } from './assets/icons/icon_quotation.svg';\nimport { ReactComponent as SvgPlatformOutlined } from './assets/icons/icon_platform_outlined.svg';\nimport { ReactComponent as SvgPinOutlined } from './assets/icons/icon_pin_outlined.svg';\nimport { ReactComponent as SvgPhoneIcon } from './assets/icons/icon_phone.svg';\nimport { ReactComponent as SvgPCIcon } from './assets/icons/icon_pc.svg';\nimport { ReactComponent as SvgDatabaseTabIcon } from './assets/icons/icon_pa-cost_outlined.svg';\nimport { ReactComponent as SvgNewConversation } from './assets/icons/icon_new_conversation.svg';\nimport { ReactComponent as SvgLtmEditIcon } from './assets/icons/icon_more-round_outlined.svg';\nimport { ReactComponent as SvgMinimizeOutlined } from './assets/icons/icon_minimize_outlined.svg';\nimport { ReactComponent as SvgMemoryDownMenuIcon } from './assets/icons/icon_memory_down_menu.svg';\nimport { ReactComponent as SvgMemberOutlinedIcon } from './assets/icons/icon_member_outlined.svg';\nimport { ReactComponent as SvgLtmTabIcon } from './assets/icons/icon_ltm_tab.svg';\nimport { ReactComponent as SvgLongArrowUp } from './assets/icons/icon_long_arrow_up.svg';\nimport { ReactComponent as SvgLogOutIcon } from './assets/icons/icon_logout_outlined.svg';\nimport { ReactComponent as SvgLoading } from './assets/icons/icon_loading.svg';\nimport { ReactComponent as SvglistOrder } from './assets/icons/icon_list_order.svg';\nimport { ReactComponent as SvgListDisorder } from './assets/icons/icon_list_disorder.svg';\nimport { ReactComponent as SvgListFilter } from './assets/icons/icon_list-filter_outlined.svg';\nimport { ReactComponent as SvgLink } from './assets/icons/icon_link.svg';\nimport { ReactComponent as SvgFileLinkOutlined } from './assets/icons/icon_link-copy_outlined.svg';\nimport { ReactComponent as SvgLegacyIcon } from './assets/icons/icon_legacy.svg';\nimport { ReactComponent as SvgJuejinColorful } from './assets/icons/icon_juejin_colorful.svg';\nimport { ReactComponent as SvgItalic } from './assets/icons/icon_italic.svg';\nimport { ReactComponent as SvgIntelligentIcon } from './assets/icons/icon_intelligent_assistant_filled.svg';\nimport { ReactComponent as SvgStatusInfo } from './assets/icons/icon_info.svg';\nimport { ReactComponent as SvgImageColorful } from './assets/icons/icon_image_colorful.svg';\nimport { ReactComponent as SvgImage } from './assets/icons/icon_image.svg';\nimport { ReactComponent as SvgCopyLinkIcon } from './assets/icons/icon_hyperlink_outlined.svg';\nimport { ReactComponent as SvgHn } from './assets/icons/icon_hn.svg';\nimport { ReactComponent as SvgH3 } from './assets/icons/icon_h3.svg';\nimport { ReactComponent as SvgH2 } from './assets/icons/icon_h2.svg';\nimport { ReactComponent as SvgH1 } from './assets/icons/icon_h1.svg';\nimport { ReactComponent as SvgModelConfig } from './assets/icons/icon_ganttset_outlined.svg';\nimport { ReactComponent as SvgExpandOutlined } from './assets/icons/icon_expand_outlined.svg';\nimport { ReactComponent as SvgDownArrowBlack } from './assets/icons/icon_expand-up_filled.svg';\nimport { ReactComponent as SvgExitIcon } from './assets/icons/icon_exit.svg';\nimport { ReactComponent as SvgEmptyIcon } from './assets/icons/icon_empty.svg';\nimport { ReactComponent as SvgEmojiOutlined } from './assets/icons/icon_emoji_outlined.svg';\nimport { ReactComponent as SvgEffectsFilled } from './assets/icons/icon_effects_filled.svg';\nimport { ReactComponent as SvgDiscussOutlined } from './assets/icons/icon_discuss_outlined.svg';\nimport { ReactComponent as SvgDateListPickerIcon } from './assets/icons/icon_date_list_picker.svg';\nimport { ReactComponent as SvgVariableTabIcon } from './assets/icons/icon_data-sheet_outlined.svg';\nimport { ReactComponent as SvgCozeTxtEn } from './assets/icons/icon_coze_txt_en.svg';\nimport { ReactComponent as SvgCozeTxtCn } from './assets/icons/icon_coze_txt_cn.svg';\nimport { ReactComponent as SvgCozeLogo } from './assets/icons/icon_coze_logo.svg';\nimport { ReactComponent as SvgConversionOutlined } from './assets/icons/icon_conversion_outlined.svg';\nimport { ReactComponent as SvgConnect } from './assets/icons/icon_connect.svg';\nimport { ReactComponent as SvgCommunityTabOutlined } from './assets/icons/icon_community-tab_outlined.svg';\nimport { ReactComponent as SvgCollectionOutlinedIcon } from './assets/icons/icon_collection_outlined.svg';\nimport { ReactComponent as SvgCloseKnowledge } from './assets/icons/icon_close_knowledge.svg';\nimport { ReactComponent as SvgChatHashtag } from './assets/icons/icon_chat_hashtag.svg';\nimport { ReactComponent as SvgIconCcmNextOutlined } from './assets/icons/icon_ccm-next_outlined.svg';\nimport { ReactComponent as SvgBrace } from './assets/icons/icon_brace.svg';\nimport { ReactComponent as SvgBotstoreMemoryIcon } from './assets/icons/icon_bot_store_memory.svg';\nimport { ReactComponent as SvgBold } from './assets/icons/icon_bold.svg';\nimport { ReactComponent as SvgBitableFormOutlined } from './assets/icons/icon_bitableform_outlined.svg';\nimport { ReactComponent as SvgAvatarEditMask } from './assets/icons/icon_avatar_edit_mask.svg';\nimport { ReactComponent as SvgIconAtOutlined } from './assets/icons/icon_at_outlined.svg';\nimport { ReactComponent as SvgArrowDownFill } from './assets/icons/icon_arrow_down_fill.svg';\nimport { ReactComponent as SvgApiOutlined } from './assets/icons/icon_api_outlined.svg';\nimport { ReactComponent as SvgAddDesktopIcon } from './assets/icons/icon_add_desktop.svg';\nimport { ReactComponent as SvgAddEntryTopOutlined } from './assets/icons/icon_add-entry_top_outlined.svg';\nimport { ReactComponent as SvgAddEntryBottomOutlined } from './assets/icons/icon_add-entry_bottom_outlined.svg';\nimport { ReactComponent as SvgYesFilled } from './assets/icons/icon-yes-filled.svg';\nimport { ReactComponent as SvgWorkflows } from './assets/icons/icon-workflows.svg';\nimport { ReactComponent as SvgWorkflowsSelected } from './assets/icons/icon-workflows-selected.svg';\nimport { ReactComponent as SvgWorkflowRunning } from './assets/icons/icon-workflow-running.svg';\nimport { ReactComponent as SvgWorkflowRunSuccess } from './assets/icons/icon-workflow-run-success.svg';\nimport { ReactComponent as SvgWorkflowRunResultClose } from './assets/icons/icon-workflow-run-result-close.svg';\nimport { ReactComponent as SvgWorkflowRunFail } from './assets/icons/icon-workflow-run-fail.svg';\nimport { ReactComponent as SvgWorkflowCardMore } from './assets/icons/icon-workflow-card-more.svg';\nimport { ReactComponent as SvgWithdraw } from './assets/icons/icon-withdraw.svg';\nimport { ReactComponent as SvgWidgetUnpublished } from './assets/icons/icon-widget-unpublished.svg';\nimport { ReactComponent as SvgWidgetPublished } from './assets/icons/icon-widget-published.svg';\nimport { ReactComponent as SvgWarningInfoIcon } from './assets/icons/icon-warning.svg';\nimport { ReactComponent as SvgWarningStrongInfoIcon } from './assets/icons/icon-warning-strong.svg';\nimport { ReactComponent as SvgVisible } from './assets/icons/icon-visible.svg';\nimport { ReactComponent as SvgViewList } from './assets/icons/icon-view-list.svg';\nimport { ReactComponent as SvgUsePlugin } from './assets/icons/icon-use-plugin.svg';\nimport { ReactComponent as SvgUpload } from './assets/icons/icon-upload.svg';\nimport { ReactComponent as SvgUploadOutlined1 } from './assets/icons/icon-upload-outlined1.svg';\nimport { ReactComponent as SvgUploadOutlined } from './assets/icons/icon-upload-outlined.svg';\nimport { ReactComponent as SvgUploadOutlinedUp } from './assets/icons/icon-upload-outlined-up.svg';\nimport { ReactComponent as SvgUploadFileSuccess } from './assets/icons/icon-upload-file-success.svg';\nimport { ReactComponent as SvgUploadFileFail } from './assets/icons/icon-upload-file-fail.svg';\nimport { ReactComponent as SvgUploadCompletedIcon } from './assets/icons/icon-upload-completed.svg';\nimport { ReactComponent as SvgIconUpdateOutlined } from './assets/icons/icon-update-outlined.svg';\nimport { ReactComponent as SvgUpOutlined } from './assets/icons/icon-up-outlined.svg';\nimport { ReactComponent as SvgUpBoldIcon } from './assets/icons/icon-up-bold-outlined.svg';\nimport { ReactComponent as SvgUnitEditIcon } from './assets/icons/icon-unit-edit.svg';\nimport { ReactComponent as SvgUnBoundIcon } from './assets/icons/icon-unbound-group.svg';\nimport { ReactComponent as SvgTokenIcon } from './assets/icons/icon-token.svg';\nimport { ReactComponent as SvgTokenIconSelected } from './assets/icons/icon-token-selected.svg';\nimport { ReactComponent as SvgToastWarning } from './assets/icons/icon-toast-warning.svg';\nimport { ReactComponent as SvgToastSuccess } from './assets/icons/icon-toast-success.svg';\nimport { ReactComponent as SvgToastInfo } from './assets/icons/icon-toast-info.svg';\nimport { ReactComponent as SvgToastError } from './assets/icons/icon-toast-error.svg';\nimport { ReactComponent as SvgTime } from './assets/icons/icon-time.svg';\nimport { ReactComponent as SvgTimeCapsule } from './assets/icons/icon-time-capsule.svg';\nimport { ReactComponent as SvgTickStroked } from './assets/icons/icon-tick-stroked.svg';\nimport { ReactComponent as SvgThumbsUpMessage } from './assets/icons/icon-thumbs-up-message.svg';\nimport { ReactComponent as SvgThumbsUpMessageSelected } from './assets/icons/icon-thumbs-up-message-selected.svg';\nimport { ReactComponent as SvgTextFormat } from './assets/icons/icon-text-format.svg';\nimport { ReactComponent as SvgTextFormatActive } from './assets/icons/icon-text-format-active.svg';\nimport { ReactComponent as SvgTemplate } from './assets/icons/icon-template.svg';\nimport { ReactComponent as SvgTeam } from './assets/icons/icon-team.svg';\nimport { ReactComponent as SvgTeamTools } from './assets/icons/icon-team-tools.svg';\nimport { ReactComponent as SvgTeamTag } from './assets/icons/icon-team-tag.svg';\nimport { ReactComponent as SvgTeamSelected } from './assets/icons/icon-team-selected.svg';\nimport { ReactComponent as SvgTeamFilled } from './assets/icons/icon-team-filled.svg';\nimport { ReactComponent as SvgTeamDefault } from './assets/icons/icon-team-default.svg';\nimport { ReactComponent as SvgTeamAddOutlined } from './assets/icons/icon-team-add-outlined.svg';\nimport { ReactComponent as SvgTasklistOutlined } from './assets/icons/icon-tasklist-outlined.svg';\nimport { ReactComponent as SvgTaskTime } from './assets/icons/icon-task-time.svg';\nimport { ReactComponent as SvgTask } from './assets/icons/icon-task-outlined.svg';\nimport { ReactComponent as SvgTaskEvent } from './assets/icons/icon-task-event.svg';\nimport { ReactComponent as SvgTable } from './assets/icons/icon-table.svg';\nimport { ReactComponent as SvgTableFormat } from './assets/icons/icon-table-format.svg';\nimport { ReactComponent as SvgTableFormatActive } from './assets/icons/icon-table-format-active.svg';\nimport { ReactComponent as SvgTabDownOutlined } from './assets/icons/icon-tab-down-outlined.svg';\nimport { ReactComponent as SvgSuccessIcon } from './assets/icons/icon-success.svg';\nimport { ReactComponent as SvgStyleSet } from './assets/icons/icon-style-set.svg';\nimport { ReactComponent as SvgStoreListMoreIcon } from './assets/icons/icon-store-list-more.svg';\nimport { ReactComponent as SvgStopOutlined } from './assets/icons/icon-stop-outlined.svg';\nimport { ReactComponent as SvgStandardRefresh } from './assets/icons/icon-standard-refresh.svg';\nimport { ReactComponent as SvgStandardCopy } from './assets/icons/icon-standard-copy.svg';\nimport { ReactComponent as SvgSpaceDownOutlined } from './assets/icons/icon-space-down-outlined.svg';\nimport { ReactComponent as SvgSortDescendIcon } from './assets/icons/icon-sort-descend.svg';\nimport { ReactComponent as SvgSortDefaultIcon } from './assets/icons/icon-sort-default.svg';\nimport { ReactComponent as SvgSortAscendIcon } from './assets/icons/icon-sort-ascend.svg';\nimport { ReactComponent as SvgSmoothline } from './assets/icons/icon-smoothline.svg';\nimport { ReactComponent as SvgSlash } from './assets/icons/icon-slash.svg';\nimport { ReactComponent as SvgSingleMode } from './assets/icons/icon-single-mode.svg';\nimport { ReactComponent as SvgSetting } from './assets/icons/icon-setting.svg';\nimport { ReactComponent as SvgSettingStroked } from './assets/icons/icon-setting-stroked.svg';\nimport { ReactComponent as SvgSend } from './assets/icons/icon-send.svg';\nimport { ReactComponent as SvgSegmentEmptyIcon } from './assets/icons/icon-segment-empty.svg';\nimport { ReactComponent as SvgSearch } from './assets/icons/icon-search.svg';\nimport { ReactComponent as SvgSearchInput } from './assets/icons/icon-search-input.svg';\nimport { ReactComponent as SvgRobot } from './assets/icons/icon-robot.svg';\nimport { ReactComponent as SvgRightArrow } from './assets/icons/icon-right-arrow.svg';\nimport { ReactComponent as SvgReportIcon } from './assets/icons/icon-report.svg';\nimport { ReactComponent as SvgReplace } from './assets/icons/icon-replace.svg';\nimport { ReactComponent as SvgRefresh } from './assets/icons/icon-refresh.svg';\nimport { ReactComponent as SvgRefreshOutlined1 } from './assets/icons/icon-refresh-outlined1.svg';\nimport { ReactComponent as SvgRefreshOutlined } from './assets/icons/icon-refresh-outlined.svg';\nimport { ReactComponent as SvgRefreshOutlinedNormalized } from './assets/icons/icon-refresh-outlined-normalized.svg';\nimport { ReactComponent as SvgQueryEmpty } from './assets/icons/icon-query-empty.svg';\nimport { ReactComponent as SvgPullDown } from './assets/icons/icon-pull-down.svg';\nimport { ReactComponent as SvgProcessPlugin } from './assets/icons/icon-process-plugin.svg';\nimport { ReactComponent as SvgProcessJump } from './assets/icons/icon-process-jump.svg';\nimport { ReactComponent as SvgProcessDataSet } from './assets/icons/icon-process-data-set.svg';\nimport { ReactComponent as SvgPost } from './assets/icons/icon-post.svg';\nimport { ReactComponent as SvgPositionFilled } from './assets/icons/icon-position-filled.svg';\nimport { ReactComponent as SvgPolyline } from './assets/icons/icon-polyline.svg';\nimport { ReactComponent as SvgPlus } from './assets/icons/icon-plus.svg';\nimport { ReactComponent as SvgPlugins } from './assets/icons/icon-plugins.svg';\nimport { ReactComponent as SvgPluginsSelected } from './assets/icons/icon-plugins-selected.svg';\nimport { ReactComponent as SvgPlugin } from './assets/icons/icon-plugin.svg';\nimport { ReactComponent as SvgPluginShop } from './assets/icons/icon-plugin-shop.svg';\nimport { ReactComponent as SvgPlayground } from './assets/icons/icon-playground.svg';\nimport { ReactComponent as SvgPlayOutline } from './assets/icons/icon-play-round-outlined.svg';\nimport { ReactComponent as SvgPlaceholderImg } from './assets/icons/icon-placeholder-img.svg';\nimport { ReactComponent as SvgPerson } from './assets/icons/icon-person.svg';\nimport { ReactComponent as SvgPersonSelected } from './assets/icons/icon-person-selected.svg';\nimport { ReactComponent as SvgPersonFilled } from './assets/icons/icon-person-filled.svg';\nimport { ReactComponent as SvgParagraphCopy } from './assets/icons/icon-paragraph-copy.svg';\nimport { ReactComponent as SvgPaLogOutlined } from './assets/icons/icon-pa-log-outlined.svg';\nimport { ReactComponent as SvgOpenTranslateIcon } from './assets/icons/icon-open-translate.svg';\nimport { ReactComponent as SvgOpenInDefault } from './assets/icons/icon-open-in-default.svg';\nimport { ReactComponent as SvgOpenAPIIcon } from './assets/icons/icon-open-api.svg';\nimport { ReactComponent as SvgOfficialLabel } from './assets/icons/icon-official-label.svg';\nimport { ReactComponent as SvgNote } from './assets/icons/icon-note-filled.svg';\nimport { ReactComponent as SvgNo } from './assets/icons/icon-no.svg';\nimport { ReactComponent as SvgNoFilledIcon } from './assets/icons/icon-no-filled.svg';\nimport { ReactComponent as SvgNavBarBack } from './assets/icons/icon-navbar-back.svg';\nimport { ReactComponent as SvgNationalEmblem } from './assets/icons/icon-national-emblem.svg';\nimport { ReactComponent as SvgMyTools } from './assets/icons/icon-my-tools.svg';\nimport { ReactComponent as SvgMyPlugin } from './assets/icons/icon-my-plugin.svg';\nimport { ReactComponent as SvgMultipleMode } from './assets/icons/icon-multiple-mode.svg';\nimport { ReactComponent as SvgBotMultiModelBtn } from './assets/icons/icon-multi-model-btn.svg';\nimport { ReactComponent as SvgMore } from './assets/icons/icon-more.svg';\nimport { ReactComponent as SvgMoreVertical } from './assets/icons/icon-more-vertical.svg';\nimport { ReactComponent as SvgMoreRound } from './assets/icons/icon-more-round-outlined.svg';\nimport { ReactComponent as SvgMoreOperationsMessage } from './assets/icons/icon-more-operations-message.svg';\nimport { ReactComponent as SvgMoreOperationsDeleteMessage } from './assets/icons/icon-more-operations-delete-message.svg';\nimport { ReactComponent as SvgMoreAdd } from './assets/icons/icon-more-add.svg';\nimport { ReactComponent as SvgAddMoreNew } from './assets/icons/icon-more-add-new.svg';\nimport { ReactComponent as SvgModify } from './assets/icons/icon-modify.svg';\nimport { ReactComponent as SvgModalErrorIcon } from './assets/icons/icon-modal-error.svg';\nimport { ReactComponent as SvgIconMobileSound } from './assets/icons/icon-mobile-sound.svg';\nimport { ReactComponent as SvgIconMobileSoundNormal } from './assets/icons/icon-mobile-sound-normal.svg';\nimport { ReactComponent as SvgIconMobileSoundDisable } from './assets/icons/icon-mobile-sound-disable.svg';\nimport { ReactComponent as SvgIconMobileSoundClosed } from './assets/icons/icon-mobile-sound-closed.svg';\nimport { ReactComponent as SVGIconMobileShare } from './assets/icons/icon-mobile-share.svg';\nimport { ReactComponent as SvgIconMobileSetting } from './assets/icons/icon-mobile-setting.svg';\nimport { ReactComponent as SvgIconMobileMore } from './assets/icons/icon-mobile-more.svg';\nimport { ReactComponent as SvgIconMobileMenu } from './assets/icons/icon-mobile-menu.svg';\nimport { ReactComponent as SvgMobileFeishu } from './assets/icons/icon-mobile-feishu.svg';\nimport { ReactComponent as SvgMobileEmail } from './assets/icons/icon-mobile-email.svg';\nimport { ReactComponent as SvgMobileCommunity } from './assets/icons/icon-mobile-community.svg';\nimport { ReactComponent as SvgIconMobileCollect } from './assets/icons/icon-mobile-collect.svg';\nimport { ReactComponent as SvgIconMobileCollectFill } from './assets/icons/icon-mobile-collect-fill.svg';\nimport { ReactComponent as SvgIconMobileClose } from './assets/icons/icon-mobile-close.svg';\nimport { ReactComponent as SvgMinus } from './assets/icons/icon-minus.svg';\nimport { ReactComponent as SvgMinimizeWindow } from './assets/icons/icon-minimize-window.svg';\nimport { ReactComponent as SvgMenuIcon } from './assets/icons/icon-menu.svg';\nimport { ReactComponent as SvgIconMenuSocialMedia } from './assets/icons/icon-menu-social-media.svg';\nimport { ReactComponent as SvgIconMenuSocialMediaYoutube } from './assets/icons/icon-menu-social-media-youtube.svg';\nimport { ReactComponent as SvgIconMenuSocialMediaX } from './assets/icons/icon-menu-social-media-x.svg';\nimport { ReactComponent as SvgIconBotMenuPlus } from './assets/icons/icon-menu-plus.svg';\nimport { ReactComponent as SvgIconBotMenuLogo } from './assets/icons/icon-menu-logo.svg';\nimport { ReactComponent as SvgIconBotMenuLogoText } from './assets/icons/icon-menu-logo-text.svg';\nimport { ReactComponent as SvgIconBotMenuLogoTextCN } from './assets/icons/icon-menu-logo-text-cn.svg';\nimport { ReactComponent as SvgIconMenuFeedback } from './assets/icons/icon-menu-feedback.svg';\nimport { ReactComponent as SvgIconMenuDocument } from './assets/icons/icon-menu-document.svg';\nimport { ReactComponent as SvgIconMenuCommunity } from './assets/icons/icon-menu-community.svg';\nimport { ReactComponent as SvgIconMenuCommunityTelegram } from './assets/icons/icon-menu-community-telegram.svg';\nimport { ReactComponent as SvgIconMenuCommunityDiscord } from './assets/icons/icon-menu-community-discord.svg';\nimport { ReactComponent as SvgMenuArena } from './assets/icons/icon-menu-arena.svg';\nimport { ReactComponent as SvgMenuArenaSelected } from './assets/icons/icon-menu-arena-select.svg';\nimport { ReactComponent as SvgMemory } from './assets/icons/icon-memory.svg';\nimport { ReactComponent as SvgLogo } from './assets/icons/icon-logo.svg';\nimport { ReactComponent as SvgLogoWife } from './assets/icons/icon-logo-wife.svg';\nimport { ReactComponent as SvgListCheck } from './assets/icons/icon-list-check.svg';\nimport { ReactComponent as SvgLinkStroked } from './assets/icons/icon-link-stroked.svg';\nimport { ReactComponent as SvgLeftArrow } from './assets/icons/icon-left-arrow.svg';\nimport { ReactComponent as SvgLearnMoreIcon } from './assets/icons/icon-learn-more.svg';\nimport { ReactComponent as SvgInvisible } from './assets/icons/icon-invisible.svg';\nimport { ReactComponent as SvgInfo } from './assets/icons/icon-info.svg';\nimport { ReactComponent as SvgInfoOutlined } from './assets/icons/icon-info-outlined.svg';\nimport { ReactComponent as SvgInfoCircle } from './assets/icons/icon-info-circle.svg';\nimport { ReactComponent as SvgIconImportOutlined } from './assets/icons/icon-import-outlined.svg';\nimport { ReactComponent as SvgImageOverlay } from './assets/icons/icon-image-overlay.svg';\nimport { ReactComponent as SvgImageFailOutlined } from './assets/icons/icon-image-fail-outlined.svg';\nimport { ReactComponent as SvgIDEFilebox } from './assets/icons/icon-ide-filebox.svg';\nimport { ReactComponent as SvgHotBot } from './assets/icons/icon-hot-bot.svg';\nimport { ReactComponent as SvgHome } from './assets/icons/icon-home.svg';\nimport { ReactComponent as SvgHomeSelected } from './assets/icons/icon-home-selected.svg';\nimport { ReactComponent as SvgHistory } from './assets/icons/icon-history.svg';\nimport { ReactComponent as SvgHelpIcon } from './assets/icons/icon-help.svg';\nimport { ReactComponent as SvgHandIcon } from './assets/icons/icon-hand.svg';\nimport { ReactComponent as SvgGroupCardOutlined } from './assets/icons/icon-group-card-outlined.svg';\nimport { ReactComponent as SvgGroupCardNoBind } from './assets/icons/icon-group-card-no-bind.svg';\nimport { ReactComponent as SvgGoogle } from './assets/icons/icon-google.svg';\nimport { ReactComponent as SvgIconGoogle16 } from './assets/icons/icon-google-logo-16.svg';\nimport { ReactComponent as SvgGlobalIntentLogo } from './assets/icons/icon-global-intent-logo-orange.svg';\nimport { ReactComponent as SvgFullscreen } from './assets/icons/icon-fullscreen.svg';\nimport { ReactComponent as SvgFrownUponMessage } from './assets/icons/icon-frown-upon-message.svg';\nimport { ReactComponent as SvgFrownUponMessageSelected } from './assets/icons/icon-frown-upon-message-selected.svg';\nimport { ReactComponent as SvgFooterWeixinIcon } from './assets/icons/icon-footer-weixi.svg';\nimport { ReactComponent as SvgFooterMailIcon } from './assets/icons/icon-footer-mail.svg';\nimport { ReactComponent as SvgFooterFeishuIcon } from './assets/icons/icon-footer-feishu.svg';\nimport { ReactComponent as SvgFooterDocumentIcon } from './assets/icons/icon-footer-document.svg';\nimport { ReactComponent as SvgFooterDiscordIcon } from './assets/icons/icon-footer-discord.svg';\nimport { ReactComponent as SvgFlowArrow } from './assets/icons/icon-flow-arrow.svg';\nimport { ReactComponent as SvgFile } from './assets/icons/icon-file.svg';\nimport { ReactComponent as SvgSheetIcon } from './assets/icons/icon-file-sheet-color.svg';\nimport { ReactComponent as SvgFileLink } from './assets/icons/icon-file-link.svg';\nimport { ReactComponent as SvgFileIcon } from './assets/icons/icon-file-color.svg';\nimport { ReactComponent as SvgFeedback } from './assets/icons/icon-feedback.svg';\nimport { ReactComponent as SvgExplorePlugins } from './assets/icons/icon-explore-plugins.svg';\nimport { ReactComponent as SvgExplorePluginsSelected } from './assets/icons/icon-explore-plugins-selected.svg';\nimport { ReactComponent as SvgExploreBots } from './assets/icons/icon-explore-bots.svg';\nimport { ReactComponent as SvgExploreBotsSelected } from './assets/icons/icon-explore-bots-selected.svg';\nimport { ReactComponent as SvgErrorIcon } from './assets/icons/icon-error.svg';\nimport { ReactComponent as SvgEllipsis } from './assets/icons/icon-ellipsis.svg';\nimport { ReactComponent as SvgEffects } from './assets/icons/icon-effects.svg';\nimport { ReactComponent as SvgEdit } from './assets/icons/icon-edit.svg';\nimport { ReactComponent as SvgEditOutlined1 } from './assets/icons/icon-edit-outlined1.svg';\nimport { ReactComponent as SvgEditOutlined } from './assets/icons/icon-edit-outlined.svg';\nimport { ReactComponent as SvgEditOutline } from './assets/icons/icon-edit-outline.svg';\nimport { ReactComponent as SvgEditOptions } from './assets/icons/icon-edit-options.svg';\nimport { ReactComponent as SvgEditNew } from './assets/icons/icon-edit-new.svg';\nimport { ReactComponent as SvgEditKnowledgeIcon } from './assets/icons/icon-edit-knowledge.svg';\nimport { ReactComponent as SvgEditBlue } from './assets/icons/icon-edit-blue.svg';\nimport { ReactComponent as SvgDouyin } from './assets/icons/icon-dy.svg';\nimport { ReactComponent as SvgDouyinSquare } from './assets/icons/icon-dy-square.svg';\nimport { ReactComponent as SvgDropdownTrigger } from './assets/icons/icon-dropdown-trigger.svg';\nimport { ReactComponent as SvgDropdownMobile } from './assets/icons/icon-dropdown-mobile.svg';\nimport { ReactComponent as SvgDropdownClose } from './assets/icons/icon-dropdown-close.svg';\nimport { ReactComponent as SvgDrag } from './assets/icons/icon-drag.svg';\nimport { ReactComponent as SvgDraftsTag } from './assets/icons/icon-drafts-tag.svg';\nimport { ReactComponent as SvgDownBoldIcon } from './assets/icons/icon-down-bold-outlined.svg';\nimport { ReactComponent as SvgDownArrow } from './assets/icons/icon-down-arrow.svg';\nimport { ReactComponent as SvgDownArrowStroked } from './assets/icons/icon-down-arrow-stroked.svg';\nimport { ReactComponent as SvgDocuments } from './assets/icons/icon-documents.svg';\nimport { ReactComponent as SvgDocumentsLanding } from './assets/icons/icon-documents-landing.svg';\nimport { ReactComponent as SvgDiscover } from './assets/icons/icon-discover.svg';\nimport { ReactComponent as SvgDiff } from './assets/icons/icon-diff.svg';\nimport { ReactComponent as SvgDelete } from './assets/icons/icon-delete.svg';\nimport { ReactComponent as SvgDeleteOutline1 } from './assets/icons/icon-delete-outline1.svg';\nimport { ReactComponent as SvgDeleteOutline } from './assets/icons/icon-delete-outline.svg';\nimport { ReactComponent as SvgDeleteMessage } from './assets/icons/icon-delete-message.svg';\nimport { ReactComponent as SvgDebugTts } from './assets/icons/icon-debug-tts.svg';\nimport { ReactComponent as SvgDatasets } from './assets/icons/icon-datasets.svg';\nimport { ReactComponent as SvgDatasetsSelected } from './assets/icons/icon-datasets-selected.svg';\nimport { ReactComponent as SvgDataSheet } from './assets/icons/icon-data-sheet-outlined.svg';\nimport { ReactComponent as SvgDataSetting } from './assets/icons/icon-data-setting.svg';\nimport { ReactComponent as SvgDataSet } from './assets/icons/icon-data-set.svg';\nimport { ReactComponent as SvgCozeZHIcon } from './assets/icons/icon-coze-zh.svg';\nimport { ReactComponent as SvgCozeENIcon } from './assets/icons/icon-coze-en.svg';\nimport { ReactComponent as SvgCopyOutlined } from './assets/icons/icon-copy-outlined.svg';\nimport { ReactComponent as SvgConfig } from './assets/icons/icon-config.svg';\nimport { ReactComponent as SvgCommunityWeixin } from './assets/icons/icon-community-weixin.svg';\nimport { ReactComponent as SvgCommunityWeixinLoading } from './assets/icons/icon-community-weixin-loading.svg';\nimport { ReactComponent as SvgCommunityDiscord } from './assets/icons/icon-community-discord.svg';\nimport { ReactComponent as SvgCollectStroked } from './assets/icons/icon-collection-stroked.svg';\nimport { ReactComponent as SvgCollectFilled } from './assets/icons/icon-collect-filled.svg';\nimport { ReactComponent as SvgCollapse } from './assets/icons/icon-collapse.svg';\nimport { ReactComponent as SvgCodeOutlined } from './assets/icons/icon-code-outlined.svg';\nimport { ReactComponent as SvgClose } from './assets/icons/icon-close.svg';\nimport { ReactComponent as SvgCloseOutlined } from './assets/icons/icon-close-outlined.svg';\nimport { ReactComponent as SvgIconCloseNoCycle } from './assets/icons/icon-close-no-cycle.svg';\nimport { ReactComponent as SvgClear } from './assets/icons/icon-clear.svg';\nimport { ReactComponent as SvgClearStroked } from './assets/icons/icon-clear-stroked.svg';\nimport { ReactComponent as SvgCircleClose } from './assets/icons/icon-circle-close.svg';\nimport { ReactComponent as SvgChevronRightIcon } from './assets/icons/icon-chevron-right.svg';\nimport { ReactComponent as SvgChevronDownIcon } from './assets/icons/icon-chevron-down.svg';\nimport { ReactComponent as SvgChatboxOutlined } from './assets/icons/icon-chatbox-outlined.svg';\nimport { ReactComponent as SvgChatIcon } from './assets/icons/icon-chat.svg';\nimport { ReactComponent as SvgChatIconDisable } from './assets/icons/icon-chat-disable.svg';\nimport { ReactComponent as SvgCardSearchOutline } from './assets/icons/icon-card-search-outlined.svg';\nimport { ReactComponent as SvgCancelLinkOutlinedIcon } from './assets/icons/icon-cancel-link-outlined.svg';\nimport { ReactComponent as SvgCamera } from './assets/icons/icon-camera.svg';\nimport { ReactComponent as SvgCalendar } from './assets/icons/icon-calendar.svg';\nimport { ReactComponent as SvgBrowse } from './assets/icons/icon-browse.svg';\nimport { ReactComponent as SvgBots } from './assets/icons/icon-bots.svg';\nimport { ReactComponent as SvgBotsSelected } from './assets/icons/icon-bots-selected.svg';\nimport { ReactComponent as SvgBotStoreUser } from './assets/icons/icon-bot-store-user.svg';\nimport { ReactComponent as SvgIconBotStoreQuestion } from './assets/icons/icon-bot-store-question.svg';\nimport { ReactComponent as SvgBotStoreLink } from './assets/icons/icon-bot-store-link.svg';\nimport { ReactComponent as SvgBotStoreConversaion } from './assets/icons/icon-bot-store-conversation.svg';\nimport { ReactComponent as SvgBotPublished } from './assets/icons/icon-bot-published.svg';\nimport { ReactComponent as SvgBotMultiRightBtnIcon } from './assets/icons/icon-bot-multi-right-btn.svg';\nimport { ReactComponent as SvgBotMultiLeftBtnIcon } from './assets/icons/icon-bot-multi-left-btn.svg';\nimport { ReactComponent as SvgBotManage } from './assets/icons/icon-bot-manage.svg';\nimport { ReactComponent as SvgBotExit } from './assets/icons/icon-bot-exit.svg';\nimport { ReactComponent as SvgBotDatabase } from './assets/icons/icon-bot-database.svg';\nimport { ReactComponent as SvgBlogs } from './assets/icons/icon-blogs.svg';\nimport { ReactComponent as SvgCopy } from './assets/icons/icon-backup-verification.svg';\nimport { ReactComponent as SvgCopySuccess } from './assets/icons/icon-backup-verification-success.svg';\nimport { ReactComponent as SvgBackTop } from './assets/icons/icon-back-top.svg';\nimport { ReactComponent as SvgAuto } from './assets/icons/icon-auto.svg';\nimport { ReactComponent as SvgIconAutoShape } from './assets/icons/icon-auto-shape.svg';\nimport { ReactComponent as SvgAutoLayout } from './assets/icons/icon-auto-layout.svg';\nimport { ReactComponent as SvgAutoGenerationIcon } from './assets/icons/icon-auto-generation.svg';\nimport { ReactComponent as SvgIconAt } from './assets/icons/icon-at.svg';\nimport { ReactComponent as SvgArrow } from './assets/icons/icon-arrow.svg';\nimport { ReactComponent as SvgIconArrowRight } from './assets/icons/icon-arrow-right.svg';\nimport { ReactComponent as SvgIconArrowRightAdjustable } from './assets/icons/icon-arrow-right-adjustable.svg';\nimport { ReactComponent as SvgArrowLeft } from './assets/icons/icon-arrow-left.svg';\nimport { ReactComponent as SvgArenaModel } from './assets/icons/icon-arena-model.svg';\nimport { ReactComponent as SvgArenaDice } from './assets/icons/icon-arena-dice.svg';\nimport { ReactComponent as SvgAlertStroked } from './assets/icons/icon-alert-stroked.svg';\nimport { ReactComponent as SvgAlertFilled } from './assets/icons/icon-alert-filled.svg';\nimport { ReactComponent as SvgAi } from './assets/icons/icon-ai.svg';\nimport { ReactComponent as SvgAgentWorkflowSkill } from './assets/icons/icon-agent-workflow-skill.svg';\nimport { ReactComponent as SvgAgentToolsSkill } from './assets/icons/icon-agent-tools-skill.svg';\nimport { ReactComponent as SvgAgentLogo } from './assets/icons/icon-agent-logo.svg';\nimport { ReactComponent as SvgAgentKnowledgeSkill } from './assets/icons/icon-agent-knowledge-skill.svg';\nimport { ReactComponent as SvgAddedPlugin } from './assets/icons/icon-added-plugin.svg';\nimport { ReactComponent as SvgAdd } from './assets/icons/icon-add.svg';\nimport { ReactComponent as SvgAddSubItemsOutlined } from './assets/icons/icon-add-sub-items-outlined.svg';\nimport { ReactComponent as SvgAddFiled } from './assets/icons/icon-add-field.svg';\nimport { ReactComponent as SvgAddCircle } from './assets/icons/icon-add-circle.svg';\nimport { ReactComponent as SvgAddChildOutlined } from './assets/icons/icon-add-child-outlined.svg';\nimport { ReactComponent as SvgAddAgentLogo } from './assets/icons/icon-add-agent-logo.svg';\nimport { ReactComponent as SvgHotIcon } from './assets/icons/hot-icon.svg';\nimport { ReactComponent as SvgFilterIcon } from './assets/icons/filter.svg';\nimport { ReactComponent as SvgFileBox } from './assets/icons/filebox.svg';\nimport { ReactComponent as SvgUploadXLS } from './assets/icons/file-type/icon-upload-xls.svg';\nimport { ReactComponent as SvgUploadTxt } from './assets/icons/file-type/icon-upload-txt.svg';\nimport { ReactComponent as SvgUploadTextUrl } from './assets/icons/file-type/icon-upload-text-url.svg';\nimport { ReactComponent as SvgUploadTableUrl } from './assets/icons/file-type/icon-upload-table-url.svg';\nimport { ReactComponent as SvgUploadPdf } from './assets/icons/file-type/icon-upload-pdf.svg';\nimport { ReactComponent as SvgUploadMD } from './assets/icons/file-type/icon-upload-md.svg';\nimport { ReactComponent as SvgUploadDoc } from './assets/icons/file-type/icon-upload-doc.svg';\nimport { ReactComponent as SvgUploadCsv } from './assets/icons/file-type/icon-upload-csv.svg';\nimport { ReactComponent as SvgUploadAPI } from './assets/icons/file-type/icon-upload-api.svg';\nimport { ReactComponent as SvgUnknowFile } from './assets/icons/file-type/icon-unknow.svg';\nimport { ReactComponent as SvgUnitsTable } from './assets/icons/file-type/icon-units-table.svg';\nimport { ReactComponent as SvgUnitsFile } from './assets/icons/file-type/icon-units-file.svg';\nimport { ReactComponent as SvgTextFile } from './assets/icons/file-type/icon-text.svg';\nimport { ReactComponent as SvgTableApiOutlined } from './assets/icons/file-type/icon-table-api-outlined.svg';\nimport { ReactComponent as SvgPDFFile } from './assets/icons/file-type/icon-pdf.svg';\nimport { ReactComponent as SvgOnlineData } from './assets/icons/file-type/icon-online-data.svg';\nimport { ReactComponent as SvgLocalFile } from './assets/icons/file-type/icon-local-file.svg';\nimport { ReactComponent as SvgDocxFile } from './assets/icons/file-type/icon-docx.svg';\nimport { ReactComponent as SvgDeleteOutline2File } from './assets/icons/file-type/icon-delete-outline2.svg';\nimport { ReactComponent as SvgCustomData } from './assets/icons/file-type/icon-custom-data.svg';\nimport { ReactComponent as SvgCozeCross } from './assets/icons/coze_cross.svg';\nimport { ReactComponent as SvtUserGuideIconFill } from './assets/icons/coz_user_guide_fill.svg';\nimport { ReactComponent as SvtUserGuideIcon } from './assets/icons/coz_user_guide.svg';\nimport { ReactComponent as SvgTextStyle } from './assets/icons/coz_text_style.svg';\nimport { ReactComponent as SvgIconCozShare } from './assets/icons/coz_share.svg';\nimport { ReactComponent as SvtProGuideIconFill } from './assets/icons/coz_pro_guide_fill.svg';\nimport { ReactComponent as SvtProGuideIcon } from './assets/icons/coz_pro_guide.svg';\nimport { ReactComponent as SvgPin } from './assets/icons/coz_pin.svg';\nimport { ReactComponent as SvgCozOfficialFill } from './assets/icons/coz_official_fill.svg';\nimport { ReactComponent as SvgEyeClose } from './assets/icons/coz_eye_close.svg';\nimport { ReactComponent as SvgDocumentCode } from './assets/icons/coz_document_code.svg';\nimport { ReactComponent as SvgDiamondFill } from './assets/icons/coz_diamond_fill.svg';\nimport { ReactComponent as SvtDeveloperGuideIconFill } from './assets/icons/coz_developer_guide_fill.svg';\nimport { ReactComponent as SvtDeveloperGuideIcon } from './assets/icons/coz_developer_guide.svg';\nimport { ReactComponent as SvgCozCheckMark } from './assets/icons/coz_check_mark.svg';\nimport { ReactComponent as SvgArenaBattle } from './assets/icons/coz_battle.svg';\nimport { ReactComponent as SvgBan } from './assets/icons/coz_ban.svg';\nimport { ReactComponent as SvgCozArrowDownLeftIcon } from './assets/icons/coz_arrow_down_left.svg';\nimport { ReactComponent as SvgCozArrowDownIcon } from './assets/icons/coz_arrow_down.svg';\nimport { ReactComponent as SvgRankMath } from './assets/icons/arena/psychology.svg';\nimport { ReactComponent as SvgRankKnowledge } from './assets/icons/arena/menu_book.svg';\nimport { ReactComponent as SvgRankTool } from './assets/icons/arena/construction.svg';\nimport { ReactComponent as SvgRankRole } from './assets/icons/arena/comedy_mask.svg';\nimport { ReactComponent as SvgRankCode } from './assets/icons/arena/code_blocks.svg';\nimport { ReactComponent as SvgRankChat } from './assets/icons/arena/chat.svg';\nimport { ReactComponent as SvgRankCreation } from './assets/icons/arena/award_star.svg';\nimport { ReactComponent as SvgArenaRankIcon } from './assets/icons/arena/arena-rank-icon.svg';\nimport { ReactComponent as SvgAnalyticsRegionalIcon } from './assets/icons/analytics/analytics-regional.svg';\nimport { ReactComponent as SvgAnalyticsRankingIcon } from './assets/icons/analytics/analytics-ranking.svg';\nimport { ReactComponent as SvgAnalyticsGlobalIcon } from './assets/icons/analytics/analytics-global.svg';\nimport { ReactComponent as SvgBrandRoundIcon } from './assets/brand-round.svg';\nimport { ReactComponent as SvgBrandEnWhiteRow } from './assets/brand-en-white-row.svg';\nimport { ReactComponent as SvgBrandEnWhiteColumn } from './assets/brand-en-white-column.svg';\nimport { ReactComponent as SvgBrandEnBlackRow } from './assets/brand-en-black-row.svg';\nimport { ReactComponent as SvgBrandEnBlackColumn } from './assets/brand-en-black-column.svg';\nimport { ReactComponent as SvgBrandCnWhiteRow } from './assets/brand-cn-white-row.svg';\nimport { ReactComponent as SvgBrandCnWhiteColumn } from './assets/brand-cn-white-column.svg';\nimport { ReactComponent as SvgBrandCnBlackRow } from './assets/brand-cn-black-row.svg';\nimport { ReactComponent as SvgBrandCnBlackColumn } from './assets/brand-cn-black-column.svg';\nimport { ReactComponent as SvgBotIcon } from './assets/bot-icon.svg';\n\nexport const IconApiPlayground = IconFactory(<SvtPlaygroundIcon />);\nexport const IconApiPlaygroundFill = IconFactory(<SvtPlaygroundIconFill />);\nexport const IconUserGuide = IconFactory(<SvtUserGuideIcon />);\nexport const IconUserGuideFill = IconFactory(<SvtUserGuideIconFill />);\nexport const IconDeveloperGuide = IconFactory(<SvtDeveloperGuideIcon />);\nexport const IconDeveloperGuideFill = IconFactory(\n  <SvtDeveloperGuideIconFill />,\n);\nexport const IconProGuide = IconFactory(<SvtProGuideIcon />);\nexport const IconProGuideFill = IconFactory(<SvtProGuideIconFill />);\nexport const IconLegacy = IconFactory(<SvgLegacyIcon />);\n\nexport const IconAreanRankIcon = IconFactory(<SvgArenaRankIcon />);\nexport const IconOfficialLabel = IconFactory(<SvgOfficialLabel />);\nexport const IconRankKnowledge = IconFactory(<SvgRankKnowledge />);\nexport const IconRankCreation = IconFactory(<SvgRankCreation />);\nexport const IconRankMath = IconFactory(<SvgRankMath />);\nexport const IconRankRole = IconFactory(<SvgRankRole />);\nexport const IconRankTool = IconFactory(<SvgRankTool />);\nexport const IconRankChat = IconFactory(<SvgRankChat />);\nexport const IconRankCode = IconFactory(<SvgRankCode />);\nexport const IconModelConfig = IconFactory(<SvgModelConfig />);\nexport const IconCozShare = IconFactory(<SvgIconCozShare />);\nexport const IconArenaModel = IconFactory(<SvgArenaModel />);\nexport const IconBrandRound = IconFactory(<SvgBrandRoundIcon />);\nexport const IconMenuArena = IconFactory(<SvgMenuArena />);\nexport const IconMenuArenaSelected = IconFactory(<SvgMenuArenaSelected />);\nexport const IconReplyCnOutlined = IconFactory(<SvgReplyCnOutlined />);\nexport const IconThumbupOutlined = IconFactory(<SvgThumbupOutlined />);\nexport const IconThumbdownOutlined = IconFactory(<SvgThumbdownOutlined />);\nexport const IconSpaceDownOutlined = IconFactory(<SvgSpaceDownOutlined />);\nexport const IconArenaDice = IconFactory(<SvgArenaDice />);\nexport const IconCozeBattle = IconFactory(<SvgArenaBattle />);\nexport const IconAddDesktop = IconFactory(<SvgAddDesktopIcon />);\nexport const IconAvatarEditMask = IconFactory(<SvgAvatarEditMask />);\nexport const IconDeleteOutline1 = IconFactory(<SvgDeleteOutline1 />);\nexport const IconRefreshOutlined1 = IconFactory(<SvgRefreshOutlined1 />);\nexport const IconUploadOutlined1 = IconFactory(<SvgUploadOutlined1 />);\nexport const IconImageOverlay = IconFactory(<SvgImageOverlay />);\nexport const IconTextStyle = IconFactory(<SvgTextStyle />);\nexport const IconPin = IconFactory(<SvgPin />);\nexport const IconEffects = IconFactory(<SvgEffects />);\nexport const IconEditKnowledge = IconFactory(<SvgEditKnowledgeIcon />);\nexport const IconHot = IconFactory(<SvgHotIcon />);\nexport const IconEdit = IconFactory(<SvgEdit />);\nexport const IconEditBlue = IconFactory(<SvgEditBlue />);\nexport const IconInfoCircle = IconFactory(<SvgInfoCircle />);\nexport const IconInfoOutlined = IconFactory(<SvgInfoOutlined />);\nexport const IconFlowArrow = IconFactory(<SvgFlowArrow />);\nexport const IconSend = IconFactory(<SvgSend />);\nexport const IconAdd = IconFactory(<SvgAdd />);\nexport const IconAddSubItemsOutlined = IconFactory(<SvgAddSubItemsOutlined />);\nexport const IconAddMoreNew = IconFactory(<SvgAddMoreNew />);\nexport const IconRobot = IconFactory(<SvgRobot />);\nexport const IconStyleSet = IconFactory(<SvgStyleSet />);\nexport const IconSetting = IconFactory(<SvgSetting />);\nexport const IconDelete = IconFactory(<SvgDelete />);\nexport const IconReplace = IconFactory(<SvgReplace />);\nexport const IconAuto = IconFactory(<SvgAuto />);\nexport const IconCopy = IconFactory(<SvgCopy />);\nexport const IconCopySuccess = IconFactory(<SvgCopySuccess />);\nexport const IconInfo = IconFactory(<SvgInfo />);\nexport const IconNo = IconFactory(<SvgNo />);\nexport const IconAddFiled = IconFactory(<SvgAddFiled />);\nexport const IconCamera = IconFactory(<SvgCamera />);\nexport const IconImageFailOutlined = IconFactory(<SvgImageFailOutlined />);\nexport const IconBotManage = IconFactory(<SvgBotManage />);\nexport const IconDataSetting = IconFactory(<SvgDataSetting />);\nexport const IconTimeCapsule = IconFactory(<SvgTimeCapsule />);\nexport const IconPlugin = IconFactory(<SvgPlugin />);\nexport const IconPlayground = IconFactory(<SvgPlayground />);\nexport const IconPullDown = IconFactory(<SvgPullDown />);\nexport const IconNote = IconFactory(<SvgNote />);\nexport const IconMemory = IconFactory(<SvgMemory />);\nexport const IconStopOutlined = IconFactory(<SvgStopOutlined />);\nexport const IconDownArrow = IconFactory(<SvgDownArrow />);\nexport const IconDownArrowBlack = IconFactory(<SvgDownArrowBlack />);\n\nexport const IconRightArrow = IconFactory(<SvgRightArrow />);\nexport const IconDataSet = IconFactory(<SvgDataSet />);\nexport const IconSearch = IconFactory(<SvgSearch />);\nexport const IconBrowse = IconFactory(<SvgBrowse />);\nexport const IconUsePlugin = IconFactory(<SvgUsePlugin />);\nexport const IconDownArrowStroked = IconFactory(<SvgDownArrowStroked />);\nexport const IconViewList = IconFactory(<SvgViewList />);\nexport const IconClose = IconFactory(<SvgClose />);\nexport const IconModify = IconFactory(<SvgModify />);\nexport const IconTable = IconFactory(<SvgTable />);\nexport const IconTemplate = IconFactory(<SvgTemplate />);\nexport const IconAlertStroked = IconFactory(<SvgAlertStroked />);\nexport const IconAlertFilled = IconFactory(<SvgAlertFilled />);\nexport const IconTickStroked = IconFactory(<SvgTickStroked />);\nexport const IconFile = IconFactory(<SvgFile />);\nexport const IconPinOutlined = IconFactory(<SvgPinOutlined />);\nexport const IconTrashCan = IconFactory(<SvgTrashCan />);\nexport const IconBackTop = IconFactory(<SvgBackTop />);\nexport const IconCollectFilled = IconFactory(<SvgCollectFilled />);\nexport const IconCollectStroked = IconFactory(<SvgCollectStroked />);\nexport const IconConfig = IconFactory(<SvgConfig />);\nexport const IconArrow = IconFactory(<SvgArrow />);\nexport const IconCircleClose = IconFactory(<SvgCircleClose />);\nexport const IconWorkflowRunning = IconFactory(<SvgWorkflowRunning />);\nexport const IconWorkflowRunSuccess = IconFactory(<SvgWorkflowRunSuccess />);\nexport const IconWorkflowRunFail = IconFactory(<SvgWorkflowRunFail />);\nexport const IconWorkflowRunResultClose = IconFactory(\n  <SvgWorkflowRunResultClose />,\n);\nexport const IconLinkStroked = IconFactory(<SvgLinkStroked />);\nexport const IconBan = IconFactory(<SvgBan />);\nexport const IconEyeClose = IconFactory(<SvgEyeClose />);\nexport const IconSelector = IconFactory(<SvgSelectorIcon />);\nexport const IconDiscover = IconFactory(<SvgDiscover />);\nexport const IconClearStoked = IconFactory(<SvgClearStroked />);\nexport const IconAddedPlugin = IconFactory(<SvgAddedPlugin />);\nexport const IconMyPlugin = IconFactory(<SvgMyPlugin />);\nexport const IconMyTools = IconFactory(<SvgMyTools />);\nexport const IconTeamTools = IconFactory(<SvgTeamTools />);\nexport const IconTeamAddOutlined = IconFactory(<SvgTeamAddOutlined />);\n\nexport const IconSettingStroked = IconFactory(<SvgSettingStroked />);\nexport const IconMoreAdd = IconFactory(<SvgMoreAdd />);\nexport const IconMore = IconFactory(<SvgMore />);\nexport const IconMoreVertical = IconFactory(<SvgMoreVertical />);\nexport const IconFilter = IconFactory(<SvgFilterIcon />);\nexport const IconPlaceholderImg = IconFactory(<SvgPlaceholderImg />);\nexport const IconMenuCollapse = IconFactory(<MenuCollapse />);\n\nexport const IconBots = IconFactory(<SvgBots />);\nexport const IconBotsSelected = IconFactory(<SvgBotsSelected />);\nexport const IconPlugins = IconFactory(<SvgPlugins />);\nexport const IconPluginsSelected = IconFactory(<SvgPluginsSelected />);\nexport const IconWorkflows = IconFactory(<SvgWorkflows />);\nexport const IconWorkflowsSelected = IconFactory(<SvgWorkflowsSelected />);\nexport const IconDatasets = IconFactory(<SvgDatasets />);\nexport const IconDatasetsSelected = IconFactory(<SvgDatasetsSelected />);\nexport const IconTeam = IconFactory(<SvgTeam />);\nexport const IconTeamTag = IconFactory(<SvgTeamTag />);\nexport const IconTeamDefault = IconFactory(<SvgTeamDefault />);\nexport const IconTeamSelected = IconFactory(<SvgTeamSelected />);\nexport const IconExploreBots = IconFactory(<SvgExploreBots />);\nexport const IconExploreBotsSelected = IconFactory(<SvgExploreBotsSelected />);\nexport const IconExplorePlugins = IconFactory(<SvgExplorePlugins />);\nexport const IconExplorePluginsSelected = IconFactory(\n  <SvgExplorePluginsSelected />,\n);\nexport const IconHome = IconFactory(<SvgHome />);\nexport const IconLongArrowUp = IconFactory(<SvgLongArrowUp />);\nexport const IconHomeSelected = IconFactory(<SvgHomeSelected />);\nexport const IconThumbupFilled = IconFactory(<SvgIconThumbupFilled />);\nexport const IconThumbdownFilled = IconFactory(<SvgIconThumbdownFilled />);\nexport const IconPerson = IconFactory(<SvgPerson />);\nexport const IconPersonSelected = IconFactory(<SvgPersonSelected />);\nexport const IconDocuments = IconFactory(<SvgDocuments />);\nexport const IconDocumentsLanding = IconFactory(<SvgDocumentsLanding />);\nexport const IconBlogs = IconFactory(<SvgBlogs />);\nexport const IconFeedback = IconFactory(<SvgFeedback />);\nexport const IconFileLink = IconFactory(<SvgFileLink />);\nexport const IconTime = IconFactory(<SvgTime />);\nexport const IconDeleteOutline = IconFactory(<SvgDeleteOutline />);\nexport const IconDeleteOutline2 = IconFactory(<SvgDeleteOutline2File />);\nexport const IconDraftsTag = IconFactory(<SvgDraftsTag />);\nexport const IconMoreRound = IconFactory(<SvgMoreRound />);\nexport const IconUploadOutlined = IconFactory(<SvgUploadOutlined />);\nexport const IconEditOutline = IconFactory(<SvgEditOutline />);\nexport const IconEditOutlined = IconFactory(<SvgEditOutlined />);\nexport const IconEditOutlined1 = IconFactory(<SvgEditOutlined1 />);\nexport const IconSearchInput = IconFactory(<SvgSearchInput />);\nexport const IconAutoShape = IconFactory(<SvgIconAutoShape />);\n\nexport const IconMenuSocialMedia = IconFactory(<SvgIconMenuSocialMedia />);\nexport const IconMenuSocialMediaYoutube = IconFactory(\n  <SvgIconMenuSocialMediaYoutube />,\n);\nexport const IconMenuSocialMediaX = IconFactory(<SvgIconMenuSocialMediaX />);\nexport const IconMenuFeedback = IconFactory(<SvgIconMenuFeedback />);\nexport const IconMenuDocument = IconFactory(<SvgIconMenuDocument />);\nexport const IconMenuCommunity = IconFactory(<SvgIconMenuCommunity />);\nexport const IconMenuCommunityTelegram = IconFactory(\n  <SvgIconMenuCommunityTelegram />,\n);\nexport const IconMenuCommunityDiscord = IconFactory(\n  <SvgIconMenuCommunityDiscord />,\n);\n\nexport const IconMenuLogo = IconFactory(<SvgIconBotMenuLogo />);\nexport const IconChatHashtag = IconFactory(<SvgChatHashtag />);\nexport const IconMenuLogoText = IconFactory(<SvgIconBotMenuLogoText />);\nexport const IconMenuLogoTextCN = IconFactory(<SvgIconBotMenuLogoTextCN />);\n\nexport const IconMenuPlus = IconFactory(<SvgIconBotMenuPlus />);\n\nexport const IconQueryEmpty = IconFactory(<SvgQueryEmpty />);\n\nexport const IconCollapse = IconFactory(<SvgCollapse />);\nexport const IconLargeEmpty = IconFactory(<SvgLargeEmptyIcon />);\nexport const IconEmpty = IconFactory(<SvgEmptyIcon />);\nexport const IconPlayRoundOutlined = IconFactory(<SvgPlayOutline />);\nexport const IconCardSearchOutlined = IconFactory(<SvgCardSearchOutline />);\nexport const IconGroupCardOutlined = IconFactory(<SvgGroupCardOutlined />);\nexport const IconGroupCardNoBind = IconFactory(<SvgGroupCardNoBind />);\nexport const IconHistory = IconFactory(<SvgHistory />);\nexport const IconDataSheetOutlined = IconFactory(<SvgDataSheet />);\nexport const IconTaskOutlined = IconFactory(<SvgTask />);\nexport const IconPDFFile = IconFactory(<SvgPDFFile />);\nexport const IconDocxFile = IconFactory(<SvgDocxFile />);\nexport const IconTextFile = IconFactory(<SvgTextFile />);\nexport const IconUnitsFile = IconFactory(<SvgUnitsFile />);\nexport const IconUpdateOutlined = IconFactory(<SvgIconUpdateOutlined />);\nexport const IconUnitsTable = IconFactory(<SvgUnitsTable />);\nexport const IconUnknowFile = IconFactory(<SvgUnknowFile />);\nexport const IconRefresh = IconFactory(<SvgRefresh />);\nexport const IconDeleteMessage = IconFactory(<SvgDeleteMessage />);\nexport const IconMoreOperationsMessage = IconFactory(\n  <SvgMoreOperationsMessage />,\n);\nexport const IconMoreOperationsDeleteMessage = IconFactory(\n  <SvgMoreOperationsDeleteMessage />,\n);\nexport const IconFrownUponMessageSelected = IconFactory(\n  <SvgFrownUponMessageSelected />,\n);\nexport const IconFrownUponMessage = IconFactory(<SvgFrownUponMessage />);\nexport const IconThumbsUpMessageSelected = IconFactory(\n  <SvgThumbsUpMessageSelected />,\n);\nexport const IconThumbsUpMessage = IconFactory(<SvgThumbsUpMessage />);\nexport const IconUpload = IconFactory(<SvgUpload />);\nexport const IconLocalFile = IconFactory(<SvgLocalFile />);\nexport const IconOnlineData = IconFactory(<SvgOnlineData />);\nexport const IconTableApiOutlined = IconFactory(<SvgTableApiOutlined />);\nexport const IconCustomData = IconFactory(<SvgCustomData />);\nexport const IconStatusSucceed = IconFactory(<SvgSucceed />);\nexport const IconStatusWarning = IconFactory(<SvgWarning />);\n\nexport const IconStatusInfo = IconFactory(<SvgStatusInfo />);\nexport const IconNewConversation = IconFactory(<SvgNewConversation />);\n\nexport const IconBrandCnWhiteRow = IconFactory(<SvgBrandCnWhiteRow />);\nexport const IconBrandEnWhiteRow = IconFactory(<SvgBrandEnWhiteRow />);\nexport const IconBrandCnBlackRow = IconFactory(<SvgBrandCnBlackRow />);\nexport const IconBrandEnBlackRow = IconFactory(<SvgBrandEnBlackRow />);\nexport const IconBrandCnWhiteColumn = IconFactory(<SvgBrandCnWhiteColumn />);\nexport const IconBrandEnWhiteColumn = IconFactory(<SvgBrandEnWhiteColumn />);\nexport const IconBrandCnBlackColumn = IconFactory(<SvgBrandCnBlackColumn />);\nexport const IconBrandEnBlackColumn = IconFactory(<SvgBrandEnBlackColumn />);\nexport const IconBotIcon = IconFactory(<SvgBotIcon />);\nexport const IconGoogle = IconFactory(<SvgGoogle />);\nexport const IconDouyin = IconFactory(<SvgDouyin />);\nexport const IconDouyinSquare = IconFactory(<SvgDouyinSquare />);\nexport const IconFullscreen = IconFactory(<SvgFullscreen />);\nexport const IconPlus = IconFactory(<SvgPlus />);\nexport const IconMinus = IconFactory(<SvgMinus />);\nexport const IconAutoLayout = IconFactory(<SvgAutoLayout />);\nexport const IconWithdraw = IconFactory(<SvgWithdraw />);\nexport const IconPolyline = IconFactory(<SvgPolyline />);\nexport const IconSmoothline = IconFactory(<SvgSmoothline />);\nexport const IconArrowRight = IconFactory(<SvgIconArrowRight />);\nexport const IconImportOutlined = IconFactory(<SvgIconImportOutlined />);\nexport const IconArrowRightAdjustable = IconFactory(\n  <SvgIconArrowRightAdjustable />,\n);\nexport const IconParagraphCopy = IconFactory(<SvgParagraphCopy />);\nexport const IconCardMore = IconFactory(<SvgWorkflowCardMore />);\nexport const IconError = IconFactory(<SvgErrorIcon />);\nexport const IconModalError = IconFactory(<SvgModalErrorIcon />);\nexport const IconSuccess = IconFactory(<SvgSuccessIcon />);\nexport const IconCommunityWeixinLoading = IconFactory(\n  <SvgCommunityWeixinLoading />,\n);\nexport const IconCommunityWeixin = IconFactory(<SvgCommunityWeixin />);\nexport const IconCommunityDiscord = IconFactory(<SvgCommunityDiscord />);\nexport const IconGoogleLogo16 = IconFactory(<SvgIconGoogle16 />);\nexport const IconDropdownTrigger = IconFactory(<SvgDropdownTrigger />);\nexport const IconLogo = IconFactory(<SvgLogo />);\nexport const IconLogoWife = IconFactory(<SvgLogoWife />);\nexport const IconAddCircle = IconFactory(<SvgAddCircle />);\nexport const IconSlash = IconFactory(<SvgSlash />);\nexport const IconListCheck = IconFactory(<SvgListCheck />);\nexport const IconPersonFilled = IconFactory(<SvgPersonFilled />);\nexport const IconTeamFilled = IconFactory(<SvgTeamFilled />);\nexport const IconToastInfo = IconFactory(<SvgToastInfo />);\nexport const IconToastSuccess = IconFactory(<SvgToastSuccess />);\nexport const IconToastWarning = IconFactory(<SvgToastWarning />);\nexport const IconToastError = IconFactory(<SvgToastError />);\nexport const IconMultipleMode = IconFactory(<SvgMultipleMode />);\nexport const IconSingleMode = IconFactory(<SvgSingleMode />);\nexport const IconBotMultiModelBtn = IconFactory(<SvgBotMultiModelBtn />);\nexport const IconChat = IconFactory(<SvgChatIcon />);\nexport const IconChatDisable = IconFactory(<SvgChatIconDisable />);\nexport const IconAgentLogo = IconFactory(<SvgAgentLogo />);\nexport const IconAgentToolsSkill = IconFactory(<SvgAgentToolsSkill />);\nexport const IconAgentWorkflowSkill = IconFactory(<SvgAgentWorkflowSkill />);\nexport const IconAgentKnowledgeSkill = IconFactory(<SvgAgentKnowledgeSkill />);\nexport const IconBotMultiLeftBtnIcon = IconFactory(<SvgBotMultiLeftBtnIcon />);\nexport const IconBotMultiRightBtnIcon = IconFactory(\n  <SvgBotMultiRightBtnIcon />,\n);\nexport const IconBotExit = IconFactory(<SvgBotExit />);\nexport const IconValcanoColored = IconFactory(<SvgValcanoColored />);\nexport const IconBotPublished = IconFactory(<SvgBotPublished />);\nexport const IconNoFilled = IconFactory(<SvgNoFilledIcon />);\nexport const IconNationalEmblem = IconFactory(<SvgNationalEmblem />);\nexport const IconUploadOutlinedUp = IconFactory(<SvgUploadOutlinedUp />);\nexport const IconAi = IconFactory(<SvgAi />);\nexport const IconCloseOutlined = IconFactory(<SvgCloseOutlined />);\nexport const IconDropdownMobile = IconFactory(<SvgDropdownMobile />);\nexport const IconLearnMore = IconFactory(<SvgLearnMoreIcon />);\nexport const IconMobileCommunity = IconFactory(<SvgMobileCommunity />);\nexport const IconMobileFeishu = IconFactory(<SvgMobileFeishu />);\nexport const IconDropdownClose = IconFactory(<SvgDropdownClose />);\nexport const IconMobileEmail = IconFactory(<SvgMobileEmail />);\nexport const IconMobileSound = IconFactory(<SvgIconMobileSound />);\nexport const IconMobileSoundNormal = IconFactory(<SvgIconMobileSoundNormal />);\nexport const IconMobileSoundClosed = IconFactory(<SvgIconMobileSoundClosed />);\nexport const IconMobileSoundDisable = IconFactory(\n  <SvgIconMobileSoundDisable />,\n);\nexport const IconMobileShare = IconFactory(<SVGIconMobileShare />);\nexport const IconMobileSetting = IconFactory(<SvgIconMobileSetting />);\nexport const IconMobileCollect = IconFactory(<SvgIconMobileCollect />);\nexport const IconMobileCollectFill = IconFactory(<SvgIconMobileCollectFill />);\nexport const IconMobileMenu = IconFactory(<SvgIconMobileMenu />);\nexport const IconMobileClose = IconFactory(<SvgIconMobileClose />);\nexport const IconMobileMore = IconFactory(<SvgIconMobileMore />);\nexport const IconDebugTts = IconFactory(<SvgDebugTts />);\nexport const IconMinimizeWindow = IconFactory(<SvgMinimizeWindow />);\nexport const IconBotDatabase = IconFactory(<SvgBotDatabase />);\nexport const IconWarningInfo = IconFactory(<SvgWarningInfoIcon />);\nexport const IconCloseNoCycle = IconFactory(<SvgIconCloseNoCycle />);\nexport const IconWarningStrongInfo = IconFactory(<SvgWarningStrongInfoIcon />);\nexport const IconWarningSize24 = IconFactory(<SvgWarningSize24 />);\nexport const IconTextFormat = IconFactory(<SvgTextFormat />);\nexport const IconTextFormatActive = IconFactory(<SvgTextFormatActive />);\nexport const IconTableFormat = IconFactory(<SvgTableFormat />);\nexport const IconTableFormatActive = IconFactory(<SvgTableFormatActive />);\nexport const IconDocResegment = IconFactory(<SvgDocResegment />);\nexport const IconKnowledgeSetting = IconFactory(<SvgKnowledgeSetting />);\nexport const IconUpdateFrequency = IconFactory(<SvgUpdateFrequency />);\nexport const IconUpdateTableConfig = IconFactory(<SvgUpdateTableConfig />);\nexport const IconUploadAPI = IconFactory(<SvgUploadAPI />);\nexport const IconUploadPDF = IconFactory(<SvgUploadPdf />);\nexport const IconUploadCSV = IconFactory(<SvgUploadCsv />);\nexport const IconUploadDoc = IconFactory(<SvgUploadDoc />);\nexport const IconUploadTxt = IconFactory(<SvgUploadTxt />);\nexport const IconUploadTableUrl = IconFactory(<SvgUploadTableUrl />);\nexport const IconUploadTextUrl = IconFactory(<SvgUploadTextUrl />);\nexport const IconUploadXLS = IconFactory(<SvgUploadXLS />);\nexport const IconUploadMD = IconFactory(<SvgUploadMD />);\nexport const IconUploadFileSuccess = IconFactory(<SvgUploadFileSuccess />);\nexport const IconUploadFileFail = IconFactory(<SvgUploadFileFail />);\nexport const IconWaringRed = IconFactory(<SvgWaringRedIcon />);\nexport const IconSegmentEmpty = IconFactory(<SvgSegmentEmptyIcon />);\nexport const IconSvgUpBold = IconFactory(<SvgUpBoldIcon />);\nexport const IconSvgDownBold = IconFactory(<SvgDownBoldIcon />);\nexport const IconSvgUploadCompletedIcon = IconFactory(\n  <SvgUploadCompletedIcon />,\n);\n// export const IconRefreshOutlined = IconFactory(<SvgRefreshIcon />);\nexport const IconUnitEditIcon = IconFactory(<SvgUnitEditIcon />);\nexport const IconUpOutlined = IconFactory(<SvgUpOutlined />);\nexport const IconChatboxOutlined = IconFactory(<SvgChatboxOutlined />);\nexport const IconGlobalIntentLogo = IconFactory(<SvgGlobalIntentLogo />);\nexport const IconAddAgentLogo = IconFactory(<SvgAddAgentLogo />);\nexport const IconExit = IconFactory(<SvgExitIcon />);\nexport const IconArrowLeft = IconFactory(<SvgArrowLeft />);\nexport const IconEditNew = IconFactory(<SvgEditNew />);\nexport const IconNavBarBack = IconFactory(<SvgNavBarBack />);\nexport const IconCloseKnowledge = IconFactory(<SvgCloseKnowledge />);\n\nexport const IconCopyOutlined = IconFactory(<SvgCopyOutlined />);\nexport const IconRefreshOutlined = IconFactory(<SvgRefreshOutlined />);\nexport const IconRefreshOutlinedNormalized = IconFactory(\n  <SvgRefreshOutlinedNormalized />,\n);\nexport const IconSvgLogOut = IconFactory(<SvgLogOutIcon />);\nexport const IconSvgFile = IconFactory(<SvgFileIcon />);\nexport const IconSvgSheet = IconFactory(<SvgSheetIcon />);\nexport const IconSvgUnbound = IconFactory(<SvgUnBoundIcon />);\nexport const IconTabDownOutlined = IconFactory(<SvgTabDownOutlined />);\nexport const IconCancelLinkOutlined = IconFactory(\n  <SvgCancelLinkOutlinedIcon />,\n);\n\nexport const IconMemberOutlined = IconFactory(<SvgMemberOutlinedIcon />);\nexport const IconLoading = IconFactory(<SvgLoading />);\nexport const IconTimeOutlined = IconFactory(<SvgTimeOutlinedIcon />);\nexport const IconCollectionOutlined = IconFactory(\n  <SvgCollectionOutlinedIcon />,\n);\nexport const IconViewinchatOutlined = IconFactory(<SvgViewinchatOutlined />);\nexport const IconReport = IconFactory(<SvgReportIcon />);\nexport const IconEffectsFilled = IconFactory(<SvgEffectsFilled />);\nexport const IconConversionOutlined = IconFactory(<SvgConversionOutlined />);\nexport const IconPlatformOutlined = IconFactory(<SvgPlatformOutlined />);\nexport const IconHotBot = IconFactory(<SvgHotBot />);\nexport const IconDrag = IconFactory(<SvgDrag />);\nexport const IconEllipsis = IconFactory(<SvgEllipsis />);\nexport const IconLeftArrow = IconFactory(<SvgLeftArrow />);\nexport const IconStore = IconFactory(<SvgStoreIcon />);\nexport const IconShare = IconFactory(<SvgShareIcon />);\nexport const IconClear = IconFactory(<SvgClear />);\nexport const IconAt = IconFactory(<SvgIconAt />);\nexport const IconAtOutlined = IconFactory(<SvgIconAtOutlined />);\nexport const IconCcmNextOutlined = IconFactory(<SvgIconCcmNextOutlined />);\nexport const IconToken = IconFactory(<SvgTokenIcon />);\nexport const IconTokenSelected = IconFactory(<SvgTokenIconSelected />);\nexport const IconTasklistOutlined = IconFactory(<SvgTasklistOutlined />);\nexport const IconIDEFilebox = IconFactory(<SvgIDEFilebox />);\nexport const IconCommunityTabOutlined = IconFactory(\n  <SvgCommunityTabOutlined />,\n);\nexport const IconDiscussOutlined = IconFactory(<SvgDiscussOutlined />);\nexport const IconApiOutlined = IconFactory(<SvgApiOutlined />);\nexport const IconOpenAPI = IconFactory(<SvgOpenAPIIcon />);\nexport const IconCopyLink = IconFactory(<SvgCopyLinkIcon />);\nexport const IconSpeakerOutlined = IconFactory(<SvgSpeakerOutlined />);\nexport const IconEditOptions = IconFactory(<SvgEditOptions />);\nexport const IconSvgNotion = IconFactory(<SvgNotionIcon />);\nexport const IconSvgGoogle = IconFactory(<SvgGoogleIcon />);\nexport const IconSvgFeishu = IconFactory(<SvgFeishuIcon />);\nexport const IconSvgWeixin = IconFactory(<SvgWeixinIcon />);\nexport const IconSvgFolder = IconFactory(<SvgFolderIcon />);\nexport const IconSvgTextFile = IconFactory(<SvgTextFileIcon />);\nexport const IconSvgSheetFile = IconFactory(<SvgSheetFileIcon />);\nexport const IconSvgWarning = IconFactory(<SvgWaringOrangeIcon />);\nexport const IconSvgSelectArrow = IconFactory(<SvgSelectArrowIcon />);\n\nexport const IconSvgProcessPlugin = IconFactory(<SvgProcessPlugin />);\nexport const IconSvgProcessDataSet = IconFactory(<SvgProcessDataSet />);\nexport const IconSvgProcessJump = IconFactory(<SvgProcessJump />);\n\nexport const IconSvgSvgTaskTime = IconFactory(<SvgTaskTime />);\nexport const IconSvgSvgTaskEvent = IconFactory(<SvgTaskEvent />);\n\nexport const IconPluginShop = IconFactory(<SvgPluginShop />);\nexport const IconOpenInDefault = IconFactory(<SvgOpenInDefault />);\nexport const IconCodeOutlined = IconFactory(<SvgCodeOutlined />);\nexport const IconPositionFilled = IconFactory(<SvgPositionFilled />);\n\nexport const IconDateListPicker = IconFactory(<SvgDateListPickerIcon />);\nexport const IconWidgetPublished = IconFactory(<SvgWidgetPublished />);\nexport const IconWidgetUnpublished = IconFactory(<SvgWidgetUnpublished />);\n\nexport const IconPaLogOutlined = IconFactory(<SvgPaLogOutlined />);\nexport const IconCalendar = IconFactory(<SvgCalendar />);\n\nexport const IconSpanBMParallel = IconFactory(<SvgSpanBMParallel />);\nexport const IconSpanBMConnector = IconFactory(<SvgSpanBMConnector />);\nexport const IconSpanBMBatch = IconFactory(<SvgSpanBMBatch />);\nexport const IconSpanAgent = IconFactory(<SvgSpanAgent />);\nexport const IconSpanBot = IconFactory(<SvgSpanBot />);\nexport const IconSpanCode = IconFactory(<SvgSpanCode />);\nexport const IconSpanHook = IconFactory(<SvgSpanHook />);\nexport const IconSpanCondition = IconFactory(<SvgSpanCondition />);\nexport const IconSpanDatabase = IconFactory(<SvgSpanDatabase />);\nexport const IconSpanKnowledge = IconFactory(<SvgSpanKnowledge />);\nexport const IconSpanLLMCall = IconFactory(<SvgSpanLLMCall />);\nexport const IconpanNodeDamaged = IconFactory(<SvgSpanNodeDamaged />);\nexport const IconSpanPluginTool = IconFactory(<SvgSpanPluginTool />);\nexport const IconSpanVar = IconFactory(<SvgSpanVar />);\nexport const IconSpanWorkflowEnd = IconFactory(<SvgSpanWorkflowEnd />);\nexport const IconSpanWorkflowStart = IconFactory(<SvgSpanWorkflowStart />);\nexport const IconSpanCard = IconFactory(<SvgSpanCard />);\nexport const IconSpanMessage = IconFactory(<SvgSpanMessage />);\n\nexport const IconSpanWorkflow = IconFactory(<SvgSpanWorkflow />);\nexport const IconSpanUnknown = IconFactory(<SvgSpanUnknown />);\nexport const IconAddChildOutlined = IconFactory(<SvgAddChildOutlined />);\nexport const IconAutoGeneration = IconFactory(<SvgAutoGenerationIcon />);\n\nexport const IconSvgFooterDocument = IconFactory(<SvgFooterDocumentIcon />);\nexport const IconSvgFooterMail = IconFactory(<SvgFooterMailIcon />);\nexport const IconSvgFooterWeixin = IconFactory(<SvgFooterWeixinIcon />);\nexport const IconSvgFooterFeishu = IconFactory(<SvgFooterFeishuIcon />);\nexport const IconSvgFooterDiscord = IconFactory(<SvgFooterDiscordIcon />);\n\nexport const IconSvgBotStoreUser = IconFactory(<SvgBotStoreUser />);\nexport const IconSvgBotStoreConversaion = IconFactory(\n  <SvgBotStoreConversaion />,\n);\nexport const IconSvgBotStoreLink = IconFactory(<SvgBotStoreLink />);\nexport const IconSvgIconBotStoreQuestion = IconFactory(\n  <SvgIconBotStoreQuestion />,\n);\nexport const IconHand = IconFactory(<SvgHandIcon />);\nexport const IconHelp = IconFactory(<SvgHelpIcon />);\nexport const IconOpenTranslate = IconFactory(<SvgOpenTranslateIcon />);\nexport const IconExpandOutlined = IconFactory(<SvgExpandOutlined />);\nexport const IconAiStopGen = IconFactory(<SvgAiStopGenIcon />);\nexport const IconViewDiff = IconFactory(<SvgDiff />);\nexport const IconYesFilled = IconFactory(<SvgYesFilled />);\nexport const IconSideFoldOutlined = IconFactory(<SVGIconSideFoldOutlined />);\n\nexport const IconSvgCozeTxtEn = IconFactory(<SvgCozeTxtEn />);\nexport const IconSvgCozeTxtCn = IconFactory(<SvgCozeTxtCn />);\nexport const IconSvgCozeLogo = IconFactory(<SvgCozeLogo />);\n\nexport const IconInvisible = IconFactory(<SvgInvisible />);\nexport const IconVisible = IconFactory(<SvgVisible />);\nexport const IconMenu = IconFactory(<SvgMenuIcon />);\nexport const IconChevronRight = IconFactory(<SvgChevronRightIcon />);\nexport const IconChevronDown = IconFactory(<SvgChevronDownIcon />);\nexport const IconSvgListFilter = IconFactory(<SvgListFilter />);\nexport const IconStoreListMore = IconFactory(<SvgStoreListMoreIcon />);\nexport const IconSvgSceneListEmpty = IconFactory(<SvgSceneListEmptyIcon />);\n\nexport const IconPhone = IconFactory(<SvgPhoneIcon />);\nexport const IconPC = IconFactory(<SvgPCIcon />);\nexport const IconIntelligent = IconFactory(<SvgIntelligentIcon />);\nexport const IconStandardRefresh = IconFactory(<SvgStandardRefresh />);\nexport const IconStandardCopy = IconFactory(<SvgStandardCopy />);\nexport const IconArrowDownFill = IconFactory(<SvgArrowDownFill />);\nexport const IconBlod = IconFactory(<SvgBold />);\nexport const IconHn = IconFactory(<SvgHn />);\nexport const IconItalic = IconFactory(<SvgItalic />);\nexport const IconStrikethrough = IconFactory(<SvgStrikethrough />);\nexport const IconListDisorder = IconFactory(<SvgListDisorder />);\nexport const IconListOrder = IconFactory(<SvglistOrder />);\nexport const IconQuotation = IconFactory(<SvgQuotation />);\nexport const IconLink = IconFactory(<SvgLink />);\nexport const IconImage = IconFactory(<SvgImage />);\nexport const IconH1 = IconFactory(<SvgH1 />);\nexport const IconH2 = IconFactory(<SvgH2 />);\nexport const IconH3 = IconFactory(<SvgH3 />);\nexport const IconEmojiOutlined = IconFactory(<SvgEmojiOutlined />);\nexport const IconReplyOutlined = IconFactory(<SvgReplyOutlined />);\nexport const IconMinimizeOutlined = IconFactory(<SvgMinimizeOutlined />);\nexport const IconBrace = IconFactory(<SvgBrace />);\nexport const IconPost = IconFactory(<SvgPost />);\nexport const IconKnowledgeDocAvatar = IconFactory(<SvgKnowledgeDocAvatar />);\nexport const IconKnowledgeTableAvatar = IconFactory(\n  <SvgKnowledgeTableAvatar />,\n);\nexport const IconKnowledgeArrow = IconFactory(<SvgArrowKnowledgeIcon />);\n\nexport const IconKnowledgeImgAvatar = IconFactory(<SvgKnowledgeImgAvatar />);\n\nexport const IconExampleInvalid = IconFactory(<SvgExampleInvalidIcon />);\nexport const IconExampleNone = IconFactory(<SvgExampleNoneIcon />);\nexport const IconExampleNormal = IconFactory(<SvgExampleNormalIcon />);\nexport const IconAnalyticsGlobal = IconFactory(<SvgAnalyticsGlobalIcon />);\nexport const IconAnalyticsRegional = IconFactory(<SvgAnalyticsRegionalIcon />);\nexport const IconAnalyticsRanking = IconFactory(<SvgAnalyticsRankingIcon />);\n\nexport const IconShortcutEdit = IconFactory(<SvgShortcutEdit />);\nexport const IconShortcutTrash = IconFactory(<SvgShortcutTrash />);\nexport const IconShortcutDisorder = IconFactory(<SvgShortcutDisorder />);\nexport const IconTemplateShortcut = IconFactory(<SvgTemplateShortcut />);\nexport const IconTemplateShortcutTransparency = IconFactory(\n  <SvgTemplateShortcutTransparency />,\n);\nexport const IconShortcutTemplateClose = IconFactory(\n  <SvgTemplateShortcutClose />,\n);\nexport const IconLoadMoreShortcuts = IconFactory(<SvgLoadMoreShortcuts />);\nexport const IconShortcutComponentTag = IconFactory(\n  <SvgShortcutComponentTag />,\n);\nexport const IconSvgShortcutDrag = IconFactory(<SvgShortcutDrag />);\n\nexport const IconMar = IconFactory(<SvgMarIcon />);\nexport const IconMarColor = IconFactory(<SvgMarColorIcon />);\n\nexport const IconSortDescend = IconFactory(<SvgSortDescendIcon />);\nexport const IconSortAscend = IconFactory(<SvgSortAscendIcon />);\nexport const IconSortDefault = IconFactory(<SvgSortDefaultIcon />);\n\nexport const IconWeChatColorful = IconFactory(<SvgWeChatColorful />);\nexport const IconWeiboColorful = IconFactory(<SvgWeiboColorful />);\nexport const IconQzoneColorful = IconFactory(<SvgQzoneColorful />);\nexport const IconJuejinColorful = IconFactory(<SvgJuejinColorful />);\nexport const IconXColorful = IconFactory(<SvgXColorful />);\nexport const IconRedditColorful = IconFactory(<SvgRedditColorful />);\nexport const IconImageColorful = IconFactory(<SvgImageColorful />);\nexport const IconStoreMenuWorkflow = IconFactory(<SvgStoreMenuWorkflow />);\nexport const IconStoreMenuWorkflowSelected = IconFactory(\n  <SvgStoreMenuWorkflowSelected />,\n);\n\nexport const IconCozeEN = IconFactory(<SvgCozeENIcon />);\nexport const IconCozeZH = IconFactory(<SvgCozeZHIcon />);\nexport const IconSvgBitableFormOutlined = IconFactory(\n  <SvgBitableFormOutlined />,\n);\nexport const IconCozOfficialFill = IconFactory(<SvgCozOfficialFill />);\nexport const IconConnect = IconFactory(<SvgConnect />);\n\nexport const IconSvgReadInfoOutlined = IconFactory(<SvgReadInfoOutlined />);\nexport const IconLtmEdit = IconFactory(<SvgLtmEditIcon />);\nexport const IconDatabaseTab = IconFactory(<SvgDatabaseTabIcon />);\nexport const IconLtmTab = IconFactory(<SvgLtmTabIcon />);\nexport const IconVariableTab = IconFactory(<SvgVariableTabIcon />);\nexport const IconMemoryDownMenu = IconFactory(<SvgMemoryDownMenuIcon />);\nexport const IconBotStoreMemoryMenu = IconFactory(<SvgBotstoreMemoryIcon />);\nexport const IconUpOutlinedBold = IconFactory(<SvgUpOutlinedBold />);\nexport const IconSvgAddIcon = IconFactory(<SvgAddIcon />);\nexport const IconKnowledgeEditOutlined = IconFactory(<SvgKnowledgeEdit />);\nexport const IconCozeCross = IconFactory(<SvgCozeCross />);\nexport const IconLocalPlugin = IconFactory(<SvgLocalPluginIcon />);\nexport const IconDocLinkOutlined = IconFactory(<SvgDocLinkOutlinedIcon />);\nexport const IconDocRefreshOutlined = IconFactory(\n  <SvgDocRefreshOutlinedIcon />,\n);\nexport const IconKnowledgeSettingOutlined = IconFactory(\n  <SvgKnowledgeSettingOutlinedIcon />,\n);\nexport const IconViewContentOutlined = IconFactory(\n  <SvgViewContentOutlinedIcon />,\n);\nexport const IconDragOutlined = IconFactory(<SvgDragOutlined />);\n\nexport const IconFileBox = IconFactory(<SvgFileBox />);\nexport const IconLinkOutlined = IconFactory(<SvgFileLinkOutlined />);\nexport const IconAddEntryBottom = IconFactory(<SvgAddEntryBottomOutlined />);\nexport const IconAddEntryTop = IconFactory(<SvgAddEntryTopOutlined />);\n\nexport const IconSettingOutlined = IconFactory(<SvgHotIconSettingOutlined />);\nexport const IconDocumentCode = IconFactory(<SvgDocumentCode />);\nexport const IconCozArrowDown = IconFactory(<SvgCozArrowDownIcon />);\nexport const IconCozArrowDownLeft = IconFactory(<SvgCozArrowDownLeftIcon />);\nexport const IconDiamondFill = IconFactory(<SvgDiamondFill />);\nexport const IconCheckMark = IconFactory(<SvgCozCheckMark />);\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Ref, forwardRef } from 'react';\n\nimport cs from 'classnames';\nimport type { InputProps } from '@douyinfe/semi-ui/lib/es/input';\nimport { Input as SemiInput } from '@douyinfe/semi-ui';\n\nimport s from './index.module.less';\n\nexport const Input = forwardRef(\n  ({ className, ...props }: InputProps, ref: Ref<HTMLInputElement>) => (\n    <SemiInput className={cs(className, s['ui-input'])} {...props} ref={ref} />\n  ),\n);\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type Ref, forwardRef } from 'react';\n\nimport cs from 'classnames';\nimport type { ButtonProps as SemiButtonProps } from '@douyinfe/semi-ui/lib/es/button';\nimport { Button as SemiButton } from '@douyinfe/semi-ui';\n\nimport s from './index.module.less';\n\nexport type UIButtonProps = SemiButtonProps;\n\nexport const Button = forwardRef(\n  ({ className, ...props }: SemiButtonProps, ref: Ref<SemiButton>) => (\n    <SemiButton\n      {...props}\n      className={cs(\n        className,\n        s.button,\n        props.theme !== 'borderless' && s['button-min-width'],\n        props.size === 'small' && s['button-size-small'],\n        props.size === 'default' && s['button-size-default'],\n      )}\n      ref={ref}\n    />\n  ),\n);\n\nexport type Button = SemiButton;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FC, useRef } from 'react';\n\nimport cs from 'classnames';\nimport { InputProps } from '@douyinfe/semi-ui/lib/es/input';\nimport { CommonFieldProps } from '@douyinfe/semi-ui/lib/es/form';\nimport { withField } from '@douyinfe/semi-ui';\n\nimport { Input } from '../../ui-input';\n\nimport s from './index.module.less';\n\nconst InputInner = withField(Input, {});\n\nexport const UIFormInput: FC<CommonFieldProps & InputProps> = ({\n  fieldClassName,\n  ...props\n}) => {\n  const inputRef = useRef<HTMLInputElement>(null);\n  return (\n    <div\n      style={{\n        // @ts-expect-error ts cannot recognize css custom variable\n        '--var-error-msg-offset': props.addonBefore\n          ? `${inputRef.current?.offsetLeft ?? 0}px`\n          : '0px',\n      }}\n    >\n      <InputInner\n        {...props}\n        fieldClassName={cs(fieldClassName, s.field)}\n        ref={inputRef}\n      />\n    </div>\n  );\n};\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { forwardRef } from 'react';\n\nimport cs from 'classnames';\nimport { TextArea, withField } from '@douyinfe/semi-ui';\n\nimport s from './index.module.less';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst TextAreaInner: any = withField(TextArea, {});\n\nexport const UIFormTextArea: typeof TextAreaInner = forwardRef(\n  // @ts-expect-error -- to fix\n  ({ fieldClassName, ...props }, ref) => (\n    <TextAreaInner\n      ref={ref}\n      {...props}\n      fieldClassName={cs(fieldClassName, s.field)}\n    />\n  ),\n);\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable @typescript-eslint/naming-convention */\n\nimport React, {\n  ForwardRefExoticComponent,\n  RefAttributes,\n  forwardRef,\n} from 'react';\n\nimport { isString } from 'lodash-es';\nimport classNames from 'classnames';\nimport { IconListCheck } from '@coze-arch/bot-icons';\nimport {\n  SelectProps,\n  optionRenderProps,\n} from '@douyinfe/semi-ui/lib/es/select';\nimport { Select, Typography } from '@douyinfe/semi-ui';\nimport { IconSmallTriangleDown } from '@douyinfe/semi-icons';\n\nimport s from './index.module.less';\n\nexport interface FilterProps {\n  label?: string;\n  theme?: 'borderless' | 'light';\n  selectedClassname?: string;\n}\n\nexport interface SemiSelectActions {\n  close: () => void;\n  open: () => void;\n  focus: () => void;\n  clearInput: () => void;\n  deselectAll: () => void;\n  selectAll: () => void;\n  search: (value: string, event: React.ChangeEvent<HTMLInputElement>) => void;\n}\n\nconst UISelectOption: React.FC<optionRenderProps> = ({\n  disabled,\n  label,\n  onClick,\n  selected,\n  value,\n  key,\n  optionClassName,\n}) => (\n  <div\n    key={key || value}\n    className={classNames(\n      s['ui-select-option'],\n      disabled && s['ui-select-option-disabled'],\n      selected && s['ui-select-option-selected'],\n      optionClassName,\n    )}\n    onClick={e => {\n      if (disabled) {\n        return;\n      }\n      onClick?.(e);\n    }}\n    data-testid=\"ui.select.option\"\n  >\n    <div className={s['ui-select-option-icon']}>\n      <IconListCheck className={s.icon} />\n    </div>\n    {!isString(label) ? (\n      label\n    ) : (\n      <div className={s['ui-select-option-text']}>{label}</div>\n    )}\n  </div>\n);\n\nconst BaseSelect = forwardRef<SemiSelectActions, FilterProps & SelectProps>(\n  (\n    { theme, className, label, size = 'default', clickToHide = true, ...props },\n    ref,\n  ) => {\n    const { selectedClassname } = props;\n\n    if (theme === 'borderless') {\n      return (\n        <Select\n          {...props}\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          ref={ref as any}\n          clickToHide={clickToHide}\n          className={classNames(\n            className,\n            s['borderless-ui-select'],\n            s['ui-select'],\n            s[`ui-select-${size}`],\n          )}\n          triggerRender={item => (\n            <div\n              className={s['filter-content']}\n              data-testid=\"ui.select.trigger\"\n            >\n              {label && <div className={s['filter-label']}>{`${label}:`}</div>}\n\n              <div\n                className={classNames(\n                  s['borderless-filter-render'],\n                  s[`size-${size}`],\n                )}\n              >\n                <Typography.Text\n                  ellipsis\n                  className={classNames(\n                    s['borderless-filter-text'],\n                    selectedClassname,\n                  )}\n                >\n                  {item?.value?.map(itemT => itemT.label)}\n                </Typography.Text>\n                <IconSmallTriangleDown className={s['filter-icon']} />\n              </div>\n            </div>\n          )}\n        />\n      );\n    }\n    return (\n      <Select\n        {...props}\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        ref={ref as any}\n        clickToHide={clickToHide}\n        className={classNames(\n          className,\n          s['ui-select'],\n          s['light-ui-select'],\n          s[`ui-select-${size}`],\n        )}\n      />\n    );\n  },\n);\n\nexport const UISelect: ForwardRefExoticComponent<\n  Omit<FilterProps & Omit<SelectProps, 'clickToHide'>, 'ref'> &\n    RefAttributes<SemiSelectActions>\n> & {\n  // Name the following Semi components\n\n  OptGroup: typeof Select.OptGroup;\n\n  Option: typeof Select.Option;\n} = forwardRef<\n  SemiSelectActions,\n  FilterProps & Omit<SelectProps, 'clickToHide'>\n>(\n  (\n    { theme = 'borderless', dropdownClassName, maxHeight = 216, ...props },\n    ref,\n  ) => (\n    <BaseSelect\n      clickToHide\n      ref={ref}\n      renderOptionItem={localeProps => <UISelectOption {...localeProps} />}\n      theme={theme}\n      dropdownClassName={classNames(dropdownClassName, s['ui-select-dropdown'])}\n      maxHeight={maxHeight}\n      {...props}\n    />\n  ),\n) as ForwardRefExoticComponent<\n  Omit<FilterProps & Omit<SelectProps, 'clickToHide'>, 'ref'> &\n    RefAttributes<SemiSelectActions>\n> & {\n  OptGroup: typeof Select.OptGroup;\n  Option: typeof Select.Option;\n};\n\nUISelect.OptGroup = Select.OptGroup;\nUISelect.Option = Select.Option;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ComponentProps } from 'react';\n\nimport { SelectProps } from '@douyinfe/semi-ui/lib/es/select';\nimport { CommonFieldProps } from '@douyinfe/semi-ui/lib/es/form';\nimport { withField } from '@douyinfe/semi-ui';\n\nimport { UISelect } from '../../ui-select';\n\n// The label attribute of UISelect is provided for the borderless theme. There is no such theme in the form scene. Remove this attribute to avoid mixing with the form label.\nconst SelectInner: React.FC<\n  Omit<ComponentProps<typeof UISelect>, 'label'>\n> = props => <UISelect {...props} />;\n\nconst FormSelectInner = withField(SelectInner);\n\nexport const UIFormSelect: React.FC<\n  Omit<SelectProps, 'theme'> & CommonFieldProps\n> & {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  OptGroup: typeof UISelect.OptGroup;\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  Option: typeof UISelect.Option;\n} = ({ ...props }) => <FormSelectInner {...props} theme=\"light\" />;\n\nUIFormSelect.Option = UISelect.Option;\nUIFormSelect.OptGroup = UISelect.OptGroup;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  Dispatch,\n  SetStateAction,\n  forwardRef,\n  useContext,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n  useState,\n} from 'react';\n\nimport { ReactElement } from 'react-markdown/lib/react-markdown';\nimport { Root, createRoot } from 'react-dom/client';\nimport { assign } from 'lodash-es';\nimport classNames from 'classnames';\nimport { useSize } from 'ahooks';\nimport { i18nContext, type I18nContext } from '@coze-arch/i18n/i18n-provider';\nimport { TableProps } from '@douyinfe/semi-ui/lib/es/table';\nimport { Table, Spin } from '@douyinfe/semi-ui';\nimport { IconSpin } from '@douyinfe/semi-icons';\n\nimport styles from './index.module.less';\n\nexport interface EmptyPropsType {\n  label?: string;\n}\n\nexport interface UITableProps {\n  offsetY?: number;\n  scrollX?: number;\n  tableProps?: TableProps;\n  bySearch?: boolean;\n  empty?: ReactElement;\n  enableLoad?: boolean;\n  total?: number;\n  onLoad?: () => void;\n  wrapperClassName?: string;\n  useHoverStyle?: boolean;\n  mergeTableList?: (\n    listA: Array<unknown>,\n    listB: Array<unknown>,\n  ) => Array<unknown>;\n}\n\nexport interface UITableMethods {\n  reset: () => void;\n  getTableList: <T>() => Array<T>;\n}\n\nexport const UITable = forwardRef<UITableMethods, UITableProps>(\n  (\n    {\n      offsetY = 0,\n      scrollX = 0,\n      tableProps: propsTableProps,\n      empty,\n      total = 0,\n      onLoad,\n      enableLoad,\n      wrapperClassName,\n      useHoverStyle = true,\n      mergeTableList = (tableA, tableB) => [...tableA, ...tableB],\n    },\n    ref,\n  ) => {\n    const { dataSource, ...tableProps } = propsTableProps ?? {};\n    const size = useSize(document.body);\n    const [initialized, setInitialized] = useState(false);\n\n    useEffect(() => {\n      if (!tableProps?.loading) {\n        setInitialized(true);\n      }\n    }, [tableProps?.loading]);\n\n    const showTable = initialized && !!dataSource?.length;\n\n    /**\n     * TODO: handle bottom loading, a lump of , to be optimized\n     */\n    const IndicatorRoot = useRef<Root>();\n\n    const tableRef = useRef(null);\n    const onLoadRef = useRef(onLoad);\n\n    const delayClear = useRef(false);\n\n    const [innerData, setInnerData] = useState([]);\n    const indicatorFlag = useRef(false);\n    const needRenderIndicator = total > innerData.length;\n    const needLoad = needRenderIndicator && !tableProps.loading;\n\n    const needLoadRef = useRef(needLoad);\n\n    const indicatorRef = useRef<IndicatorMethods>(null);\n\n    indicatorRef.current?.changeState({\n      done: total <= innerData.length,\n    });\n\n    useEffect(() => {\n      onLoadRef.current = onLoad;\n      needLoadRef.current = !!enableLoad && needLoad;\n    }, [onLoad, needLoad, enableLoad]);\n\n    useEffect(() => {\n      if (needLoadRef.current && enableLoad && !delayClear.current) {\n        // @ts-expect-error -- linter-disable-autofix\n        setInnerData(d => mergeTableList(d, dataSource ?? []));\n      } else {\n        // @ts-expect-error -- linter-disable-autofix\n        setInnerData(dataSource ?? []);\n      }\n      delayClear.current = false;\n    }, [dataSource, enableLoad]);\n\n    useEffect(() => {\n      if (tableRef.current && enableLoad && needRenderIndicator) {\n        const tableContainer =\n          // FIXME: This code has so many layers of refs and needs to be optimized\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          (tableRef.current as any).tableRef.current.bodyWrapRef.current;\n\n        if (enableLoad) {\n          if (!indicatorFlag.current) {\n            const f = document.createElement('div');\n\n            tableContainer.append(f);\n\n            IndicatorRoot.current = createRoot(f);\n            IndicatorRoot.current.render(\n              <Indicator\n                ref={indicatorRef}\n                onIntersecting={intersecting => {\n                  if (intersecting && needLoadRef.current) {\n                    onLoadRef.current?.();\n                  }\n                }}\n              />,\n            );\n            indicatorFlag.current = true;\n          }\n        }\n      } else {\n        return () => {\n          IndicatorRoot.current?.unmount();\n          needLoadRef.current = true;\n          indicatorFlag.current = false;\n        };\n      }\n    }, [showTable, enableLoad, needRenderIndicator]);\n\n    useImperativeHandle(ref, () =>\n      assign({}, tableRef.current, {\n        reset: () => {\n          delayClear.current = true;\n        },\n        getTableList: () => innerData,\n      }),\n    );\n\n    return (\n      <div className={classNames(styles['table-wrapper'], wrapperClassName)}>\n        {!initialized && (\n          <div className={styles['spin-container']}>\n            <Spin spinning={true} size=\"large\" />\n          </div>\n        )}\n        {showTable ? (\n          <Table\n            ref={tableRef}\n            pagination={false}\n            scroll={{ y: (size?.height || 0) - offsetY, x: scrollX }}\n            {...tableProps}\n            className={classNames(styles['table-list'], tableProps.className, {\n              [styles.tableListHoverStyle]: useHoverStyle,\n            })}\n            loading={enableLoad ? false : tableProps?.loading}\n            dataSource={enableLoad ? innerData : dataSource}\n          />\n        ) : null}\n\n        {/* empty state */}\n        {initialized && !tableProps?.loading && !dataSource?.length ? (\n          <div className={styles['empty-content']}>{empty}</div>\n        ) : null}\n      </div>\n    );\n  },\n);\n\n// Indicatore component\ninterface IndicatorState {\n  done: boolean;\n}\ninterface IndicatorProps {\n  onIntersecting: (isIntersecting: boolean) => void;\n}\n\ninterface IndicatorMethods {\n  changeState: Dispatch<SetStateAction<IndicatorState>>;\n}\n\nconst Indicator = forwardRef<IndicatorMethods, IndicatorProps>(\n  ({ onIntersecting }, ref) => {\n    const { i18n } = useContext<I18nContext>(i18nContext);\n    const indicatorRef = useRef<HTMLDivElement>(null);\n    const [state, setState] = useState<IndicatorState>({\n      done: false,\n    });\n\n    useEffect(() => {\n      const intersectionHandler = (entries: IntersectionObserverEntry[]) => {\n        const isIntersecting = entries[0]?.isIntersecting;\n\n        onIntersecting(isIntersecting);\n      };\n      const observer = new IntersectionObserver(intersectionHandler);\n      indicatorRef.current && observer.observe(indicatorRef.current);\n      return () => observer.disconnect();\n    }, []);\n\n    useImperativeHandle(ref, () => ({\n      changeState: setState,\n    }));\n\n    return !state.done ? (\n      <div ref={indicatorRef} className={styles.indicator}>\n        {!state.done && <IconSpin className={styles['indicator-loading']} />}\n        <span>{state.done ? '' : i18n.t('loading')}</span>\n      </div>\n    ) : null;\n  },\n);\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LegacyRef, forwardRef } from 'react';\n\nimport cs from 'classnames';\nimport { ButtonProps } from '@douyinfe/semi-ui/lib/es/button';\nimport { Button } from '@douyinfe/semi-ui';\n\nimport s from './index.module.less';\n\nexport interface UIIconButtonProps extends ButtonProps {\n  wrapperClass?: string;\n  /**\n   * iconSize: with hover size, small: 18, default: 24, large: 32\n   */\n  iconSize?: 'small' | 'default' | 'large';\n}\n\n//icon button component\nexport const UIIconButton = forwardRef(\n  (\n    {\n      className,\n      wrapperClass,\n      iconSize = 'default',\n      ...props\n    }: UIIconButtonProps,\n    ref: LegacyRef<Button>,\n  ) => (\n    <div\n      className={cs(\n        s['icon-button'],\n        s[`icon-button-${iconSize}`],\n        wrapperClass,\n      )}\n    >\n      <Button\n        ref={ref}\n        className={cs(className)}\n        {...props}\n        size=\"small\"\n        theme=\"borderless\"\n      />\n    </div>\n  ),\n);\nexport default UIIconButton;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FC, useCallback, useContext } from 'react';\n\nimport { i18nContext, type I18nContext } from '@coze-arch/i18n/i18n-provider';\nimport {\n  IconEdit,\n  IconCopy,\n  IconDeleteOutline,\n  IconWaringRed,\n} from '@coze-arch/bot-icons';\nimport { TooltipProps } from '@douyinfe/semi-ui/lib/es/tooltip';\nimport { PopconfirmProps } from '@douyinfe/semi-ui/lib/es/popconfirm';\nimport { Tooltip, Popconfirm } from '@douyinfe/semi-ui';\n\nimport { UIIconButton } from '../ui-icon-button';\n\nimport styles from './index.module.less';\n\nexport interface ActionItemProps {\n  disabled?: boolean;\n  handler?: (() => void) | (() => Promise<void>);\n  handleClick?: () => void;\n  hide?: boolean;\n  popconfirm?: PopconfirmProps;\n  tooltip?: TooltipProps;\n}\n\nexport interface UITableActionProps {\n  editProps?: ActionItemProps;\n  copyProps?: ActionItemProps;\n  deleteProps: ActionItemProps;\n}\nexport const UITableAction: FC<UITableActionProps> = props => {\n  const { i18n } = useContext<I18nContext>(i18nContext);\n  const { editProps, deleteProps, copyProps } = props;\n  const handle = (e: { stopPropagation: () => void }) => {\n    e.stopPropagation();\n  };\n\n  const iconColor = useCallback(\n    (type: string) => {\n      const targetProps = props[`${type}Props` as keyof UITableActionProps];\n      return {\n        color: targetProps?.disabled\n          ? 'rgba(136, 138, 142, 0.5)'\n          : 'rgba(136, 138, 142, 1)',\n      };\n    },\n    [editProps, deleteProps, copyProps],\n  );\n\n  return (\n    <div className={styles['ui-action-content']} onClick={handle}>\n      {copyProps && !copyProps.hide ? (\n        <Tooltip\n          spacing={12}\n          content={i18n.t('Copy')}\n          position=\"top\"\n          {...copyProps?.tooltip}\n        >\n          <span className={styles['action-btn']}>\n            <UIIconButton\n              disabled={copyProps?.disabled}\n              icon={<IconCopy className={styles.icon} />}\n              onClick={copyProps?.handler}\n              style={iconColor('copy')}\n              data-testid=\"ui.table-action.copy\"\n            />\n          </span>\n        </Tooltip>\n      ) : null}\n      {editProps && !editProps.hide ? (\n        <Tooltip\n          spacing={12}\n          content={i18n.t('Edit')}\n          position=\"top\"\n          {...editProps?.tooltip}\n        >\n          <span className={styles['action-btn']}>\n            <UIIconButton\n              disabled={editProps?.disabled}\n              icon={<IconEdit className={styles.icon} />}\n              onClick={editProps?.handler}\n              style={iconColor('edit')}\n              data-testid=\"ui.table-action.edit\"\n            />\n          </span>\n        </Tooltip>\n      ) : null}\n      {!deleteProps.hide && (\n        <div>\n          <Popconfirm\n            trigger=\"click\"\n            okType=\"danger\"\n            title={i18n.t('delete_title')}\n            content={i18n.t('delete_desc')}\n            okText={i18n.t('confirm')}\n            cancelText={i18n.t('cancel')}\n            style={{ width: 350 }}\n            icon={deleteProps?.popconfirm?.icon ?? <IconWaringRed />}\n            {...deleteProps.popconfirm}\n            onConfirm={deleteProps?.handler}\n            disabled={deleteProps.disabled}\n          >\n            <span>\n              <Tooltip\n                spacing={12}\n                content={i18n.t('Delete')}\n                position=\"top\"\n                {...deleteProps.tooltip}\n              >\n                <UIIconButton\n                  disabled={deleteProps.disabled}\n                  icon={<IconDeleteOutline className={styles.icon} />}\n                  style={iconColor('delete')}\n                  onClick={deleteProps.handleClick}\n                  data-testid=\"ui.table-action.delete\"\n                />\n              </Tooltip>\n            </span>\n          </Popconfirm>\n        </div>\n      )}\n    </div>\n  );\n};\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ForwardedRef, PropsWithChildren, forwardRef } from 'react';\n\nimport classNames from 'classnames';\n\nimport s from './index.module.less';\n\nexport type UIContentProps = PropsWithChildren<{\n  className?: string;\n}>;\nexport const UIContent = forwardRef(\n  (\n    { className, children }: UIContentProps,\n    ref: ForwardedRef<HTMLDivElement>,\n  ) => (\n    <div ref={ref} className={classNames(s['ui-content'], className)}>\n      {children}\n    </div>\n  ),\n);\n\nexport default UIContent;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable @typescript-eslint/naming-convention */\n\nimport { Helmet } from 'react-helmet';\nimport React, { PropsWithChildren, useContext } from 'react';\n\nimport classNames from 'classnames';\nimport { type I18nContext, i18nContext } from '@coze-arch/i18n/i18n-provider';\n\nimport UIHeader, { UIHeaderProps } from '../ui-header';\nimport UIFooter, { UIFooterProps } from '../ui-footer';\nimport UIContent from '../ui-content';\n\nimport s from './index.module.less';\n\nexport const UILayout: React.FC<\n  PropsWithChildren<{\n    className?: string;\n    title?: string;\n  }>\n> & {\n  Header: React.FC<UIHeaderProps>;\n  Content: typeof UIContent;\n  Footer: React.FC<UIFooterProps>;\n} = ({ className, children, title }) => {\n  const { i18n } = useContext<I18nContext>(i18nContext);\n  const _title = title || i18n.t('platform_name');\n  return (\n    <div className={classNames(s['ui-layout'], className)}>\n      <Helmet>\n        <title>{_title}</title>\n      </Helmet>\n      {children}\n    </div>\n  );\n};\n\nUILayout.Header = UIHeader;\nUILayout.Content = UIContent;\nUILayout.Footer = UIFooter;\n\nexport default UILayout;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren, ReactElement } from 'react';\n\nimport classNames from 'classnames';\n\nimport s from './index.module.less';\n\nexport type UIHeaderProps = PropsWithChildren<{\n  className?: string;\n  title?: string;\n  breadcrumb?: ReactElement;\n}>;\nexport const UIHeader: React.FC<UIHeaderProps> = ({\n  className,\n  children,\n  title = '',\n  breadcrumb,\n}) => (\n  <div\n    className={classNames(s['ui-header'], className)}\n    data-testid=\"ui.header\"\n  >\n    {title && <div className={s.title}>{title}</div>}\n    {!!breadcrumb && breadcrumb}\n    {children}\n  </div>\n);\n\nexport default UIHeader;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren } from 'react';\n\nimport classNames from 'classnames';\n\nimport s from './index.module.less';\n\nexport type UIFooterProps = PropsWithChildren<{\n  className?: string;\n}>;\nexport const UIFooter: React.FC<UIFooterProps> = ({ className, children }) => (\n  <div className={classNames(s['ui-footer'], className)}>{children}</div>\n);\n\nexport default UIFooter;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { PropsWithChildren } from 'react';\n\nimport cs from 'classnames';\nimport { TabsProps } from '@douyinfe/semi-ui/lib/es/tabs';\nimport { Tabs } from '@douyinfe/semi-ui';\n\nimport s from './index.module.less';\n\nexport interface UITabBarProps extends TabsProps {\n  wrapperClass?: string;\n  containerClass?: string;\n  theme?: 'black' | 'blue';\n}\n\nexport const UITabBar: React.FC<PropsWithChildren<UITabBarProps>> = ({\n  children,\n  wrapperClass,\n  containerClass,\n  theme = 'black',\n  ...props\n}) => (\n  <div className={cs(s['ui-tab-bar'], s[`tab-bar-${theme}`], wrapperClass)}>\n    <Tabs\n      {...props}\n      tabPaneMotion={false}\n      type=\"button\"\n      // eslint-disable-next-line @typescript-eslint/naming-convention -- react comp\n      renderTabBar={(innerProps, Node) => (\n        <div className={cs(s.header, containerClass)}>\n          <Node {...innerProps} />\n\n          {/* Right toolbar, no children can be passed on. */}\n          <div className={s['tool-bar']}>{children}</div>\n        </div>\n      )}\n    ></Tabs>\n  </div>\n);\nexport default UITabBar;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ComponentProps } from 'react';\n\nimport classNames from 'classnames';\nimport { Modal } from '@douyinfe/semi-ui';\n\nimport s from './index.module.less';\n\nexport type UIModalType =\n  | 'info'\n  | 'action-small'\n  | 'action'\n  | 'base-composition';\n\nexport type SemiModalProps = ComponentProps<typeof Modal>;\n\nexport interface UIModalProps extends SemiModalProps {\n  type?: UIModalType;\n  showScrollBar?: boolean;\n}\n\nexport class UIModal extends Modal {\n  props: UIModalProps;\n\n  constructor(props: UIModalProps) {\n    super(props);\n    this.props = props;\n  }\n\n  render(): JSX.Element {\n    const {\n      centered = true,\n      type = 'info',\n      showScrollBar = false,\n      className,\n      okButtonProps,\n      cancelButtonProps,\n      ...props\n    } = this.props;\n\n    return (\n      <Modal\n        {...props}\n        // Align the UX specification, click on the translucent background and do not close by default\n        maskClosable={false}\n        centered={centered}\n        cancelButtonProps={{\n          style: {\n            minWidth: '96px',\n            ...cancelButtonProps?.style,\n          },\n          ...cancelButtonProps,\n        }}\n        okButtonProps={{\n          style: {\n            minWidth: '96px',\n            ...okButtonProps?.style,\n          },\n          ...okButtonProps,\n        }}\n        className={classNames(\n          s[`modal-${type}`],\n          s['ui-modal'],\n          showScrollBar && s['show-scroll-bar'],\n          className,\n        )}\n      />\n    );\n  }\n}\n\nUIModal.defaultProps.centered = true;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable @typescript-eslint/naming-convention */\nimport { PropsWithChildren, ReactNode } from 'react';\n\nimport classNames from 'classnames';\nimport { Divider } from '@douyinfe/semi-ui';\nimport { IconClose } from '@douyinfe/semi-icons';\n\nimport { UIIconButton } from '../../components/ui-icon-button';\nimport { SemiModalProps, UIModal } from './ui-modal';\n\nimport s from './index.module.less';\n\nexport interface UICompositionModalProps\n  extends Omit<SemiModalProps, 'header' | 'footer' | 'content' | 'title'> {\n  sider?: ReactNode;\n  siderWrapperClassName?: string;\n  content?: ReactNode;\n  header?: ReactNode;\n  extra?: ReactNode;\n  filter?: ReactNode;\n}\n\ninterface StyleProps {\n  style?: React.CSSProperties;\n  className?: string;\n}\n\nconst AsideHeader: React.FC<PropsWithChildren<StyleProps>> = ({\n  children,\n  className,\n  style,\n}) => (\n  <div className={classNames(className, s['aside-header'])} style={style}>\n    {children}\n  </div>\n);\n\nconst AsideDivider: React.FC<StyleProps> = ({ className, style }) => (\n  <Divider\n    margin={12}\n    className={classNames(className, s['aside-divider'])}\n    style={style}\n  />\n);\n\nconst AsideContent: React.FC<PropsWithChildren<StyleProps>> = ({\n  children,\n  className,\n  style,\n}) => (\n  <div className={className} style={style}>\n    {children}\n  </div>\n);\n\nexport const UICompositionModalSider: React.FC<\n  PropsWithChildren<StyleProps>\n> & {\n  Header: React.FC<PropsWithChildren<StyleProps>>;\n  Divider: React.FC<PropsWithChildren<StyleProps>>;\n  Content: React.FC<PropsWithChildren<StyleProps>>;\n} = ({ children, style, className }) => (\n  <div style={style} className={classNames(className, s['aside-main'])}>\n    {children}\n  </div>\n);\n\nUICompositionModalSider.Header = AsideHeader;\nUICompositionModalSider.Divider = AsideDivider;\nUICompositionModalSider.Content = AsideContent;\n\nconst MainHeader: React.FC<PropsWithChildren<StyleProps>> = ({\n  children,\n  className,\n  style,\n}) => (\n  <div className={classNames(['main-header'], className)} style={style}>\n    {children}\n  </div>\n);\n\nconst MainContent: React.FC<PropsWithChildren<StyleProps>> = ({\n  children,\n  className,\n  style,\n}) => (\n  <div className={classNames(className, s['main-content'])} style={style}>\n    {children}\n  </div>\n);\n\nexport const UICompositionModalMain: React.FC<PropsWithChildren<StyleProps>> & {\n  Header: React.FC<PropsWithChildren<StyleProps>>;\n  Content: React.FC<PropsWithChildren<StyleProps>>;\n} = ({ children, style, className }) => (\n  <div style={style} className={classNames(className, s.main)}>\n    {children}\n  </div>\n);\n\nUICompositionModalMain.Header = MainHeader;\nUICompositionModalMain.Content = MainContent;\n\nexport const UICompositionModal = ({\n  sider,\n  content,\n  header,\n  filter,\n  extra,\n  ...props\n}: UICompositionModalProps) => (\n  <UIModal\n    {...props}\n    type=\"base-composition\"\n    header={null}\n    footer={null}\n    className={classNames(s['ui-composition-modal'], props.className)}\n  >\n    <div className={s['composition-modal-layout']}>\n      <div className={classNames(s.aside, props.siderWrapperClassName)}>\n        <div className={s.title}>{header}</div>\n        {sider}\n      </div>\n      <div className={s.content}>\n        <div\n          className={classNames({\n            [s.header]: true,\n            [s['filter-empty']]: !filter,\n          })}\n        >\n          {filter}\n          {extra}\n          <UIIconButton\n            data-testid=\"close-icon-button\"\n            type=\"tertiary\"\n            icon={<IconClose />}\n            onClick={props.onCancel}\n          />\n        </div>\n        {content}\n      </div>\n    </div>\n  </UIModal>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ComponentProps, ForwardedRef, forwardRef } from 'react';\n\nimport classNames from 'classnames';\nimport { Modal } from '@douyinfe/semi-ui';\n\nimport s from './index.module.less';\n\nexport type UIMobileModalType =\n  | 'info'\n  | 'action-small'\n  | 'action'\n  | 'base-composition';\n\nexport type SemiMobileModalProps = ComponentProps<typeof Modal>;\nexport type SemiMobileModalRef = ForwardedRef<Modal>;\n\nexport interface UIMobileModalProps extends SemiMobileModalProps {\n  type?: UIMobileModalType;\n  hideOkButton?: boolean;\n  hideContent?: boolean;\n  hideCancelButton?: boolean;\n  showCloseIcon?: boolean;\n}\n\n/**\n * @default type={'info'}\n */\nexport const UIMobileModal = forwardRef(\n  (\n    {\n      type = 'info',\n      hideOkButton = false,\n      hideContent = false,\n      hideCancelButton = false,\n      showCloseIcon = false,\n      className,\n      centered = true,\n      okButtonProps,\n      cancelButtonProps,\n      ...props\n    }: UIMobileModalProps,\n    ref: SemiMobileModalRef,\n  ) => (\n    <Modal\n      {...props}\n      // Align the UX specification, click on the translucent background and do not close by default\n      maskClosable={false}\n      ref={ref}\n      centered={centered}\n      header={\n        <div\n          className=\"semi-modal-header\"\n          style={{\n            paddingTop: hideContent ? '1rem' : '0',\n          }}\n        >\n          <h5\n            className=\"semi-typography semi-modal-title semi-typography-primary semi-typography-normal semi-typography-h5\"\n            id=\"semi-modal-title\"\n            x-semi-prop=\"title\"\n          >\n            {props.title}\n          </h5>\n        </div>\n      }\n      cancelButtonProps={{\n        style: {\n          width: hideOkButton ? '100%' : '7.25rem',\n          ...cancelButtonProps?.style,\n        },\n        ...cancelButtonProps,\n      }}\n      okButtonProps={{\n        style: {\n          width: hideCancelButton ? '100%' : '7.25rem',\n          ...okButtonProps?.style,\n        },\n        ...okButtonProps,\n      }}\n      hasCancel={!hideCancelButton}\n      className={classNames(\n        s[`modal-${type}`],\n        s['ui-mobile-modal'],\n        className,\n      )}\n    />\n  ),\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState } from 'react';\n\nimport { ModalReactProps } from '@douyinfe/semi-ui/lib/es/modal/';\n\nimport { UIModal, UIModalType } from './ui-modal';\nimport { UIMobileModal } from './ui-mobile-modal';\n\nexport type UseModalParams = Omit<ModalReactProps, 'visible'> & {\n  type?: UIModalType;\n  hideOkButton?: boolean;\n  hideCancelButton?: boolean;\n  showCloseIcon?: boolean;\n  hideContent?: boolean;\n  isMobile?: boolean;\n  showScrollBar?: boolean;\n};\n\nexport interface UseModalReturnValue {\n  modal: (inner: JSX.Element) => JSX.Element;\n  open: () => void;\n  close: () => void;\n  visible: boolean;\n}\n\nexport const useModal = ({\n  type = 'info',\n  centered = true,\n  isMobile = false,\n  ...params\n}: UseModalParams): UseModalReturnValue => {\n  const [visible, setVisible] = useState(false);\n\n  return {\n    modal: inner =>\n      isMobile ? (\n        <UIMobileModal\n          type={type}\n          centered={centered}\n          {...params}\n          visible={visible}\n        >\n          {inner}\n        </UIMobileModal>\n      ) : (\n        <UIModal type={type} centered={centered} {...params} visible={visible}>\n          {inner}\n        </UIModal>\n      ),\n    open: () => setVisible(true),\n    close: () => setVisible(false),\n    visible,\n  };\n};\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ReactNode } from 'react';\n\nimport classNames from 'classnames';\nimport type { TabPaneProps, TabsProps } from '@douyinfe/semi-ui/lib/es/tabs';\nimport { Tabs, TabPane } from '@douyinfe/semi-ui';\nimport { IconClose } from '@douyinfe/semi-icons';\n\nimport { SemiModalProps, UIModal } from '../ui-modal';\nimport { UIIconButton } from '../../ui-icon-button';\n\nimport s from './index.module.less';\n\nexport type UITabsModalProps = {\n  tabs: {\n    tabsProps?: TabsProps;\n    tabPanes: {\n      tabPaneProps: TabPaneProps;\n      content: ReactNode;\n    }[];\n  };\n} & Omit<SemiModalProps, 'header' | 'footer' | 'content' | 'title'>;\n\nexport const UITabsModal = ({\n  tabs: { tabsProps, tabPanes },\n  ...props\n}: UITabsModalProps) => (\n  <UIModal\n    {...props}\n    type=\"base-composition\"\n    header={null}\n    footer={null}\n    className={classNames(s['ui-tabs-modal'], props.className)}\n  >\n    <>\n      <UIIconButton\n        wrapperClass={s['close-btn']}\n        type=\"tertiary\"\n        icon={<IconClose />}\n        onClick={props.onCancel}\n      />\n      <Tabs\n        {...tabsProps}\n        contentStyle={{\n          flex: 1,\n          padding: 0,\n          overflowY: 'hidden',\n        }}\n        className={classNames(s.tabs, tabsProps?.className)}\n      >\n        {tabPanes.map(({ tabPaneProps, content }, index) => (\n          <TabPane\n            key={tabPaneProps.itemKey ?? index}\n            {...tabPaneProps}\n            className={classNames(s['tab-pane'], tabPaneProps.className)}\n          >\n            {content}\n          </TabPane>\n        ))}\n      </Tabs>\n    </>\n  </UIModal>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { RefObject, useCallback, useRef, useState } from 'react';\n\nconst ANCHOR_UPDATE_BUFFER = 10;\n\nconst useShouldUpdateAnchor = () => {\n  const prevStyleLeft = useRef<number | null>(null);\n  const prevStyleTop = useRef<number | null>(null);\n  const shouldUpdateGrabAnchor = useRef(false);\n\n  const grabAnchorBuffer = useRef(0);\n\n  const getShouldUpdateGrabAnchor = () => shouldUpdateGrabAnchor.current;\n\n  const updateGrabAnchorBuffer = () => {\n    grabAnchorBuffer.current += 1;\n  };\n\n  const getGrabAnchorBufferExceed = () =>\n    grabAnchorBuffer.current > ANCHOR_UPDATE_BUFFER;\n\n  const updateCheckState = ({\n    currentLeft,\n    currentTop,\n  }: {\n    currentTop: number;\n    currentLeft: number;\n  }) => {\n    const isUnChanged =\n      currentLeft === prevStyleLeft.current &&\n      currentTop === prevStyleTop.current;\n\n    shouldUpdateGrabAnchor.current = isUnChanged;\n    prevStyleLeft.current = currentLeft;\n    prevStyleTop.current = currentTop;\n  };\n\n  const refreshCheckState = () => {\n    shouldUpdateGrabAnchor.current = false;\n    grabAnchorBuffer.current = 0;\n  };\n\n  return {\n    getGrabAnchorBufferExceed,\n    updateCheckState,\n    updateGrabAnchorBuffer,\n    getShouldUpdateGrabAnchor,\n    refreshCheckState,\n  };\n};\n\nexport interface GrabProps {\n  /**\n   * Drag anchor\n   * @default grabTarget\n   */\n  grabAnchor?: RefObject<HTMLDivElement>;\n  /** Dragged moving target */\n  grabTarget: RefObject<HTMLDivElement>;\n  /** Whether to directly modify the style to achieve the effect of moving */\n  isModifyStyle: boolean;\n  /** Callback when position changes */\n  onPositionChange?: (param: { left: number; top: number }) => void;\n}\n\n// eslint-disable-next-line\nexport const useGrab = ({\n  grabTarget,\n  grabAnchor = grabTarget,\n  isModifyStyle,\n  onPositionChange,\n}: GrabProps) => {\n  const [grabbing, setGrabbing] = useState(false);\n  const isGrabbingRef = useRef(false);\n  const anchorOffsetX = useRef(0);\n  const anchorOffsetY = useRef(0);\n  const {\n    getGrabAnchorBufferExceed,\n    getShouldUpdateGrabAnchor,\n    updateCheckState,\n    updateGrabAnchorBuffer,\n    refreshCheckState,\n  } = useShouldUpdateAnchor();\n\n  const setGrabStatus = (grab: boolean) => {\n    setGrabbing(grab);\n    isGrabbingRef.current = grab;\n  };\n\n  const handleMouseMove = useCallback((e: MouseEvent) => {\n    const docElement = document.documentElement;\n    const target = grabTarget.current;\n\n    if (!isGrabbingRef.current || !target) {\n      return;\n    }\n\n    e.preventDefault();\n\n    /**\n     * Calculate the page width and target width, and compare with the drag position\n     * Avoid dragging pop-ups off the page\n     */\n    const currentLeft = Math.min(\n      Math.max(e.clientX - anchorOffsetX.current, 0),\n      docElement.offsetWidth - target.offsetWidth,\n    );\n\n    const currentTop = Math.min(\n      Math.max(e.clientY - anchorOffsetY.current, 0),\n      docElement.offsetHeight - target.offsetHeight,\n    );\n\n    updateCheckState({ currentLeft, currentTop });\n    onPositionChange?.({ top: currentTop, left: currentLeft });\n    if (!isModifyStyle) {\n      return;\n    }\n    target.style.left = `${currentLeft}px`;\n    target.style.top = `${currentTop}px`;\n  }, []);\n\n  const handleMouseUp = useCallback(() => {\n    setGrabStatus(false);\n    unsubscribeDocumentMouseEvent();\n    refreshCheckState();\n  }, []);\n\n  const unsubscribeDocumentMouseEvent = () => {\n    document.removeEventListener('mousemove', handleMouseMove);\n    document.removeEventListener('mouseup', handleMouseUp);\n  };\n\n  const subscribeDocumentMouseEvent = () => {\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n  };\n\n  const updateGrabAnchor = (e: MouseEvent) => {\n    const target = grabTarget.current;\n    if (!target) {\n      return;\n    }\n    /**\n     * Calculate the relative position of the mouse in the drag target dom\n     * Use for subsequent and global mouse position difference calculations to get the drag position\n     */\n    const left = target.offsetLeft;\n    const top = target.offsetTop;\n    anchorOffsetX.current = e.clientX - left;\n    anchorOffsetY.current = e.clientY - top;\n  };\n\n  const subscribeGrab = () => {\n    const anchor = grabAnchor.current;\n\n    if (!anchor) {\n      return;\n    }\n\n    const handleAnchorMouseDown = (e: MouseEvent) => {\n      /**\n       * https://developer.mozilla.org/zh-CN/docs/Web/API/MouseEvent/buttons\n       * Only the main mouse button (left button) is recognized and pressed.\n       */\n      if (e.button !== 0) {\n        return;\n      }\n      subscribeDocumentMouseEvent();\n      setGrabStatus(true);\n      e.stopPropagation();\n      updateGrabAnchor(e);\n    };\n\n    /**\n     * When the pop-up window reaches the boundary/after the pop-up window exceeds the boundary due to resize\n     * The anchor position needs to be updated during the mouse movement, otherwise there will be a problem that the mouse moves but the pop-up window position is not updated.\n     */\n    const handleAnchorMouseMove = (e: MouseEvent) => {\n      if (!isGrabbingRef.current) {\n        return;\n      }\n\n      if (!getShouldUpdateGrabAnchor()) {\n        return;\n      }\n\n      updateGrabAnchorBuffer();\n\n      /**\n       * Avoid changing anchor position and global mouse position simultaneously during normal dragging\n       * The position is not updated after the difference is calculated\n       */\n      if (!getGrabAnchorBufferExceed()) {\n        return;\n      }\n\n      updateGrabAnchor(e);\n      refreshCheckState();\n    };\n\n    anchor.addEventListener('mousedown', handleAnchorMouseDown);\n    anchor.addEventListener('mousemove', handleAnchorMouseMove);\n\n    return () => {\n      anchor.removeEventListener('mousedown', handleAnchorMouseDown);\n      anchor.removeEventListener('mousemove', handleAnchorMouseMove);\n      refreshCheckState();\n      unsubscribeDocumentMouseEvent();\n    };\n  };\n  return { subscribeGrab, grabbing };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createPortal } from 'react-dom';\nimport React, {\n  ComponentProps,\n  FC,\n  PropsWithChildren,\n  useEffect,\n  useRef,\n} from 'react';\n\nimport { merge } from 'lodash-es';\nimport classNames from 'classnames';\nimport { Modal } from '@douyinfe/semi-ui';\nimport { IconClose } from '@douyinfe/semi-icons';\n\nimport { Button } from '../ui-button';\nimport { useGrab } from '../../hooks/use-grab';\n\nimport s from './index.module.less';\n\nexport type UIDragModalType =\n  | 'info'\n  | 'action-small'\n  | 'action'\n  | 'base-composition';\n\nexport type UIDragModalProps = ComponentProps<typeof Modal> & {\n  type?: UIDragModalType;\n  focusKey?: string;\n  onWindowFocus?: (v: string) => void; // Callback when the current window is clicked\n};\n\nexport const UIDragModal: FC<PropsWithChildren<UIDragModalProps>> = props => {\n  const {\n    className,\n    style,\n    visible,\n    title,\n    zIndex,\n    footer,\n    children,\n    onCancel,\n\n    type,\n    focusKey,\n    onWindowFocus,\n  } = merge({}, UIDragModal.defaultProps, props);\n\n  const grabAnchor = useRef<HTMLDivElement>(null);\n  const grabTarget = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    let unSubscribe: (() => void) | undefined;\n    if (visible) {\n      unSubscribe = subscribeGrab();\n    }\n    return () => {\n      unSubscribe?.();\n    };\n  }, [visible]);\n\n  const { subscribeGrab, grabbing } = useGrab({\n    grabTarget,\n    grabAnchor,\n    isModifyStyle: true,\n  });\n\n  if (!visible) {\n    return null;\n  }\n\n  return createPortal(\n    <div className={s['drag-modal']}>\n      <div\n        className={classNames(\n          s[`modal-${type}`],\n          s['drag-modal-wrapper'],\n          !!footer && s['footer-custom'],\n          className,\n        )}\n        ref={grabTarget}\n        onMouseDown={() => {\n          !!focusKey && onWindowFocus?.(focusKey);\n        }}\n        style={{ ...style, zIndex }}\n      >\n        <div\n          ref={grabAnchor}\n          className={s['drag-modal-wrapper-title']}\n          style={{ cursor: grabbing ? 'grabbing' : 'grab' }}\n        >\n          {title}\n          <Button\n            className={s['drag-modal-wrapper-close-btn']}\n            onClick={onCancel}\n            icon={<IconClose />}\n            size=\"small\"\n            theme=\"borderless\"\n          />\n        </div>\n        <div className={s['drag-modal-wrapper-content']}>{children}</div>\n        {footer ? (\n          <div className={s['drag-modal-wrapper-footer']}>{footer}</div>\n        ) : null}\n      </div>\n    </div>,\n    document.body,\n  );\n};\n\nUIDragModal.defaultProps = {\n  type: 'info',\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const isMobile = (): boolean => {\n  const MOBILE_WIDTH_TH = 640;\n  const width = document.documentElement.clientWidth;\n  return width <= MOBILE_WIDTH_TH;\n};\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { PropsWithChildren } from 'react';\n\nimport { isMobile } from '../../utils';\n\nimport s from './index.module.less';\n\ninterface SignFrameProps {\n  brandNode: React.ReactNode;\n}\n\nexport const SignFrame: React.FC<PropsWithChildren<SignFrameProps>> = ({\n  children,\n  brandNode,\n}) => (\n  <div className={isMobile() ? s['mobile-frame'] : s.frame}>\n    {!isMobile() && <div className={s.brand}>{brandNode}</div>}\n    {children}\n  </div>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { PropsWithChildren } from 'react';\n\nimport classNames from 'classnames';\n\nimport { isMobile } from '../../utils';\n\nimport s from './index.module.less';\n\nexport const SignPanel: React.FC<PropsWithChildren<{ className?: string }>> = ({\n  className,\n  children,\n}) => (\n  <div\n    className={classNames(isMobile() ? s['mobile-panel'] : s.panel, className)}\n  >\n    {children}\n  </div>\n);\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { ReactElement } from 'react';\n\nimport classNames from 'classnames';\nimport { Empty } from '@douyinfe/semi-ui';\nimport {\n  IllustrationNoContent,\n  IllustrationNoContentDark,\n  IllustrationNoResult,\n  IllustrationNoResultDark,\n} from '@douyinfe/semi-illustrations';\n\nimport { Button } from '../../components/ui-button';\n\nimport s from './index.module.less';\n\nexport interface EmptyProps {\n  title?: string;\n  icon?: ReactElement;\n  iconDarkMode?: ReactElement;\n  description?: string;\n  btnText?: string;\n  loading?: boolean;\n  btnOnClick?: () => void;\n}\n\nexport interface UIEmptyProps {\n  className?: string;\n  isNotFound?: boolean;\n  empty?: EmptyProps;\n  notFound?: EmptyProps;\n}\n\nenum EmptyButtonOpacity {\n  Disable = 0.6,\n  UnDisable = 1,\n}\n\nexport function UIEmpty({\n  className,\n  isNotFound = false,\n  empty,\n  notFound,\n}: UIEmptyProps) {\n  return (\n    <div className={classNames(s['ui-empty'], className)}>\n      {isNotFound ? (\n        <Empty\n          title={notFound?.title}\n          image={\n            notFound?.icon ? (\n              notFound.icon\n            ) : (\n              <IllustrationNoResult style={{ width: 150, height: '100%' }} />\n            )\n          }\n          darkModeImage={\n            notFound?.iconDarkMode ? (\n              notFound.iconDarkMode\n            ) : (\n              <IllustrationNoResultDark\n                style={{ width: 150, height: '100%' }}\n              />\n            )\n          }\n        ></Empty>\n      ) : (\n        <Empty\n          title={empty?.title}\n          description={empty?.description || ''}\n          image={\n            empty?.icon ? (\n              empty.icon\n            ) : (\n              <IllustrationNoContent style={{ width: 150, height: '100%' }} />\n            )\n          }\n          darkModeImage={\n            empty?.iconDarkMode ? (\n              empty.iconDarkMode\n            ) : (\n              <IllustrationNoContentDark\n                style={{ width: 150, height: '100%' }}\n              />\n            )\n          }\n        >\n          {!!empty?.btnText && (\n            <Button\n              theme=\"solid\"\n              onClick={empty?.btnOnClick}\n              loading={empty?.loading}\n              style={{\n                opacity: empty?.loading\n                  ? EmptyButtonOpacity.Disable\n                  : EmptyButtonOpacity.UnDisable,\n              }}\n            >\n              {empty.btnText}\n            </Button>\n          )}\n        </Empty>\n      )}\n    </div>\n  );\n}\n\n// Native usage in non-graphic scenarios\nUIEmpty.Semi = Empty;\n\nexport default UIEmpty;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { LegacyRef, forwardRef } from 'react';\n\nimport cls from 'classnames';\nimport { TagProps, TagColor } from '@douyinfe/semi-ui/lib/es/tag/interface';\nimport { Tag } from '@douyinfe/semi-ui';\n\nimport s from './index.module.less';\n\nexport type UITagProps = TagProps;\nexport { TagColor };\n\nexport const UITag = forwardRef(\n  ({ className, ...props }: UITagProps, ref: LegacyRef<Tag>) => (\n    <Tag {...props} className={cls(s['ui-tag'], className)} ref={ref} />\n  ),\n);\n\nexport default UITag;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport cls from 'classnames';\nimport { CascaderProps } from '@douyinfe/semi-ui/lib/es/cascader';\nimport { Cascader, withField } from '@douyinfe/semi-ui';\n\nimport s from './index.module.less';\n\nexport function UICascader({\n  dropdownClassName,\n  className,\n  ...props\n}: CascaderProps) {\n  return (\n    <Cascader\n      {...props}\n      className={cls(className, s['ui-cascader'])}\n      dropdownClassName={cls(dropdownClassName, s['ui-cascader-dropdown'])}\n    />\n  );\n}\n\nUICascader.FormItem = withField(UICascader);\nexport default UICascader;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { isString, isUndefined, merge, omitBy } from 'lodash-es';\nimport classNames from 'classnames';\nimport {\n  IconToastError,\n  IconToastInfo,\n  IconToastSuccess,\n  IconToastWarning,\n} from '@coze-arch/bot-icons';\nimport { ToastReactProps } from '@douyinfe/semi-ui/lib/es/toast';\nimport { ToastFactory, Toast } from '@douyinfe/semi-ui';\n\nimport styles from './index.module.less';\n\n// Toast display 80px from the top\nToast.config({\n  top: 80,\n});\n\nconst UIToast: ReturnType<(typeof ToastFactory)['create']> =\n  ToastFactory.create();\nfunction rewriteToastCreate(opts: ToastReactProps) {\n  const { className, icon, ...rest } = opts;\n  const getIcon = (): React.ReactNode => {\n    if (icon) {\n      return icon;\n    }\n    switch (rest.type) {\n      case 'success':\n        return <IconToastSuccess className={styles.icon} />;\n      case 'warning':\n        return <IconToastWarning className={styles.icon} />;\n      case 'error':\n        return <IconToastError className={styles.icon} />;\n      case 'info':\n        return <IconToastInfo className={styles.icon} />;\n      default:\n        return undefined;\n    }\n  };\n\n  return Toast.create(\n    cleanObject<ToastReactProps>({\n      className: classNames(styles.container, className),\n      icon: getIcon(),\n      theme: 'light',\n      // Default does not display close icon\n      showClose: false,\n      // Toast display 80px from the top\n      top: 80,\n      ...rest,\n    }),\n  );\n}\n\ntype RequiredToastType = NonNullable<ToastReactProps['type']>;\nfunction rewriteToastCreateAlias(): (opts: ToastReactProps) => string;\nfunction rewriteToastCreateAlias(\n  type: RequiredToastType,\n): (opts: string | Omit<ToastReactProps, 'type'>) => string;\nfunction rewriteToastCreateAlias(type?: RequiredToastType) {\n  return (opts: string | Omit<ToastReactProps, 'type'>) => {\n    if (isString(opts)) {\n      return rewriteToastCreate({ content: opts, type });\n    }\n    return rewriteToastCreate(merge({}, opts, { type }));\n  };\n}\n/* How to Override Toast */\nUIToast.create = rewriteToastCreateAlias();\nUIToast.info = rewriteToastCreateAlias('info');\nUIToast.error = rewriteToastCreateAlias('error');\nUIToast.success = rewriteToastCreateAlias('success');\nUIToast.warning = rewriteToastCreateAlias('warning');\n\nfunction cleanObject<T extends object = Record<string, unknown>>(params: T): T {\n  return omitBy(params, isUndefined) as T;\n}\n\nexport { UIToast };\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FC } from 'react';\n\nimport classNames from 'classnames';\nimport {\n  DropdownItemProps,\n  DropdownMenuProps,\n  DropdownProps,\n  DropdownTitleProps,\n} from '@douyinfe/semi-ui/lib/es/dropdown';\nimport { Dropdown } from '@douyinfe/semi-ui';\n\nimport s from './index.module.less';\n\nexport const DropdownTitle: FC<DropdownTitleProps> = props => (\n  <Dropdown.Title {...props} className={classNames(s.title, props.className)} />\n);\n\nexport const Menu: FC<DropdownMenuProps> = props => (\n  <Dropdown.Menu {...props} className={classNames(s.menu, props.className)} />\n);\n\nexport const Item: FC<DropdownItemProps> = props => (\n  <Dropdown.Item {...props} className={classNames(s.item, props.className)} />\n);\n\nexport const UIDropdown: FC<DropdownProps> = ({ className, ...props }) => (\n  <Dropdown {...props} className={classNames(className, s['ui-dropdown'])} />\n);\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ForwardedRef, forwardRef, useImperativeHandle, useRef } from 'react';\n\nimport { InputProps } from '@douyinfe/semi-ui/lib/es/input';\n\nimport { Input } from '../ui-input';\n\nexport type UISearchInputProps = InputProps & {\n  onSearch?: (value?: string) => void;\n};\n\ntype InputRefType = HTMLInputElement | null;\n\n/**\n * Input component in the search scene, combined with the composition API to optimize the Chinese input scene\n * @returns Input\n */\nexport const UISearchInput = forwardRef(\n  (\n    {\n      onSearch,\n      onChange,\n      onCompositionStart,\n      onCompositionUpdate,\n      onCompositionEnd,\n      ...props\n    }: UISearchInputProps,\n    ref: ForwardedRef<InputRefType>,\n  ) => {\n    const compositionFlag = useRef(false);\n    const inputRef = useRef<HTMLInputElement>(null);\n\n    useImperativeHandle<InputRefType, InputRefType>(\n      ref,\n      () => inputRef.current,\n    );\n\n    return (\n      <Input\n        {...props}\n        data-testid=\"ui.search-input\"\n        ref={inputRef}\n        onChange={(...args) => {\n          onChange?.(...args);\n          if (!compositionFlag.current) {\n            onSearch?.(args[0]);\n          }\n        }}\n        onCompositionStart={(...args) => {\n          onCompositionStart?.(...args);\n          compositionFlag.current = true;\n        }}\n        onCompositionUpdate={(...args) => {\n          onCompositionUpdate?.(...args);\n          compositionFlag.current = true;\n        }}\n        onCompositionEnd={(...args) => {\n          onCompositionEnd?.(...args);\n          compositionFlag.current = false;\n          onSearch?.(inputRef.current?.value);\n        }}\n      />\n    );\n  },\n);\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { forwardRef, useEffect, useState } from 'react';\n\nimport classNames from 'classnames';\nimport { IconSearchInput } from '@coze-arch/bot-icons';\nimport { InputProps } from '@douyinfe/semi-ui/lib/es/input';\n\nimport { UISearchInput } from '../ui-search-input';\n\nimport styles from './index.module.less';\n\nexport interface UISearchProps extends InputProps {\n  loading?: boolean;\n  onSearch?: (value?: string) => void;\n}\nexport const UISearch = forwardRef<HTMLInputElement, UISearchProps>(\n  (props, ref) => {\n    const {\n      loading,\n      onSearch,\n      onChange,\n      showClear = true,\n      value,\n      prefix,\n      ...rest\n    } = props;\n    const [localValue, setValue] = useState(props.value);\n\n    useEffect(() => {\n      setValue(value);\n    }, [value]);\n\n    return (\n      <UISearchInput\n        {...rest}\n        ref={ref}\n        value={localValue}\n        showClear={showClear}\n        onChange={(changedValue, e) => {\n          setValue(changedValue);\n          onChange?.(changedValue, e);\n        }}\n        className={classNames(styles['ui-search'], props.className)}\n        prefix={\n          React.isValidElement(prefix) ? (\n            prefix\n          ) : (\n            <div\n              className={classNames(\n                styles['icon-search'],\n                localValue && styles.active,\n              )}\n            >\n              <IconSearchInput />\n            </div>\n          )\n        }\n        onSearch={onSearch}\n      />\n    );\n  },\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*******************************************************************************\n * Log related types\n */\n/** The possible states of a line */\nexport enum LineStatus {\n  /** Completely hidden, the last parent attribute nested child attribute will not be wired in the same column */\n  Hidden,\n  /** Full display, appearing only on adjacent lines of properties */\n  Visible,\n  /** Semi-display, non-adjacent lines */\n  Half,\n  /** Adjacent line of last property */\n  Last,\n}\n\n/** Possible values in JsonViewer */\nexport type JsonValueType =\n  | string\n  | null\n  | number\n  | object\n  | boolean\n  | undefined;\n\nexport interface Field {\n  /** The use of arrays instead of'a.b.c 'is due to the possibility that key =' a.b 'will generate false nesting */\n  path: string[];\n  lines: LineStatus[];\n  /** Here value can be any value, here is an incomplete enumeration */\n  value: JsonValueType;\n  children: Field[];\n  /** Whether it is a drillable object (containing an array) */\n  isObj: boolean;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** Preset special key */\nexport enum LogObjSpecialKey {\n  Error = '$error',\n  Warning = '$warning',\n}\n\n/** Display style type of value in log */\nexport enum LogValueStyleType {\n  Default,\n  Number,\n  Boolean,\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport BigNumber from 'bignumber.js';\n\n/**\n * Is it a big number?\n * @param value\n * @returns\n */\nexport function isBigNumber(value: unknown): value is BigNumber {\n  return !!(value && value instanceof BigNumber);\n}\n\n/**\n * Large number to string\n * @param value\n * @returns\n */\nexport function bigNumbertoString(value: BigNumber): string {\n  return value.toFixed();\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isObject } from 'lodash-es';\n\nimport { LineStatus, type JsonValueType, type Field } from '../types';\nimport { isBigNumber } from './big-number';\n\n/**\n * Push through the line state of the parent element to the line state of the child element\n */\nconst getLineByParent2Child = (pLine: LineStatus): LineStatus => {\n  switch (pLine) {\n    /** It means that the parent node is also drilled from the parent node, and the sub-node here only needs to continue the line. */\n    case LineStatus.Visible:\n      return LineStatus.Half;\n    /** Indicates that the parent node is the last node of the parent node, and the sub-node does not need to continue, just render blank. */\n    case LineStatus.Last:\n      return LineStatus.Hidden;\n    /** Other cases fully inherit the line of the parent node */\n    default:\n      return pLine;\n  }\n};\n\n/**\n * Parse objects into fields that can be cycled\n * 1. If object is not a complex type, fields of length 1 are returned to render only one item\n * 2. If object = {}, fields of length 0 are returned, and the rendering layer needs to be well covered\n */\nconst generateFields = (object: JsonValueType): Field[] => {\n  /** If the object is not a complex type */\n  if (!isObject(object) || isBigNumber(object)) {\n    return [\n      {\n        path: [],\n        lines: [],\n        value: object,\n        isObj: false,\n        children: [],\n      },\n    ];\n  }\n\n  /** Cache the calculated line during recursive calculation, which is meaningless and reduces some time complexity */\n  const lineMap = new Map<string[], LineStatus[]>();\n\n  /** Recursive parsing of object as fields */\n  const dfs = ($object: object, $parentPath: string[] = []): Field[] => {\n    // If it is not an object, return an empty array directly to cover the exception\n    if (!isObject($object)) {\n      return [];\n    }\n\n    // If it is a large number, return an empty array directly\n    if (isBigNumber($object)) {\n      return [];\n    }\n\n    const parentLines = lineMap.get($parentPath) || [];\n\n    const keys = Object.keys($object);\n\n    return keys.map((key, idx) => {\n      const value = $object[key];\n      const path = $parentPath.concat(key);\n      const last = idx === keys.length - 1;\n      /**\n       * Derive the sub-node's line from the parent's line\n       */\n      const lines = parentLines\n        .map<LineStatus>(getLineByParent2Child)\n        /**\n         * Finally, splice the sub-node's own line, and the last node is distinguished from the ordinary node by style.\n         */\n        .concat(last ? LineStatus.Last : LineStatus.Visible);\n      lineMap.set(path, lines);\n      return {\n        path,\n        lines,\n        value,\n        children: dfs(value, path),\n        isObj: isObject(value) && !isBigNumber(value),\n      };\n    });\n  };\n\n  return dfs(object);\n};\n\nexport { generateFields };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  useCallback,\n  useState,\n  type PropsWithChildren,\n  useEffect,\n} from 'react';\n\nimport { createContext } from 'use-context-selector';\nimport { noop } from 'lodash-es';\n\nimport { type Field } from './types';\n\ninterface JsonViewerContextType {\n  expand: Record<string, boolean> | null;\n  onExpand: (path: string, val: boolean) => void;\n}\ninterface JsonViewerProviderProps {\n  fields: Field[];\n  defaultExpandAllFields?: boolean;\n}\n\n/**\n * When the root has only one item and it can be drilled down, it is expanded by default\n */\nconst generateInitialExpandValue = (fields: Field[], expandAll?: boolean) => {\n  if (expandAll) {\n    return setExpandAllFields(fields);\n  }\n  if (fields.length === 1 && fields[0]?.isObj) {\n    return {\n      [fields[0].path.join('.')]: true,\n    };\n  }\n  return null;\n};\n\nconst setExpandAllFields = (fields: Field[]) =>\n  fields.reduce(\n    (acc, field) => ({\n      ...acc,\n      [field.path.join('.')]: true,\n      ...setExpandAllFields(field.children),\n    }),\n    {},\n  );\n\nexport const JsonViewerContext = createContext<JsonViewerContextType>({\n  expand: {},\n  onExpand: noop,\n});\n\nexport const JsonViewerProvider: React.FC<\n  PropsWithChildren<JsonViewerProviderProps>\n> = ({ fields, children, defaultExpandAllFields }) => {\n  /** Because there is logic that does not belong to a single item, the state of unfolding and folding is managed centrally */\n  const [expand, setExpand] = useState<JsonViewerContextType['expand'] | null>(\n    null,\n  );\n  const handleExpand = useCallback(\n    (path: string, val: boolean) => setExpand(e => ({ ...e, [path]: val })),\n    [setExpand],\n  );\n\n  /**\n   * Fields are dynamically updated, pay attention to solidifying expand data here, because fields are always increased by less\n   * Due to the existence of automatic expansion logic, assignment is required when changing from 0 = > 1\n   */\n  useEffect(() => {\n    if (!expand) {\n      const autoExpand = generateInitialExpandValue(\n        fields,\n        defaultExpandAllFields,\n      );\n      if (autoExpand) {\n        setExpand(autoExpand);\n      }\n    }\n  }, [expand, fields, setExpand, defaultExpandAllFields]);\n  return (\n    <JsonViewerContext.Provider value={{ expand, onExpand: handleExpand }}>\n      {children}\n    </JsonViewerContext.Provider>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport cls from 'classnames';\n\nconst TextField: React.FC<{ text: string }> = ({ text }) => {\n  const paragraphs = text.split('\\n');\n\n  return (\n    <div className={'flex'}>\n      <div className={cls('select-auto', 'py-[2px] px-0', 'text-sm')}>\n        {paragraphs.map(paragraph => (\n          <div className=\"pl-4\" data-testid=\"json-viewer-text-field-paragraph\">\n            <span className={'whitespace-pre-wrap'}>\n              <span>{paragraph}</span>\n            </span>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport { TextField };\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport cls from 'classnames';\n\nimport { LineStatus } from '../../types';\n\nimport styles from './index.module.less';\n\nexport const Line: React.FC<{ status: LineStatus }> = ({ status }) => (\n  <div\n    className={cls(styles['json-viewer-line'], {\n      [styles.hidden]: status === LineStatus.Hidden,\n      [styles.visible]: status === LineStatus.Visible,\n      [styles.half]: status === LineStatus.Half,\n      [styles.last]: status === LineStatus.Last,\n    })}\n  ></div>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ReactNode } from 'react';\n\nimport { isString } from 'lodash-es';\nimport { Typography } from '@coze-arch/bot-semi';\n\nimport { generateStrAvoidEscape } from './generate-str-avoid-escape';\n\nconst { Text } = Typography;\n\nexport const generateStr2Link = (str: string, avoidEscape?: boolean) => {\n  if (str === '') {\n    return [''];\n  }\n\n  if (avoidEscape) {\n    str = generateStrAvoidEscape(str);\n  }\n\n  /**\n   * Stricter URL matching rules to prevent over-matching\n   * Protocol: http, https\n   * Domain names: -, a-z, A-Z, 0-9 are allowed, where - cannot start, and the length of each level of domain name will not exceed 63.\n   * Port: Support with port 0 - 65535\n   * URL: Strict does not match the text before translation such as Chinese, otherwise the entire string will be recognized once hit\n   */\n  const urlReg = new RegExp(\n    'http(s)?://' +\n      '[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+' +\n      '(:[0-9]{1,5})?' +\n      '[-a-zA-Z0-9()@:%_\\\\+.~#?&//=]*',\n    'g',\n  );\n  const matches = [...str.matchAll(urlReg)];\n  /**\n   * Cut string, url nested as link style, cutting steps:\n   * 1. Match all URLs in the string\n   * 2. Reverse matches, cut from the end, the reason is that match.index counts from scratch, and cut from scratch increases the amount of calculation\n   * 3. Each match is cut into three sections, the head and tail are ordinary strings, and the middle is url.\n   * 4. Push to the stack in the order of end, url, and start, and the next match will directly take start and continue to cut\n   * 5. Do a reverse sequence after the cutting is completed\n   */\n  return matches\n    .reverse()\n    .reduce<ReactNode[]>(\n      (nodes, match) => {\n        const lastNode = nodes.pop();\n        if (!isString(lastNode)) {\n          return nodes.concat(lastNode);\n        }\n        const startIdx = match.index || 0;\n        const endIdx = startIdx + match[0].length;\n        const startStr = lastNode.slice(0, startIdx);\n        const endStr = lastNode.slice(endIdx);\n        return nodes.concat(\n          endStr,\n          <Text link={{ href: match[0], target: '_blank' }}>{match[0]}</Text>,\n          startStr,\n        );\n      },\n      [str],\n    )\n    .reverse();\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Text in the object to avoid characters being translated\nexport const generateStrAvoidEscape = (str: string) => {\n  const characters = {\n    '\\\\': '\\\\\\\\',\n    '\\n': '\\\\n',\n    '\\r': '\\\\r',\n    '\\t': '\\\\t',\n  };\n\n  let next = '';\n  for (let i = 0; i < str.length; i++) {\n    const char = str[i];\n    next += characters[char] || char;\n  }\n\n  return next;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useMemo, useState } from 'react';\n\nimport { I18n } from '@coze-arch/i18n';\nimport { Typography } from '@coze-arch/bot-semi';\n\nimport { generateStrAvoidEscape } from '../utils/generate-str-avoid-escape';\n\nexport const MAX_LENGTH = 10000;\n\nexport const LongStrValue: React.FC<{ str: string }> = ({ str }) => {\n  const [more, setMore] = useState(false);\n\n  const echoStr = useMemo(() => {\n    const current = more ? str : str.slice(0, MAX_LENGTH);\n    return generateStrAvoidEscape(current);\n  }, [str, more]);\n\n  return (\n    <>\n      {echoStr}\n      {!more && (\n        <Typography.Text link onClick={() => setMore(true)}>\n          {I18n.t('see_more')}\n        </Typography.Text>\n      )}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useMemo } from 'react';\n\nimport { isBoolean, isNull, isNumber, isObject, isString } from 'lodash-es';\n\nimport { isBigNumber, bigNumbertoString } from '../utils/big-number';\nimport { generateStrAvoidEscape } from '../utils';\nimport { type Field } from '../types';\nimport { LogValueStyleType } from '../constants';\nimport { LongStrValue, MAX_LENGTH } from '../components/long-str-value';\n\nexport const useValue = (value: Field['value']) => {\n  const v = useMemo(() => {\n    if (isNull(value)) {\n      return {\n        value: 'null',\n        type: LogValueStyleType.Default,\n      };\n    } else if (isObject(value)) {\n      // Large number Returns the numeric type, and the value is a string.\n      if (isBigNumber(value)) {\n        return {\n          value: bigNumbertoString(value),\n          type: LogValueStyleType.Number,\n        };\n      }\n\n      return {\n        value: '',\n        type: LogValueStyleType.Default,\n      };\n    } else if (isBoolean(value)) {\n      return {\n        value: value.toString(),\n        type: LogValueStyleType.Boolean,\n      };\n    } else if (isString(value)) {\n      if (value === '') {\n        return {\n          value: '\"\"',\n          type: LogValueStyleType.Default,\n        };\n      }\n      if (value.length > MAX_LENGTH) {\n        return {\n          value: <LongStrValue str={value} />,\n          type: LogValueStyleType.Default,\n        };\n      }\n      return {\n        value: generateStrAvoidEscape(value),\n        // Value: generateStr2Link (value, avoidEscape), cancel the link parsing first\n        type: LogValueStyleType.Default,\n      };\n    } else if (isNumber(value)) {\n      return {\n        value,\n        type: LogValueStyleType.Number,\n      };\n    }\n    return {\n      value,\n      type: LogValueStyleType.Default,\n    };\n  }, [value]);\n  return v;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback } from 'react';\n\nimport { useContextSelector } from 'use-context-selector';\n\nimport { JsonViewerContext } from '../context';\n\nexport const useExpand = (path: string) => {\n  const expand = useContextSelector(\n    JsonViewerContext,\n    v => v.expand?.[path] || false,\n  );\n  const setExpand = useContextSelector(JsonViewerContext, v => v.onExpand);\n  const handleExpandChange = useCallback(() => {\n    setExpand(path, !expand);\n  }, [path, expand, setExpand]);\n  return {\n    expand,\n    onChange: handleExpandChange,\n  };\n};\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./json-field.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./json-field.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useMemo } from 'react';\n\nimport { last } from 'lodash-es';\nimport cls from 'classnames';\nimport { I18n } from '@coze-arch/i18n';\nimport { IconTreeTriangleRight } from '@douyinfe/semi-icons';\n\nimport { Line } from '../line';\nimport { type Field } from '../../types';\nimport { useValue } from '../../hooks/use-value';\nimport { useExpand } from '../../hooks';\nimport { LogObjSpecialKey, LogValueStyleType } from '../../constants';\n\nimport styles from './json-field.module.less';\n\n/* JSON type data rendering */\nconst FieldValue: React.FC<{\n  value: Field['value'];\n}> = ({ value }) => {\n  const { value: current, type } = useValue(value);\n  return (\n    <span\n      data-testid=\"json-viewer-field-value\"\n      className={cls({\n        [styles['field-value-number']]: type === LogValueStyleType.Number,\n        [styles['field-value-boolean']]: type === LogValueStyleType.Boolean,\n      })}\n    >\n      {current}\n    </span>\n  );\n};\n\nconst JsonField: React.FC<{ field: Field }> = ({ field }) => {\n  const { lines, children, path, isObj } = field;\n  const echoLines = useMemo(() => lines.slice(1), [lines]);\n\n  const pathStr = useMemo(() => path.join('.'), [path]);\n\n  const isError = useMemo(() => pathStr === LogObjSpecialKey.Error, [pathStr]);\n  const isWarning = useMemo(\n    () => pathStr === LogObjSpecialKey.Warning,\n    [pathStr],\n  );\n\n  const key = useMemo(() => last(path), [path]);\n  const keyWithColon = useMemo(() => {\n    if (isError) {\n      return I18n.t('workflow_detail_testrun_error_front');\n    }\n    if (isWarning) {\n      return I18n.t('workflow_detail_testrun_warning_front');\n    }\n    return key ? `${key} : ` : '';\n  }, [key, isError, isWarning]);\n\n  const { expand, onChange } = useExpand(path.join('.'));\n\n  return (\n    <>\n      <div className={styles['json-viewer-field']}>\n        {echoLines.map((l, idx) => (\n          <Line status={l} key={idx} />\n        ))}\n        <div\n          data-testid=\"json-viewer-field-content\"\n          className={cls('field-content', styles['field-content'], {\n            [styles['is-error']]: isError,\n            [styles['is-warning']]: isWarning,\n          })}\n          onClick={isObj ? onChange : undefined}\n        >\n          {isObj ? (\n            <>\n              <span\n                data-testid=\"json-viewer-json-field-expander\"\n                className={cls('field-icon', styles['field-icon'], {\n                  [styles.expand]: expand,\n                })}\n              >\n                <IconTreeTriangleRight size=\"inherit\" />\n              </span>\n              <span className={cls('field-key', styles['field-key'])}>\n                {key}\n              </span>\n              <span className={cls('field-len', styles['field-len'])}>\n                {` {${children.length}}`}\n              </span>\n            </>\n          ) : (\n            <>\n              <span\n                className={cls('field-block', styles['field-block'])}\n              ></span>\n              {keyWithColon ? (\n                <span className={cls('field-key', styles['field-key'])}>\n                  {keyWithColon}\n                </span>\n              ) : null}\n              <span\n                className={cls('field-value', styles['field-value'], {\n                  'whitespace-pre-wrap': !isObj,\n                })}\n              >\n                <FieldValue value={field.value} />\n              </span>\n            </>\n          )}\n        </div>\n      </div>\n      {expand\n        ? children.map(i => <JsonField field={i} key={i.path.join('.')} />)\n        : null}\n    </>\n  );\n};\n\nexport { JsonField };\n","\n      import API from \"!../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { isNil, isString } from 'lodash-es';\nimport cls from 'classnames';\n\nimport { generateFields } from './utils/generate-field';\nimport type { JsonValueType } from './types';\nimport { JsonViewerProvider } from './context';\nimport { TextField } from './components/text-field';\nimport { JsonField } from './components';\n\nimport styles from './index.module.less';\n\nexport type { JsonValueType };\n\nexport interface JsonViewerProps {\n  /** Supports object or plain text rendering */\n  data: JsonValueType;\n  className?: React.HTMLAttributes<HTMLDivElement>['className'];\n  /** Expand all fields by default */\n  defaultExpandAllFields?: boolean;\n}\n\nexport const JsonViewer: React.FC<JsonViewerProps> = ({\n  data,\n  className,\n  defaultExpandAllFields,\n}) => {\n  const render = () => {\n    // Bottom display null\n    if (isNil(data)) {\n      return (\n        <JsonField\n          field={{\n            path: [],\n            lines: [],\n            value: 'Null',\n            isObj: false,\n            children: [],\n          }}\n          key={'Null'}\n        />\n      );\n    }\n\n    // Text class result display\n    const isStr = isString(data);\n    if (isStr) {\n      return <TextField text={data} />;\n    }\n\n    // Other JSON data display\n    const fields = generateFields(data);\n    return (\n      <JsonViewerProvider\n        fields={fields}\n        defaultExpandAllFields={defaultExpandAllFields}\n      >\n        {fields.map(i => (\n          <JsonField field={i} key={i.path.join('.')} />\n        ))}\n      </JsonViewerProvider>\n    );\n  };\n\n  return (\n    <div\n      data-testid=\"json-viewer-wrapper\"\n      className={cls(styles['json-viewer-wrapper'], className)}\n      draggable\n      onDragStart={e => {\n        e.stopPropagation();\n        e.preventDefault();\n      }}\n    >\n      {render()}\n    </div>\n  );\n};\n\nexport { LogObjSpecialKey, LogValueStyleType } from './constants';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type RefObject } from 'react';\n\nexport interface ScrollViewController {\n  /** Scroll to  */\n  scrollTo: (update: (prev: number) => number) => void;\n  /** Scroll to a specified percentage of the scrollable height, using the top of the container as a reference baseline; callback when scrolling is complete */\n  scrollToPercentage: (ratio: number) => Promise<void> | void;\n  /** Get the current scroll percentage */\n  getScrollPercentage: () => number;\n  /** Get the distance from the top of the current scrolling state, adapt the y-direction and y-reverse direction */\n  getScrollTop: () => number;\n  /** Get the original scroll top value without conversion */\n  getOriginScrollInfo: () => {\n    scrollHeight: number;\n    scrollTop: number;\n    rect: null | DOMRect;\n  };\n  /** Get the distance from the top of the current scrolling state, adapt the y-direction and y-reverse direction */\n  getScrollBottom: () => number;\n  /** Update the ceiling/bottom suction status, and actively call this API when the data is updated */\n  refreshAnchor: () => void;\n  /** Disable container scrolling */\n  disableScroll: () => void;\n  /** Makes the container scrollable */\n  enableScroll: () => void;\n  /** Check that the content fills the container (used when the initial state height is small to prevent the scroll event from being triggered) */\n  checkContentIsFull: () => boolean;\n  /** Get a reference to the scroll outer container */\n  getScrollViewWrapper: () => RefObject<HTMLDivElement>;\n}\n\nexport interface ScrollViewProps\n  extends Pick<\n    React.HTMLAttributes<unknown>,\n    'className' | 'style' | 'onScroll'\n  > {\n  children:\n    | ((controller: ScrollViewController) => JSX.Element)\n    | React.ReactNode;\n\n  before?:\n    | ((controller: ScrollViewController) => JSX.Element)\n    | JSX.Element\n    | null;\n  beforeClassName?: string;\n  after?: ((controller: ScrollViewController) => JSX.Element) | JSX.Element;\n  innerBefore?:\n    | ((controller: ScrollViewController) => JSX.Element)\n    | JSX.Element;\n  /** Whether to reverse, scroll from bottom to top */\n  reverse?: boolean;\n  /** Triggered when the remaining scroll to the top is less than the distance, the default is offsetHeight */\n  reachTopThreshold?: number;\n  /* Scroll to the top threshold */\n  onReachTop?: () => unknown;\n  /* Scroll away from the top threshold */\n  onLeaveTop?: () => unknown;\n\n  /** Triggered when the remaining scroll to the bottom distance is less than, the default is offsetHeight */\n  reachBottomThreshold?: number;\n  /** Scroll to the bottom threshold */\n  onReachBottom?: () => unknown;\n  /** Scroll away from the bottom threshold */\n  onLeaveBottom?: () => unknown;\n  /** Show scrollBar regardless of whether the content exceeds the container. */\n  showScrollbar?: boolean;\n  /** The scrollBar is only displayed when the content exceeds the container. If it does not exceed, the scrollBar is not displayed. */\n  autoShowScrollbar?: boolean;\n  /** Completely hide scrollbar */\n  scrollbarWidthNone?: boolean;\n}\n\n/** scrolling state */\nexport enum ScrollStatus {\n  /** Ceiling */\n  Top = 'top',\n  /** bottom suction */\n  Bottom = 'bottom',\n  /** Two-way scrolling in the middle */\n  Inner = 'inner',\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Is it under the Webkit kernel browser of the Apple platform?\n * Note: This judgment condition is not equal to under Apple devices, because some Apple devices (such as Mac) can run non-native Webkit engine browsers, such as Chromium (Blink)\n */\nexport const isAppleWebkit = () =>\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  typeof (window as any).webkitConvertPointFromNodeToPage === 'function';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * From: https://stackoverflow.com/questions/4900436/how-to-detect-the-installed-chrome-version\n */\nexport const getChromeVersion = () => {\n  const pieces = navigator.userAgent.match(\n    /Chrom(?:e|ium)\\/([0-9]+)\\.([0-9]+)\\.([0-9]+)\\.([0-9]+)/,\n  );\n  const MAX_LENGTH = 5;\n  if (pieces === null || pieces.length !== MAX_LENGTH) {\n    return undefined;\n  }\n\n  const [, major, minor, build, patch] = pieces.map(piece =>\n    parseInt(piece, 10),\n  );\n  return {\n    major,\n    minor,\n    build,\n    patch,\n  };\n};\n\n/**\n * Whether to support scrollTop with negative numbers in column-reverse mode, chromium minimum supported version 83.0.4086 (previous version was 82.0.4082)\n */\nexport const supportNegativeScrollTop = () => {\n  const chromeVersion = getChromeVersion();\n\n  if (!chromeVersion) {\n    /** Suppose all non-chromium browsers support it */\n    return true;\n  }\n\n  const { major } = chromeVersion;\n\n  const MAX_MAJOR = 83;\n  return major >= MAX_MAJOR;\n};\n","\n      import API from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable @typescript-eslint/naming-convention */\nimport { type RefObject, useEffect, useLayoutEffect, useRef } from 'react';\n\nimport { isNumber } from 'lodash-es';\n\nimport { isAppleWebkit } from '../utils/is-apple-webkit';\nimport { supportNegativeScrollTop } from './utils';\nimport { ScrollStatus, type ScrollViewController } from './type';\nimport { SCROLL_VIEW_ANCHOR_CONTAINER } from './consts';\n\nconst SUPPORT_NEGATIVE_SCROLL_TOP = supportNegativeScrollTop();\n\nimport styles from './index.module.less';\n\nexport interface UseScrollViewControllerAndStateParams {\n  /** scroll direction */\n  reverse: boolean;\n  /** Scroll state, automatic ceiling/bottom dependence, automatic ceiling when Top, automatic bottom when Bottom */\n  scrollStatusRef?: RefObject<ScrollStatus>;\n}\n\nexport interface UseScrollViewControllerAndStateReturnValue {\n  /** Reference injected into the scrolling container */\n  ref: RefObject<HTMLDivElement>;\n  /** Reference to the outer dom of a rolling container */\n  wrapperRef: RefObject<HTMLDivElement>;\n  /** controller */\n  controller: ScrollViewController;\n}\n\n// eslint-disable-next-line max-lines-per-function, @coze-arch/max-line-per-function\nexport const useScrollViewControllerAndState = ({\n  reverse,\n  scrollStatusRef,\n}: UseScrollViewControllerAndStateParams): UseScrollViewControllerAndStateReturnValue => {\n  const wrapperRef = useRef<HTMLDivElement>(null);\n\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const isDisableScroll = useRef<boolean>(false);\n\n  const getScrollViewWrapper = () => wrapperRef;\n\n  const getContainer = () => {\n    const { current: container } = containerRef;\n\n    if (!container) {\n      throw Error('Not found ScrollView ref instance');\n    }\n\n    return container;\n  };\n\n  const _getContainerScrollTop = () => {\n    const container = getContainer();\n\n    if (reverse && !SUPPORT_NEGATIVE_SCROLL_TOP) {\n      return (\n        container.scrollTop - (container.scrollHeight - container.offsetHeight)\n      );\n    }\n\n    return container.scrollTop;\n  };\n\n  const _setContainerScrollTop = (value: number) => {\n    const container = getContainer();\n\n    if (reverse && !SUPPORT_NEGATIVE_SCROLL_TOP) {\n      container.scrollTop =\n        value + (container.scrollHeight - container.offsetHeight);\n\n      return;\n    }\n\n    container.scrollTop = value;\n  };\n\n  const disableScroll = () => {\n    isDisableScroll.current = true;\n    containerRef.current?.classList.add(styles['disable-scroll']);\n    scrollTo(top => top - 1);\n  };\n  const enableScroll = () => {\n    isDisableScroll.current = false;\n    containerRef.current?.classList.remove(styles['disable-scroll']);\n  };\n\n  const scrollTo = (update: (prev: number) => number) => {\n    const { current: container } = containerRef;\n\n    if (!container) {\n      return;\n    }\n\n    const updatingScrollTop = update(_getContainerScrollTop());\n\n    if (isAppleWebkit()) {\n      if (reverse) {\n        const endingScrollTop =\n          container.offsetHeight - container.scrollHeight + 1;\n\n        _setContainerScrollTop(Math.max(updatingScrollTop, endingScrollTop));\n      } else {\n        const endingScrollTop =\n          container.scrollHeight - container.offsetHeight - 1;\n\n        _setContainerScrollTop(Math.min(updatingScrollTop, endingScrollTop));\n      }\n    } else {\n      _setContainerScrollTop(updatingScrollTop);\n    }\n  };\n\n  const scrollToPercentage = async (ratio: number) => {\n    if (isDisableScroll.current) {\n      return;\n    }\n\n    const { current: container } = containerRef;\n\n    if (!container) {\n      return;\n    }\n\n    const { offsetHeight, scrollHeight } = container;\n\n    /** When the current state is not scrolling, the scrolling progress is not adjusted */\n    if (scrollHeight <= offsetHeight) {\n      return;\n    }\n\n    const endScrollTop = reverse\n      ? offsetHeight - scrollHeight\n      : scrollHeight - offsetHeight;\n    const realRatio = reverse ? 1 - ratio : ratio;\n\n    _setContainerScrollTop(endScrollTop * realRatio);\n\n    return new Promise<void>(resolve => {\n      requestAnimationFrame(() => {\n        resolve();\n      });\n    });\n  };\n\n  const getScrollPercentage = () => {\n    const { current: container } = containerRef;\n\n    if (!container) {\n      return 0;\n    }\n\n    const { scrollHeight, offsetHeight } = container;\n\n    const scrollTop = _getContainerScrollTop();\n\n    const relativeRatio = Math.abs(scrollTop) / (scrollHeight - offsetHeight);\n    return reverse ? 1 - relativeRatio : relativeRatio;\n  };\n\n  const getScrollTop = () => {\n    const { current: container } = containerRef;\n\n    if (!container) {\n      return 0;\n    }\n\n    const { scrollHeight, offsetHeight } = container;\n\n    const scrollTop = _getContainerScrollTop();\n\n    return reverse ? scrollHeight - (offsetHeight + -scrollTop) : scrollTop;\n  };\n\n  const getScrollBottom = () => {\n    const { current: container } = containerRef;\n\n    if (!container) {\n      return 0;\n    }\n\n    return container.scrollHeight - getScrollTop() - container.offsetHeight;\n  };\n\n  const refreshAnchor = () => {\n    if (scrollStatusRef?.current === ScrollStatus.Top) {\n      scrollToPercentage(0);\n    } else if (scrollStatusRef?.current === ScrollStatus.Bottom) {\n      scrollToPercentage(1);\n    }\n  };\n\n  const checkContentIsFull = () => {\n    const container = containerRef.current;\n    if (!container) {\n      console.warn('[checkContentIsFull] container not found');\n      return false;\n    }\n    const rect = container.getBoundingClientRect();\n    const parentNode = container.parentElement;\n    const parentRect = parentNode?.getBoundingClientRect();\n    return (parentRect?.height ?? 0) === rect.height;\n  };\n\n  const getOriginScrollInfo = () => {\n    const { current: container } = containerRef;\n    if (!container) {\n      return { scrollHeight: 0, scrollTop: 0, rect: null };\n    }\n    return {\n      scrollHeight: container.scrollHeight,\n      scrollTop: container.scrollTop,\n      rect: container.getBoundingClientRect(),\n    };\n  };\n\n  useEffect(() => {\n    containerRef.current?.addEventListener('touchstart', () => {\n      isDisableScroll.current = true;\n    });\n\n    containerRef.current?.addEventListener('touchend', () => {\n      isDisableScroll.current = false;\n    });\n  }, []);\n\n  return {\n    wrapperRef,\n    ref: containerRef,\n    controller: {\n      getScrollViewWrapper,\n      scrollTo,\n      scrollToPercentage,\n      getScrollPercentage,\n      getScrollTop,\n      getOriginScrollInfo,\n      getScrollBottom,\n      refreshAnchor,\n      disableScroll,\n      enableScroll,\n      checkContentIsFull,\n    },\n  };\n};\n\nexport interface UseAutoAnchorWhenPrependOnSafariParams {\n  /** rolling method */\n  scrollTo: ScrollViewController['scrollTo'];\n  /** Get the current scroll distance to the bottom */\n  getScrollBottom: ScrollViewController['getScrollTop'];\n  /** scroll direction */\n  reverse: boolean;\n  /** The minimum value from the boundary when anchoring is enabled, defaults to 10 */\n  enableThreshold?: number;\n}\n\n/**\n * Handle the issue of automatic anchoring when y-reverse inserts elements down in Safari (Safari does not support overflow-anchor attribute)\n */\nexport const useAutoAnchorWhenAppendOnSafari = ({\n  scrollTo,\n  getScrollBottom,\n  reverse,\n  enableThreshold = 10,\n}: UseAutoAnchorWhenPrependOnSafariParams) => {\n  useLayoutEffect(() => {\n    if (!isAppleWebkit() || !reverse) {\n      return;\n    }\n\n    let prevLastChild: undefined | string;\n\n    let prevContainerHeight: undefined | number;\n\n    const scrollToKeepAnchor = () => {\n      const container = document.querySelector(\n        `.${SCROLL_VIEW_ANCHOR_CONTAINER}`,\n      );\n\n      if (container) {\n        const currentLastChild = container.lastElementChild?.outerHTML;\n\n        const currentContainerHeight = container.getBoundingClientRect().height;\n\n        if (prevLastChild && isNumber(prevContainerHeight)) {\n          /** The end element has changed, and the height has changed at the same time, so it is concluded that the end element is inserted, but it is only anchored when the threshold is exceeded */\n          if (\n            prevContainerHeight !== currentContainerHeight &&\n            currentLastChild !== prevLastChild &&\n            Math.abs(getScrollBottom()) > enableThreshold\n          ) {\n            const heightIncrease = currentContainerHeight - prevContainerHeight;\n\n            scrollTo(prevScrollTop => prevScrollTop - heightIncrease);\n          }\n        }\n\n        prevContainerHeight = currentContainerHeight;\n\n        prevLastChild = currentLastChild ?? undefined;\n      }\n\n      requestAnimationFrame(scrollToKeepAnchor);\n    };\n\n    requestAnimationFrame(scrollToKeepAnchor);\n  }, []);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const SCROLL_VIEW_ANCHOR_CONTAINER = 'scroll-view-anchor-container';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type MutableRefObject, createContext, useContext } from 'react';\n\nexport const ScrollViewContentContext = createContext<\n  MutableRefObject<HTMLDivElement | null>\n>({\n  current: null,\n});\n\nexport const useScrollViewContentRef = () =>\n  useContext(ScrollViewContentContext);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable @coze-arch/max-line-per-function */\n\nimport {\n  forwardRef,\n  useCallback,\n  useImperativeHandle,\n  useMemo,\n  useRef,\n} from 'react';\n\nimport { debounce, isFunction } from 'lodash-es';\nimport cs from 'classnames';\n\nimport {\n  type ScrollViewProps,\n  type ScrollViewController,\n  ScrollStatus,\n} from './type';\nimport {\n  useAutoAnchorWhenAppendOnSafari,\n  useScrollViewControllerAndState,\n} from './hooks';\nimport { ScrollViewContentContext } from './context';\n\nimport styles from './index.module.less';\n\nexport { useScrollViewContentRef } from './context';\n\nconst DEBOUNCE_TIME = 100;\n\nexport const ScrollView = forwardRef<ScrollViewController, ScrollViewProps>(\n  function ScrollView(\n    {\n      style,\n      className,\n      children,\n      before,\n      beforeClassName,\n      after,\n      innerBefore,\n      reverse = false,\n      reachTopThreshold,\n      onReachTop,\n      onLeaveTop,\n      reachBottomThreshold,\n      onReachBottom,\n      onLeaveBottom,\n      showScrollbar,\n      autoShowScrollbar,\n      onScroll,\n      scrollbarWidthNone = true,\n    },\n    outerRef,\n  ) {\n    /** At the very beginning, the default scrolling state */\n    const defaultScrollStatus = reverse\n      ? ScrollStatus.Bottom\n      : ScrollStatus.Top;\n\n    const scrollViewContentRef = useRef<HTMLDivElement | null>(null);\n    const scrollStatusRef = useRef(defaultScrollStatus);\n\n    const { wrapperRef, ref, controller } = useScrollViewControllerAndState({\n      reverse,\n      scrollStatusRef,\n    });\n\n    const { getScrollTop, getScrollBottom, scrollTo } = controller;\n\n    const isReachTopRef = useRef<boolean>(false);\n\n    const isReachBottomRef = useRef<boolean>(false);\n\n    useImperativeHandle(outerRef, () => controller, [controller]);\n\n    const handleDebounceUpdateScrollStatus = useMemo(\n      () =>\n        debounce((scrollStatus: ScrollStatus) => {\n          scrollStatusRef.current = scrollStatus;\n        }, DEBOUNCE_TIME),\n      [],\n    );\n\n    const handleScroll = useCallback(\n      ((e: React.UIEvent<HTMLElement>) => {\n        if (!e.currentTarget) {\n          return;\n        }\n\n        onScroll?.(e);\n\n        const { offsetHeight } = e.currentTarget;\n\n        const topThreshold = reachTopThreshold ?? offsetHeight;\n\n        const bottomThreshold = reachBottomThreshold ?? offsetHeight;\n\n        const anchorThreshold = 0;\n\n        /** Scroll to the upper boundary of the event */\n        if (getScrollTop() < topThreshold) {\n          if (!isReachTopRef.current) {\n            isReachTopRef.current = true;\n            onReachTop?.();\n          }\n        } else {\n          if (isReachTopRef.current) {\n            isReachTopRef.current = false;\n            onLeaveTop?.();\n          }\n        }\n\n        /** Scroll to the lower boundary of the event */\n        if (getScrollBottom() < bottomThreshold) {\n          if (!isReachBottomRef.current) {\n            isReachBottomRef.current = true;\n            onReachBottom?.();\n          }\n        } else {\n          if (isReachBottomRef.current) {\n            isReachBottomRef.current = false;\n            onLeaveBottom?.();\n          }\n        }\n\n        /** Scroll to the automatic welt (anchor) boundary, release first and then delay updating the welt state to prevent automatic welt and scroll conflicts when the welt threshold has not been rolled out */\n        scrollStatusRef.current = ScrollStatus.Inner;\n        if (\n          getScrollTop() <= anchorThreshold &&\n          getScrollBottom() <= anchorThreshold\n        ) {\n          handleDebounceUpdateScrollStatus(defaultScrollStatus);\n        } else if (getScrollTop() <= anchorThreshold) {\n          handleDebounceUpdateScrollStatus(ScrollStatus.Top);\n        } else if (getScrollBottom() <= anchorThreshold) {\n          handleDebounceUpdateScrollStatus(ScrollStatus.Bottom);\n        } else {\n          handleDebounceUpdateScrollStatus(ScrollStatus.Inner);\n        }\n      }) satisfies ScrollViewProps['onScroll'],\n      [\n        reachTopThreshold,\n        reachBottomThreshold,\n        getScrollTop,\n        getScrollBottom,\n        onReachTop,\n        onLeaveTop,\n        onReachBottom,\n        onLeaveBottom,\n      ],\n    );\n\n    useAutoAnchorWhenAppendOnSafari({ scrollTo, reverse, getScrollBottom });\n\n    return (\n      <ScrollViewContentContext.Provider value={scrollViewContentRef}>\n        <div\n          className={cs(styles['scroll-view'], className)}\n          style={style}\n          ref={wrapperRef}\n        >\n          {before ? (\n            <div className={cs(styles.before, beforeClassName)}>\n              {isFunction(before) ? before?.(controller) : before}\n            </div>\n          ) : null}\n\n          <div\n            className={cs(styles.content)}\n            ref={scrollViewContentRef}\n            data-testid=\"chat-area.message-content\"\n          >\n            <div\n              ref={ref}\n              data-scroll-element=\"scrollable\"\n              className={cs(\n                styles.scrollable,\n                showScrollbar && styles['show-scrollbar'],\n                autoShowScrollbar && styles['auto-show-scrollbar'],\n                scrollbarWidthNone && styles['scrollbar-width-none'],\n                {\n                  [styles.reverse]: reverse,\n                },\n              )}\n              onScroll={handleScroll}\n            >\n              {isFunction(children) ? children(controller) : children}\n              {innerBefore ? (\n                <div className={cs(styles.before)}>\n                  {isFunction(innerBefore)\n                    ? innerBefore?.(controller)\n                    : innerBefore}\n                </div>\n              ) : null}\n            </div>\n          </div>\n\n          {after ? (\n            <div className={cs(styles.after)}>\n              {isFunction(after) ? after?.(controller) : after}\n            </div>\n          ) : null}\n        </div>\n      </ScrollViewContentContext.Provider>\n    );\n  },\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ColumnProps } from '@coze-arch/bot-semi/Table';\n\nexport type TableViewValue = string | number | undefined;\nexport type TableViewRecord = {\n  tableViewKey?: string;\n} & Record<string, TableViewValue>;\nexport type TableViewColumns = ColumnProps<TableViewRecord>;\n\nexport enum TableViewMode {\n  READ = 'read',\n  EDIT = 'edit',\n}\n\nexport enum EditMenuItem {\n  EDIT = 'edit',\n  DELETE = 'delete',\n  DELETEALL = 'deleteAll',\n}\nexport interface ValidatorProps {\n  validate?: (\n    value: string,\n    record?: TableViewRecord,\n    index?: number,\n  ) => boolean;\n  errorMsg?: string;\n}\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useMemo, useState, useEffect, useRef } from 'react';\n\nimport { TextArea } from '@coze-arch/coze-design';\nimport { Tooltip } from '@coze-arch/bot-semi';\nimport { IconToastError } from '@coze-arch/bot-icons';\nimport { CommonE2e } from '@coze-data/e2e';\n\nimport {\n  type TableViewRecord,\n  type ValidatorProps,\n  type TableViewValue,\n} from '../types';\n\nimport styles from './index.module.less';\nexport interface TextRenderProps {\n  value: TableViewValue;\n  record: TableViewRecord;\n  index: number;\n  onBlur?: (v: TableViewValue, record: TableViewRecord, index: number) => void;\n  onChange?: (\n    v: TableViewValue,\n    record: TableViewRecord,\n    index: number,\n  ) => void;\n  validator?: ValidatorProps;\n  editable?: boolean;\n  isEditing?: boolean;\n  dataIndex?: string;\n}\n\nexport const TextRender = ({\n  value,\n  record,\n  index,\n  onBlur,\n  onChange,\n  dataIndex = '',\n  validator = {},\n  editable = false,\n  isEditing,\n}: TextRenderProps) => {\n  const { validate, errorMsg } = validator;\n  const [isEditCom, setIsEditCom] = useState(isEditing);\n  const [inputValue, setInputValue] = useState<TableViewValue>(String(value));\n  const textAreaRef = useRef<HTMLTextAreaElement>(null);\n  useEffect(() => {\n    setIsEditCom(isEditing);\n  }, [isEditing]);\n  const onBlurFn = async () => {\n    if (onBlur && value !== inputValue) {\n      const updateRecord = { ...record, [dataIndex]: inputValue };\n      delete updateRecord.tableViewKey;\n      if (!isError) {\n        try {\n          await onBlur(inputValue, updateRecord, index);\n        } catch (e) {\n          // Update failed, restore original value\n          console.log('update table content error', e);\n          setInputValue(String(value));\n        }\n      } else {\n        setInputValue(String(value));\n      }\n    }\n    setIsEditCom(false);\n  };\n  const onChangeFn = (v: string) => {\n    if (onChange) {\n      onChange(v, record, index);\n    }\n    setInputValue(v);\n  };\n  // check state\n  const isError = useMemo(\n    () => !!validate?.(String(inputValue), record, index),\n    [inputValue, validate],\n  );\n  useEffect(() => {\n    setInputValue(value);\n  }, [value]);\n\n  useEffect(() => {\n    const target = textAreaRef.current;\n    if (!isEditCom || !target) {\n      return;\n    }\n    const valueLength = String(inputValue).length;\n    target.focus();\n    if (!valueLength) {\n      return;\n    }\n    target.setSelectionRange(valueLength, valueLength);\n  }, [isEditCom]);\n\n  return (\n    <div\n      className={`${styles['cell-text-render']} text-render-wrapper`}\n      data-testid={CommonE2e.CommonTableViewTextRender}\n    >\n      {/* edit state component */}\n      {isEditCom ? (\n        <span\n          className={`${styles['cell-text-edit']} ${\n            isError ? styles['cell-text-error'] : ''\n          } cell-text-area-wrapper`}\n        >\n          <TextArea\n            ref={textAreaRef}\n            autoFocus\n            autosize\n            validateStatus={isError ? 'error' : 'default'}\n            rows={1}\n            className={styles['cell-text-area']}\n            value={String(inputValue)}\n            onBlur={onBlurFn}\n            onChange={onChangeFn}\n          />\n          {isError ? (\n            <div className={styles['cell-text-edit-error']}>\n              <Tooltip content={errorMsg}>\n                <IconToastError />\n              </Tooltip>\n            </div>\n          ) : null}\n        </span>\n      ) : null}\n\n      {/* preview component */}\n      {!isEditCom && (\n        <div\n          className={`${styles['cell-text-preview']} text-content`}\n          onClick={() => setIsEditCom(true)}\n        >\n          {inputValue}\n        </div>\n      )}\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ReactNode } from 'react';\n\nimport classNames from 'classnames';\nimport { type TagColor } from '@coze-arch/coze-design/types';\nimport { Tag } from '@coze-arch/coze-design';\n\nimport styles from './index.module.less';\n\nexport interface TagRenderProps {\n  value: string | ReactNode;\n  className?: string;\n  size?: 'small' | 'mini';\n  color?: TagColor;\n}\nexport const TagRender = ({\n  value,\n  className,\n  size,\n  color,\n}: TagRenderProps) => (\n  <Tag\n    className={classNames(className, styles['tag-render'])}\n    size={size}\n    color={color ?? 'primary'}\n  >\n    {value}\n  </Tag>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from 'classnames';\nimport { IconCozEdit, IconCozTrashCan } from '@coze-arch/coze-design/icons';\nimport { Button } from '@coze-arch/coze-design';\n\nimport { type TableViewRecord } from '../types';\n\nimport styles from './index.module.less';\nexport interface ActionsRenderProps {\n  record: TableViewRecord;\n  index: number;\n  editProps?: {\n    disabled: boolean;\n    // edit callback\n    onEdit?: (record: TableViewRecord, index: number) => void;\n  };\n  deleteProps?: {\n    disabled: boolean;\n    // Delete callback\n    onDelete?: (index: number) => void;\n  };\n  className?: string;\n}\nexport const ActionsRender = ({\n  record,\n  index,\n  editProps = { disabled: false },\n  deleteProps = { disabled: false },\n}: ActionsRenderProps) => {\n  const { disabled: editDisabled, onEdit } = editProps;\n  const { disabled: deleteDisabled, onDelete } = deleteProps;\n\n  return (\n    <div className={classNames(styles['actions-render'], 'table-view-actions')}>\n      {!editDisabled && (\n        <Button\n          size=\"mini\"\n          color=\"secondary\"\n          icon={<IconCozEdit className=\"text-[14px]\" />}\n          className={styles['action-edit']}\n          onClick={() => onEdit && onEdit(record, index)}\n        ></Button>\n      )}\n      {!deleteDisabled && (\n        <Button\n          size=\"mini\"\n          color=\"secondary\"\n          icon={<IconCozTrashCan className=\"text-[14px]\" />}\n          className={styles['action-delete']}\n          onClick={() => onDelete && onDelete(index)}\n        ></Button>\n      )}\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CustomError } from '@coze-arch/bot-error';\n\nexport const getBase64 = (file: Blob): Promise<string> =>\n  new Promise((resolve, reject) => {\n    const fileReader = new FileReader();\n    fileReader.onload = event => {\n      const result = event.target?.result;\n\n      if (!result || typeof result !== 'string') {\n        reject(new CustomError('getBase64', 'file read invalid'));\n        return;\n      }\n\n      resolve(result.replace(/^.*?,/, ''));\n    };\n    fileReader.onerror = () => {\n      reject(new CustomError('getBase64', 'file read fail'));\n    };\n    fileReader.onabort = () => {\n      reject(new CustomError('getBase64', 'file read abort'));\n    };\n    fileReader.readAsDataURL(file);\n  });\n\nexport const getUint8Array = (file: Blob): Promise<Uint8Array> =>\n  new Promise((resolve, reject) => {\n    const fileReader = new FileReader();\n\n    fileReader.onload = event => {\n      if (event.target?.result) {\n        const arrayBuffer = event.target.result as ArrayBuffer;\n        const uint8Array = new Uint8Array(arrayBuffer);\n        resolve(uint8Array);\n      } else {\n        reject(new CustomError('getUint8Array', 'file read invalid'));\n      }\n    };\n\n    fileReader.readAsArrayBuffer(file);\n  });\n\nexport const getFileExtension = (name: string) => {\n  const index = name.lastIndexOf('.');\n  return name.slice(index + 1);\n};\n\n// eslint-disable-next-line @typescript-eslint/no-magic-numbers\nconst LIMIT_SIZE = 20 * 1024 * 1024;\nexport const isValidSize = (size: number) => LIMIT_SIZE > size;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState } from 'react';\n\nimport { REPORT_EVENTS } from '@coze-arch/report-events';\nimport { I18n } from '@coze-arch/i18n';\nimport { IconCozUpload } from '@coze-arch/coze-design/icons';\nimport {\n  Upload,\n  Input,\n  Image,\n  Typography,\n  Spin,\n  Toast,\n} from '@coze-arch/coze-design';\nimport { type UploadProps } from '@coze-arch/bot-semi/Upload';\nimport { IconImageFailOutlined } from '@coze-arch/bot-icons';\nimport { CustomError } from '@coze-arch/bot-error';\nimport { FileBizType } from '@coze-arch/bot-api/developer_api';\nimport { DeveloperApi } from '@coze-arch/bot-api';\nimport { useDataModalWithCoze } from '@coze-data/utils';\n\nimport styles from '../index.module.less';\nimport { getBase64, getFileExtension, isValidSize } from './utils';\n\nexport interface UseImagePreviewProps {\n  src: string;\n  setSrc: (src: string) => void;\n  onChange?: (src: string, tosKey: string) => void;\n  editable?: boolean;\n}\nexport const useImagePreview = ({\n  src,\n  setSrc,\n  onChange,\n  editable = true,\n}: UseImagePreviewProps) => {\n  const [tosKey, setTosKey] = useState('');\n  const [uploading, setUploading] = useState(false);\n  const { open, close, modal } = useDataModalWithCoze({\n    width: 640,\n    title: I18n.t('knowledge_insert_img_004'),\n    okText: I18n.t('Confirm'),\n    okButtonProps: {\n      disabled: uploading,\n    },\n    cancelText: I18n.t('Cancel'),\n    onCancel: () => {\n      close();\n    },\n    onOk: () => {\n      onChange?.(src, tosKey);\n      close();\n    },\n  });\n  const customRequest: UploadProps['customRequest'] = async options => {\n    const { onSuccess, onProgress, file } = options;\n\n    if (typeof file === 'string') {\n      return;\n    }\n    try {\n      // business\n      const { name, fileInstance, url } = file;\n      setUploading(true);\n      if (fileInstance) {\n        setSrc(url || '');\n        const extension = getFileExtension(name);\n        const base64 = await getBase64(fileInstance);\n        const result = await DeveloperApi.UploadFile(\n          {\n            file_head: {\n              file_type: extension,\n              biz_type: FileBizType.BIZ_BOT_DATASET,\n            },\n            data: base64,\n          },\n          {\n            onUploadProgress: e => {\n              onProgress({\n                total: e.total ?? fileInstance.size,\n                loaded: e.loaded,\n              });\n            },\n          },\n        );\n        onSuccess(result.data);\n        setTosKey(result?.data?.upload_uri || '');\n        setSrc(result?.data?.upload_url || '');\n      } else {\n        throw new CustomError(\n          REPORT_EVENTS.KnowledgeUploadFile,\n          'Upload image fail',\n        );\n      }\n    } catch (error) {\n      throw new CustomError(\n        REPORT_EVENTS.KnowledgeUploadFile,\n        `Upload image fail: ${error}`,\n      );\n    } finally {\n      setUploading(false);\n    }\n  };\n  const Empty = ({ showTips = false }) => (\n    <div className={styles['image-upload-empty']}>\n      <IconCozUpload className={'text-[32px] coz-fg-hglt'} />\n      <div className={styles['image-upload-text']}>\n        {I18n.t('knowledge_insert_img_006')}\n      </div>\n      {showTips ? (\n        <div className={styles['image-upload-tips']}>\n          {I18n.t('knowledge_insert_img_007')}\n        </div>\n      ) : null}\n    </div>\n  );\n  return {\n    node: modal(\n      <div className={styles['image-preview-modal']}>\n        <Upload\n          className={styles['image-upload']}\n          maxSize={20480}\n          fileList={[]}\n          limit={1}\n          accept=\"image/*\"\n          disabled={!editable || uploading}\n          customRequest={customRequest}\n          draggable\n          onChange={fileItem => {\n            const { currentFile } = fileItem;\n            if (currentFile) {\n              const isValid = isValidSize(currentFile?.fileInstance?.size || 0);\n              if (!isValid) {\n                Toast.error(I18n.t('knowledge_insert_img_013'));\n              }\n            }\n          }}\n        >\n          <Spin\n            spinning={uploading}\n            tip={I18n.t('knowledge_insert_img_009')}\n            wrapperClassName={uploading ? 'spin-uploading' : ''}\n          >\n            <div className={styles['image-wrapper']}>\n              {editable ? (\n                <div className={styles['image-hover']}>\n                  <Empty showTips />\n                </div>\n              ) : null}\n              <Image\n                src={src}\n                preview={false}\n                fallback={<IconImageFailOutlined />}\n              ></Image>\n            </div>\n          </Spin>\n        </Upload>\n\n        <div className=\"mb-[16px]\">\n          <Typography className=\"coz-fg-secondary text-[12px] fw-[500] px-[8px]\">\n            {I18n.t('knowledge_insert_img_005')}\n          </Typography>\n          <Input\n            value={src}\n            onChange={v => {\n              setSrc(v);\n              setTosKey('');\n            }}\n            disabled={!editable || uploading}\n          />\n        </div>\n      </div>,\n    ),\n    open,\n    close,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState } from 'react';\n\nimport { Image } from '@coze-arch/bot-semi';\nimport { IconImageFailOutlined } from '@coze-arch/bot-icons';\n\nimport styles from '../index.module.less';\nimport { useImagePreview } from './use-image-preview';\nexport interface ImageRenderProps {\n  srcList: string[];\n  // Whether the picture can be edited, the default is false\n  editable?: boolean;\n  onChange?: (tosKey: string, src: string) => void;\n  dataIndex?: string;\n  className?: string;\n  customEmpty?: (props: { onClick?: () => void }) => React.ReactNode;\n}\n\nexport interface ImageContainerProps {\n  srcList: string[];\n  onClick?: () => void;\n  setCurSrc?: (src: string) => void;\n}\n\nconst ImageContainer = ({\n  srcList,\n  onClick,\n  setCurSrc,\n  ...imageProps\n}: ImageContainerProps) => (\n  <div\n    className={styles['image-container']}\n    onClick={() => {\n      if (!srcList.length || !srcList[0]) {\n        onClick?.();\n      }\n    }}\n  >\n    {srcList.map(src => (\n      <Image\n        {...imageProps}\n        onClick={() => {\n          setCurSrc?.(src);\n          onClick?.();\n        }}\n        preview={false}\n        src={src}\n        // bottom line on failure\n        fallback={\n          <IconImageFailOutlined\n            className={styles['image-failed']}\n            onClick={() => {\n              setCurSrc?.(src);\n              onClick?.();\n            }}\n          />\n        }\n        // The placeholder map when the picture is loaded, mainly used for large image loading\n        placeholder={<div className=\"image-skeleton\" onClick={onClick} />}\n      />\n    ))}\n  </div>\n);\nexport const ImageRender: React.FC<ImageRenderProps> = ({\n  srcList = [],\n  editable = true,\n  onChange,\n  className = '',\n  customEmpty,\n}) => {\n  const [curSrc, setCurSrc] = useState(srcList?.[0] || '');\n  const { open, node: imagePreviewModal } = useImagePreview({\n    editable,\n    src: curSrc,\n    setSrc: setCurSrc,\n    onChange,\n  });\n  useEffect(() => {\n    setCurSrc(srcList?.[0] || '');\n  }, [srcList]);\n  return (\n    <div\n      className={`${className} ${styles['image-render-wrapper']} ${\n        !curSrc ? styles['image-render-empty'] : ''\n      }`}\n    >\n      {(!srcList || !srcList.length) && customEmpty ? (\n        customEmpty({ onClick: open })\n      ) : (\n        <ImageContainer\n          srcList={srcList}\n          onClick={open}\n          setCurSrc={setCurSrc}\n        />\n      )}\n\n      {imagePreviewModal}\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { IconCozEdit, IconCozTrashCan } from '@coze-arch/coze-design/icons';\nimport { type RowKey } from '@coze-arch/bot-semi/Table';\n\nimport {\n  type TableViewRecord,\n  type TableViewColumns,\n  EditMenuItem,\n} from '../types';\n\nconst FIXED_COLUMN_WIDTH = 38;\nconst MIN_COLUMN_WIDTH = 100;\n\nexport interface GetRowOpConfig {\n  selected: {\n    record?: TableViewRecord;\n    indexs?: (string | number)[];\n  };\n  onEdit?: (\n    record: TableViewRecord,\n    index: string | number,\n  ) => void | Promise<void>;\n  onDelete?: (indexs: (string | number)[]) => void | Promise<void>;\n}\n\n/**\n * Callbacks when table columns are scaled to limit the scaling boundaries\n * @param column\n * @returns\n */\nexport const resizeFn = (column: TableViewColumns): TableViewColumns => {\n  if (column.fixed || column.key === 'column-selection') {\n    return {\n      ...column,\n      resizable: false,\n      width: FIXED_COLUMN_WIDTH,\n    };\n  }\n  return {\n    ...column,\n    width:\n      Number(column.width) < MIN_COLUMN_WIDTH\n        ? MIN_COLUMN_WIDTH\n        : Number(column.width),\n  };\n};\n\nexport const getRowKey: RowKey<TableViewRecord> = (record?: TableViewRecord) =>\n  record?.tableViewKey || '';\n\n/**\n * Get row operation configuration\n * @param record\n * @param indexs\n * @param onEdit\n * @param onDelete\n * @returns\n */\nexport const getRowOpConfig = ({\n  selected,\n  onEdit,\n  onDelete,\n}: GetRowOpConfig) => {\n  const { record, indexs } = selected;\n  const DeleteFn = () => {\n    if (onDelete && indexs) {\n      onDelete(indexs);\n    }\n  };\n  const deleteConfig = {\n    text: 'knowledge_tableview_02',\n    icon: <IconCozTrashCan />,\n    onClick: DeleteFn,\n  };\n  const editMenuConfig = {\n    [EditMenuItem.EDIT]: {\n      text: 'knowledge_tableview_01',\n      icon: <IconCozEdit />,\n      onClick: () => {\n        if (onEdit && record && indexs) {\n          onEdit(record, indexs[0]);\n        }\n      },\n    },\n    [EditMenuItem.DELETE]: deleteConfig,\n    [EditMenuItem.DELETEALL]: deleteConfig,\n  };\n  return editMenuConfig;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { REPORT_EVENTS } from '@coze-arch/report-events';\nimport { CustomError } from '@coze-arch/bot-error';\n\n/**\n * Method class with cache column width\n */\n\nclass ColWidthCacheService {\n  public mapName: string;\n  public capacity: number;\n\n  constructor() {\n    this.mapName = 'TABLE_VIEW_COL_WIDTH_MAP';\n    this.capacity = 20;\n  }\n  private mapToString(map: Map<string, Record<string, number>>) {\n    const mapArr = Array.from(map);\n    return JSON.stringify(mapArr);\n  }\n\n  private stringToMap(v: string) {\n    const mapArr = JSON.parse(v);\n    return mapArr.reduce(\n      (\n        map: Map<string, Record<string, number>>,\n        [key, value]: [string, Record<string, number>],\n      ) => map.set(key, value),\n      new Map(),\n    );\n  }\n\n  /**\n   * Initializing the scaled column cache\n   */\n  initWidthMap() {\n    const widthMap = window.localStorage.getItem(this.mapName);\n    if (!widthMap) {\n      // Completing a simple LRU using the characteristic that Map can record the order of key-value pairs\n      window.localStorage.setItem(this.mapName, this.mapToString(new Map()));\n    }\n  }\n\n  /**\n   * Set the column width cache, if it exceeds the number of caches, delete the most recently unused value in the map\n   */\n  setWidthMap(widthMap: Record<string, number>, tableKey?: string) {\n    if (!tableKey) {\n      return;\n    }\n    try {\n      const cacheWidthMap = this.stringToMap(\n        window.localStorage.getItem(this.mapName) || '',\n      );\n      if (cacheWidthMap.has(tableKey)) {\n        // Exist and update (join after deletion)\n        cacheWidthMap.delete(tableKey);\n      } else if (cacheWidthMap.size >= this.capacity) {\n        // Join if you don't exist\n        // If the cache exceeds the maximum value, remove the recently unused\n        cacheWidthMap.delete(cacheWidthMap.keys().next().value);\n      }\n      cacheWidthMap.set(tableKey, widthMap);\n      window.localStorage.setItem(\n        this.mapName,\n        this.mapToString(cacheWidthMap),\n      );\n    } catch (err) {\n      throw new CustomError(\n        REPORT_EVENTS.KnowledgeTableViewSetColWidth,\n        `table view set width map fail: ${err}`,\n      );\n    }\n  }\n\n  /**\n   * Query column width cache information in table dimension\n   * @param tableKey\n   */\n  getTableWidthMap(tableKey: string) {\n    try {\n      const cacheWidthMap = this.stringToMap(\n        window.localStorage.getItem(this.mapName) || '',\n      );\n      // exist and update\n      const temp = cacheWidthMap.get(tableKey);\n      cacheWidthMap.delete(tableKey);\n      cacheWidthMap.set(tableKey, temp);\n      return temp;\n    } catch (err) {\n      throw new CustomError(\n        REPORT_EVENTS.KnowledgeTableViewGetColWidth,\n        `table view get width map fail: ${err}`,\n      );\n    }\n  }\n}\n\nexport const colWidthCacheService = new ColWidthCacheService();\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type CSSProperties, useEffect } from 'react';\n\nimport classNames from 'classnames';\nimport { I18n, type I18nKeysNoOptionsType } from '@coze-arch/i18n';\nimport {\n  Menu,\n  Divider,\n  Button,\n  ButtonGroup,\n  Space,\n} from '@coze-arch/coze-design';\nimport { IconClose } from '@douyinfe/semi-icons';\n\nimport { type EditMenuItem, type TableViewRecord } from '../types';\nimport { getRowOpConfig } from './utils';\n\nimport styles from './index.module.less';\n\nexport interface EditMenuProps {\n  configs: EditMenuItem[];\n  visible: boolean;\n  style: CSSProperties;\n  selected: {\n    record?: TableViewRecord;\n    indexs?: (string | number)[];\n  };\n  onExit?: () => void | Promise<void>;\n  onDelete?: (indexs: (string | number)[]) => void | Promise<void>;\n  // Line operations edit line callbacks\n  onEdit?: (\n    record: TableViewRecord,\n    index: string | number,\n  ) => void | Promise<void>;\n}\n\nexport const EditMenu = ({\n  configs,\n  visible,\n  style,\n  selected,\n  onExit,\n  onEdit,\n  onDelete,\n}: EditMenuProps) => {\n  const menuConfigs = getRowOpConfig({\n    selected,\n    onEdit,\n    onDelete,\n  });\n\n  useEffect(() => {\n    const fn = (_e: Event) => {\n      if (onExit) {\n        onExit();\n      }\n    };\n    window.addEventListener('click', fn);\n    return () => window.removeEventListener('click', fn);\n  }, []);\n\n  if (visible && configs && configs.length) {\n    return (\n      <div\n        style={style}\n        className={classNames(\n          styles['table-edit-menu'],\n          'context-menu-disabled',\n        )}\n      >\n        <Menu.SubMenu mode=\"menu\">\n          {configs.map(config => {\n            const { text, onClick, icon } = menuConfigs[config];\n            return (\n              <Menu.Item\n                onClick={() => {\n                  onClick();\n                }}\n                icon={icon}\n              >\n                {I18n.t(text as I18nKeysNoOptionsType)}\n              </Menu.Item>\n            );\n          })}\n        </Menu.SubMenu>\n      </div>\n    );\n  }\n  return <div className=\"context-menu-disabled\"></div>;\n};\n\nexport const EditToolBar = ({\n  configs,\n  visible,\n  selected,\n  onExit,\n  onEdit,\n  onDelete,\n}: EditMenuProps) => {\n  const menuConfigs = getRowOpConfig({\n    selected,\n    onEdit,\n    onDelete,\n  });\n  const { indexs } = selected;\n  return (\n    <>\n      {visible ? (\n        <div\n          className={styles['table-edit-toolbar']}\n          style={{\n            marginLeft: `${\n              (selected?.indexs || []).length > 1 ? '-145px' : '-203.5px'\n            }`,\n          }}\n        >\n          <ButtonGroup className={styles['button-group']}>\n            {selected ? (\n              <div className={styles['selected-count']}>\n                {I18n.t('table_view_002', {\n                  n: indexs?.length,\n                })}\n              </div>\n            ) : null}\n            <Divider layout=\"vertical\" margin={'8px'} />\n            {configs.length > 0 ? (\n              <Space spacing={8}>\n                {configs.map(config => {\n                  const { text, onClick } = menuConfigs[config];\n                  return (\n                    <Button onClick={onClick} color=\"primary\">\n                      {I18n.t(text as I18nKeysNoOptionsType)}\n                    </Button>\n                  );\n                })}\n              </Space>\n            ) : null}\n\n            <Divider layout=\"vertical\" margin={'8px'} />\n\n            <Button\n              icon={<IconClose />}\n              onClick={onExit}\n              color=\"secondary\"\n            ></Button>\n          </ButtonGroup>\n        </div>\n      ) : null}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable @coze-arch/max-line-per-function */\nimport React, {\n  useState,\n  useMemo,\n  type ReactNode,\n  forwardRef,\n  useImperativeHandle,\n  useEffect,\n} from 'react';\n\nimport classNames from 'classnames';\nimport { useDebounceFn } from 'ahooks';\nimport { I18n } from '@coze-arch/i18n';\nimport { useTheme } from '@coze-arch/coze-design';\nimport {\n  type RowSelectionProps,\n  type TableProps,\n  type OnCellReturnObject,\n  type VirtualizedOnScrollArgs,\n} from '@coze-arch/bot-semi/Table';\nimport { UIEmpty, UITable } from '@coze-arch/bot-semi';\nimport { AutoSizer } from '@coze-common/virtual-list';\nimport { IllustrationNoResult } from '@douyinfe/semi-illustrations';\n\nimport {\n  type TableViewRecord,\n  EditMenuItem,\n  type TableViewColumns,\n  type TableViewValue,\n} from '../types';\nimport { TextRender } from '../renders';\nimport { resizeFn, getRowKey } from './utils';\nimport { colWidthCacheService } from './service';\nimport { EditMenu, EditToolBar } from './edit-menu';\n\nimport styles from './index.module.less';\n\nexport interface TableViewProps {\n  // Uniquely identifies the table and is used as the key value in the column width cache map\n  tableKey?: string;\n  // Class name for style overrides\n  className?: string;\n  // Edit Configuration\n  editProps?: {\n    // Callback for data deletion, batch support\n    onDelete?: (indexs: (string | number)[]) => void;\n    // Line operations edit line callbacks\n    onEdit?: (record: TableViewRecord, index: string | number) => void;\n  };\n  // Scroll to the bottom of the callback\n  scrollToBottom?: () => void | Promise<void>;\n  // Drag hook\n  onResize?: (col: TableViewColumns) => void;\n  // Whether to enable virtual scrolling, the default is false\n  isVirtualized?: boolean;\n  // Whether to enable scaled columns, the default is false\n  resizable?: boolean;\n  // Whether to enable line selection, the default is false\n  rowSelect?: boolean;\n  // Whether line operations are supported, the default is false\n  rowOperation?: boolean;\n  // data\n  dataSource: TableViewRecord[];\n  // header item\n  columns: TableViewColumns[];\n  // The data is empty.\n  empty?: ReactNode;\n  // loading\n  loading?: boolean;\n  // No consumption, only used to trigger the rendered state, which needs to be optimized\n  resizeTriState?: number;\n  // Additional tableProps\n  tableProps?: TableProps;\n}\nexport interface TableViewMethods {\n  resetSelected: () => void;\n  getTableHeight: () => number;\n}\nexport interface TableWrapperProps {\n  isVirtualized: boolean;\n  children: (props?: TableProps) => ReactNode;\n  onScroll: (args: VirtualizedOnScrollArgs & { height: number }) => void;\n}\n\nconst ITEM_SIZE = 56;\nconst HEADER_SIZE = 41;\nconst MOUSE_LEFT_BTN = 1;\nconst MOUSE_RIGHT_BTN = 2;\nconst SAFEY = 36;\nconst SAFEX = 176;\n\nconst TableWrapper = ({\n  isVirtualized,\n  onScroll,\n  children,\n}: TableWrapperProps) => {\n  if (isVirtualized) {\n    return (\n      <AutoSizer>\n        {({ width, height }: { width: number; height: number }) =>\n          children({\n            scroll: { y: height - HEADER_SIZE, x: width },\n            style: {\n              width,\n            },\n            virtualized: {\n              itemSize: ITEM_SIZE,\n              onScroll: scrollProps => onScroll({ ...scrollProps, height }),\n              overScanCount: 30,\n            },\n          })\n        }\n      </AutoSizer>\n    );\n  }\n  return <React.Fragment>{children()}</React.Fragment>;\n};\n\nconst EmptyStatus = () => (\n  <UIEmpty\n    empty={{\n      icon: <IllustrationNoResult />,\n      description: I18n.t('dataset_segment_empty_desc'),\n    }}\n  ></UIEmpty>\n);\n\nexport const TableView = forwardRef<TableViewMethods, TableViewProps>(\n  (\n    {\n      tableKey,\n      editProps = {},\n      isVirtualized = false,\n      rowSelect = false,\n      rowOperation = false,\n      resizable = false,\n      dataSource,\n      columns,\n      loading = false,\n      className,\n      scrollToBottom,\n      empty,\n      onResize,\n      tableProps: extraTableProps = {},\n    },\n    ref,\n  ) => {\n    const { onEdit, onDelete } = editProps;\n    const [menuVisible, setMenuVisible] = useState(false);\n    const [menuStyle, setMenuStyle] = useState({});\n    const [selected, setSelected] = useState<(string | number)[]>([]);\n    const [focusRow, setFocusRow] = useState<number>();\n    const { theme } = useTheme();\n    const currentThemeClassName = useMemo(\n      () => (theme === 'dark' ? styles.dark : styles.light),\n      [theme],\n    );\n    const toolBarVisible = useMemo(() => !!selected?.length, [selected]);\n    const tableData = useMemo(\n      () =>\n        dataSource.map((data, index) => ({\n          ...data,\n          tableViewKey: String(index),\n        })),\n      [dataSource],\n    );\n    const menuConfigs = useMemo(() => {\n      if (selected?.length && selected?.length > 1) {\n        return [EditMenuItem.DELETEALL];\n      }\n      return [EditMenuItem.EDIT, EditMenuItem.DELETE];\n    }, [selected]);\n    const columnsHandler = (cols: TableViewColumns) =>\n      cols.map(\n        (col: TableViewColumns): TableViewColumns => ({\n          ...col,\n          onCell: (\n            _record?: TableViewRecord,\n            rowIndex?: number,\n          ): OnCellReturnObject => ({\n            onContextMenu: (e: { preventDefault: () => void }) => {\n              e.preventDefault();\n            },\n            onMouseDown: (e: React.MouseEvent) => {\n              if (e.button === MOUSE_LEFT_BTN) {\n                setMenuVisible(false);\n              }\n              if (e.button === MOUSE_RIGHT_BTN && rowOperation) {\n                e.preventDefault();\n                const { offsetWidth, offsetHeight } = document.body;\n                // If the right-click position is not selected, uncheck it\n                if (\n                  rowIndex &&\n                  selected?.length &&\n                  !selected.includes(String(rowIndex))\n                ) {\n                  setSelected([]);\n                }\n                // right-click to display the menu\n                setFocusRow(rowIndex);\n                setMenuVisible(true);\n                setMenuStyle({\n                  position: 'fixed',\n                  top:\n                    e.pageY + SAFEY * menuConfigs.length > offsetHeight\n                      ? e.pageY - SAFEY * menuConfigs.length\n                      : e.pageY,\n                  left:\n                    e.pageX + SAFEX > offsetWidth ? e.pageX - SAFEX : e.pageX,\n                  zIndex: 100,\n                });\n              }\n            },\n          }),\n          render: col.render\n            ? col.render\n            : (\n                text: TableViewValue,\n                record: TableViewRecord,\n                index: number,\n              ) => <TextRender value={text} record={record} index={index} />,\n        }),\n      );\n    const [newColumns, setNewColumns] = useState<TableViewColumns[]>(\n      columnsHandler(columns),\n    );\n    const rowSelection = useMemo(\n      (): RowSelectionProps<TableViewRecord> => ({\n        width: 38,\n        fixed: true,\n        selectedRowKeys: selected,\n        onChange: selectedRowKeys => {\n          setMenuVisible(false);\n          setSelected(selectedRowKeys ?? []);\n        },\n      }),\n      [selected, setSelected],\n    );\n\n    const publicEditProps = {\n      selected: {\n        record: focusRow ? tableData[focusRow] : {},\n        indexs: selected?.length ? selected : [Number(focusRow)],\n      },\n      style: menuStyle,\n      configs: menuConfigs,\n      onDelete,\n      onEdit,\n    };\n\n    const debounceScrollToBottom = useDebounceFn(\n      () => {\n        scrollToBottom?.();\n      },\n      {\n        wait: 100,\n      },\n    );\n    const onScroll = ({\n      scrollDirection,\n      scrollOffset,\n      scrollUpdateWasRequested,\n      height,\n    }: VirtualizedOnScrollArgs & { height: number }) => {\n      setMenuVisible(false);\n      if (\n        scrollDirection === 'forward' &&\n        scrollOffset &&\n        /**\n         * This line has no margin at all, and there may be bad cases in different browsers that cannot meet the conditions.\n         * If you encounter similar feedback, you can give priority to checking here.\n         */\n        scrollOffset + height - HEADER_SIZE >= tableData.length * ITEM_SIZE &&\n        !scrollUpdateWasRequested &&\n        debounceScrollToBottom\n      ) {\n        debounceScrollToBottom.run();\n      }\n    };\n    const getTableHeight = () => {\n      const bodyH = ITEM_SIZE * (tableData?.length || 0);\n      return bodyH + HEADER_SIZE;\n    };\n    useImperativeHandle(ref, () => ({\n      resetSelected: () => setSelected([]),\n      getTableHeight,\n    }));\n\n    useEffect(() => {\n      colWidthCacheService.initWidthMap();\n    }, []);\n    useEffect(() => {\n      setNewColumns(columnsHandler(columns));\n    }, [columns]);\n    useEffect(() => {\n      setNewColumns(columnsHandler(newColumns));\n    }, [menuConfigs.length]);\n\n    return (\n      <div className={classNames([styles['data-table-view']], className)}>\n        {tableData.length || loading ? (\n          <>\n            <TableWrapper isVirtualized={isVirtualized} onScroll={onScroll}>\n              {(tableProps?: TableProps) => (\n                <UITable\n                  key={tableKey}\n                  wrapperClassName={`${styles['table-wrapper']} ${currentThemeClassName} table-wrapper`}\n                  tableProps={{\n                    ...(tableProps || {}),\n                    ...extraTableProps,\n                    rowKey: getRowKey,\n                    resizable: resizable\n                      ? {\n                          onResize: col =>\n                            onResize ? onResize(col) : resizeFn(col),\n                          onResizeStop: col => {\n                            // Cache column width after resizing\n                            const resizedCols = newColumns.map(oCol => {\n                              if (oCol.dataIndex === col.dataIndex) {\n                                return col;\n                              }\n                              return oCol;\n                            });\n                            setNewColumns(resizedCols);\n                            const widthMap: Record<string, number> = {};\n                            resizedCols.forEach(resizedCol => {\n                              if (resizedCol.dataIndex) {\n                                widthMap[resizedCol.dataIndex] =\n                                  resizedCol.width;\n                              }\n                            });\n                            colWidthCacheService.setWidthMap(\n                              widthMap,\n                              tableKey,\n                            );\n                          },\n                        }\n                      : false,\n                    loading,\n                    rowSelection: rowSelect ? rowSelection : false,\n                    pagination: false,\n                    dataSource: tableData,\n                    columns: newColumns,\n                  }}\n                />\n              )}\n            </TableWrapper>\n\n            <EditMenu\n              {...publicEditProps}\n              visible={menuVisible}\n              onExit={() => setMenuVisible(false)}\n            />\n            <EditToolBar\n              {...publicEditProps}\n              visible={toolBarVisible}\n              onExit={() => setSelected([])}\n            />\n          </>\n        ) : null}\n        {!dataSource.length && !loading ? (\n          empty ? (\n            empty\n          ) : (\n            <EmptyStatus />\n          )\n        ) : null}\n      </div>\n    );\n  },\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport enum BotE2e {\n  BotTab = 'bot.tab',\n  BotListSearch = 'bot.list.search.input',\n  BotListCreateBtn = 'bot.list.create.btn',\n  BotListIcon = 'bot.list.icon',\n  BotListIconDel = 'bot.list.delete.icon',\n  BotListIconEdit = 'bot.list.edit.icon',\n  BotKnowledgeAutoMaticBtn = 'bot.knowledge.auto_matic.btn',\n  /** Knowledge base settings pop-up box */\n  BotKnowledgeSettingModalTitle = 'bot.knowledge.setting.modal.title.text',\n  BotKnowledgeSettingModalAutoRadio = 'bot.knowledge.setting.modal.auto.radio',\n  BotKnowledgeSettingModalManualRadio = 'bot.knowledge.setting.modal.manual.radio',\n  BotKnowledgeSettingNoRecallReplyModeDefaultRadio = 'bot.knowledge.setting.reply.mode.default.radio',\n  BotKnowledgeSettingNoRecallReplyModeCustomizePromptRadio = 'bot.knowledge.setting.reply.mode.customizeprompt.radio',\n  BotKnowledgeSettingShowSourceDisplayTitle = 'bot.knowledge.setting.show.source.display.title.text',\n  BotKnowledgeSettingShowSourceDisplaySwitch = 'bot.knowledge.setting.show.source.display.switch',\n  BotKnowledgeSettingShowSourceModeCardRadio = 'bot.knowledge.setting.show.source.mode.cardlist.radio',\n  BotKnowledgeSettingShowSourceModeTextRadio = 'bot.knowledge.setting.show.source.mode.replybottom.radio',\n  /** Select Knowledge Base List */\n  BotKnowledgeSelectListModalCreateBtn = 'bot.knowledge.select.list.modal.create.btn',\n  BotKnowledgeSelectListModalCreateDateSelect = 'bot.knowledge.select.list.modal.create.date.select',\n  BotKnowledgeSelectListModalAllTab = 'bot.knowledge.select.list.modal.all.tab',\n  BotKnowledgeSelectListModalTextTab = 'bot.knowledge.select.list.modal.text.tab',\n  BotKnowledgeSelectListModalTableTab = 'bot.knowledge.select.list.modal.table.tab',\n  BotKnowledgeSelectListModalPhotoTab = 'bot.knowledge.select.list.modal.photo.tab',\n  BotKnowledgeSelectListModalName = 'bot.knowledge.select.list.modal.name.text',\n  BotKnowledgeSelectListModalAddBtn = 'bot.knowledge.select.list.modal.add.btn',\n  /** variable */\n  BotVariableAddModalNameInput = 'bot.variable.add.modal.name.input',\n  BotVariableAddModalDefaultValueInput = 'bot.variable.add.modal.default_value.input',\n  BotVariableAddModalDescInput = 'bot.variable.add.modal.desc.input',\n  BotVariableAddModalDelBtn = 'bot.variable.add.modal.del.btn',\n  BotVariableAddModalSwitch = 'bot.variable.add.modal.switch',\n  BotVariableAddModalNameText = 'bot.variable.add.modal.name.text',\n  BotVariableAddModalDefaultValueText = 'bot.variable.add.modal.default_value.text',\n  BotVariableAddModalDescText = 'bot.variable.add.modal.desc.text',\n  BotVariableAddModalAddBtn = 'bot.variable.add.modal.add.btn',\n  BotVariableAddModalSaveBtn = 'bot.variable.add.modal.save.btn',\n  BotVariableAddModalCancelBtn = 'bot.variable.add.modal.cancel.btn',\n  /** variable-debug */\n  BotVariableDebugModalNameText = 'bot.variable.debug.modal.name.text',\n  BotVariableDebugModalValueInput = 'bot.variable.debug.modal.value.input',\n  BotVariableDebugModalEditDateText = 'bot.variable.debug.modal.edit_date.text',\n  BotVariableDebugModalNameTitleText = 'bot.variable.debug.modal.name.title.text',\n  BotVariableDebugModalValueTitleText = 'bot.variable.debug.modal.value.title.text',\n  BotVariableDebugModalEditDateTitleText = 'bot.variable.debug.modal.edit_date.title.text',\n  BotVariableDebugModalResetBtn = 'bot.variable.debug.modal.reset.btn',\n  /** Ltm-debug */\n  BotLtmDebugModalResetBtn = 'bot.ltm.debug.modal.reset.btn',\n  /** database */\n  BotDatabaseAddModalTitle = 'bot.database.add.modal.title.text',\n  BotDatabaseAddModalTitleCreateAiBtn = 'bot.database.add.modal.title.create_ai.btn',\n  BotDatabaseAddModalTitleCreateAiModalTitle = 'bot.database.add.modal.title.create_ai.modal.title.text',\n  BotDatabaseAddModalTitleCreateAiModalDesc = 'bot.database.add.modal.title.create_ai.modal.desc.input',\n  BotDatabaseAddModalTitleCreateAiModalCreateBtn = 'bot.database.add.modal.title.create_ai.modal.create.btn',\n  BotDatabaseAddModalTitleCloseIcon = 'bot.database.add.modal.title.close.icon',\n  BotDatabaseAddModalAddCustomBtn = 'bot.database.add.modal.add_custom.btn',\n  BotDatabaseAddModalTemplateTitle = 'bot.database.add.modal.template.title.text',\n  BotDatabaseAddModalUseTemplateBtn = 'bot.database.add.modal.use_template.btn',\n  BotDatabaseAddModalPreviewTemplateBtn = 'bot.database.add.modal.preview_template.btn',\n  BotDatabaseAddModalTableNameInput = 'bot.database.add.modal.table_name.input',\n  BotDatabaseAddModalTableDescInput = 'bot.database.add.modal.table_desc.input',\n  BotDatabaseAddModalTableQueryModeSelect = 'bot.database.add.modal.table_query_mode.select',\n  BotDatabaseAddModalFieldNameInput = 'bot.database.add.modal.field_name.input',\n  BotDatabaseAddModalFieldDescInput = 'bot.database.add.modal.field_desc.input',\n  BotDatabaseAddModalFieldTypeSelect = 'bot.database.add.modal.field_type.select',\n  BotDatabaseAddModalFieldRequiredSwitch = 'bot.database.add.modal.field_required.switch',\n  BotDatabaseAddModalFieldDelBtn = 'bot.database.add.modal.field_del.btn',\n  BotDatabaseAddModalAddBtn = 'bot.database.add.modal.add.btn',\n  BotDatabaseAddModalSubmitBtn = 'bot.database.add.modal.submit.btn',\n  BotDatabaseEditTableStructureBtn = 'bot.database.edit_table_structure.btn',\n  /** database-debug */\n  BotDatabaseDebugModalTableNameTab = 'bot.database.debug.modal.table_name.tab',\n  BotDatabaseDebugModalResetBtn = 'bot.database.debug.modal.reset.btn',\n  /** memory */\n  BotMemoryDebugBtn = 'bot.memory_debug.btn',\n  BotMemoryDebugDropdownItem = 'bot.memory_debug.dropdown',\n  BotMemoryDebugModalTab = 'bot.memory_debug.modal.tab',\n  // BotMemoryModalVariableTab = 'bot.memory.modal.variable.tab',\n  // BotMemoryModalDatabaseTab = 'bot.memory.modal.database.tab',\n  // BotMemoryModalLtmTab = 'bot.memory.modal.ltm.tab',\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport enum CommonE2e {\n  PictureUpload = 'common.picture.upload',\n  CommonFilePicker = 'common.file.picker',\n  CommonDataTypeSelect = 'common.data_type.select',\n  CommonTableViewTextRender = 'common.table_view.text_render',\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport enum KnowledgeE2e {\n  KnowledgeTab = 'knowledge.tab',\n  // Knowledge Base List\n  // KnowledgeSearch = 'ui.search_input',\n  KnowledgeSearchType = 'knowledge.list.search.type.select',\n  KnowledgeSearchFounder = 'knowledge.list.search.founder.select',\n  KnowledgeCreateBtn = 'knowledge.list.create.btn',\n  /** The one starting with the ui prefix is the original mark, and the list page needs to be positioned according to the index. */\n  // KnowledgeListName = 'knowledge.list.name.text',\n  // KnowledgeListIcon = 'ui.table-meta',\n  // KnowledgeListIconDel = 'ui.table-action.delete',\n  // KnowledgeListIconEdit = 'ui.table-action.edit',\n  KnowledgeListSwitch = 'knowledge.list.switch',\n  KnowledgeListAllTab = 'knowledge.list.all.tab',\n  KnowledgeListTextTab = 'knowledge.list.text.tab',\n  KnowledgeListTableTab = 'knowledge.list.table.tab',\n  KnowledgeEditModalDescInput = 'knowledge.edit.modal.desc.input',\n  KnowledgeEditModalNameInput = 'knowledge.edit.modal.name.input',\n  // Create a knowledge base popup\n  CreateKnowledgeModal = 'knowledge.create.modal',\n  CreateKnowledgeModalTitle = 'knowledge.create.modal.title.text',\n  CreateKnowledgeModalTextRadioGroup = 'knowledge.create.modal.text.RadioGroup',\n  CreateKnowledgeModalTableRadioGroup = 'knowledge.create.modal.table.RadioGroup',\n  CreateKnowledgeModalPhotoRadioGroup = 'knowledge.create.modal.photo.RadioGroup',\n  CreateKnowledgeModalNameInput = 'knowledge.create.modal.name.input',\n  CreateKnowledgeModalDescInput = 'knowledge.create.modal.desc.input',\n  CreateKnowledgeModalAvatarUploader = 'knowledge.create.modal.avatar.uploader',\n  CreateKnowledgeModalTextLocalRadio = 'knowledge.create.modal.text.local.radio',\n  CreateKnowledgeModalTextOnlineRadio = 'knowledge.create.modal.text.online.radio',\n  CreateKnowledgeModalTextNotionRadio = 'knowledge.create.modal.text.notion.radio',\n  CreateKnowledgeModalTextGoogleRadio = 'knowledge.create.modal.text.google.radio',\n  CreateKnowledgeModalTextFeishuRadio = 'knowledge.create.modal.text.feishu.radio',\n  CreateKnowledgeModalTextWechatRadio = 'knowledge.create.modal.text.wechat.radio',\n  CreateKnowledgeModalTextCustomRadio = 'knowledge.create.modal.text.custom.radio',\n  CreateKnowledgeModalTableLocalRadio = 'knowledge.create.modal.table.local.radio',\n  CreateKnowledgeModalTableApiRadio = 'knowledge.create.modal.table.api.radio',\n  CreateKnowledgeModalTableGoogleRadio = 'knowledge.create.modal.table.google.radio',\n  CreateKnowledgeModalTableFeishuRadio = 'knowledge.create.modal.table.feishu.radio',\n  CreateKnowledgeModalTableCustomRadio = 'knowledge.create.modal.table.custom.radio',\n  CreateKnowledgeModalPhotoImgRadio = 'knowledge.create.modal.photo.img.radio',\n  CreateKnowledgeModalTextLarkRadio = 'knowledge.create.modal.text.lark.radio',\n  CreateKnowledgeModalTableLarkRadio = 'knowledge.create.modal.table.lark.radio',\n  CreateKnowledgeModalSubmitAndImportButton = 'knowledge.create.modal.submit_and_import.button',\n  // Create a text type\n  CreateTextUploadNav = 'knowledge.create.text.upload.nav.text',\n  /** Create a knowledge base step bar */\n  // CreateKnowledgeStepUploadFile = 'knowledge.create.step.upload',\n  // CreateKnowledgeStepSegment = 'knowledge.create.step.segment',\n  // CreateKnowledgeStepProcess = 'knowledge.create.step.process',\n  UploadUnitFile = 'knowledge.create.upload.unit.file.upload',\n  UploadUnitNextBtn = 'knowledge.create.unit.next.btn',\n  UploadUnitUpBtn = 'knowledge.create.unit.up.btn',\n  UploadUnitAddBtn = 'knowledge.create.unit.add.btn',\n  UploadUnitCancelBtn = 'knowledge.create.unit.cancel.btn',\n  CreateUnitConfirmBtn = 'knowledge.create.unit.confirm.btn',\n  /** local upload list */\n  LocalUploadListName = 'knowledge.upload.list.name.input',\n  LocalUploadListNameView = 'knowledge.upload.list.name.text',\n  LocalUploadListStatus = 'knowledge.upload.list.status.text',\n  LocalUploadListFileSize = 'knowledge.upload.list.file_size.text',\n  LocalUploadListFrequency = 'knowledge.create.text.upload.list.frequency.text',\n  LocalUploadListDelete = 'ui.table-action.delete',\n  CreateUnitResegmentAutoRadio = 'knowledge.create.unit.resegment.auto.radio',\n  CreateUnitResegmentCustomRadio = 'knowledge.create.unit.resegment.custom.radio',\n  ResegmentCustomIdentifierSelect = 'knowledge.create.unit.resegment.custom.identifier.select',\n  ResegmentCustomMaxLenInput = 'knowledge.create.unit.resegment.custom.max_len.input',\n  ResegmentCustomRuleText = 'knowledge.create.unit.resegment.custom.rule.text',\n  CreateUnitProgressTitle = 'knowledge.create.unit.progress.title.text',\n  CreateUnitListProgressSuccessIcon = 'knowledge.create.unit.progress.success.icon',\n  CreateUnitListProgressName = 'knowledge.create.unit.progress.name.text',\n  CreateUnitListProgressPercent = 'knowledge.create.unit.progress.percent.text',\n\n  /** Create a text-online type (url) */\n  OnlineUploadAutoBtn = 'knowledge.create.text.online.auto.btn',\n  OnlineUploadManualBtn = 'knowledge.create.text.online.manual.btn',\n  OnlineUploadModal = 'knowledge.create.text.online.upload.modal',\n  OnlineUploadModalAddTypeSelect = 'knowledge.create.text.online.upload.modal.add_type.select',\n  OnlineUploadModalFrequencySelect = 'knowledge.create.text.online.upload.modal.frequency.select',\n  OnlineUploadModalExampleUrlSelect = 'knowledge.create.text.online.upload.modal.example_url.input',\n  /** Create a text-custom type */\n  CustomUploadNameInput = 'knowledge.create.custom.upload.name.input',\n  SegmentEditor = 'knowledge.segment.editor',\n  SegmentEditorInsertImgBtn = 'knowledge.segment.editor.insert_img.btn',\n  /** feishu */\n  FeishuUploadCountText = 'knowledge.create.feishu.upload.count.text',\n  FeishuUploadAccountText = 'knowledge.create.feishu.upload.account.text',\n  FeishuUploadListName = 'knowledge.create.feishu.upload.list.name.text',\n  FeishuUploadSourceSpaceMine = 'knowledge.create.feishu.upload.source.space.mine',\n  FeishuUploadSourceSpaceWiki = 'knowledge.create.feishu.upload.source.space.wiki',\n  FeishuUploadUpdateFrequencyValue = 'knowledge.create.feishu.upload.update.frequency.value',\n  FeishuUploadAppendFrequencyValue = 'knowledge.create.feishu.upload.append.frequency.value',\n  /** table-doc */\n  TableLocalTableConfigurationDataSheet = 'knowledge.create.table.local.table_configuration.data_sheet.select',\n  TableLocalTableConfigurationSheetHeader = 'knowledge.create.table.local.table_configuration.sheet_header.select',\n  TableLocalTableConfigurationStarRow = 'knowledge.create.table.local.table_configuration.star_row.select',\n  TableLocalTableConfigurationIndex = 'knowledge.create.table.local.table_configuration.index.text',\n  TableLocalTableConfigurationColumnName = 'knowledge.create.table.local.table_configuration.column_name.text',\n  TableLocalTableConfigurationDesc = 'knowledge.create.table.local.table_configuration.desc.text',\n  TableLocalTableConfigurationType = 'knowledge.create.table.local.table_configuration.type.text',\n  TableLocalTableConfigurationAction = 'knowledge.create.table.local.table_configuration.action.text',\n  TableLocalPreviewTitle = 'knowledge.create.table.local.preview.title.text',\n  TableLocalPreviewSemantic = 'knowledge.create.table.local.preview.semantic.tag',\n  TableLocalPreviewFooterTotal = 'knowledge.create.table.local.preview.footer.total.text',\n  TableLocalTableStructureTitle = 'knowledge.create.table.local.table_structure.title.text',\n  /** table-api */\n  TableApiAddUrlModalWebInput = 'knowledge.create.table.api.modal.web.input',\n  TableApiAddUrlModalFrequency = 'knowledge.create.table.api.modal.frequency.select',\n  /** table-custom */\n  TableCustomUAddFieldBtn = 'knowledge.create.table.custom.add_field.btn',\n  TableStructureIndexCheckbox = 'knowledge.create.table.table_structure.index.checkbox',\n\n  /** image */\n  ImageAnnotationAiRadio = 'knowledge.create.image.annotation.ai.radio',\n  ImageAnnotationManualRadio = 'knowledge.create.image.annotation.manual.radio',\n  ImageAnnotationAllTab = 'knowledge.create.image.annotation.all.tab',\n  ImageAnnotationUnAnnotationTab = 'knowledge.create.image.annotation.un_annotation.tab',\n  ImageAnnotationAnnotationedTab = 'knowledge.create.image.annotation.annotationed.tab',\n  /** increment */\n  IncrementTableUploadStructureTitle = 'knowledge.increment.table.upload.structure_title.text',\n  IncrementTableUploadStructureColumnName = 'knowledge.increment.table.upload.structure_column_name.input',\n  IncrementTableUploadStructureAddBtn = 'knowledge.increment.table.upload.structure_add.btn',\n\n  // CreateKnowledgeModalCancelBtn = 'knowledge.create.modal.cancel.btn',\n  // CreateKnowledgeModalNextBtn = 'knowledge.create.modal.next.btn',\n  /** Segment details page */\n  SegmentDetailUpdateBtn = 'knowledge.segment.detail.update.btn',\n  SegmentDetailTitle = 'knowledge.segment.detail.title.text',\n  SegmentDetailTitleEditIcon = 'knowledge.segment.detail.title.edit.icon',\n  SegmentDetailResetBtn = 'knowledge.segment.detail.reset.btn',\n  SegmentDetailAddBtn = 'knowledge.segment.detail.add.btn',\n  SegmentDetailSystemBtn = 'knowledge.segment.detail.system.btn',\n  SegmentDetailSystemDropdownMenu = 'knowledge.segment.detail.system.dropdown_menu',\n  SegmentDetailSystemWebUrlDropdownMenu = 'knowledge.segment.detail.system.web_url.dropdown_menu',\n  SegmentDetailTableConfigBtn = 'knowledge.segment.detail.table_config.btn',\n  SegmentDetailDropdownItem = 'knowledge.segment.detail.dropdown.item',\n  SegmentDetailLocalFileItem = 'knowledge.segment.detail.dropdown.item.text_doc',\n  SegmentDetailContentItemEditIcon = 'knowledge.segment.detail.content.edit.icon',\n  SegmentDetailContentItemFrequencyIcon = 'knowledge.segment.detail.content.frequency.icon',\n  SegmentDetailContentItemAddTopIcon = 'knowledge.segment.detail.content.add_top.icon',\n\n  SegmentDetailContentItemAddBottomIcon = 'knowledge.segment.detail.content.add_bottom.icon',\n  SegmentDetailContentItemFetchSliceIcon = 'knowledge.segment.detail.content.fetch_slice.icon',\n  SegmentDetailContentItemFetchSliceModalSaveBtn = 'knowledge.segment.detail.content.fetch_slice.modal.save.btn',\n  SegmentDetailContentItemWebUrlIcon = 'knowledge.segment.detail.content.web_url.icon',\n  SegmentDetailContentDeleteIcon = 'knowledge.segment.detail.content.delete.icon',\n  SegmentDetailContentAddRowBtn = 'knowledge.segment.detail.content.add_row.btn',\n  SegmentDetailContentSelectTrigger = 'knowledge.segment.detail.content.select.trigger',\n  SegmentDetailContentSelectTriggerEditIcon = 'knowledge.segment.detail.content.select.trigger.edit.icon',\n  // SegmentDetailContentDeleteSliceModalDeleteBtn = 'knowledge.segment.detail.content.delete_slice.modal.delete.btn',\n  // SegmentDetailContentDeleteSliceModalCancelBtn = 'knowledge.segment.detail.content.delete_slice.modal.cancel.btn',\n  SegmentDetailBatchFrequencyModalSelect = 'knowledge.segment.detail.batch_frequency.modal.select',\n  SegmentDetailBatchFrequencyModalcheckboxAll = 'knowledge.segment.detail.batch_frequency.modal.checkbox_all',\n  SegmentDetailBatchFrequencyModalcheckboxItem = 'knowledge.segment.detail.batch_frequency.modal.checkbox_item',\n  /** Segment details page Re-segment process page */\n  ResegmentUploadUnitNextBtn = 'knowledge.resegment.unit.next.btn',\n  ResegmentUnitConfirmBtn = 'knowledge.resegment.unit.confirm.btn',\n  /** Common knowledge */\n  UnitDetailTags = 'knowledge.unit.detail.tags',\n  UnitDetailTagsProcessing = 'knowledge.unit.detail.tags.processing.tag',\n  UnitDetailTagsFailed = 'knowledge.unit.detail.tags.failed.tag',\n  KnowledgeAddContentNavBar = 'knowledge.unit.add.content.navbar',\n}\n/** underlying components */\nexport const UIE2E = [\n  'ui.select.option',\n  'ui.table-action.delete',\n  'ui.table-action.edit',\n  'ui.table-meta',\n  'ui.search_input',\n];\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport enum DataNamespace {\n  KNOWLEDGE = 'knowledge',\n  DATABASE = 'database',\n  FILEBOX = 'filebox',\n  VARIABLE = 'variable',\n  TIMECAPSULE = 'timeCapsule',\n  MEMORY = 'memory',\n}\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { type FC, type PropsWithChildren } from 'react';\n\nimport { logger, ErrorBoundary } from '@coze-arch/logger';\nimport { I18n } from '@coze-arch/i18n';\nimport { IllustrationNoAccess } from '@douyinfe/semi-illustrations';\n\nimport { type DataNamespace } from '../../constants';\n\nimport s from './index.module.less';\n\ninterface FallbackComponentProps {\n  namespace: DataNamespace;\n}\nexport const ErrorFallbackComponent: FC<FallbackComponentProps> = ({\n  namespace,\n}) => (\n  <div className={s.wrapper}>\n    <div className={s.content}>\n      <IllustrationNoAccess width={140} height={140} />\n      <div className={s.title}>\n        {I18n.t('data_error_title', { module: namespace })}\n      </div>\n      <div className={s.paragraph}>{I18n.t('data_error_msg')}</div>\n    </div>\n  </div>\n);\n\nexport interface DataErrorBoundaryProps {\n  namespace: DataNamespace;\n}\nexport const DataErrorBoundary: FC<\n  PropsWithChildren<DataErrorBoundaryProps>\n> = ({ children, namespace }) => (\n  <ErrorBoundary\n    onError={error => {\n      logger.persist.error({\n        eventName: `${namespace}_error_boundary`,\n        error,\n      });\n    }}\n    errorBoundaryName={`${namespace}-error-boundary`}\n    FallbackComponent={() => <ErrorFallbackComponent namespace={namespace} />}\n  >\n    {children}\n  </ErrorBoundary>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { reporter, type CustomEvent, type ErrorEvent } from '@coze-arch/logger';\n\nimport { type DataNamespace } from '../constants';\nexport const reporterFun = <EventEnum extends string>(\n  params: {\n    namespace: DataNamespace;\n    meta: { [key: string]: unknown };\n  } & (\n    | {\n        type: 'error';\n        event: ErrorEvent<EventEnum>;\n      }\n    | {\n        type: 'custom';\n        event: CustomEvent<EventEnum>;\n      }\n  ),\n) => {\n  const { type, namespace, event, meta } = params;\n  const { meta: inputMeta, ...rest } = event;\n  const eventParams = {\n    namespace,\n    meta: {\n      ...meta,\n      ...inputMeta,\n    },\n    ...rest,\n  };\n\n  if (type === 'error') {\n    reporter.errorEvent(eventParams as ErrorEvent<EventEnum>);\n  } else {\n    reporter.event(eventParams);\n  }\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { get } from 'lodash-es';\nimport type { ErrorEvent, CustomEvent } from '@coze-arch/logger';\n\nimport { type DataNamespace } from '../constants';\nimport { reporterFun } from './utils';\n\nenum ParamsIndex {\n  SPACE_ID = 1,\n  KNOWLEDGE_ID = 3,\n  DOCUMENT_ID = 5,\n}\n\n/**\n * Distinguished from use-data-reporter\n * Use-data-reporter for component scenarios\n * Data-reporter for ts/js scenarios\n */\nclass DataReporter {\n  /**\n   * Access to public meta information\n   */\n  getMeta() {\n    const pathName = window.location.pathname;\n    const reg = /\\/space\\/(\\d+)\\/knowledge(\\/(\\d+)(\\/(\\d+))?)?/gi;\n    const regRes = reg.exec(pathName);\n    const meta = {\n      spaceId: get(regRes, ParamsIndex.SPACE_ID),\n      knowledgeId: get(regRes, ParamsIndex.KNOWLEDGE_ID),\n      documentId: get(regRes, ParamsIndex.DOCUMENT_ID),\n    };\n\n    return meta;\n  }\n\n  /**\n   * Error event reporting\n   * @param namespace\n   * @param event\n   */\n  errorEvent<EventEnum extends string>(\n    namespace: DataNamespace,\n    event: ErrorEvent<EventEnum>,\n  ) {\n    const meta = this.getMeta();\n    reporterFun({ type: 'error', namespace, event, meta });\n  }\n\n  /**\n   * Customs event report\n   * @param namespace\n   * @param event\n   */\n  event<EventEnum extends string>(\n    namespace: DataNamespace,\n    event: CustomEvent<EventEnum>,\n  ) {\n    const meta = this.getMeta();\n    reporterFun({ type: 'custom', namespace, event, meta });\n  }\n}\n\nexport const dataReporter = new DataReporter();\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport enum FilterKnowledgeType {\n  ALL = 'ALL',\n  TEXT = 'TEXT',\n  TABLE = 'TABLE',\n  IMAGE = 'IMAGE',\n}\n\nexport enum DocumentUpdateInterval {\n  NotUpdate = 0,\n  EveryDay = 1,\n  ThreeDay = 3,\n  SevenDay = 7,\n  ThirtyDay = 30,\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { UnitType } from '@coze-data/knowledge-resource-processor-core';\nimport { FormatType } from '@coze-arch/bot-api/knowledge';\n\nexport const getFormatTypeFromUnitType = (type: UnitType) => {\n  switch (type) {\n    case UnitType.TABLE:\n    case UnitType.TABLE_API:\n    case UnitType.TABLE_DOC:\n    case UnitType.TABLE_CUSTOM:\n    case UnitType.TABLE_FEISHU:\n    case UnitType.TABLE_GOOGLE_DRIVE:\n      return FormatType.Table;\n    case UnitType.IMAGE:\n    case UnitType.IMAGE_FILE:\n      return FormatType.Image;\n    default:\n      return FormatType.Text;\n  }\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DataSourceType } from '@coze-arch/bot-api/memory';\nimport { DocumentSource } from '@coze-arch/bot-api/knowledge';\nimport { UnitType } from '@coze-data/knowledge-resource-processor-core';\n\nexport const isFeishuOrLarkDocumentSource = (\n  source: DocumentSource | undefined,\n) => source === DocumentSource.FeishuWeb || source === DocumentSource.LarkWeb;\n\nexport const isFeishuOrLarkDataSourceType = (\n  source: DataSourceType | undefined,\n) => source === DataSourceType.FeishuWeb || source === DataSourceType.LarkWeb;\n\nexport const isFeishuOrLarkTextUnit = (unitType: UnitType | undefined) =>\n  unitType === UnitType.TEXT_FEISHU || unitType === UnitType.TEXT_LARK;\n\nexport const isFeishuOrLarkTableUnit = (unitType: UnitType | undefined) =>\n  unitType === UnitType.TABLE_FEISHU || unitType === UnitType.TABLE_LARK;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { I18n } from '@coze-arch/i18n';\nimport { FormatType } from '@coze-arch/bot-api/memory';\nimport { type DocumentSource } from '@coze-arch/bot-api/knowledge';\n\nimport { isFeishuOrLarkDocumentSource } from './feishu-lark';\n\n/**\n * FIXME: Due to backend limitations, the front end needs to remove the 30-day update frequency on the Feishu/Lark path, which can be removed after the subsequent backend is resolved.\n */\nexport const getUpdateIntervalOptions = (\n  params: {\n    documentSource?: DocumentSource;\n  } = {},\n) => {\n  const { documentSource } = params;\n  return [\n    {\n      value: 0,\n      label: I18n.t('datasets_frequencyModal_frequency_noUpdate'),\n    },\n    {\n      value: 1,\n      label: I18n.t('datasets_frequencyModal_frequency_day', {\n        num: 1,\n      }),\n    },\n    {\n      value: 3,\n      label: I18n.t('datasets_frequencyModal_frequency_day', {\n        num: 3,\n      }),\n    },\n    {\n      value: 7,\n      label: I18n.t('datasets_frequencyModal_frequency_day', {\n        num: 7,\n      }),\n    },\n    ...(isFeishuOrLarkDocumentSource(documentSource)\n      ? []\n      : [\n          {\n            value: 30,\n            label: I18n.t('datasets_frequencyModal_frequency_day', {\n              num: 30,\n            }),\n          },\n        ]),\n  ];\n};\n\nexport const getAppendUpdateIntervalOptions = () => [\n  {\n    value: 0,\n    label: I18n.t('knowledge_weixin_015'),\n  },\n  {\n    value: 1,\n    label: I18n.t('knowledge_weixin_016'),\n  },\n  {\n    value: 3,\n    label: I18n.t('knowledge_weixin_017'),\n  },\n  {\n    value: 7,\n    label: I18n.t('knowledge_weixin_018'),\n  },\n];\n\n// Table type Temporarily disables the update type of additional updates, and drops the distinction logic after subsequent support\nexport const getUpdateTypeOptions = (type: FormatType) => [\n  {\n    value: 1,\n    label: I18n.t('datasets_frequencyModal_whenUpdate_overwrite'),\n  },\n  {\n    value: 2,\n    disabled: type === FormatType.Table,\n    label: I18n.t('datasets_frequencyModal_whenUpdate_overwrite_keep'),\n  },\n];\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport cs from 'classnames';\nimport { useReactive } from 'ahooks';\nimport { Select, type SelectProps } from '@coze-arch/coze-design';\nimport type { InputProps } from '@coze-arch/bot-semi/Input';\nimport { CommonE2e } from '@coze-data/e2e';\n\nimport s from './index.module.less';\n\nexport interface SLSelectRefType {\n  triggerFocus?: () => void;\n}\n\nexport type SinglelineSelectProps = InputProps & {\n  value: SelectProps['value'];\n  handleChange?: (v: SelectProps['value']) => void;\n  errorMsg?: string;\n  selectProps?: SelectProps;\n};\n\nexport const SinglelineSelect: React.FC<SinglelineSelectProps> = props => {\n  const $state = useReactive({\n    value: props.value,\n  });\n\n  return (\n    <div\n      data-testid={CommonE2e.CommonDataTypeSelect}\n      className={cs(\n        s['select-wapper'],\n        props?.errorMsg ? s['error-wapper'] : null,\n      )}\n    >\n      <Select\n        {...props.selectProps}\n        style={{ width: '100%' }}\n        clickToHide={true}\n        value={$state.value}\n        onChange={v => {\n          ($state.value as SelectProps['value']) = v;\n          props?.handleChange?.(v);\n        }}\n      />\n      {props?.errorMsg ? (\n        <div className=\"singleline-select-error-content\">\n          <div className=\"select-error-text\">{props?.errorMsg}</div>\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nexport default SinglelineSelect;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState } from 'react';\n\nimport { I18n } from '@coze-arch/i18n';\nimport { ColumnType } from '@coze-arch/bot-api/knowledge';\n\nimport SinglelineSelect, {\n  type SinglelineSelectProps,\n} from '../singleline-select';\n\nexport const getDataTypeText = (value: ColumnType) => {\n  const dataTypes = {\n    [ColumnType.Unknown]: 'Unknown',\n    [ColumnType.Text]: I18n.t('db_add_table_field_type_txt'),\n    [ColumnType.Number]: I18n.t('db_add_table_field_type_int'),\n    [ColumnType.Date]: I18n.t('db_add_table_field_type_time'),\n    [ColumnType.Float]: I18n.t('db_add_table_field_type_number'),\n    [ColumnType.Boolean]: I18n.t('db_add_table_field_type_bool'),\n    [ColumnType.Image]: I18n.t('knowledge_insert_img_010'),\n  };\n  return dataTypes[value] || '';\n};\nexport const getDataTypeOptions = () => [\n  { value: ColumnType.Text, label: getDataTypeText(ColumnType.Text) },\n  { value: ColumnType.Number, label: getDataTypeText(ColumnType.Number) },\n  { value: ColumnType.Date, label: getDataTypeText(ColumnType.Date) },\n  { value: ColumnType.Float, label: getDataTypeText(ColumnType.Float) },\n  { value: ColumnType.Boolean, label: getDataTypeText(ColumnType.Boolean) },\n  { value: ColumnType.Image, label: getDataTypeText(ColumnType.Image) },\n];\n\nexport const DataTypeSelect = (props: SinglelineSelectProps) => {\n  const [selectValue, setSelectValue] = useState<\n    SinglelineSelectProps['value']\n  >(props.value);\n  return (\n    <SinglelineSelect\n      value={selectValue}\n      selectProps={{\n        ...props.selectProps,\n        optionList: props.selectProps?.optionList || getDataTypeOptions(),\n      }}\n      errorMsg={props.errorMsg}\n      handleChange={v => {\n        setSelectValue(v as SinglelineSelectProps['value']);\n        props.handleChange?.(v);\n      }}\n    />\n  );\n};\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useMemo } from 'react';\n\nimport { Input, type InputProps, withField } from '@coze-arch/coze-design';\nimport 'utility-types';\n\nimport s from './index.module.less';\n\ninterface LimitCountProps {\n  maxLen: number;\n  len: number;\n}\n\nconst LimitCount: React.FC<LimitCountProps> = ({ maxLen, len }) => (\n  <span className={s['limit-count']}>\n    <span>{len}</span>\n    <span>/</span>\n    <span>{maxLen}</span>\n  </span>\n);\n\nexport interface InputWithCountProps extends InputProps {\n  // Set word limits and display word count\n  getValueLength?: (value?: InputProps['value'] | string) => number;\n}\n\nexport const InputWithCount: React.FC<InputWithCountProps> = props => {\n  const { value, maxLength, getValueLength } = props;\n\n  const len = useMemo(() => {\n    if (getValueLength) {\n      return getValueLength(value);\n    } else if (value) {\n      return value.toString().length;\n    } else {\n      return 0;\n    }\n  }, [value, getValueLength]);\n\n  return (\n    <Input\n      {...props}\n      autoComplete=\"off\"\n      suffix={\n        Boolean(maxLength) && <LimitCount maxLen={maxLength ?? 0} len={len} />\n      }\n    />\n  );\n};\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const CozeInputWithCountField: any = withField(InputWithCount);\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { forwardRef } from 'react';\n\nimport cs from 'classnames';\nimport { TextArea, withField } from '@coze-arch/coze-design';\n\nimport s from './index.module.less';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst TextAreaInner: any = withField(TextArea, {});\nexport const CozeFormTextArea: typeof TextAreaInner = forwardRef(\n  // @ts-expect-error -- to fix\n  ({ fieldClassName, ...props }, ref) => (\n    <TextAreaInner\n      ref={ref}\n      {...props}\n      fieldClassName={cs(fieldClassName, s.field)}\n    />\n  ),\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useRef, useEffect } from 'react';\n\nexport function useUnmountSignal() {\n  const controllerRef = useRef<AbortController | null>(null);\n\n  if (controllerRef.current === null) {\n    controllerRef.current = new AbortController();\n  }\n\n  useEffect(\n    () => () => {\n      if (controllerRef.current) {\n        controllerRef.current.abort();\n      }\n    },\n    [],\n  );\n\n  return controllerRef.current.signal;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any -- must be any\nexport function abortable<T extends (...args: any[]) => any | Promise<any>>(\n  func: T,\n  abortSignal: AbortSignal,\n): (...args: Parameters<T>) => Promise<Awaited<ReturnType<T>>> {\n  return async (...args) => {\n    try {\n      if (abortSignal.aborted) {\n        throw new Error('Function aborted');\n      }\n\n      const result = func(...args);\n\n      if (result instanceof Promise) {\n        return await Promise.race([\n          result,\n          new Promise((_, reject) => {\n            abortSignal.addEventListener(\n              'abort',\n              () => reject(new Error('Function aborted')),\n              { once: true },\n            );\n          }),\n        ]);\n      }\n\n      return result;\n    } catch (e) {\n      console.log(e);\n    }\n  };\n}\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState } from 'react';\n\nimport cls from 'classnames';\n// import { type ModalHeight } from '@coze-arch/coze-design/types';\n// import { type ButtonColor } from '@coze-arch/coze-design/types';\nimport {\n  // type ButtonProps,\n  Modal,\n  type ModalProps,\n} from '@coze-arch/coze-design';\nimport { type UseModalReturnValue } from '@coze-arch/bot-semi/src/components/ui-modal';\nimport { type UseModalParams, useModal } from '@coze-arch/bot-semi';\n\nimport styles from './index.module.less';\nexport const useDataModal = (params: UseModalParams): UseModalReturnValue => {\n  const { className, ...props } = params;\n  const modal = useModal({\n    ...props,\n    className: cls(styles['ui-data-modal'], className),\n  });\n\n  return modal;\n};\n\nexport type UseModalParamsCoze = Omit<ModalProps, 'visible'> & {\n  hideOkButton?: boolean;\n  hideCancelButton?: boolean;\n  showCloseIcon?: boolean;\n  hideContent?: boolean;\n  showScrollBar?: boolean;\n  // okButtonColor?: ButtonColor;\n};\n\nexport const useDataModalWithCoze = ({\n  // type = 'info',\n  centered = true,\n  // height = 'fit-content',\n  ...params\n}: UseModalParamsCoze): UseModalReturnValue & {\n  canOk: boolean;\n  enableOk: () => void;\n  disableOk: () => void;\n} => {\n  const [visible, setVisible] = useState(false);\n  const [disableOk, setDisableOk] = useState(false);\n\n  return {\n    modal: inner => (\n      <Modal\n        closeOnEsc\n        centered={Boolean(centered)}\n        // height={height as ModalHeight}\n        visible={visible}\n        okButtonProps={{\n          disabled: disableOk,\n        }}\n        {...(params as unknown as ModalProps)}\n      >\n        {inner}\n      </Modal>\n    ),\n    open: () => setVisible(true),\n    close: () => setVisible(false),\n    visible,\n    disableOk: () => setDisableOk(true),\n    enableOk: () => setDisableOk(false),\n    canOk: !disableOk,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\n\nconst defaultState = {\n  processingDatasets: new Set<string>(),\n};\n\nexport interface ProcessingKnowledgeInfo {\n  processingDatasets: Set<string>;\n}\n\nexport interface ProcessingKnowledgeInfoAction {\n  getIsProcessing: (datasetId: string) => boolean;\n  addProcessingDataset: (datasetId: string) => void;\n  clearProcessingSet: () => void;\n  deleteProcessingDataset: (datasetId: string) => void;\n}\n\nexport const createProcessingKnowledgeStore = () =>\n  create<ProcessingKnowledgeInfo & ProcessingKnowledgeInfoAction>()(\n    devtools((set, get) => ({\n      ...defaultState,\n      getIsProcessing: (datasetId: string) => {\n        const { processingDatasets } = get();\n        return processingDatasets.has(datasetId);\n      },\n      addProcessingDataset: (datasetId: string) => {\n        const { processingDatasets } = get();\n        processingDatasets.add(datasetId);\n        set({\n          processingDatasets,\n        });\n      },\n      clearProcessingSet: () => {\n        const { processingDatasets } = get();\n        processingDatasets.clear();\n        set({\n          processingDatasets,\n        });\n      },\n      deleteProcessingDataset: (datasetId: string) => {\n        const { processingDatasets } = get();\n        if (!processingDatasets.has(datasetId)) {\n          return;\n        }\n        processingDatasets.delete(datasetId);\n        set({\n          processingDatasets,\n        });\n      },\n    })),\n  );\n\nexport type ProcessingKnowledgeStore = ReturnType<\n  typeof createProcessingKnowledgeStore\n>;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools, subscribeWithSelector } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport {\n  type UnitType,\n  type OptType,\n} from '@coze-data/knowledge-resource-processor-core';\n\nexport enum ActionType {\n  ADD = 'add',\n  REMOVE = 'remove',\n}\nexport interface IParams {\n  version?: string;\n\n  projectID?: string;\n  datasetID?: string;\n  spaceID?: string;\n  tableID?: string;\n\n  type?: UnitType;\n  opt?: OptType;\n  docID?: string;\n\n  biz: 'agentIDE' | 'workflow' | 'project' | 'library';\n  botID?: string;\n  workflowID?: string;\n  agentID?: string;\n  actionType?: ActionType;\n  initialTab?: 'structure' | 'draft' | 'online';\n  /** The function is to bring the Douyin mark in the url when jumping to the upload page to distinguish the views on the upload page */\n  isDouyinBot?: boolean;\n  pageMode?: 'modal' | 'normal';\n\n  first_auto_open_edit_document_id?: string;\n  create?: string;\n}\n\nexport interface IParamsStore {\n  params: IParams;\n}\n\nexport const createParamsStore = (initialState: IParams) =>\n  create<IParamsStore>()(\n    devtools(\n      subscribeWithSelector((set, get) => ({\n        params: initialState,\n        //TODO: get\n      })),\n      {\n        enabled: IS_DEV_MODE,\n        name: 'knowledge.params',\n      },\n    ),\n  );\n\nexport type ParamsStore = ReturnType<typeof createParamsStore>;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { type DocumentInfo, type Dataset } from '@coze-arch/bot-api/knowledge';\n\nimport {\n  createLevelSegmentsSlice,\n  getDefaultLevelSegmentsState,\n  type ILevelSegmentsSlice,\n} from './level-segments-slice';\n\nexport enum FilterPhotoType {\n  /**\n   * all\n   */\n  All = 'All',\n  /**\n   * marked\n   */\n  HasCaption = 'HasCaption',\n  /**\n   * unmarked\n   */\n  NoCaption = 'NoCaption',\n}\n\nexport interface KnowledgePreviewState {\n  canEdit?: boolean;\n  dataSetDetail: Dataset;\n  documentList: DocumentInfo[];\n  searchValue: string;\n  curDocId: string;\n  /**\n   * Is the image type marked?\n   */\n  photoFilterValue: FilterPhotoType;\n}\nexport interface KnowledgePreviewAction {\n  setCanEdit: (editable: boolean) => void;\n  setDataSetDetail: (dataSet: Dataset) => void;\n  setDocumentList: (documentList: DocumentInfo[]) => void;\n  setSearchValue: (v: string) => void;\n  setPhotoFilterValue: (v: FilterPhotoType) => void;\n  setCurDocId: (curDocId: string) => void;\n}\n\nconst getInitialState = (options?: { version?: string }) => ({\n  canEdit: !options?.version,\n  dataSetDetail: {},\n  documentList: [],\n  curDocId: '',\n  searchValue: '',\n  photoFilterValue: FilterPhotoType.All,\n});\n\nexport const createKnowledgePreviewStore = (options?: { version?: string }) =>\n  create<\n    KnowledgePreviewState & KnowledgePreviewAction & ILevelSegmentsSlice\n  >()(\n    devtools(\n      (set, get, ...args) => ({\n        ...getInitialState(options),\n        ...getDefaultLevelSegmentsState(),\n        ...createLevelSegmentsSlice(set, get, ...args),\n        setDataSetDetail: (dataSetDetail: Dataset) => {\n          set({ dataSetDetail });\n          set({ canEdit: dataSetDetail?.can_edit && !options?.version });\n        },\n        setDocumentList: (documentList: DocumentInfo[]) => {\n          set({ documentList });\n        },\n        setSearchValue: (v: string) => {\n          set({ searchValue: v });\n        },\n        setPhotoFilterValue: (v: FilterPhotoType) => {\n          set({ photoFilterValue: v });\n        },\n        setCanEdit: editable => {\n          set({ canEdit: editable });\n        },\n        setCurDocId: (curDocId: string) => {\n          set({ curDocId });\n        },\n        reset: () => {\n          set(getInitialState(options));\n        },\n      }),\n      { name: 'DEV_TOOLS_NAME_SPACE', enabled: IS_DEV_MODE },\n    ),\n  );\n\nexport type KnowledgePreviewStore = ReturnType<\n  typeof createKnowledgePreviewStore\n>;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext, type PropsWithChildren, type FC, useRef } from 'react';\n\nimport {\n  type ProcessingKnowledgeStore,\n  createProcessingKnowledgeStore,\n} from './processing-knowledge';\nimport {\n  type IParams,\n  type ParamsStore,\n  createParamsStore,\n} from './params-store';\nimport {\n  type KnowledgePreviewStore,\n  createKnowledgePreviewStore,\n} from './knowledge-preview';\n\nexport type WidgetUIState = 'loading' | 'saving' | 'error' | 'normal';\n\nexport interface PluginNavType {\n  toResource?: (\n    res: string,\n    resID?: string,\n    query?: Record<string, string>,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    options?: Record<string, any>,\n  ) => void;\n  // submodule\n  upload?: (\n    query?: Record<string, string>,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    options?: Record<string, any>,\n  ) => void;\n  navigateTo?: (\n    path: string,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    options?: Record<string, any>,\n  ) => void;\n}\n\nexport interface CallbacksType {\n  onUpdateDisplayName?: (displayName: string) => void;\n  onStatusChange?: (status: WidgetUIState) => void;\n}\n\ninterface TParamsStoreContext {\n  paramsStore: ParamsStore | undefined;\n  knowledgeStore: KnowledgePreviewStore | undefined;\n  processingKnowledge: ProcessingKnowledgeStore | undefined;\n  callbacks: CallbacksType;\n  resourceNavigate: PluginNavType;\n}\n\nexport const KnowledgeParamsStoreContext = createContext<TParamsStoreContext>({\n  paramsStore: undefined,\n  knowledgeStore: undefined,\n  processingKnowledge: undefined,\n  callbacks: {},\n  resourceNavigate: {},\n});\n\nexport const KnowledgeParamsStoreProvider: FC<\n  PropsWithChildren<{\n    params: IParams;\n    onUpdateDisplayName?: (displayName: string) => void;\n    onStatusChange?: (status: WidgetUIState) => void;\n    resourceNavigate: PluginNavType;\n  }>\n> = ({\n  children,\n  params,\n  onUpdateDisplayName,\n  onStatusChange,\n  resourceNavigate,\n}) => {\n  const paramsStoreRef = useRef<ParamsStore>();\n  const knowledgeStoreRef = useRef<KnowledgePreviewStore>();\n  const processingStoreRef = useRef<ProcessingKnowledgeStore>();\n\n  paramsStoreRef.current = createParamsStore(params);\n\n  if (!knowledgeStoreRef.current) {\n    knowledgeStoreRef.current = createKnowledgePreviewStore({\n      version: params.version,\n    });\n  }\n  if (!processingStoreRef.current) {\n    processingStoreRef.current = createProcessingKnowledgeStore();\n  }\n\n  return (\n    <KnowledgeParamsStoreContext.Provider\n      value={{\n        paramsStore: paramsStoreRef.current,\n        knowledgeStore: knowledgeStoreRef.current,\n        processingKnowledge: processingStoreRef.current,\n        callbacks: { onUpdateDisplayName, onStatusChange },\n        resourceNavigate,\n      }}\n    >\n      {children}\n    </KnowledgeParamsStoreContext.Provider>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useContext } from 'react';\n\nimport { useStoreWithEqualityFn } from 'zustand/traditional';\nimport { shallow } from 'zustand/shallow';\nimport { REPORT_EVENTS } from '@coze-arch/report-events';\nimport { CustomError } from '@coze-arch/bot-error';\n\nimport {\n  type ProcessingKnowledgeInfo,\n  type ProcessingKnowledgeInfoAction,\n} from './processing-knowledge';\nimport { type IParamsStore } from './params-store';\nimport { type ILevelSegmentsSlice } from './level-segments-slice';\nimport {\n  type KnowledgePreviewAction,\n  type KnowledgePreviewState,\n} from './knowledge-preview';\nimport {\n  type CallbacksType,\n  type PluginNavType,\n  KnowledgeParamsStoreContext,\n} from './context';\n\nexport const useKnowledgeParamsStore: <T>(\n  selector: (store: IParamsStore) => T,\n) => T = selector => {\n  const context = useContext(KnowledgeParamsStoreContext);\n\n  if (!context.paramsStore) {\n    throw new CustomError(REPORT_EVENTS.normalError, 'params store context');\n  }\n\n  return useStoreWithEqualityFn(context.paramsStore, selector, shallow);\n};\n\nexport const useKnowledgeParams = () => {\n  const params = useKnowledgeParamsStore(store => store.params);\n  return params;\n};\n\nexport const useDataCallbacks: () => CallbacksType = () => {\n  const {\n    callbacks: { onStatusChange, onUpdateDisplayName },\n  } = useContext(KnowledgeParamsStoreContext);\n\n  return { onStatusChange, onUpdateDisplayName };\n};\n\nexport const useDataNavigate: () => PluginNavType = () => {\n  const { resourceNavigate } = useContext(KnowledgeParamsStoreContext);\n\n  return resourceNavigate;\n};\n\nexport const useKnowledgeStore: <T>(\n  selector: (\n    store: KnowledgePreviewState & KnowledgePreviewAction & ILevelSegmentsSlice,\n  ) => T,\n) => T = selector => {\n  const context = useContext(KnowledgeParamsStoreContext);\n\n  if (!context.knowledgeStore) {\n    throw new CustomError(REPORT_EVENTS.normalError, 'params store context');\n  }\n\n  return useStoreWithEqualityFn(context.knowledgeStore, selector, shallow);\n};\n\nexport const useProcessingStore: <T>(\n  selector: (\n    store: ProcessingKnowledgeInfo & ProcessingKnowledgeInfoAction,\n  ) => T,\n) => T = selector => {\n  const context = useContext(KnowledgeParamsStoreContext);\n\n  if (!context.processingKnowledge) {\n    throw new CustomError(REPORT_EVENTS.normalError, 'params store context');\n  }\n\n  return useStoreWithEqualityFn(context.processingKnowledge, selector, shallow);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type StateCreator } from 'zustand';\nimport {\n  type OpenSearchConfig,\n  StorageLocation,\n} from '@coze-arch/bot-api/knowledge';\n\nexport interface IStorageStrategyState {\n  enableStorageStrategy: boolean;\n  storageLocation: StorageLocation;\n  openSearchConfig: OpenSearchConfig;\n  testConnectionSuccess: boolean;\n}\n\nexport interface IStorageStrategyAction {\n  setEnableStorageStrategy: (enableStorageStrategy: boolean) => void;\n  setStorageLocation: (storageLocation: StorageLocation) => void;\n  setOpenSearchConfig: (openSearchConfig: OpenSearchConfig) => void;\n  setTestConnectionSuccess: (testConnectionSuccess: boolean) => void;\n}\n\nexport type IStorageStrategySlice = IStorageStrategyState &\n  IStorageStrategyAction;\n\nexport const getDefaultStorageStrategyState = (): IStorageStrategyState => ({\n  enableStorageStrategy: false,\n  storageLocation: StorageLocation.Default,\n  openSearchConfig: {},\n  testConnectionSuccess: false,\n});\n\nexport const createStorageStrategySlice: StateCreator<\n  IStorageStrategySlice\n> = set => ({\n  ...getDefaultStorageStrategyState(),\n  setEnableStorageStrategy: (enableStorageStrategy: boolean) =>\n    set({ enableStorageStrategy }),\n  setStorageLocation: (storageLocation: StorageLocation) =>\n    set({ storageLocation }),\n  setOpenSearchConfig: (openSearchConfig: OpenSearchConfig) =>\n    set({ openSearchConfig }),\n  setTestConnectionSuccess: (testConnectionSuccess: boolean) =>\n    set({ testConnectionSuccess }),\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type StateCreator } from 'zustand';\n\nexport interface ITableDetail {\n  tableIdx: number | null;\n  tableName: string | null;\n  caption: string | null;\n  text: string | null;\n  cells: string | null;\n}\n\nexport interface IImageDetail {\n  base64: string | null;\n  caption: string | null;\n  links: string | null;\n  token: string | null;\n  name: string | null;\n}\n\nexport interface ILevelSegment {\n  id: number;\n  block_id: number | null;\n  slide_index: number | null;\n  slice_id?: string;\n  slice_sequence?: number;\n  type:\n    | 'title'\n    | 'section-title'\n    | 'section-text'\n    | 'text'\n    | 'image'\n    | 'table'\n    | 'caption'\n    | 'header-footer'\n    | 'header'\n    | 'footer'\n    | 'formula'\n    | 'footnote'\n    | 'toc'\n    | 'code'\n    | 'page-title';\n  level: number;\n  parent: number;\n  children: number[];\n  text: string;\n  label: string;\n  html_text: string;\n  positions: string | null;\n  table_detail: ITableDetail;\n  image_detail: IImageDetail;\n  file_detail: string | null;\n}\n\nexport interface ILevelSegmentsState {\n  levelSegments: ILevelSegment[];\n}\n\nexport interface ILevelSegmentsAction {\n  setLevelSegments: (segments: ILevelSegment[]) => void;\n}\n\nexport type ILevelSegmentsSlice = ILevelSegmentsState & ILevelSegmentsAction;\n\nexport const getDefaultLevelSegmentsState = () => ({\n  levelSegments: [],\n});\n\nexport const createLevelSegmentsSlice: StateCreator<\n  ILevelSegmentsSlice\n> = set => ({\n  ...getDefaultLevelSegmentsState(),\n  setLevelSegments: (content: ILevelSegment[]) =>\n    set(() => ({\n      levelSegments: content,\n    })),\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { type Dataset } from '@coze-arch/idl/knowledge';\n\ninterface DatasetStore {\n  dataSetList: Dataset[];\n  setDataSetList: (dataSetList: Dataset[]) => void;\n}\n\n/**\n * Only works in bot single agent mode\n */\nexport const useDatasetStore = create<DatasetStore>()(\n  devtools(\n    set => ({\n      dataSetList: [],\n\n      setDataSetList: (dataSetList: Dataset[]) => {\n        set({ dataSetList }, false, 'setDataSetList');\n      },\n    }),\n    {\n      name: 'Coze.Agent.Dataset',\n      enabled: IS_DEV_MODE,\n    },\n  ),\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type DocumentStatus } from '@coze-arch/bot-api/knowledge';\n\nexport interface ProgressItem {\n  status: DocumentStatus;\n  progress: number;\n}\nexport type ProgressMap = Record<string, ProgressItem>;\n\nexport enum ActionType {\n  ADD = 'add',\n  REMOVE = 'remove',\n}\n\nexport enum FilterPhotoType {\n  /**\n   * all\n   */\n  All = 'All',\n  /**\n   * marked\n   */\n  HasCaption = 'HasCaption',\n  /**\n   * unmarked\n   */\n  NoCaption = 'NoCaption',\n}\n","\n      import API from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport { withField } from '@coze-arch/bot-semi';\nimport { FormatType } from '@coze-arch/bot-api/memory';\nimport { IconCozInfoCircle } from '@coze-arch/coze-design/icons';\nimport { Radio, RadioGroup, Tooltip } from '@coze-arch/coze-design';\n\nimport type {\n  SelectFormatTypeModule,\n  SelectFormatTypeModuleProps,\n} from '../module';\n// eslint-disable-next-line @coze-arch/no-deep-relative-import\nimport { ReactComponent as TextKnowledgeLogo } from '../../../../assets/text-knowledge.svg';\n// eslint-disable-next-line @coze-arch/no-deep-relative-import\nimport { ReactComponent as TableKnowledgeLogo } from '../../../../assets/table-knowledge.svg';\n// eslint-disable-next-line @coze-arch/no-deep-relative-import\nimport { ReactComponent as ImageKnowledgeLogo } from '../../../../assets/image-knowledge.svg';\n\nimport styles from './index.module.less';\n\nconst SelectFormatTypeComponent: React.FC<\n  SelectFormatTypeModuleProps\n> = props => {\n  const { onChange } = props;\n  return (\n    <RadioGroup\n      defaultValue={FormatType.Text}\n      onChange={v => {\n        onChange?.(v.target.value);\n      }}\n      type=\"pureCard\"\n      direction=\"horizontal\"\n      className={styles['select-format-type']}\n    >\n      <Radio\n        value={FormatType.Text}\n        key={FormatType.Text}\n        data-testid={KnowledgeE2e.CreateKnowledgeModalTextRadioGroup}\n      >\n        <div className=\"radio-logo\">\n          <TextKnowledgeLogo />\n        </div>\n        <div>{I18n.t('create-knowledge-text-type')}</div>\n      </Radio>\n      <Radio\n        value={FormatType.Table}\n        key={FormatType.Table}\n        data-testid={KnowledgeE2e.CreateKnowledgeModalTableRadioGroup}\n      >\n        <div className=\"radio-logo\">\n          <TableKnowledgeLogo />\n        </div>\n        <div>{I18n.t('create-knowledge-table-type')}</div>\n        <Tooltip content={I18n.t('knowledge_table_nl2sql_tooltip')}>\n          <IconCozInfoCircle className={'info-icon'} />\n        </Tooltip>\n      </Radio>\n      <Radio\n        value={FormatType.Image}\n        key={FormatType.Image}\n        data-testid={KnowledgeE2e.CreateKnowledgeModalPhotoRadioGroup}\n      >\n        <div className=\"radio-logo\">\n          <ImageKnowledgeLogo />\n        </div>\n        <div>{I18n.t('knowledge_photo_001')}</div>\n      </Radio>\n    </RadioGroup>\n  );\n};\n\nexport const SelectFormatType: SelectFormatTypeModule = withField(\n  SelectFormatTypeComponent,\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Radio, Typography } from '@coze-arch/coze-design';\n\ninterface SourceRadioProps {\n  title: string;\n  description: string;\n  icon?: React.ReactNode;\n  e2e?: string;\n  key?: string;\n  value?: string;\n}\n\nexport const SourceRadio = (props: SourceRadioProps) => {\n  const { title, description, icon, e2e, key, value } = props;\n  return (\n    <Radio\n      key={key}\n      value={value}\n      extra={\n        <Typography.Text\n          type=\"tertiary\"\n          ellipsis={{\n            showTooltip: {\n              opts: { content: description },\n            },\n          }}\n          style={{ lineHeight: '20px', width: 180 }}\n        >\n          {description}\n        </Typography.Text>\n      }\n      className=\"flex-[0_0_49%]\"\n      data-testid={e2e}\n    >\n      {icon ? <div className=\"flex items-center mr-2\">{icon}</div> : null}\n      {title}\n    </Radio>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { UnitType } from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport { IconCozDocument } from '@coze-arch/coze-design/icons';\n\nimport { SourceRadio } from '../../../components/source-radio';\n\nexport const TextLocal = () => (\n  <SourceRadio\n    title={I18n.t('datasets_createFileModel_step1_LocalTitle')}\n    description={I18n.t('datasets_createFileModel_step1_LocalDescription')}\n    icon={<IconCozDocument className=\"w-4 h-4\" />}\n    e2e={KnowledgeE2e.CreateKnowledgeModalTextLocalRadio}\n    key={UnitType.TEXT_DOC}\n    value={UnitType.TEXT_DOC}\n  />\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { UnitType } from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport { IconCozPencilPaper } from '@coze-arch/coze-design/icons';\n\nimport { SourceRadio } from '../../../components/source-radio';\n\nexport const TextCustom = () => (\n  <SourceRadio\n    title={I18n.t('datasets_createFileModel_step1_CustomTitle')}\n    description={I18n.t('datasets_createFileModel_step1_CustomDescription')}\n    icon={<IconCozPencilPaper className=\"w-4 h-4\" />}\n    e2e={KnowledgeE2e.CreateKnowledgeModalTextCustomRadio}\n    key={UnitType.TEXT_CUSTOM}\n    value={UnitType.TEXT_CUSTOM}\n  />\n);\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { ReactNode } from 'react';\n\nimport { RadioGroup } from '@coze-arch/coze-design';\nimport type { RadioGroupProps } from '@coze-arch/coze-design';\n\nimport styles from './index.module.less';\n\nexport interface SourceSelectProps {\n  value: RadioGroupProps['value'];\n  onChange: RadioGroupProps['onChange'];\n  children: ReactNode;\n}\n\nexport const SourceSelect = (props: SourceSelectProps) => {\n  const { value, onChange, children } = props;\n\n  return (\n    <div className={styles['radio-wrapper']}>\n      <RadioGroup\n        type=\"pureCard\"\n        onChange={onChange}\n        value={value}\n        direction=\"horizontal\"\n        name=\"format-type\"\n        className={styles['radio-group']}\n      >\n        {children}\n      </RadioGroup>\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ImportKnowledgeSourceSelectModuleProps } from '../module';\nimport { TextLocal } from '../../import-knowledge-source/text-local';\nimport { TextCustom } from '../../import-knowledge-source/text-custom';\nimport { SourceSelect } from '../../../components/source-select';\n\nexport const TextKnowledgeSourceSelect = (\n  props: Omit<ImportKnowledgeSourceSelectModuleProps, 'formatType'>,\n) => {\n  const { initValue, onChange } = props;\n  return (\n    <SourceSelect\n      value={initValue}\n      onChange={e => {\n        onChange(e.target.value);\n      }}\n    >\n      <TextLocal />\n      <TextCustom />\n    </SourceSelect>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { UnitType } from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport { IconCozDocument } from '@coze-arch/coze-design/icons';\n\nimport { SourceRadio } from '../../../components/source-radio';\n\nexport const TableLocal = () => (\n  <SourceRadio\n    title={I18n.t('datasets_createFileModel_step1_TabLocalTitle')}\n    description={I18n.t('datasets_createFileModel_step1_TabLocalDescription')}\n    icon={<IconCozDocument className=\"w-4 h-4\" />}\n    e2e={KnowledgeE2e.CreateKnowledgeModalTableLocalRadio}\n    key={UnitType.TABLE_DOC}\n    value={UnitType.TABLE_DOC}\n  />\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { UnitType } from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport { IconCozPencilPaper } from '@coze-arch/coze-design/icons';\n\nimport { SourceRadio } from '../../../components/source-radio';\n\nexport const TableCustom = () => (\n  <SourceRadio\n    title={I18n.t('datasets_createFileModel_step1_TabCustomTitle')}\n    description={I18n.t('datasets_createFileModel_step1_TabCustomDescription')}\n    icon={<IconCozPencilPaper className=\"w-4 h-4\" />}\n    e2e={KnowledgeE2e.CreateKnowledgeModalTableCustomRadio}\n    key={UnitType.TABLE_CUSTOM}\n    value={UnitType.TABLE_CUSTOM}\n  />\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ImportKnowledgeSourceSelectModuleProps } from '../module';\nimport { TableLocal } from '../../import-knowledge-source/table-local';\nimport { TableCustom } from '../../import-knowledge-source/table-custom';\nimport { SourceSelect } from '../../../components/source-select';\n\nexport const TableKnowledgeSourceSelect = (\n  props: Omit<ImportKnowledgeSourceSelectModuleProps, 'formatType'>,\n) => {\n  const { initValue, onChange } = props;\n  return (\n    <SourceSelect\n      value={initValue}\n      onChange={e => {\n        onChange(e.target.value);\n      }}\n    >\n      <TableLocal />\n      <TableCustom />\n    </SourceSelect>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { UnitType } from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport { IconCozDocument } from '@coze-arch/coze-design/icons';\n\nimport { SourceRadio } from '../../../components/source-radio';\n\nexport const ImageLocal = () => (\n  <SourceRadio\n    title={I18n.t('knowledge_photo_002')}\n    description={I18n.t('knowledge_photo_003')}\n    icon={<IconCozDocument className=\"w-4 h-4\" />}\n    e2e={KnowledgeE2e.CreateKnowledgeModalPhotoImgRadio}\n    key={UnitType.IMAGE_FILE}\n    value={UnitType.IMAGE_FILE}\n  />\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ImportKnowledgeSourceSelectModuleProps } from '../module';\nimport { ImageLocal } from '../../import-knowledge-source/image-local';\nimport { SourceSelect } from '../../../components/source-select';\n\nexport const ImageKnowledgeSourceSelect = (\n  props: Omit<ImportKnowledgeSourceSelectModuleProps, 'formatType'>,\n) => {\n  const { initValue, onChange } = props;\n  return (\n    <SourceSelect\n      value={initValue}\n      onChange={e => {\n        onChange(e.target.value);\n      }}\n    >\n      <ImageLocal />\n    </SourceSelect>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FormatType } from '@coze-arch/bot-api/knowledge';\n\nimport { type ImportKnowledgeSourceSelectModule } from '../module';\nimport { TextKnowledgeSourceSelect } from './text-knowledge-source-select';\nimport { TableKnowledgeSourceSelect } from './table-knowledge-source-select';\nimport { ImageKnowledgeSourceSelect } from './image-knowledge-source-select';\n\nexport const ImportKnowledgeSourceSelect: ImportKnowledgeSourceSelectModule =\n  props => {\n    const { formatType, initValue, onChange } = props;\n    if (formatType === FormatType.Text) {\n      return (\n        <TextKnowledgeSourceSelect initValue={initValue} onChange={onChange} />\n      );\n    }\n    if (formatType === FormatType.Image) {\n      return (\n        <ImageKnowledgeSourceSelect initValue={initValue} onChange={onChange} />\n      );\n    }\n    if (formatType === FormatType.Table) {\n      return (\n        <TableKnowledgeSourceSelect initValue={initValue} onChange={onChange} />\n      );\n    }\n  };\n","\n      import API from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable @coze-arch/max-line-per-function */\nimport { useEffect, useState } from 'react';\n\nimport { CozeFormTextArea, CozeInputWithCountField } from '@coze-data/utils';\nimport { UnitType } from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { PictureUpload } from '@coze-common/biz-components/picture-upload';\nimport { I18n } from '@coze-arch/i18n';\nimport { FormatType } from '@coze-arch/bot-api/memory';\nimport { type Icon } from '@coze-arch/bot-api/knowledge';\nimport { FileBizType, IconType } from '@coze-arch/bot-api/developer_api';\nimport { KnowledgeApi } from '@coze-arch/bot-api';\nimport { useFormApi } from '@coze-arch/coze-design';\n\nimport { SelectFormatType } from '../../select-format-type/base';\nimport { ImportKnowledgeSourceSelect } from '../../import-knowledge-source-select/base';\n\nimport styles from './index.module.less';\n\nexport interface CozeKnowledgeAddTypeContentFormData {\n  name: string;\n  icon_uri?: Array<{\n    url: string;\n    uri: string;\n    uid: string;\n    isDefault?: boolean;\n  }>;\n  format_type: FormatType;\n  description: string;\n}\n\nexport interface AddTypeContentProps {\n  onImportKnowledgeTypeChange?: (type: UnitType) => void;\n  onSelectFormatTypeChange?: (type: FormatType) => void;\n}\n\nexport const CozeKnowledgeAddTypeContent = (params: AddTypeContentProps) => {\n  const { onImportKnowledgeTypeChange, onSelectFormatTypeChange } = params;\n  const formApi = useFormApi<CozeKnowledgeAddTypeContentFormData>();\n  // Use useState to ensure re-rendering\n  const [currentFormatType, setCurrentFormatType] = useState(FormatType.Text);\n  const [iconInfoGenerate, setIconInfoGenerate] = useState<{\n    name: string;\n    desc: string;\n  }>({\n    name: '',\n    desc: '',\n  });\n  const [coverIcon, setCoverIcon] = useState<Icon | undefined>({\n    uri: '',\n    url: '',\n  });\n\n  const fetchIcon = async (formatType: FormatType) => {\n    const { icon } = await KnowledgeApi.GetIcon({\n      format_type: formatType,\n    });\n    setCoverIcon(icon);\n    const currentCover = formApi.getValue('icon_uri');\n    if (!currentCover || currentCover[0]?.isDefault) {\n      formApi.setValue('icon_uri', [\n        {\n          url: icon?.url ?? '',\n          uri: icon?.uri ?? '',\n          uid: icon?.uri ?? '',\n          isDefault: true,\n        },\n      ]);\n    }\n  };\n\n  const [unitType, setUnitType] = useState<UnitType>(UnitType.TEXT_DOC);\n\n  useEffect(() => {\n    fetchIcon(currentFormatType);\n    if (currentFormatType === FormatType.Text) {\n      setUnitType(UnitType.TEXT_DOC);\n    } else if (currentFormatType === FormatType.Table) {\n      setUnitType(UnitType.TABLE_DOC);\n    } else if (currentFormatType === FormatType.Image) {\n      setUnitType(UnitType.IMAGE_FILE);\n    }\n  }, [currentFormatType]);\n\n  useEffect(() => {\n    if (!unitType) {\n      return;\n    }\n    onImportKnowledgeTypeChange?.(unitType);\n  }, [unitType]);\n\n  return (\n    <div data-testid={KnowledgeE2e.CreateKnowledgeModal}>\n      <SelectFormatType\n        field=\"format_type\"\n        noLabel\n        onChange={(type: FormatType) => {\n          setCurrentFormatType(type);\n          formApi.setValue('format_type', type);\n          onSelectFormatTypeChange?.(type);\n        }}\n      />\n      <CozeInputWithCountField\n        data-testid={KnowledgeE2e.CreateKnowledgeModalNameInput}\n        field=\"name\"\n        label={I18n.t('datasets_model_create_name')}\n        maxLength={100}\n        onChange={(value: string) => {\n          setIconInfoGenerate(prev => ({\n            ...prev,\n            name: value?.trim() || '',\n          }));\n        }}\n        rules={[\n          {\n            required: true,\n            whitespace: true,\n            message: I18n.t('dataset-name-empty-tooltip'),\n          },\n          {\n            pattern: /^[^\"'`\\\\]+$/,\n            message: I18n.t('dataset-name-has-wrong-word-tooltip'),\n          },\n        ]}\n        placeholder={I18n.t('datasets_model_create_name_placeholder')}\n      />\n      <CozeFormTextArea\n        field=\"description\"\n        data-testid={KnowledgeE2e.CreateKnowledgeModalDescInput}\n        // className={s['textarea-multi-line']}\n        label={I18n.t('datasets_model_create_description')}\n        autosize={{ minRows: 1, maxRows: 2 }}\n        maxCount={2000}\n        maxLength={2000}\n        placeholder={I18n.t('datasets_model_create_description_placeholder')}\n        onChange={(value: string) => {\n          setIconInfoGenerate(prev => ({\n            ...prev,\n            desc: value?.trim() || '',\n          }));\n        }}\n      />\n\n      <div\n        className=\"semi-form-field\"\n        x-label-pos=\"top\"\n        x-field-id=\"name\"\n        x-extra-pos=\"bottom\"\n      >\n        <label className=\"semi-form-field-label semi-form-field-label-left\">\n          <div className=\"semi-form-field-label-text\" x-semi-prop=\"label\">\n            {I18n.t('create-dataset-import-type')}\n          </div>\n        </label>\n\n        <ImportKnowledgeSourceSelect\n          formatType={currentFormatType}\n          initValue={unitType}\n          onChange={setUnitType}\n        />\n      </div>\n\n      <PictureUpload\n        label={I18n.t('datasets_model_create_avatar')}\n        field=\"icon_uri\"\n        testId={KnowledgeE2e.CreateKnowledgeModalAvatarUploader}\n        fileBizType={FileBizType.BIZ_DATASET_ICON}\n        uploadClassName={styles['upload-avatar-container']}\n        iconType={IconType.Dataset}\n        generateInfo={iconInfoGenerate}\n        generateTooltip={{\n          generateBtnText: I18n.t(\n            'dataset_create_knowledge_generate_avatar_tips',\n          ),\n          contentNotLegalText: I18n.t(\n            'dataset_create_knowledge_generate_content_tips',\n          ),\n        }}\n        initValue={[\n          {\n            url: coverIcon?.url,\n            uri: coverIcon?.uri,\n            isDefault: true,\n          },\n        ]}\n      />\n    </div>\n  );\n};\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useRef, useState } from 'react';\n\nimport { useDataModalWithCoze } from '@coze-data/utils';\nimport { useDataNavigate } from '@coze-data/knowledge-stores';\nimport { UnitType } from '@coze-data/knowledge-resource-processor-core';\nimport {\n  CozeKnowledgeAddTypeContent,\n  type CozeKnowledgeAddTypeContentFormData,\n} from '@coze-data/knowledge-modal-base/create-knowledge-modal-v2';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport { Button, Form, LoadingButton } from '@coze-arch/coze-design';\nimport { useSpaceStore } from '@coze-arch/bot-studio-store';\nimport { FormatType } from '@coze-arch/bot-api/memory';\nimport { KnowledgeApi } from '@coze-arch/bot-api';\n\nimport styles from './index.module.less';\n\nexport interface UseCreateKnowledgeModalParams {\n  projectID?: string;\n  onFinish?: (datasetId: string, type: UnitType, shouldUpload: boolean) => void;\n  beforeCreate?: (shouldUpload: boolean) => void;\n}\nexport const useCreateKnowledgeModalV2 = (\n  params: UseCreateKnowledgeModalParams = {},\n) => {\n  const { onFinish, beforeCreate, projectID } = params;\n  const formRef = useRef<Form<CozeKnowledgeAddTypeContentFormData>>(null);\n  // Use useState to ensure re-rendering\n  const [currentFormatType, setCurrentFormatType] = useState(FormatType.Text);\n  const spaceId = useSpaceStore(store => store.getSpaceId());\n\n  const resourceNavigate = useDataNavigate();\n\n  const [unitType, setUnitType] = useState<UnitType>(UnitType.TEXT_DOC);\n\n  const createDataset = async () => {\n    await formRef.current?.formApi.validate();\n    const { dataset_id: datasetId } = await KnowledgeApi.CreateDataset({\n      project_id: projectID || undefined,\n      name: formRef.current?.formApi.getValue('name'),\n      format_type: currentFormatType,\n      description: formRef.current?.formApi.getValue('description'),\n      icon_uri: formRef.current?.formApi.getValue('icon_uri')?.[0].uid,\n      space_id: spaceId || undefined,\n    });\n    return datasetId;\n  };\n\n  const { open, close, modal } = useDataModalWithCoze({\n    title: (\n      <div data-testid={KnowledgeE2e.CreateKnowledgeModalTitle}>\n        {I18n.t('datasets_model_create_title')}\n      </div>\n    ),\n    centered: true,\n    className: styles['create-knowledge-modal'],\n    onCancel: () => {\n      close();\n    },\n    footer: (\n      <div className=\"flex w-full justify-end\">\n        <Button\n          color=\"primary\"\n          onClick={() => {\n            close();\n          }}\n        >\n          {I18n.t('cancel')}\n        </Button>\n        <LoadingButton\n          color=\"primary\"\n          onClick={async () => {\n            beforeCreate?.(false);\n            const datasetId = await createDataset();\n            if (onFinish) {\n              onFinish(datasetId || '', unitType, false);\n            } else {\n              resourceNavigate.toResource?.('knowledge', datasetId);\n            }\n          }}\n        >\n          {I18n.t('kl_write_108')}\n        </LoadingButton>\n        <LoadingButton\n          data-testid={KnowledgeE2e.CreateKnowledgeModalSubmitAndImportButton}\n          color=\"primary\"\n          onClick={async () => {\n            beforeCreate?.(true);\n            const datasetId = await createDataset();\n            if (onFinish) {\n              onFinish(datasetId || '', unitType, true);\n            } else {\n              resourceNavigate.upload?.({ type: unitType });\n            }\n          }}\n        >\n          {I18n.t('kl_write_109')}\n        </LoadingButton>\n      </div>\n    ),\n  });\n\n  return {\n    modal: modal(\n      <Form<CozeKnowledgeAddTypeContentFormData>\n        ref={formRef}\n        showValidateIcon={false}\n        className={styles['create-form']}\n      >\n        <CozeKnowledgeAddTypeContent\n          onImportKnowledgeTypeChange={setUnitType}\n          onSelectFormatTypeChange={setCurrentFormatType}\n        />\n      </Form>,\n    ),\n    open: () => {\n      setCurrentFormatType(FormatType.Text);\n      open();\n    },\n    close,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type UnitType } from '@coze-data/knowledge-resource-processor-core';\nimport {\n  useKnowledgeListModal as useKnowledgeListModalBase,\n  type UseKnowledgeListModalParams,\n} from '@coze-data/knowledge-modal-base';\n\nimport { useCreateKnowledgeModalV2 } from '../../../create-knowledge-modal-v2/scenes/base';\n\n// Directly use the original parameter types without creating a new interface\nexport const useKnowledgeListModal = (\n  params: Omit<UseKnowledgeListModalParams, 'createKnowledgeModal'>,\n) => {\n  const { onClickAddKnowledge, beforeCreate, projectID } = params;\n\n  // A modal for creating a knowledge base\n  const createKnowledgeModal = useCreateKnowledgeModalV2({\n    projectID,\n    onFinish: (datasetId: string, type: UnitType, shouldUpload: boolean) => {\n      onClickAddKnowledge?.(datasetId, type, shouldUpload);\n      createKnowledgeModal.close();\n    },\n    beforeCreate,\n  });\n\n  // Pass createKnowledgeModal to the base component\n  return useKnowledgeListModalBase({\n    ...params,\n    createKnowledgeModal,\n  });\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type UnitType } from '@coze-data/knowledge-resource-processor-core';\nimport {\n  useKnowledgeListModalContent as useKnowledgeListModalContentBase,\n  type DataSetModalContentProps,\n  KnowledgeListModalContent as KnowledgeListModalContentBase,\n} from '@coze-data/knowledge-modal-base';\n\nimport { useCreateKnowledgeModalV2 } from '../../../create-knowledge-modal-v2/scenes/base';\nexport const useKnowledgeListModalContent = (\n  props: DataSetModalContentProps,\n) => {\n  const { projectID, onClickAddKnowledge, beforeCreate } = props;\n  // A modal for creating a knowledge base\n  const createKnowledgeModal = useCreateKnowledgeModalV2({\n    projectID,\n    onFinish: (datasetId: string, type: UnitType, shouldUpload: boolean) => {\n      onClickAddKnowledge?.(datasetId, type, shouldUpload);\n      createKnowledgeModal.close();\n    },\n    beforeCreate,\n  });\n  return useKnowledgeListModalContentBase({\n    ...props,\n    createKnowledgeModal,\n  });\n};\n\nexport const KnowledgeListModalContent = (props: DataSetModalContentProps) => {\n  const { projectID, onClickAddKnowledge, beforeCreate } = props;\n  // A modal for creating a knowledge base\n  const createKnowledgeModal = useCreateKnowledgeModalV2({\n    projectID,\n    onFinish: (datasetId: string, type: UnitType, shouldUpload: boolean) => {\n      onClickAddKnowledge?.(datasetId, type, shouldUpload);\n      createKnowledgeModal.close();\n    },\n    beforeCreate,\n  });\n  return (\n    <KnowledgeListModalContentBase\n      {...props}\n      createKnowledgeModal={createKnowledgeModal}\n    />\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable @coze-arch/max-line-per-function */\nimport { useEffect, useMemo, useRef, useState } from 'react';\n\nimport { useRequest } from 'ahooks';\nimport { DataNamespace, dataReporter } from '@coze-data/reporter';\nimport { REPORT_EVENTS } from '@coze-arch/report-events';\nimport { I18n } from '@coze-arch/i18n';\nimport { CustomError } from '@coze-arch/bot-error';\nimport { type DocTableColumn, ColumnType } from '@coze-arch/bot-api/memory';\nimport { KnowledgeApi } from '@coze-arch/bot-api';\n\nimport { transSliceContentOutput } from '../utils';\nimport { TableSegmentModal } from './modal';\n\nexport enum ModalActionType {\n  Create,\n  Edit,\n}\n\nexport interface DocTableColumnExt extends DocTableColumn {\n  error: string;\n  value: string;\n  column_id: string;\n}\n\nexport interface UseTableSegmentModalParams {\n  title: string | JSX.Element;\n  meta: DocTableColumn[];\n  disabled?: boolean;\n  canEdit?: boolean;\n  loading?: boolean;\n  onSubmit?: (actionType: ModalActionType, data: TableDataItem[]) => void;\n  onFinish: (actionType: ModalActionType, data: TableDataItem[]) => void;\n}\n\ninterface UseTableSegmentModalReturnValue {\n  node: JSX.Element | null;\n  create: () => void;\n  edit: (data: TableDataItem[] | string) => void;\n  close: () => void;\n  fetchCreateTableSegment: (\n    docId: string,\n    createContent: TableDataItem[],\n  ) => void;\n  fetchUpdateTableSegment: (\n    sliceId: string,\n    updateContent: TableDataItem[],\n  ) => void;\n}\n\nexport interface TableDataItem {\n  column_id: string;\n  column_name?: string;\n  column_type?: ColumnType;\n  is_semantic?: boolean;\n  value: string;\n  error?: string;\n}\n\nconst CONTENT_MAX_LENGTH = 2000;\n\nconst getFormData = (data: TableDataItem[]) => {\n  const formData: Record<string, string> = {};\n  data.map(item => {\n    formData[item.column_id] = item.value || '';\n  });\n  return JSON.stringify(formData);\n};\n\nconst updateWithSliceList = (\n  meta: DocTableColumn[],\n  slices: TableDataItem[],\n) => {\n  const extendedTableMeta: DocTableColumnExt[] = meta.map(column => ({\n    ...column,\n    error: '',\n    value: '',\n    column_id: column.id || '',\n    column_name: column.column_name || '',\n    is_semantic: Boolean(column.is_semantic),\n  }));\n\n  if (slices.length === 0) {\n    return extendedTableMeta;\n  }\n\n  slices.forEach(slice => {\n    const column = extendedTableMeta.find(col => col.id === slice.column_id);\n    if (column) {\n      column.value = slice.value || '';\n    }\n  });\n\n  return extendedTableMeta;\n};\nexport const useTableSegmentModal = ({\n  title,\n  meta = [],\n  canEdit,\n  disabled,\n  onSubmit,\n  onFinish,\n  loading,\n}: UseTableSegmentModalParams): UseTableSegmentModalReturnValue => {\n  const [visible, setVisible] = useState(false);\n  const [tableData, setTableData] = useState<TableDataItem[]>([]);\n  const tableMeta = useRef<DocTableColumn[]>(meta);\n  const actionTypeRef = useRef<ModalActionType>(ModalActionType.Create);\n\n  const getFormVerification = () => {\n    let isValid = true;\n    const newTextAreas = tableData.map(textArea => {\n      const newTextArea = { ...textArea };\n\n      if (newTextArea?.is_semantic) {\n        if (newTextArea.value.length === 0) {\n          newTextArea.error = I18n.t('knowledge_table_content_empty');\n          isValid = false;\n        } else if (newTextArea.value.length > CONTENT_MAX_LENGTH) {\n          newTextArea.error = I18n.t('knowledge_table_content_limt', {\n            number: CONTENT_MAX_LENGTH,\n          });\n          isValid = false;\n        }\n      }\n\n      return newTextArea;\n    });\n\n    if (!isValid) {\n      setTableData(newTextAreas);\n    }\n\n    return isValid;\n  };\n\n  const { run: fetchCreateTableSegment, loading: createLoading } = useRequest(\n    async (docId: string, createContent: TableDataItem[]) => {\n      if (!docId) {\n        throw new CustomError('normal_error', 'missing doc_id');\n      }\n      await KnowledgeApi.CreateSlice({\n        document_id: docId,\n        raw_text: getFormData(createContent),\n      });\n      return createContent;\n    },\n    {\n      manual: true,\n      onSuccess: data => {\n        onFinish(actionTypeRef.current, data);\n        onCancel();\n      },\n      onError: error => {\n        dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n          eventName: REPORT_EVENTS.KnowledgeCreateSlice,\n          error,\n        });\n      },\n    },\n  );\n\n  const { run: fetchUpdateTableSegment, loading: uploadLoading } = useRequest(\n    async (sliceId: string, updateContent: TableDataItem[]) => {\n      if (!sliceId) {\n        throw new CustomError('normal_error', 'missing slice_id');\n      }\n      const formatRecord = updateContent.map(colData => {\n        if (colData.column_type === ColumnType.Image) {\n          return {\n            ...colData,\n            value: transSliceContentOutput(colData.value),\n          };\n        }\n        return colData;\n      });\n      await KnowledgeApi.UpdateSlice({\n        slice_id: sliceId,\n        raw_text: getFormData(formatRecord),\n      });\n      return updateContent;\n    },\n    {\n      manual: true,\n      onSuccess: data => {\n        onFinish(actionTypeRef.current, data);\n        onCancel();\n      },\n      onError: error => {\n        dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n          eventName: REPORT_EVENTS.KnowledgeUpdateSlice,\n          error,\n        });\n      },\n    },\n  );\n\n  const modalLoading = useMemo(\n    () => createLoading || uploadLoading || loading,\n    [createLoading, uploadLoading, loading],\n  );\n\n  useEffect(() => {\n    tableMeta.current = meta;\n  }, [meta]);\n\n  const handleSubmit = () => {\n    const isValid = getFormVerification();\n    if (isValid) {\n      if (typeof onSubmit === 'function') {\n        onSubmit(actionTypeRef.current, tableData);\n      } else {\n        setVisible(false);\n        onFinish(actionTypeRef.current, tableData);\n      }\n    }\n  };\n\n  const onCancel = () => {\n    setVisible(false);\n  };\n\n  const onOpen = (newTableData?: TableDataItem[]) => {\n    if (newTableData && newTableData.length) {\n      setTableData(updateWithSliceList(tableMeta.current, newTableData));\n      setVisible(true);\n    } else {\n      setTableData(updateWithSliceList(tableMeta.current, []));\n      setVisible(true);\n    }\n  };\n\n  const handleTextAreaChange = (index: number, newValue: string) => {\n    const newData = [...tableData];\n    newData[index].value = newValue;\n\n    // Verify against semantic matching rows\n    if (newData[index]?.is_semantic) {\n      if (newValue.length === 0) {\n        newData[index].error = I18n.t('knowledge_table_content_empty');\n      } else if (newValue.length > CONTENT_MAX_LENGTH) {\n        newData[index].error = I18n.t('knowledge_table_content_limt', {\n          number: CONTENT_MAX_LENGTH,\n        });\n      } else {\n        newData[index].error = '';\n      }\n    }\n\n    setTableData(newData);\n  };\n\n  return {\n    fetchCreateTableSegment,\n    fetchUpdateTableSegment,\n    edit: originTableData => {\n      let newTableData = originTableData;\n      if (typeof originTableData === 'string') {\n        newTableData = JSON.parse(originTableData) as TableDataItem[];\n      }\n\n      actionTypeRef.current = ModalActionType.Edit;\n      if (Array.isArray(newTableData)) {\n        onOpen(newTableData);\n      }\n    },\n    create: () => {\n      actionTypeRef.current = ModalActionType.Create;\n      onOpen();\n    },\n    close: onCancel,\n    node: visible ? (\n      <TableSegmentModal\n        title={title}\n        visible={visible}\n        onSubmit={handleSubmit}\n        onCancel={onCancel}\n        canEdit={canEdit ?? true}\n        tableData={tableData}\n        loading={modalLoading}\n        handleTextAreaChange={handleTextAreaChange}\n      />\n    ) : null,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable max-lines-per-function */\n/* eslint-disable max-lines -- to be split */\n/* eslint-disable @coze-arch/max-line-per-function */\nimport {\n  type FC,\n  useEffect,\n  useState,\n  useRef,\n  type ReactNode,\n  useMemo,\n} from 'react';\n\nimport { isFunction, uniq, debounce } from 'lodash-es';\nimport cs from 'classnames';\nimport {\n  useInfiniteScroll,\n  useUpdateEffect,\n  useDocumentVisibility,\n} from 'ahooks';\nimport { FilterKnowledgeType } from '@coze-data/utils';\nimport { DataNamespace, dataReporter } from '@coze-data/reporter';\nimport { type UnitType } from '@coze-data/knowledge-resource-processor-core';\nimport { BotE2e } from '@coze-data/e2e';\nimport { REPORT_EVENTS } from '@coze-arch/report-events';\nimport { I18n } from '@coze-arch/i18n';\nimport { useSpaceStore } from '@coze-arch/bot-studio-store';\nimport {\n  UIButton,\n  UIEmpty,\n  UISelect,\n  Spin,\n  UISearch,\n  Divider,\n} from '@coze-arch/bot-semi';\nimport {\n  OrderField,\n  type Dataset,\n  DatasetScopeType,\n  FormatType,\n} from '@coze-arch/bot-api/knowledge';\nimport { SpaceType } from '@coze-arch/bot-api/developer_api';\nimport { KnowledgeApi } from '@coze-arch/bot-api';\nimport { Input } from '@coze-arch/coze-design';\n\nimport { DATA_REFACTOR_CLASS_NAME } from '../../constant';\n\nimport styles from './index.module.less';\n\ninterface GetDatasetListData {\n  list: Dataset[];\n  nextPageIndex: number;\n  total: number;\n}\n\nconst DEFAULT_PAGE_SIZE = 20;\n\nconst getDatasetList = async (\n  props: {\n    query?: string;\n    search_type?: OrderField;\n    space_id: string;\n    scope_type?: DatasetScopeType;\n    format_type?: FormatType;\n    projectID?: string;\n  },\n  pageIndex = 1,\n) => {\n  const { query, search_type, space_id, scope_type, format_type, projectID } =\n    props;\n  const resp = await KnowledgeApi.ListDataset({\n    space_id,\n    page: pageIndex,\n    size: DEFAULT_PAGE_SIZE,\n    filter: {\n      name: query,\n      scope_type,\n      format_type,\n    },\n    order_field: search_type,\n    project_id: projectID,\n  });\n\n  return {\n    list: resp?.dataset_list || [],\n    nextPageIndex: pageIndex + 1,\n    total: Number(resp?.total),\n  };\n};\n\nconst DEFAULT_SEARCH_TYPE = OrderField.CreateTime;\n\ninterface CreateKnowledgeModalProps {\n  modal: ReactNode;\n  open: () => void;\n  close: () => void;\n}\n\nconst EmptyToCreate: FC<{\n  onAdd: () => void;\n  scene: Scene;\n  canCreate: boolean;\n  createKnowledgeModal?: CreateKnowledgeModalProps;\n}> = ({ onAdd, scene, canCreate, createKnowledgeModal }) => {\n  const handleAdd = () => {\n    if (scene === Scene.MODAL) {\n      onAdd();\n      return;\n    }\n    createKnowledgeModal?.open();\n  };\n  return (\n    <>\n      <div className={cs(styles.content, styles.centered)}>\n        <UIEmpty\n          className={styles.empty}\n          empty={{\n            ...(canCreate\n              ? {\n                  btnText: I18n.t('datasets_create_btn'),\n                  btnOnClick: handleAdd,\n                }\n              : {}),\n            title: I18n.t('datasets_empty_title'),\n            description: I18n.t('datasets_empty_description'),\n          }}\n        />\n      </div>\n      {createKnowledgeModal?.modal}\n    </>\n  );\n};\n\nexport interface DatasetFilterAction {\n  list: Dataset[];\n  size: number;\n  query: string | undefined;\n  searchType: OrderField;\n  loading: boolean;\n  noMore: boolean;\n  resetFilter: () => void;\n  refresh: () => void;\n  createDataset?: (name: string, source_type: number) => Promise<void>;\n  deleteDataset?: (id: string) => Promise<void>;\n  updateDataset?: (id: string, name: string) => Promise<void>;\n}\n\nexport type DatasetFilterType = 'scope-type' | 'search-type' | 'query-input';\n\nexport interface DatasetFilterProps {\n  hideHeader?: boolean;\n  children:\n    | ((action: DatasetFilterAction) => React.ReactNode)\n    | React.ReactNode;\n  showFilters?: DatasetFilterType[];\n  headerClassName?: string;\n  scene?: Scene;\n  onClickAddKnowledge?: (\n    datasetId: string,\n    type: UnitType,\n    shouldUpload?: boolean,\n  ) => void;\n  beforeCreate?: (shouldUpload: boolean) => void;\n  canCreate: boolean;\n  defaultType?: FilterKnowledgeType;\n  knowledgeTypeConfigList?: FilterKnowledgeType[];\n  projectID?: string;\n  createKnowledgeModal?: CreateKnowledgeModalProps;\n}\n\nexport enum Scene {\n  PAGE = 'page',\n  MODAL = 'modal',\n}\n\nconst defaultKnowledgeTypeFallback = (param: FilterKnowledgeType[]) => {\n  if (param.includes(FilterKnowledgeType.ALL)) {\n    return FilterKnowledgeType.ALL;\n  }\n  return param.at(0) ?? FilterKnowledgeType.ALL;\n};\n\nconst useKnowledgeFilter = ({\n  hideHeader,\n  children,\n  showFilters,\n  headerClassName,\n  scene = Scene.PAGE,\n  onClickAddKnowledge,\n  canCreate,\n  defaultType,\n  knowledgeTypeConfigList = [\n    FilterKnowledgeType.ALL,\n    FilterKnowledgeType.TEXT,\n    FilterKnowledgeType.TABLE,\n    FilterKnowledgeType.IMAGE,\n  ],\n  projectID,\n  beforeCreate,\n  createKnowledgeModal,\n}: DatasetFilterProps) => {\n  const uniqKnowledgeTypeConfigList = uniq(knowledgeTypeConfigList);\n  const [currentKnowledgeType, setCurrentKnowledgeType] = useState(\n    defaultType || defaultKnowledgeTypeFallback(uniqKnowledgeTypeConfigList),\n  );\n  const [query, setQuery] = useState<string>();\n  const [searchType, setSearchType] = useState<OrderField>(DEFAULT_SEARCH_TYPE);\n  const [scopeType, setScopeType] = useState<DatasetScopeType>(\n    projectID ? DatasetScopeType.ScopeSelf : DatasetScopeType.ScopeAll,\n  );\n\n  const scopeOptions = [\n    {\n      label: I18n.t('scope_all'),\n      value: DatasetScopeType.ScopeAll,\n    },\n    {\n      label: I18n.t('scope_self'),\n      value: DatasetScopeType.ScopeSelf,\n    },\n  ];\n  const { id, space_type } = useSpaceStore(s => s.space);\n\n  const isPersonal = space_type === SpaceType.Personal;\n\n  const containerRef = useRef<HTMLDivElement>(null);\n  const { loading, data, loadingMore, noMore, reload } =\n    useInfiniteScroll<GetDatasetListData>(\n      (newData?: GetDatasetListData): Promise<GetDatasetListData> => {\n        if (!newData || newData.nextPageIndex === 1) {\n          containerRef.current?.scroll(0, 0);\n        }\n        return getDatasetList(\n          {\n            space_id: id || '',\n            query,\n            search_type: searchType,\n            scope_type: isPersonal ? DatasetScopeType.ScopeSelf : scopeType,\n            format_type:\n              currentKnowledgeType === FilterKnowledgeType.ALL\n                ? undefined\n                : {\n                    [FilterKnowledgeType.TABLE]: FormatType.Table,\n                    [FilterKnowledgeType.TEXT]: FormatType.Text,\n                    [FilterKnowledgeType.IMAGE]: FormatType.Image,\n                  }[currentKnowledgeType],\n            projectID,\n          },\n          newData?.nextPageIndex,\n        );\n      },\n      {\n        manual: true,\n        isNoMore: newData =>\n          Boolean(\n            !newData?.total ||\n              (newData.nextPageIndex - 1) * DEFAULT_PAGE_SIZE >= newData.total,\n          ),\n        onError: error => {\n          dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n            eventName: REPORT_EVENTS.KnowledgeGetDataSetList,\n            error,\n          });\n        },\n        target: containerRef,\n        reloadDeps: [query, searchType, scopeType, projectID],\n      },\n    );\n\n  useUpdateEffect(() => {\n    handleResetFilter();\n  }, [id]);\n\n  const documentVisibility = useDocumentVisibility();\n  useEffect(() => {\n    if (documentVisibility === 'visible') {\n      reload();\n    }\n  }, [documentVisibility]);\n\n  const handleResetFilter = () => {\n    setQuery(undefined);\n    setSearchType(DEFAULT_SEARCH_TYPE);\n  };\n\n  const handleSearchTypeChange = (value: OrderField) => {\n    setSearchType(value);\n  };\n\n  const handleQueryChange = (value = '') => {\n    setQuery(value);\n  };\n\n  const handleAdd = () => {\n    createKnowledgeModal?.open();\n  };\n\n  const renderContent = () => {\n    /** Show the list if you have data */\n    if (data?.total) {\n      return (\n        <>\n          <div\n            className={cs(styles.content, styles.scrollable)}\n            ref={containerRef}\n          >\n            {isFunction(children)\n              ? children({\n                  size: DEFAULT_PAGE_SIZE,\n                  query,\n                  searchType,\n                  loading: loadingMore,\n                  list: data.list,\n                  noMore,\n                  resetFilter: handleResetFilter,\n                  refresh: reload,\n                })\n              : children}\n          </div>\n        </>\n      );\n    }\n    /** Show empty state if no data and not loading */\n    if (!loading) {\n      return (\n        <EmptyToCreate\n          scene={scene}\n          onAdd={() => {\n            handleAdd();\n          }}\n          canCreate={canCreate}\n          createKnowledgeModal={createKnowledgeModal}\n        />\n      );\n    }\n    /** No data and no display while loading */\n    return null;\n  };\n\n  const renderSearch = useMemo(\n    () => () =>\n      (\n        <Input\n          autoFocus\n          key=\"query-input\"\n          placeholder={I18n.t('db2_014')}\n          onChange={debounce(handleQueryChange, 500)}\n        />\n      ),\n    [],\n  );\n\n  const renderCreateBtn = useMemo(\n    () => () =>\n      (\n        <UIButton\n          theme=\"solid\"\n          onClick={handleAdd}\n          data-testid={BotE2e.BotKnowledgeSelectListModalCreateBtn}\n        >\n          {I18n.t('datasets_create_btn')}\n        </UIButton>\n      ),\n    [handleAdd],\n  );\n\n  const renderFilters = useMemo(\n    () => () =>\n      (\n        <>\n          <div className={styles['file-type-tab']}>\n            {uniqKnowledgeTypeConfigList.reduce<ReactNode[]>(\n              (\n                accumulator: ReactNode[],\n                currentValue: FilterKnowledgeType,\n                currentIndex: number,\n              ) => {\n                const reactNode = renderKnowledgeTypeConfigNode(currentValue);\n                if (currentIndex !== 0) {\n                  return accumulator.concat([\n                    <Divider layout=\"vertical\" margin=\"12px\" />,\n                    reactNode,\n                  ]);\n                }\n                return accumulator.concat([reactNode]);\n              },\n              [],\n            )}\n          </div>\n\n          <div className={'flex'}>\n            {uniq(showFilters).map((filterType: DatasetFilterType) => {\n              if (filterType === 'scope-type') {\n                return !isPersonal ? (\n                  <UISelect\n                    label={I18n.t('Creator')}\n                    showClear={false}\n                    value={scopeType}\n                    optionList={scopeOptions}\n                    onChange={v => {\n                      setScopeType(v as DatasetScopeType);\n                    }}\n                  />\n                ) : null;\n              } else if (filterType === 'search-type') {\n                return (\n                  <UISelect\n                    data-testid={\n                      BotE2e.BotKnowledgeSelectListModalCreateDateSelect\n                    }\n                    label={I18n.t('Sort')}\n                    showClear={false}\n                    value={searchType}\n                    optionList={[\n                      {\n                        label: I18n.t('Create_time'),\n                        value: OrderField.CreateTime,\n                      },\n                      {\n                        label: I18n.t('Update_time'),\n                        value: OrderField.UpdateTime,\n                      },\n                    ]}\n                    onChange={v => {\n                      handleSearchTypeChange(v as OrderField);\n                    }}\n                  />\n                );\n              }\n            })}\n          </div>\n        </>\n      ),\n    [\n      headerClassName,\n      handleSearchTypeChange,\n      scopeType,\n      scopeOptions,\n      isPersonal,\n      showFilters,\n      uniqKnowledgeTypeConfigList,\n    ],\n  );\n\n  useEffect(() => {\n    reload();\n  }, [currentKnowledgeType]);\n\n  const renderKnowledgeTypeConfigNode = (type: FilterKnowledgeType) => {\n    if (type === FilterKnowledgeType.ALL) {\n      return (\n        <div\n          data-testid={BotE2e.BotKnowledgeSelectListModalAllTab}\n          key={FilterKnowledgeType.ALL}\n          onClick={() => setCurrentKnowledgeType(FilterKnowledgeType.ALL)}\n          className={\n            currentKnowledgeType === FilterKnowledgeType.ALL\n              ? styles['file-type-tab-item-active']\n              : styles['file-type-tab-item']\n          }\n        >\n          {I18n.t('kl2_010')}\n        </div>\n      );\n    }\n    if (type === FilterKnowledgeType.TEXT) {\n      return (\n        <div\n          data-testid={BotE2e.BotKnowledgeSelectListModalTextTab}\n          key={FilterKnowledgeType.TEXT}\n          onClick={() => setCurrentKnowledgeType(FilterKnowledgeType.TEXT)}\n          className={\n            currentKnowledgeType === FilterKnowledgeType.TEXT\n              ? styles['file-type-tab-item-active']\n              : styles['file-type-tab-item']\n          }\n        >\n          {I18n.t('kl2_011')}\n        </div>\n      );\n    }\n    if (type === FilterKnowledgeType.TABLE) {\n      return (\n        <div\n          data-testid={BotE2e.BotKnowledgeSelectListModalTableTab}\n          key={FilterKnowledgeType.TABLE}\n          onClick={() => setCurrentKnowledgeType(FilterKnowledgeType.TABLE)}\n          className={\n            currentKnowledgeType === FilterKnowledgeType.TABLE\n              ? styles['file-type-tab-item-active']\n              : styles['file-type-tab-item']\n          }\n        >\n          {I18n.t('kl2_012')}\n        </div>\n      );\n    }\n    if (type === FilterKnowledgeType.IMAGE) {\n      return (\n        <div\n          data-testid={BotE2e.BotKnowledgeSelectListModalPhotoTab}\n          key={FilterKnowledgeType.IMAGE}\n          onClick={() => setCurrentKnowledgeType(FilterKnowledgeType.IMAGE)}\n          className={\n            currentKnowledgeType === FilterKnowledgeType.IMAGE\n              ? styles['file-type-tab-item-active']\n              : styles['file-type-tab-item']\n          }\n        >\n          {I18n.t('knowledge_photo_025')}\n        </div>\n      );\n    }\n    return null;\n  };\n\n  const renderContentFilter = () => (\n    <Spin spinning={loading} wrapperClassName={styles.spin}>\n      <div className={cs(styles.container, DATA_REFACTOR_CLASS_NAME)}>\n        {!hideHeader && showFilters?.length ? (\n          <div\n            className={cs(\n              styles.header,\n              headerClassName,\n              styles['new-filter-header'],\n            )}\n          >\n            <div className={styles['file-type-tab']}>\n              {uniqKnowledgeTypeConfigList.reduce<ReactNode[]>(\n                (\n                  accumulator: ReactNode[],\n                  currentValue: FilterKnowledgeType,\n                  currentIndex: number,\n                ) => {\n                  const reactNode = renderKnowledgeTypeConfigNode(currentValue);\n                  if (currentIndex !== 0) {\n                    return accumulator.concat([\n                      <Divider layout=\"vertical\" margin=\"12px\" />,\n                      reactNode,\n                    ]);\n                  }\n                  return accumulator.concat([reactNode]);\n                },\n                [],\n              )}\n            </div>\n\n            <div className=\"flex gap-[8px]\">\n              {uniq(showFilters).map((filterType: DatasetFilterType) => {\n                if (filterType === 'scope-type') {\n                  return !isPersonal ? (\n                    <UISelect\n                      label={I18n.t('Creator')}\n                      showClear={false}\n                      value={scopeType}\n                      optionList={scopeOptions}\n                      onChange={v => {\n                        setScopeType(v as DatasetScopeType);\n                      }}\n                    />\n                  ) : null;\n                } else if (filterType === 'search-type') {\n                  return (\n                    <UISelect\n                      data-testid={\n                        BotE2e.BotKnowledgeSelectListModalCreateDateSelect\n                      }\n                      label={I18n.t('Sort')}\n                      showClear={false}\n                      value={searchType}\n                      optionList={[\n                        {\n                          label: I18n.t('Create_time'),\n                          value: OrderField.CreateTime,\n                        },\n                        {\n                          label: I18n.t('Update_time'),\n                          value: OrderField.UpdateTime,\n                        },\n                      ]}\n                      onChange={v => {\n                        handleSearchTypeChange(v as OrderField);\n                      }}\n                    />\n                  );\n                } else if (filterType === 'query-input') {\n                  return (\n                    <UISearch\n                      key=\"filterType\"\n                      loading={loading}\n                      onSearch={handleQueryChange}\n                    />\n                  );\n                }\n              })}\n              {scene === Scene.MODAL && canCreate ? (\n                <UIButton\n                  theme=\"solid\"\n                  onClick={handleAdd}\n                  data-testid={BotE2e.BotKnowledgeSelectListModalCreateBtn}\n                >\n                  {I18n.t('datasets_create_btn')}\n                </UIButton>\n              ) : null}\n            </div>\n          </div>\n        ) : null}\n        {renderContent()}\n      </div>\n      {createKnowledgeModal?.modal}\n    </Spin>\n  );\n\n  return { renderContentFilter, renderSearch, renderCreateBtn, renderFilters };\n};\n\nexport { useKnowledgeFilter };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const KNOWLEDGE_UNIT_NAME_MAX_LEN = 100;\nexport const KNOWLEDGE_MAX_DOC_SIZE = 300;\nexport const KNOWLEDGE_MAX_SLICE_COUNT = 10000;\nexport const DATA_REFACTOR_CLASS_NAME = 'data-refactor';\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback, useRef, useState } from 'react';\n\nimport {\n  CozeFormTextArea,\n  CozeInputWithCountField,\n  useDataModalWithCoze,\n} from '@coze-data/utils';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport {\n  PictureUpload,\n  type RenderAutoGenerateParams,\n} from '@coze-common/biz-components/picture-upload';\nimport { I18n } from '@coze-arch/i18n';\nimport { FileBizType, IconType } from '@coze-arch/bot-api/developer_api';\nimport { Form } from '@coze-arch/coze-design';\n\nimport { DATA_REFACTOR_CLASS_NAME } from '../constant';\n\nimport styles from './index.module.less';\n\nexport interface EditModalData {\n  id?: string;\n  icon_uri?: { uid?: string; url?: string }[];\n  name?: string;\n  description?: string;\n}\n\nexport interface UseEditKnowledgeModalProps {\n  onOk: (formValue: EditModalData) => void;\n  renderAutoGenerateKnowledgeIcon?: (\n    props: RenderAutoGenerateParams,\n  ) => React.ReactNode;\n}\n\nexport function useEditKnowledgeModal(props: UseEditKnowledgeModalProps) {\n  const formRef = useRef<Form<EditModalData>>(null);\n  const initVal = useRef<EditModalData>({});\n  const id = useRef<string | undefined>('');\n  const [contentCheckErrorMsg, setContentCheckErrorMsg] = useState('');\n  const [iconInfoGenerate, setIconInfoGenerate] = useState<{\n    name: string;\n    desc: string;\n  }>({\n    name: '',\n    desc: '',\n  });\n  const getFormValues = () => {\n    const values = formRef.current?.formApi.getValues();\n    if (values) {\n      return { ...values, icon_uri: values.icon_uri };\n    }\n  };\n\n  const { open, close, modal, disableOk, enableOk, canOk } =\n    useDataModalWithCoze({\n      title: I18n.t('datasets_editProfile_title'),\n      cancelText: I18n.t('Cancel'),\n      centered: true,\n      okText: I18n.t('Confirm'),\n      onOk: () => {\n        props.onOk({\n          ...getFormValues(),\n          id: id.current,\n        });\n        close();\n      },\n      onCancel: () => {\n        close();\n      },\n    });\n\n  const validateNL2SqlName = useCallback(() => {\n    const currentUnitName = formRef.current?.formApi.getValue('name');\n    const notationReg = /[\"'`\\\\]+/g;\n\n    if (!currentUnitName) {\n      return I18n.t('dataset-name-empty-tooltip');\n    }\n    if (notationReg.test(currentUnitName)) {\n      return I18n.t('dataset-name-has-wrong-word-tooltip');\n    }\n    return '';\n  }, []);\n\n  return {\n    node: modal(\n      <div\n        className={`${DATA_REFACTOR_CLASS_NAME} ${styles['create-dataset-modal']}`}\n      >\n        <Form<EditModalData>\n          ref={formRef}\n          showValidateIcon={false}\n          initValues={initVal.current}\n          onValueChange={({ name, description }) => {\n            setIconInfoGenerate({\n              name: name?.trim() || '',\n              desc: description?.trim() || '',\n            });\n            setContentCheckErrorMsg('');\n\n            if (!name || validateNL2SqlName()) {\n              disableOk();\n            } else if (!canOk) {\n              enableOk();\n            }\n          }}\n        >\n          <CozeInputWithCountField\n            data-testid={KnowledgeE2e.KnowledgeEditModalNameInput}\n            field=\"name\"\n            label={I18n.t('datasets_model_create_name')}\n            maxLength={100}\n            rules={[\n              {\n                required: true,\n                message: I18n.t('datasets_model_create_name_placeholder'),\n              },\n            ]}\n            placeholder={I18n.t('datasets_model_create_name_placeholder')}\n            validate={validateNL2SqlName}\n          />\n          <CozeFormTextArea\n            data-testid={KnowledgeE2e.KnowledgeEditModalDescInput}\n            field=\"description\"\n            label={I18n.t('datasets_model_create_description')}\n            rows={2}\n            maxCount={2000}\n            maxLength={2000}\n            placeholder={I18n.t(\n              'datasets_model_create_description_placeholder',\n            )}\n          />\n          {contentCheckErrorMsg ? (\n            <Form.ErrorMessage error={contentCheckErrorMsg} />\n          ) : null}\n\n          <PictureUpload\n            label={I18n.t('datasets_model_create_avatar')}\n            withAutoGenerate\n            renderAutoGenerate={props.renderAutoGenerateKnowledgeIcon}\n            field=\"icon_uri\"\n            generateInfo={iconInfoGenerate}\n            generateTooltip={{\n              generateBtnText: I18n.t(\n                'dataset_create_knowledge_generate_avatar_tips',\n              ),\n              contentNotLegalText: I18n.t(\n                'dataset_create_knowledge_generate_content_tips',\n              ),\n            }}\n            initValue={initVal.current.icon_uri}\n            iconType={IconType.Dataset}\n            fileBizType={FileBizType.BIZ_DATASET_ICON}\n          />\n        </Form>\n      </div>,\n    ),\n    open,\n    edit: (info: EditModalData) => {\n      initVal.current = info;\n      id.current = info.id;\n      setIconInfoGenerate({\n        name: info.name || '',\n        desc: info.description || '',\n      });\n      open();\n    },\n    close: () => {\n      close();\n    },\n  };\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type RecallStrategy } from '@coze-arch/bot-api/playground_api';\n\nimport { type IDataSetInfo } from './type';\n\nexport const recallStrategyUpdater: (params: {\n  datasetInfo: IDataSetInfo;\n  field: keyof RecallStrategy;\n  value: boolean;\n}) => IDataSetInfo = ({ datasetInfo, field, value }) => {\n  if (!datasetInfo.recall_strategy) {\n    datasetInfo.recall_strategy = {\n      [field]: value,\n    };\n  } else {\n    datasetInfo.recall_strategy[field] = value;\n  }\n  return datasetInfo;\n};\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { InputNumber, Slider } from '@coze-arch/bot-semi';\n\nimport styles from './index.module.less';\n\ninterface SliderSettingProps {\n  min: number;\n  max: number;\n  step: number;\n  precision: number;\n  value: number;\n  marks: Record<number, string>;\n  onChange: (value: number) => void;\n  disabled: boolean;\n}\n\nexport const SliderSetting = ({\n  min = 0,\n  max = 100,\n  step = 1,\n  precision = 0,\n  value,\n  marks,\n  onChange,\n  disabled,\n}: SliderSettingProps) => (\n  <div className={styles['slider-area']}>\n    <div className={styles['slider-wrapper']}>\n      <div className={styles.slider}>\n        <Slider\n          step={step}\n          min={min}\n          max={max}\n          value={value}\n          marks={marks}\n          disabled={disabled}\n          onChange={v => onChange(v as number)}\n        ></Slider>\n      </div>\n      <InputNumber\n        className={styles['input-number']}\n        step={step}\n        precision={precision}\n        onChange={v => {\n          let inputValue = Number(v);\n          if (isNaN(inputValue)) {\n            inputValue = value;\n          } else {\n            inputValue = inputValue || value;\n            inputValue = Math.max(inputValue, 0);\n          }\n          if (inputValue > max) {\n            inputValue = max;\n          }\n          onChange(inputValue);\n        }}\n        value={value}\n        min={min}\n        max={max}\n        disabled={disabled}\n      />\n    </div>\n    <div className={styles['slider-boundary']}>\n      <div className={styles.min}>{min}</div>\n      <div className={styles.max}>{max}</div>\n    </div>\n  </div>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { IconInfo } from '@coze-arch/bot-icons';\nimport { Popover } from '@coze-arch/coze-design';\n\nimport styles from './index.module.less';\n\ninterface TitleAreaProps {\n  title: string;\n  tipStyle?: Record<string, string | number>;\n  tip?: string | React.ReactNode;\n}\n\nexport function TitleArea({ title, tip, tipStyle = {} }: TitleAreaProps) {\n  return (\n    <div className={styles['title-area']}>\n      {title}\n      {!!tip && (\n        <Popover\n          showArrow\n          position=\"top\"\n          zIndex={1031}\n          style={{\n            maxWidth: '276px',\n            ...tipStyle,\n          }}\n          content={tip}\n        >\n          <IconInfo className={styles['title-area-icon']} />\n        </Popover>\n      )}\n    </div>\n  );\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from 'classnames';\nimport { type I18nKeysNoOptionsType } from '@coze-arch/i18n';\nimport { I18n } from '@coze-arch/i18n';\n\nimport { TitleArea } from './title-area';\n\nimport styles from './index.module.less';\n\nexport interface SettingItemProps {\n  title: string;\n  tip?: string | React.ReactNode;\n  children: React.ReactNode;\n  className?: string;\n  tipStyle?: Record<string, string | number>;\n}\n\nexport const SettingItem = ({\n  title,\n  tip,\n  children,\n  className,\n  tipStyle,\n}: SettingItemProps) => (\n  <div className={classNames(styles['setting-item-container'], className)}>\n    <TitleArea\n      title={I18n.t(title as unknown as I18nKeysNoOptionsType)}\n      tip={tip || ''}\n      tipStyle={tipStyle}\n    />\n    <div\n      className={classNames(\n        styles['setting-item'],\n        'dataset-setting-content-item',\n      )}\n    >\n      {children}\n    </div>\n  </div>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { type CSSProperties, type ReactNode } from 'react';\n\nimport classNames from 'classnames';\nimport { Radio, RadioGroup, Popover } from '@coze-arch/bot-semi';\nimport { IconInfo } from '@coze-arch/bot-icons';\n\nimport styles from './index.module.less';\n\nexport interface RadioItem {\n  label: string;\n  value: number;\n  e2e?: string;\n  tip?: ReactNode;\n  tipStyle?: CSSProperties;\n  desc?: string | ReactNode;\n}\n\nexport interface RadioGroupSettingProps {\n  options: RadioItem[];\n  value: number;\n  disabled?: boolean;\n  onChange: (value: number) => void;\n}\nexport function RadioGroupSetting({\n  options,\n  value,\n  disabled,\n  onChange,\n}: RadioGroupSettingProps) {\n  const desc = options.find(v => v.value === value)?.desc;\n  return (\n    <div className={styles['radio-area']}>\n      <RadioGroup\n        onChange={e => onChange(e.target.value as number)}\n        value={value}\n        disabled={disabled}\n      >\n        {options.map(item => (\n          <div\n            data-testid={item.e2e}\n            key={item.value}\n            className={classNames(\n              styles['radio-item'],\n              value === item.value ? styles.active : styles.normal,\n            )}\n          >\n            <Radio value={item.value}>{item.label}</Radio>\n            {!!item.tip && (\n              <Popover\n                showArrow\n                position=\"top\"\n                zIndex={1031}\n                style={{\n                  backgroundColor: '#41464c',\n                  color: '#fff',\n                  maxWidth: '276px',\n                  ...(item.tipStyle || {}),\n                }}\n                content={item.tip}\n              >\n                <IconInfo className={styles['radio-item-icon']} />\n              </Popover>\n            )}\n          </div>\n        ))}\n      </RadioGroup>\n      {desc ? <div className={styles['radio-desc']}>{desc}</div> : null}\n    </div>\n  );\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport copy from 'copy-to-clipboard';\nimport { BotE2e } from '@coze-data/e2e';\nimport { I18n, getUnReactiveLanguage } from '@coze-arch/i18n';\nimport { UITag, Toast, Tooltip, Image, Typography } from '@coze-arch/bot-semi';\nimport { IconCopy } from '@coze-arch/bot-icons';\nimport {\n  KnowledgeShowSourceMode,\n  KnowledgeNoRecallReplyMode,\n} from '@coze-arch/bot-api/playground_api';\n\nimport ZhCustomizePromptPNG from '../assets/customize-prompt-zh.png';\nimport EnCustomizePromptPNG from '../assets/customize-prompt-en.png';\nimport { type RadioItem } from './radio-group-setting';\n\nimport styles from './index.module.less';\n\nexport const MAX_TOP_K_VALUE = 5;\nexport const FULL_TEXT_SEARCH_KEY = 20;\n\nexport const getSearchStrategyOptions = () => [\n  {\n    label: I18n.t('knowledge_hybird_search_title'),\n    value: 1,\n    tip: I18n.t('knowledge_hybird_search_tooltip'),\n  },\n  {\n    label: I18n.t('knowledge_semantic_search_title'),\n    value: 0,\n    tip: I18n.t('knowledge_semantic_search_tooltip'),\n  },\n  {\n    label: I18n.t('knowledge_full_text_search_title'),\n    value: 20,\n    tip: I18n.t('knowledge_full_text_search_tooltip'),\n  },\n];\n\nexport const getAutomaticCallOptions = () => {\n  const onCopy = (text: string) => {\n    const res = copy(text);\n    if (!res) {\n      return;\n    }\n    Toast.success({\n      content: I18n.t('copy_success'),\n      showClose: false,\n    });\n  };\n\n  return [\n    {\n      e2e: BotE2e.BotKnowledgeSettingModalAutoRadio,\n      label: I18n.t('dataset_automatic_call'),\n      value: 1,\n    },\n    {\n      e2e: BotE2e.BotKnowledgeSettingModalManualRadio,\n      label: I18n.t('dataset_on_demand_call'),\n      value: 0,\n      desc: (\n        <>\n          {I18n.t('bot_edit_dataset_on_demand_prompt1')}\n          <Tooltip content={I18n.t('bot_edit_datasets_copyName')}>\n            <UITag\n              onClick={() => onCopy(I18n.t('dataset_recall_copy_value'))}\n              type=\"light\"\n              className={styles['setting-item-copy']}\n            >\n              {I18n.t('dataset_recall_copy_label')}\n              <IconCopy className={styles['icon-copy']} />\n            </UITag>\n          </Tooltip>\n          {I18n.t('bot_edit_dataset_on_demand_prompt2')}\n        </>\n      ),\n    },\n  ];\n};\n\nexport const getNoRecallReplyOptions = (): RadioItem[] => [\n  {\n    e2e: BotE2e.BotKnowledgeSettingNoRecallReplyModeDefaultRadio,\n    label: I18n.t('No_recall_003'),\n    value: KnowledgeNoRecallReplyMode.Default,\n  },\n  {\n    e2e: BotE2e.BotKnowledgeSettingNoRecallReplyModeCustomizePromptRadio,\n    label: I18n.t('No_recall_004'),\n    value: KnowledgeNoRecallReplyMode.CustomizePrompt,\n    tip: (\n      <>\n        <div\n          style={{\n            lineHeight: '20px',\n            color: 'rgba(29, 28, 35, 1)',\n            marginBottom: '8px',\n          }}\n        >\n          {I18n.t('No_recall_007')}\n        </div>\n        <Image\n          width={344}\n          preview={false}\n          src={\n            I18n.language === 'zh-CN'\n              ? ZhCustomizePromptPNG\n              : EnCustomizePromptPNG\n          }\n        />\n      </>\n    ),\n    tipStyle: {\n      backgroundColor: '#fff',\n      padding: '16px',\n      minWidth: '376px',\n      maxWidth: '376px',\n    },\n  },\n];\n\nexport const localeMapLink: Record<string, string> = {\n  'zh-CN': '/docs/guides/knowledge',\n  en: '/docs/guides/knowledge_overview?_lang=en',\n};\n\nexport const getShowSourceModeOptions = (): RadioItem[] => {\n  const language = getUnReactiveLanguage();\n\n  const goToGuides = (module = 'knowledge') => {\n    window.open(\n      `${window.location.origin}${\n        localeMapLink[language] || `/docs/guides/${module}`\n      }`,\n    );\n  };\n\n  return [\n    {\n      e2e: BotE2e.BotKnowledgeSettingShowSourceModeCardRadio,\n      label: I18n.t('knowledge_source_card_0002'),\n      value: KnowledgeShowSourceMode.CardList,\n      tip: (\n        <div className={styles['show-source-mode-tip']}>\n          <div className={styles.title}>\n            {I18n.t('knowledge_source_card_0004')}\n          </div>\n          <div className={styles.space}>\n            {[\n              {\n                title: I18n.t('what_is_coze'),\n                content: I18n.t('landingpage_description'),\n                guideModule: 'welcome',\n              },\n              {\n                title: I18n.t('knowledge_source_display_tooltip_link'),\n                content: I18n.t('knowledge_source_display_tooltip_content'),\n                guideModule: 'knowledge',\n              },\n            ].map(i => (\n              <div\n                className={styles.card}\n                onClick={e => {\n                  goToGuides(i.guideModule);\n                }}\n              >\n                <div className={styles.title}>\n                  <div>{i.title}</div>\n                </div>\n                <Typography.Text\n                  className={styles.content}\n                  ellipsis={{\n                    rows: 3,\n                    showTooltip: false,\n                  }}\n                >\n                  {i.content}\n                </Typography.Text>\n              </div>\n            ))}\n          </div>\n        </div>\n      ),\n      tipStyle: {\n        backgroundColor: '#fff',\n        maxWidth: '436px',\n        minWidth: '436px',\n        padding: '16px',\n      },\n    },\n    {\n      e2e: BotE2e.BotKnowledgeSettingShowSourceModeTextRadio,\n      label: I18n.t('knowledge_source_card_0001'),\n      value: KnowledgeShowSourceMode.ReplyBottom,\n      tip: (\n        <div className={styles['show-source-mode-tip']}>\n          <div className={styles.title}>\n            {I18n.t('knowledge_source_card_0003')}\n          </div>\n          <div className={styles.main}>\n            <Typography.Text className={styles.content}>\n              {I18n.t('knowledge_source_display_tooltip_content')}\n            </Typography.Text>\n            <div className={styles.link}>\n              <div\n                onClick={e => {\n                  goToGuides();\n                }}\n              >\n                1. {I18n.t('knowledge_source_display_tooltip_link')}\n              </div>\n            </div>\n          </div>\n        </div>\n      ),\n      tipStyle: {\n        backgroundColor: '#fff',\n        maxWidth: '436px',\n        minWidth: '436px',\n        padding: '16px',\n      },\n    },\n  ];\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useRef } from 'react';\n\nimport { debounce, isEmpty } from 'lodash-es';\nimport { produce } from 'immer';\nimport classNames from 'classnames';\nimport { BotE2e } from '@coze-data/e2e';\nimport { RerankTips, RewriteTips } from '@coze-common/biz-tooltip-ui';\nimport { I18n, getUnReactiveLanguage } from '@coze-arch/i18n';\nimport { Banner, Form, Switch } from '@coze-arch/bot-semi';\nimport { IconWarningInfo } from '@coze-arch/bot-icons';\nimport { getFlags } from '@coze-arch/bot-flags';\nimport {\n  KnowledgeShowSourceMode,\n  KnowledgeNoRecallReplyMode,\n} from '@coze-arch/bot-api/playground_api';\n\nimport { recallStrategyUpdater } from './utils';\nimport { type RagModeConfigurationProps } from './type';\nimport { SliderSetting } from './slider-setting';\nimport { SettingItem } from './setting-item';\nimport { RadioGroupSetting } from './radio-group-setting';\nimport {\n  MAX_TOP_K_VALUE,\n  getAutomaticCallOptions,\n  getShowSourceModeOptions,\n  getNoRecallReplyOptions,\n  getSearchStrategyOptions,\n  localeMapLink,\n} from './constant';\n\nimport styles from './index.module.less';\n\nconst DATASET_INFO_MIN_SCORE = 0.01;\n\n/* eslint-disable @coze-arch/max-line-per-function*/\n\n// eslint-disable-next-line complexity, max-lines-per-function\nexport function RagModeConfiguration({\n  dataSetInfo,\n  onDataSetInfoChange,\n  showTitle = true,\n  isReadonly = false,\n  showNL2SQLConfig,\n  showAuto = true,\n  showSourceDisplay = true,\n}: RagModeConfigurationProps): JSX.Element {\n  const {\n    auto,\n    min_score: minScore,\n    top_k: topK,\n    search_strategy: searchStrategy,\n    show_source,\n    no_recall_reply_mode,\n    no_recall_reply_customize_prompt,\n    show_source_mode,\n    recall_strategy = {},\n  } = dataSetInfo;\n\n  // Undefined defaults to true\n  const {\n    use_nl2sql = true,\n    use_rerank = true,\n    use_rewrite = true,\n  } = recall_strategy;\n\n  const language = getUnReactiveLanguage();\n  const FLAGS = getFlags();\n\n  const textAreaRef = useRef<HTMLTextAreaElement>(null);\n\n  const debounceOnNoRecallReplyCustomizePromptChange = debounce(v => {\n    onDataSetInfoChange({\n      ...dataSetInfo,\n      no_recall_reply_customize_prompt: v,\n    });\n  }, 300);\n\n  return (\n    <div className={styles.setting}>\n      {showTitle ? (\n        <div\n          data-testid={BotE2e.BotKnowledgeSettingModalTitle}\n          className={classNames(\n            styles['setting-title'],\n            'dataset-setting-content-title',\n          )}\n        >\n          {I18n.t('dataset_settings_title')}\n        </div>\n      ) : null}\n      <div className={styles.recall_title}>\n        {I18n.t('dataset-setting_recall_title')}\n      </div>\n      {showAuto ? (\n        <SettingItem\n          title={I18n.t('dataset_call_method')}\n          tip={I18n.t('knowledge_call_method_tooltip')}\n        >\n          <RadioGroupSetting\n            options={getAutomaticCallOptions()}\n            value={auto ? 1 : 0}\n            onChange={v => onDataSetInfoChange({ ...dataSetInfo, auto: !!v })}\n            disabled={isReadonly}\n          />\n        </SettingItem>\n      ) : null}\n      <SettingItem\n        title={I18n.t('knowledge_search_strategy_title')}\n        tip={I18n.t('knowledge_search_strategy_tooltip')}\n      >\n        <RadioGroupSetting\n          options={getSearchStrategyOptions()}\n          value={searchStrategy ?? 0}\n          onChange={v =>\n            onDataSetInfoChange({ ...dataSetInfo, search_strategy: v })\n          }\n          disabled={isReadonly}\n        />\n      </SettingItem>\n      <SettingItem\n        title={I18n.t('dataset_max_recall')}\n        tip={I18n.t('bot_edit_datasetsSettings_MaxTip')}\n      >\n        <SliderSetting\n          min={1}\n          max={10}\n          step={1}\n          precision={0}\n          value={topK}\n          marks={{ 3: I18n.t('dataset_max_recall_default') }}\n          onChange={v => {\n            onDataSetInfoChange({\n              ...dataSetInfo,\n              top_k: v,\n            });\n          }}\n          disabled={isReadonly}\n        />\n      </SettingItem>\n      {topK > MAX_TOP_K_VALUE && (\n        <Banner\n          bordered\n          type=\"warning\"\n          fullMode={false}\n          closeIcon={null}\n          className={classNames(\n            styles['tip-area'],\n            'dataset-setting-content-tip-area',\n          )}\n          icon={<IconWarningInfo className={styles.icon} />}\n          description={\n            <span className={styles.desc}>\n              {I18n.t('dataset_max_recall_desc')}\n            </span>\n          }\n        />\n      )}\n      {recall_strategy.use_rerank ? (\n        <SettingItem\n          title={I18n.t('dataset_min_degree')}\n          tip={I18n.t('bot_edit_datasetsSettings_MinTip')}\n        >\n          <SliderSetting\n            min={DATASET_INFO_MIN_SCORE}\n            max={0.99}\n            step={0.01}\n            precision={2}\n            value={minScore}\n            marks={{ 0.5: I18n.t('dataset_min_degree_default') }}\n            disabled={isReadonly}\n            onChange={v => {\n              onDataSetInfoChange({\n                ...dataSetInfo,\n                min_score: v,\n              });\n            }}\n          />\n        </SettingItem>\n      ) : null}\n      {showNL2SQLConfig ? (\n        <SettingItem\n          title={I18n.t('kl_write_022')}\n          tip={I18n.t('kl_write_023')}\n        >\n          <Switch\n            checked={use_nl2sql}\n            onChange={value => {\n              onDataSetInfoChange(\n                produce(dataSetInfo, draft =>\n                  recallStrategyUpdater({\n                    datasetInfo: draft,\n                    field: 'use_nl2sql',\n                    value,\n                  }),\n                ),\n              );\n            }}\n          />\n        </SettingItem>\n      ) : null}\n      <SettingItem title={I18n.t('kl_write_024')} tip={<RewriteTips />}>\n        <Switch\n          checked={use_rewrite}\n          onChange={value => {\n            onDataSetInfoChange(\n              produce(dataSetInfo, draft =>\n                recallStrategyUpdater({\n                  datasetInfo: draft,\n                  field: 'use_rewrite',\n                  value,\n                }),\n              ),\n            );\n          }}\n        />\n      </SettingItem>\n      <SettingItem title={I18n.t('kl_write_026')} tip={<RerankTips />}>\n        <Switch\n          checked={use_rerank}\n          onChange={value => {\n            onDataSetInfoChange(\n              produce(dataSetInfo, draft => {\n                const nextState = {\n                  datasetInfo: draft,\n                  field: 'use_rerank',\n                  value,\n                } as const;\n\n                if (!value) {\n                  nextState.datasetInfo.min_score = 0;\n                } else if (!nextState.datasetInfo.min_score) {\n                  nextState.datasetInfo.min_score = DATASET_INFO_MIN_SCORE;\n                }\n\n                return recallStrategyUpdater(nextState);\n              }),\n            );\n          }}\n        />\n      </SettingItem>\n      {FLAGS['bot.data.no_recall_reply'] ? (\n        <div className={styles['setting-source-display']}>\n          <div className={styles['setting-source-display-title']}>\n            {I18n.t('No_recall_001')}\n          </div>\n          <SettingItem\n            title={I18n.t('No_recall_002')}\n            tip={\n              <div className={styles.display_tooltip}>\n                {I18n.t('No_recall_005')}\n              </div>\n            }\n          >\n            <RadioGroupSetting\n              options={getNoRecallReplyOptions()}\n              value={no_recall_reply_mode ?? KnowledgeNoRecallReplyMode.Default}\n              onChange={v =>\n                onDataSetInfoChange({\n                  ...dataSetInfo,\n                  no_recall_reply_mode: v,\n                  no_recall_reply_customize_prompt:\n                    v === KnowledgeNoRecallReplyMode.CustomizePrompt &&\n                    isEmpty(no_recall_reply_customize_prompt)\n                      ? I18n.t('No_recall_006')\n                      : no_recall_reply_customize_prompt,\n                })\n              }\n              disabled={isReadonly}\n            />\n          </SettingItem>\n          {no_recall_reply_mode ===\n          KnowledgeNoRecallReplyMode.CustomizePrompt ? (\n            <Form<Record<string, unknown>>\n              initValues={{\n                no_recall_reply_customize_prompt:\n                  no_recall_reply_customize_prompt ?? I18n.t('No_recall_006'),\n              }}\n            >\n              <Form.TextArea\n                maxLength={500}\n                maxCount={500}\n                ref={textAreaRef}\n                onChange={debounceOnNoRecallReplyCustomizePromptChange}\n                rows={2}\n                disabled={isReadonly}\n                placeholder={I18n.t(\n                  'card_builder_dataEditor_get_errormsg_please_enter',\n                )}\n                pure\n                field=\"no_recall_reply_customize_prompt\"\n              />\n            </Form>\n          ) : null}\n        </div>\n      ) : null}\n      {FLAGS['bot.data.source_display'] && showSourceDisplay ? (\n        <div className={styles['setting-source-display']}>\n          <div\n            className={styles['setting-source-display-title']}\n            data-testid={BotE2e.BotKnowledgeSettingShowSourceDisplayTitle}\n          >\n            {I18n.t('knowledge_source_display_title')}\n          </div>\n          <SettingItem\n            title={I18n.t('knowledge_source_display_status')}\n            tipStyle={{\n              backgroundColor: '#fff',\n              color: 'var(--Light-usage-text---color-text-0, #1D1C24)',\n              maxWidth: '453px',\n              minWidth: '453px',\n            }}\n            tip={\n              <div className={styles.display_tooltip}>\n                <div className={styles.display_tooltip_title}>\n                  {I18n.t('knowledge_source_display_tooltip_title')}\n                </div>\n                <div className={styles.display_tooltip_content}>\n                  <div>\n                    {I18n.t('knowledge_source_display_tooltip_content')}\n                  </div>\n                  <div className={styles.display_tooltip_content_link}>\n                    <div className={styles.link_num}>1.</div>\n                    <div\n                      className={styles.display_tooltip_link}\n                      onClick={() =>\n                        window.open(\n                          `${window.location.origin}${\n                            localeMapLink[language] || '/docs/guides/knowledge'\n                          }`,\n                        )\n                      }\n                    >\n                      {I18n.t('knowledge_source_display_tooltip_link')}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            }\n          >\n            <Switch\n              data-testid={BotE2e.BotKnowledgeSettingShowSourceDisplaySwitch}\n              className={styles.display_status}\n              checked={show_source}\n              disabled={isReadonly}\n              onChange={v => {\n                onDataSetInfoChange({\n                  ...dataSetInfo,\n                  show_source: v,\n                  // Display method has no value and open the display source, the card is selected by default\n                  ...(!show_source_mode && v\n                    ? {\n                        show_source_mode: KnowledgeShowSourceMode.CardList,\n                      }\n                    : {}),\n                });\n              }}\n            />\n          </SettingItem>\n\n          {show_source ? (\n            <SettingItem title={I18n.t('Display format')}>\n              <RadioGroupSetting\n                options={getShowSourceModeOptions()}\n                value={show_source_mode ?? KnowledgeShowSourceMode.ReplyBottom}\n                onChange={v =>\n                  onDataSetInfoChange({ ...dataSetInfo, show_source_mode: v })\n                }\n                disabled={isReadonly}\n              />\n            </SettingItem>\n          ) : null}\n        </div>\n      ) : null}\n    </div>\n  );\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useDataModalWithCoze } from '@coze-data/utils';\nimport { I18n } from '@coze-arch/i18n';\nimport { type ButtonColor } from '@coze-arch/coze-design/types';\n\nexport interface IDeleteModalProps {\n  onDel: () => void | Promise<void>;\n}\n\nexport const useSliceDeleteModal = ({ onDel }: IDeleteModalProps) => {\n  const { modal, open, close } = useDataModalWithCoze({\n    title: I18n.t('delete_title'),\n    cancelText: I18n.t('Cancel'),\n    okText: I18n.t('Delete'),\n    showCloseIcon: false,\n    okButtonColor: 'red' as ButtonColor,\n    okButtonProps: {\n      type: 'danger',\n    },\n    onOk: async () => {\n      await onDel?.();\n      close?.();\n    },\n    onCancel: () => close(),\n  });\n\n  return {\n    node: modal(\n      <div className={'coz-fg-secondary'}>{I18n.t('delete_desc')}</div>,\n    ),\n    delete: open,\n    close,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from 'classnames';\nimport { useRequest } from 'ahooks';\nimport { useDataModalWithCoze } from '@coze-data/utils';\nimport { DataNamespace, dataReporter } from '@coze-data/reporter';\nimport { REPORT_EVENTS } from '@coze-arch/report-events';\nimport { I18n } from '@coze-arch/i18n';\nimport { type ButtonColor } from '@coze-arch/coze-design/types';\nimport { Toast } from '@coze-arch/coze-design';\nimport { CustomError } from '@coze-arch/bot-error';\nimport { KnowledgeApi } from '@coze-arch/bot-api';\n\nimport { DATA_REFACTOR_CLASS_NAME } from '../constant';\n\nexport interface IDeleteUnitModalProps {\n  docId?: string;\n  onDel?: () => void;\n}\n\nexport const useDeleteUnitModal = ({ docId, onDel }: IDeleteUnitModalProps) => {\n  const { run, loading } = useRequest(\n    () => {\n      if (!docId) {\n        throw new CustomError(\n          REPORT_EVENTS.KnowledgeDeleteDocument,\n          `${REPORT_EVENTS.KnowledgeDeleteDocument}: missing doc_id`,\n        );\n      }\n      return KnowledgeApi.DeleteDocument({\n        document_ids: [docId],\n      });\n    },\n    {\n      onSuccess: () => {\n        close?.();\n        onDel?.();\n      },\n      onError: error => {\n        dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n          eventName: REPORT_EVENTS.KnowledgeDeleteDocument,\n          error,\n        });\n        Toast.error({\n          content: 'update fail',\n          showClose: false,\n        });\n      },\n      manual: true,\n    },\n  );\n\n  const { modal, open, close } = useDataModalWithCoze({\n    width: 320,\n    title: I18n.t('kl2_007'),\n    cancelText: I18n.t('Cancel'),\n    okText: I18n.t('Delete'),\n    showCloseIcon: false,\n    okButtonColor: 'red' as ButtonColor,\n    okButtonProps: {\n      loading,\n      type: 'danger',\n    },\n    onOk: () => {\n      run();\n    },\n    onCancel: () => close(),\n  });\n\n  return {\n    node: modal(\n      <div className={classNames('coz-fg-secondary', DATA_REFACTOR_CLASS_NAME)}>\n        {I18n.t('dataset_detail_table_deleteModel_description')}\n      </div>,\n    ),\n    delete: open,\n    close,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { I18n } from '@coze-arch/i18n';\nimport { CustomError } from '@coze-arch/bot-error';\nimport { Toast } from '@coze-arch/coze-design';\n\nexport const getEllipsisCount = (num: number, max: number): string =>\n  num > max ? `${max}+` : `${num}`;\n\nexport const formatBytes = (bytes: number, decimals = 2) => {\n  if (!bytes) {\n    return '0 Byte';\n  }\n\n  const k = 1024;\n  const dm = decimals < 0 ? 0 : decimals;\n  const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n  const i = Math.floor(Math.log(bytes) / Math.log(k));\n\n  const digit = parseFloat((bytes / Math.pow(k, i)).toFixed(dm));\n\n  return `${digit} ${sizes[i]}`;\n};\n\nexport const getBase64 = (file: Blob): Promise<string> =>\n  new Promise((resolve, reject) => {\n    const fileReader = new FileReader();\n    fileReader.onload = event => {\n      const result = event.target?.result;\n\n      if (!result || typeof result !== 'string') {\n        reject(new CustomError('getBase64', 'file read invalid'));\n        return;\n      }\n\n      resolve(result.replace(/^.*?,/, ''));\n    };\n    fileReader.onerror = () => {\n      Toast.error(I18n.t('read_file_failed_please_retry'));\n      reject(new CustomError('getBase64', 'file read fail'));\n    };\n    fileReader.onabort = () => {\n      reject(new CustomError('getBase64', 'file read abort'));\n    };\n    fileReader.readAsDataURL(file);\n  });\n\nexport const getUint8Array = (file: Blob): Promise<Uint8Array> =>\n  new Promise((resolve, reject) => {\n    const fileReader = new FileReader();\n\n    fileReader.onload = event => {\n      if (event.target?.result) {\n        const arrayBuffer = event.target.result as ArrayBuffer;\n        const uint8Array = new Uint8Array(arrayBuffer);\n        resolve(uint8Array);\n      } else {\n        reject(new CustomError('getUint8Array', 'file read invalid'));\n      }\n    };\n\n    fileReader.readAsArrayBuffer(file);\n  });\n\nexport const getFileExtension = (name: string) => {\n  const index = name.lastIndexOf('.');\n  return name.slice(index + 1);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport ImageFail from '../assets/image-fail.png';\n\nexport const transSliceContentOutput = (\n  content: string,\n  ignoreImg = false,\n): string => {\n  /**\n   * 1. Handling img tags\n   * 2. Remove redundant div/span/br tags\n   */\n  const imgPattern = /<img.*?(?:>|\\/>)/gi;\n  const divSPattern = /<div[^>]*>/g;\n  const divEPattern = /<\\/div>/g;\n  const spanSPattern = /<span[^>]*>/g;\n  const spanEPattern = /<\\/span>/g;\n  let newContent = content\n    .replace(divSPattern, '\\n')\n    .replace(divEPattern, '')\n    .replace(spanSPattern, '')\n    .replace(spanEPattern, '')\n    .replace(/<br>/g, '\\n');\n  if (!ignoreImg) {\n    newContent = newContent.replaceAll(imgPattern, v => {\n      const toeKeyPattern = /data-tos-key=[\\'\\\"]?([^\\'\\\"]*)[\\'\\\"]?/i;\n      const srcPattern = /src=[\\'\\\"]?([^\\'\\\"]*)[\\'\\\"]?/i;\n      const tosKeyMatches = v.match(toeKeyPattern);\n      const srcMatches = v.match(srcPattern);\n      if (tosKeyMatches?.[1]) {\n        return `<img src=\"\" data-tos-key=\"${tosKeyMatches?.[1]}\" >`;\n      }\n      return `<img src=\"${srcMatches?.[1] || ''}\" >`;\n    });\n  }\n  return newContent;\n};\n\n// eslint-disable-next-line @typescript-eslint/no-magic-numbers\nconst LIMIT_SIZE = 20 * 1024 * 1024;\nexport const isValidSize = (size: number) => LIMIT_SIZE > size;\n\nexport const transSliceContentInput = (content: string): string => {\n  const newContent = content.replaceAll('\\n', '<br>');\n  return newContent;\n};\n\nexport const transSliceContentInputWithSave = (content: string) => {\n  // Replace < br > with\\ n\n  const contentWithNewLine = content.replace(/<br>/g, '\\n');\n\n  // Replace < span > with empty\n  const finalContent = contentWithNewLine\n    .replace(/<span>/g, '')\n    .replace(/<\\/span>/g, '');\n  return finalContent;\n};\n\nexport const imageOnLoad = (e: Event) => {\n  if (e.target) {\n    (e.target as HTMLImageElement).style.width = 'auto';\n    (e.target as HTMLImageElement).style.height = 'auto';\n    (e.target as HTMLImageElement).style.background = 'transparent';\n  }\n};\n\nexport const imageOnError = (e: Event) => {\n  if (e.target) {\n    (e.target as HTMLImageElement).src = ImageFail;\n  }\n};\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useState, type ComponentProps } from 'react';\n\nimport { ImageRender } from '@coze-common/table-view';\nimport { I18n } from '@coze-arch/i18n';\nimport { ColumnType } from '@coze-arch/bot-api/memory';\nimport { IconCozImage } from '@coze-arch/coze-design/icons';\nimport { TextArea, Button, Modal } from '@coze-arch/coze-design';\n\nimport { type TableDataItem } from './hooks';\n\nimport styles from './index.module.less';\n\nexport interface TableSegmentModalProps extends ComponentProps<typeof Modal> {\n  tableData: TableDataItem[];\n  canEdit: boolean;\n  handleTextAreaChange: (index: number, value: string) => void;\n  onCancel: (e: React.MouseEvent<Element, MouseEvent>) => void;\n  onSubmit: () => void;\n  loading?: boolean;\n}\n\ninterface RenderFooterProps {\n  loading?: boolean;\n  onCancel: (e: React.MouseEvent<Element, MouseEvent>) => void;\n  onSubmit: (e: React.MouseEvent<Element, MouseEvent>) => void;\n}\n\ninterface TableColumn {\n  key: string;\n  title: string;\n  render?: (item: TableDataItem, index: number) => React.ReactNode;\n}\n\ninterface TableSegmentContentProps {\n  columns: TableColumn[];\n  tableData: TableDataItem[];\n  canEdit: boolean;\n  handleTextAreaChange: (index: number, value: string) => void;\n}\n\nexport const getSrcFromImg = (str: string): string[] => {\n  if (!str) {\n    return [];\n  }\n  const imgRegx = /<img[^>]+src\\s*=\\s*['\"]([^'\"]+)['\"][^>]*>/g;\n  // Matching using regular expressions\n  const matches = str.match(imgRegx);\n\n  // Extract the value of the src attribute from the matching result\n  const srcList: string[] = [];\n  if (matches) {\n    for (const match of matches) {\n      const src = match.match(/src\\s*=\\s*['\"]([^'\"]+)['\"]/)?.[1];\n      if (src) {\n        srcList.push(src);\n      }\n    }\n  }\n  return srcList;\n};\n\nconst TableSegmentContent: React.FC<TableSegmentContentProps> = ({\n  columns,\n  tableData,\n  canEdit,\n}) => (\n  <div\n    className={`${styles['table-content-modal']} ${\n      canEdit ? '' : styles['has-preview-modal']\n    }`}\n  >\n    <div className={styles['table-header']}>\n      <div className={`${styles['table-row']} ${styles['header-row']}`}>\n        {columns.map(column => (\n          <div key={column.key} className={styles[column.key]}>\n            {column.title}\n          </div>\n        ))}\n      </div>\n    </div>\n    <div className={styles['table-body']}>\n      {tableData.map((item, index) => (\n        <div\n          className={`${styles['table-row']} ${styles['tbody-row']}`}\n          key={index}\n        >\n          {columns.map(column => (\n            <div key={column.key} className={styles[column.key]}>\n              {typeof column.render === 'function'\n                ? column.render(item, index)\n                : item[column.key as keyof TableDataItem]}\n            </div>\n          ))}\n        </div>\n      ))}\n    </div>\n  </div>\n);\n\nconst RenderFooter: React.FC<RenderFooterProps> = ({ ...modalProps }) => (\n  <>\n    <Button color=\"primary\" onClick={modalProps.onCancel}>\n      {I18n.t('datasets_createFileModel_CancelBtn')}\n    </Button>\n    <Button\n      loading={modalProps.loading}\n      onClick={e => {\n        modalProps.onSubmit?.(e);\n      }}\n    >\n      {I18n.t('datasets_segment_detailModel_save')}\n    </Button>\n  </>\n);\nconst OptimizedTextArea: React.FC<{\n  index: number;\n  value?: string;\n  disabled: boolean;\n  error?: string;\n  handleTextAreaChange: (index: number, value: string) => void;\n}> = React.memo(\n  ({ index, disabled, error, value: initialValue, handleTextAreaChange }) => {\n    const [value, setValue] = useState(initialValue);\n\n    const onBlur = () => handleTextAreaChange(index, value || '');\n\n    return (\n      <TextArea\n        disabled={disabled}\n        value={value}\n        onChange={setValue}\n        onBlur={onBlur}\n        autosize={{ minRows: 1, maxRows: 3 }}\n        maxLength={2000}\n        style={{ border: error ? '1px solid #F93920' : '' }}\n      />\n    );\n  },\n);\n\nconst ImageEmpty = (props: { onClick?: () => void }) => (\n  <Button\n    color=\"highlight\"\n    icon={<IconCozImage className=\"text-[14px]\" />}\n    {...props}\n  >\n    {I18n.t('knowledge_insert_img_002')}\n  </Button>\n);\nexport const TableSegmentModal: React.FC<TableSegmentModalProps> = ({\n  onCancel,\n  onSubmit,\n  tableData,\n  canEdit,\n  handleTextAreaChange,\n  loading,\n  ...modalProps\n}) => {\n  const columns: TableColumn[] = [\n    {\n      key: 'column_name',\n      title: I18n.t('datasets_segment_tableStructure_field_name'),\n    },\n    {\n      key: 'is_semantic',\n      title: I18n.t('datasets_segment_tableStructure_semantic_name'),\n      render: item =>\n        item.is_semantic\n          ? I18n.t('datasets_segment_tableStructure_semantic_yes')\n          : I18n.t('datasets_segment_tableStructure_semantic_no'),\n    },\n    {\n      key: 'value',\n      title: I18n.t('datasets_segment_tableStructure_field_value'),\n      render: (item, index) =>\n        item.column_type === ColumnType.Image ? (\n          <div className={styles['image-render-wrapper']}>\n            <ImageRender\n              className={\n                item.value ? 'modal-image-render' : 'modal-empty-image-render'\n              }\n              customEmpty={props => <ImageEmpty {...(props || {})} />}\n              srcList={getSrcFromImg(item.value)}\n              onChange={(src, tosKey) => {\n                let val = '';\n                if (src || tosKey) {\n                  val = `<img src=\"${src ?? ''}\" ${\n                    tosKey ? `data-tos-key=\"${tosKey}\"` : ''\n                  }>`;\n                }\n                handleTextAreaChange(index, val);\n              }}\n            />\n          </div>\n        ) : (\n          <div>\n            <OptimizedTextArea\n              index={index}\n              disabled={!canEdit}\n              value={item.value}\n              handleTextAreaChange={handleTextAreaChange}\n              error={item.error}\n            />\n            {item.error ? (\n              <div className={styles['error-tips']}>{item.error}</div>\n            ) : null}\n          </div>\n        ),\n    },\n  ];\n\n  return (\n    <Modal\n      size=\"medium\"\n      centered\n      maskClosable={false}\n      keepDOM={false}\n      onCancel={onCancel}\n      footer={\n        <RenderFooter\n          onCancel={onCancel}\n          loading={loading}\n          onSubmit={() => {\n            onSubmit();\n          }}\n        />\n      }\n      {...modalProps}\n    >\n      <TableSegmentContent\n        tableData={tableData}\n        canEdit={canEdit}\n        columns={columns}\n        handleTextAreaChange={handleTextAreaChange}\n      />\n    </Modal>\n  );\n};\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC, type PropsWithChildren } from 'react';\n\nimport { I18n } from '@coze-arch/i18n';\nimport { Popover } from '@coze-arch/bot-semi';\n\nimport styles from './index.module.less';\n\nexport const FilePopover: FC<\n  PropsWithChildren<{\n    fileNames: string[];\n    showTitle?: boolean;\n  }>\n> = ({ fileNames = [], showTitle = true, children }) => (\n  <Popover\n    className={styles.popover}\n    content={\n      <div>\n        {showTitle ? <p>{I18n.t('datasets_processing_notice')}</p> : null}\n        <p>{fileNames.join('\\n')}</p>\n      </div>\n    }\n  >\n    {children}\n  </Popover>\n);\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport { unix } from 'dayjs';\nimport cs from 'classnames';\nimport { useBoolean } from 'ahooks';\nimport { IconSpin } from '@douyinfe/semi-icons';\nimport { BotE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport { useSpaceStore } from '@coze-arch/bot-studio-store';\nimport { type ButtonProps } from '@coze-arch/bot-semi/Button';\nimport {\n  UITag,\n  UIButton,\n  Typography,\n  Space,\n  Avatar,\n  Popover,\n} from '@coze-arch/bot-semi';\nimport { IconNote } from '@coze-arch/bot-icons';\nimport {\n  OrderField,\n  type Dataset,\n  DatasetStatus,\n  StorageLocation,\n} from '@coze-arch/bot-api/knowledge';\nimport { SpaceType } from '@coze-arch/bot-api/developer_api';\n\nimport { getEllipsisCount, formatBytes } from '../../utils';\nimport { FilePopover } from './components';\n\nimport styles from './index.module.less';\n\nconst { Text } = Typography;\n\nexport interface DatasetCardListVerticalOperations {\n  onAdd: (dataset: Dataset) => void | Promise<void>;\n  onRemove: (dataset: Dataset) => void | Promise<void>;\n  isAdded: (id: string) => boolean;\n}\n\nfunction AddedButton(buttonProps: ButtonProps) {\n  const [isMouseIn, { setFalse, setTrue }] = useBoolean(false);\n\n  const onMouseEnter = () => {\n    setTrue();\n  };\n  const onMouseLeave = () => {\n    setFalse();\n  };\n\n  return (\n    <UIButton\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n      {...buttonProps}\n      className={cs({\n        [buttonProps.className || '']: Boolean(buttonProps.className),\n        [styles.addedMouseIn]: isMouseIn,\n      })}\n    >\n      {isMouseIn ? I18n.t('Remove') : I18n.t('Added')}\n    </UIButton>\n  );\n}\n\nexport type DatasetCardListVerticalProps = DatasetCardListVerticalOperations & {\n  list: Dataset[];\n  loading: boolean;\n  noMore: boolean;\n  searchType: OrderField;\n  onClickKnowledgeDetail?: (knowledgeID: string) => void;\n};\n\nconst DEFAULT_BOT_NUM = 99;\n\nconst SpaceTags = (item: Dataset) => (\n  <Space className={styles.tags} wrap>\n    {item.processing_file_list?.length ? (\n      <FilePopover fileNames={item.processing_file_list || []}>\n        <UITag color=\"teal\" className={styles['file-list']}>\n          {I18n.t('dataset_data_processing_tag', {\n            num: item.processing_file_list?.length || 0,\n          })}\n        </UITag>\n      </FilePopover>\n    ) : null}\n    <UITag color=\"grey\">\n      {formatBytes(parseInt(String(item.all_file_size)))}\n    </UITag>\n    {item.file_list?.length ? (\n      <Popover\n        trigger=\"hover\"\n        showArrow\n        content={\n          <div className={styles['file-list-details']}>\n            <div className={styles['dataset-name']}>{item.name || ''}</div>\n            <div className={styles['file-info']}>\n              {item.file_list?.map(fileInfo => (\n                <div className={styles['file-info-item']} key={fileInfo}>\n                  <IconNote className={styles['icon-note']} />\n                  {fileInfo}\n                </div>\n              ))}\n            </div>\n          </div>\n        }\n      >\n        <UITag color=\"grey\">\n          {I18n.t('dataset_bot_count_tag', {\n            num: getEllipsisCount(item.file_list?.length || 0, DEFAULT_BOT_NUM),\n          })}\n        </UITag>\n      </Popover>\n    ) : (\n      <UITag color=\"grey\">\n        {I18n.t('dataset_bot_count_tag', {\n          num: getEllipsisCount(item.file_list?.length || 0, DEFAULT_BOT_NUM),\n        })}\n      </UITag>\n    )}\n    {item.storage_location === StorageLocation.OpenSearch ? (\n      <UITag color=\"cyan\">{I18n.t('knowledge_es_001')}</UITag>\n    ) : null}\n  </Space>\n);\n\nexport const KnowledgeCardListVertical: FC<DatasetCardListVerticalProps> = ({\n  list,\n  loading,\n  noMore,\n  onAdd,\n  onRemove,\n  isAdded,\n  searchType,\n  onClickKnowledgeDetail,\n}) => {\n  const { id: spaceId, space_type } = useSpaceStore(s => s.space);\n\n  const isPersonal = space_type === SpaceType.Personal;\n\n  const handleRow = (e: { stopPropagation: () => void }, id: string) => {\n    e.stopPropagation();\n    if (onClickKnowledgeDetail) {\n      onClickKnowledgeDetail(id);\n    } else {\n      window.open(`/space/${spaceId}/knowledge/${id}`);\n    }\n  };\n\n  return (\n    <div className={styles.container}>\n      {list.map(item => (\n        <div\n          className={styles.item}\n          key={item.dataset_id || ''}\n          onClick={e => handleRow(e, item?.dataset_id || '')}\n        >\n          <Avatar shape=\"square\" src={item.icon_url} className={styles.left} />\n\n          <div\n            className={styles.content}\n            data-testid={`${BotE2e.BotKnowledgeSelectListModalName}.${item.name}`}\n            data-dtestid={`${BotE2e.BotKnowledgeSelectListModalName}.${item.name}`}\n          >\n            <Text className={styles.title} ellipsis={{ showTooltip: true }}>\n              {item.name || ''}\n            </Text>\n\n            {item.description ? (\n              <Typography.Text\n                className={styles.description}\n                ellipsis={{ rows: 1 }}\n              >\n                {item.description}\n              </Typography.Text>\n            ) : null}\n            {!item.description && !!item.file_list?.length && (\n              <Typography.Text\n                className={styles.description}\n                ellipsis={{ rows: 1 }}\n              >\n                {item.file_list?.join('')}\n              </Typography.Text>\n            )}\n\n            <div className={styles['tags-wapper']}>\n              <SpaceTags {...item}></SpaceTags>\n\n              <div className={styles.info}>\n                {!isPersonal && (\n                  <>\n                    <Avatar\n                      src={item.avatar_url}\n                      style={{ width: 14, height: 14 }}\n                    />\n                    <Text\n                      className={cs(styles.creator)}\n                      ellipsis={{ showTooltip: true }}\n                    >\n                      {item.creator_name || ''}\n                    </Text>\n                    <span className={styles['border-right']}></span>\n                  </>\n                )}\n                {searchType === OrderField.CreateTime ? (\n                  <span className={styles.creator}>\n                    {I18n.t('dataset_bot_create_time_knowledge', {\n                      time: unix(item.create_time || 0).format(\n                        'YYYY-MM-DD HH:mm',\n                      ),\n                    })}\n                  </span>\n                ) : (\n                  <span className={styles.creator}>\n                    {I18n.t('dataset_bot_update_time_knowledge', {\n                      time: unix(item.update_time || 0).format(\n                        'YYYY-MM-DD HH:mm',\n                      ),\n                    })}\n                  </span>\n                )}\n              </div>\n            </div>\n          </div>\n\n          <div\n            className={styles.right}\n            onClick={e => e.stopPropagation()}\n            data-testid={`${BotE2e.BotKnowledgeSelectListModalAddBtn}.${item.name}`}\n          >\n            {isAdded(item.dataset_id || '') ? (\n              <AddedButton\n                className={cs(styles.button, styles.added)}\n                onClick={() => onRemove(item)}\n              >\n                {I18n.t('Added')}\n              </AddedButton>\n            ) : (\n              <UIButton\n                disabled={item.status === DatasetStatus.DatasetForbid}\n                className={styles.button}\n                onClick={() => onAdd(item)}\n                data-testid=\"bot.database.add.modal.add.button\"\n              >\n                {I18n.t('Add_2')}\n              </UIButton>\n            )}\n          </div>\n        </div>\n      ))}\n      {loading ? (\n        <div className={styles['loading-more']}>\n          <IconSpin spin style={{ marginRight: '4px' }} />\n          <div>{I18n.t('Loading')}</div>\n        </div>\n      ) : null}\n      {noMore ? (\n        <div className={styles['no-more']}>\n          <div>{I18n.t('No_more')}</div>\n        </div>\n      ) : null}\n    </div>\n  );\n};\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { FC, ReactNode } from 'react';\n\nimport classNames from 'classnames';\nimport { useBotInfoStore } from '@coze-studio/bot-detail-store/bot-info';\nimport { type FilterKnowledgeType } from '@coze-data/utils';\nimport { type UnitType } from '@coze-data/knowledge-resource-processor-core';\nimport { EVENT_NAMES, sendTeaEvent } from '@coze-arch/bot-tea';\nimport { type Dataset } from '@coze-arch/bot-api/knowledge';\n\nimport { DATA_REFACTOR_CLASS_NAME } from '@/constant';\n\nimport {\n  useKnowledgeFilter,\n  Scene,\n  type DatasetFilterType,\n} from './use-knowledge-filter';\nimport { KnowledgeCardListVertical } from './knowledge-card-list';\n\nimport s from './index.module.less';\n\nexport interface DataSetModalContentProps {\n  datasetList: Dataset[];\n  onDatasetListChange: (list: Dataset[]) => void;\n  onClickAddKnowledge?: (\n    datasetId: string,\n    type: UnitType,\n    shouldUpload?: boolean,\n  ) => void;\n  beforeCreate?: (shouldUpload: boolean) => void;\n  onClickKnowledgeDetail?: (knowledgeID: string) => void;\n  canCreate?: boolean;\n  defaultType?: FilterKnowledgeType;\n  knowledgeTypeConfigList?: FilterKnowledgeType[];\n\n  projectID?: string;\n  showFilters?: DatasetFilterType[];\n  hideHeader?: boolean;\n  createKnowledgeModal?: {\n    modal: ReactNode;\n    open: () => void;\n    close: () => void;\n  };\n}\n\nconst useKnowledgeListModalContent = ({\n  datasetList,\n  onDatasetListChange,\n  onClickAddKnowledge,\n  beforeCreate,\n  onClickKnowledgeDetail,\n  canCreate = true,\n  defaultType,\n  knowledgeTypeConfigList,\n  projectID,\n  showFilters = ['scope-type', 'search-type', 'query-input'],\n  hideHeader,\n  createKnowledgeModal,\n}: DataSetModalContentProps) => {\n  const botId = useBotInfoStore(state => state.botId);\n\n  const { renderContentFilter, renderSearch, renderCreateBtn, renderFilters } =\n    useKnowledgeFilter({\n      hideHeader,\n      showFilters,\n      scene: Scene.MODAL,\n      headerClassName: classNames(\n        s['dataset-header'],\n        DATA_REFACTOR_CLASS_NAME,\n      ),\n      onClickAddKnowledge,\n      beforeCreate,\n      canCreate,\n      defaultType,\n      knowledgeTypeConfigList,\n      projectID,\n      createKnowledgeModal,\n      children: ({ list, loading, noMore, searchType }) => (\n        <KnowledgeCardListVertical\n          searchType={searchType}\n          noMore={noMore}\n          list={list}\n          loading={loading}\n          onAdd={async dataset => {\n            await onDatasetListChange([...datasetList, dataset]);\n            sendTeaEvent(EVENT_NAMES.click_database_select, {\n              operation: 'add',\n              bot_id: botId,\n            });\n            // Toast.success({\n            //   showClose: false,\n            //   content: I18n.t('bot_edit_dataset_added_toast', {\n            //     dataset_name: dataset.name || '',\n            //   }),\n            //   style: {\n            //     wordWrap: 'break-word',\n            //   },\n            // });\n          }}\n          onRemove={dataset => {\n            onDatasetListChange(\n              datasetList.filter(\n                item => item.dataset_id !== dataset.dataset_id,\n              ),\n            );\n            sendTeaEvent(EVENT_NAMES.click_database_select, {\n              operation: 'remove',\n              bot_id: botId,\n            });\n            // Toast.success({\n            //   showClose: false,\n            //   content: I18n.t('bot_edit_dataset_removed_toast', {\n            //     dataset_name: dataset.name || '',\n            //   }),\n            //   style: {\n            //     wordWrap: 'break-word',\n            //   },\n            // });\n          }}\n          isAdded={id => datasetList.some(dataset => dataset.dataset_id === id)}\n          onClickKnowledgeDetail={onClickKnowledgeDetail}\n        />\n      ),\n    });\n\n  return {\n    renderContent: renderContentFilter,\n    renderSearch,\n    renderCreateBtn,\n    renderFilters,\n  };\n};\n\nconst KnowledgeListModalContent: FC<DataSetModalContentProps> = ({\n  datasetList,\n  onDatasetListChange,\n  onClickAddKnowledge,\n  beforeCreate,\n  onClickKnowledgeDetail,\n  canCreate = true,\n  defaultType,\n  knowledgeTypeConfigList,\n  projectID,\n  createKnowledgeModal,\n}) => {\n  const { renderContent } = useKnowledgeListModalContent({\n    datasetList,\n    onDatasetListChange,\n    onClickAddKnowledge,\n    beforeCreate,\n    onClickKnowledgeDetail,\n    canCreate,\n    defaultType,\n    knowledgeTypeConfigList,\n    projectID,\n    createKnowledgeModal,\n  });\n\n  return <>{renderContent()}</>;\n};\n\nexport { useKnowledgeListModalContent, KnowledgeListModalContent };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from 'classnames';\nimport { IconCozKnowledgeFill } from '@coze-arch/coze-design/icons';\n\ninterface SiderCategoryProps {\n  label: string;\n  selected: boolean;\n\n  onClick?: React.MouseEventHandler<HTMLDivElement>;\n}\n\nconst SiderCategory = ({ label, onClick, selected }: SiderCategoryProps) => (\n  <div\n    onClick={onClick}\n    className={classNames([\n      'flex items-center gap-[8px] px-[12px]',\n      'px-[12px] py-[6px] rounded-[8px]',\n      'cursor-pointer',\n      'hover:text-[var(--light-usage-text-color-text-0,#1c1f23)]',\n      'hover:bg-[var(--light-usage-fill-color-fill-0,rgba(46,50,56,5%))]',\n      selected &&\n        'text-[var(--light-usage-text-color-text-0,#1c1d23)] bg-[var(--light-usage-fill-color-fill-0,rgba(46,47,56,5%))]',\n    ])}\n  >\n    <IconCozKnowledgeFill />\n    {label}\n  </div>\n);\n\nexport default SiderCategory;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState } from 'react';\n\nimport classNames from 'classnames';\nimport { FilterKnowledgeType } from '@coze-data/utils';\nimport { type UnitType } from '@coze-data/knowledge-resource-processor-core';\nimport { I18n } from '@coze-arch/i18n';\nimport {\n  type UIModalProps,\n  UICompositionModal,\n  UICompositionModalSider,\n  UICompositionModalMain,\n} from '@coze-arch/bot-semi';\nimport { type Dataset } from '@coze-arch/bot-api/knowledge';\n\nimport { DATA_REFACTOR_CLASS_NAME } from '@/constant';\n\nimport {\n  useKnowledgeListModalContent,\n  KnowledgeListModalContent,\n} from './use-content';\nimport SiderCategory from './sider-category';\n\nimport styles from './index.module.less';\n\nexport interface UseKnowledgeListModalParams {\n  datasetList: Dataset[];\n  onDatasetListChange: (list: Dataset[]) => void;\n  onClickAddKnowledge?: (\n    datasetId: string,\n    type: UnitType,\n    shouldUpload?: boolean,\n  ) => void;\n  beforeCreate?: (shouldUpload: boolean) => void;\n  onClickKnowledgeDetail?: (knowledgeID: string) => void;\n  modalProps?: UIModalProps;\n  canCreate?: boolean;\n  defaultType?: FilterKnowledgeType;\n  knowledgeTypeConfigList?: FilterKnowledgeType[];\n\n  projectID?: string;\n  hideCreate?: boolean;\n  createKnowledgeModal?: {\n    modal: React.ReactNode;\n    open: () => void;\n    close: () => void;\n  };\n}\n\nexport interface UseKnowledgeListReturnValue {\n  node: JSX.Element;\n  open: () => void;\n  close: () => void;\n}\n\nexport const useKnowledgeListModal = ({\n  datasetList,\n  onDatasetListChange,\n  onClickAddKnowledge,\n  beforeCreate,\n  onClickKnowledgeDetail,\n  modalProps,\n  canCreate = true,\n  defaultType,\n  knowledgeTypeConfigList,\n  projectID,\n  hideCreate,\n  createKnowledgeModal,\n}: UseKnowledgeListModalParams): UseKnowledgeListReturnValue => {\n  const [visible, setVisible] = useState(false);\n\n  const [category, setCategory] = useState<'library' | 'project'>(\n    projectID ? 'project' : 'library',\n  );\n\n  const handleClose = () => {\n    setVisible(false);\n  };\n\n  const handleOpen = () => {\n    setVisible(true);\n  };\n\n  const { renderContent, renderSearch, renderCreateBtn, renderFilters } =\n    useKnowledgeListModalContent({\n      hideHeader: true,\n      showFilters: ['scope-type', 'search-type'],\n      datasetList,\n      onDatasetListChange,\n      onClickAddKnowledge,\n      beforeCreate,\n      onClickKnowledgeDetail,\n      canCreate,\n      defaultType,\n      knowledgeTypeConfigList,\n      // Need to optimize attribute selection\n      projectID: category === 'project' ? projectID : '',\n      createKnowledgeModal,\n    });\n\n  return {\n    node: (\n      <UICompositionModal\n        type=\"base-composition\"\n        header={I18n.t('dataset_set_title')}\n        visible={visible}\n        className={classNames(\n          styles.modal,\n          styles['upgrade-level'],\n          DATA_REFACTOR_CLASS_NAME,\n        )}\n        centered\n        onCancel={handleClose}\n        filter={\n          <div className=\"flex justify-between gap-[24px]\">\n            {renderFilters()}\n          </div>\n        }\n        sider={\n          <UICompositionModalSider className=\"!pt-[16px]\">\n            <UICompositionModalSider.Header className=\"flex flex-col gap-[16px]\">\n              {renderSearch()}\n              {hideCreate ? null : renderCreateBtn()}\n            </UICompositionModalSider.Header>\n            <UICompositionModalSider.Content className=\"flex flex-col gap-[4px] mt-[16px]\">\n              <SiderCategory\n                label={I18n.t('project_resource_modal_library_resources', {\n                  resource: I18n.t('resource_type_knowledge'),\n                })}\n                onClick={() => {\n                  setCategory('library');\n                }}\n                selected={category === 'library'}\n              />\n              {projectID ? (\n                <SiderCategory\n                  label={I18n.t('project_resource_modal_project_resources', {\n                    resource: I18n.t('resource_type_knowledge'),\n                  })}\n                  onClick={() => {\n                    setCategory('project');\n                  }}\n                  selected={category === 'project'}\n                />\n              ) : null}\n            </UICompositionModalSider.Content>\n          </UICompositionModalSider>\n        }\n        content={\n          <UICompositionModalMain className=\"px-[12px]\">\n            {renderContent()}\n          </UICompositionModalMain>\n        }\n        {...modalProps}\n      ></UICompositionModal>\n    ),\n    close: handleClose,\n    open: handleOpen,\n  };\n};\n\nexport { KnowledgeCard } from './knowledge-card';\nexport {\n  KnowledgeListModalContent,\n  useKnowledgeListModalContent,\n  FilterKnowledgeType,\n};\n\nexport { KnowledgeCardListVertical } from './knowledge-card-list';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useRef, useState } from 'react';\n\nimport { useRequest } from 'ahooks';\nimport {\n  getUpdateIntervalOptions,\n  DocumentUpdateInterval,\n  useDataModalWithCoze,\n} from '@coze-data/utils';\nimport { DataNamespace, dataReporter } from '@coze-data/reporter';\nimport { REPORT_EVENTS } from '@coze-arch/report-events';\nimport { I18n } from '@coze-arch/i18n';\nimport { type FormState } from '@coze-arch/bot-semi/Form';\nimport { CustomError } from '@coze-arch/bot-error';\nimport { DocumentUpdateType } from '@coze-arch/bot-api/memory';\nimport {\n  type FormatType,\n  type DocumentSource,\n  UpdateType,\n} from '@coze-arch/bot-api/knowledge';\nimport { KnowledgeApi } from '@coze-arch/bot-api';\nimport { Form, FormSelect } from '@coze-arch/coze-design';\n\nimport { DATA_REFACTOR_CLASS_NAME } from '../constant';\n\nexport interface DataType {\n  updateType?: number;\n  updateInterval?: number;\n}\nexport interface UseUpdateFrequencyModalProps {\n  docId?: string;\n  onFinish?: (formData: DataType) => void;\n  type?: FormatType;\n  documentSource?: DocumentSource;\n}\n\nexport const useUpdateFrequencyModal = (\n  props: UseUpdateFrequencyModalProps,\n) => {\n  const formRef = useRef<Form>(null);\n\n  const { docId, documentSource } = props;\n  const [content, setContent] = useState<DataType>({\n    updateType: DocumentUpdateType.NoUpdate,\n    updateInterval: DocumentUpdateInterval.EveryDay,\n  });\n  const [, setDisabled] = useState<boolean>(false);\n  const { run, loading } = useRequest(\n    async () => {\n      if (!docId) {\n        throw new CustomError(\n          REPORT_EVENTS.KnowledgeUpdateDocumentFrequency,\n          `${REPORT_EVENTS.KnowledgeUpdateDocumentFrequency}: missing doc_id`,\n        );\n      }\n      const formData = formRef.current?.formApi.getValues();\n      await KnowledgeApi.UpdateDocument({\n        document_id: docId,\n        update_rule: {\n          update_type: formData.updateInterval ? UpdateType.Cover : 0,\n          update_interval: formData.updateInterval,\n        },\n      });\n      return {\n        updateType: formData.updateInterval ? UpdateType.Cover : 0,\n        updateInterval: formData.updateInterval,\n      };\n    },\n    {\n      manual: true,\n      onSuccess: () => {\n        close();\n        props?.onFinish?.(content);\n      },\n      onError: error => {\n        dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n          eventName: REPORT_EVENTS.KnowledgeUpdateDocumentFrequency,\n          error,\n        });\n      },\n    },\n  );\n\n  const { modal, open, close } = useDataModalWithCoze({\n    title: I18n.t('datasets_segment_Update'),\n    centered: true,\n    cancelText: I18n.t('Cancel'),\n    okText: I18n.t('Confirm'),\n    okButtonProps: {\n      loading,\n    },\n    onOk: () => {\n      run();\n    },\n    onCancel: () => close(),\n  });\n  const onChange = (object: FormState<DataType>) => {\n    if (object.values) {\n      setContent(object.values);\n      setDisabled(object.values?.updateInterval === 0);\n    }\n  };\n  return {\n    node: modal(\n      <Form<DataType>\n        className={DATA_REFACTOR_CLASS_NAME}\n        showValidateIcon={false}\n        labelPosition=\"top\"\n        ref={formRef}\n        initValues={content}\n        onChange={onChange}\n      >\n        <FormSelect\n          field=\"updateInterval\"\n          label={I18n.t('datasets_frequencyModal_frequency')}\n          placeholder={I18n.t('datasets_frequencyModal_frequency')}\n          style={{ width: '100%' }}\n          optionList={getUpdateIntervalOptions({ documentSource })}\n        ></FormSelect>\n        {/* <FormSelect\n          field=\"updateType\"\n          label={I18n.t('datasets_frequencyModal_whenUpdate')}\n          placeholder={I18n.t('datasets_update_type')}\n          style={{ width: '100%', marginBottom: 20 }}\n          optionList={getUpdateTypeOptions(type)}\n          disabled={disabled}\n        ></FormSelect> */}\n      </Form>,\n    ),\n    edit: (editContent: DataType) => {\n      setContent(editContent);\n      setDisabled(editContent.updateInterval === 0);\n      open();\n    },\n    close,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  IconCozDicumentOnline,\n  IconCozDocument,\n  IconCozGoogleDriveFill,\n  IconCozLarkFill,\n  IconCozNotionFill,\n  IconCozPencilPaper,\n  IconCozWechatFill,\n} from '@coze-arch/coze-design/icons';\nimport { DocumentSource } from '@coze-arch/bot-api/knowledge';\n\ntype TDocumentSource = {\n  [key in DocumentSource]: JSX.Element | string;\n};\n\nexport const ICON_MAP: TDocumentSource = {\n  [DocumentSource.Document]: (\n    <IconCozDocument className=\"text-[16px] mr-[8px]\" />\n  ),\n  [DocumentSource.Web]: (\n    <IconCozDicumentOnline className=\"text-[16px] mr-[8px]\" />\n  ),\n  [DocumentSource.FrontCrawl]: (\n    <IconCozDicumentOnline className=\"text-[16px]\" />\n  ),\n  [DocumentSource.Notion]: (\n    <IconCozNotionFill className=\"text-[16px] mr-[8px]\" />\n  ),\n  [DocumentSource.FeishuWeb]: (\n    <IconCozLarkFill className=\"text-[16px] mr-[8px]\" />\n  ),\n  [DocumentSource.GoogleDrive]: (\n    <IconCozGoogleDriveFill className=\"text-[16px] mr-[8px]\" />\n  ),\n  [DocumentSource.OpenApi]: (\n    <IconCozPencilPaper className=\"text-[16px] mr-[8px]\" />\n  ),\n  [DocumentSource.Custom]: (\n    <IconCozPencilPaper className=\"text-[16px] mr-[8px]\" />\n  ),\n  [DocumentSource.ThirdParty]: '',\n  [DocumentSource.LarkWeb]: (\n    <IconCozLarkFill className=\"text-[16px] mr-[8px]\" />\n  ),\n  [DocumentSource.WeChat]: (\n    <IconCozWechatFill className=\"text-[16px] mr-[8px]\" />\n  ),\n};\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, useState } from 'react';\n\nimport { useDataModalWithCoze } from '@coze-data/utils';\nimport { I18n } from '@coze-arch/i18n';\nimport { TextArea } from '@coze-arch/coze-design';\n\nexport interface IEditUnitNameProps {\n  name: string;\n  onOk?: (val: string) => void;\n}\n\nexport const useEditUnitNameModal = (props: IEditUnitNameProps) => {\n  const { name, onOk } = props;\n  const [value, setValue] = useState(name);\n  useEffect(() => {\n    setValue(name);\n  }, [name]);\n  const onColse = () => {\n    close();\n    setValue(name);\n  };\n  const { modal, open, close } = useDataModalWithCoze({\n    width: 480,\n    title: I18n.t('knowledge_edit_unit_name_title'),\n    cancelText: I18n.t('Cancel'),\n    okText: I18n.t('Confirm'),\n    okButtonProps: {\n      disabled: !value,\n    },\n    onOk: () => {\n      onColse();\n      onOk?.(value);\n    },\n    onCancel: onColse,\n  });\n  return {\n    node: modal(\n      <TextArea\n        value={value}\n        onChange={setValue}\n        maxCount={100}\n        maxLength={100}\n        rows={3}\n      />,\n    ),\n    open,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState } from 'react';\n\nimport { I18n } from '@coze-arch/i18n';\nimport { FrequencyType } from '@coze-arch/bot-api/memory';\nimport { type AuthFrequencyInfo } from '@coze-arch/bot-api/knowledge';\nimport { Select } from '@coze-arch/coze-design';\n\ninterface AccountFrequencyItemProps {\n  accountInfo: AuthFrequencyInfo;\n  onFrequencyChange: (account: AuthFrequencyInfo) => void;\n}\n\n// TODO: hzf needs to be changed to i18n.\nconst FREQUENCY_OPTIONS = [\n  { label: I18n.t('knowledge_weixin_015'), value: FrequencyType.None },\n  { label: I18n.t('knowledge_weixin_016'), value: FrequencyType.EveryDay },\n  { label: I18n.t('knowledge_weixin_017'), value: FrequencyType.EveryThreeDay },\n  { label: I18n.t('knowledge_weixin_018'), value: FrequencyType.EverySevenDay },\n];\n\nexport const AccountFrequencyItem = ({\n  accountInfo,\n  onFrequencyChange,\n}: AccountFrequencyItemProps) => {\n  const [frequency, setFrequency] = useState<FrequencyType>(\n    accountInfo.auth_frequency_type,\n  );\n\n  const handleFrequencyChange = (value: FrequencyType) => {\n    setFrequency(value);\n    onFrequencyChange({\n      ...accountInfo,\n      auth_frequency_type: value,\n    });\n  };\n\n  return (\n    <div className=\"flex flex-col\">\n      <div className=\"text-[14px] coz-fg-primary mb-1 font-medium\">\n        {accountInfo.auth_name}\n      </div>\n      <Select\n        value={frequency}\n        onChange={value => handleFrequencyChange(value as FrequencyType)}\n        optionList={FREQUENCY_OPTIONS}\n        className=\"w-full\"\n      />\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** The type value on the upload page url */\nexport enum UnitType {\n  /** Text format: local documents, upload PDF, TXT, DOCX local files */\n  TEXT_DOC = 'text_doc',\n  /** Text format: online data, automatically captures online web content */\n  TEXT_URL = 'text_url',\n  /** Text format: online data, manual access to online web content */\n  TEXT_EXTENSION = 'text_extension',\n  /** Text format: custom content, support for creation & editing */\n  TEXT_CUSTOM = 'text_custom',\n  /** Text Format: Import Notion pages and databases into the knowledge base */\n  TEXT_NOTION = 'text_notion',\n  /** Text formatting to import Google Docs into the Knowledge Base */\n  TEXT_GOOGLE_DRIVE = 'text_google_drive',\n  /** Text format: Feishu document, imported into the knowledge base */\n  TEXT_FEISHU = 'text_feishu',\n  /** Text format: official account */\n  TEXT_WECHAT = 'text_wechat',\n  /** Text format: Lark document, imported into the knowledge base */\n  TEXT_LARK = 'text_lark',\n  /** Table format: local document, upload Excel or CSV format document */\n  TABLE_DOC = 'table_doc',\n  /** Table format: API fetches API content in JSON format */\n  TABLE_API = 'table_api',\n  /** Table format: custom, custom content, support for creation & editing */\n  TABLE_CUSTOM = 'table_custom',\n  /** Table Format: Import Google Sheets into the Knowledge Base */\n  TABLE_GOOGLE_DRIVE = 'table_google_drive',\n  /** Table format: Import the Feishu table into the knowledge base */\n  TABLE_FEISHU = 'table_feishu',\n  /** Table format: Import Lark tables into the knowledge base */\n  TABLE_LARK = 'table_lark',\n  /** Image format: local image, upload PNG, JPG, JPEG and other format images */\n  IMAGE_FILE = 'image_file',\n  /** table format */\n  TABLE = 'table',\n  /** text format */\n  TEXT = 'text',\n  /** image format */\n  IMAGE = 'image',\n}\n\n/**\n * Unit operation type\n * Upload page supports the following ways\n * - ADD created for the first time\n * - UPDATE data\n * - INCREMENTAL INCREMENTAL DATA\n * - RESEGMENT\n */\nexport enum OptType {\n  RESEGMENT = 'resegment',\n  ADD = 'add',\n  UPDATE = 'update',\n  INCREMENTAL = 'incremental',\n}\n\n/** Footer button status */\nexport enum FooterBtnStatus {\n  DISABLE = 'disable',\n  LOADING = 'loading',\n  ENABLE = 'enable',\n}\n\n/** Create unit global process state. Note the difference with UploadStatus*/\nexport enum CreateUnitStatus {\n  UPLOAD_UNIT = 'uploadUnit',\n  GET_TASK_PROGRESS = 'getTaskProGress',\n  TASK_FINISH = 'taskFinish',\n}\n\n/**\n * UploadStatus is the upload-unit-file, upload-unit-table components, the status of the upload file process\n * Prototype from import {type FileItemStatus} from '@douyinfe/semi-foundation/lib/es/upload/foundation';\n * There is a problem with the writing of FileItemStatus\n */\nexport enum UploadStatus {\n  SUCCESS = 'success',\n  UPLOAD_FAIL = 'uploadFail',\n  VALIDATE_FAIL = 'validateFail',\n  VALIDATING = 'validating',\n  UPLOADING = 'uploading',\n  WAIT = 'wait',\n}\n\nexport enum FileNodeType {\n  FileNodeTypeFolder = 'folder',\n  FileNodeTypeDocument = 'document',\n  FileNodeTypeSheet = 'sheet',\n}\n\nexport enum EntityStatus {\n  EntityStatusProcess = 'process',\n  EntityStatusSuccess = 'success',\n  EntityStatusFail = 'failure',\n}\n\nexport enum CheckedStatus {\n  LOADING = 0,\n  NO_AUTH = 1,\n  NO_FILE = 2,\n  SIMPLE = 3,\n  HAD_SEGMENT_RULES = 4,\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext, type PropsWithChildren, type FC, useRef } from 'react';\n\nimport { type StoreApi, type UseBoundStore } from 'zustand';\n\ninterface StoreRef {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  knowledge?: UseBoundStore<StoreApi<any>> | undefined;\n}\n\nexport const KnowledgeUploadStoreContext = createContext<{\n  storeRef: StoreRef;\n}>({\n  storeRef: {\n    knowledge: undefined,\n  },\n});\n\nexport const KnowledgeUploadStoreProvider: FC<\n  PropsWithChildren<{\n    createStore: () => StoreRef['knowledge'];\n  }>\n> = ({ createStore, children }) => {\n  const store = useRef<StoreRef>({});\n\n  if (!store.current?.knowledge) {\n    store.current.knowledge = createStore();\n  }\n\n  return (\n    <KnowledgeUploadStoreContext.Provider value={{ storeRef: store.current }}>\n      {children}\n    </KnowledgeUploadStoreContext.Provider>\n  );\n};\n","\n      import API from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useContext, useEffect } from 'react';\n\nimport classNames from 'classnames';\nimport { REPORT_EVENTS } from '@coze-arch/report-events';\nimport { Steps } from '@coze-arch/bot-semi';\nimport { CustomError } from '@coze-arch/bot-error';\nimport { IconCozCheckMarkFill } from '@coze-arch/coze-design/icons';\n\nimport type {\n  UploadBaseState,\n  UploadBaseAction,\n  UploadConfig,\n} from './protocol/base';\nimport { KnowledgeUploadStoreContext } from './context';\n\nimport styles from './index.module.less';\n\nconst BOT_DATA_REFACTOR_CLASS_NAME = 'data-refactor';\nexport const Upload = <\n  T extends number,\n  R extends UploadBaseState<T> & UploadBaseAction<T>,\n>(props: {\n  config: UploadConfig<T, R>;\n}) => {\n  useEffect(\n    () => () => {\n      // It is necessary, otherwise it will be wrong to re-enter the page status\n      reset();\n    },\n    [],\n  );\n\n  /** get store */\n  const storeContext = useContext(KnowledgeUploadStoreContext);\n  if (!storeContext.storeRef.knowledge) {\n    throw new CustomError(\n      REPORT_EVENTS.normalError,\n      'no knowledge store context',\n    );\n  }\n  const store = storeContext.storeRef.knowledge;\n\n  /** get steps */\n  const { config } = props;\n\n  if (!config) {\n    return null;\n  }\n\n  const { className, useUploadMount, showStep = true } = config;\n  const currentStep = store(state => state.currentStep);\n  const reset = store(state => state.reset);\n  // eslint-disable-next-line react-hooks/rules-of-hooks -- linter-disable-autofix\n  const [placeHolder, checkStatus] = useUploadMount?.(store) ?? [];\n  const showStepFlags = config.steps.map(\n    step => step.showThisStep?.(checkStatus) ?? true,\n  );\n  const steps = config.steps.filter((_v, index) => showStepFlags[index]);\n  // After the array is filtered, there is a problem with steps getting the value through the index, so it is changed to get the corresponding step value to associate the item data.\n  const ContentComp = steps.find(item => item.step === currentStep)?.content;\n  if (placeHolder) {\n    return placeHolder;\n  }\n  return (\n    <div\n      className={classNames(\n        `${className} ${BOT_DATA_REFACTOR_CLASS_NAME}`,\n        styles['knowledge-steps'],\n      )}\n    >\n      {showStep ? (\n        <Steps\n          type=\"basic\"\n          hasLine={false}\n          current={currentStep}\n          className=\"mb-[32px]\"\n        >\n          {steps.map(step =>\n            currentStep > step.step ? (\n              <Steps.Step\n                key={step.title}\n                title={step.title}\n                icon={\n                  <div className={styles['finish-icon']}>\n                    <IconCozCheckMarkFill />\n                  </div>\n                }\n              />\n            ) : (\n              <Steps.Step key={step.title} title={step.title} />\n            ),\n          )}\n        </Steps>\n      ) : null}\n      {ContentComp ? (\n        <ContentComp useStore={store} checkStatus={checkStatus} />\n      ) : null}\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const filterUnnecessaryContentFromSlice = (slice: string): string => {\n  let res = slice;\n  // Filter img tags\n  res = res.replaceAll(/<(\\n)*img((?!(<(\\n)*img))(.|\\n))*>/g, '');\n  return res;\n};\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\n\nimport { DataNamespace, dataReporter } from '@coze-data/reporter';\nimport { REPORT_EVENTS } from '@coze-arch/report-events';\nimport { I18n } from '@coze-arch/i18n';\nimport { Card, Tag, Tooltip } from '@coze-arch/bot-semi';\nimport { DocumentSource, FormatType } from '@coze-arch/bot-api/knowledge';\n\nimport { ReactComponent as LinkToKnowledgeIcon } from '../../assets/link-to-knowledge.svg';\nimport { filterUnnecessaryContentFromSlice } from './helpers/filter-unnecessary-content-from-slice';\n\nimport styles from './index.module.less';\n\nexport interface LLMOutput {\n  meta: {\n    dataset: {\n      id: number;\n      name: string;\n    };\n    document: {\n      id: number;\n      source_type: number;\n      format_type: number;\n      name: string;\n    };\n    link: {\n      title: string;\n      url: string;\n    };\n  };\n  score: number;\n  slice: string;\n}\n\nconst getSourceTypeDescription = (sourceType: number): string | undefined =>\n  ({\n    [DocumentSource.Custom]: I18n.t('chat-area-knowledge-custom-data-source'),\n    [DocumentSource.Document]: I18n.t('chat-area-knowledge-local-data-source'),\n    [DocumentSource.FeishuWeb]: I18n.t(\n      'chat-area-knowledge-feishu-data-source',\n    ),\n    [DocumentSource.Web]: I18n.t('chat-area-knowledge-online-data-source'),\n    [DocumentSource.FrontCrawl]: I18n.t(\n      'chat-area-knowledge-crawl-data-source',\n    ),\n    [DocumentSource.GoogleDrive]: I18n.t(\n      'chat-area-knowledge-google-data-source',\n    ),\n    [DocumentSource.Notion]: I18n.t('chat-area-knowledge-notion-data-source'),\n    [DocumentSource.LarkWeb]: I18n.t('Lark_00002'),\n  }[sourceType]);\n\nconst getFormatTypeDescription = (formatType: number): string | undefined =>\n  ({\n    [FormatType.Table]: I18n.t('knowledge-dataset-type-table'),\n    [FormatType.Text]: I18n.t('knowledge-dataset-type-text'),\n    [FormatType.Image]: I18n.t('knowledge_photo_025'),\n  }[formatType]);\n\nfunction RecallSlice(props: { llmOutput: LLMOutput; index: number }) {\n  const { llmOutput, index } = props;\n  const { meta, slice, score } = llmOutput;\n\n  const [isOpen, setIsOpen] = useState(false);\n  const [needCollapse, setNeedCollapse] = useState(false);\n  const sliceContentRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    setNeedCollapse(\n      (sliceContentRef.current?.scrollHeight ?? 0) >\n        (sliceContentRef.current?.clientHeight ?? 0),\n    );\n  }, []);\n\n  const formatTypeDesc = useMemo(\n    () =>\n      meta.document.format_type\n        ? getFormatTypeDescription(meta.document.format_type)\n        : null,\n    [meta.document],\n  );\n\n  const sourceTypeDesc = useMemo(\n    () =>\n      meta.document.source_type\n        ? getSourceTypeDescription(meta.document.source_type)\n        : null,\n    [meta.document],\n  );\n\n  // Change the back to staring.\n  const sliceTag = `Recall slice ${index + 1}`;\n\n  const filteredSlice = filterUnnecessaryContentFromSlice(slice);\n\n  return (\n    <div className={styles['recall-slice']}>\n      <Card>\n        <Tag className={styles['recall-slice-tag']}>{sliceTag}</Tag>\n        <div className={styles['recall-slice-title']}>\n          {meta.document?.name ?? ''}\n          <div\n            onClick={() => {\n              const { href, origin } = window.location;\n              const hrefSlices = href.split('/');\n              const spaceIndex = hrefSlices.indexOf('space');\n              if (spaceIndex === -1 || spaceIndex === hrefSlices.length - 1) {\n                dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n                  eventName: REPORT_EVENTS.KnowledgeSourceGetURL,\n                  error: new Error(),\n                });\n              }\n              const spaceId = hrefSlices[spaceIndex + 1];\n              if (!/^[1-9][0-9]+$/.test(spaceId)) {\n                dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n                  eventName: REPORT_EVENTS.KnowledgeSourceGetURL,\n                  error: new Error(),\n                });\n              }\n              window.open(\n                `${origin}/space/${spaceId}/knowledge/${meta.dataset.id}?first_auto_open_edit_document_id=${meta.document.id}`,\n                '_blank',\n              );\n            }}\n            className={styles['recall-slice-title-icon']}\n          >\n            <LinkToKnowledgeIcon />\n          </div>\n        </div>\n        <div className={styles['recall-slice-tags']}>\n          {meta.dataset.name ? (\n            <Tooltip content={meta.dataset.name}>\n              <Tag>{meta.dataset.name}</Tag>\n            </Tooltip>\n          ) : null}\n\n          {formatTypeDesc ? (\n            <Tooltip content={formatTypeDesc}>\n              <Tag>{formatTypeDesc} </Tag>\n            </Tooltip>\n          ) : null}\n\n          {sourceTypeDesc ? (\n            <Tooltip content={sourceTypeDesc}>\n              <Tag>{sourceTypeDesc} </Tag>\n            </Tooltip>\n          ) : null}\n          {score > 0 && <Tag>{`Score: ${score.toFixed(2)}`}</Tag>}\n        </div>\n        <div className={styles['recall-slice-content']}>\n          <div\n            ref={sliceContentRef}\n            className={\n              isOpen\n                ? styles['recall-slice-content-open']\n                : styles['recall-slice-content-collapsed']\n            }\n          >\n            {filteredSlice}\n          </div>\n          {needCollapse ? (\n            isOpen ? (\n              <div\n                className={styles['recall-slice-content-action']}\n                onClick={() => setIsOpen(false)}\n              >\n                {I18n.t('collapse-chat-knowledge-source-header')}\n              </div>\n            ) : (\n              <div\n                className={styles['recall-slice-content-action']}\n                onClick={() => setIsOpen(true)}\n              >\n                {I18n.t('view-all-chat-knowledge-source-header')}\n              </div>\n            )\n          ) : null}\n        </div>\n      </Card>\n    </div>\n  );\n}\n\nexport function RecallSlices(props: { llmOutputs: Array<LLMOutput> }) {\n  return (\n    <div className={styles['recall-slices']}>\n      {props.llmOutputs.map((llmOutput, index) => (\n        <RecallSlice llmOutput={llmOutput} index={index} />\n      ))}\n    </div>\n  );\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools, subscribeWithSelector } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport {\n  type UserAuthInfo,\n  type UserLabel,\n} from '@coze-arch/bot-api/developer_api';\nimport { DeveloperApi, PlaygroundApi } from '@coze-arch/bot-api';\n\nimport { type UserInfo } from '../types';\n\nexport interface UserStoreState {\n  isSettled: boolean;\n  hasError: boolean;\n  userInfo: UserInfo | null;\n  userAuthInfos: UserAuthInfo[];\n  userLabel: UserLabel | null;\n}\n\nexport interface UserStoreAction {\n  reset: () => void;\n  setIsSettled: (isSettled: boolean) => void;\n  setUserInfo: (userInfo: UserInfo | null) => void;\n  getUserAuthInfos: () => Promise<void>;\n}\n\nexport const defaultState: UserStoreState = {\n  isSettled: false,\n  userInfo: null,\n  hasError: false,\n  userAuthInfos: [],\n  userLabel: null,\n};\n\nexport const useUserStore = create<UserStoreState & UserStoreAction>()(\n  devtools(\n    subscribeWithSelector((set, get) => ({\n      ...defaultState,\n      reset: () => {\n        set({ ...defaultState, isSettled: true });\n      },\n      setIsSettled: isSettled => {\n        set({\n          isSettled,\n        });\n      },\n      setUserInfo: (userInfo: UserInfo | null) => {\n        if (\n          userInfo?.user_id_str &&\n          userInfo?.user_id_str !== get().userInfo?.user_id_str\n        ) {\n          fetchUserLabel(userInfo?.user_id_str);\n        }\n        set({\n          userInfo,\n        });\n      },\n      getUserAuthInfos: async () => {\n        const { data = [] } = await DeveloperApi.GetUserAuthList();\n        set({ userAuthInfos: data });\n      },\n    })),\n    {\n      enabled: IS_DEV_MODE,\n      name: 'botStudio.userStore',\n    },\n  ),\n);\n\nconst fetchUserLabel = async (id: string) => {\n  const res = await PlaygroundApi.MGetUserBasicInfo({ user_ids: [id] });\n  const userLabel = res?.id_user_info_map?.[id]?.user_label;\n  useUserStore.setState({ userLabel });\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect } from 'react';\n\nimport { useDocumentVisibility, useMemoizedFn } from 'ahooks';\n\nimport { type LoginStatus } from '../types';\nimport { useUserStore } from '../store/user';\n\n/**\n * @Description is used to obtain user login status\n * @returns login status\n */\nexport const useLoginStatus = (): LoginStatus =>\n  useUserStore(state => {\n    if (state.isSettled) {\n      return state.userInfo?.user_id_str ? 'logined' : 'not_login';\n    }\n    return 'settling';\n  });\n\n/**\n * @Description is used to obtain user information\n * @returns user information\n */\nexport const useUserInfo = () => useUserStore(state => state.userInfo);\n\n/**\n * @Description Whether it is currently in an error state\n * @Returns whether it is an error\n */\nexport const useHasError = () => useUserStore(state => state.hasError);\n\nconst currentUidLSKey = 'coze_current_uid';\n/**\n * It is used to detect logout events that occur under other tabs when multiple tabs are opened and trigger a prompt at the current time\n * @Param alert trigger prompt specific implementation\n */\nexport const useAlterOnLogout = (alert: () => void) => {\n  const visibility = useDocumentVisibility();\n  const loginStatus = useLoginStatus();\n\n  const isLogined = loginStatus === 'logined';\n  const memoizedAlert = useMemoizedFn(() => {\n    alert();\n  });\n\n  useEffect(() => {\n    if (visibility === 'hidden' && isLogined) {\n      const lastUserId = useUserStore.getState().userInfo?.user_id_str;\n      // In the login state, each time the page returns to the foreground from the background, re-check whether the logged in user has changed.\n      return () => {\n        const latestUserId = localStorage.getItem(currentUidLSKey);\n        if (lastUserId !== latestUserId) {\n          memoizedAlert();\n        }\n      };\n    }\n  }, [visibility, isLogined]);\n\n  // Update local cache status after login status changes\n  useEffect(() => {\n    if (loginStatus !== 'settling') {\n      localStorage.setItem(\n        currentUidLSKey,\n        useUserStore.getState().userInfo?.user_id_str ?? '',\n      );\n    }\n  }, [loginStatus]);\n};\n\nexport const useUserLabel = () => useUserStore(state => state.userLabel);\n\nexport const useUserAuthInfo = () => useUserStore(state => state.userAuthInfos);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect } from 'react';\n\nimport { localStorageService } from '@coze-foundation/local-storage';\n\nimport { useLoginStatus, useUserInfo } from './index';\n\nexport const useSyncLocalStorageUid = () => {\n  const userInfo = useUserInfo();\n  const loginStatus = useLoginStatus();\n\n  useEffect(() => {\n    if (loginStatus === 'logined') {\n      localStorageService.setUserId(userInfo?.user_id_str);\n    }\n    if (loginStatus === 'not_login') {\n      localStorageService.setUserId();\n    }\n  }, [loginStatus, userInfo?.user_id_str]);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type UserAuthInfo } from '@coze-arch/idl/developer_api';\nimport { I18n } from '@coze-arch/i18n';\n\nimport { type UserInfo, type LoginStatus } from '../types';\nimport { useUserStore } from '../store/user';\n\n/**\n * Acquire user information\n * @returns UserInfo\n */\nexport const getUserInfo = () => useUserStore.getState().userInfo;\n\n/**\n * Get login status\n * @returns LoginStatus\n */\nexport const getLoginStatus = (): LoginStatus => {\n  const state = useUserStore.getState();\n  if (state.isSettled) {\n    return state.userInfo?.user_id_str ? 'logined' : 'not_login';\n  }\n  return 'settling';\n};\n\nexport const resetUserStore = () => useUserStore.getState().reset();\n\nexport const setUserInfo = (userInfo: UserInfo | null) =>\n  useUserStore.getState().setUserInfo(userInfo);\n\nexport const getUserLabel = () => useUserStore.getState().userLabel;\n\nexport const getUserAuthInfos = () =>\n  useUserStore.getState().getUserAuthInfos();\n\nexport const subscribeUserAuthInfos = (\n  callback: (state: UserAuthInfo[], prev: UserAuthInfo[]) => void,\n) => useUserStore.subscribe(state => state.userAuthInfos, callback);\n\nconst usernameRegExp = /^[0-9A-Za-z_]+$/;\nconst minLength = 4;\nexport const usernameRegExpValidate = (value: string) => {\n  if (!usernameRegExp.exec(value)) {\n    return I18n.t('username_invalid_letter');\n  }\n  if (value.length < minLength) {\n    return I18n.t('username_too_short');\n  }\n\n  return null;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { setUserInfoContext } from '@coze-arch/logger';\n\nimport { type UserInfo } from '../types';\nimport { useUserStore } from '../store/user';\n\n/**\n * Actively trigger to refresh user information\n * @param checkLogin check function\n */\nexport const refreshUserInfoBase = async (\n  checkLogin: () => Promise<UserInfo>,\n) => {\n  useUserStore.setState({\n    hasError: false,\n  });\n  const userInfo = await checkLogin();\n  useUserStore.getState().setUserInfo(userInfo);\n};\n\nexport const logoutBase = async (logout: () => Promise<void>) => {\n  await logout();\n  useUserStore.getState().reset();\n};\n\nexport const checkLoginBase = async (\n  checkLoginImpl: () => Promise<{\n    userInfo?: UserInfo;\n    hasError?: boolean;\n  }>,\n) => {\n  useUserStore.setState({\n    hasError: false,\n  });\n  const { userInfo, hasError } = await checkLoginImpl();\n  if (hasError) {\n    useUserStore.setState({\n      hasError: true,\n    });\n    return;\n  }\n  if (userInfo) {\n    setUserInfoContext(userInfo);\n  }\n  useUserStore.setState({\n    userInfo,\n    isSettled: true,\n  });\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect } from 'react';\n\nimport { useMemoizedFn } from 'ahooks';\nimport {\n  APIErrorEvent,\n  handleAPIErrorEvent,\n  removeAPIErrorEvent,\n} from '@coze-arch/bot-api';\n\nimport { checkLoginBase } from '../utils/factory';\nimport { type UserInfo } from '../types';\nimport { useUserStore } from '../store/user';\n\n/**\n * It is used to check the login status when the page is initialized, and listen for the interface error if the login status is invalid.\n * When the login status fails, it will be redirected to the login page\n * @param needLogin is required\n * @Param checkLogin Check the specific implementation of login status\n * @Param goLogin Redirect to login page concrete implementation\n */\nexport const useCheckLoginBase = (\n  needLogin: boolean,\n  checkLoginImpl: () => Promise<{\n    userInfo?: UserInfo;\n    hasError?: boolean;\n  }>,\n  goLogin: () => void,\n) => {\n  const isSettled = useUserStore(state => state.isSettled);\n\n  const memoizedGoLogin = useMemoizedFn(goLogin);\n\n  useEffect(() => {\n    if (!isSettled) {\n      checkLoginBase(checkLoginImpl);\n    }\n  }, [isSettled]);\n\n  useEffect(() => {\n    const isLogined = !!useUserStore.getState().userInfo?.user_id_str;\n    // The current page requires login. If the login check result is not logged in, redirect back to the login page.\n    if (needLogin && isSettled && !isLogined) {\n      memoizedGoLogin();\n    }\n  }, [needLogin, isSettled]);\n\n  useEffect(() => {\n    let fired = false;\n    const handleUnauthorized = () => {\n      useUserStore.getState().reset();\n      if (needLogin) {\n        if (!fired) {\n          fired = true;\n          memoizedGoLogin();\n        }\n      }\n    };\n    // This function is triggered when the Ajax request backend interface appears not authorized/logged in\n    handleAPIErrorEvent(APIErrorEvent.UNAUTHORIZED, handleUnauthorized);\n    return () => {\n      removeAPIErrorEvent(APIErrorEvent.UNAUTHORIZED, handleUnauthorized);\n    };\n  }, [needLogin]);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type UserUpdateProfileRequest } from '@coze-studio/api-schema/passport';\nimport { passport } from '@coze-studio/api-schema';\nimport { resetUserStore, type UserInfo } from '@coze-foundation/account-base';\n\nexport const passportApi = {\n  checkLogin: async () => {\n    const res = (await passport.PassportAccountInfoV2({})) as unknown as {\n      data: UserInfo;\n    };\n    return res.data;\n  },\n\n  logout: async () => {\n    await passport.PassportWebLogoutGet({\n      next: '/',\n    });\n  },\n\n  uploadAvatar: async ({ avatar }: { avatar: File }) => {\n    const res = await passport.UserUpdateAvatar({\n      avatar,\n    });\n\n    return res.data;\n  },\n\n  updatePassword: async (params: { password: string; email: string }) => {\n    await passport.PassportWebEmailPasswordResetGet({ ...params, code: '' });\n    // After updating the password, the current login state is invalid, reset the store\n    resetUserStore();\n  },\n\n  updateUserProfile: (params: UserUpdateProfileRequest) =>\n    passport.UserUpdateProfile(params),\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable @coze-arch/use-error-in-catch */\nimport {\n  refreshUserInfoBase,\n  logoutBase,\n  checkLoginBase,\n  type Connector2Redirect,\n} from '@coze-foundation/account-base';\n\nimport { passportApi } from '../passport-api';\n\nexport const refreshUserInfo = () =>\n  refreshUserInfoBase(passportApi.checkLogin);\n\nexport const logout = () => logoutBase(passportApi.logout);\n\nexport const checkLoginImpl = async () => {\n  try {\n    const res = await passportApi.checkLogin();\n    return { userInfo: res };\n  } catch (e) {\n    return { userInfo: undefined };\n  }\n};\n\nexport const checkLogin = () => checkLoginBase(checkLoginImpl);\n\n// The open-source version does not support channel authorization and has not been implemented yet.\nexport const connector2Redirect: Connector2Redirect = () => undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useLocation, useNavigate } from 'react-router-dom';\n\nimport { useCheckLoginBase } from '@coze-foundation/account-base';\n\nimport { signPath, signRedirectKey } from '../utils/constants';\nimport { checkLoginImpl } from '../utils';\n\nconst useGoLogin = (loginFallbackPath?: string) => {\n  const navigate = useNavigate();\n  const { pathname, search } = useLocation();\n  return () => {\n    const redirectPath = `${pathname}${search}`;\n    if (loginFallbackPath) {\n      navigate(`${loginFallbackPath}${search}`, { replace: true });\n    } else {\n      navigate(\n        `${signPath}?${signRedirectKey}=${encodeURIComponent(redirectPath)}`,\n      );\n    }\n  };\n};\n\nexport const useCheckLogin = ({\n  needLogin,\n  loginFallbackPath,\n}: {\n  needLogin?: boolean;\n  loginFallbackPath?: string;\n}) => {\n  const goLogin = useGoLogin(loginFallbackPath);\n  useCheckLoginBase(!!needLogin, checkLoginImpl, goLogin);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const signPath = '/sign';\nexport const signRedirectKey = 'redirect';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useNavigate } from 'react-router-dom';\nimport { useEffect } from 'react';\n\nimport { useRequest } from 'ahooks';\nimport { passport } from '@coze-studio/api-schema';\nimport {\n  setUserInfo,\n  useLoginStatus,\n  type UserInfo,\n} from '@coze-foundation/account-adapter';\n\nexport const useLoginService = ({\n  email,\n  password,\n}: {\n  email: string;\n  password: string;\n}) => {\n  const loginService = useRequest(\n    async () => {\n      const res = (await passport.PassportWebEmailLoginPost({\n        email,\n        password,\n      })) as unknown as { data: UserInfo };\n      return res.data;\n    },\n    {\n      manual: true,\n      onSuccess: setUserInfo,\n    },\n  );\n\n  const registerService = useRequest(\n    async () => {\n      const res = (await passport.PassportWebEmailRegisterV2Post({\n        email,\n        password,\n      })) as unknown as { data: UserInfo };\n      return res.data;\n    },\n    {\n      manual: true,\n      onSuccess: setUserInfo,\n    },\n  );\n\n  const loginStatus = useLoginStatus();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (loginStatus === 'logined') {\n      navigate('/');\n    }\n  }, [loginStatus]);\n\n  return {\n    login: loginService.run,\n    register: registerService.run,\n    loginLoading: loginService.loading,\n    registerLoading: registerService.loading,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport FaviconBase from './favicon-base.png';\nimport FaviconAddon from './favicon-addon.png';\n\nexport const Favicon = () => (\n  <div className=\"relative flex items-center\">\n    <img\n      src={FaviconBase}\n      className=\"w-[100px] h-[100px] rounded-[21px] border border-solid coz-stroke-plus\"\n    />\n    <img\n      src={FaviconAddon}\n      className=\"absolute left-1/2 translate-x-[34px] top-[40px] w-[51px]\"\n    />\n  </div>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC, useState } from 'react';\n\nimport { CozeBrand } from '@coze-studio/components/coze-brand';\nimport { I18n } from '@coze-arch/i18n';\nimport { Button, Form } from '@coze-arch/coze-design';\nimport { SignFrame, SignPanel } from '@coze-arch/bot-semi';\n\nimport { useLoginService } from './service';\nimport { Favicon } from './favicon';\n\nexport const LoginPage: FC = () => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [hasError, setHasError] = useState(false);\n\n  const { login, register, loginLoading, registerLoading } = useLoginService({\n    email,\n    password,\n  });\n\n  const submitDisabled = !email || !password || hasError;\n\n  return (\n    <SignFrame brandNode={<CozeBrand isOversea={IS_OVERSEA} />}>\n      <SignPanel className=\"w-[600px] h-[640px] pt-[96px]\">\n        <div className=\"flex flex-col items-center w-full h-full\">\n          <Favicon />\n          <div className=\"text-[24px] font-medium coze-fg-plug leading-[36px] mt-[32px]\">\n            {I18n.t('open_source_login_welcome')}\n          </div>\n          <div className=\"mt-[64px] w-[320px] flex flex-col items-stretch [&_.semi-input-wrapper]:overflow-hidden\">\n            <Form\n              onErrorChange={errors => {\n                setHasError(Object.keys(errors).length > 0);\n              }}\n            >\n              <Form.Input\n                data-testid=\"login.input.email\"\n                noLabel\n                type=\"email\"\n                field=\"email\"\n                rules={[\n                  {\n                    required: true,\n                    message: I18n.t('open_source_login_placeholder_email'),\n                  },\n                  {\n                    pattern: /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/,\n                    message: I18n.t('open_source_login_placeholder_email'),\n                  },\n                ]}\n                onChange={newVal => {\n                  setEmail(newVal);\n                }}\n                placeholder={I18n.t('open_source_login_placeholder_email')}\n              />\n              <Form.Input\n                data-testid=\"login.input.password\"\n                noLabel\n                rules={[\n                  {\n                    required: true,\n                    message: I18n.t('open_source_login_placeholder_password'),\n                  },\n                ]}\n                field=\"password\"\n                type=\"password\"\n                onChange={setPassword}\n                placeholder={I18n.t('open_source_login_placeholder_password')}\n              />\n            </Form>\n            <Button\n              data-testid=\"login.button.login\"\n              className=\"mt-[12px]\"\n              disabled={submitDisabled || registerLoading}\n              onClick={login}\n              loading={loginLoading}\n              color=\"hgltplus\"\n            >\n              {I18n.t('login_button_text')}\n            </Button>\n            <Button\n              data-testid=\"login.button.signup\"\n              className=\"mt-[20px]\"\n              disabled={submitDisabled || loginLoading}\n              onClick={register}\n              loading={registerLoading}\n              color=\"primary\"\n            >\n              {I18n.t('register')}\n            </Button>\n            <div className=\"mt-[12px] flex justify-center\">\n              <a\n                data-testid=\"login.link.terms\"\n                href=\"https://github.com/coze-dev/coze-studio?tab=Apache-2.0-1-ov-file\"\n                target=\"_blank\"\n                className=\"no-underline coz-fg-hglt\"\n              >\n                {I18n.t('open_source_terms_linkname')}\n              </a>\n            </div>\n          </div>\n        </div>\n      </SignPanel>\n    </SignFrame>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useNavigate } from 'react-router-dom';\nimport { useState } from 'react';\n\nimport { I18n } from '@coze-arch/i18n';\nimport { Modal } from '@coze-arch/coze-design';\nimport { logout } from '@coze-foundation/account-adapter';\n\nexport interface UseLogoutReturnType {\n  open: () => void;\n  close: () => void;\n  node: JSX.Element;\n}\n\nexport const useLogout = (): UseLogoutReturnType => {\n  const navigate = useNavigate();\n  const [visible, setVisible] = useState(false);\n  const node = (\n    <Modal\n      visible={visible}\n      title={I18n.t('log_out_desc')}\n      okText={I18n.t('basic_log_out')}\n      cancelText={I18n.t('Cancel')}\n      centered\n      onOk={async () => {\n        await logout();\n        setVisible(false);\n        // Jump to root path\n        navigate('/');\n      }}\n      onCancel={() => {\n        setVisible(false);\n      }}\n      okButtonColor=\"red\"\n    />\n  );\n\n  return {\n    node,\n    open: () => {\n      setVisible(true);\n    },\n    close: () => {\n      setVisible(false);\n    },\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport { Spin } from '@coze-arch/bot-semi';\n\nexport const LoadingContainer: FC = () => (\n  <div className=\"w-full h-full flex items-center justify-center\">\n    <Spin spinning style={{ height: '100%', width: '100%' }} />\n  </div>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type PropsWithChildren, type FC } from 'react';\n\nimport { I18n } from '@coze-arch/i18n';\nimport { UIButton } from '@coze-arch/bot-semi';\nimport {\n  useHasError,\n  checkLogin,\n  useLoginStatus,\n} from '@coze-foundation/account-adapter';\n\nimport { LoadingContainer } from '../loading-container';\n\ninterface ErrorPageProps {\n  onRetry: () => void;\n}\n\nconst ErrorContainer: FC<ErrorPageProps> = ({ onRetry }) => (\n  <div className=\"w-full h-full flex items-center justify-center flex-col\">\n    {I18n.t('login_failed')}\n    <UIButton onClick={onRetry}>{I18n.t('Retry')}</UIButton>\n  </div>\n);\n\nconst Mask: FC<PropsWithChildren> = ({ children }) => (\n  <div className=\"z-1 absolute bg-[#F7F7FA] w-full h-full left-0 top-0\">\n    {children}\n  </div>\n);\n\n// Rendering error states when needed & loading\nconst LoginCheckMask: FC<{ needLogin: boolean; loginOptional: boolean }> = ({\n  needLogin,\n  loginOptional,\n}) => {\n  const loginStatus = useLoginStatus();\n  const isLogined = loginStatus === 'logined';\n  const hasError = useHasError();\n  if (hasError && needLogin) {\n    return (\n      <Mask>\n        <ErrorContainer onRetry={checkLogin} />;\n      </Mask>\n    );\n  }\n\n  if (needLogin && !loginOptional && !isLogined) {\n    return (\n      <Mask>\n        <LoadingContainer />\n      </Mask>\n    );\n  }\n  return null;\n};\n\nexport const RequireAuthContainer: FC<\n  PropsWithChildren<{ needLogin: boolean; loginOptional: boolean }>\n> = ({ children, needLogin, loginOptional }) => (\n  <>\n    <LoginCheckMask needLogin={needLogin} loginOptional={loginOptional} />\n    {children}\n  </>\n);\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from 'classnames';\nimport { I18n } from '@coze-arch/i18n';\nimport { Form, Input, type InputProps } from '@coze-arch/coze-design';\n\nimport s from './index.module.less';\n\nexport const USER_NAME_MAX_LEN = 20;\n\ninterface InputWithCountProps extends InputProps {\n  // Set word limits and display word count\n  getValueLength?: (value?: InputProps['value'] | string) => number;\n}\n\nexport interface UsernameInputProps\n  extends Omit<\n    InputWithCountProps,\n    'prefix' | 'placeholder' | 'maxLength' | 'validateStatus'\n  > {\n  scene?: 'modal' | 'page';\n  errorMessage?: string;\n}\n\nexport const UsernameInput: React.FC<UsernameInputProps> = ({\n  className,\n  scene = 'page',\n  errorMessage,\n  ...props\n}) => {\n  const isError = Boolean(errorMessage);\n  return (\n    <>\n      <Input\n        className={classNames(\n          s.input,\n          isError && s.error,\n          scene === 'modal' ? s.modal : s.page,\n          className,\n        )}\n        validateStatus={isError ? 'error' : 'default'}\n        prefix=\"@\"\n        placeholder={I18n.t('username_placeholder')}\n        maxLength={USER_NAME_MAX_LEN}\n        {...props}\n      />\n      <Form.ErrorMessage error={errorMessage} />\n    </>\n  );\n};\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type CSSProperties,\n  type ComponentType,\n  type PropsWithChildren,\n  type ReactNode,\n  useState,\n} from 'react';\n\nimport classNames from 'classnames';\nimport { I18n } from '@coze-arch/i18n';\nimport { IconCozEdit } from '@coze-arch/coze-design/icons';\nimport {\n  IconButton,\n  Input,\n  Button,\n  Tooltip,\n  Typography,\n} from '@coze-arch/coze-design';\n\nimport s from './index.module.less';\n\ninterface BaseValueProps {\n  value?: string;\n  onChange?: (v?: string) => void;\n  onEnterPress?: () => void;\n  errorMessage?: string;\n}\n\nexport interface UserInfoFieldProps extends BaseValueProps {\n  onSave?: (v?: string) => Promise<void>;\n  onCancel?: () => void;\n  loading?: boolean;\n  customComponent?: ComponentType<BaseValueProps>;\n  className?: string;\n  style?: CSSProperties;\n  readonly?: boolean;\n  disabled?: boolean;\n  disabledTip?: ReactNode;\n  customContent?: ReactNode;\n}\n\nconst EditWrap: React.FC<\n  PropsWithChildren<\n    Pick<\n      UserInfoFieldProps,\n      | 'onSave'\n      | 'onCancel'\n      | 'loading'\n      | 'className'\n      | 'style'\n      | 'errorMessage'\n      | 'value'\n    >\n  >\n> = ({\n  onSave,\n  onCancel,\n  loading,\n  children,\n  className,\n  style,\n  errorMessage,\n  value,\n}) => (\n  <div className={classNames(s['field-edit'], className)} style={style}>\n    <div className={s['field-edit-children']}>{children}</div>\n    <Button\n      className={s.btn}\n      color=\"primary\"\n      loading={loading}\n      onClick={() => {\n        onCancel?.();\n      }}\n      data-testid=\"bot-edit-field-cancel-button\"\n    >\n      {I18n.t('Cancel')}\n    </Button>\n    <Button\n      disabled={Boolean(errorMessage) || !value}\n      className={s.btn}\n      loading={loading}\n      onClick={() => {\n        onSave?.();\n      }}\n      data-testid=\"bot-edit-field-save-button\"\n    >\n      {I18n.t('setting_name_save')}\n    </Button>\n  </div>\n);\n\nexport const UserInfoField: React.FC<UserInfoFieldProps> = ({\n  value,\n  onChange,\n  onCancel,\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  customComponent: CustomComponent,\n  onSave,\n  loading,\n  className,\n  style,\n  readonly,\n  disabled,\n  disabledTip,\n  errorMessage,\n  customContent,\n}) => {\n  const [isEdit, setEdit] = useState(false);\n  const handleSave = async () => {\n    await onSave?.(value);\n    setEdit(false);\n  };\n  const EditButton = (\n    <IconButton\n      disabled={disabled}\n      icon={<IconCozEdit />}\n      size=\"mini\"\n      color=\"secondary\"\n      className=\"ml-[8px]\"\n      onClick={() => {\n        setEdit(true);\n      }}\n    />\n  );\n\n  if (!isEdit) {\n    return (\n      <div className={classNames(s['filed-readonly'], className)} style={style}>\n        {customContent ? (\n          customContent\n        ) : (\n          <Typography.Text\n            fontSize=\"14px\"\n            className=\"!font-medium coz-fg-primary\"\n            ellipsis\n          >\n            {value}\n          </Typography.Text>\n        )}\n        {!readonly &&\n          (disabled && disabledTip ? (\n            <Tooltip content={disabledTip}>{EditButton}</Tooltip>\n          ) : (\n            EditButton\n          ))}\n      </div>\n    );\n  }\n  if (CustomComponent) {\n    return (\n      <EditWrap\n        value={value}\n        errorMessage={errorMessage}\n        onSave={handleSave}\n        loading={loading}\n        onCancel={() => {\n          setEdit(false);\n          onCancel?.();\n        }}\n      >\n        <CustomComponent\n          errorMessage={errorMessage}\n          onEnterPress={handleSave}\n          value={value}\n          onChange={onChange}\n        />\n      </EditWrap>\n    );\n  }\n  return (\n    <EditWrap\n      value={value}\n      errorMessage={errorMessage}\n      onSave={handleSave}\n      loading={loading}\n      onCancel={() => {\n        setEdit(false);\n        onCancel?.();\n      }}\n    >\n      <Input onEnterPress={handleSave} value={value} onChange={onChange} />\n    </EditWrap>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type PropsWithChildren,\n  type ReactNode,\n  useRef,\n  useState,\n  useEffect,\n} from 'react';\n\nimport classNames from 'classnames';\nimport { useRequest } from 'ahooks';\nimport { userStoreService } from '@coze-studio/user-store';\nimport {\n  passportApi,\n  usernameRegExpValidate,\n} from '@coze-foundation/account-adapter';\nimport { UpdateUserAvatar } from '@coze-common/biz-components';\nimport { REPORT_EVENTS, createReportEvent } from '@coze-arch/report-events';\nimport { I18n } from '@coze-arch/i18n';\nimport { refreshUserInfo } from '@coze-arch/foundation-sdk';\nimport { IconCozWarningCircleFillPalette } from '@coze-arch/coze-design/icons';\nimport { Input, Toast, Select } from '@coze-arch/coze-design';\nimport { Form, type Upload } from '@coze-arch/bot-semi';\nimport { isApiError } from '@coze-arch/bot-http';\nimport { DeveloperApi } from '@coze-arch/bot-api';\n\nimport { UsernameInput } from './username-input';\nimport { UserInfoField, type UserInfoFieldProps } from './user-info-field';\n\nimport styles from './index.module.less';\n\n// The time when the user enters the username to automatically check\nexport const CHECK_USER_NAME_DEBOUNCE_TIME = 1000;\n\nconst WrappedInputWithCount: React.FC<\n  Pick<UserInfoFieldProps, 'value' | 'onChange' | 'onEnterPress'>\n> = ({ value, onChange, onEnterPress }) => (\n  <Input\n    value={value}\n    onChange={onChange}\n    maxLength={20}\n    autoFocus\n    onEnterPress={onEnterPress}\n    placeholder={I18n.t('setting_name_placeholder')}\n  />\n);\n\nconst WrappedUsernameInput: React.FC<\n  Pick<\n    UserInfoFieldProps,\n    'value' | 'onChange' | 'onEnterPress' | 'errorMessage'\n  >\n> = ({ value, onChange, onEnterPress, errorMessage }) => (\n  <UsernameInput\n    style={{ marginBottom: 0 }}\n    value={value}\n    errorMessage={errorMessage}\n    onChange={onChange}\n    autoFocus\n    onEnterPress={onEnterPress}\n  />\n);\n\nconst WrappedPasswordInput: React.FC<\n  Pick<UserInfoFieldProps, 'value' | 'onChange' | 'onEnterPress'>\n> = ({ value, onChange, onEnterPress }) => (\n  <Input\n    mode=\"password\"\n    value={value}\n    onChange={onChange}\n    autoFocus\n    onEnterPress={onEnterPress}\n  />\n);\n\nconst getLanguageOptions = () => [\n  {\n    label: I18n.t('settings_language_zh'),\n    value: 'zh-CN',\n  },\n  {\n    label: I18n.t('settings_language_en'),\n    value: 'en-US',\n  },\n];\n\nconst WrappedSelectInput: React.FC<\n  Pick<\n    UserInfoFieldProps,\n    'value' | 'onChange' | 'onEnterPress' | 'errorMessage'\n  >\n> = ({ value, onChange, onEnterPress, errorMessage }) => (\n  <Select\n    optionList={getLanguageOptions()}\n    value={value}\n    onChange={val => {\n      onChange?.(val as string);\n    }}\n    className=\"w-[120px]\"\n  />\n);\n\nconst UserInfoFieldWrap: React.FC<PropsWithChildren<{ label?: ReactNode }>> = ({\n  children,\n  label,\n}) => (\n  <div className={styles['label-wrap']}>\n    <Form.Label text={label} className={styles.label} />\n    {children}\n  </div>\n);\n\nconst updateProfileEvent = createReportEvent({\n  eventName: REPORT_EVENTS.editUserProfile,\n});\n\nconst updateProfileCheckEvent = createReportEvent({\n  eventName: REPORT_EVENTS.updateUserProfileCheck,\n});\n\nconst getUserName = (userInfo?: DataItem.UserInfo | null): string =>\n  userInfo?.bui_audit_info?.audit_status === 1\n    ? userInfo?.bui_audit_info?.audit_info.user_unique_name ??\n      userInfo?.app_user_info.user_unique_name ??\n      ''\n    : userInfo?.app_user_info.user_unique_name ?? '';\n\n// eslint-disable-next-line @coze-arch/max-line-per-function\nexport const UserInfoPanel = () => {\n  const userInfo = userStoreService.useUserInfo();\n\n  const [nickname, setNickname] = useState(userInfo?.name);\n\n  const [username, setUsername] = useState(getUserName(userInfo));\n\n  const [userNameErrorInfo, setUsernameErrorInfo] = useState('');\n\n  const [lang, setLang] = useState(\n    userInfo?.locale ?? navigator.language ?? 'en-US',\n  );\n\n  const [password, setPassword] = useState('');\n\n  const [loading, setLoading] = useState(false);\n  const [avatar, setAvatar] = useState(userInfo?.avatar_url ?? '');\n  const uploadRef = useRef<Upload>(null);\n\n  const onNicknameChange = async (name?: string) => {\n    if (!name) {\n      return;\n    }\n    try {\n      updateProfileEvent.start();\n\n      setLoading(true);\n      await passportApi.updateUserProfile({\n        name,\n      });\n      updateProfileEvent.success();\n    } catch (error) {\n      updateProfileEvent.error({\n        error: error as Error,\n        reason: 'update nickname failed',\n      });\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const onPasswordChange = async (newPassword?: string) => {\n    try {\n      updateProfileEvent.start();\n      await passportApi.updatePassword({\n        password: newPassword ?? '',\n        email: userInfo?.email ?? '',\n      });\n      updateProfileEvent.success();\n    } catch (error) {\n      updateProfileEvent.error({\n        error: error as Error,\n        reason: 'update password failed',\n      });\n      throw error;\n    }\n  };\n\n  const onLanguageChange = async (newLang?: string) => {\n    if (!newLang) {\n      return;\n    }\n\n    try {\n      updateProfileEvent.start();\n\n      await passportApi.updateUserProfile({\n        locale: newLang,\n      });\n      localStorage.setItem('i18next', newLang === 'en-US' ? 'en' : newLang);\n      updateProfileEvent.success();\n      // Updating the language settings requires a page refresh to take effect\n      setTimeout(() => {\n        window.location.reload();\n      }, 500);\n    } catch (error) {\n      updateProfileEvent.error({\n        error: error as Error,\n        reason: 'update language failed',\n      });\n      throw error;\n    }\n  };\n\n  const handleUsernameRegexpError = (value?: string) => {\n    if (!value) {\n      setUsernameErrorInfo('');\n      return '';\n    }\n    const message = usernameRegExpValidate(value) || '';\n    setUsernameErrorInfo(message);\n    return message;\n  };\n\n  const { run: validateUsername, cancel: cancelValidateUsername } = useRequest(\n    async (innerUsername: string) => {\n      await DeveloperApi.UpdateUserProfileCheck(\n        {\n          user_unique_name: innerUsername,\n        },\n        { __disableErrorToast: true },\n      );\n    },\n    {\n      manual: true,\n      debounceWait: CHECK_USER_NAME_DEBOUNCE_TIME,\n      debounceLeading: false,\n      debounceTrailing: true,\n      onBefore: () => {\n        updateProfileCheckEvent.start();\n        setLoading(true);\n      },\n      onError: error => {\n        updateProfileCheckEvent.error({ error, reason: error.message });\n        if (isApiError(error)) {\n          setUsernameErrorInfo(error.msg ?? '');\n        }\n      },\n      onSuccess: () => {\n        updateProfileCheckEvent.success();\n        setUsernameErrorInfo('');\n      },\n      onFinally: () => {\n        setLoading(false);\n      },\n    },\n  );\n\n  const onUsernameChange = async (innerUsername?: string) => {\n    if (!innerUsername) {\n      return;\n    }\n    try {\n      updateProfileEvent.start();\n\n      setLoading(true);\n\n      await passportApi.updateUserProfile({\n        user_unique_name: innerUsername,\n      });\n      updateProfileEvent.success();\n    } catch (error) {\n      updateProfileEvent.error({\n        error: error as Error,\n        reason: 'update username failed',\n      });\n\n      if (isApiError(error)) {\n        setUsernameErrorInfo(error.msg ?? '');\n      }\n\n      throw error;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const onUserInfoFieldCancel = () => {\n    refreshUserInfo();\n    setUsernameErrorInfo('');\n  };\n\n  useEffect(() => {\n    setNickname(userInfo?.name);\n    setUsername(getUserName(userInfo));\n    setAvatar(userInfo?.avatar_url ?? '');\n  }, [userInfo]);\n\n  // Refresh user information once upon entry and exit\n  useEffect(() => {\n    refreshUserInfo();\n    return () => {\n      refreshUserInfo();\n    };\n  }, []);\n\n  return (\n    <div\n      className={classNames(\n        styles['edit-profile'],\n        'flex flex-col w-full h-full',\n      )}\n    >\n      <UpdateUserAvatar\n        className={styles['update-avatar']}\n        value={avatar}\n        onSuccess={url => {\n          setAvatar(url);\n          Toast.success({\n            content: I18n.t('upload_avatar_success'),\n            showClose: false,\n          });\n        }}\n        onError={() =>\n          Toast.error({\n            content: 'upload_avatar_failed',\n          })\n        }\n        ref={uploadRef}\n      />\n      <UserInfoFieldWrap label={I18n.t('user_info_username')}>\n        <div className=\"flex\">\n          <UserInfoField\n            loading={loading}\n            className={styles['info-field']}\n            value={username}\n            onChange={v => {\n              setUsername(v ?? '');\n              const message = handleUsernameRegexpError(v);\n              if (message) {\n                cancelValidateUsername();\n                setLoading(false);\n              } else {\n                v && validateUsername(v);\n              }\n            }}\n            customContent={\n              !username ? (\n                <div\n                  className={classNames(\n                    'inline-flex items-center gap-[2px] shrink-0',\n                    'text-[12px] font-[500] coz-fg-hglt-red',\n                  )}\n                >\n                  <IconCozWarningCircleFillPalette />\n                  {I18n.t('setting_username_empty')}\n                </div>\n              ) : undefined\n            }\n            errorMessage={userNameErrorInfo}\n            customComponent={WrappedUsernameInput}\n            onSave={onUsernameChange}\n            onCancel={() => {\n              setUsername(getUserName(userInfo));\n              onUserInfoFieldCancel();\n            }}\n          />\n        </div>\n      </UserInfoFieldWrap>\n      <UserInfoFieldWrap label={I18n.t('user_info_custom_name')}>\n        <div className=\"flex\">\n          <UserInfoField\n            loading={loading}\n            className={styles['info-field']}\n            value={nickname}\n            onChange={setNickname}\n            customComponent={WrappedInputWithCount}\n            onSave={onNicknameChange}\n            onCancel={onUserInfoFieldCancel}\n          />\n        </div>\n      </UserInfoFieldWrap>\n      <UserInfoFieldWrap label={I18n.t('user_info_email')}>\n        <div className=\"flex\">\n          <UserInfoField\n            readonly\n            className={styles['info-field']}\n            value={userInfo?.email || '-'}\n          />\n        </div>\n      </UserInfoFieldWrap>\n      <UserInfoFieldWrap label={I18n.t('user_info_password')}>\n        <div className=\"flex\">\n          <UserInfoField\n            className={styles['info-field']}\n            value={password}\n            customContent={'******' /*<PasswordDesc value={password} />*/}\n            customComponent={WrappedPasswordInput}\n            onChange={val => setPassword(val ?? '')}\n            onSave={onPasswordChange}\n            onCancel={onUserInfoFieldCancel}\n          />\n        </div>\n      </UserInfoFieldWrap>\n      <UserInfoFieldWrap label={I18n.t('language')}>\n        <div className=\"flex\">\n          <UserInfoField\n            className={styles['info-field']}\n            value={lang}\n            customContent={\n              getLanguageOptions().find(item => item.value === lang)?.label\n            }\n            customComponent={WrappedSelectInput}\n            onChange={langValue =>\n              setLang((langValue as 'zh-CN' | 'en-US') ?? 'zh-CN')\n            }\n            onSave={onLanguageChange}\n          />\n        </div>\n      </UserInfoFieldWrap>\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState } from 'react';\n\nimport { Modal, type ModalProps } from '@coze-arch/coze-design';\n\nexport type UseModalParams = Omit<ModalProps, 'visible'>;\n\nexport interface UseModalReturnValue {\n  modal: (inner: JSX.Element) => JSX.Element;\n  open: () => void;\n  close: () => void;\n}\n\nexport const useModal = (params: UseModalParams): UseModalReturnValue => {\n  const [visible, setVisible] = useState(false);\n\n  return {\n    modal: inner => (\n      <Modal {...params} visible={visible}>\n        {inner}\n      </Modal>\n    ),\n    open: () => setVisible(true),\n    close: () => setVisible(false),\n  };\n};\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ReactElement, useState } from 'react';\n\nimport { I18n } from '@coze-arch/i18n';\nimport { Typography, Space } from '@coze-arch/coze-design';\nimport { UITabBar, Divider } from '@coze-arch/bot-semi';\n\nimport { useModal } from './use-modal';\n\nimport s from './index.module.less';\n\nexport interface TabItem {\n  id: string;\n  tabName: string;\n  /**\n   * @param close settings pop-up\n   * @returns ReactElement\n   */\n  content: (close?: () => void) => ReactElement;\n}\n\nexport const useAccountSettings = ({\n  tabs,\n  onClose,\n}: {\n  tabs: Array<TabItem | 'divider'>;\n  onClose?: () => void;\n}) => {\n  const realTabs = tabs.filter(item => item !== 'divider');\n\n  const [currentTab, setCurrentTab] = useState(() => realTabs[0]?.id);\n\n  const { content, tabName } =\n    realTabs.find(item => String(item.id) === currentTab) || {};\n\n  const tabList = tabs.map(item => {\n    if (item === 'divider') {\n      return {\n        tab: <Divider className=\"disabled pt-[1px] pb-[1px]\" />,\n        itemKey: 'general',\n        disabled: true,\n      };\n    }\n    return {\n      tab: item.tabName,\n      itemKey: String(item.id),\n    };\n  });\n\n  const { open, close, modal } = useModal({\n    title: null,\n    centered: true,\n    onCancel: () => {\n      onClose?.();\n      close();\n    },\n    className: s['profile-modal'],\n    height: 600,\n    width: 1120,\n    linearGradientMask: true,\n  });\n\n  const Content = (\n    <Space align=\"start\" spacing={24} className=\"flex\">\n      <Space vertical align=\"start\" spacing={16} className={s['profile-left']}>\n        <Typography.Text className={`${s['text-20']} pl-[8px]`}>\n          {I18n.t('profile_settings')}\n        </Typography.Text>\n        <UITabBar\n          wrapperClass={s['profile-tab']}\n          tabList={tabList}\n          activeKey={currentTab}\n          onChange={setCurrentTab}\n          tabPosition=\"left\"\n          type=\"button\"\n        />\n      </Space>\n      <div className={s.divider}></div>\n      <Space vertical className={'w-full' + ` ${s['profile-right']}`}>\n        <Typography.Text className={`${s.title}`}>{tabName}</Typography.Text>\n        <div className={s.container}>{content?.(close)}</div>\n      </Space>\n    </Space>\n  );\n\n  return {\n    node: <>{modal(Content)}</>,\n    open: (tabId?: string) => {\n      if (tabId && realTabs.find(item => String(item.id) === tabId)) {\n        setCurrentTab(tabId);\n      }\n      open();\n    },\n    close: () => {\n      close();\n    },\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The @file open-source version does not provide enterprise management functions for the time being. The methods exported in this file are for future expansion.\n */\n/* eslint-disable @typescript-eslint/no-empty-function */\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport {\n  type GetEnterpriseResponseData,\n  type ListEnterpriseResponseData,\n} from '@coze-arch/bot-api/pat_permission_api';\n\nimport { PERSONAL_ENTERPRISE_ID } from '../constants';\n\ninterface EnterpriseStoreState {\n  currentEnterprise?: GetEnterpriseResponseData;\n  isCurrentEnterpriseInit: boolean;\n  enterpriseList?: ListEnterpriseResponseData;\n  isEnterpriseListInit: boolean;\n  enterpriseId: string;\n  isEnterpriseExist: boolean;\n}\n\ninterface EnterpriseStoreAction {\n  setEnterprise: (enterpriseInfo: GetEnterpriseResponseData) => void;\n  updateEnterpriseByImmer: (\n    update: (enterpriseInfo: GetEnterpriseResponseData) => void,\n  ) => void;\n  setEnterpriseList: (enterpriseList: ListEnterpriseResponseData) => void;\n  setIsCurrentEnterpriseInit: (isInit: boolean) => void;\n  setIsEnterpriseListInit: (isInit: boolean) => void;\n  setEnterpriseId: (enterpriseId: string) => void;\n  clearEnterprise: () => void;\n  fetchEnterprise: (enterpriseId: string) => Promise<void>;\n  setIsEnterpriseExist: (isExist: boolean) => void;\n}\n\nexport const defaultState: EnterpriseStoreState = {\n  isCurrentEnterpriseInit: true,\n  isEnterpriseListInit: true,\n  enterpriseId: PERSONAL_ENTERPRISE_ID,\n  isEnterpriseExist: true,\n};\n\nexport const useEnterpriseStore = create<\n  EnterpriseStoreState & EnterpriseStoreAction\n>()(\n  // @ts-expect-error skip\n  devtools(\n    () => ({\n      ...defaultState,\n      setEnterprise: (_: GetEnterpriseResponseData) => {},\n      updateEnterpriseByImmer: (\n        _: (enterpriseInfo: GetEnterpriseResponseData) => void,\n      ) => {},\n      clearEnterprise: () => {},\n      setEnterpriseId: (_: string) => {},\n      setIsCurrentEnterpriseInit: (_: boolean) => {},\n      setIsEnterpriseListInit: (_: boolean) => {},\n      setEnterpriseList: (_: ListEnterpriseResponseData) => {},\n      setIsEnterpriseExist: (_: boolean) => {},\n      // Obtaining enterprise information can be continuously invoked without asynchronous competition.\n      fetchEnterprise: (_: string) => {},\n    }),\n    {\n      enabled: IS_DEV_MODE,\n      name: 'botStudio.enterpriseStore',\n    },\n  ),\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const PERSONAL_ENTERPRISE_ID = 'personal';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The @file open-source version does not provide enterprise management functions for the time being. The methods exported in this file are for future expansion.\n */\nimport { type GetEnterpriseResponseData } from '@coze-arch/bot-api/pat_permission_api';\n\nimport { useEnterpriseStore } from '../stores/enterprise';\n\nexport interface CurrentEnterpriseInfoProps extends GetEnterpriseResponseData {\n  organization_id: string | undefined;\n}\n/**\n * Acquire current corporate information.\n * If the current enterprise is a personal edition, null is returned.\n * Otherwise, return current enterprise information, including enterprise information and organization ID.\n * @example\n * const { organization_id, enterprise_id } = useCurrentEnterpriseInfo();\n * @Returns { (GetEnterpriseResponseData & {organization_id: string | undefined}) | null} current enterprise information or null\n */\nexport const useCurrentEnterpriseInfo: () => CurrentEnterpriseInfoProps | null =\n  () => null;\n\n/**\n * Obtain the current enterprise ID.\n * If the current enterprise type is Personal Edition, the agreed string is returned.\n * Otherwise, return the ID of the current enterprise.\n * @Returns {string} current enterprise ID\n */\nexport const useCurrentEnterpriseId = () =>\n  useEnterpriseStore(store => store.enterpriseId);\n\n/**\n * Check whether the current enterprise is a personal version.\n * @Returns {boolean} True if the current enterprise is a personal edition, false otherwise.\n */\nexport const useIsCurrentPersonalEnterprise = () => true;\n\n/**\n * Get a list of roles for the current enterprise.\n * If the current enterprise type is Personal, an empty array is returned.\n * Otherwise, a list of the current enterprise's role types is returned, or an empty array if the list does not exist.\n * @Returns {Array} list of roles for the current enterprise\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const useCurrentEnterpriseRoles = (): any[] => [];\n\n/** Is it the enterprise version? */\nexport const useIsEnterpriseLevel = () => false;\n\n/** Is it the team version? */\nexport const useIsTeamLevel = () => false;\n\nexport const useIsCurrentEnterpriseInit = () =>\n  useEnterpriseStore(store => store.isCurrentEnterpriseInit);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type logoutOnly as logoutOnlyOfSdk,\n  type uploadAvatar as uploadAvatarOfSdk,\n} from '@coze-arch/foundation-sdk';\nimport {\n  logout as logoutOnlyImpl,\n  passportApi,\n} from '@coze-foundation/account-adapter';\n\nexport const logoutOnly = logoutOnlyImpl satisfies typeof logoutOnlyOfSdk;\n\nexport const uploadAvatar: typeof uploadAvatarOfSdk = (avatar: File) =>\n  passportApi.uploadAvatar({ avatar });\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type refreshUserInfo as refreshUserInfoOfSdk,\n  type getIsSettled as getIsSettledOfSdk,\n  type getIsLogined as getIsLoginedOfSdk,\n  type getUserInfo as getUserInfoOfSdk,\n  type useIsSettled as useIsSettledOfSdk,\n  type useIsLogined as useIsLoginedOfSdk,\n  type useUserInfo as useUserInfoOfSdk,\n  type getLoginStatus as getLoginStatusOfSdk,\n  type useLoginStatus as useLoginStatusOfSdk,\n  type getUserAuthInfos as getUserAuthInfosOfSdk,\n  type useUserAuthInfo as useUserAuthInfoOfSdk,\n  type useUserLabel as useUserLabelOfSdk,\n  type subscribeUserAuthInfos as subscribeUserAuthInfosOfSdk,\n} from '@coze-arch/foundation-sdk';\nimport {\n  refreshUserInfo as refreshUserInfoImpl,\n  getLoginStatus as getLoginStatusImpl,\n  useLoginStatus as useLoginStatusImpl,\n  getUserInfo as getUserInfoImpl,\n  useUserInfo as useUserInfoImpl,\n  getUserAuthInfos as getUserAuthInfosImpl,\n  useUserAuthInfo as useUserAuthInfoImpl,\n  useUserLabel as useUserLabelImpl,\n  subscribeUserAuthInfos as subscribeUserAuthInfosImpl,\n} from '@coze-foundation/account-adapter';\n\n/** @deprecated using getLoginStatus */\nexport const getIsSettled = (() =>\n  getLoginStatus() !== 'settling') satisfies typeof getIsSettledOfSdk;\n/** @deprecated using getLoginStatus */\nexport const getIsLogined = (() =>\n  getLoginStatus() === 'logined') satisfies typeof getIsLoginedOfSdk;\nexport const getUserInfo = getUserInfoImpl satisfies typeof getUserInfoOfSdk;\nexport const getUserAuthInfos =\n  getUserAuthInfosImpl satisfies typeof getUserAuthInfosOfSdk;\n/** @deprecated useLoginStatus */\nexport const useIsSettled = (() => {\n  const status = useLoginStatus();\n  return status !== 'settling';\n}) satisfies typeof useIsSettledOfSdk;\n/** @deprecated useLoginStatus */\nexport const useIsLogined = (() => {\n  const status = useLoginStatus();\n  return status === 'logined';\n}) satisfies typeof useIsLoginedOfSdk;\nexport const useUserInfo = useUserInfoImpl satisfies typeof useUserInfoOfSdk;\n\nexport const useUserAuthInfo =\n  useUserAuthInfoImpl satisfies typeof useUserAuthInfoOfSdk;\nexport const useUserLabel = useUserLabelImpl satisfies typeof useUserLabelOfSdk;\nexport const subscribeUserAuthInfos =\n  subscribeUserAuthInfosImpl satisfies typeof subscribeUserAuthInfosOfSdk;\n\nexport const refreshUserInfo =\n  refreshUserInfoImpl satisfies typeof refreshUserInfoOfSdk;\nexport const useLoginStatus =\n  useLoginStatusImpl satisfies typeof useLoginStatusOfSdk;\nexport const getLoginStatus =\n  getLoginStatusImpl satisfies typeof getLoginStatusOfSdk;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type BotSpace } from '@coze-arch/bot-api/developer_api';\nimport { useSpace as useInternalSpace } from '@coze-foundation/space-store';\n\nexport function useSpace(spaceId: string): BotSpace | undefined {\n  const { space } = useInternalSpace(spaceId);\n\n  return space;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const enum EventNames {\n  BrowserUpgradeTipsVisible = 'browserUpgradeTipsVisible',\n  BrowserUpgradeClick = 'browserUpgradeClick',\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { detect, type Browser } from 'detect-browser';\n\nimport { compareVersion } from './compare-version';\n\ntype VersionConfig = {\n  [K in Browser]?: string;\n};\n\ntype DownloadConfig = {\n  [K in Browser]?: string;\n};\n\nconst PC_VERSION_CONFIG: VersionConfig = {\n  ['chrome']: '87.0.0',\n  ['edge-chromium']: '100.0.0',\n  ['edge']: '100.0.0',\n  ['safari']: '14.0.0',\n  ['firefox']: '79.0.0',\n  ['ie']: '999999.0.0',\n};\n\n// cp-disable-next-line\nconst CN_CHROME_URL = 'https://www.google.cn/chrome/';\n// cp-disable-next-line\nconst INTERNATIONAL_CHROME_URL = 'https://www.google.com/chrome/';\n\n// cp-disable-next-line\nconst CN_EDGE_URL = 'https://www.microsoft.com/zh-cn/edge';\n// cp-disable-next-line\nconst INTERNATIONAL_EDGE_URL = 'https://www.microsoft.com/edge';\n\nconst CN_BROWSER_DOWNLOAD_CONFIG: DownloadConfig = {\n  ['chrome']: CN_CHROME_URL,\n  ['edge-chromium']: CN_EDGE_URL,\n  ['edge']: CN_EDGE_URL,\n  // cp-disable-next-line\n  ['safari']: 'https://apps.apple.com/cn/app/safari/id1146562112',\n  // cp-disable-next-line\n  ['firefox']: 'https://www.mozilla.org/zh-CN/firefox/new/',\n  ['ie']: CN_CHROME_URL,\n};\n\nconst INTERNATIONAL_BROWSER_DOWNLOAD_CONFIG: DownloadConfig = {\n  ['chrome']: INTERNATIONAL_CHROME_URL,\n  ['edge-chromium']: INTERNATIONAL_EDGE_URL,\n  ['edge']: INTERNATIONAL_EDGE_URL,\n  // cp-disable-next-line\n  ['safari']: 'https://apps.apple.com/app/safari/id1146562112',\n  // cp-disable-next-line\n  ['firefox']: 'https://www.mozilla.org/firefox/new/',\n  ['ie']: INTERNATIONAL_CHROME_URL,\n};\n\n/**\n * At present, it seems that the mobile end/PC version is the same without distinction. If it is distinguished later, it will be distinguished by conditions here.\n */\nexport const testLowVersionBrowse = () => testPCVersion();\n\nconst testPCVersion = () => {\n  const browserInfo = detect(navigator.userAgent);\n\n  if (!browserInfo) {\n    return null;\n  }\n\n  const { name, version } = browserInfo;\n\n  // The displayed judgment, incorrectly inferred with the includes type\n  if (name === 'bot' || name === 'react-native' || name === 'node') {\n    return null;\n  }\n\n  const configVersion = PC_VERSION_CONFIG[name];\n\n  if (!configVersion) {\n    return null;\n  }\n\n  if (compareVersion(version, configVersion) >= 0) {\n    return null;\n  }\n\n  return {\n    downloadUrl: IS_OVERSEA\n      ? INTERNATIONAL_BROWSER_DOWNLOAD_CONFIG[name] ?? INTERNATIONAL_CHROME_URL\n      : CN_BROWSER_DOWNLOAD_CONFIG[name] ?? CN_CHROME_URL,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport function compareVersion(version1: string, version2: string): number {\n  // Split the version number string into an array of numbers, here use map (Number) to ensure conversion to numeric type\n  const parts1 = version1.split('.').map(Number);\n  const parts2 = version2.split('.').map(Number);\n\n  // Calculate the longest version length\n  const maxLength = Math.max(parts1.length, parts2.length);\n\n  // Compare each part of the version number one by one\n  for (let i = 0; i < maxLength; i++) {\n    // If a version number does not have a corresponding number at this position, it is treated as 0.\n    const part1 = i < parts1.length ? parts1[i] : 0;\n    const part2 = i < parts2.length ? parts2[i] : 0;\n\n    // Compare the current parts of two version numbers\n    if (part1 > part2) {\n      return 1;\n    }\n    if (part1 < part2) {\n      return -1;\n    }\n  }\n\n  // If all parts are equal, then the version numbers are equal\n  return 0;\n}\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  useEffect,\n  useRef,\n  useState,\n  type FC,\n  type PropsWithChildren,\n} from 'react';\n\nimport classNames from 'classnames';\nimport { reporter } from '@coze-arch/logger';\nimport { I18n } from '@coze-arch/i18n';\nimport { IconCozCross } from '@coze-arch/coze-design/icons';\n\nimport { testLowVersionBrowse } from '../../utils';\nimport { EventNames } from '../../constants';\n\nimport styles from './index.module.less';\n\ntype IProps = Record<string, unknown>;\n\ninterface BannerInfo {\n  url: string;\n  visible: boolean;\n}\n\nexport const BrowserUpgradeWrap: FC<PropsWithChildren<IProps>> = props => {\n  const { children } = props;\n\n  const [bannerInfo, setBannerInfo] = useState<BannerInfo>({\n    url: '',\n    visible: false,\n  });\n  const [bannerHeight, setBannerHeight] = useState(0);\n\n  const bannerRef = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    const result = testLowVersionBrowse();\n\n    if (!result) {\n      return;\n    }\n\n    const { downloadUrl } = result;\n\n    reporter.event({\n      eventName: EventNames.BrowserUpgradeTipsVisible,\n    });\n\n    setBannerInfo({ url: downloadUrl, visible: !!downloadUrl });\n  }, []);\n\n  useEffect(() => {\n    if (!bannerRef.current) {\n      setBannerHeight(0);\n      return;\n    }\n\n    setBannerHeight(bannerRef.current.getBoundingClientRect().height ?? 0);\n  }, [bannerInfo]);\n\n  const handleClick = () => {\n    if (!bannerInfo.url) {\n      return;\n    }\n\n    reporter.event({\n      eventName: EventNames.BrowserUpgradeClick,\n    });\n\n    window.open(bannerInfo.url);\n  };\n\n  const handleBannerClose = () => {\n    setBannerInfo(prevState => ({ ...prevState, visible: false }));\n  };\n\n  return (\n    <>\n      {bannerInfo.visible ? (\n        <div\n          className={classNames(\n            styles['banner-wrapper'],\n            styles['flex-helper'],\n            styles['flex-direction-row-helper'],\n            styles['flex-items-center'],\n          )}\n          ref={bannerRef}\n        >\n          <div\n            className={classNames(\n              styles['banner-item'],\n              styles['flex-1-helper'],\n              styles['flex-items-center'],\n              styles['flex-justify-center'],\n            )}\n          >\n            <span>{I18n.t('browser_upgrade')}: </span>\n            <span\n              className={styles['banner-upgrade-button']}\n              onClick={handleClick}\n            >\n              {I18n.t('browser_upgrade_button')}\n            </span>\n          </div>\n          <div onClick={handleBannerClose}>\n            <IconCozCross className={styles.close} />\n          </div>\n        </div>\n      ) : null}\n      <div\n        style={{\n          height: `calc(100% - ${bannerHeight}px)`,\n          position: 'relative',\n        }}\n      >\n        {children}\n      </div>\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, useRef } from 'react';\n\nimport { EVENT_NAMES, sendTeaEvent } from '@coze-arch/bot-tea';\nimport { useCreateProjectModal } from '@coze-studio/project-entity-adapter';\nimport { cozeMitt } from '@coze-common/coze-mitt';\n\nexport const useCreateBotAction = ({\n  autoCreate,\n  urlSearch,\n  currentSpaceId,\n}: {\n  autoCreate?: boolean;\n  urlSearch?: string;\n  currentSpaceId?: string;\n}) => {\n  // Create bot function\n  const newWindowRef = useRef<Window | null>(null);\n  const openWindow = () => {\n    newWindowRef.current = window.open();\n  };\n  const destroyWindow = () => {\n    if (!newWindowRef.current) {\n      return;\n    }\n    newWindowRef.current.close();\n  };\n  const { modalContextHolder, createProject } = useCreateProjectModal({\n    bizCreateFrom: 'navi',\n    selectSpace: true,\n    onCreateBotSuccess: (botId, targetSpaceId) => {\n      let url = `/space/${targetSpaceId}/bot/${botId}`;\n      if (autoCreate) {\n        url += urlSearch;\n      }\n      if (botId && newWindowRef.current) {\n        newWindowRef.current.location = url;\n      } else {\n        destroyWindow();\n      }\n    },\n    onBeforeCreateBot: () => {\n      sendTeaEvent(EVENT_NAMES.create_bot_click, {\n        source: 'menu_bar',\n      });\n      openWindow();\n    },\n    onCreateBotError: () => {\n      destroyWindow();\n    },\n    onBeforeCreateProject: () => {\n      openWindow();\n    },\n    onCreateProjectError: () => {\n      destroyWindow();\n    },\n    onBeforeCopyProjectTemplate: ({ toSpaceId }) => {\n      if (toSpaceId !== currentSpaceId) {\n        openWindow();\n      }\n    },\n    onProjectTemplateCopyError: () => {\n      destroyWindow();\n    },\n    onCreateProjectSuccess: ({ projectId, spaceId }) => {\n      const baseUrl = `/space/${spaceId}/project-ide/${projectId}`;\n\n      if (!newWindowRef.current) {\n        return;\n      }\n      if (autoCreate) {\n        newWindowRef.current.location = baseUrl + urlSearch;\n      }\n      newWindowRef.current.location = baseUrl;\n    },\n    onCopyProjectTemplateSuccess: param => {\n      cozeMitt.emit('createProjectByCopyTemplateFromSidebar', param);\n      if (newWindowRef.current) {\n        newWindowRef.current.location = `/space/${param.toSpaceId}/develop`;\n      }\n    },\n  });\n\n  useEffect(() => {\n    if (autoCreate) {\n      createProject();\n    }\n  }, [autoCreate]);\n\n  return {\n    createBot: createProject,\n    createBotModal: modalContextHolder,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useUserInfo, useUserLabel } from '@coze-arch/foundation-sdk';\nimport {\n  CozAvatar,\n  Badge,\n  Dropdown,\n  Space,\n  Typography,\n  Tooltip,\n} from '@coze-arch/coze-design';\n\nconst ellipsis = {\n  showTooltip: true,\n};\n\nexport const UserInfoMenu = () => {\n  const userInfo = useUserInfo();\n  const userLabel = useUserLabel();\n\n  if (!userInfo) {\n    return null;\n  }\n\n  const userUniqueName = userInfo?.app_user_info?.user_unique_name;\n\n  return (\n    <Dropdown.Item className=\"!h-fit\">\n      <div className=\"flex justify-between items-center w-full\">\n        <Space spacing={8} className=\"shrink grow overflow-hidden\">\n          {\n            <Badge\n              position=\"rightBottom\"\n              countStyle={{\n                right: 6,\n                bottom: 6,\n              }}\n              count={\n                userLabel?.icon_url ? (\n                  <Tooltip\n                    showArrow\n                    position=\"right\"\n                    content={userLabel?.label_name}\n                    trigger={userLabel?.label_name ? 'hover' : 'custom'}\n                  >\n                    <div className=\"bg-white rounded-full w-[16px] h-[16px] flex items-center justify-center\">\n                      <CozAvatar\n                        src={userLabel?.icon_url}\n                        className=\"w-[12px] h-[12px] rounded-full\"\n                        type=\"person\"\n                        onClick={event => {\n                          if (userLabel?.jump_link) {\n                            event?.preventDefault();\n                            event?.stopPropagation();\n                            window.open(userLabel?.jump_link, '_blank');\n                          }\n                        }}\n                      />\n                    </div>\n                  </Tooltip>\n                ) : null\n              }\n              className=\"shrink-0\"\n            >\n              <CozAvatar\n                src={userInfo.avatar_url}\n                className=\"w-[32px] h-[32px] rounded-full\"\n                type=\"person\"\n              />\n            </Badge>\n          }\n          {\n            <div className=\"flex-1 text-[14px] leading-[20px] overflow-hidden sp\">\n              <Typography.Text\n                className=\"coz-fg-primary font-[500]\"\n                ellipsis={ellipsis}\n              >\n                {userInfo.name}\n              </Typography.Text>\n              <Typography.Text className=\"coz-fg-secondary\" ellipsis={ellipsis}>\n                {userUniqueName ? '@' : ''}\n                {userUniqueName}\n              </Typography.Text>\n            </div>\n          }\n        </Space>\n      </div>\n    </Dropdown.Item>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { PatBody } from '@coze-studio/open-auth';\nimport {\n  useAccountSettings as useBaseAccountSettings,\n  UserInfoPanel,\n} from '@coze-foundation/account-ui-base';\nimport { I18n } from '@coze-arch/i18n';\n\nexport const useAccountSettings = () => {\n  const tabs = [\n    {\n      id: 'account',\n      tabName: I18n.t('menu_profile_account'),\n      content: () => <UserInfoPanel />,\n    },\n    {\n      id: 'api-auth',\n      tabName: I18n.t('settings_api_authorization'),\n      content: () => <PatBody size=\"small\" type=\"primary\" />,\n    },\n  ];\n\n  const { node, open } = useBaseAccountSettings({\n    tabs,\n  });\n  return {\n    node,\n    open,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState } from 'react';\n\nimport { GlobalLayoutAccountDropdown } from '@coze-foundation/layout';\nimport { useLogout } from '@coze-foundation/account-ui-adapter';\nimport { I18n } from '@coze-arch/i18n';\nimport { useUserInfo } from '@coze-arch/foundation-sdk';\nimport { IconCozExit, IconCozSetting } from '@coze-arch/coze-design/icons';\nimport { Dropdown } from '@coze-arch/coze-design';\n\nimport { UserInfoMenu } from './user-info-menu';\nimport { useAccountSettings } from './account-settings';\n\nexport const AccountDropdown = () => {\n  const [visible, setVisible] = useState(false);\n  const userInfo = useUserInfo();\n  const { node: logoutModal, open: openLogoutModal } = useLogout();\n\n  const { node: accountSettingsNode, open: openAccountSettings } =\n    useAccountSettings();\n\n  if (!userInfo) {\n    return null;\n  }\n\n  return (\n    <GlobalLayoutAccountDropdown\n      menus={[\n        <UserInfoMenu key=\"user-info\" />,\n        <Dropdown.Divider key=\"divider-1\" />,\n        {\n          key: 'api-auth',\n          prefixIcon: <IconCozExit />,\n          title: I18n.t('settings_api_authorization'),\n          onClick: () => {\n            openAccountSettings('api-auth');\n          },\n          dataTestId: 'layout_avatar_api-auth',\n        },\n        {\n          key: 'account-settings',\n          prefixIcon: <IconCozSetting />,\n          title: I18n.t('navi_bar_account_settings'),\n          onClick: () => {\n            openAccountSettings('account');\n          },\n          dataTestId: 'layout_avatar_profile-settings',\n        },\n        <Dropdown.Divider key=\"divider-2\" />,\n        {\n          key: 'logout',\n          prefixIcon: <IconCozExit />,\n          title: I18n.t('basic_log_out'),\n          onClick: () => {\n            openLogoutModal();\n          },\n          dataTestId: 'layout_avatar_logout-button',\n        },\n      ]}\n      visible={visible}\n      onVisibleChange={setVisible}\n    >\n      {logoutModal}\n      {accountSettingsNode}\n    </GlobalLayoutAccountDropdown>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useLocation } from 'react-router-dom';\n\nimport { useIsLogined } from '@coze-arch/foundation-sdk';\nimport { useRouteConfig } from '@coze-arch/bot-hooks';\n\nexport const useHasSider = () => {\n  const config = useRouteConfig();\n  const location = useLocation();\n  const isLogined = useIsLogined();\n  const queryParams = new URLSearchParams(location.search);\n  const pageMode = queryParams.get('page_mode');\n\n  // Priority is given to using page_mode parameters to determine whether it is full screen mode\n  if (config.pageModeByQuery && pageMode === 'modal') {\n    return false;\n  }\n\n  const notCheckLoginPage =\n    (config.requireAuth && config.requireAuthOptional) || !config.requireAuth;\n  // Pages that can be accessed without logging in\n  if (config.hasSider && notCheckLoginPage && !isLogined) {\n    return false;\n  }\n\n  return !!config.hasSider;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useParams } from 'react-router-dom';\nimport { type FC, type PropsWithChildren } from 'react';\n\nimport { GlobalLayout } from '@coze-foundation/layout';\nimport { useCreateBotAction } from '@coze-foundation/global';\nimport { RequireAuthContainer } from '@coze-foundation/account-ui-adapter';\nimport { I18n } from '@coze-arch/i18n';\nimport { useRouteConfig } from '@coze-arch/bot-hooks';\nimport {\n  IconCozPlusCircle,\n  IconCozWorkspace,\n  IconCozWorkspaceFill,\n  IconCozCompass,\n  IconCozCompassFill,\n  IconCozDocument,\n} from '@coze-arch/coze-design/icons';\n\nimport { AccountDropdown } from '../account-dropdown';\nimport { useHasSider } from './hooks/use-has-sider';\n\nexport const GlobalLayoutComposed: FC<PropsWithChildren> = ({ children }) => {\n  const config = useRouteConfig();\n  const hasSider = useHasSider();\n  const { space_id } = useParams();\n\n  const { createBot, createBotModal } = useCreateBotAction({\n    currentSpaceId: space_id,\n  });\n\n  return (\n    <RequireAuthContainer\n      needLogin={!!config.requireAuth}\n      loginOptional={!!config.requireAuthOptional}\n    >\n      <GlobalLayout\n        hasSider={hasSider}\n        banner={null}\n        actions={[\n          {\n            tooltip: I18n.t('creat_tooltip_create'),\n            icon: <IconCozPlusCircle />,\n            onClick: createBot,\n            dataTestId: 'layout_create-agent-button',\n          },\n        ]}\n        menus={[\n          {\n            title: I18n.t('navigation_workspace'),\n            icon: <IconCozWorkspace />,\n            activeIcon: <IconCozWorkspaceFill />,\n            path: '/space',\n            dataTestId: 'layout_workspace-button',\n          },\n          {\n            title: I18n.t('menu_title_store'),\n            icon: <IconCozCompass />,\n            activeIcon: <IconCozCompassFill />,\n            path: '/explore',\n            dataTestId: 'layout_explore-button',\n          },\n        ]}\n        extras={[\n          {\n            icon: <IconCozDocument />,\n            tooltip: I18n.t('menu_documents'),\n            onClick: () => {\n              // cp-disable-next-line\n              window.open('https://www.coze.cn/open/docs/guides');\n            },\n            dataTestId: 'layout_document-button',\n          },\n        ]}\n        footer={<AccountDropdown />}\n      >\n        {children}\n        {createBotModal}\n      </GlobalLayout>\n    </RequireAuthContainer>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Outlet } from 'react-router-dom';\nimport { type FC, useEffect } from 'react';\n\nimport { useUpdate } from 'ahooks';\nimport { BrowserUpgradeWrap } from '@coze-foundation/browser-upgrade-banner';\nimport { I18nProvider } from '@coze-arch/i18n/i18n-provider';\nimport { I18n } from '@coze-arch/i18n';\nimport { useUserInfo } from '@coze-arch/foundation-sdk';\nimport { zh_CN, en_US } from '@coze-arch/coze-design/locales';\nimport {\n  CDLocaleProvider,\n  ThemeProvider,\n  enUS,\n  zhCN,\n} from '@coze-arch/coze-design';\nimport { LocaleProvider } from '@coze-arch/bot-semi';\n\nimport { GlobalLayoutComposed } from '@/components/global-layout-composed';\n\nexport const GlobalLayout: FC = () => {\n  const userInfo = useUserInfo();\n  const update = useUpdate();\n  const currentLocale = userInfo?.locale ?? navigator.language ?? 'en-US';\n\n  // For historical reasons, en-US needs to be converted to en.\n  const transformedCurrentLocale =\n    currentLocale === 'en-US' ? 'en' : currentLocale;\n\n  useEffect(() => {\n    if (userInfo && I18n.language !== transformedCurrentLocale) {\n      localStorage.setItem('i18next', transformedCurrentLocale);\n      I18n.setLang(transformedCurrentLocale);\n      // Force an update, otherwise the language switch will not take effect\n      update();\n    }\n  }, [userInfo, transformedCurrentLocale, update]);\n\n  return (\n    <I18nProvider i18n={I18n}>\n      <CDLocaleProvider locale={currentLocale === 'en-US' ? en_US : zh_CN}>\n        <LocaleProvider locale={currentLocale === 'en-US' ? enUS : zhCN}>\n          <ThemeProvider\n            defaultTheme=\"light\"\n            changeSemiTheme={true}\n            changeBySystem={IS_BOE}\n          >\n            <BrowserUpgradeWrap>\n              <GlobalLayoutComposed>\n                <Outlet />\n              </GlobalLayoutComposed>\n            </BrowserUpgradeWrap>\n          </ThemeProvider>\n        </LocaleProvider>\n      </CDLocaleProvider>\n    </I18nProvider>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useRef } from 'react';\n\nimport { I18n } from '@coze-arch/i18n';\nimport { Modal } from '@coze-arch/coze-design';\nimport { useAlterOnLogout as useAlertOnLogoutImpl } from '@coze-foundation/account-adapter';\n\nexport const useAlertOnLogout = () => {\n  const alertRef = useRef(false);\n\n  const callback = () => {\n    if (alertRef.current) {\n      return;\n    }\n    alertRef.current = true;\n    Modal.confirm({\n      title: I18n.t('account_update_hint'),\n      okText: I18n.t('api_analytics_refresh'),\n      closeOnEsc: false,\n      maskClosable: false,\n      onOk: () => {\n        window.location.reload();\n      },\n    });\n  };\n  useAlertOnLogoutImpl(callback);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect } from 'react';\n\nimport { setMobileBody, setPCBody } from '@coze-arch/bot-utils';\nimport { useIsResponsiveByRouteConfig } from '@coze-arch/bot-hooks';\n\nexport const useSetResponsiveBodyStyle = () => {\n  const isResponsive = useIsResponsiveByRouteConfig();\n  useEffect(() => {\n    if (isResponsive) {\n      setMobileBody();\n    } else {\n      setPCBody();\n    }\n  }, [isResponsive]);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect } from 'react';\n\nimport { userStoreService } from '@coze-studio/user-store';\nimport { useBotListFilterStore } from '@coze-agent-ide/space-bot/store';\nimport { useSpaceStore } from '@coze-arch/bot-studio-store';\n\nexport const useResetStoreOnLogout = () => {\n  const isSettled = userStoreService.useIsSettled();\n  const isLogined = userStoreService.useIsLogined();\n  useEffect(() => {\n    if (isSettled && !isLogined) {\n      useSpaceStore.getState().reset();\n      useBotListFilterStore.getState().reset();\n    }\n  }, [isLogined, isSettled]);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @File open source version does not support background configuration for future expansion\n */\nimport { useEffect } from 'react';\n\nimport { useCommonConfigStore } from '@coze-foundation/global-store';\n\nexport const useInitCommonConfig = () => {\n  const setInitialized = useCommonConfigStore(state => state.setInitialized);\n\n  useEffect(() => {\n    setInitialized();\n  }, []);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect } from 'react';\n\nimport { reporter, logger } from '@coze-arch/logger';\nimport { useRouteConfig } from '@coze-arch/bot-hooks';\nimport { useErrorCatch } from '@coze-arch/bot-error';\nimport slardar from '@coze-studio/default-slardar';\nimport { useAlertOnLogout } from '@coze-foundation/global/use-app-init';\nimport {\n  useSyncLocalStorageUid,\n  useCheckLogin,\n} from '@coze-foundation/account-adapter';\n\nimport { useSetResponsiveBodyStyle } from './use-responsive-body-style';\nimport { useResetStoreOnLogout } from './use-reset-store-on-logout';\nimport { useInitCommonConfig } from './use-init-common-config';\n\n/**\n * All initialization logic converges here\n * Note that the login status needs to be handled by yourself.\n */\nexport const useAppInit = () => {\n  const { requireAuth, requireAuthOptional, loginFallbackPath } =\n    useRouteConfig();\n\n  useCheckLogin({\n    needLogin: !!(requireAuth && !requireAuthOptional),\n    loginFallbackPath,\n  });\n\n  useSyncLocalStorageUid();\n\n  useEffect(() => {\n    reporter.info({ message: 'Ok fine' });\n    reporter.init(slardar);\n    logger.init(slardar);\n  }, []);\n\n  useErrorCatch(slardar);\n\n  useInitCommonConfig();\n\n  useResetStoreOnLogout();\n\n  useSetResponsiveBodyStyle();\n\n  useAlertOnLogout();\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport {\n  type CozeBanner,\n  type HomeBannerDisplay,\n  type QuickStartConfig,\n} from '@coze-arch/bot-api/playground_api';\n\ninterface ICommonConfig {\n  botIdeGuideVideoUrl: string;\n  bannerConfig?: CozeBanner;\n  homeBannerTask?: Array<HomeBannerDisplay>;\n  quickStart?: Array<QuickStartConfig>;\n  oceanProjectSpaces?: Array<string>;\n  douyinAvatarSpaces?: Array<string>;\n}\nexport interface ICommonConfigStoreState {\n  initialized: boolean;\n  commonConfigs: ICommonConfig;\n}\n\nexport interface ICommonConfigStoreAction {\n  setInitialized: () => void;\n  updateCommonConfigs: (commonConfigs: ICommonConfig) => void;\n}\n\nconst DEFAULT_COMMON_CONFIG_STATE: ICommonConfigStoreState = {\n  commonConfigs: {\n    botIdeGuideVideoUrl: '',\n    homeBannerTask: [],\n    quickStart: [],\n    oceanProjectSpaces: [],\n    douyinAvatarSpaces: [],\n  },\n  initialized: false,\n};\n\nexport const useCommonConfigStore = create<\n  ICommonConfigStoreState & ICommonConfigStoreAction\n>()(\n  devtools(set => ({\n    ...DEFAULT_COMMON_CONFIG_STATE,\n    updateCommonConfigs(commonConfigs: ICommonConfig) {\n      set(state => ({ ...state, commonConfigs }));\n    },\n    setInitialized: () => {\n      set({\n        initialized: true,\n      });\n    },\n  })),\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\n\ninterface SignMobileStore {\n  /** Has the logo ever popped up? */\n  mobileTips: boolean;\n}\n\ninterface SignMobileAction {\n  setMobileTips: (tipsFlag: boolean) => void;\n}\n\nexport const useSignMobileStore = create<SignMobileStore & SignMobileAction>()(\n  devtools(\n    set => ({\n      mobileTips: false,\n      setMobileTips: flag => {\n        set({ mobileTips: flag });\n      },\n    }),\n    {\n      enabled: IS_DEV_MODE,\n      name: 'botStudio.signMobile',\n    },\n  ),\n);\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { I18n } from '@coze-arch/i18n';\nimport { useUIModal } from '@coze-arch/bot-semi';\n\nimport s from './index.module.less';\n\nexport interface UseMobileTipsReturnType {\n  open: () => void;\n  close: () => void;\n  node: JSX.Element;\n}\n\nexport const useMobileTips = (): UseMobileTipsReturnType => {\n  const { open, close, modal } = useUIModal({\n    title: I18n.t('landing_mobile_popup_title'),\n    okText: I18n.t('landing_mobile_popup_button'),\n    // width: 456,\n    centered: true,\n    hideCancelButton: true,\n    isMobile: true,\n    onOk: () => {\n      close();\n    },\n  });\n\n  return {\n    node: modal(\n      <span className={s['mobile-tips-span']}>\n        {I18n.t('landing_mobile_popup_context')}\n      </span>,\n    ),\n    open: () => {\n      open();\n    },\n    close: () => {\n      close();\n    },\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { createContext, useContext } from 'react';\n\nimport { noop } from 'lodash-es';\n\nimport { type GlobalLayoutContext } from './types';\n\nexport const globalLayoutContext = createContext<GlobalLayoutContext>({\n  sideSheetVisible: false,\n  setSideSheetVisible: noop,\n});\nexport const GlobalLayoutProvider = globalLayoutContext.Provider;\n\nexport const useGlobalLayoutContext = () => useContext(globalLayoutContext);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect } from 'react';\n\nimport { isMobile, setMobileBody, setPCBody } from '@coze-arch/bot-utils';\nimport {\n  useIsResponsive,\n  useIsResponsiveByRouteConfig,\n  useRouteConfig,\n} from '@coze-arch/bot-hooks';\n\nimport { useSignMobileStore } from '../../store';\nimport { useMobileTips } from '../../hooks';\nimport { useGlobalLayoutContext } from './context';\n\nexport const useLayoutResponsive = () => {\n  const { mobileTips, setMobileTips } = useSignMobileStore();\n  const { node: mobileTipsModal, open: openMobileTipsModal } = useMobileTips();\n  const config = useRouteConfig();\n  const isResponsiveOld = useIsResponsive();\n  const isResponsiveByRouteConfig = useIsResponsiveByRouteConfig();\n  const isResponsive = isResponsiveOld || isResponsiveByRouteConfig;\n\n  useEffect(() => {\n    if (config.showMobileTips) {\n      if (!mobileTips && isMobile()) {\n        openMobileTipsModal(); // Not suitable for mobile end pop-up window prompt\n        setMobileTips(true);\n      }\n\n      if (isResponsive) {\n        setMobileBody();\n      } else {\n        setPCBody();\n      }\n    }\n  }, [config.showMobileTips, isResponsive]);\n  return {\n    isResponsive,\n    mobileTipsModal: config.showMobileTips ? mobileTipsModal : null,\n  };\n};\n\nexport const useOpenGlobalLayoutSideSheet = () => {\n  const { setSideSheetVisible } = useGlobalLayoutContext();\n  return () => {\n    setSideSheetVisible(true);\n  };\n};\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useNavigate, useRouteError } from 'react-router-dom';\nimport { useMemo, useState, type FC } from 'react';\n\nimport { useShallow } from 'zustand/react/shallow';\nimport { escape } from 'lodash-es';\nimport { BaseEnum } from '@coze-arch/web-context';\nimport { getSlardarInstance } from '@coze-arch/logger';\nimport { I18n } from '@coze-arch/i18n';\nimport { Typography, UIButton } from '@coze-arch/bot-semi';\nimport { useRouteConfig } from '@coze-arch/bot-hooks';\nimport { isCustomError, useRouteErrorCatch } from '@coze-arch/bot-error';\nimport { IllustrationNoAccess } from '@douyinfe/semi-illustrations';\nimport { useSpaceStore, useSpaceApp } from '@coze-foundation/space-store';\n\nimport s from './index.module.less';\n\n// The configuration of i18n, align the starling copy and then replace it.\nexport const GlobalError: FC = () => {\n  const navigate = useNavigate();\n  const spaceApp = useSpaceApp();\n  const { menuKey: base } = useRouteConfig();\n  const { id, getPersonalSpaceID } = useSpaceStore(\n    useShallow(spaceStore => ({\n      id: spaceStore.space.id,\n      getPersonalSpaceID: spaceStore.getPersonalSpaceID,\n    })),\n  );\n  const error = useRouteError();\n  useRouteErrorCatch(error);\n\n  const isLazyLoadError = useMemo(() => {\n    if (hasErrorMessage(error)) {\n      return /Minified\\sReact\\serror\\s\\#306/i.test(error.message);\n    }\n  }, [error]);\n\n  const customGlobalErrorConfig = useMemo(() => {\n    if (isCustomError(error)) {\n      return error.ext?.customGlobalErrorConfig;\n    }\n  }, [error]);\n\n  const [sessionId] = useState(() => getSlardarInstance()?.config()?.sessionId);\n\n  return (\n    <div className={s.wrapper}>\n      <div className={s.content}>\n        <IllustrationNoAccess width={140} height={140} />\n        <Typography.Title className={s.title}>\n          {customGlobalErrorConfig?.title ??\n            I18n.t('errorpage_bot_title', {}, `Failed to view the ${spaceApp}`)}\n        </Typography.Title>\n        <Typography.Paragraph className={s.paragraph}>\n          {customGlobalErrorConfig?.subtitle ??\n            I18n.t(\n              'errorpage_subtitle',\n              {},\n              \"Please check your link or try again after joining the bot's team.\",\n            )}\n        </Typography.Paragraph>\n        {!!sessionId && (\n          <div className=\"leading-[12px] mb-[24px] text-[12px] text-gray-400\">\n            {sessionId}\n          </div>\n        )}\n        <UIButton\n          theme=\"solid\"\n          onClick={() => {\n            let url = '';\n            if (BaseEnum.Space === base) {\n              const spaceId =\n                id ??\n                getPersonalSpaceID() ??\n                // There is no personal space under the enterprise, so jump to the first space by default.\n                useSpaceStore.getState().spaceList[0]?.id;\n              url = spaceId ? `/space/${spaceId}/${spaceApp}` : '/space';\n            } else if (base && base in BaseEnum) {\n              url = `/${base}`;\n            } else {\n              url = '/';\n            }\n\n            if (!isLazyLoadError) {\n              navigate(url);\n            } else {\n              window.location.href = escape(url);\n            }\n          }}\n        >\n          {I18n.t('errorpage_bot_btn', {}, 'Go to Bot Platform')}\n        </UIButton>\n      </div>\n    </div>\n  );\n};\n\nfunction hasErrorMessage(e: unknown): e is { message: string } {\n  if (!e || typeof e !== 'object') {\n    return false;\n  }\n  if ('message' in e && typeof e.message === 'string') {\n    return true;\n  }\n  return false;\n}\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport { type BackButtonProps } from '@coze-arch/foundation-sdk';\nimport { IconButton } from '@coze-arch/coze-design';\nimport { IconArrowLeft } from '@coze-arch/bot-icons';\n\nimport s from './index.module.less';\n\nexport const BackButton = ({ onClickBack }: BackButtonProps) => (\n  <div className={s['bot-exit-btn']}>\n    <IconButton\n      color=\"secondary\"\n      icon={<IconArrowLeft />}\n      onClick={onClickBack}\n      data-testid=\"bot-exit-button\"\n    />\n  </div>\n);\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./side-sheet.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./side-sheet.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC, Suspense, useState, useCallback } from 'react';\n\nimport { useRouteConfig } from '@coze-arch/bot-hooks';\n\nimport styles from '../side-sheet.module.less';\n\nconst STORAGE_KEY = 'submenu-width';\nconst MIN_WIDTH = 200;\nconst MAX_WIDTH = 380;\n\nexport const SubMenu: FC = () => {\n  const config = useRouteConfig();\n  const { subMenu: SubMenuComponent } = config;\n  const [width, setWidth] = useState(() => {\n    const savedWidth = localStorage.getItem(STORAGE_KEY);\n    return savedWidth\n      ? Math.min(MAX_WIDTH, Math.max(MIN_WIDTH, Number(savedWidth)))\n      : MIN_WIDTH;\n  });\n\n  const handleMouseDown = useCallback(\n    (event: React.MouseEvent) => {\n      event.preventDefault();\n      const startX = event.pageX;\n      const startWidth = width;\n\n      const handleMouseMove = (e: MouseEvent) => {\n        const newWidth = Math.min(\n          MAX_WIDTH,\n          Math.max(MIN_WIDTH, startWidth + e.pageX - startX),\n        );\n        setWidth(newWidth);\n        localStorage.setItem(STORAGE_KEY, String(newWidth));\n      };\n\n      const handleMouseUp = () => {\n        document.removeEventListener('mousemove', handleMouseMove);\n        document.removeEventListener('mouseup', handleMouseUp);\n      };\n\n      document.addEventListener('mousemove', handleMouseMove);\n      document.addEventListener('mouseup', handleMouseUp);\n    },\n    [width],\n  );\n\n  if (!SubMenuComponent) {\n    return null;\n  }\n\n  return (\n    <div className=\"relative flex flex-row\">\n      <div\n        className=\"overflow-auto flex flex-col box-border px-[6px] py-[12px]\"\n        style={{ width: `${width}px` }}\n      >\n        <Suspense>\n          <SubMenuComponent />\n        </Suspense>\n      </div>\n      <div className={styles['sub-menu-resize']} onMouseDown={handleMouseDown}>\n        <div className={styles['sub-menu-resize-line']}></div>\n      </div>\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { EVENT_NAMES, sendTeaEvent } from '@coze-arch/bot-tea';\n\nexport const reportNavClick = (title: string) => {\n  sendTeaEvent(EVENT_NAMES.tab_click, { content: title });\n  sendTeaEvent(EVENT_NAMES.coze_space_sidenavi_ck, {\n    item: title,\n    navi_type: 'prime',\n    need_login: true,\n    have_access: true,\n  });\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { NavLink, useLocation } from 'react-router-dom';\nimport { type FC } from 'react';\n\nimport classNames from 'classnames';\n\nimport { reportNavClick } from '../utils';\nimport { type LayoutMenuItem } from '../types';\n\nconst menuStyle = classNames(\n  'w-[60px] h-[48px]',\n  'flex flex-col items-center justify-center',\n  'rounded-[6px]',\n  'transition-all',\n  'hover:coz-mg-primary-hovered',\n);\n\nexport const GLobalLayoutMenuItem: FC<LayoutMenuItem> = ({\n  title,\n  icon,\n  activeIcon,\n  path,\n  dataTestId,\n}) => {\n  const location = useLocation();\n\n  let isActive = false;\n  let newPath = '';\n  // If path is an array, take the first matching path\n  if (Array.isArray(path)) {\n    isActive = path.some(p => location.pathname.startsWith(p));\n    newPath = path.find(p => location.pathname.startsWith(p)) || path[0];\n  } else {\n    isActive = location.pathname.startsWith(path);\n    newPath = path;\n  }\n\n  // cp-disable-next-line\n  const isLink = newPath.startsWith('https://');\n\n  const navId = `primary-menu-${\n    newPath.startsWith('/') ? newPath.slice(1) : newPath\n  }`;\n  return (\n    <NavLink\n      to={newPath}\n      target={isLink ? '_blank' : undefined}\n      className=\"no-underline\"\n      onClick={() => {\n        reportNavClick(title);\n      }}\n      data-testid={dataTestId}\n    >\n      <div\n        className={classNames(\n          menuStyle,\n          isActive\n            ? 'coz-mg-primary coz-fg-plus'\n            : 'coz-bg-max coz-fg-secondary',\n        )}\n        id={navId}\n      >\n        <div className=\"text-[20px] leading-none\">\n          {isActive ? activeIcon : icon}\n        </div>\n        <div className=\"mt-[2px] h-[14px] font-[500] flex items-center justify-center overflow-hidden leading-none overflow-hidden w-full\">\n          <span className=\"text-[20px] scale-50 whitespace-nowrap\">\n            {title}\n          </span>\n        </div>\n      </div>\n    </NavLink>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState, type FC } from 'react';\n\nimport classNames from 'classnames';\nimport { IconButton, Tooltip } from '@coze-arch/coze-design';\n\nimport { reportNavClick } from '../utils';\nimport { type LayoutButtonItem } from '../types';\n\nexport const GlobalLayoutActionBtn: FC<LayoutButtonItem> = ({\n  icon,\n  iconClass,\n  onClick,\n  tooltip,\n  dataTestId,\n  className,\n  portal,\n  renderButton,\n}) => {\n  const [visible, setVisible] = useState(false);\n\n  const onButtonClick = () => {\n    setVisible(false);\n    reportNavClick(tooltip);\n    onClick?.();\n  };\n\n  const btn = renderButton ? (\n    renderButton({\n      onClick: onButtonClick,\n      icon,\n      dataTestId,\n    })\n  ) : (\n    <IconButton\n      color=\"secondary\"\n      size=\"large\"\n      className={classNames(className, { '!h-full': !!iconClass })}\n      icon={\n        <div\n          className={classNames(\n            'text-[20px] coz-fg-primary h-[20px]',\n            iconClass,\n          )}\n        >\n          {icon}\n        </div>\n      }\n      onClick={onButtonClick}\n      data-testid={dataTestId}\n    />\n  );\n  // If tooltip is empty, tooltip is not displayed\n  return (\n    <>\n      {tooltip ? (\n        <Tooltip\n          content={tooltip}\n          position=\"right\"\n          clickToHide\n          visible={visible}\n          onVisibleChange={setVisible}\n        >\n          {btn}\n        </Tooltip>\n      ) : (\n        btn\n      )}\n      {portal}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport classNames from 'classnames';\nimport { Divider, Space } from '@coze-arch/coze-design';\nimport { IconMenuLogo } from '@coze-arch/bot-icons';\nimport { useRouteConfig } from '@coze-arch/bot-hooks';\n\nimport { type LayoutProps } from '../types';\nimport { SubMenu } from './sub-menu';\nimport { GLobalLayoutMenuItem } from './menu-item';\nimport { GlobalLayoutActionBtn } from './action-btn';\n\nconst siderStyle = classNames(\n  'relative',\n  'h-full',\n  'border-[1px] border-solid coz-stroke-primary rounded-[14px]',\n  'coz-bg-max',\n  'flex flex-row items-stretch',\n);\n\nconst mainMenuStyle = classNames(\n  'px-[6px] py-[16px]',\n  'flex flex-col h-full items-center',\n);\n\nexport const GlobalLayoutSider: FC<Omit<LayoutProps, 'hasSider'>> = ({\n  actions,\n  menus,\n  extras,\n  onClickLogo,\n  footer = null,\n}) => {\n  const config = useRouteConfig();\n  const { subMenu: SubMenuComponent } = config;\n  const hasSubNav = Boolean(SubMenuComponent);\n\n  return (\n    <div className=\"pl-8px py-8px h-full\">\n      <div className={siderStyle}>\n        {/* main navigation */}\n        <div\n          className={classNames(\n            mainMenuStyle,\n            hasSubNav &&\n              'border-0 border-r-[1px] border-solid coz-stroke-primary',\n          )}\n        >\n          <IconMenuLogo\n            onClick={onClickLogo}\n            className=\"cursor-pointer w-[40px] h-[40px]\"\n          />\n          <div className=\"mt-[16px]\">\n            {actions?.map((action, index) => (\n              <GlobalLayoutActionBtn {...action} key={index} />\n            ))}\n          </div>\n          <Divider className=\"my-12px w-[24px]\" />\n          <Space spacing={4} vertical className=\"flex-1 overflow-auto\">\n            {menus?.map((menu, index) => (\n              <GLobalLayoutMenuItem {...menu} key={index} />\n            ))}\n          </Space>\n          <Space spacing={4} vertical className=\"mt-[12px]\">\n            {extras?.map((extra, index) => (\n              <GlobalLayoutActionBtn {...extra} key={index} />\n            ))}\n            {footer}\n          </Space>\n        </div>\n        {/* secondary navigation */}\n        <SubMenu />\n      </div>\n    </div>\n  );\n};\n\nGlobalLayoutSider.displayName = 'GlobalLayoutSider';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useLocation } from 'react-router-dom';\nimport { type FC, type PropsWithChildren, useState, useEffect } from 'react';\n\nimport cls from 'classnames';\nimport { Layout, SideSheet } from '@coze-arch/coze-design';\n\nimport { type LayoutProps } from './types';\nimport { useLayoutResponsive } from './hooks';\nimport { GlobalLayoutProvider } from './context';\nimport { GlobalLayoutSider } from './component/sider';\n\nimport sideSheetStyle from './side-sheet.module.less';\n\nexport const GlobalLayout: FC<PropsWithChildren<LayoutProps>> = ({\n  hasSider,\n  children,\n  banner,\n  ...props\n}) => {\n  const [sideSheetVisible, setSideSheetVisible] = useState(false);\n  const { isResponsive, mobileTipsModal } = useLayoutResponsive();\n  const location = useLocation();\n  useEffect(() => {\n    setSideSheetVisible(false);\n  }, [location.pathname, location.search, isResponsive]);\n  const siderContent = isResponsive ? (\n    <SideSheet\n      placement=\"left\"\n      visible={sideSheetVisible}\n      className={sideSheetStyle['side-sheet']}\n      closeOnEsc\n      onCancel={() => {\n        setSideSheetVisible(false);\n      }}\n    >\n      <GlobalLayoutSider {...props} key=\"GlobalLayoutSider\" />\n    </SideSheet>\n  ) : (\n    <GlobalLayoutSider {...props} key=\"GlobalLayoutSider\" />\n  );\n\n  return (\n    <GlobalLayoutProvider\n      value={{\n        sideSheetVisible,\n        setSideSheetVisible,\n      }}\n    >\n      {banner}\n      <Layout\n        className={cls(\n          'flex !flex-row items-stretch w-full coz-bg-plus',\n          banner ? 'h-[calc(100%_-_30px)]' : 'h-full',\n        )}\n      >\n        {hasSider ? siderContent : null}\n        <Layout className=\"flex-1 relative flex flex-col overflow-x-hidden coz-bg-plus\">\n          {children}\n        </Layout>\n        {mobileTipsModal}\n      </Layout>\n    </GlobalLayoutProvider>\n  );\n};\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type FC,\n  isValidElement,\n  type ReactNode,\n  type PropsWithChildren,\n} from 'react';\n\nimport classNames from 'classnames';\nimport { Avatar, Badge, Dropdown } from '@coze-arch/coze-design';\nimport { useUserInfo } from '@coze-foundation/account-adapter';\n\nimport { reportNavClick } from '../global-layout/utils';\nimport { type LayoutAccountMenuItem } from '../global-layout/types';\n\nimport style from './index.module.less';\n\nfunction isReactNode(value: unknown): value is ReactNode {\n  if (\n    value === null ||\n    typeof value === 'string' ||\n    typeof value === 'number' ||\n    typeof value === 'boolean' ||\n    isValidElement(value) ||\n    Array.isArray(value)\n  ) {\n    return true;\n  }\n  return false;\n}\n\nexport const GlobalLayoutAccountDropdown: FC<\n  PropsWithChildren<{\n    menus?: LayoutAccountMenuItem[];\n    userBadge?: ReactNode;\n    userTips?: ReactNode;\n    disableVisibleChange?: boolean;\n    visible?: boolean;\n    onVisibleChange?: (visible: boolean) => void;\n  }>\n> = ({\n  menus,\n  userBadge = null,\n  userTips = null,\n  children,\n  disableVisibleChange,\n  visible,\n  onVisibleChange,\n}) => {\n  const userInfo = useUserInfo();\n\n  if (!userInfo) {\n    return null;\n  }\n  return (\n    <>\n      <Dropdown\n        trigger=\"custom\"\n        position={'rightBottom'}\n        visible={visible}\n        onVisibleChange={onVisibleChange}\n        onClickOutSide={() => {\n          if (!disableVisibleChange) {\n            onVisibleChange?.(false);\n          }\n        }}\n        render={\n          <Dropdown.Menu\n            className={classNames(style.menu, 'w-[250px]')}\n            mode=\"menu\"\n          >\n            {menus?.map(item =>\n              isReactNode(item) ? (\n                item\n              ) : (\n                <Dropdown.Item\n                  key={item.title}\n                  onClick={e => {\n                    reportNavClick(item.title);\n                    onVisibleChange?.(false);\n                    item.onClick();\n                  }}\n                  data-testid={item.dataTestId}\n                >\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center\">\n                      <div className=\"mr-[8px] flex items-center\">\n                        {item.prefixIcon}\n                      </div>\n                      <div>{item.title}</div>\n                    </div>\n                    <div className=\"flex items-center\">{item.extra}</div>\n                  </div>\n                </Dropdown.Item>\n              ),\n            )}\n          </Dropdown.Menu>\n        }\n      >\n        <div\n          className={classNames(\n            'relative',\n            'p-[4px] rounded-[8px] transition-colors hover:coz-mg-secondary-hovered',\n            'leading-none',\n            visible && 'coz-mg-secondary-hovered',\n          )}\n          onClick={() => {\n            if (!disableVisibleChange) {\n              onVisibleChange?.(!visible);\n            }\n          }}\n          data-testid=\"layout_avatar-menu-button\"\n        >\n          <Badge\n            position=\"rightBottom\"\n            countStyle={{\n              right: 6,\n              bottom: 6,\n            }}\n            count={userBadge}\n          >\n            <Avatar\n              src={userInfo.avatar_url}\n              className={classNames('w-[32px] h-[32px] rounded-full')}\n            />\n          </Badge>\n          {userTips}\n        </div>\n      </Dropdown>\n      {children}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type LocalStorageCacheConfig } from './types';\n\n// Maintain key definitions uniformly to avoid conflicts\nexport const LOCAL_STORAGE_CACHE_KEYS = [\n  'coachmark',\n  'workspace-spaceId',\n  'workspace-subMenu',\n  'workspace-develop-filters',\n  'workspace-library-filters',\n  'workspace-ocean-project-filters',\n  'coze-home-session-area-hidden-key',\n  'template-purchase-agreement-checked',\n  'coze-promptkit-recommend-pannel-hidden-key',\n  'workflow-toolbar-role-onboarding-hidden',\n  'coze-project-entity-hidden-key',\n  'enterpriseId',\n  'resourceCopyTaskIds',\n  'coze-create-enterprise-success',\n  'coze-show-product-matrix-tips',\n] as const satisfies readonly string[];\n\nexport type LocalStorageCacheKey = (typeof LOCAL_STORAGE_CACHE_KEYS)[number];\n\nexport type LocalStorageCacheConfigMap = {\n  [key in LocalStorageCacheKey]?: LocalStorageCacheConfig;\n};\n\nexport const cacheConfig: LocalStorageCacheConfigMap = {\n  coachmark: {\n    bindAccount: true,\n  },\n  'workspace-spaceId': {\n    bindAccount: true,\n  },\n  'workspace-subMenu': {\n    bindAccount: true,\n  },\n  'template-purchase-agreement-checked': {\n    bindAccount: true,\n  },\n  enterpriseId: {\n    bindAccount: true,\n  },\n  resourceCopyTaskIds: {\n    bindAccount: true,\n  },\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type CacheDataItems, type LocalStorageCacheData } from '../types';\nimport { LOCAL_STORAGE_CACHE_KEYS } from '../config';\n\nconst isValidDataItem = (data: unknown): data is CacheDataItems => {\n  if (!data || typeof data !== 'object') {\n    return false;\n  }\n  return Object.values(data).every(value => typeof value === 'string');\n};\n\nconst isObject = (value: unknown): value is object =>\n  !!value && typeof value === 'object' && value !== null;\n\n// Determines if a value in the local cache matches the LocalStorageCacheData type definition\nconst isValidCacheData = (value: unknown): value is LocalStorageCacheData => {\n  if (!isObject(value)) {\n    return false;\n  }\n  if ('permanent' in value && !isValidDataItem(value.permanent)) {\n    return false;\n  }\n  if ('userRelated' in value) {\n    const { userRelated } = value;\n    if (!isObject(userRelated)) {\n      return false;\n    }\n    if (\n      Object.values(userRelated).some(dateItem => !isValidDataItem(dateItem))\n    ) {\n      return false;\n    }\n  }\n  return true;\n};\n\nexport const paseLocalStorageValue = (value: string | null) => {\n  if (!value) {\n    return {};\n  }\n  try {\n    const raw = JSON.parse(value);\n    return isValidCacheData(raw) ? raw : ({} satisfies LocalStorageCacheData);\n  } catch (e) {\n    return {} satisfies LocalStorageCacheData;\n  }\n};\n\nconst filterDataItems = (data: CacheDataItems): CacheDataItems =>\n  Object.entries(data).reduce((res, [key, item]) => {\n    if ((LOCAL_STORAGE_CACHE_KEYS as unknown as string[]).includes(key)) {\n      return {\n        ...res,\n        [key]: item,\n      };\n    }\n    return res;\n  }, {});\n\nexport const filterCacheData = (\n  cacheData: LocalStorageCacheData,\n): LocalStorageCacheData => {\n  if (cacheData.permanent) {\n    cacheData.permanent = filterDataItems(cacheData.permanent);\n  }\n  if (cacheData.userRelated) {\n    cacheData.userRelated = Object.entries(cacheData.userRelated).reduce(\n      (res, [key, value]) => ({\n        ...res,\n        [key]: filterDataItems(value),\n      }),\n      {},\n    );\n  }\n  return cacheData;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { throttle } from 'lodash-es';\nimport EventEmitter from 'eventemitter3';\n\nimport { filterCacheData, paseLocalStorageValue } from '../utils/parse';\nimport { type LocalStorageCacheData } from '../types';\nimport { cacheConfig, type LocalStorageCacheKey } from '../config';\n\nconst LOCAL_STORAGE_KEY = '__coz_biz_cache__';\n\nconst throttleWait = 300;\n\nclass LocalStorageService extends EventEmitter {\n  #state: LocalStorageCacheData = {};\n  #userId: string | undefined;\n  #saveState: () => void;\n\n  constructor() {\n    super();\n    this.#saveState = throttle(() => {\n      localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(this.#state));\n    }, throttleWait);\n    document.addEventListener('visibilitychange', () => {\n      /**\n       * After the tab enters the background, by operating other tabs, the #state status may not be the latest\n       * So after the tab is reactivated, the data of localStorage needs to be synchronized once.\n       */\n      if (document.visibilityState === 'visible') {\n        this.#initState();\n      }\n    });\n    this.#initState();\n  }\n\n  #initState() {\n    this.#state = filterCacheData(\n      paseLocalStorageValue(localStorage.getItem(LOCAL_STORAGE_KEY)),\n    );\n    this.emit('change');\n  }\n\n  #setPermanent(key: LocalStorageCacheKey, value?: string) {\n    if (value) {\n      this.#state.permanent = {\n        ...this.#state.permanent,\n        [key]: value,\n      };\n    } else if (this.#state.permanent) {\n      delete this.#state.permanent[key];\n    }\n    this.#saveState();\n  }\n\n  #setUserRelated(key: LocalStorageCacheKey, value?: string) {\n    if (!this.#userId) {\n      return;\n    }\n    if (value) {\n      this.#state.userRelated = {\n        ...this.#state.userRelated,\n        [this.#userId]: {\n          ...this.#state.userRelated?.[this.#userId],\n          [key]: value,\n        },\n      };\n    } else if (this.#state.userRelated?.[this.#userId]?.[key]) {\n      delete this.#state.userRelated?.[this.#userId]?.[key];\n    }\n    this.#saveState();\n  }\n\n  #getPermanent(key: LocalStorageCacheKey) {\n    return this.#state.permanent?.[key];\n  }\n\n  #getUserRelated(key: LocalStorageCacheKey) {\n    if (!this.#userId) {\n      if (IS_DEV_MODE) {\n        throw Error(\n          ' userId   getValueSync',\n        );\n      }\n      return undefined;\n    }\n    return this.#state.userRelated?.[this.#userId]?.[key];\n  }\n\n  #waitUserId() {\n    return new Promise<string | undefined>(r => {\n      const callback = (userId: string) => {\n        if (userId) {\n          r(this.#userId);\n          this.off('setUserId', callback);\n        }\n      };\n      this.on('setUserId', callback);\n    });\n  }\n\n  setUserId(userId?: string) {\n    this.#userId = userId;\n    this.emit('change');\n    this.emit('setUserId', userId);\n  }\n\n  setValue(key: LocalStorageCacheKey, value?: string) {\n    const { bindAccount } = cacheConfig[key] ?? {};\n    if (bindAccount) {\n      if (!this.#userId) {\n        return;\n      }\n      this.#setUserRelated(key, value);\n    } else {\n      this.#setPermanent(key, value);\n    }\n    this.emit('change');\n  }\n\n  getValue(key: LocalStorageCacheKey): string | undefined {\n    const { bindAccount } = cacheConfig[key] ?? {};\n    if (bindAccount) {\n      return this.#getUserRelated(key);\n    }\n    return this.#getPermanent(key);\n  }\n\n  async getValueSync(key: LocalStorageCacheKey): Promise<string | undefined> {\n    const { bindAccount } = cacheConfig[key] ?? {};\n    if (bindAccount) {\n      if (!this.#userId) {\n        await this.#waitUserId();\n      }\n      return this.#getUserRelated(key);\n    }\n    return this.#getPermanent(key);\n  }\n}\n\nexport const localStorageService = new LocalStorageService();\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport enum ReportEventNames {\n  EmptySpaceList = 'empty_space_List', // Space list is empty\n  PollingSpaceList = 'polling_space_list', // Rotation space list\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { reporter } from '@coze-arch/logger';\nimport { CustomError } from '@coze-arch/bot-error';\n\nimport { ReportEventNames } from './const';\n\nconst MAX_RETRY = 4;\nconst INTERVAL = 800;\n\ninterface PollingResponse<T = unknown> {\n  data: T;\n  isSuccess: boolean;\n  tryCount: number;\n}\n\nexport const polling = <T>({\n  request,\n  isValid,\n  maxRetry = MAX_RETRY,\n  interval = INTERVAL,\n}: {\n  request: () => Promise<T>;\n  isValid: (data: T) => boolean;\n  maxRetry?: number;\n  interval?: number;\n}): Promise<PollingResponse<T>> => {\n  let tryCount = 0;\n  return new Promise(resolve => {\n    const go = async () => {\n      const data = await request();\n      if (!isValid(data)) {\n        if (++tryCount < maxRetry) {\n          setTimeout(go, interval);\n        } else {\n          resolve({\n            data,\n            isSuccess: false,\n            tryCount,\n          });\n        }\n      } else {\n        resolve({\n          data,\n          isSuccess: true,\n          tryCount,\n        });\n      }\n    };\n    go();\n  });\n};\n\nexport const reportSpaceListPollingRes = ({\n  isSuccess,\n  tryCount,\n}: PollingResponse) => {\n  reporter.errorEvent(\n    isSuccess\n      ? {\n          eventName: ReportEventNames.PollingSpaceList,\n          error: new CustomError(\n            ReportEventNames.PollingSpaceList,\n            tryCount.toString(),\n          ),\n        }\n      : {\n          eventName: ReportEventNames.EmptySpaceList,\n          error: new CustomError(\n            ReportEventNames.EmptySpaceList,\n            'space list is empty',\n          ),\n        },\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable @coze-arch/max-line-per-function */\n/* eslint-disable max-lines-per-function */\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { REPORT_EVENTS } from '@coze-arch/report-events';\nimport { CustomError } from '@coze-arch/bot-error';\nimport {\n  type SaveSpaceRet,\n  type SaveSpaceV2Request,\n  type TransferSpaceV2Request,\n  type ExitSpaceV2Request,\n  type SpaceInfo,\n} from '@coze-arch/bot-api/playground_api';\nimport { type BotSpace, SpaceType } from '@coze-arch/bot-api/developer_api';\nimport { PlaygroundApi } from '@coze-arch/bot-api';\n\nimport { polling, reportSpaceListPollingRes } from './utils';\n\ninterface SpaceStoreState {\n  /** @deprecated try useSpace instead */\n  space: BotSpace;\n  spaceList: BotSpace[];\n  recentlyUsedSpaceList: BotSpace[];\n  loading: false | Promise<SpaceInfo | undefined>;\n  inited?: boolean;\n  createdTeamSpaceNum: number; // Count of team spaces created by individuals\n  maxTeamSpaceNum: number;\n  /** @deprecated spaceList & maxTeamSpaceNum */\n  spaces: {\n    bot_space_list: BotSpace[];\n    has_personal_space: boolean;\n    team_space_num: number;\n    max_team_space_num: number;\n  };\n}\n\ninterface SpaceStoreAction {\n  reset: () => void;\n  /** @deprecated  get id from url */\n  getSpaceId: () => string;\n  getPersonalSpaceID: () => string | undefined;\n  checkSpaceID: (spaceID: string) => boolean;\n  /** @deprecated by id index */\n  setSpace: (spaceId?: string, isBotDetailIframe?: boolean) => void | never;\n  createSpace: (\n    request: SaveSpaceV2Request,\n  ) => Promise<SaveSpaceRet | undefined>;\n  exitSpace: (request: ExitSpaceV2Request) => Promise<string | undefined>;\n  deleteSpace: (id: string) => Promise<string | undefined>;\n  updateSpace: (request: SaveSpaceV2Request) => Promise<{\n    id?: string;\n    check_not_pass?: boolean;\n  }>;\n  transferSpace: (\n    request: TransferSpaceV2Request,\n  ) => Promise<string | undefined>;\n  fetchSpaces: (force?: boolean) => Promise<SpaceInfo | undefined>;\n}\n\nconst DEFAULT_MAXIMUM_SPACE = 3;\n\nexport const defaultState: SpaceStoreState = {\n  space: {},\n  spaceList: [],\n  recentlyUsedSpaceList: [],\n  loading: false,\n  maxTeamSpaceNum: DEFAULT_MAXIMUM_SPACE,\n  createdTeamSpaceNum: 0,\n  inited: false,\n  spaces: {\n    bot_space_list: [],\n    has_personal_space: true,\n    team_space_num: 0,\n    max_team_space_num: DEFAULT_MAXIMUM_SPACE,\n  },\n};\n\nexport const useSpaceStore = create<SpaceStoreState & SpaceStoreAction>()(\n  devtools(\n    (set, get) => ({\n      ...defaultState,\n      reset: () => {\n        set(defaultState, false, 'reset');\n      },\n      getSpaceId: () => {\n        const { id } = get().space;\n        if (!id) {\n          throw new CustomError(\n            REPORT_EVENTS.parmasValidation,\n            'lack space_id',\n          );\n        }\n        return id;\n      },\n      getPersonalSpaceID: () =>\n        get().spaces.bot_space_list?.find(\n          space => space.space_type === SpaceType.Personal,\n        )?.id,\n\n      checkSpaceID: spaceID =>\n        !!get().spaces.bot_space_list?.find(space => space.id === spaceID),\n\n      setSpace: id => {\n        const { space, spaces } = get();\n\n        if (id) {\n          const targetSapce = spaces.bot_space_list.find(s => s.id === id);\n          if (targetSapce) {\n            set({ space: targetSapce }, false, 'setSpace');\n          } else {\n            throw Error(`can not find space: ${id}`);\n          }\n        } else {\n          set(\n            {\n              space: {\n                ...space,\n                id: '',\n              },\n            },\n            false,\n            'setSpace',\n          );\n        }\n      },\n\n      createSpace: async payload => {\n        const res = await PlaygroundApi.SaveSpaceV2(payload);\n\n        if (res.code === 0) {\n          return res.data;\n        } else {\n          throw Error(`create error: ${res.msg}`);\n        }\n      },\n\n      exitSpace: _ => Promise.resolve(undefined),\n\n      deleteSpace: _ => Promise.resolve(undefined),\n\n      updateSpace: _ => Promise.resolve({}),\n\n      transferSpace: () => Promise.resolve(undefined),\n\n      // eslint-disable-next-line complexity\n      fetchSpaces: async (force?: boolean) => {\n        const request = async () => {\n          const { data } = await PlaygroundApi.GetSpaceListV2({});\n          return data;\n        };\n        const prePromise = get().loading;\n        const currentPromise = force ? request() : prePromise || request();\n        if (currentPromise !== prePromise) {\n          set(\n            {\n              loading: currentPromise,\n            },\n            false,\n            'fetchSpaces',\n          );\n        } else {\n          return prePromise;\n        }\n\n        let res = await currentPromise;\n\n        if (!res?.has_personal_space) {\n          await get().createSpace({\n            name: 'Personal',\n            description: 'Personal Space',\n            icon_uri: '',\n            space_type: SpaceType.Personal,\n          });\n          const pollingRes = await polling({\n            request,\n            isValid: data => (data?.bot_space_list?.length ?? 0) > 0,\n          });\n          reportSpaceListPollingRes(pollingRes);\n          res = pollingRes.data;\n        }\n\n        const spaceInfo: SpaceStoreState['spaces'] = {\n          bot_space_list: res?.bot_space_list ?? [],\n          has_personal_space: res?.has_personal_space ?? true,\n          team_space_num: res?.team_space_num ?? 0,\n          max_team_space_num: res?.max_team_space_num ?? DEFAULT_MAXIMUM_SPACE,\n        };\n\n        set(\n          {\n            spaceList: spaceInfo.bot_space_list,\n            recentlyUsedSpaceList: res?.recently_used_space_list ?? [],\n            createdTeamSpaceNum: spaceInfo.team_space_num,\n            maxTeamSpaceNum: spaceInfo.max_team_space_num,\n            loading: false,\n            inited: true,\n            spaces: spaceInfo,\n          },\n          false,\n          'fetchSpaces',\n        );\n\n        return res;\n      },\n    }),\n\n    {\n      enabled: IS_DEV_MODE,\n      name: 'botStudio.spaceStore',\n    },\n  ),\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, useState } from 'react';\n\nimport { useSpaceStore } from '@coze-foundation/space-store-adapter';\nimport { useCurrentEnterpriseInfo } from '@coze-foundation/enterprise-store-adapter';\nimport { type BotSpace } from '@coze-arch/bot-api/developer_api';\n\nexport const useRefreshSpaces = (refresh?: boolean) => {\n  const [loading, setLoading] = useState(true);\n  const enterpriseInfo = useCurrentEnterpriseInfo();\n  // Businesses change, regain the list of spaces\n  useEffect(() => {\n    if (refresh || !useSpaceStore.getState().inited) {\n      setLoading(true);\n      useSpaceStore\n        .getState()\n        .fetchSpaces(true)\n        .finally(() => {\n          setLoading(false);\n        });\n    } else {\n      setLoading(false);\n    }\n  }, [enterpriseInfo?.organization_id, refresh]);\n  return loading;\n};\n\nexport const useSpaceList: (refresh?: boolean) => {\n  spaces?: BotSpace[];\n  loading: boolean;\n} = refresh => {\n  const spaces = useSpaceStore(s => s.spaceList);\n  const loading = useRefreshSpaces(refresh);\n\n  return {\n    spaces,\n    loading,\n  } as const;\n};\n\nexport const useSpace: (\n  spaceId: string,\n  refresh?: boolean,\n) => {\n  space?: BotSpace;\n  loading: boolean;\n} = (spaceId, refresh) => {\n  const space = useSpaceStore(s =>\n    s.spaceList.find(spaceItem => spaceItem.id === spaceId),\n  );\n  const loading = useRefreshSpaces(refresh);\n\n  return {\n    space,\n    loading,\n  } as const;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useLocation } from 'react-router-dom';\n\n/**\n * Get the workspace submodule from the URL\n * @param pathname\n * @Returns the working submodule string, or undefined if it doesn't match\n */\nconst getSpaceApp = (pathname: string): string | undefined => {\n  // Start with /space/, followed by spaceId, followed by submodules (only letters, numbers, -, _ allowed)\n  const match = pathname.match(/^\\/space\\/[^/]+\\/([A-Za-z0-9_-]+)/);\n  return match ? match[1] : undefined;\n};\n\nexport const useSpaceApp = () => {\n  const { pathname } = useLocation();\n\n  const spaceApp = getSpaceApp(pathname);\n\n  return spaceApp;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport enum SpaceSubModuleEnum {\n  DEVELOP = 'develop',\n  LIBRARY = 'library',\n}\n","\n      import API from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./use-create-space.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./use-create-space.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState, useMemo, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport { SpaceType } from '@coze-foundation/space-ui-base';\nimport { useSpaceStore } from '@coze-foundation/space-store';\nimport { I18n } from '@coze-arch/i18n';\nimport {\n  Modal,\n  Input,\n  Toast,\n  Upload,\n} from '@coze-arch/coze-design';\nimport { IconCozEdit, IconCozUpload } from '@coze-arch/coze-design/icons';\nimport { type FileItem, type UploadProps } from '@coze-arch/bot-semi/Upload';\nimport { FileBizType } from '@coze-arch/bot-api/developer_api';\nimport { customUploadRequest } from '@coze-common/biz-components/picture-upload';\n\nimport s from './use-create-space.module.less';\n\nexport type UploadValue = { uid: string | undefined; url: string }[];\n\nexport interface UseCreateSpaceOptions {\n  /**\n   * \n   * @default true\n   */\n  autoNavigate?: boolean;\n  /**\n   * \n   */\n  onSuccess?: (spaceId: string) => void;\n}\n\nexport interface UseCreateSpaceReturnType {\n  open: () => void;\n  close: () => void;\n  node: JSX.Element;\n}\n\nexport const useCreateSpace = (\n  options: UseCreateSpaceOptions = {},\n): UseCreateSpaceReturnType => {\n  const { autoNavigate = true, onSuccess } = options;\n  const navigate = useNavigate();\n\n  const [visible, setVisible] = useState(false);\n  const [spaceName, setSpaceName] = useState('');\n  const [description, setDescription] = useState('');\n  const [iconUrl, setIconUrl] = useState<UploadValue>([]);\n  const [loading, setLoading] = useState(false);\n  const uploadRef = useRef<Upload>(null);\n\n  const createSpace = useSpaceStore(state => state.createSpace);\n  const fetchSpaces = useSpaceStore(state => state.fetchSpaces);\n\n  // \n  const customRequest: UploadProps['customRequest'] = options => {\n    customUploadRequest({\n      ...options,\n      fileBizType: FileBizType.BIZ_BOT_ICON,\n      onSuccess: data => {\n        options.onSuccess(data);\n        setIconUrl([\n          {\n            uid: data?.upload_uri || '',\n            url: data?.upload_url || '',\n          },\n        ]);\n      },\n    });\n  };\n\n  // TODO: \n  // const createdTeamSpaceNum = useSpaceStore(state => state.createdTeamSpaceNum);\n  // const maxTeamSpaceNum = useSpaceStore(state => state.maxTeamSpaceNum);\n  // const canCreateTeamSpace = useMemo(\n  //   () => createdTeamSpaceNum < maxTeamSpaceNum,\n  //   [createdTeamSpaceNum, maxTeamSpaceNum],\n  // );\n\n  const handleCreate = async () => {\n    // \n    if (!spaceName.trim()) {\n      Toast.warning(\n        I18n.t(\n          'team_create_name_placeholder',\n          {},\n          'Please enter workspace name',\n        ),\n      );\n      return;\n    }\n\n    // TODO: \n    // if (!canCreateTeamSpace) {\n    //   Toast.warning(\n    //     I18n.t(\n    //       'workspace_create_limit_reached',\n    //       { max: maxTeamSpaceNum },\n    //       `You have reached the maximum number of team spaces (${maxTeamSpaceNum})`,\n    //     ),\n    //   );\n    //   return;\n    // }\n\n    setLoading(true);\n    try {\n      const result = await createSpace({\n        name: spaceName.trim(),\n        description: description.trim(),\n        icon_uri: iconUrl?.[0]?.url || '',\n        space_type: SpaceType.Team,\n      });\n\n      // \n      if (result?.check_not_pass) {\n        Toast.warning(\n          I18n.t(\n            'workspace_create_check_failed',\n            {},\n            'Workspace name or description contains inappropriate content. Please modify and try again.',\n          ),\n        );\n        setLoading(false);\n        return;\n      }\n\n      // \n      console.log('[CreateSpace] Starting to refresh space list after creation');\n      console.log('[CreateSpace] Created space result:', result);\n      await fetchSpaces(true);\n\n      console.log('[CreateSpace] Space list refreshed, result.id:', result?.id, 'type:', typeof result?.id);\n\n      // 5\n      let spaceFoundInList = false;\n      if (result?.id) {\n        let retryCount = 0;\n        const maxRetries = 10;\n        const checkInterval = 500; // 500ms\n\n        // ID\n        const targetSpaceId = String(result.id);\n        console.log('[CreateSpace] Target space ID (string):', targetSpaceId);\n\n        while (retryCount < maxRetries) {\n          //  store \n          const spaceStore = useSpaceStore.getState();\n          const currentSpaceList = spaceStore.spaceList;\n\n          console.log('[CreateSpace] Retry', retryCount, 'Current space list:',\n            currentSpaceList.map(s => ({ id: s.id, idType: typeof s.id, name: s.name }))\n          );\n\n          // \n          const spaceExists = spaceStore.checkSpaceID(targetSpaceId);\n          const manualCheck = currentSpaceList.some(s => String(s.id) === targetSpaceId);\n\n          console.log('[CreateSpace] Space exists (checkSpaceID):', spaceExists);\n          console.log('[CreateSpace] Space exists (manual check):', manualCheck);\n\n          if (spaceExists || manualCheck) {\n            // \n            spaceFoundInList = true;\n            console.log('[CreateSpace]  New space found in list:', targetSpaceId);\n            break;\n          }\n\n          // \n          console.log('[CreateSpace] Space not found, waiting', checkInterval, 'ms before retry');\n          await new Promise(resolve => setTimeout(resolve, checkInterval));\n\n          console.log('[CreateSpace] Refreshing space list again...');\n          await fetchSpaces(true);\n          retryCount++;\n        }\n\n        if (!spaceFoundInList) {\n          const finalSpaceList = useSpaceStore.getState().spaceList;\n          console.error(\n            '[CreateSpace]  New space NOT found in list after', maxRetries, 'retries.',\n            '\\nTarget Space ID:', targetSpaceId, '(type:', typeof targetSpaceId, ')',\n            '\\nCurrent space list IDs:', finalSpaceList.map(s => `${s.id} (${typeof s.id})`),\n            '\\nCurrent space list:', finalSpaceList.map(s => ({ id: s.id, name: s.name }))\n          );\n        }\n      }\n\n      Toast.success(\n        I18n.t(\n          'workspace_creation_success',\n          {},\n          'Workspace created successfully',\n        ),\n      );\n\n      // \n      setVisible(false);\n      setSpaceName('');\n      setDescription('');\n      setIconUrl([]);\n\n      // \n      if (result?.id && spaceFoundInList) {\n        console.log('[CreateSpace] Proceeding with navigation, space found in list');\n        onSuccess?.(result.id);\n\n        // \n        if (autoNavigate) {\n          // \n          try {\n            const spaceStore = useSpaceStore.getState();\n            const targetSpaceId = String(result.id);\n            console.log('[CreateSpace] Setting current space to:', targetSpaceId);\n            spaceStore.setSpace(targetSpaceId);\n            console.log('[CreateSpace]  Current space set successfully');\n          } catch (e) {\n            console.error('[CreateSpace]  Failed to set current space:', e);\n            // \n          }\n\n          //  setTimeout \n          const targetUrl = `/space/${result.id}/develop`;\n          console.log('[CreateSpace] Navigating to:', targetUrl);\n          setTimeout(() => {\n            navigate(targetUrl);\n          }, 100);\n        }\n      } else if (result?.id && !spaceFoundInList) {\n        console.warn('[CreateSpace] Space not found, showing refresh prompt');\n        // \n        Toast.info(\n          I18n.t(\n            'workspace_created_please_refresh',\n            {},\n            'Workspace created successfully. Please refresh the page to see the new workspace.',\n          ),\n        );\n        onSuccess?.(result.id);\n      }\n    } catch (error) {\n      const errorMessage =\n        (error as Error)?.message ||\n        I18n.t('workspace_creation_failed', {}, 'Failed to create workspace');\n\n      Toast.error(errorMessage);\n      console.error('Create space error:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleCancel = () => {\n    setVisible(false);\n    setSpaceName('');\n    setDescription('');\n    setIconUrl([]);\n  };\n\n  const node = (\n    <Modal\n      visible={visible}\n      title={I18n.t(\n        'enterprise_workspace_management_create_space_title',\n        {},\n        'Create Workspace',\n      )}\n      okText={I18n.t('Confirm', {}, 'Confirm')}\n      cancelText={I18n.t('Cancel', {}, 'Cancel')}\n      centered\n      confirmLoading={loading}\n      onOk={handleCreate}\n      onCancel={handleCancel}\n    >\n      <div className=\"py-[12px]\">\n        {/*  */}\n        <div className=\"mb-[16px]\">\n          <div className=\"mb-[8px] text-[14px] coz-fg-primary\">\n            {I18n.t('workspace_icon', {}, 'Workspace Icon')}\n            <span className=\"ml-[4px] text-[12px] coz-fg-tertiary\">\n              ({I18n.t('Optional', {}, 'Optional')})\n            </span>\n          </div>\n          <Upload\n            action=\"\"\n            className={s.upload}\n            limit={1}\n            customRequest={customRequest}\n            fileList={iconUrl}\n            accept=\".jpeg,.jpg,.png,.gif\"\n            showReplace={false}\n            showUploadList={false}\n            ref={uploadRef}\n            maxSize={2 * 1024}\n            onSizeError={() => {\n              Toast.error({\n                content: I18n.t(\n                  'dataset_upload_image_warning',\n                  {},\n                  'Please upload an image less than 2MB',\n                ),\n                showClose: false,\n              });\n            }}\n          >\n            <div className={s['avatar-wrap']}>\n              {iconUrl[0]?.url ? (\n                <img\n                  src={iconUrl[0].url}\n                  alt=\"workspace icon\"\n                  className={s.avatar}\n                />\n              ) : (\n                <div className={s.placeholder}>\n                  <IconCozUpload className=\"text-[32px] coz-fg-tertiary\" />\n                </div>\n              )}\n              <div className={s.mask}>\n                <div className=\"relative inline-flex\">\n                  <IconCozEdit className=\"text-[24px]\" />\n                </div>\n              </div>\n            </div>\n          </Upload>\n        </div>\n\n        {/*  */}\n        <div className=\"mb-[16px]\">\n          <div className=\"mb-[8px] text-[14px] coz-fg-primary\">\n            {I18n.t('team_create_name', {}, 'Workspace Name')}\n            <span className=\"text-[#f53f3f] ml-[4px]\">*</span>\n          </div>\n          <Input\n            value={spaceName}\n            onChange={value => setSpaceName(value)}\n            placeholder={I18n.t(\n              'team_create_name_placeholder',\n              {},\n              'Please enter workspace name',\n            )}\n            maxLength={50}\n            showClear\n          />\n        </div>\n\n        {/*  */}\n        <div>\n          <div className=\"mb-[8px] text-[14px] coz-fg-primary\">\n            {I18n.t('workspace_description', {}, 'Description')}\n            <span className=\"ml-[4px] text-[12px] coz-fg-tertiary\">\n              ({I18n.t('Optional', {}, 'Optional')})\n            </span>\n          </div>\n          <textarea\n            className=\"w-full p-[8px] border border-[#e0e0e0] rounded-[4px] text-[14px] coz-fg-primary resize-none focus:border-[#3370ff] focus:outline-none\"\n            value={description}\n            onChange={e => setDescription(e.target.value)}\n            placeholder={I18n.t(\n              'workspace_description_placeholder',\n              {},\n              'Enter workspace description',\n            )}\n            maxLength={200}\n            rows={3}\n            style={{\n              fontFamily: 'inherit',\n            }}\n          />\n        </div>\n      </div>\n    </Modal>\n  );\n\n  return {\n    node,\n    open: () => {\n      setVisible(true);\n    },\n    close: handleCancel,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// [ - ]\n// import { WorkspaceSubMenu as BaseWorkspaceSubMenu } from '@coze-foundation/space-ui-base';\n// import { useSpaceStore } from '@coze-foundation/space-store';\n// import { I18n } from '@coze-arch/i18n';\n// import { useRouteConfig } from '@coze-arch/bot-hooks';\n// import {\n//   IconCozBot,\n//   IconCozBotFill,\n//   IconCozKnowledge,\n//   IconCozKnowledgeFill,\n// } from '@coze-arch/coze-design/icons';\n// import { Space, Avatar, Typography } from '@coze-arch/coze-design';\n// import { SpaceSubModuleEnum } from '@/const';\n\n// [ - ]\nimport { useNavigate } from 'react-router-dom';\nimport { useMemo } from 'react';\n\nimport {\n  WorkspaceSubMenu as BaseWorkspaceSubMenu,\n  SpaceSwitcherDropdown,\n  SpaceType,\n} from '@coze-foundation/space-ui-base';\nimport { useSpaceStore } from '@coze-foundation/space-store';\nimport { I18n } from '@coze-arch/i18n';\nimport {\n  IconCozBot,\n  IconCozBotFill,\n  IconCozKnowledge,\n  IconCozKnowledgeFill,\n  IconCozArrowDown,\n} from '@coze-arch/coze-design/icons';\nimport { Space, Avatar, Typography } from '@coze-arch/coze-design';\nimport { useRouteConfig } from '@coze-arch/bot-hooks';\n\nimport { SpaceSubModuleEnum } from '@/const';\n\nimport { useCreateSpace } from '../../hooks/use-create-space';\n\n// [ - ]\n// export const WorkspaceSubMenu = () => {\n//   const { subMenuKey } = useRouteConfig();\n//\n//   const currentSpace = useSpaceStore(state => state.space);\n//\n//   const subMenu = [\n//     {\n//       icon: <IconCozBot />,\n//       activeIcon: <IconCozBotFill />,\n//       title: () => I18n.t('navigation_workspace_develop', {}, 'Develop'),\n//       path: SpaceSubModuleEnum.DEVELOP,\n//       dataTestId: 'navigation_workspace_develop',\n//     },\n//     {\n//       icon: <IconCozKnowledge />,\n//       activeIcon: <IconCozKnowledgeFill />,\n//       title: () => I18n.t('navigation_workspace_library', {}, 'Library'),\n//       path: SpaceSubModuleEnum.LIBRARY,\n//       dataTestId: 'navigation_workspace_library',\n//     },\n//   ];\n//\n//   const headerNode = (\n//     <div className=\"cursor-pointer w-full\">\n//       <Space\n//         className=\"h-[48px] px-[8px] w-full hover:coz-mg-secondary-hovered rounded-[8px]\"\n//         spacing={8}\n//       >\n//         <Avatar\n//           className=\"w-[24px] h-[24px] rounded-[6px] shrink-0\"\n//           src={currentSpace?.icon_url}\n//         />\n//         <Typography.Text\n//           ellipsis={{ showTooltip: true, rows: 1 }}\n//           className=\"flex-1 coz-fg-primary text-[14px] font-[500]\"\n//         >\n//           {currentSpace?.name || ''}\n//         </Typography.Text>\n//       </Space>\n//     </div>\n//   );\n//\n//   return (\n//     <BaseWorkspaceSubMenu\n//       header={headerNode}\n//       menus={subMenu}\n//       currentSubMenu={subMenuKey}\n//     />\n//   );\n// };\n\n// [ - ]\nexport const WorkspaceSubMenu = () => {\n  const { subMenuKey } = useRouteConfig();\n  const navigate = useNavigate();\n\n  // \n  const currentSpace = useSpaceStore(state => state.space);\n  const spaceList = useSpaceStore(state => state.spaceList);\n\n  // \n  const { node: createSpaceModal, open: openCreateSpaceModal } = useCreateSpace({\n    autoNavigate: true,\n    onSuccess: spaceId => {\n      console.log('Workspace created successfully:', spaceId);\n    },\n  });\n\n  const subMenu = [\n    {\n      icon: <IconCozBot />,\n      activeIcon: <IconCozBotFill />,\n      title: () => I18n.t('navigation_workspace_develop', {}, 'Develop'),\n      path: SpaceSubModuleEnum.DEVELOP,\n      dataTestId: 'navigation_workspace_develop',\n    },\n    {\n      icon: <IconCozKnowledge />,\n      activeIcon: <IconCozKnowledgeFill />,\n      title: () => I18n.t('navigation_workspace_library', {}, 'Library'),\n      path: SpaceSubModuleEnum.LIBRARY,\n      dataTestId: 'navigation_workspace_library',\n    },\n  ];\n\n  // \n  const handleSpaceSwitch = (spaceId: string) => {\n    //  develop \n    navigate(`/space/${spaceId}/develop`);\n  };\n\n  // \n  const handleAddSpace = () => {\n    // TODO: \n    openCreateSpaceModal();\n  };\n\n  //  useMemo  I18n \n  const addSpaceText = useMemo(() => {\n    const currentLang = I18n.getLanguage?.() || 'zh-CN';\n    const isZhCN = currentLang.startsWith('zh');\n    return isZhCN\n      ? `${I18n.t('add')}${I18n.t('navigation_workspace')}`\n      : `${I18n.t('add')} ${I18n.t('navigation_workspace')}`;\n  }, []);\n\n  // \n  const headerNode = (\n    <SpaceSwitcherDropdown\n      currentSpace={currentSpace}\n      spaceList={spaceList}\n      onSpaceClick={handleSpaceSwitch}\n      onAddSpaceClick={handleAddSpace}\n      searchPlaceholder={I18n.t(\n        'workspace_search_placeholder',\n        {},\n        'Search your workspace',\n      )}\n      addSpaceText={addSpaceText}\n    >\n      <div className=\"cursor-pointer w-full\">\n        <Space\n          className=\"h-[48px] px-[8px] w-full hover:coz-mg-secondary-hovered rounded-[8px]\"\n          spacing={8}\n        >\n          <Avatar\n            className=\"w-[24px] h-[24px] rounded-[6px] shrink-0\"\n            src={currentSpace?.icon_url}\n          />\n          <Typography.Text\n            ellipsis={{ showTooltip: true, rows: 1 }}\n            className=\"flex-1 coz-fg-primary text-[14px] font-[500]\"\n          >\n            {currentSpace?.space_type === SpaceType.Personal\n              ? I18n.t('menu_title_personal_space', {}, currentSpace?.name)\n              : currentSpace?.name || ''}\n          </Typography.Text>\n          <IconCozArrowDown className=\"text-[12px] coz-fg-tertiary shrink-0\" />\n        </Space>\n      </div>\n    </SpaceSwitcherDropdown>\n  );\n\n  return (\n    <>\n      <BaseWorkspaceSubMenu\n        header={headerNode}\n        menus={subMenu}\n        currentSubMenu={subMenuKey}\n      />\n      {createSpaceModal}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useInitSpace as useBaseInitSpace } from '@coze-foundation/space-ui-base';\nimport { useSpaceStore } from '@coze-foundation/space-store';\n\nexport const useInitSpace = (spaceId?: string) =>\n  useBaseInitSpace({\n    spaceId,\n    fetchSpacesWithSpaceId: _ => useSpaceStore.getState().fetchSpaces(true),\n    isReady: true,\n  });\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Outlet, useParams } from 'react-router-dom';\n\nimport { I18n } from '@coze-arch/i18n';\nimport { IconCozIllusAdd } from '@coze-arch/coze-design/illustrations';\nimport { Empty } from '@coze-arch/coze-design';\n\nimport { useInitSpace } from '../../hooks/use-init-space';\n\nexport const SpaceLayout = () => {\n  const { space_id } = useParams();\n  const { loading, spaceListLoading, spaceList } = useInitSpace(space_id);\n\n  if (!loading && !spaceListLoading && spaceList.length === 0) {\n    return (\n      <Empty\n        className=\"h-full justify-center w-full\"\n        image={<IconCozIllusAdd width=\"160\" height=\"160\" />}\n        title={I18n.t('enterprise_workspace_no_space_title')}\n        description={I18n.t('enterprise_workspace_default_tips1_nonspace')}\n      />\n    );\n  }\n\n  if (loading) {\n    return null;\n  }\n\n  return <Outlet />;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useNavigate } from 'react-router-dom';\nimport { type ReactNode, type FC } from 'react';\n\nimport { useShallow } from 'zustand/react/shallow';\nimport classNames from 'classnames';\nimport { useSpaceStore } from '@coze-foundation/space-store';\nimport { localStorageService } from '@coze-foundation/local-storage';\nimport { EVENT_NAMES, sendTeaEvent } from '@coze-arch/bot-tea';\n\nexport interface IWorkspaceListItem {\n  icon?: ReactNode;\n  activeIcon?: ReactNode;\n  title?: () => string;\n  path?: string;\n  dataTestId?: string;\n}\n\ninterface IWorkspaceListItemProps extends IWorkspaceListItem {\n  currentSubMenu?: string;\n}\n\nexport const WorkspaceListItem: FC<IWorkspaceListItemProps> = ({\n  icon,\n  activeIcon,\n  title,\n  path,\n  currentSubMenu,\n  dataTestId,\n}) => {\n  const navigate = useNavigate();\n  const { spaceId } = useSpaceStore(\n    useShallow(store => ({\n      spaceId: store.space.id,\n    })),\n  );\n  return spaceId ? (\n    <div\n      onClick={() => {\n        sendTeaEvent(EVENT_NAMES.coze_space_sidenavi_ck, {\n          item: title?.() || 'unknown-workspace-submenu',\n          navi_type: 'second',\n          need_login: true,\n          have_access: true,\n        });\n        localStorageService.setValue('workspace-subMenu', path);\n        navigate(`/space/${spaceId}/${path}`);\n      }}\n      className={classNames(\n        'flex items-center gap-[8px]',\n        'transition-colors',\n        'rounded-[8px]',\n        'h-[32px] w-full',\n        'px-[8px]',\n        'cursor-pointer',\n        'group',\n        'hover:coz-mg-secondary-hovered',\n        {\n          'coz-bg-primary': path === currentSubMenu,\n          'coz-fg-plus': path === currentSubMenu,\n          'coz-fg-primary': path !== currentSubMenu,\n        },\n      )}\n      id={`workspace-submenu-${path}`}\n      data-testid={dataTestId}\n    >\n      <div className=\"text-[14px]\">\n        <div className=\"w-[16px] h-[16px]\">\n          {path === currentSubMenu ? activeIcon : icon}\n        </div>\n      </div>\n      <div\n        className={classNames(\n          'flex-1',\n          'text-[14px]',\n          'leading-[20px]',\n          'font-[500]',\n        )}\n      >\n        {title?.()}\n      </div>\n    </div>\n  ) : null;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport { Space } from '@coze-arch/coze-design';\n\nimport {\n  WorkspaceListItem,\n  type IWorkspaceListItem,\n} from './workspace-list-item';\n\ninterface WorkspaceListProps {\n  menus: Array<IWorkspaceListItem>;\n  currentSubMenu?: string;\n}\n\nexport const WorkspaceList: FC<WorkspaceListProps> = ({\n  menus,\n  currentSubMenu,\n}: WorkspaceListProps) => (\n  <div className=\"w-full mt-[16px]\">\n    <Space vertical spacing={4} className=\"w-full\">\n      {menus.map((item, index) => (\n        <WorkspaceListItem\n          {...item}\n          key={index}\n          currentSubMenu={currentSubMenu}\n        />\n      ))}\n    </Space>\n  </div>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport classNames from 'classnames';\nimport { cozeMitt } from '@coze-common/coze-mitt';\nimport { reporter } from '@coze-arch/logger';\nimport {\n  type IntelligenceData,\n  IntelligenceType,\n} from '@coze-arch/idl/intelligence_api';\nimport { I18n } from '@coze-arch/i18n';\nimport { IconCozMore } from '@coze-arch/coze-design/icons';\nimport {\n  Space,\n  Avatar,\n  Typography,\n  Popover,\n  Button,\n} from '@coze-arch/coze-design';\nimport { EVENT_NAMES, sendTeaEvent } from '@coze-arch/bot-tea';\nimport { CustomError } from '@coze-arch/bot-error';\nimport {\n  ProductEntityType,\n  type FavoriteProductResponse,\n} from '@coze-arch/bot-api/product_api';\nimport { ProductApi } from '@coze-arch/bot-api';\n\nconst getSubPath = (type: IntelligenceType | undefined) => {\n  if (type === IntelligenceType.Project) {\n    return 'project-ide';\n  }\n  if (type === IntelligenceType.Bot) {\n    //Jump to the Bot edit page, which will be changed to a new URL/space/: spaceId/agent/: agentId later.\n    return 'bot';\n  }\n  return '';\n};\n\nconst getIntelligenceNavigateUrl = ({\n  basic_info = {},\n  type,\n}: Pick<IntelligenceData, 'basic_info' | 'type'>) => {\n  const { space_id, id } = basic_info;\n  return `/space/${space_id}/${getSubPath(type)}/${id}`;\n};\n\nexport const FavoritesListItem: FC<IntelligenceData> = ({\n  basic_info = {},\n  type,\n}) => {\n  // Cancel Favorite\n  const clickToUnfavorite = async () => {\n    try {\n      const res: FavoriteProductResponse =\n        await ProductApi.PublicFavoriteProduct({\n          entity_type:\n            type === IntelligenceType.Project\n              ? ProductEntityType.Project\n              : ProductEntityType.Bot,\n          is_cancel: true,\n          entity_id: id,\n        });\n      if (res.code === 0) {\n        // Cancel the collection successfully, refresh the collection list\n        cozeMitt.emit('refreshFavList', {\n          id,\n          numDelta: -1,\n          emitPosition: 'favorites-list-item',\n        });\n      } else {\n        throw new Error(res.message);\n      }\n    } catch (error) {\n      reporter.errorEvent({\n        eventName: 'sub_menu_unfavorite_error',\n        error: new CustomError(\n          'sub_menu_unfavorite_error',\n          (error as Error).message,\n        ),\n      });\n    }\n  };\n  const { icon_url, name, space_id, id } = basic_info;\n  return (\n    <div\n      className={classNames(\n        'group',\n        'h-[32px] w-full rounded-[8px] cursor-pointer hover:coz-mg-secondary-hovered active:coz-mg-secondary-pressed',\n      )}\n      onClick={() => {\n        if (!space_id || !id) {\n          return;\n        }\n        sendTeaEvent(EVENT_NAMES.coze_space_sidenavi_ck, {\n          item: id,\n          category: 'space_favourite',\n          navi_type: 'second',\n          need_login: true,\n          have_access: true,\n        });\n        //Jump to the Bot edit page, which will be changed to a new URL/space/: spaceId/agent/: agentId later.\n        window.open(getIntelligenceNavigateUrl({ basic_info, type }), '_blank');\n      }}\n      data-testid=\"workspace.favorites.list.item\"\n    >\n      <Space className=\"h-[32px] px-[8px] w-full\" spacing={8}>\n        <Avatar\n          className=\"h-[16px] w-[16px] rounded-[4px] shrink-0\"\n          shape=\"square\"\n          src={icon_url}\n        />\n        <Typography.Text\n          className=\"flex-1\"\n          ellipsis={{ showTooltip: true, rows: 1 }}\n        >\n          {name}\n        </Typography.Text>\n        <div\n          onClick={e => {\n            e.stopPropagation();\n          }}\n          className={classNames(\n            'invisible opacity-0 group-hover:visible group-hover:opacity-100',\n            'h-[16px] w-[16px]',\n          )}\n        >\n          <Popover\n            className=\"rounded-[8px]\"\n            position=\"bottomRight\"\n            mouseLeaveDelay={200}\n            stopPropagation\n            content={\n              <div\n                data-testid=\"workspace.favorites.list.item.popover\"\n                className=\"w-[112px] h-[32px] pl-[8px] rounded-[8px] flex items-center overflow-hidden relative cursor-pointer hover:coz-mg-secondary-hovered\"\n                onClick={clickToUnfavorite}\n              >\n                {I18n.t('navigation_workspace_favourites_cancle')}\n              </div>\n            }\n          >\n            <Button\n              data-testid=\"workspace.favorites.list.item.popover.button\"\n              className={classNames('h-full w-full !flex')}\n              size=\"mini\"\n              color=\"secondary\"\n              icon={<IconCozMore />}\n            />\n          </Popover>\n        </div>\n      </Space>\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC, useRef, useEffect, useMemo } from 'react';\n\nimport { useShallow } from 'zustand/react/shallow';\nimport classNames from 'classnames';\nimport { useInfiniteScroll } from 'ahooks';\nimport { useSpaceStore } from '@coze-foundation/space-store';\nimport { cozeMitt, type RefreshFavListParams } from '@coze-common/coze-mitt';\nimport { reporter } from '@coze-arch/logger';\nimport {\n  type Intelligence,\n  IntelligenceStatus,\n  SearchScope,\n  search,\n} from '@coze-arch/idl/intelligence_api';\nimport { I18n } from '@coze-arch/i18n';\nimport { Space, Loading } from '@coze-arch/coze-design';\nimport { CustomError } from '@coze-arch/bot-error';\nimport { type SpaceType } from '@coze-arch/bot-api/developer_api';\nimport { intelligenceApi } from '@coze-arch/bot-api';\n\nimport { FavoritesListItem } from './favorites-list-item';\n\ninterface FEIntelligenceListData {\n  list: Intelligence[];\n  total: number;\n  hasMore: boolean;\n  cursorId?: string;\n}\n\nconst emptyDraftBotListData: FEIntelligenceListData = {\n  list: [],\n  total: 0,\n  hasMore: false,\n  cursorId: undefined,\n};\n\nconst DEFAULT_PAGE_SIZE = 20;\n\nconst getFavoritesList = async ({\n  spaceId,\n  spaceType,\n  cursorId,\n  pageSize = DEFAULT_PAGE_SIZE,\n}: {\n  spaceId?: string;\n  spaceType?: SpaceType;\n  cursorId?: string;\n  pageSize?: number;\n}): Promise<FEIntelligenceListData> => {\n  try {\n    if (spaceId) {\n      const res = await intelligenceApi.GetDraftIntelligenceList({\n        space_id: spaceId,\n        order_by: search.OrderBy.UpdateTime,\n        is_fav: true,\n        status: [\n          IntelligenceStatus.Using,\n          IntelligenceStatus.Banned,\n          IntelligenceStatus.MoveFailed,\n        ],\n        size: pageSize,\n        cursor_id: cursorId,\n        search_scope: SearchScope.All,\n      });\n      const resData = res?.data;\n      return {\n        list: resData?.intelligences || [],\n        total: resData?.total ?? 0,\n        hasMore: Boolean(resData?.has_more),\n        cursorId: resData?.next_cursor_id,\n      };\n    } else {\n      return emptyDraftBotListData;\n    }\n  } catch (error) {\n    reporter.errorEvent({\n      eventName: 'get_favorites_list_error',\n      error: new CustomError(\n        'get_favorites_list_error',\n        (error as Error).message,\n      ),\n    });\n    return emptyDraftBotListData;\n  }\n};\n\n/**\n * The object reference returned by the useInfiniteScroll of ahooks will change. This method returns an object with unchanged references, nothing more, regardless of its declaration and implementation\n */\nconst useInfiniteScrollRef: typeof useInfiniteScroll = <\n  T extends { list: unknown[] },\n>(\n  ...params: Parameters<typeof useInfiniteScroll<T>>\n) => {\n  const req = useInfiniteScroll<T>(...params);\n  const reqRef = useMemo(() => ({ ...req }), []);\n  return Object.assign(reqRef, req);\n};\n\nexport const FavoritesList: FC = () => {\n  const { spaceId, spaceType } = useSpaceStore(\n    useShallow(store => ({\n      spaceId: store.space.id,\n      spaceType: store.space.space_type,\n    })),\n  );\n\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  // Use an invariant req to make it easier for the handler in the effect to get the latest loading status\n  // (Putting loading into the deps of effect doesn't solve the problem, because the loading state before and after getFavoritesList in the last closure has been fixed and will not change, resulting in an error in the last execution)\n  const req = useInfiniteScrollRef<FEIntelligenceListData>(\n    async dataSource =>\n      await getFavoritesList({\n        spaceId,\n        spaceType,\n        cursorId: dataSource?.cursorId ?? undefined,\n      }),\n    {\n      target: containerRef,\n      reloadDeps: [spaceId, spaceType],\n      isNoMore: dataSource => !dataSource?.hasMore,\n    },\n  );\n  const { loading, data, loadingMore } = req;\n\n  useEffect(() => {\n    const handler = async (refreshFavListParams: RefreshFavListParams) => {\n      if (req.loading || req.loadingMore) {\n        // Deal with the race problem, give priority to ensuring the rolling loading of the list, the same as below\n        return;\n      }\n\n      const currLength = req.data?.list?.length;\n      const mutateData = await getFavoritesList({\n        spaceId,\n        spaceType,\n        // Q: Why set the pageSize specifically?\n        // A: useInfiniteScroll has a bug/feature that does not trigger height detection immediately after mutating\n        //  This starts with its loadmore trigger logic. Normally, it monitors the scroll action and detects the height to determine whether loadmore is required.\n        //  But what if the data requested for the first time is less than one screen height, and the scroll action cannot be triggered without overflow?\n        //  Therefore, useInfiniteScroll will perform a height check immediately after running, reloading, etc. to determine whether to continue loadmore.\n        //  However! It will not do height detection after mutating, resulting in less than one screen of mutated data, and it can no longer loadmore\n        //  So here we manually calculate the amount of data that needs to be mutated.\n        //  If there is a problem with the subsequent pageSize being too large, you can continue to modify the useInfiniteScrollRef so that the mutate action actually executes reload, but intercepts its loading property and returns false.\n        pageSize: Math.max(\n          currLength\n            ? currLength + refreshFavListParams.numDelta\n            : DEFAULT_PAGE_SIZE,\n          DEFAULT_PAGE_SIZE,\n        ),\n      });\n      if (req.loading || req.loadingMore) {\n        return;\n      }\n      // Use mutate silent loading to update the view directly without displaying the loading effect\n      req.mutate(mutateData);\n    };\n    cozeMitt.on('refreshFavList', handler);\n    return () => cozeMitt.off('refreshFavList', handler);\n  }, [spaceId, spaceType]);\n\n  return (\n    // There is a very pit here. If the scrolling overlay is directly hung on the scrolling canvas element, it will scroll together, so it needs to be wrapped in a separate layer (one layer above).\n    <div className={classNames('w-full h-full flex flex-col')}>\n      <>\n        <Space\n          className=\"h-[24px] pl-[8px] w-full mb-[4px] flex-none\"\n          spacing={4}\n        >\n          <div className=\"coz-fg-secondary text-[14px] font-[500] leading-[20px]\">\n            {I18n.t('navigation_workspace_favourites', {}, 'Favourites')}\n          </div>\n        </Space>\n        <div\n          ref={containerRef}\n          className=\"w-full flex-grow max-h-full overflow-y-auto styled-scrollbar-hidden\"\n        >\n          {loading ? (\n            <div className=\"flex items-center justify-center h-[200px] w-full\">\n              <Loading loading={true} size=\"mini\" />\n            </div>\n          ) : (\n            <Space vertical spacing={4} className=\"w-full\">\n              {data?.list?.length && data?.list?.length > 0 ? (\n                data?.list?.map(intelligenceData => (\n                  <FavoritesListItem\n                    key={intelligenceData.basic_info?.id}\n                    {...intelligenceData}\n                  />\n                ))\n              ) : (\n                <div className=\"coz-fg-dim pl-[8px] text-[14px] font-[500] leading-[20px]\">\n                  <div>{I18n.t('home_favor_desc1')}</div>\n                  <div>{I18n.t('home_favor_desc2')}</div>\n                </div>\n              )}\n              {loadingMore ? <Loading loading={true} size=\"mini\" /> : null}\n            </Space>\n          )}\n        </div>\n      </>\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ReactNode } from 'react';\n\nimport { useShallow } from 'zustand/react/shallow';\nimport { useSpaceStore } from '@coze-foundation/space-store';\nimport { Space, Skeleton } from '@coze-arch/coze-design';\n\nimport { type IWorkspaceListItem } from './components/workspace-list-item';\nimport { WorkspaceList } from './components/workspace-list';\nimport { FavoritesList } from './components/favorites-list';\n\nimport './components/list.css';\n\ninterface IWorkspaceSubMenuProps {\n  header: ReactNode;\n  menus: Array<IWorkspaceListItem>;\n  currentSubMenu?: string;\n}\n\nexport const WorkspaceSubMenu = ({\n  header,\n  menus,\n  currentSubMenu,\n}: IWorkspaceSubMenuProps) => {\n  const { spaceList, loading } = useSpaceStore(\n    useShallow(state => ({\n      currentSpace: state.space,\n      spaceList: state.spaceList,\n      loading: !!state.loading || !state.inited,\n    })),\n  );\n\n  const hasSpace = spaceList.length > 0;\n\n  return (\n    <Skeleton loading={loading} active placeholder={<Skeleton.Paragraph />}>\n      <Space spacing={4} vertical className=\"w-full h-full\">\n        <div className=\"flex-none w-full\">{header}</div>\n        {hasSpace ? (\n          <>\n            <div className=\"flex-none w-full\">\n              <WorkspaceList menus={menus} currentSubMenu={currentSubMenu} />\n            </div>\n            <div className=\"flex-grow max-h-full overflow-y-auto w-full mt-[24px]\">\n              <FavoritesList />\n            </div>\n          </>\n        ) : null}\n      </Space>\n    </Skeleton>\n  );\n};\n\nexport { IWorkspaceListItem };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Outlet, useParams } from 'react-router-dom';\n\nimport { useInitSpaceRole } from '@coze-common/auth-adapter';\nimport { useDestorySpace } from '@coze-common/auth';\n\nconst SpaceIdContainer = ({ spaceId }: { spaceId: string }) => {\n  // When the space component is destroyed, empty the corresponding space data\n  useDestorySpace(spaceId);\n\n  // Initialize spatial permission data\n  const isCompleted = useInitSpaceRole(spaceId);\n\n  // isCompleted, the judgment condition is very important to ensure that the permission data of the space can be obtained in the Space space.\n  return isCompleted ? <Outlet /> : null;\n};\n\nexport const SpaceIdLayout = () => {\n  const { space_id: spaceId } = useParams<{\n    space_id: string;\n  }>();\n\n  return spaceId ? <SpaceIdContainer key={spaceId} spaceId={spaceId} /> : null;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC, useState, useMemo, useCallback, type ReactNode } from 'react';\n\nimport classNames from 'classnames';\nimport { I18n } from '@coze-arch/i18n';\n// [] \nimport { IconCozPlus } from '@coze-arch/coze-design/icons';\nimport { Dropdown, Avatar, Typography, Button } from '@coze-arch/coze-design';\nimport { type BotSpace, SpaceType } from '@coze-arch/bot-api/developer_api';\n\ninterface SpaceSwitcherDropdownProps {\n  /**  */\n  currentSpace: BotSpace;\n  /**  */\n  spaceList: BotSpace[];\n  /**  */\n  onSpaceClick: (spaceId: string) => void;\n  /**  */\n  onAddSpaceClick?: () => void;\n  /**  */\n  children: ReactNode;\n  /**  */\n  searchPlaceholder?: string;\n  /**  */\n  addSpaceText?: string;\n}\n\ninterface DropdownContentProps {\n  searchValue: string;\n  searchPlaceholder: string;\n  onSearchChange: (value: string) => void;\n  personalSpace?: BotSpace;\n  teamSpaces: BotSpace[];\n  currentSpace: BotSpace;\n  onSpaceClick: (spaceId: string) => void;\n  addSpaceText: string;\n  onAddSpaceClick?: () => void;\n}\n\nconst DropdownContent: FC<DropdownContentProps> = ({\n  searchValue,\n  searchPlaceholder,\n  onSearchChange,\n  personalSpace,\n  teamSpaces,\n  currentSpace,\n  onSpaceClick,\n  addSpaceText,\n  onAddSpaceClick,\n}) => (\n  <div className=\"w-[280px] max-h-[400px] flex flex-col overflow-hidden rounded-[12px]\">\n    {/*  -  */}\n    <div className=\"px-[12px] py-[8px] border-b coz-stroke-primary\">\n      <input\n        type=\"text\"\n        value={searchValue}\n        onChange={e => onSearchChange(e.target.value)}\n        placeholder={searchPlaceholder}\n        className=\"w-full h-[32px] px-[12px] rounded-[6px] coz-bg-secondary coz-fg-primary text-[14px] outline-none border-none\"\n        onClick={e => e.stopPropagation()}\n      />\n    </div>\n\n    {/*  */}\n    <div className=\"flex-1 overflow-y-auto px-[8px] py-[8px]\">\n      {/*  */}\n      {personalSpace ? (\n        <div\n          className={classNames(\n            'flex items-center gap-[8px] px-[8px] py-[6px] rounded-[6px] cursor-pointer',\n            'hover:coz-mg-secondary-hovered',\n            currentSpace.id === personalSpace.id && 'coz-bg-primary',\n          )}\n          onClick={() => personalSpace.id && onSpaceClick(personalSpace.id)}\n        >\n          <Avatar\n            className=\"w-[24px] h-[24px] rounded-[6px] shrink-0\"\n            src={personalSpace.icon_url}\n          />\n          <Typography.Text\n            ellipsis={{ showTooltip: true, rows: 1 }}\n            className=\"flex-1 text-[14px] font-[500] coz-fg-primary\"\n          >\n            {I18n.t('menu_title_personal_space', {}, personalSpace.name)}\n          </Typography.Text>\n          {currentSpace.id === personalSpace.id && (\n            <div className=\"w-[4px] h-[4px] rounded-full coz-bg-brand\" />\n          )}\n        </div>\n      ) : null}\n\n      {/*  */}\n      {teamSpaces.length > 0 && (\n        <div className=\"mt-[4px]\">\n          {teamSpaces.map(space => (\n            <div\n              key={space.id}\n              className={classNames(\n                'flex items-center gap-[8px] px-[8px] py-[6px] rounded-[6px] cursor-pointer',\n                'hover:coz-mg-secondary-hovered',\n                currentSpace.id === space.id && 'coz-bg-primary',\n              )}\n              onClick={() => space.id && onSpaceClick(space.id)}\n            >\n              <Avatar\n                className=\"w-[24px] h-[24px] rounded-[6px] shrink-0\"\n                src={space.icon_url}\n              />\n              <Typography.Text\n                ellipsis={{ showTooltip: true, rows: 1 }}\n                className=\"flex-1 text-[14px] font-[500] coz-fg-primary\"\n              >\n                {space.name}\n              </Typography.Text>\n              {currentSpace.id === space.id && (\n                <div className=\"w-[4px] h-[4px] rounded-full coz-bg-brand\" />\n              )}\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/*  */}\n      {!personalSpace && teamSpaces.length === 0 && (\n        <div className=\"py-[24px] text-center\">\n          <Typography.Text className=\"text-[14px] coz-fg-tertiary\">\n            {I18n.t(\n              'app_publish_connector_space_mcp_config_dialog_no_results_found',\n              {},\n              'No results found',\n            )}\n          </Typography.Text>\n        </div>\n      )}\n    </div>\n\n    {/*  */}\n    {onAddSpaceClick ? (\n      <div className=\"px-[12px] py-[8px] border-t coz-stroke-primary\">\n        <Button\n          className=\"w-full\"\n          color=\"secondary\"\n          icon={<IconCozPlus />}\n          onClick={e => {\n            e.stopPropagation();\n            onAddSpaceClick();\n          }}\n        >\n          {addSpaceText}\n        </Button>\n      </div>\n    ) : null}\n  </div>\n);\n\nexport const SpaceSwitcherDropdown: FC<SpaceSwitcherDropdownProps> = ({\n  currentSpace,\n  spaceList,\n  onSpaceClick,\n  onAddSpaceClick,\n  children,\n  searchPlaceholder,\n  addSpaceText,\n}) => {\n  const [searchValue, setSearchValue] = useState('');\n  const [visible, setVisible] = useState(false);\n\n  //  useMemo  i18n  I18n.t()\n  const finalSearchPlaceholder = useMemo(\n    () =>\n      searchPlaceholder ??\n      I18n.t('workspace_search_placeholder', {}, 'Search your workspace'),\n    [searchPlaceholder],\n  );\n  const finalAddSpaceText = useMemo(\n    () => addSpaceText ?? I18n.t('add', {}, 'Add'),\n    [addSpaceText],\n  );\n\n  // \n  const { personalSpace, teamSpaces } = useMemo(() => {\n    const filtered = spaceList.filter(space =>\n      space.name?.toLowerCase().includes(searchValue.toLowerCase()),\n    );\n\n    return {\n      personalSpace: filtered.find(\n        space => space.space_type === SpaceType.Personal,\n      ),\n      teamSpaces: filtered.filter(space => space.space_type === SpaceType.Team),\n    };\n  }, [spaceList, searchValue]);\n\n  const handleSpaceClick = useCallback(\n    (spaceId: string) => {\n      setVisible(false);\n      onSpaceClick(spaceId);\n    },\n    [onSpaceClick],\n  );\n\n  const handleAddSpaceClick = useCallback(() => {\n    setVisible(false);\n    onAddSpaceClick?.();\n  }, [onAddSpaceClick]);\n\n  const handleSearchChange = useCallback((value: string) => {\n    setSearchValue(value);\n  }, []);\n\n  //  useMemo  Popover content\n  //  visible  true \n  const dropdownContent = useMemo(\n    () =>\n      visible ? (\n        <DropdownContent\n          searchValue={searchValue}\n          searchPlaceholder={finalSearchPlaceholder}\n          onSearchChange={handleSearchChange}\n          personalSpace={personalSpace}\n          teamSpaces={teamSpaces}\n          currentSpace={currentSpace}\n          onSpaceClick={handleSpaceClick}\n          addSpaceText={finalAddSpaceText}\n          onAddSpaceClick={onAddSpaceClick ? handleAddSpaceClick : undefined}\n        />\n      ) : null,\n    [\n      visible,\n      searchValue,\n      finalSearchPlaceholder,\n      handleSearchChange,\n      personalSpace,\n      teamSpaces,\n      currentSpace,\n      handleSpaceClick,\n      finalAddSpaceText,\n      onAddSpaceClick,\n      handleAddSpaceClick,\n    ],\n  );\n\n  return (\n    <Dropdown\n      trigger=\"custom\"\n      position=\"bottomLeft\"\n      visible={visible}\n      onVisibleChange={setVisible}\n      onClickOutSide={() => {\n        setVisible(false);\n      }}\n      render={dropdownContent}\n    >\n      <div onClick={() => setVisible(!visible)}>{children}</div>\n    </Dropdown>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useNavigate } from 'react-router-dom';\nimport { useEffect, useState } from 'react';\n\nimport { useShallow } from 'zustand/react/shallow';\nimport { useSpaceStore } from '@coze-foundation/space-store';\nimport { localStorageService } from '@coze-foundation/local-storage';\nimport { REPORT_EVENTS as ReportEventNames } from '@coze-arch/report-events';\nimport { useErrorHandler, reporter } from '@coze-arch/logger';\nimport { I18n } from '@coze-arch/i18n';\nimport { Toast } from '@coze-arch/coze-design';\nimport { CustomError } from '@coze-arch/bot-error';\n\nconst getFallbackWorkspaceURL = async (\n  fallbackSpaceID: string,\n  fallbackSpaceMenu: string,\n  checkSpaceID: (id: string) => boolean,\n) => {\n  const targetSpaceId =\n    (await localStorageService.getValueSync('workspace-spaceId')) ??\n    fallbackSpaceID;\n  const targetSpaceSubMenu =\n    (await localStorageService.getValueSync('workspace-subMenu')) ??\n    fallbackSpaceMenu;\n\n  if (targetSpaceId && checkSpaceID(targetSpaceId)) {\n    return `/space/${targetSpaceId}/${targetSpaceSubMenu}`;\n  }\n\n  return `/space/${fallbackSpaceID}/${targetSpaceSubMenu}`;\n};\n\nexport const useInitSpace = ({\n  spaceId,\n  fetchSpacesWithSpaceId,\n  isReady,\n}: {\n  spaceId?: string;\n  fetchSpacesWithSpaceId?: (spaceId: string) => Promise<unknown>;\n  isReady?: boolean;\n} = {}) => {\n  const [isError, setIsError] = useState<boolean>(false);\n  const navigate = useNavigate();\n  const capture = useErrorHandler();\n\n  const { space, spaceListLoading, spaceList } = useSpaceStore(\n    useShallow(\n      store =>\n        ({\n          space: store.space,\n          spaceListLoading: store.loading,\n          spaceList: store.spaceList,\n        }) as const,\n    ),\n  );\n\n  useEffect(() => {\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    (async (spaceId?: string) => {\n      try {\n        if (!isReady) {\n          return;\n        }\n\n        // If spaceId is not specified, jump to the project development subroute under the space of the backseat\n        if (!spaceId) {\n          // Pull space list\n          await useSpaceStore.getState().fetchSpaces(true);\n          // Get Personal Space Id\n          const personalSpaceID = useSpaceStore.getState().getPersonalSpaceID();\n          // The first space in the space list\n          const firstSpaceID = useSpaceStore.getState().spaceList[0]?.id;\n          // SpaceId not specified\n          const fallbackSpaceID = personalSpaceID ?? firstSpaceID ?? '';\n          // Checks if the specified spaceId is accessible\n          const { checkSpaceID } = useSpaceStore.getState();\n\n          // No workspace, prompt to create\n          if (!fallbackSpaceID) {\n            Toast.warning(I18n.t('enterprise_workspace_default_tips2_toast'));\n          } else {\n            // Get the jump URL of the back cover.\n            const targetURL = await getFallbackWorkspaceURL(\n              fallbackSpaceID,\n              'develop',\n              checkSpaceID,\n            );\n            // jump\n            navigate(targetURL);\n          }\n        } else {\n          // Pull space list\n          await fetchSpacesWithSpaceId?.(spaceId);\n\n          if (!useSpaceStore.getState().checkSpaceID(spaceId)) {\n            // Throws an error when the space id cannot be found in the space list\n            capture(\n              new CustomError(ReportEventNames.errorPath, 'space id error', {\n                customGlobalErrorConfig: {\n                  title: I18n.t('workspace_no_permission_access'),\n                  subtitle:\n                    'You do not have permission to access this space or the space ID does not exist',\n                },\n              }),\n            );\n          } else {\n            // Update space store spaceId\n            useSpaceStore.getState().setSpace(spaceId);\n          }\n        }\n      } catch (e) {\n        reporter.error({\n          message: 'init_space_error',\n          error: e as Error,\n        });\n        setIsError(true);\n        capture(\n          new CustomError(ReportEventNames.errorPath, 'space id error', {\n            customGlobalErrorConfig: {\n              title: I18n.t('workspace_no_permission_access'),\n              subtitle: (e as Error).message,\n            },\n          }),\n        );\n      }\n    })(spaceId);\n  }, [spaceId, isReady]);\n\n  return { loading: !space.id, isError, spaceListLoading, spaceList };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ReactNode } from 'react';\n\nimport copy from 'copy-to-clipboard';\nimport { getSlardarInstance } from '@coze-arch/logger';\nimport { I18n } from '@coze-arch/i18n';\nimport { Button, Toast } from '@coze-arch/coze-design';\n\nexport const withSlardarIdButton = (node: ReactNode) => {\n  const copySlardarId = () => {\n    const id = getSlardarInstance()?.config()?.sessionId;\n    copy(id ?? '');\n    Toast.success(I18n.t('error_id_copy_success'));\n  };\n\n  return (\n    <div className=\"flex flex-row justify-center items-center\">\n      {node}\n      <Button\n        className=\"ml-[8px]\"\n        onClick={copySlardarId}\n        size=\"small\"\n        color=\"primary\"\n      >\n        {I18n.t('copy_session_id')}\n      </Button>\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type EnumToUnion } from './types/util';\n\nexport const enum FileTypeEnum {\n  PDF = 'pdf',\n  DOCX = 'docx',\n  EXCEL = 'excel',\n  CSV = 'csv',\n  IMAGE = 'image',\n  AUDIO = 'audio',\n  VIDEO = 'video',\n  ARCHIVE = 'archive',\n  CODE = 'code',\n  TXT = 'txt',\n  PPT = 'ppt',\n  DEFAULT_UNKNOWN = 'default_unknown',\n}\n\nexport type FileType = EnumToUnion<typeof FileTypeEnum>;\n\nexport interface TFileTypeConfig {\n  fileType: FileTypeEnum;\n  accept: string[];\n  judge?: (file: Pick<File, 'type'>) => boolean;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FileTypeEnum, type TFileTypeConfig } from './const';\n\n/**\n * file type\n * {@link\n * {@link https://www.iana.org/assignments/media-types/media-types.xhtml#image}\n */\nexport const FILE_TYPE_CONFIG: readonly TFileTypeConfig[] = [\n  {\n    fileType: FileTypeEnum.IMAGE,\n    accept: ['image/*'],\n    judge: file => file.type.startsWith('image/'),\n  },\n  {\n    fileType: FileTypeEnum.AUDIO,\n    accept: [\n      '.mp3',\n      '.wav',\n      '.aac',\n      '.flac',\n      '.ogg',\n      '.wma',\n      '.alac',\n      // Both .midi and .mid are extensions for MIDI (Musical Instrument Digital Interface) files - GPT\n      '.mid',\n      '.midi',\n      '.ac3',\n      '.dsd',\n    ],\n    judge: file => file.type.startsWith('audio/'),\n  },\n  {\n    fileType: FileTypeEnum.PDF,\n    accept: ['.pdf'],\n  },\n  {\n    fileType: FileTypeEnum.DOCX,\n    accept: ['.docx', '.doc'],\n  },\n  {\n    fileType: FileTypeEnum.EXCEL,\n    accept: ['.xls', '.xlsx'],\n  },\n  {\n    fileType: FileTypeEnum.CSV,\n    accept: ['.csv'],\n  },\n  {\n    fileType: FileTypeEnum.VIDEO,\n    accept: ['.mp4', '.avi', '.mov', '.wmv', '.flv', '.mkv'],\n    judge: file => file.type.startsWith('video/'),\n  },\n  {\n    fileType: FileTypeEnum.ARCHIVE,\n    accept: ['.zip', '.rar', '.7z', '.tar', '.gz', '.bz2'],\n  },\n  {\n    fileType: FileTypeEnum.CODE,\n    accept: ['.py', '.java', '.c', '.cpp', '.js', '.html', '.css'],\n  },\n  {\n    fileType: FileTypeEnum.TXT,\n    accept: ['.txt'],\n  },\n  {\n    fileType: FileTypeEnum.PPT,\n    accept: ['.ppt', '.pptx'],\n  },\n  {\n    fileType: FileTypeEnum.DEFAULT_UNKNOWN,\n    judge: () => true,\n    accept: ['*'],\n  },\n];\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FILE_TYPE_CONFIG } from './file-type';\n\n// Get file information\nexport const getFileInfo = (file: File) => {\n  const fileInfo = FILE_TYPE_CONFIG.find(({ judge, accept }) =>\n    judge ? judge(file) : accept.some(ext => file.name.endsWith(ext)),\n  );\n  if (!fileInfo) {\n    return null;\n  }\n  return fileInfo;\n};\n","\n      import API from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport classNames from 'classnames';\nimport {\n  IconBrandCnWhiteRow,\n  IconBrandCnBlackRow,\n  IconBrandEnBlackRow,\n} from '@coze-arch/bot-icons';\nimport { useNavigate } from 'react-router-dom';\n\nimport styles from './index.module.less';\n\nexport interface CozeBrandProps {\n  isOversea: boolean;\n  isWhite?: boolean;\n  className?: string;\n  style?: React.CSSProperties;\n}\n\nexport function CozeBrand({\n  isOversea,\n  isWhite,\n  className,\n  style,\n}: CozeBrandProps) {\n  const navigate = useNavigate();\n  const navBack = () => {\n    navigate('/');\n  };\n  if (isOversea) {\n    return (\n      <IconBrandEnBlackRow\n        onClick={navBack}\n        className={classNames(styles['coze-brand'], className)}\n        style={style}\n      />\n    );\n  }\n  if (isWhite) {\n    return (\n      <IconBrandCnWhiteRow\n        onClick={navBack}\n        className={classNames(styles['coze-brand'], className)}\n        style={style}\n      />\n    );\n  }\n  return (\n    <IconBrandCnBlackRow\n      onClick={navBack}\n      className={classNames(styles['coze-brand'], className)}\n      style={style}\n    />\n  );\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState } from 'react';\n\nimport classNames from 'classnames';\nimport { I18n } from '@coze-arch/i18n';\nimport { IconCozArrowLeft } from '@coze-arch/coze-design/icons';\nimport {\n  Collapsible,\n  IconButton,\n  SegmentTab,\n  Space,\n} from '@coze-arch/coze-design';\n\nimport { type TabItem } from './type';\n\nimport s from './index.module.less';\n\nexport interface GenerateImageTabProps {\n  // tab list\n  tabs: TabItem[];\n  // Is it foldable?\n  enableCollapsible?: boolean;\n  // Currently active tab\n  activeKey?: string;\n  // Currently active tab change callback\n  onTabChange?: (tabKey: string) => void;\n  // Whether to show the waiting copy\n  showWaitTip?: boolean;\n  disabled?: boolean;\n}\n\nexport enum GenerateType {\n  Static = 'static',\n  Gif = 'gif',\n}\n\nexport const GenerateImageTab: React.FC<GenerateImageTabProps> = ({\n  tabs = [],\n  enableCollapsible = false,\n  activeKey,\n  onTabChange,\n  showWaitTip = true,\n  disabled = false,\n}) => {\n  const [isOpen, setOpen] = useState(true);\n  const toggle = () => {\n    setOpen(!isOpen);\n  };\n\n  // tabPane does not uninstall\n  const component = (\n    <div>\n      {tabs.map(item => (\n        <div\n          key={item.value}\n          className={classNames({\n            hidden: activeKey !== item.value,\n            'border-0 border-t border-solid mt-2 coz-stroke-primary': isOpen,\n          })}\n        >\n          {item.component}\n        </div>\n      ))}\n    </div>\n  );\n\n  return (\n    <div\n      className={classNames(\n        'border border-solid coz-stroke-plus coz-bg-max rounded-md w-full coz-fg-plus mt-3 pt-2 pb-4 px-4',\n        {\n          'coz-bg-primary pointer-events-none': disabled,\n        },\n      )}\n    >\n      <div className=\" flex items-center gap-2\tjustify-between \">\n        <Space>\n          {enableCollapsible ? (\n            <IconButton\n              className=\"!bg-transparent hover:!coz-mg-primary-hovered\"\n              icon={\n                <IconCozArrowLeft\n                  className={classNames(\n                    isOpen ? 'rotate-90' : '-rotate-90',\n                    'coz-fg-secondary',\n                  )}\n                  onClick={toggle}\n                />\n              }\n            />\n          ) : null}\n          <SegmentTab\n            className={s['segment-tab']}\n            onChange={e => {\n              onTabChange?.(e.target.value);\n            }}\n            options={tabs.map(item => ({\n              label: item.label,\n              value: item.value,\n            }))}\n            defaultValue={activeKey ?? tabs[0]?.value}\n          />\n        </Space>\n\n        {showWaitTip ? (\n          <div className=\"coz-fg-dim text-xs flex-1\ttruncate\">\n            {I18n.t('profilepicture_popup_async')}\n          </div>\n        ) : null}\n      </div>\n      {enableCollapsible ? (\n        // keepDOM exception fails using collapseHeight does not destroy dom keep state\n        <Collapsible isOpen={isOpen} keepDOM collapseHeight={1}>\n          <div> {component} </div>\n        </Collapsible>\n      ) : (\n        <div> {component} </div>\n      )}\n    </div>\n  );\n};\n","\n      import API from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from 'classnames';\nimport { DotStatus } from '@coze-studio/bot-detail-store';\nimport { I18n } from '@coze-arch/i18n';\nimport {\n  IconCozCheckMarkCircleFillPalette,\n  IconCozLoading,\n  IconCozWarningCircleFillPalette,\n} from '@coze-arch/coze-design/icons';\nimport { Tooltip } from '@coze-arch/coze-design';\n\nimport s from './index.module.less';\n\nexport interface AvatarBackgroundNoticeDotProps {\n  status: DotStatus;\n}\n\nexport const AvatarBackgroundNoticeDot: React.FC<\n  AvatarBackgroundNoticeDotProps\n> = ({ status }) => {\n  if (status === DotStatus.None || status === DotStatus.Cancel) {\n    return null;\n  }\n  const dot = {\n    [DotStatus.Generating]: (\n      <Tooltip content={I18n.t('profilepicture_hover_generating')}>\n        <IconCozLoading\n          className={classNames(s.icon, s['icon-generating'])}\n          spin={true}\n        />\n      </Tooltip>\n    ),\n    [DotStatus.Success]: (\n      <Tooltip content={I18n.t('profilepicture_hover_generated')}>\n        <IconCozCheckMarkCircleFillPalette\n          className={classNames(s.icon, s['icon-success'])}\n        />\n      </Tooltip>\n    ),\n    [DotStatus.Fail]: (\n      <Tooltip content={I18n.t('profilepicture_hover_failed')}>\n        <IconCozWarningCircleFillPalette\n          className={classNames(s.icon, s['icon-fail'])}\n        />\n      </Tooltip>\n    ),\n  };\n  return (\n    <div\n      className={classNames(\n        s.ctn,\n        status === DotStatus.Generating ? s.loading : undefined,\n      )}\n    >\n      {dot[status]}\n    </div>\n  );\n};\n","\n      import API from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useMemo } from 'react';\n\nimport { type InputProps } from '@coze-arch/bot-semi/Input';\nimport { UIInput, withField } from '@coze-arch/bot-semi';\nimport 'utility-types';\n\nimport s from './index.module.less';\n\ninterface LimitCountProps {\n  maxLen: number;\n  len: number;\n}\n\nconst LimitCount: React.FC<LimitCountProps> = ({ maxLen, len }) => (\n  <span className={s['limit-count']}>\n    <span>{len}</span>\n    <span>/</span>\n    <span>{maxLen}</span>\n  </span>\n);\n\nexport interface InputWithCountProps extends InputProps {\n  // Set word limits and display word count\n  getValueLength?: (value?: InputProps['value'] | string) => number;\n}\n\nexport const InputWithCount: React.FC<InputWithCountProps> = props => {\n  const { value, maxLength, getValueLength } = props;\n\n  const len = useMemo(() => {\n    if (getValueLength) {\n      return getValueLength(value);\n    } else if (value) {\n      return value.toString().length;\n    } else {\n      return 0;\n    }\n  }, [value, getValueLength]);\n\n  return (\n    <UIInput\n      {...props}\n      suffix={\n        Boolean(maxLength) && <LimitCount maxLen={maxLength ?? 0} len={len} />\n      }\n    />\n  );\n};\n\nexport const InputWithCountField = withField(InputWithCount);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useNavigate, useParams } from 'react-router-dom';\n\nimport { SpaceAppEnum, BaseEnum } from '@coze-arch/web-context';\nimport { I18n } from '@coze-arch/i18n';\nimport { IconCozArrowLeft } from '@coze-arch/coze-design/icons';\nimport {\n  Typography,\n  Avatar,\n  Breadcrumb as SemiBreadcrumb,\n  Button,\n} from '@coze-arch/coze-design';\nimport { type DynamicParams } from '@coze-arch/bot-typings/teamspace';\nimport { useSpaceStore } from '@coze-arch/bot-studio-store';\nimport { type BreadcrumbProps as SemiBreadcrumbProps } from '@coze-arch/bot-semi/Breadcrumb';\nimport { useRouteConfig } from '@coze-arch/bot-hooks';\nimport type { DataSetInfo } from '@coze-arch/bot-api/memory';\nimport { type DocumentInfo } from '@coze-arch/bot-api/knowledge';\nimport {\n  type DraftBot,\n  type PluginMetaInfo,\n  type PluginAPIInfo,\n} from '@coze-arch/bot-api/developer_api';\nimport { type MockSet } from '@coze-arch/bot-api/debugger_api';\nimport { useSpaceApp } from '@coze-foundation/space-store';\n\nimport s from './index.module.less';\n\nexport interface BreadCrumbProps extends SemiBreadcrumbProps {\n  botInfo?: DraftBot;\n  datasetInfo?: DataSetInfo;\n  documentinfo?: DocumentInfo;\n  pluginInfo?: PluginMetaInfo;\n  pluginToolInfo?: PluginAPIInfo;\n  isPublish?: boolean;\n  mockSetInfo?: MockSet;\n}\n\n// eslint-disable-next-line @coze-arch/max-line-per-function\nexport const UIBreadcrumb: React.FC<BreadCrumbProps> = ({\n  botInfo,\n  datasetInfo,\n  documentinfo,\n  pluginInfo,\n  pluginToolInfo,\n  mockSetInfo,\n  isPublish,\n  ...props\n}) => {\n  const { menuKey: base } = useRouteConfig();\n  const spaceApp = useSpaceApp();\n  const id = useSpaceStore(store => store.space.id);\n  const navigate = useNavigate();\n  const params = useParams<DynamicParams>();\n\n  const goBack = () => {\n    if (base === BaseEnum.Explore) {\n      navigate('/explore');\n    } else {\n      navigate(`/space/${id}/library`);\n    }\n  };\n  const goBackToDoc = () => {\n    navigate(`/space/${id}/${spaceApp}/${params.dataset_id}`);\n  };\n  const goBackToPluginIdList = () => {\n    navigate(`/space/${id}/${spaceApp}/${params.plugin_id}`);\n  };\n\n  const goBackToBot = () => {\n    navigate(`/space/${id}/${spaceApp}/${params.bot_id}`);\n  };\n\n  const goBackToToolIdList = () => {\n    navigate(\n      `/space/${id}/${spaceApp}/${params.plugin_id}/tool/${params.tool_id}?mode=preview`,\n    );\n  };\n\n  const goBackToMockSetList = () => {\n    navigate(\n      `/space/${id}/${spaceApp}/${params.plugin_id}/tool/${params.tool_id}/plugin-mock-set`,\n    );\n  };\n\n  const renderBreadcrumbItemForPlugin = () => {\n    let breadCrumbList: React.ReactNode[] = [];\n    let onBackClick: () => void;\n\n    if (pluginInfo?.name) {\n      onBackClick = goBack;\n    }\n\n    if (pluginToolInfo?.name) {\n      onBackClick = goBackToPluginIdList;\n    }\n\n    if (mockSetInfo) {\n      onBackClick = goBackToToolIdList;\n\n      if (mockSetInfo?.name) {\n        onBackClick = goBackToMockSetList;\n      }\n    }\n    breadCrumbList = [\n      <Button\n        color=\"secondary\"\n        icon={<IconCozArrowLeft />}\n        onClick={() => {\n          onBackClick();\n        }}\n      >\n        {I18n.t('library_resource_detail_back')}\n      </Button>,\n    ];\n    return breadCrumbList;\n  };\n\n  const renderBreadcrumbItem = () => {\n    if (base === BaseEnum.Explore) {\n      return [\n        <SemiBreadcrumb.Item key=\"bots\" onClick={goBack}>\n          <Typography.Title weight={700} className={s['bread-title']}>\n            Explore\n          </Typography.Title>\n        </SemiBreadcrumb.Item>,\n        <SemiBreadcrumb.Item key=\"bots info\">\n          <div className={s['bot-info-item']}>\n            <Avatar\n              className={s['bot-avatar']}\n              src={botInfo?.icon_url}\n              size=\"extra-small\"\n              shape=\"square\"\n            />\n            <div className={s['bot-name']}>{botInfo?.name}</div>\n          </div>\n        </SemiBreadcrumb.Item>,\n      ];\n    }\n    switch (spaceApp) {\n      case SpaceAppEnum.BOT: {\n        if (isPublish) {\n          return [\n            <SemiBreadcrumb.Item key=\"bots\" onClick={goBack}>\n              <Typography.Title weight={700} className={s['bread-title']}>\n                {I18n.t('menu_bots')}\n              </Typography.Title>\n            </SemiBreadcrumb.Item>,\n            <SemiBreadcrumb.Item key=\"bots info\" onClick={goBackToBot}>\n              <div className={s['bot-info-item']}>\n                <Avatar\n                  className={s['bot-avatar']}\n                  src={botInfo?.icon_url}\n                  size=\"extra-small\"\n                  shape=\"square\"\n                />\n                <Typography.Title weight={700} className={s['bread-title']}>\n                  {botInfo?.name}\n                </Typography.Title>\n              </div>\n            </SemiBreadcrumb.Item>,\n            <SemiBreadcrumb.Item key=\"bots publish\">\n              <div className={s['bot-info-item']}>\n                <div className={s['bot-name']}>{I18n.t('Publish')}</div>\n              </div>\n            </SemiBreadcrumb.Item>,\n          ];\n        } else {\n          return [\n            <SemiBreadcrumb.Item key=\"bots\" onClick={goBack}>\n              <Typography.Title weight={700} className={s['bread-title']}>\n                {I18n.t('menu_bots')}\n              </Typography.Title>\n            </SemiBreadcrumb.Item>,\n            <SemiBreadcrumb.Item key=\"bots info\">\n              <div className={s['bot-info-item']}>\n                <Avatar\n                  className={s['bot-avatar']}\n                  src={botInfo?.icon_url}\n                  size=\"extra-small\"\n                  shape=\"square\"\n                />\n                <Typography.Text\n                  className={s['bot-name']}\n                  ellipsis={{\n                    showTooltip: {\n                      opts: {\n                        content: botInfo?.name,\n                        style: { wordWrap: 'break-word' },\n                      },\n                    },\n                  }}\n                >\n                  {botInfo?.name}\n                </Typography.Text>\n              </div>\n            </SemiBreadcrumb.Item>,\n          ];\n        }\n      }\n      case SpaceAppEnum.KNOWLEDGE: {\n        if (!params.doc_id) {\n          return [\n            <SemiBreadcrumb.Item\n              key=\"dataset\"\n              onClick={() => {\n                goBack();\n              }}\n            >\n              {I18n.t('datasets_title')}\n            </SemiBreadcrumb.Item>,\n            <SemiBreadcrumb.Item key=\"doc\" noLink>\n              {datasetInfo?.name}\n            </SemiBreadcrumb.Item>,\n          ];\n        }\n        return [\n          <SemiBreadcrumb.Item\n            key=\"dataset\"\n            onClick={() => {\n              goBack();\n            }}\n          >\n            {I18n.t('datasets_title')}\n          </SemiBreadcrumb.Item>,\n          <SemiBreadcrumb.Item onClick={goBackToDoc} key=\"doc\">\n            {datasetInfo?.name}\n          </SemiBreadcrumb.Item>,\n          <SemiBreadcrumb.Item noLink key=\"slice\">\n            {documentinfo?.name}\n          </SemiBreadcrumb.Item>,\n        ];\n      }\n      case SpaceAppEnum.PLUGIN: {\n        return renderBreadcrumbItemForPlugin();\n      }\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className={s['bot-breadcrumb']}>\n      <SemiBreadcrumb {...props}>{renderBreadcrumbItem()}</SemiBreadcrumb>\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { forwardRef } from 'react';\n\nimport {\n  UISearch as SemiUISearch,\n  type UISearchProps,\n} from '@coze-arch/bot-semi';\nimport { I18n } from '@coze-arch/i18n';\n\nexport { type UISearchProps };\n\nexport const UISearch = forwardRef<HTMLInputElement, UISearchProps>(\n  (props, ref) => (\n    <SemiUISearch ref={ref} placeholder={I18n.t('Search')} {...props} />\n  ),\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  Suspense,\n  lazy,\n  type PropsWithChildren,\n  type ReactNode,\n  type CSSProperties,\n} from 'react';\n\nimport classNames from 'classnames';\n\nimport s from './index.module.less';\n// React-markdown longtask around 20ms\nconst LazyReactMarkdown = lazy(() => import('react-markdown'));\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst ReactMarkdown = (props: any) => (\n  <Suspense fallback={null}>\n    <LazyReactMarkdown {...props} />\n  </Suspense>\n);\nexport const PopoverContent: React.FC<\n  PropsWithChildren & {\n    text?: string;\n    node?: ReactNode;\n    className?: string;\n    style?: CSSProperties;\n  }\n> = ({ children, className, style }) => (\n  <div className={classNames(s['tip-content'], className)} style={style}>\n    {typeof children === 'string' ? (\n      <ReactMarkdown skipHtml={true} className={s.markdown}>\n        {children}\n      </ReactMarkdown>\n    ) : (\n      children\n    )}\n  </div>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState, type PropsWithChildren, useEffect, useRef } from 'react';\n\nimport classNames from 'classnames';\nimport { I18n } from '@coze-arch/i18n';\nimport { BotPageFromEnum } from '@coze-arch/bot-typings/common';\nimport { useSpaceList, useSpaceStore } from '@coze-arch/bot-studio-store';\nimport {\n  UIModal,\n  UITag,\n  Form,\n  Avatar,\n  UIFormSelect,\n  Banner,\n} from '@coze-arch/bot-semi';\nimport { type BotSpace, SpaceType } from '@coze-arch/bot-api/developer_api';\nimport { usePageRuntimeStore } from '@coze-studio/bot-detail-store/page-runtime';\nimport { useBotSkillStore } from '@coze-studio/bot-detail-store/bot-skill';\nimport { IconTeamDefault, IconWarningInfo } from '@coze-arch/bot-icons';\nimport { botInputLengthService } from '@coze-agent-ide/bot-input-length-limit';\n\nimport { InputWithCountField } from '../input-with-count';\n\nimport s from './index.module.less';\n\ninterface SelectSpaceModalProps {\n  visible: boolean;\n  botName?: string;\n  onCancel?: () => void;\n  onConfirm?: (spaceId: string, botName?: string) => void;\n}\n\nexport const SelectSpaceModal: React.FC<\n  PropsWithChildren<SelectSpaceModalProps>\n> = ({ visible, botName, onCancel, onConfirm }) => {\n  const { pageFrom } = usePageRuntimeStore(state => ({\n    pageFrom: state.pageFrom,\n  }));\n  const { hasWorkflow } = useBotSkillStore(state => ({\n    hasWorkflow: !!state.workflows.length,\n  }));\n  const {\n    space: { id, hide_operation },\n  } = useSpaceStore();\n\n  const { spaces: list = [] } = useSpaceList(true);\n  const [loading, setLoading] = useState(false);\n  const form = useRef<Form<{ name: string; spaceId: string }>>(null);\n  useEffect(() => {\n    setLoading(false);\n    if (visible) {\n      form.current?.formApi.setValue(\n        'spaceId',\n        hide_operation\n          ? list?.[0].id ?? ''\n          : id ?? useSpaceStore.getState().getPersonalSpaceID() ?? '',\n      );\n    }\n  }, [visible, list]);\n\n  const copyAddonAfter = `(${I18n.t('duplicate_rename_copy')})`;\n\n  const maxBotNameLength = botInputLengthService.getInputLengthLimit('botName');\n\n  const maxBotNameLengthWithAddonAfter =\n    maxBotNameLength - copyAddonAfter.length;\n\n  const getBotName = () => {\n    if (!botName) {\n      return botName;\n    }\n    const botNameJoin = '...';\n\n    const maxBotNameLengthWithJoin =\n      maxBotNameLengthWithAddonAfter - botNameJoin.length;\n\n    return botName.length > maxBotNameLength\n      ? `${botName.slice(0, maxBotNameLengthWithJoin)}${botNameJoin}`\n      : botName;\n  };\n  return (\n    <UIModal\n      type=\"action-small\"\n      title={`${I18n.t('binding_duplicate_card')} Bot`}\n      visible={visible}\n      onCancel={() => onCancel?.()}\n      onOk={async () => {\n        try {\n          await form.current?.formApi.validate();\n          setLoading(true);\n          const params = form.current?.formApi.getValues();\n          await onConfirm?.(params?.spaceId ?? '', params?.name);\n        } catch {\n          // If the review fails, you will go to this logic, and a custom exception will be reported at the calling interface.\n          setLoading(false);\n        }\n      }}\n      okButtonProps={{ loading }}\n    >\n      <div>\n        {pageFrom === BotPageFromEnum.Store && hasWorkflow ? (\n          <Banner\n            fullMode={false}\n            type=\"warning\"\n            description={I18n.t('mkpl_bot_duplicate_tips')}\n            icon={<IconWarningInfo />}\n            closeIcon={null}\n          />\n        ) : null}\n\n        <Form ref={form}>\n          {botName ? (\n            <InputWithCountField\n              initValue={`${getBotName()}${copyAddonAfter}`}\n              field=\"name\"\n              label={I18n.t('bot_create_name')}\n              noErrorMessage\n              maxLength={maxBotNameLength}\n              rules={[\n                { required: true },\n                {\n                  validator: (_rule, value) => value?.trim() !== '',\n                },\n              ]}\n              placeholder={I18n.t('bot_create_name_placeholder')}\n              getValueLength={reactText => {\n                if (typeof reactText === 'number') {\n                  return reactText.toString().length;\n                }\n                return botInputLengthService.getValueLength(reactText);\n              }}\n            />\n          ) : null}\n          <UIFormSelect\n            label={I18n.t('duplicate_select_workspace')}\n            noLabel={botName ? false : true}\n            field=\"spaceId\"\n            placeholder={I18n.t('select_team')}\n            noErrorMessage\n            className={classNames(s.select)}\n            rules={[{ required: true }]}\n            renderSelectedItem={(optionNode: BotSpace) =>\n              optionNode.id ? (\n                <div style={{ display: 'flex', alignItems: 'center' }}>\n                  <Avatar\n                    src={optionNode.icon_url}\n                    size=\"extra-extra-small\"\n                    style={{ flexShrink: 0 }}\n                  >\n                    {optionNode.name}\n                  </Avatar>\n                  <span className={classNames(s['select-name'])}>\n                    {optionNode.name}\n                  </span>\n                </div>\n              ) : null\n            }\n          >\n            {list\n              ?.filter(t => !t.hide_operation)\n              ?.map(item => (\n                <UIFormSelect.Option value={item.id} {...item} key={item.id}>\n                  {item.icon_url ? (\n                    <Avatar size=\"extra-small\" src={item.icon_url} />\n                  ) : (\n                    <IconTeamDefault\n                      className={classNames(s['select-item-icon'])}\n                    />\n                  )}\n                  <div className={classNames(s['select-item-name'])}>\n                    {item.name}\n                  </div>\n                  {item.space_type === SpaceType.Team && (\n                    <UITag color=\"violet\">{I18n.t('develop_team_team')}</UITag>\n                  )}\n                </UIFormSelect.Option>\n              ))}\n          </UIFormSelect>\n        </Form>\n      </div>\n    </UIModal>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC, useState } from 'react';\n\nimport { useShallow } from 'zustand/react/shallow';\nimport { useRequest } from 'ahooks';\nimport { usePageRuntimeStore } from '@coze-studio/bot-detail-store/page-runtime';\nimport { useBotInfoStore } from '@coze-studio/bot-detail-store/bot-info';\nimport {\n  REPORT_EVENTS as ReportEventNames,\n  createReportEvent,\n} from '@coze-arch/report-events';\nimport { I18n } from '@coze-arch/i18n';\nimport { Button } from '@coze-arch/coze-design';\nimport { openNewWindow, getParamsFromQuery } from '@coze-arch/bot-utils';\nimport { BotPageFromEnum } from '@coze-arch/bot-typings/common';\nimport { EVENT_NAMES, sendTeaEvent } from '@coze-arch/bot-tea';\nimport { useSpaceList, useSpaceStore } from '@coze-arch/bot-studio-store';\nimport { SpaceApi } from '@coze-arch/bot-space-api';\nimport { type Size } from '@coze-arch/bot-semi/Button';\nimport { UIButton, Toast } from '@coze-arch/bot-semi';\nimport { CustomError } from '@coze-arch/bot-error';\nimport {\n  ProductEntityType,\n  type ProductMetaInfo,\n} from '@coze-arch/bot-api/product_api';\nimport { DeveloperApi, PlaygroundApi, ProductApi } from '@coze-arch/bot-api';\n\nimport { SelectSpaceModal } from '../select-space-modal';\n\nconst botDuplicateEvent = createReportEvent({\n  eventName: ReportEventNames.botDuplicate,\n});\n\ninterface DuplicateBotProps {\n  storeCategory?: ProductMetaInfo['category'];\n  botName?: string;\n  botID?: string;\n  isDisabled?: boolean;\n  btnTxt?: string;\n  pageFrom?: BotPageFromEnum;\n  version?: string;\n  buttonSize?: Size;\n  enableCozeDesign?: boolean;\n  /**\n   * CozeDesign only takes effect in the case of\n   */\n  isBlock?: boolean;\n  eventCallbacks?: Partial<{\n    clickButton: () => void;\n    duplicateFinished: ({ newBotId }: { newBotId: string }) => void;\n  }>;\n}\n\n// eslint-disable-next-line -- Needs to be refactored\nexport const DuplicateBot: FC<DuplicateBotProps> = ({\n  storeCategory,\n  botName,\n  botID,\n  isDisabled,\n  btnTxt,\n  pageFrom,\n  version,\n  buttonSize,\n  enableCozeDesign,\n  isBlock,\n  eventCallbacks,\n}) => {\n  const {\n    space: { hide_operation, id: spaceID },\n    getPersonalSpaceID,\n  } = useSpaceStore();\n  const { spaces: list = [] } = useSpaceList();\n\n  const { pageFromFromStore } = usePageRuntimeStore(\n    useShallow(state => ({\n      pageFromFromStore: state.pageFrom,\n    })),\n  );\n  const { botIdFromStore, botNameFromStore } = useBotInfoStore(\n    useShallow(state => ({\n      botIdFromStore: state.botId,\n      botNameFromStore: state.name,\n    })),\n  );\n  const [showSpaceModal, setShowSpaceModal] = useState(false);\n\n  const { runAsync: copyAndOpenBot } = useRequest(\n    // eslint-disable-next-line complexity\n    async (targetSpaceId?: string, name?: string): Promise<string> => {\n      botDuplicateEvent.start();\n\n      let resp: {\n        code?: string | number;\n        msg?: string;\n        data?: { bot_id?: string };\n      };\n      if (\n        (pageFrom === BotPageFromEnum.Store ||\n          pageFrom === BotPageFromEnum.Template) &&\n        botID &&\n        version &&\n        targetSpaceId\n      ) {\n        if (pageFrom === BotPageFromEnum.Template) {\n          const {\n            code,\n            message,\n            data: { new_entity_id: newBotId } = {},\n          } = await ProductApi.PublicDuplicateProduct({\n            product_id: botID,\n            entity_type: ProductEntityType.BotTemplate,\n            space_id: targetSpaceId,\n            name: name ?? '',\n          });\n          resp = {\n            code,\n            msg: message,\n            data: {\n              bot_id: newBotId,\n            },\n          };\n        } else {\n          resp = await PlaygroundApi.DuplicateBotVersionToSpace({\n            bot_id: botID,\n            version,\n            target_space_id: targetSpaceId,\n            name: name ?? '',\n          });\n        }\n\n        //Copy complete, close the space pop-up window\n        setShowSpaceModal(false);\n      } else if (pageFromFromStore === BotPageFromEnum.Explore) {\n        //When exploring, it can be copied to a certain space\n        resp = await DeveloperApi.DuplicateBotToSpace({\n          draft_bot_id: botIdFromStore,\n          target_space_id: targetSpaceId || '',\n          name,\n        });\n\n        //Copy complete, close the space pop-up window\n        setShowSpaceModal(false);\n      } else {\n        resp = await SpaceApi.DuplicateDraftBot({\n          bot_id: botIdFromStore,\n        });\n      }\n\n      eventCallbacks?.duplicateFinished?.({\n        newBotId: resp.data?.bot_id ?? '',\n      });\n\n      const botTeaparams = {\n        bot_type:\n          pageFromFromStore === BotPageFromEnum.Explore ||\n          pageFromFromStore === BotPageFromEnum.Store\n            ? 'store_bot'\n            : 'team_bot',\n        bot_id: botID ?? botIdFromStore,\n        workspace_type:\n          pageFromFromStore === BotPageFromEnum.Store\n            ? 'store_workspace'\n            : getPersonalSpaceID() === targetSpaceId\n            ? 'personal_workspace'\n            : 'team_workspace',\n        bot_name: botName ?? botNameFromStore ?? '',\n      };\n      if (resp.code === 0) {\n        sendTeaEvent(EVENT_NAMES.bot_duplicate_result, {\n          ...botTeaparams,\n          result: 'success',\n        });\n      } else {\n        sendTeaEvent(EVENT_NAMES.bot_duplicate_result, {\n          ...botTeaparams,\n          result: 'failed',\n          error_code: resp.code,\n          error_message: resp.msg,\n        });\n      }\n\n      const respData = resp.data;\n\n      if (!respData) {\n        throw new CustomError(\n          ReportEventNames.botDuplicate,\n          I18n.t('bot_copy_info_error'),\n        );\n      }\n      const { bot_id: botId } = respData;\n      if (!botID && !botIdFromStore) {\n        throw new CustomError(\n          ReportEventNames.botDuplicate,\n          I18n.t('bot_copy_id_error'),\n        );\n      }\n\n      const url = `${location.origin}/space/${\n        targetSpaceId || spaceID\n      }/bot/${botId}?from=copy`;\n\n      return url;\n    },\n    {\n      manual: true,\n      onSuccess: () => {\n        botDuplicateEvent.success();\n      },\n      onError: e => {\n        botDuplicateEvent.error({ error: e, reason: e.message });\n        setShowSpaceModal(false);\n      },\n    },\n  );\n\n  const beforeCopyClick = () => {\n    eventCallbacks?.clickButton?.();\n    sendTeaEvent(EVENT_NAMES.bot_duplicate_click, {\n      bot_type:\n        pageFromFromStore === BotPageFromEnum.Bot ? 'team_bot' : 'store_bot',\n    });\n\n    if (pageFrom === BotPageFromEnum.Store) {\n      sendTeaEvent(EVENT_NAMES.bot_duplicate_click_front, {\n        bot_type: 'store_bot',\n        bot_id: botID,\n        bot_name: botName,\n        category_id: storeCategory?.id,\n        category_name: storeCategory?.name,\n        source: 'bots_store',\n        from: getParamsFromQuery({ key: 'from' }),\n      });\n      setShowSpaceModal(true);\n    } else if (pageFromFromStore === BotPageFromEnum.Explore) {\n      sendTeaEvent(EVENT_NAMES.bot_duplicate_click_front, {\n        bot_type: 'store_bot',\n        bot_id: botNameFromStore,\n        bot_name: botNameFromStore,\n        source: 'explore_bot_detailpage',\n        from: 'explore_card',\n      });\n      sendTeaEvent(EVENT_NAMES.click_bot_duplicate, {\n        bot_id: botIdFromStore,\n        bot_name: botNameFromStore,\n        from: 'explore_card',\n        source: 'explore_bot_detailpage',\n      });\n      //Explore the page Source: Select copy space when team > 1, otherwise copy to personal space\n      if (list.length === 1) {\n        openNewWindow(() => copyAndOpenBot(list?.[0].id));\n      } else {\n        setShowSpaceModal(true);\n      }\n    } else if (pageFrom === BotPageFromEnum.Template) {\n      //Explore the page Source: Select copy space when team > 1, otherwise copy to personal space\n      if (list.length === 1) {\n        openNewWindow(() => copyAndOpenBot(list?.[0].id));\n      } else {\n        setShowSpaceModal(true);\n      }\n    } else {\n      sendTeaEvent(EVENT_NAMES.bot_duplicate_click_front, {\n        bot_type: 'team_bot',\n        bot_id: botIdFromStore,\n        bot_name: botNameFromStore,\n        source: 'bots_detailpage',\n        from: 'bots_card',\n      });\n      // Bot page source: If there is operation permission, directly copy it to the current space\n      if (hide_operation) {\n        Toast.warning('Bot in public space cannot duplicate');\n        return;\n      } else {\n        openNewWindow(copyAndOpenBot);\n      }\n    }\n  };\n\n  return (\n    <>\n      {enableCozeDesign ? (\n        <Button\n          type=\"primary\"\n          theme=\"solid\"\n          size={buttonSize}\n          onClick={beforeCopyClick}\n          disabled={isDisabled}\n          block={isBlock}\n        >\n          {btnTxt || I18n.t('duplicate')}\n        </Button>\n      ) : (\n        <UIButton\n          type=\"primary\"\n          theme=\"solid\"\n          size={buttonSize}\n          onClick={beforeCopyClick}\n          disabled={isDisabled}\n        >\n          {btnTxt || I18n.t('duplicate')}\n        </UIButton>\n      )}\n\n      {/* Select space pop-up */}\n      <SelectSpaceModal\n        botName={botName ?? botNameFromStore}\n        visible={showSpaceModal}\n        onCancel={() => {\n          setShowSpaceModal(false);\n        }}\n        onConfirm={(id, name) => {\n          sendTeaEvent(EVENT_NAMES.click_create_bot_confirm, {\n            click: 'success',\n            create_type: 'duplicate',\n            from: 'explore_card',\n            source: 'explore_bot_detailpage',\n          });\n          openNewWindow(() => copyAndOpenBot(id, name));\n        }}\n      />\n    </>\n  );\n};\n","\n      import API from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type PropsWithChildren, useRef, useCallback } from 'react';\n\nimport { get } from 'lodash-es';\nimport cls from 'classnames';\nimport { type PopoverProps } from '@coze-arch/bot-semi/Popover';\nimport { type ImageProps } from '@coze-arch/bot-semi/Image';\nimport { Popover, Image } from '@coze-arch/bot-semi';\nimport { IconGroupCardOutlined } from '@coze-arch/bot-icons';\n\nimport s from './index.module.less';\n\ninterface CardThumbnailPopoverProps extends PopoverProps {\n  title?: string;\n  url?: string;\n  className?: string;\n  imgProps?: ImageProps;\n}\n\nexport const CardThumbnailPopover: React.FC<\n  PropsWithChildren<CardThumbnailPopoverProps>\n> = ({ children, url, title = '', className, imgProps, ...props }) => {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const popoverRef = useRef<any>();\n\n  const onImageLoad = useCallback(() => {\n    const calcPosition = get(\n      popoverRef.current,\n      'tooltipRef.current.foundation.calcPosition',\n    );\n    if (typeof calcPosition === 'function') {\n      calcPosition?.();\n    }\n  }, []);\n\n  return (\n    <Popover\n      position=\"top\"\n      showArrow\n      ref={popoverRef}\n      content={\n        <div className={s['popover-content']}>\n          <div className={s['popover-card-title']}>{title}</div>\n          {url && (\n            <div className={s['popover-card-img']}>\n              <Image src={url} {...imgProps} onLoad={onImageLoad} />\n            </div>\n          )}\n        </div>\n      }\n      {...props}\n    >\n      {children || (\n        <IconGroupCardOutlined\n          className={cls(className, s['popover-card-icon'])}\n        />\n      )}\n    </Popover>\n  );\n};\n","\n      import API from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from 'classnames';\nimport { Space, Typography, Tooltip } from '@coze-arch/coze-design';\nimport { Image } from '@coze-arch/bot-semi';\n\nimport AvatarDefault from '../../assets/avatar_default.png';\n\nimport s from './index.module.less';\nconst { Text } = Typography;\ninterface AvatarNameProps {\n  avatar?: string;\n  username?: string;\n  name?: string;\n  label?: {\n    name?: string;\n    icon?: string;\n    href?: string;\n  };\n  theme?: 'default' | 'light' | 'white';\n  className?: string;\n  nameMaxWidth?: number;\n  size?: 'default' | 'large' | 'small';\n  renderCenterSlot?: React.ReactNode;\n}\n\nexport const AvatarSizeMap = {\n  small: 12,\n  default: 14,\n  large: 16,\n};\n\nexport const AvatarName = ({\n  avatar,\n  username,\n  name,\n  label,\n  theme,\n  className,\n  nameMaxWidth,\n  size = 'default',\n  renderCenterSlot = null,\n}: AvatarNameProps) => (\n  <Space\n    spacing={4}\n    className={classNames(\n      s.container,\n      theme && s[theme],\n      { [s.large]: size === 'large' },\n      className,\n    )}\n  >\n    <Image\n      width={AvatarSizeMap[size]}\n      height={AvatarSizeMap[size]}\n      src={avatar || AvatarDefault}\n      fallback={<img src={AvatarDefault} width={'100%'} height={'100%'} />}\n      preview={false}\n      className={s.avatar}\n    />\n    <Space spacing={2}>\n      <Text\n        className={classNames(s.txt, s.name)}\n        ellipsis={{ showTooltip: false, rows: 1 }}\n        style={\n          typeof nameMaxWidth === 'number' ? { maxWidth: nameMaxWidth } : {}\n        }\n      >\n        {name}\n      </Text>\n      {label?.icon ? (\n        <Tooltip\n          showArrow\n          content={label?.name}\n          position={'top'}\n          trigger={label?.name ? 'hover' : 'custom'}\n        >\n          <img\n            src={label?.icon}\n            className={s['label-icon']}\n            tabIndex={-1}\n            onMouseDown={event => {\n              if (label?.href) {\n                event?.preventDefault();\n                event?.stopPropagation();\n                window.open(label.href, '_blank');\n              }\n            }}\n          />\n        </Tooltip>\n      ) : null}\n    </Space>\n    {renderCenterSlot}\n    {username ? (\n      <Text\n        className={classNames(s.txt, s.username)}\n        ellipsis={{ showTooltip: false, rows: 1 }}\n      >\n        @{username}\n      </Text>\n    ) : null}\n  </Space>\n);\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst isMacOS = /(Macintosh|MacIntel|MacPPC|Mac68K|iPad)/.test(\n  navigator.userAgent,\n);\n\nexport const SHORTCUTS = {\n  CTRL: isMacOS ? '' : 'Ctrl',\n  SHIFT: isMacOS ? '' : '',\n  ALT: isMacOS ? '' : 'Alt',\n};\n","\n      import API from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { type ReactNode } from 'react';\n\nimport { I18n } from '@coze-arch/i18n';\nimport { getIsIPad } from '@coze-arch/bot-utils';\nimport { Divider, Typography, Tag } from '@coze-arch/bot-semi';\nimport { IconCloseNoCycle } from '@coze-arch/bot-icons';\n\nimport { SHORTCUTS } from './constants';\n\nimport s from './index.module.less';\n\ninterface ShortcutItemProps {\n  title: ReactNode;\n  children?: ReactNode;\n}\n\nfunction ShortcutItem({ title, children }: ShortcutItemProps) {\n  return (\n    <div className={s.item}>\n      <div className={s.itemTitle}>{title}</div>\n      <div className={s.itemContent}>{children}</div>\n    </div>\n  );\n}\n\nfunction DividerWithMargin() {\n  return <Divider style={{ margin: '12px 0' }} />;\n}\n\nfunction ShortcutTag({ children }: { children: ReactNode }) {\n  return (\n    <Tag\n      style={{\n        margin: '0 4px',\n        height: 24,\n        padding: '0 8px',\n        fontSize: 14,\n        backgroundColor: '#f0f0f5',\n      }}\n    >\n      {children}\n    </Tag>\n  );\n}\n\ninterface FlowShortcutsHelpProps {\n  closable?: boolean;\n  onClose?: () => void;\n  isAgentFlow?: boolean;\n}\n\nconst isIPad = getIsIPad();\n\nfunction FlowShortcutsHelp(props: FlowShortcutsHelpProps) {\n  const { closable = false, onClose, isAgentFlow = false } = props;\n  return (\n    <>\n      {closable ? (\n        <div className={s.close} onClick={() => onClose?.()}>\n          <IconCloseNoCycle />\n        </div>\n      ) : null}\n\n      <Typography.Title heading={5} style={{ marginBottom: 16 }}>\n        {I18n.t('flowcanvas_shortcuts_shortcuts')}\n      </Typography.Title>\n\n      <ShortcutItem title={I18n.t('flowcanvas_shortcuts_move_canvas')}>\n        <ShortcutTag>{I18n.t('flowcanvas_shortcuts_space')}</ShortcutTag>\n        <ShortcutTag>{I18n.t('flowcanvas_shortcuts_drag')}</ShortcutTag>\n      </ShortcutItem>\n\n      <DividerWithMargin />\n\n      <ShortcutItem\n        title={\n          <>\n            {I18n.t('flowcanvas_shortcuts_multiple_select')}/\n            {I18n.t('flowcanvas_shortcuts_multiple_deselect')}\n          </>\n        }\n      >\n        <ShortcutTag>\n          {SHORTCUTS.CTRL}/{SHORTCUTS.SHIFT}\n        </ShortcutTag>\n        <ShortcutTag>{I18n.t('flowcanvas_shortcuts_click')}</ShortcutTag>\n      </ShortcutItem>\n\n      <DividerWithMargin />\n\n      <ShortcutItem title={I18n.t('flowcanvas_shortcuts_zoom_in')}>\n        <ShortcutTag>{SHORTCUTS.CTRL}</ShortcutTag>\n        <ShortcutTag>+</ShortcutTag>\n        <span style={{ margin: '0 6px' }}>\n          {I18n.t('flowcanvas_shortcuts_or')}\n        </span>\n        <ShortcutTag>{SHORTCUTS.CTRL}</ShortcutTag>\n        <ShortcutTag>{I18n.t('flowcanvas_shortcuts_scroll')}</ShortcutTag>\n      </ShortcutItem>\n\n      <DividerWithMargin />\n\n      <ShortcutItem title={I18n.t('flowcanvas_shortcuts_zoom_out')}>\n        <ShortcutTag>{SHORTCUTS.CTRL}</ShortcutTag>\n        <ShortcutTag>-</ShortcutTag>\n        <span style={{ margin: '0 6px' }}>\n          {I18n.t('flowcanvas_shortcuts_or')}\n        </span>\n        <ShortcutTag>{SHORTCUTS.CTRL}</ShortcutTag>\n        <ShortcutTag>{I18n.t('flowcanvas_shortcuts_scroll')}</ShortcutTag>\n      </ShortcutItem>\n\n      <DividerWithMargin />\n\n      {isIPad || isAgentFlow ? null : (\n        <>\n          <ShortcutItem title={I18n.t('flowcanvas_shortcuts_duplicate')}>\n            <ShortcutTag>{SHORTCUTS.ALT}</ShortcutTag>\n            <ShortcutTag>{I18n.t('flowcanvas_shortcuts_drag')}</ShortcutTag>\n          </ShortcutItem>\n          <DividerWithMargin />\n        </>\n      )}\n\n      <ShortcutItem title={I18n.t('flowcanvas_shortcuts_copy')}>\n        <ShortcutTag>{SHORTCUTS.CTRL}</ShortcutTag>\n        <ShortcutTag>C</ShortcutTag>\n      </ShortcutItem>\n\n      <DividerWithMargin />\n\n      <ShortcutItem title={I18n.t('flowcanvas_shortcuts_paste')}>\n        <ShortcutTag>{SHORTCUTS.CTRL}</ShortcutTag>\n        <ShortcutTag>V</ShortcutTag>\n      </ShortcutItem>\n\n      <DividerWithMargin />\n\n      <UndoRedoShortcuts />\n\n      <ShortcutItem title={I18n.t('flowcanvas_shortcuts_delete')}>\n        <ShortcutTag>{I18n.t('flowcanvas_shortcuts_backspace')}</ShortcutTag>\n      </ShortcutItem>\n    </>\n  );\n}\n\nfunction UndoRedoShortcuts() {\n  return (\n    <>\n      <ShortcutItem title={I18n.t('workflow_detail_undo_tooltip')}>\n        <ShortcutTag>{SHORTCUTS.CTRL}</ShortcutTag>\n        <ShortcutTag>Z</ShortcutTag>\n      </ShortcutItem>\n\n      <DividerWithMargin />\n\n      <ShortcutItem title={I18n.t('workflow_detail_redo_tooltip')}>\n        <ShortcutTag>{SHORTCUTS.CTRL}</ShortcutTag>\n        <ShortcutTag>{SHORTCUTS.SHIFT}</ShortcutTag>\n        <ShortcutTag>Z</ShortcutTag>\n      </ShortcutItem>\n\n      <DividerWithMargin />\n    </>\n  );\n}\n\nexport { FlowShortcutsHelp };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type MouseEventHandler,\n  type FC,\n  useRef,\n  useCallback,\n  useState,\n} from 'react';\n\nimport classnames from 'classnames';\n\nimport s from './handle.module.less';\n\n// Currently only supports horizontal direction, expand it on demand.\nexport interface ResizableLayoutHandleProps {\n  className?: string;\n  hotZoneClassName?: string;\n  onMove: (offset: number) => void;\n  onMoveStart: () => void;\n  onMoveEnd: () => void;\n}\n\ninterface HandleState {\n  startX: number;\n  moving: boolean;\n}\n\nconst hotZoneStyle = classnames(\n  s['hot-zone'],\n  'flex items-stretch justify-center',\n  'cursor-col-resize',\n  'z-10',\n  'w-[8px] mx-[-3.5px]',\n  'bg-transparent',\n);\n\nconst handleStyle = classnames('transition-width duration-300 ease-in-out');\n\nexport const ResizableLayoutHandle: FC<ResizableLayoutHandleProps> = ({\n  className,\n  hotZoneClassName,\n  onMove,\n  onMoveStart,\n  onMoveEnd,\n}) => {\n  const [moving, setMoving] = useState(false);\n  const stateRef = useRef<HandleState>({\n    startX: 0,\n    moving: false,\n  });\n\n  const callbackRef = useRef({\n    onMove,\n    onMoveStart,\n    onMoveEnd,\n  });\n\n  callbackRef.current = {\n    onMove,\n    onMoveStart,\n    onMoveEnd,\n  };\n\n  const moveEnd = useCallback(() => {\n    setMoving(false);\n    stateRef.current = {\n      startX: 0,\n      moving: false,\n    };\n    offEvents();\n    callbackRef.current.onMoveEnd();\n  }, []);\n\n  const move = useCallback((e: PointerEvent) => {\n    if (stateRef.current.moving) {\n      callbackRef.current.onMove(e.clientX - stateRef.current.startX);\n    }\n  }, []);\n\n  const offEvents = () => {\n    window.removeEventListener('pointermove', move, false);\n    // Adapt to the situation of multi-touch on the mobile end\n    window.removeEventListener('pointerdown', moveEnd, false);\n    window.removeEventListener('pointerup', moveEnd, false);\n    window.removeEventListener('pointercancel', moveEnd, false);\n  };\n\n  const onMouseDown: MouseEventHandler<HTMLDivElement> = e => {\n    stateRef.current = {\n      moving: true,\n      startX: e.pageX,\n    };\n    setMoving(true);\n    callbackRef.current.onMoveStart();\n    window.addEventListener('pointermove', move, false);\n    // Adapt to the situation of multi-touch on the mobile end\n    window.addEventListener('pointerdown', moveEnd, false);\n    window.addEventListener('pointerup', moveEnd, false);\n    window.addEventListener('pointercancel', moveEnd, false);\n  };\n  //  TODO hover style & hotzone width needs to be aligned with UI\n  return (\n    <div\n      className={classnames(hotZoneStyle, hotZoneClassName)}\n      onMouseDown={onMouseDown}\n    >\n      <div\n        className={classnames(\n          className,\n          s.handle,\n          moving && s['handle-moving'],\n          handleStyle,\n        )}\n      />\n    </div>\n  );\n};\n\nResizableLayoutHandle.displayName = 'ResizableLayoutHandle';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Children,\n  type PropsWithChildren,\n  useRef,\n  type FC,\n  isValidElement,\n  cloneElement,\n  type ReactNode,\n  useState,\n} from 'react';\n\nimport { sum } from 'lodash-es';\nimport classnames from 'classnames';\nimport { useDebounceEffect, useSize } from 'ahooks';\n\nimport { type ResizableLayoutProps } from './types';\nimport { ResizableLayoutHandle } from './handle';\n\ninterface LayoutState {\n  moving: boolean;\n  itemWidth: number[];\n}\n\nconst getDefaultState = () => ({\n  moving: false,\n  itemWidth: [],\n});\n\nexport const ResizableLayout: FC<PropsWithChildren<ResizableLayoutProps>> = ({\n  className,\n  children,\n  handleClassName,\n  hotZoneClassName,\n}) => {\n  const [state, setState] = useState<LayoutState>(getDefaultState());\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const childRef = useRef<HTMLElement[]>([]);\n\n  const size = useSize(containerRef);\n\n  useDebounceEffect(\n    () => {\n      if (!size?.width) {\n        return;\n      }\n      const totalSize = sum(state.itemWidth);\n      // Exclude the case where no drag has been performed, and the last allocated width is not recorded in the local state at this time\n      if (totalSize <= 0) {\n        return;\n      }\n      const ratio = size.width / totalSize;\n      const newItemWidth = state.itemWidth.map(w => w * ratio);\n      childRef.current.forEach(\n        (item, index) => (item.style.width = `${newItemWidth[index]}px`),\n      );\n      setState({\n        ...state,\n        itemWidth: newItemWidth,\n      });\n    },\n    [size?.width],\n    {\n      wait: 20,\n      maxWait: 100,\n    },\n  );\n\n  return (\n    <div\n      className={classnames(\n        'flex w-full items-stretch',\n        className,\n        state.moving && 'cursor-col-resize select-none',\n      )}\n      ref={containerRef}\n    >\n      {Children.map(children, (child, index) => {\n        let node: ReactNode;\n        if (isValidElement(child)) {\n          node = cloneElement(\n            child,\n            Object.assign({}, child.props, {\n              ref: (target: React.ReactNode) => {\n                if (target instanceof HTMLElement) {\n                  childRef.current[index] = target;\n                } else {\n                  if (!IS_PROD && target) {\n                    throw Error(\n                      'children of ResizableLayout need a ref of HTMLElement',\n                    );\n                  }\n                }\n                // @ts-expect-error -- skip type gymnastics\n                const { ref } = child;\n                if (typeof ref === 'function') {\n                  ref(target);\n                } else if (ref && typeof ref === 'object') {\n                  ref.current = target;\n                }\n              },\n            }),\n          );\n        } else {\n          node = (\n            <div\n              ref={elm => {\n                if (elm) {\n                  childRef.current[index] = elm;\n                }\n              }}\n            >\n              {child}\n            </div>\n          );\n        }\n        return (\n          <>\n            {index > 0 && (\n              <ResizableLayoutHandle\n                className={handleClassName}\n                hotZoneClassName={hotZoneClassName}\n                onMoveStart={() => {\n                  setState({\n                    moving: true,\n                    itemWidth: childRef.current.map(\n                      item => item.clientWidth ?? 0,\n                    ),\n                  });\n                }}\n                // Offset from the initial position\n                onMove={offset => {\n                  const pre = index - 1;\n                  childRef.current[pre].style.width = `${\n                    state.itemWidth[pre] + offset\n                  }px`;\n                  childRef.current[index].style.width = `${\n                    state.itemWidth[index] - offset\n                  }px`;\n                }}\n                onMoveEnd={() => {\n                  setState({\n                    // After dragging, record the true width\n                    itemWidth: childRef.current.map(\n                      item => item.clientWidth ?? 0,\n                    ),\n                    moving: false,\n                  });\n                }}\n              />\n            )}\n            {node}\n          </>\n        );\n      })}\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, useMemo, useRef, useState } from 'react';\n\nimport { nanoid } from 'nanoid';\nimport { isInteger, isUndefined } from 'lodash-es';\nimport classNames from 'classnames';\nimport { useHover } from 'ahooks';\nimport { InputNumber } from '@coze-arch/coze-design';\nimport { type SliderProps } from '@coze-arch/bot-semi/Slider';\nimport { Slider } from '@coze-arch/bot-semi';\n\nimport styles from './index.module.less';\n\nexport interface InputSliderProps {\n  value?: number;\n  onChange?: (v: number) => void;\n  max?: number;\n  min?: number;\n  step?: number;\n  disabled?: boolean;\n  decimalPlaces?: number;\n  marks?: SliderProps['marks'];\n  className?: string;\n}\nconst POWVAL = 10;\nconst formateDecimalPlacesString = (\n  value: string | number,\n  prevValue?: number,\n  decimalPlaces?: number,\n) => {\n  if (isUndefined(decimalPlaces)) {\n    return value.toString();\n  }\n  const numberValue = Number(value);\n  const stringValue = value.toString();\n  if (Number.isNaN(numberValue)) {\n    return `${value}`;\n  }\n  if (decimalPlaces === 0 && !isInteger(Number(value)) && prevValue) {\n    return `${prevValue}`;\n  }\n  const decimalPointIndex = stringValue.indexOf('.');\n\n  if (decimalPointIndex < 0) {\n    return stringValue;\n  }\n  const formattedValue = stringValue.substring(\n    0,\n    decimalPointIndex + 1 + decimalPlaces,\n  );\n\n  if (formattedValue.endsWith('.') && decimalPlaces === 0) {\n    return formattedValue.substring(0, formattedValue.length - 1);\n  }\n  return formattedValue;\n};\n\nconst formateDecimalPlacesNumber = (\n  value: number,\n  prevValue?: number,\n  decimalPlaces?: number,\n) => {\n  if (isUndefined(decimalPlaces)) {\n    return value;\n  }\n  if (decimalPlaces === 0 && !isInteger(value) && prevValue) {\n    return prevValue;\n  }\n  const pow = Math.pow(POWVAL, decimalPlaces);\n  return Math.round(value * pow) / pow;\n};\n\nexport const InputSlider: React.FC<InputSliderProps> = ({\n  value,\n  onChange,\n  max = 1,\n  min = 0,\n  step = 1,\n  disabled,\n  decimalPlaces = 0,\n  className,\n}) => {\n  const ref = useRef<HTMLDivElement>(null);\n  const hover = useHover(ref);\n  const sliderRenderId = useMemo(() => nanoid(), [max, min, hover]);\n  const [isFocus, setFocus] = useState(false);\n  const [inputRenderId, setInputRenderId] = useState(nanoid());\n  const updateInputNumber = () => {\n    if (isFocus) {\n      return;\n    }\n    setInputRenderId(nanoid());\n  };\n  const onNumberChange = (numberValue: number) => {\n    updateInputNumber();\n\n    // Prevent -0\n    if (numberValue === 0) {\n      onChange?.(0);\n      return;\n    }\n\n    const expectedFormattedValue = formateDecimalPlacesNumber(\n      numberValue,\n      value,\n      decimalPlaces,\n    );\n\n    onChange?.(expectedFormattedValue);\n  };\n\n  // Prevent -0 from causing InputNumber to update indefinitely\n  const fixedValue = Object.is(value, -0) ? 0 : value;\n\n  useEffect(() => {\n    updateInputNumber();\n  }, [isFocus]);\n\n  return (\n    <div ref={ref} className={classNames(styles['input-slider'], className)}>\n      <Slider\n        key={sliderRenderId}\n        className={styles.slider}\n        disabled={disabled}\n        value={fixedValue}\n        max={max}\n        min={min}\n        step={step}\n        showBoundary\n        onChange={v => {\n          if (typeof v === 'number') {\n            onChange?.(v);\n          }\n        }}\n      />\n      <InputNumber\n        onFocus={() => setFocus(true)}\n        onBlur={() => setFocus(false)}\n        key={inputRenderId}\n        className={styles['input-number']}\n        value={fixedValue}\n        disabled={disabled}\n        formatter={inputValue => formateDecimalPlacesString(inputValue, value)}\n        onNumberChange={onNumberChange}\n        max={max}\n        min={min}\n        step={step}\n      />\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, {\n  useRef,\n  type ClassAttributes,\n  type HTMLAttributes,\n  useEffect,\n} from 'react';\n\nimport { useInViewport } from 'ahooks';\nimport {\n  sendTeaEvent,\n  type EVENT_NAMES,\n  type ParamsTypeDefine,\n} from '@coze-arch/bot-tea';\n\n/** Subsequent consideration of generalized packaging, adding parameters such as delay time and exposure ratio */\ntype TeaExposureProps<TEventName extends EVENT_NAMES> = {\n  /**\n   * Is it only reported once?\n   * @default false\n   * @Todo has the spare time to reconsider compatibility with virtual scrolling\n   */\n  once?: boolean;\n  teaEvent: {\n    name: TEventName;\n    params: ParamsTypeDefine[TEventName];\n  };\n} & ClassAttributes<HTMLDivElement> &\n  HTMLAttributes<HTMLDivElement>;\n\n/**\n * Exposure event tracking report component\n * It can be used as a normal div (e.g. configuration style).\n *\n * The meaning of encapsulation: avoid component rerendering\n *\n * useInViewport causes the component to rerender frequently, even if you don't use its return value. As long as this hook is called, rerender will be triggered with its internal setState.\n * And we all know that for the following code, A rerender will trigger the rerender of B and C, while B rerender will not trigger the rerender of A and C.\n * ```\n * const A = () => <B><C /></B>\n * ```\n */\nexport function TeaExposure<TEventName extends EVENT_NAMES>({\n  once,\n  teaEvent,\n  children,\n  ...divParams\n}: TeaExposureProps<TEventName>) {\n  const divRef = useRef<HTMLDivElement>(null);\n  const [inViewport] = useInViewport(() => divRef.current);\n  const reportedRef = useRef(false);\n\n  useEffect(() => {\n    if (!inViewport) {\n      return;\n    }\n    if (once && reportedRef.current) {\n      return;\n    }\n    sendTeaEvent(teaEvent.name, teaEvent.params);\n    reportedRef.current = true;\n  }, [inViewport]);\n\n  return (\n    <div {...divParams} ref={divRef}>\n      {children}\n    </div>\n  );\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { forwardRef, useEffect } from 'react';\n\nimport { useShallow } from 'zustand/react/shallow';\nimport { I18n } from '@coze-arch/i18n';\nimport { IconCozTeamFill } from '@coze-arch/coze-design/icons';\nimport {\n  Avatar,\n  type CommonFieldProps,\n  Select,\n  type SelectProps,\n  type SemiSelect,\n  Tag,\n  Typography,\n  withField,\n} from '@coze-arch/coze-design';\nimport { type BotSpace, SpaceType } from '@coze-arch/bot-api/developer_api';\nimport { useSpaceStore, useRefreshSpaces } from '@coze-foundation/space-store';\n\nconst { Text } = Typography;\n\nexport const BaseSpaceFormSelect = withField(\n  forwardRef<SemiSelect, Omit<SelectProps, 'renderSelectedItem'>>(\n    (props, ref) => {\n      useRefreshSpaces();\n      const { currentOptionalSpace, list } = useSpaceStore(\n        useShallow(state => {\n          const { space, spaceList } = state;\n          return {\n            currentOptionalSpace: !space.hide_operation ? space : undefined,\n            list: spaceList,\n          };\n        }),\n      );\n\n      const operationalSpaceList = list.filter(t => !t.hide_operation);\n\n      const fixedInitValue =\n        currentOptionalSpace?.id || operationalSpaceList.at(0)?.id;\n\n      useEffect(() => {\n        if (!fixedInitValue) {\n          return;\n        }\n\n        // The form onChange event needs to be triggered, otherwise the upper layer will not respond to the data change event.\n        props.onChange?.(fixedInitValue);\n      }, [fixedInitValue]);\n\n      return (\n        <Select\n          {...props}\n          ref={ref}\n          renderSelectedItem={(optionNode: BotSpace) => (\n            <div style={{ display: 'flex', alignItems: 'center' }}>\n              <Avatar\n                src={optionNode.icon_url}\n                size=\"extra-extra-small\"\n                style={{ flexShrink: 0 }}\n              >\n                {optionNode.name}\n              </Avatar>\n              <span className=\"ml-[6px] font-semibold\">{optionNode.name}</span>\n            </div>\n          )}\n        >\n          {operationalSpaceList.map(item => (\n            <Select.Option value={item.id} {...item} key={item.id}>\n              {item.icon_url ? (\n                <Avatar size=\"extra-small\" src={item.icon_url} />\n              ) : (\n                <IconCozTeamFill />\n              )}\n              <div className=\"ml-[12px] mr-16px font-semibold\">\n                <Text\n                  ellipsis={{\n                    showTooltip: false,\n                  }}\n                  style={{\n                    maxWidth: '340px',\n                  }}\n                >\n                  {item.name}\n                </Text>\n              </div>\n              {item.space_type === SpaceType.Team && (\n                <Tag color=\"brand\">{I18n.t('develop_team_team')}</Tag>\n              )}\n            </Select.Option>\n          ))}\n        </Select>\n      );\n    },\n  ),\n);\n\nexport const SpaceFormSelect = forwardRef<\n  SemiSelect,\n  Omit<\n    SelectProps & CommonFieldProps,\n    | 'className'\n    | 'label'\n    | 'initValue'\n    | 'placeholder'\n    | 'noErrorMessage'\n    | 'rules'\n    | 'renderSelectedItem'\n  >\n>((props, ref) => (\n  <BaseSpaceFormSelect\n    {...props}\n    ref={ref}\n    className=\"w-full\"\n    label={I18n.t('duplicate_select_workspace')}\n    placeholder={I18n.t('select_team')}\n    noErrorMessage\n    rules={[{ required: true }]}\n  />\n));\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { I18n } from '@coze-arch/i18n';\n\nexport const appendCopySuffix = (name: string) =>\n  `${name}(${I18n.t('duplicate_rename_copy')})`;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useRef, useState } from 'react';\n\nimport { useRequest } from 'ahooks';\nimport { I18n } from '@coze-arch/i18n';\nimport { extractTemplateActionCommonParams } from '@coze-arch/bot-tea/utils';\nimport {\n  EVENT_NAMES,\n  type ParamsTypeDefine,\n  sendTeaEvent,\n} from '@coze-arch/bot-tea';\nimport {\n  ProductEntityType,\n  type ProductInfo,\n} from '@coze-arch/bot-api/product_api';\nimport { ProductApi } from '@coze-arch/bot-api';\nimport { botInputLengthService } from '@coze-agent-ide/bot-input-length-limit';\nimport {\n  type BaseFormProps,\n  Form,\n  FormInput,\n  Modal,\n  type ModalProps,\n  type FormApi,\n} from '@coze-arch/coze-design';\n\nimport { SpaceFormSelect } from '../space-form-select';\nimport { appendCopySuffix } from './utils';\n\nexport interface ProjectTemplateCopyValue {\n  productId: string;\n  name: string;\n  spaceId?: string;\n}\n\nconst filedKeyMap: Record<\n  keyof ProjectTemplateCopyValue,\n  keyof ProjectTemplateCopyValue\n> = {\n  name: 'name',\n  spaceId: 'spaceId',\n  productId: 'productId',\n} as const;\n\ninterface ProjectTemplateCopyModalProps\n  extends Omit<ModalProps, 'size' | 'okText' | 'cancelText'> {\n  isSelectSpace: boolean;\n  formProps: BaseFormProps<ProjectTemplateCopyValue>;\n}\n\nexport const ProjectTemplateCopyModal: React.FC<\n  ProjectTemplateCopyModalProps\n> = ({ isSelectSpace, formProps, ...modalProps }) => (\n  <Modal\n    size=\"default\"\n    okText={I18n.t('Confirm')}\n    cancelText={I18n.t('Cancel')}\n    {...modalProps}\n  >\n    <Form<ProjectTemplateCopyValue> {...formProps}>\n      <FormInput\n        label={I18n.t('creat_project_project_name')}\n        rules={[{ required: true }]}\n        field={filedKeyMap.name}\n        maxLength={botInputLengthService.getInputLengthLimit('projectName')}\n        getValueLength={botInputLengthService.getValueLength}\n        noErrorMessage\n      />\n      {isSelectSpace ? <SpaceFormSelect field={filedKeyMap.spaceId} /> : null}\n    </Form>\n  </Modal>\n);\n\nexport type ProjectTemplateCopySuccessCallback = (param: {\n  originProductId: string;\n  newEntityId: string;\n  spaceId: string;\n}) => void;\n\nexport const useProjectTemplateCopyModal = (props: {\n  modalTitle: string;\n  /** Do you need to choose space? */\n  isSelectSpace: boolean;\n  onSuccess?: ProjectTemplateCopySuccessCallback;\n  /** Event tracking parameters - current page/source */\n  source: NonNullable<\n    ParamsTypeDefine[EVENT_NAMES.template_action_front]['source']\n  >;\n}) => {\n  const [visible, setVisible] = useState(false);\n  const [initValues, setInitValues] = useState<ProjectTemplateCopyValue>();\n  const [sourceProduct, setSourceProduct] = useState<ProductInfo>();\n  const [isFormValid, setIsFormValid] = useState(true);\n  const formApi = useRef<FormApi<ProjectTemplateCopyValue>>();\n\n  const onModalClose = () => {\n    setVisible(false);\n    setInitValues(undefined);\n    formApi.current = undefined;\n    setIsFormValid(true);\n  };\n\n  const { run, loading } = useRequest(\n    async (copyRequestParam: ProjectTemplateCopyValue | undefined) => {\n      if (!copyRequestParam) {\n        throw new Error('duplicate project template values not provided');\n      }\n      const { productId, spaceId, name } = copyRequestParam;\n      return ProductApi.PublicDuplicateProduct({\n        product_id: productId,\n        space_id: spaceId,\n        name,\n        entity_type: ProductEntityType.ProjectTemplate,\n      });\n    },\n    {\n      manual: true,\n      onSuccess: (data, [inputParam]) => {\n        onModalClose();\n        sendTeaEvent(EVENT_NAMES.template_action_front, {\n          action: 'duplicate',\n          after_id: data.data?.new_entity_id,\n          source: props.source,\n          ...extractTemplateActionCommonParams(sourceProduct),\n        });\n        props?.onSuccess?.({\n          originProductId: inputParam?.productId ?? '',\n          newEntityId: data.data?.new_entity_id ?? '',\n          spaceId: inputParam?.spaceId ?? '',\n        });\n      },\n    },\n  );\n\n  return {\n    modalContextHolder: (\n      <ProjectTemplateCopyModal\n        title={props.modalTitle}\n        isSelectSpace={props.isSelectSpace}\n        visible={visible}\n        okButtonProps={{\n          disabled: !isFormValid,\n          loading,\n        }}\n        onOk={async () => {\n          const val = await formApi.current?.validate();\n          if (val) {\n            run(val);\n          }\n        }}\n        onCancel={onModalClose}\n        formProps={{\n          initValues,\n          onValueChange: val => {\n            // When the user removes all characters in input, val.name field disappears instead of empty string\n            setIsFormValid(!!val.name?.trim());\n          },\n          getFormApi: api => {\n            formApi.current = api;\n          },\n        }}\n      />\n    ),\n    copyProject: ({\n      initValue,\n      sourceProduct: inputSourceProduct,\n    }: {\n      initValue: ProjectTemplateCopyValue;\n      /** Used to extract event tracking parameters */\n      sourceProduct: ProductInfo;\n    }) => {\n      setInitValues({\n        ...initValue,\n        name: botInputLengthService.sliceStringByMaxLength({\n          value: appendCopySuffix(initValue.name),\n          field: 'projectName',\n        }),\n      });\n      setSourceProduct(inputSourceProduct);\n      setVisible(true);\n      setIsFormValid(!!initValue?.name?.trim());\n    },\n  };\n};\n\nexport { appendCopySuffix };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type MutableRefObject, useEffect, useState, Fragment } from 'react';\n\nimport { useBotInfoStore } from '@coze-studio/bot-detail-store/bot-info'; // Keep if botId is needed directly\nimport {\n  PictureUpload,\n  type UploadValue,\n} from '@coze-common/biz-components/picture-upload';\nimport { I18n } from '@coze-arch/i18n';\nimport { Modal } from '@coze-arch/coze-design';\nimport { useSpaceStore } from '@coze-arch/bot-studio-store';\nimport {\n  FileBizType,\n  IconType,\n  type DraftBot,\n} from '@coze-arch/bot-api/developer_api';\nimport {\n  useAgentPersistence,\n  useAgentFormManagement,\n  AgentInfoForm,\n} from '@coze-agent-ide/space-bot/hook';\nexport interface CreateAgentEntityProps {\n  onBefore?: () => void;\n  onError?: () => void;\n  /** Return Promise only if you need the onSuccess callback to block the pop-up window from closing automatically. */\n  onSuccess?: (\n    botId?: string,\n    spaceId?: string,\n    extra?: {\n      botName?: string;\n      botAvatar?: string;\n      botDesc?: string;\n    },\n  ) => void | Promise<void>;\n  botInfoRef?: MutableRefObject<DraftBot | undefined>;\n  mode: 'update' | 'add';\n  showSpace?: boolean;\n  /**\n   * Pass this parameter when you need to control externally which space to create the bot in\n   * Only suitable for creating\n   */\n  spaceId?: string;\n  /**\n   * Navigation bar\n   * Button in the upper right corner of the space workspace\n   * */\n  bizCreateFrom?: 'navi' | 'space';\n}\n\nconst getPictureUploadInitValue = (\n  botInfo?: Partial<DraftBot>,\n): UploadValue | undefined => {\n  if (!botInfo?.icon_url) {\n    return;\n  }\n  return [\n    {\n      url: botInfo.icon_url || '',\n      uid: botInfo.icon_uri || '',\n    },\n  ];\n};\n\nexport const useCreateOrUpdateAgent = ({\n  botInfoRef,\n  onBefore,\n  onSuccess,\n  onError,\n  mode,\n  showSpace = false, // Not displayed by default\n  spaceId: outerSpaceId,\n  bizCreateFrom,\n}: CreateAgentEntityProps) => {\n  const [visible, setVisible] = useState(false);\n\n  const botId = useBotInfoStore(state => state.botId);\n  const {\n    space: { id: spaceId, hide_operation },\n    spaces: { bot_space_list: list },\n  } = useSpaceStore();\n\n  const {\n    formRef,\n    isOkButtonDisable,\n    checkErr,\n    errMsg,\n    confirmDisabled,\n    setCheckErr,\n    setErrMsg,\n    handleFormValuesChange,\n    getValues,\n    resetFormState,\n  } = useAgentFormManagement({ initialBotInfo: botInfoRef?.current });\n\n  const {\n    loading: persistenceLoading,\n    handleCreateBot,\n    handleUpdateBot,\n  } = useAgentPersistence({\n    mode,\n    botId,\n    currentSpaceId: spaceId,\n    outerSpaceId,\n    getValues,\n    onSuccess,\n    onError,\n    onBefore,\n    setVisible,\n    setCheckErr,\n    setErrMsg,\n    bizCreateFrom,\n    showSpace,\n  });\n\n  useEffect(() => {\n    if (visible) {\n      useSpaceStore\n        .getState()\n        .fetchSpaces()\n        .then(res => {\n          if (!formRef.current?.formApi?.getValues()?.spaceId) {\n            formRef.current?.formApi?.setValue(\n              'spaceId',\n              hide_operation\n                ? res?.bot_space_list?.[0].id\n                : spaceId ?? res?.bot_space_list?.[0].id,\n            );\n          }\n        });\n    }\n    if (visible) {\n      resetFormState();\n    }\n  }, [visible]);\n\n  /**\n   * @Param _ open source version does not support this parameter\n   */\n  const startEdit = (_?: boolean) => {\n    setVisible(true);\n  };\n\n  const formInitialValues = botInfoRef?.current || {};\n  return {\n    startEdit,\n    modal: (\n      <Fragment>\n        <Modal\n          data-testid=\"bot.ide.bot_creator.create_bot_modal\"\n          visible={visible}\n          maskClosable={false}\n          onCancel={() => {\n            setVisible(false);\n          }}\n          title={\n            mode === 'add'\n              ? I18n.t('bot_list_create')\n              : I18n.t('bot_edit_title')\n          }\n          okText={I18n.t('Confirm')}\n          cancelText={I18n.t('Cancel')}\n          okButtonProps={{\n            disabled: isOkButtonDisable || confirmDisabled,\n            loading: persistenceLoading,\n          }}\n          footer={null}\n          keepDOM={false}\n          icon={null}\n          onOk={() => {\n            mode === 'add' ? handleCreateBot() : handleUpdateBot();\n          }}\n        >\n          <AgentInfoForm\n            ref={formRef}\n            mode={mode}\n            showSpace={showSpace}\n            initialValues={formInitialValues}\n            spacesList={list || []}\n            currentSpaceId={outerSpaceId || spaceId}\n            hideOperation={hide_operation}\n            checkErr={checkErr}\n            errMsg={errMsg}\n            onValuesChange={handleFormValuesChange}\n            slot={\n              <PictureUpload\n                accept=\".jpeg,.jpg,.png,.gif\"\n                label={I18n.t('bot_edit_profile_pircture')}\n                field=\"bot_uri\"\n                initValue={getPictureUploadInitValue(formInitialValues)}\n                rules={[{ required: true }]}\n                fileBizType={FileBizType.BIZ_BOT_ICON}\n                iconType={IconType.Bot}\n              />\n            }\n          />\n        </Modal>\n      </Fragment>\n    ),\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useRef } from 'react';\n\nimport { type DraftBot } from '@coze-arch/bot-api/developer_api';\n\nimport {\n  type CreateAgentEntityProps,\n  useCreateOrUpdateAgent,\n} from './use-create-or-update-agent';\n\nexport const useCreateAgent = ({\n  spaceId,\n  onSuccess,\n  showSpace,\n  onBefore,\n  onError,\n  bizCreateFrom,\n}: Omit<CreateAgentEntityProps, 'mode' | 'botInfoRef'>) => {\n  const botInfoRef = useRef<DraftBot>({ visibility: 0 });\n  return useCreateOrUpdateAgent({\n    spaceId,\n    botInfoRef,\n    onBefore,\n    onSuccess,\n    onError,\n    mode: 'add',\n    showSpace,\n    bizCreateFrom,\n  });\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type MutableRefObject } from 'react';\n\nimport { type DraftBot } from '@coze-arch/bot-api/developer_api';\n\nimport { useCreateOrUpdateAgent } from './use-create-or-update-agent';\n\nexport const useUpdateAgent = ({\n  botInfoRef,\n  onSuccess,\n}: {\n  botInfoRef?: MutableRefObject<DraftBot | undefined>;\n  onSuccess?: (\n    botId?: string,\n    spaceId?: string,\n    extra?: {\n      botName?: string;\n      botAvatar?: string;\n    },\n  ) => void;\n}) =>\n  useCreateOrUpdateAgent({\n    botInfoRef,\n    onSuccess,\n    mode: 'update',\n  });\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport dayjs from 'dayjs';\nimport { I18n, type I18nKeysNoOptionsType } from '@coze-arch/i18n';\n\nexport const disabledDate = (date?: Date) => {\n  const today = dayjs().startOf('day'); // Start time of the day\n\n  return dayjs(date).isBefore(today, 'day') || dayjs(date).isSame(today, 'day');\n};\n\nexport enum ExpirationDate {\n  ONE = '1',\n  THIRTY = '30',\n  CUSTOMIZE = 'customize',\n}\nenum ServerTimeValue {\n  PERMANENT = -1,\n  NOT_USE = -1,\n}\n\nexport const getExpirationOptions = () => {\n  const dataOptionsList = [\n    {\n      label: '1',\n      value: ExpirationDate.ONE,\n    },\n    {\n      label: '30',\n      value: ExpirationDate.THIRTY,\n    },\n    {\n      label: I18n.t('customize_key_1'),\n      value: ExpirationDate.CUSTOMIZE,\n    },\n  ];\n  const newOptions = dataOptionsList.map(item => {\n    const { value } = item;\n    if (value === ExpirationDate.CUSTOMIZE) {\n      return item;\n    }\n    const currentDate = dayjs();\n    const futureDate = currentDate.add(Number(value), 'day');\n    const date = futureDate.format('YYYY-MM-DD');\n    return {\n      label: I18n.t('expired_time_days_1' as I18nKeysNoOptionsType, {\n        num: Number(value),\n        date,\n      }),\n      value,\n    };\n  });\n  return newOptions;\n};\n\nexport const getExpireAt = (d: Date) => {\n  const h = 23;\n  const m = 59;\n  const s = 59;\n  const intDate = dayjs(d)\n    .add(h, 'hour')\n    .add(m, 'minute')\n    .add(s, 'second')\n    .unix();\n  return intDate;\n};\n\nexport const getDetailTime = (d: number) => {\n  if (d === ServerTimeValue.NOT_USE) {\n    return '-';\n  }\n  const showDate = dayjs.unix(d).format('YYYY-MM-DD HH:mm:ss');\n  return showDate;\n};\n\nexport const getExpirationTime = (d: number) => {\n  if (d === ServerTimeValue.PERMANENT) {\n    return I18n.t('api_status_permanent_1');\n  }\n  const showDate = dayjs.unix(d).format('YYYY-MM-DD');\n  return showDate;\n};\n\nexport const getStatus = (d: number) => {\n  if (d === ServerTimeValue.PERMANENT) {\n    return true;\n  }\n  const current = dayjs().unix();\n  return d >= current;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, useState } from 'react';\n\nimport { useMemoizedFn, useRequest } from 'ahooks';\nimport { REPORT_EVENTS } from '@coze-arch/report-events';\nimport { reporter } from '@coze-arch/logger';\nimport {\n  type PersonalAccessToken,\n  type CreatePersonalAccessTokenAndPermissionRequest,\n  type UpdatePersonalAccessTokenAndPermissionRequest,\n  type CreatePersonalAccessTokenAndPermissionResponseData,\n  type GetPersonalAccessTokenAndPermissionResponseData,\n  type ListPersonalAccessTokensResponse2,\n} from '@coze-arch/bot-api/pat_permission_api';\nimport { patPermissionApi } from '@coze-arch/bot-api';\n\nexport type FetchCustomPatList =\n  () => Promise<ListPersonalAccessTokensResponse2>;\nexport const useGetPATList = ({\n  fetchCustomPatList,\n}: {\n  fetchCustomPatList?: FetchCustomPatList;\n}) => {\n  const [dataSource, setDataSource] = useState<PersonalAccessToken[]>([]);\n  const fetchPatList = useMemoizedFn(() => {\n    if (fetchCustomPatList) {\n      return fetchCustomPatList();\n    }\n    return patPermissionApi.ListPersonalAccessTokens({});\n  });\n  const { loading, run: fetchData } = useRequest(fetchPatList, {\n    manual: true,\n    onSuccess: dataSourceData => {\n      setDataSource(dataSourceData?.data?.personal_access_tokens);\n      reporter.event({\n        eventName: REPORT_EVENTS.openGetPatList,\n        meta: {\n          level: 'success',\n          action: 'ListPersonalAccessTokens',\n        },\n      });\n    },\n    onError: error => {\n      reporter.errorEvent({\n        eventName: REPORT_EVENTS.openGetPatList,\n        error,\n        meta: {\n          action: 'ListPersonalAccessTokens',\n        },\n      });\n    },\n  });\n\n  return {\n    dataSource,\n    loading,\n    fetchData,\n  };\n};\n\nexport const useCreatePAT = () => {\n  const [successData, setSuccessData] =\n    useState<CreatePersonalAccessTokenAndPermissionResponseData>();\n  const { loading, run: runCreate } = useRequest(\n    (info: CreatePersonalAccessTokenAndPermissionRequest) =>\n      patPermissionApi.CreatePersonalAccessTokenAndPermission(info),\n    {\n      manual: true,\n      onSuccess: dataSourceData => {\n        setSuccessData(dataSourceData?.data);\n        reporter.event({\n          eventName: REPORT_EVENTS.openPatAction,\n          meta: {\n            level: 'success',\n            action: 'CreatePersonalAccessTokenAndPermission',\n          },\n        });\n      },\n      onError: error => {\n        reporter.errorEvent({\n          eventName: REPORT_EVENTS.openPatAction,\n          error,\n          meta: {\n            action: 'CreatePersonalAccessTokenAndPermission',\n          },\n        });\n      },\n    },\n  );\n  return {\n    runCreate,\n    loading,\n    successData,\n  };\n};\n\nexport const useUpdatePAT = (\n  handle: {\n    successHandle?: () => void;\n  } = {},\n) => {\n  const {\n    loading,\n    run: runUpdate,\n    data: updateSuccessData,\n  } = useRequest(\n    (info: UpdatePersonalAccessTokenAndPermissionRequest) =>\n      patPermissionApi.UpdatePersonalAccessTokenAndPermission(info),\n    {\n      manual: true,\n      onSuccess: () => {\n        handle?.successHandle?.();\n        reporter.event({\n          eventName: REPORT_EVENTS.openPatAction,\n          meta: {\n            level: 'success',\n            action: 'UpdatePersonalAccessTokenAndPermission',\n          },\n        });\n      },\n      onError: error => {\n        reporter.errorEvent({\n          eventName: REPORT_EVENTS.openPatAction,\n          error,\n          meta: {\n            action: 'UpdatePersonalAccessTokenAndPermission',\n          },\n        });\n      },\n    },\n  );\n  return {\n    runUpdate,\n    loading,\n    updateSuccessData,\n  };\n};\n\nexport const useDeletePAT = ({\n  successHandle,\n}: {\n  successHandle: () => void;\n}) => {\n  const { loading, runAsync } = useRequest(\n    (id: string) =>\n      patPermissionApi.DeletePersonalAccessTokenAndPermission({ id }),\n    {\n      manual: true,\n    },\n  );\n  const runDelete = async (id: string) => {\n    try {\n      await runAsync(id);\n      successHandle();\n      reporter.event({\n        eventName: REPORT_EVENTS.openPatAction,\n        meta: {\n          level: 'success',\n          action: 'DeletePersonalAccessTokenAndPermission',\n        },\n      });\n    } catch (error) {\n      reporter.errorEvent({\n        eventName: REPORT_EVENTS.openPatAction,\n        error: error as Error,\n        meta: {\n          action: 'DeletePersonalAccessTokenAndPermission',\n        },\n      });\n    }\n  };\n\n  return {\n    runDelete,\n    loading,\n  };\n};\nexport const usePATPermission = ({ patId }: { patId?: string }) => {\n  const [patPermission, setPatPermission] =\n    useState<GetPersonalAccessTokenAndPermissionResponseData>();\n\n  const { error: detailError, run } = useRequest(\n    (id: string) =>\n      patPermissionApi.GetPersonalAccessTokenAndPermission({ id }),\n    {\n      manual: true,\n      onSuccess: dataSourceData => {\n        setPatPermission(dataSourceData.data);\n\n        reporter.event({\n          eventName: REPORT_EVENTS.openGetPatList,\n          meta: {\n            level: 'success',\n            action: 'GetPersonalAccessTokenAndPermission',\n          },\n        });\n      },\n      onError: error => {\n        reporter.errorEvent({\n          eventName: REPORT_EVENTS.openGetPatList,\n          error,\n          meta: {\n            action: 'GetPersonalAccessTokenAndPermission',\n          },\n        });\n      },\n    },\n  );\n  useEffect(() => {\n    if (patId) {\n      run(patId);\n    } else {\n      setPatPermission(undefined);\n    }\n  }, [patId]);\n\n  return {\n    patPermission,\n    detailError,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState } from 'react';\n\nimport { I18n } from '@coze-arch/i18n';\nimport { Toast } from '@coze-arch/coze-design';\nimport {\n  type CreatePersonalAccessTokenAndPermissionResponseData,\n  type PersonalAccessToken,\n} from '@coze-arch/bot-api/pat_permission_api';\n\nimport {\n  useDeletePAT,\n  useGetPATList,\n  type FetchCustomPatList,\n} from '../use-token';\nexport const usePatOperation = ({\n  fetchCustomPatList,\n  afterCancelPermissionModal,\n}: {\n  fetchCustomPatList?: FetchCustomPatList;\n  afterCancelPermissionModal?: (isCreate: boolean) => void;\n}) => {\n  const { loading, dataSource, fetchData } = useGetPATList({\n    fetchCustomPatList,\n  });\n  const { runDelete } = useDeletePAT({\n    successHandle: () => {\n      Toast.success({ content: I18n.t('Delete_success'), showClose: false });\n      fetchData();\n    },\n  });\n  const [showDataForm, setShowDataForm] = useState(false);\n  const [showResult, setShowResult] = useState(false);\n  const [isCreate, setIsCreate] = useState(true);\n  const [editInfo, setEditInfo] = useState<PersonalAccessToken>();\n  const [successData, setSuccessData] =\n    useState<CreatePersonalAccessTokenAndPermissionResponseData>();\n  const onAddClick = () => {\n    setIsCreate(true);\n    setShowDataForm(true);\n  };\n  const editHandle = (v: PersonalAccessToken) => {\n    setEditInfo(v);\n    setIsCreate(false);\n    setShowDataForm(true);\n  };\n  const onCancel = () => {\n    setShowDataForm(false);\n    setEditInfo(undefined);\n    afterCancelPermissionModal?.(isCreate);\n  };\n\n  const createSuccessHandle = (\n    data: CreatePersonalAccessTokenAndPermissionResponseData,\n  ) => {\n    setSuccessData(data);\n    setEditInfo(undefined);\n    setShowResult(true);\n  };\n  const refreshHandle = () => {\n    fetchData();\n    setShowDataForm(false);\n    setEditInfo(undefined);\n  };\n  return {\n    dataSource,\n    loading,\n    showDataForm,\n    setShowDataForm,\n    isCreate,\n    editInfo,\n    successData,\n    onAddClick,\n    createSuccessHandle,\n    refreshHandle,\n    editHandle,\n    runDelete,\n    onCancel,\n    setIsCreate,\n    showResult,\n    setShowResult,\n    fetchData,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ReactNode, type FC } from 'react';\n\nimport classNames from 'classnames';\nimport { I18n } from '@coze-arch/i18n';\nimport { IconCozInfoCircle } from '@coze-arch/coze-design/icons';\nimport { Tooltip, Typography, Space } from '@coze-arch/coze-design';\n\nimport styles from './index.module.less';\nexport const LinkDocs: FC<{ text?: string; onClick?: () => void }> = ({\n  text,\n  onClick,\n}) => (\n  <Typography.Text\n    className=\"text-[12px] !font-normal\"\n    link\n    onClick={() => {\n      onClick?.();\n    }}\n  >\n    {text ? text : I18n.t('coze_api_instru')}\n  </Typography.Text>\n);\n\nexport const PATInstructionWrap: FC<{\n  onClick?: () => void;\n}> = ({ onClick }) => (\n  <div className={styles['message-frame']}>\n    <Space spacing={0}>\n      <p>{I18n.t('pat_reminder_1')}</p>\n      <LinkDocs onClick={onClick} />\n    </Space>\n    <p>{I18n.t('pat_reminder_2')}</p>\n    {IS_OVERSEA ? <p>{I18n.t('api_token_reminder_1')}</p> : null}\n  </div>\n);\n\nexport const Tips: FC<{ tips: string | ReactNode; className?: string }> = ({\n  tips,\n  className,\n}) => (\n  <Tooltip theme=\"dark\" trigger=\"hover\" content={tips}>\n    <div\n      className={classNames(\n        'flex items-center justify-center hover:coz-mg-secondary-hovered w-[16px] h-[16px] rounded-[4px] mr-[4px] ml-[2px] text-[12px]',\n        className,\n      )}\n    >\n      <IconCozInfoCircle className=\"coz-fg-secondary\" />\n    </div>\n  </Tooltip>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport { I18n } from '@coze-arch/i18n';\nimport { Button, Space } from '@coze-arch/coze-design';\n\nimport { PATInstructionWrap } from '@/components/instructions-wrap';\n\nexport const TopBody: FC<{\n  openAddModal: () => void;\n}> = ({ openAddModal }) => (\n  <Space vertical spacing={20}>\n    <Space className=\"w-full\">\n      <h3 className=\"flex-1 m-0\">{I18n.t('auth_tab_pat')}</h3>\n      <Button onClick={openAddModal} theme=\"solid\" type=\"primary\">\n        {I18n.t('add_new_token_button_1')}\n      </Button>\n    </Space>\n    <div className=\"w-full\">\n      <PATInstructionWrap\n        onClick={() => {\n          window.open(\n            IS_OVERSEA\n              ? // cp-disable-next-line\n                'https://www.coze.com/open/docs/developer_guides/coze_api_overview'\n              : // cp-disable-next-line\n                'https://www.coze.cn/open/docs/developer_guides/coze_api_overview',\n          );\n        }}\n      />\n    </div>\n  </Space>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport copy from 'copy-to-clipboard';\nimport { useMemoizedFn } from 'ahooks';\nimport { I18n } from '@coze-arch/i18n';\nimport { IconCozCopy } from '@coze-arch/coze-design/icons';\nimport {\n  UIModal,\n  Typography,\n  Toast,\n  Space,\n  Tooltip,\n} from '@coze-arch/bot-semi';\nimport { type CreatePersonalAccessTokenAndPermissionResponseData } from '@coze-arch/bot-api/pat_permission_api';\n\nimport { getExpirationTime } from '@/utils/time';\n\nimport s from './index.module.less';\n\ninterface ResultProps {\n  data?: CreatePersonalAccessTokenAndPermissionResponseData;\n  visible: boolean;\n  onOk: () => void;\n}\n\n// New Edit PAT\nexport const ResultModal = ({ visible, onOk, data }: ResultProps) => {\n  const doCopyAsync = useMemoizedFn(() => {\n    const targetKey = data?.token;\n    if (targetKey) {\n      doCopy(targetKey);\n    }\n  });\n\n  const doCopy = useMemoizedFn(targetText => {\n    const res = copy(targetText);\n    if (!res) {\n      throw new Error('custom error');\n    }\n    Toast.success({\n      content: I18n.t('token_copied_1'),\n      showClose: false,\n    });\n  });\n  return (\n    <UIModal\n      className={s['result-frame']}\n      title={I18n.t('new_pat_1')}\n      visible={visible}\n      width={560}\n      centered\n      onOk={onOk}\n      onCancel={onOk}\n      okText={I18n.t('confirm')}\n      footer={null}\n    >\n      <p className={s['warn-text']}>{I18n.t('new_pat_reminder_1')}</p>\n      <p className={s['title-text']}>{I18n.t('coze_api_list1')}</p>\n      <Typography.Paragraph className={s.para} ellipsis={{ rows: 1 }}>\n        {data?.personal_access_token?.name ?? '-'}\n      </Typography.Paragraph>\n      <p className={s['title-text']}>{I18n.t('expire_time_1')}</p>\n      <Typography.Paragraph className={s.para} ellipsis={{ rows: 1 }}>\n        {getExpirationTime(data?.personal_access_token.expire_at as number)}\n      </Typography.Paragraph>\n      <p className={s['title-text']}>{I18n.t('token_key_1')}</p>\n      <Space spacing={4} className={s.sp}>\n        <Typography.Paragraph className={s['key-text']} ellipsis={{ rows: 1 }}>\n          {data?.token}\n        </Typography.Paragraph>\n        <Tooltip content={I18n.t('Copy')}>\n          <IconCozCopy className={s.icon} onClick={doCopyAsync} />\n        </Tooltip>\n      </Space>\n    </UIModal>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, useState } from 'react';\n\nimport { I18n } from '@coze-arch/i18n';\nimport { type PersonalAccessToken } from '@coze-arch/bot-api/pat_permission_api';\nimport { Modal, type FormApi } from '@coze-arch/coze-design';\n\nimport { ExpirationDate, getExpireAt } from '@/utils/time';\nimport {\n  usePATPermission,\n  useCreatePAT,\n  useUpdatePAT,\n} from '@/hooks/pat/use-token';\n\nexport interface FormApiInfo {\n  name: string;\n  duration_day: ExpirationDate;\n\n  expire_at: Date;\n}\n\ninterface PatFormProps {\n  editInfo?: PersonalAccessToken;\n  isCreate: boolean;\n  isShowAuthMigrateNotice?: boolean;\n  formApi: React.MutableRefObject<FormApi<FormApiInfo> | undefined>;\n  validateCustomParams?: () => boolean;\n  getCustomParams?: () => Record<string, unknown>;\n  afterSubmit?: (params: Record<string, unknown>) => void;\n}\n\nconst getDurationData = (durationDay: ExpirationDate, expireAt: Date) => ({\n  duration_day: durationDay,\n  ...(durationDay === ExpirationDate.CUSTOMIZE\n    ? { expire_at: getExpireAt(expireAt as Date) }\n    : {}),\n});\n\nconst validateName = (name?: string) => Boolean(name);\nconst validateDuration = (durationDay?: ExpirationDate, expireAt?: Date) => {\n  if (!durationDay) {\n    return false;\n  }\n  if (durationDay === ExpirationDate.CUSTOMIZE && !expireAt) {\n    return false;\n  }\n  return true;\n};\n\nconst authMigrateNoticeLSKey = 'auth_migrate_notice_do_not_show_again';\n\nconst useAuthMigrateNotice = (isShowAuthMigrateNotice?: boolean) => {\n  useEffect(() => {\n    if (!isShowAuthMigrateNotice) {\n      return;\n    }\n    if (!localStorage.getItem(authMigrateNoticeLSKey)) {\n      Modal.info({\n        title: I18n.t('api_permissionkey_notification_title'),\n        content: I18n.t('api_permissionkey_notification_content'),\n        okText: I18n.t('got_it'),\n        onOk: () => {\n          localStorage.setItem(authMigrateNoticeLSKey, 'true');\n        },\n        showCancelButton: false,\n        closable: false,\n        maskClosable: false,\n      });\n    }\n  }, []);\n};\n\nexport const usePatForm = ({\n  editInfo,\n  isCreate,\n  formApi,\n  getCustomParams,\n  validateCustomParams,\n  afterSubmit,\n  isShowAuthMigrateNotice,\n}: PatFormProps) => {\n  const { patPermission } = usePATPermission({\n    patId: editInfo?.id,\n  });\n\n  const { loading: createLoading, runCreate, successData } = useCreatePAT();\n  const {\n    loading: updateLoading,\n    runUpdate,\n    updateSuccessData,\n  } = useUpdatePAT();\n\n  const [isFailToValid, setIsFailToValid] = useState(true);\n\n  const onSubmit = () => {\n    const {\n      name = '',\n      duration_day,\n      expire_at,\n    } = formApi.current?.getValues() || {};\n\n    const params = {\n      name,\n      ...(getCustomParams?.() || {}),\n    };\n    if (isCreate) {\n      runCreate({\n        ...params,\n        ...getDurationData(duration_day as ExpirationDate, expire_at as Date),\n      });\n    } else {\n      runUpdate({ ...params, id: editInfo?.id ?? '' });\n    }\n    afterSubmit?.({ ...params, duration_day, expire_at });\n  };\n\n  const validateParams = () => {\n    const { name, duration_day, expire_at } =\n      formApi.current?.getValues() || {};\n\n    const nameValid = validateName(name);\n    const isCustomParamsValid = validateCustomParams?.() !== false;\n    const durationValid = isCreate\n      ? validateDuration(duration_day, expire_at)\n      : true;\n    setIsFailToValid(!(nameValid && isCustomParamsValid && durationValid));\n  };\n\n  const onFormValueChange = (\n    _values: FormApiInfo,\n    _changedValue: FormApiInfo,\n  ) => {\n    validateParams();\n  };\n\n  useEffect(() => {\n    if (isCreate) {\n      formApi.current?.setValue('name', 'Secret token');\n    } else if (patPermission && patPermission?.personal_access_token?.name) {\n      formApi.current?.setValue(\n        'name',\n        patPermission?.personal_access_token?.name,\n      );\n    }\n  }, [patPermission]);\n\n  const ready = isCreate ? true : !!patPermission;\n\n  useAuthMigrateNotice(isShowAuthMigrateNotice);\n\n  return {\n    isFailToValid,\n    ready,\n    loading: updateLoading || createLoading,\n    onSubmit,\n    onFormValueChange,\n    patPermission,\n    validateParams,\n    successData,\n    updateSuccessData,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC, useState } from 'react';\n\nimport { I18n } from '@coze-arch/i18n';\nimport { Form, Input } from '@coze-arch/coze-design';\nimport { type GetPersonalAccessTokenAndPermissionResponseData } from '@coze-arch/bot-api/pat_permission_api';\n\nimport {\n  ExpirationDate,\n  disabledDate,\n  getExpirationOptions,\n  getExpirationTime,\n} from '@/utils/time';\nimport { Tips } from '@/components/instructions-wrap';\n\nimport styles from './index.module.less';\n\nexport const CommonFormParams: FC<{\n  isCreate?: boolean;\n  patPermission?: GetPersonalAccessTokenAndPermissionResponseData;\n}> = ({ isCreate, patPermission }) => {\n  const [durationDay, setDurationDay] = useState<ExpirationDate>();\n  const dataOptionsList = getExpirationOptions();\n\n  return (\n    <>\n      <Form.Input\n        trigger={['blur', 'change']}\n        field=\"name\"\n        label={{\n          text: I18n.t('coze_api_list1'),\n          required: true,\n        }}\n        placeholder={''}\n        maxLength={20}\n        rules={[{ required: true, message: '' }]}\n      />\n      <Form.Slot\n        label={{\n          text: I18n.t('expire_time_1'),\n          required: true,\n          extra: <Tips tips={I18n.t('expired_time_forbidden_1')} />,\n        }}\n      >\n        {isCreate ? (\n          <>\n            <div className={styles['expiration-select']}>\n              <Form.Select\n                noLabel={true}\n                field=\"duration_day\"\n                style={{ width: '100%' }}\n                disabled={!isCreate}\n                optionList={dataOptionsList}\n                onChange={v => setDurationDay(v as ExpirationDate)}\n                rules={[{ required: true, message: '' }]}\n                placeholder={I18n.t('select_expired_time_1')}\n              />\n\n              {durationDay === ExpirationDate.CUSTOMIZE && (\n                <Form.DatePicker\n                  noLabel={true}\n                  field=\"expire_at\"\n                  style={{ width: '100%' }}\n                  disabled={!isCreate}\n                  disabledDate={disabledDate}\n                  position=\"bottomRight\"\n                />\n              )}\n            </div>\n          </>\n        ) : (\n          <Input\n            disabled\n            value={\n              patPermission?.personal_access_token?.expire_at\n                ? getExpirationTime(\n                    patPermission?.personal_access_token?.expire_at as number,\n                  )\n                : ''\n            }\n          />\n        )}\n      </Form.Slot>\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  forwardRef,\n  type PropsWithChildren,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n} from 'react';\n\nimport { I18n } from '@coze-arch/i18n';\nimport {\n  type PersonalAccessToken,\n  type CreatePersonalAccessTokenAndPermissionResponseData,\n  type GetPersonalAccessTokenAndPermissionResponseData,\n} from '@coze-arch/bot-api/pat_permission_api';\nimport { Form, type FormApi, Modal, Spin, Toast } from '@coze-arch/coze-design';\n\nimport { usePatForm, type FormApiInfo } from '@/hooks/pat/action/use-pat-form';\n\nimport { CommonFormParams } from './common-form-params';\n\nimport styles from './index.module.less';\n\nexport interface PermissionModalProps {\n  editInfo?: PersonalAccessToken;\n  isCreate: boolean;\n  isReady?: boolean;\n  onRefresh: () => void;\n  onCreateSuccess: (\n    v: CreatePersonalAccessTokenAndPermissionResponseData,\n  ) => void;\n  onCancel: () => void;\n  onPatPermissionChange?: (\n    data?: GetPersonalAccessTokenAndPermissionResponseData,\n  ) => void;\n  onCustomFormValueChange?: (values: unknown, changedValue: unknown) => void;\n  validateCustomParams?: () => boolean;\n  getCustomParams?: () => Record<string, unknown>;\n  afterSubmit?: (params: Record<string, unknown>) => void;\n  isShowAuthMigrateNotice?: boolean;\n}\n\nexport interface PermissionModalRef {\n  setFormValue: (key: string, value: unknown) => void;\n  validateParams: () => void;\n  getFormValues: () => Record<string, unknown>;\n}\n\nexport const PermissionModal = forwardRef(function PermissionModal(\n  {\n    editInfo,\n    isCreate,\n    onRefresh,\n    onCreateSuccess,\n    onCancel,\n    children,\n    onPatPermissionChange,\n    onCustomFormValueChange,\n    validateCustomParams,\n    getCustomParams,\n    afterSubmit,\n    isReady = true,\n    isShowAuthMigrateNotice = false,\n  }: PropsWithChildren<PermissionModalProps>,\n  ref,\n) {\n  const formApi = useRef<FormApi<FormApiInfo>>();\n  const {\n    isFailToValid,\n    ready,\n    loading,\n    onSubmit,\n    onFormValueChange,\n    patPermission,\n    successData,\n    updateSuccessData,\n    validateParams,\n  } = usePatForm({\n    editInfo,\n    isCreate,\n    formApi,\n    validateCustomParams,\n    getCustomParams,\n    afterSubmit,\n    isShowAuthMigrateNotice,\n  });\n  const modalReady = isReady && ready;\n\n  useEffect(() => {\n    if (successData) {\n      Toast.success({ content: I18n.t('Create_success'), showClose: false });\n      onCreateSuccess(successData);\n      onRefresh();\n    }\n  }, [successData]);\n\n  useEffect(() => {\n    if (updateSuccessData) {\n      Toast.success({ content: I18n.t('Edit_success'), showClose: false });\n      onRefresh();\n    }\n  }, [updateSuccessData]);\n\n  useImperativeHandle(\n    ref,\n    () => ({\n      setFormValue: (key: string, value: unknown) => {\n        formApi.current?.setValue(key as keyof FormApiInfo, value);\n      },\n      getFormValues: () => formApi.current?.getValues(),\n      validateParams,\n    }),\n    [validateParams],\n  );\n\n  useEffect(() => {\n    onPatPermissionChange?.(patPermission);\n  }, [patPermission]);\n\n  return (\n    <Modal\n      title={isCreate ? I18n.t('add_new_pat_1') : I18n.t('edit_pat_1')}\n      visible={true}\n      width={480}\n      centered\n      maskClosable={false}\n      onCancel={onCancel}\n      onOk={onSubmit}\n      okButtonProps={{\n        disabled: isFailToValid || !modalReady,\n        loading,\n      }}\n      cancelText={I18n.t('cancel')}\n      okText={I18n.t('confirm')}\n    >\n      <Spin spinning={!modalReady}>\n        <div className={styles['permission-form-content']}>\n          <Form<FormApiInfo>\n            showValidateIcon={false}\n            getFormApi={api => (formApi.current = api)}\n            onValueChange={(values, changedValue) => {\n              if (onCustomFormValueChange) {\n                onCustomFormValueChange(values, changedValue);\n              } else {\n                onFormValueChange(values, changedValue as FormApiInfo);\n              }\n            }}\n          >\n            <CommonFormParams\n              isCreate={isCreate}\n              patPermission={patPermission}\n            />\n            {children}\n          </Form>\n        </div>\n      </Spin>\n    </Modal>\n  );\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState, useEffect } from 'react';\n\nexport const useTableHeight = (tableRef: React.RefObject<HTMLDivElement>) => {\n  const [tableHeight, setTableHeight] = useState<string>('calc(100vh - 360px)');\n\n  useEffect(() => {\n    if (!tableRef.current) {\n      return;\n    }\n    const calculateHeight = () => {\n      if (tableRef.current) {\n        const topPosition = tableRef.current.getBoundingClientRect().top;\n        setTableHeight(`calc(100vh - ${topPosition + 80}px)`);\n      }\n    };\n\n    calculateHeight();\n    window.addEventListener('resize', calculateHeight);\n\n    return () => {\n      window.removeEventListener('resize', calculateHeight);\n    };\n  }, [tableRef.current]);\n\n  return tableHeight;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport cls from 'classnames';\nimport { type TableProps, Table } from '@coze-arch/coze-design';\n\nimport styles from './index.module.less';\n\nexport const AuthTable: FC<\n  TableProps & {\n    size?: 'small' | 'default';\n    type?: 'primary' | 'default';\n  }\n> = ({\n  wrapperClassName,\n  tableProps,\n  size = 'default',\n  type = 'default',\n  ...rest\n}) => (\n  <Table\n    {...rest}\n    wrapperClassName={cls(styles['table-wrap'], wrapperClassName)}\n    tableProps={{\n      ...tableProps,\n      className: cls(\n        styles['table-content'],\n        tableProps?.className,\n        styles[size],\n        styles[type],\n      ),\n    }}\n  />\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { I18n } from '@coze-arch/i18n';\nimport { Tag } from '@coze-arch/coze-design';\nimport { type ColumnProps } from '@coze-arch/coze-design';\nimport { type PersonalAccessToken } from '@coze-arch/bot-api/pat_permission_api';\n\nimport { getStatus } from '@/utils/time';\n\nexport const columnStatusConf: () => ColumnProps<PersonalAccessToken> = () => ({\n  title: I18n.t('api_status_1'),\n  dataIndex: 'id',\n  width: 80,\n  render: (_: string, record: PersonalAccessToken) => {\n    const isActive = getStatus(record?.expire_at as number);\n    return (\n      <Tag size=\"small\" color={isActive ? 'primary' : 'grey'}>\n        {I18n.t(isActive ? 'api_status_active_1' : 'api_status_expired_1')}\n      </Tag>\n    );\n  },\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC } from 'react';\n\nimport classNames from 'classnames';\nimport { I18n } from '@coze-arch/i18n';\nimport { IconCozMinusCircle, IconCozEdit } from '@coze-arch/coze-design/icons';\nimport { type ColumnProps, Tooltip, Space } from '@coze-arch/coze-design';\nimport { UIButton, Popconfirm } from '@coze-arch/bot-semi';\nimport { type PersonalAccessToken } from '@coze-arch/bot-api/pat_permission_api';\n\nimport { getStatus } from '@/utils/time';\n\nimport styles from './index.module.less';\nexport const ColumnOpBody: FC<{\n  record: PersonalAccessToken;\n  isCurrentUser?: boolean;\n  onEdit: (v: PersonalAccessToken) => void;\n  onDelete: (id: string) => void;\n  afterConfirmDelete?: () => void;\n  afterCancelDelete?: () => void;\n}> = ({\n  record,\n  isCurrentUser,\n  onEdit,\n  onDelete,\n  afterConfirmDelete,\n  afterCancelDelete,\n}) => {\n  const isActive = getStatus(record?.expire_at as number);\n\n  return (\n    <Space align=\"center\" spacing={17}>\n      <Tooltip\n        content={\n          isCurrentUser\n            ? I18n.t(isActive ? 'Edit' : 'not_support_edit_1')\n            : I18n.t('org_api_pat_edit_reminder')\n        }\n      >\n        <UIButton\n          onClick={() => onEdit(record)}\n          className={classNames(styles['btn-frame'], {\n            [styles['btn-frame-disabled']]: !isActive,\n          })}\n          theme=\"borderless\"\n          icon={<IconCozEdit className={styles.icon} />}\n          disabled={!isActive || !isCurrentUser}\n        ></UIButton>\n      </Tooltip>\n      <Popconfirm\n        style={{ width: 400 }}\n        okType=\"danger\"\n        trigger=\"click\"\n        onConfirm={() => {\n          onDelete(`${record?.id}`);\n          afterConfirmDelete?.();\n        }}\n        onCancel={() => {\n          afterCancelDelete?.();\n        }}\n        content={I18n.t('remove_token_1')}\n        title={I18n.t('remove_token_reminder_1')}\n      >\n        <div>\n          <Tooltip content={I18n.t('Remove')}>\n            <UIButton\n              className={styles['btn-frame']}\n              theme=\"borderless\"\n              icon={<IconCozMinusCircle className={styles.icon} />}\n            ></UIButton>\n          </Tooltip>\n        </div>\n      </Popconfirm>\n    </Space>\n  );\n};\n\nexport const columnOpConf: () => ColumnProps<PersonalAccessToken> = () => ({\n  title: I18n.t('coze_api_list5'),\n  width: 120,\n  render: (_: string, _record: unknown) => null,\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { I18n } from '@coze-arch/i18n';\nimport { type ColumnProps } from '@coze-arch/coze-design';\nimport { type PersonalAccessToken } from '@coze-arch/bot-api/pat_permission_api';\nexport const columnNameConf: () => ColumnProps<PersonalAccessToken> = () => ({\n  title: I18n.t('coze_api_list1'),\n  dataIndex: 'name',\n  width: 120,\n  render: (name: string) => <p>{name}</p>,\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { I18n } from '@coze-arch/i18n';\nimport { type ColumnProps } from '@coze-arch/coze-design';\nimport { type PersonalAccessToken } from '@coze-arch/bot-api/pat_permission_api';\n\nimport { getDetailTime } from '@/utils/time';\n\nexport const columnLastUseAtConf: () => ColumnProps<PersonalAccessToken> =\n  () => ({\n    title: I18n.t('coze_api_list4'),\n    dataIndex: 'last_used_at',\n    render: (lastUseTime: number) => getDetailTime(lastUseTime),\n  });\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { I18n } from '@coze-arch/i18n';\nimport { type ColumnProps } from '@coze-arch/coze-design';\nimport { type PersonalAccessToken } from '@coze-arch/bot-api/pat_permission_api';\n\nimport { getExpirationTime } from '@/utils/time';\n\nexport const columnExpireAtConf: () => ColumnProps<PersonalAccessToken> =\n  () => ({\n    title: I18n.t('expire_time_1'), // state\n    dataIndex: 'expire_at',\n    render: (expireTime: number) => getExpirationTime(expireTime),\n  });\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { I18n } from '@coze-arch/i18n';\nimport { type ColumnProps } from '@coze-arch/coze-design';\nimport { type PersonalAccessToken } from '@coze-arch/bot-api/pat_permission_api';\n\nimport { getDetailTime } from '@/utils/time';\n\nexport const columnCreateAtConf: () => ColumnProps<PersonalAccessToken> =\n  () => ({\n    title: I18n.t('coze_api_list3'),\n    dataIndex: 'created_at',\n    render: (createTime: number) => getDetailTime(createTime),\n  });\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ColumnProps } from '@coze-arch/coze-design';\nimport { type PersonalAccessToken } from '@coze-arch/bot-api/pat_permission_api';\n\nimport { columnStatusConf } from './column-status';\nimport { ColumnOpBody, columnOpConf } from './column-op';\nimport { columnNameConf } from './column-name';\nimport { columnLastUseAtConf } from './column-last-use-at';\nimport { columnExpireAtConf } from './column-expire-at';\nimport { columnCreateAtConf } from './column-create-at';\nexport const getTableColumnConf = ({\n  onEdit,\n  onDelete,\n}: {\n  onEdit: (v: PersonalAccessToken) => void;\n  onDelete: (id: string) => void;\n}): ColumnProps<PersonalAccessToken>[] => [\n  columnNameConf(),\n  columnCreateAtConf(),\n  columnLastUseAtConf(),\n  columnExpireAtConf(),\n  columnStatusConf(),\n  {\n    ...columnOpConf(),\n    render: (_, record) => (\n      <ColumnOpBody {...{ record, isCurrentUser: true, onEdit, onDelete }} />\n    ),\n  },\n];\n\nexport const patColumn = {\n  columnNameConf,\n  columnCreateAtConf,\n  columnLastUseAtConf,\n  columnExpireAtConf,\n  columnStatusConf,\n  ColumnOpBody,\n  columnOpConf,\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useRef } from 'react';\n\nimport cls from 'classnames';\nimport { I18n } from '@coze-arch/i18n';\nimport { type ColumnProps } from '@coze-arch/coze-design';\nimport { UIEmpty } from '@coze-arch/bot-semi';\nimport { type PersonalAccessToken } from '@coze-arch/bot-api/pat_permission_api';\n\nimport { useTableHeight } from '@/hooks/use-table-height';\nimport { AuthTable } from '@/components/auth-table';\n\nimport { getTableColumnConf } from './table-column';\n\nimport styles from './index.module.less';\nexport type GetCustomDataConfig = (options: {\n  onEdit: (v: PersonalAccessToken) => void;\n  onDelete: (id: string) => void;\n}) => ColumnProps<PersonalAccessToken>[];\n\ninterface DataTableProps {\n  loading: boolean;\n  size?: 'small' | 'default';\n  type?: 'primary' | 'default';\n  dataSource: PersonalAccessToken[];\n  onEdit: (v: PersonalAccessToken) => void;\n  onDelete: (id: string) => void;\n  onAddClick: () => void;\n  renderDataEmptySlot?: () => React.ReactElement | null;\n  getCustomDataConfig?: GetCustomDataConfig;\n}\n\nexport const DataTable = ({\n  loading,\n  dataSource,\n  onEdit,\n  onDelete,\n  onAddClick,\n  renderDataEmptySlot,\n  getCustomDataConfig = getTableColumnConf,\n  size,\n  type,\n}: DataTableProps) => {\n  const tableRef = useRef<HTMLDivElement>(null);\n  const tableHeight = useTableHeight(tableRef);\n\n  const columns: ColumnProps<PersonalAccessToken>[] = getCustomDataConfig?.({\n    onEdit,\n    onDelete,\n  }).filter(item => !item.hidden);\n\n  return (\n    <div className={cls('flex-1', styles['table-container'])} ref={tableRef}>\n      <AuthTable\n        useHoverStyle={false}\n        size={size}\n        type={type}\n        tableProps={{\n          rowKey: 'id',\n          loading,\n          dataSource,\n          columns,\n          scroll: { y: tableHeight },\n        }}\n        empty={\n          renderDataEmptySlot?.() || (\n            <UIEmpty\n              empty={{\n                title: I18n.t('no_api_token_1'),\n                description: I18n.t('add_api_token_1'),\n                btnText: I18n.t('add_new_token_button_1'),\n                btnOnClick: onAddClick,\n              }}\n            />\n          )\n        }\n      />\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect } from 'react';\n\nimport { type FetchCustomPatList } from '@/hooks/pat/use-token';\nimport { usePatOperation } from '@/hooks/pat/action/use-pat-operation';\n\nimport { TopBody } from './top-body';\nimport { ResultModal } from './result-modal';\nimport { PermissionModal, type PermissionModalProps } from './permission-modal';\nimport { DataTable, type GetCustomDataConfig } from './data-table';\nexport interface PATProps {\n  size?: 'small' | 'default';\n  type?: 'primary' | 'default';\n  renderTopBodySlot?: (options: {\n    openAddModal: () => void;\n  }) => React.ReactNode;\n  renderDataEmptySlot?: () => React.ReactElement | null;\n  getCustomDataConfig?: GetCustomDataConfig;\n  fetchCustomPatList?: FetchCustomPatList;\n  renderPermissionModal?: (options: PermissionModalProps) => void;\n  afterCancelPermissionModal?: (isCreate: boolean) => void;\n}\nexport const PatBody: React.FC<PATProps> = ({\n  size,\n  type,\n  renderTopBodySlot,\n  renderDataEmptySlot,\n  getCustomDataConfig,\n  fetchCustomPatList,\n  renderPermissionModal,\n  afterCancelPermissionModal,\n}) => {\n  const {\n    onAddClick,\n    loading,\n    dataSource,\n    editHandle,\n    runDelete,\n    refreshHandle,\n    showDataForm,\n    isCreate,\n    createSuccessHandle,\n    onCancel,\n    successData,\n    showResult,\n    setShowResult,\n    editInfo,\n    fetchData,\n  } = usePatOperation({ fetchCustomPatList, afterCancelPermissionModal });\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n  const permissionModalOptions = {\n    isCreate,\n    onRefresh: refreshHandle,\n    editInfo,\n    onCreateSuccess: createSuccessHandle,\n    onCancel,\n  };\n  return (\n    <div className=\"w-full h-full flex flex-col\">\n      {renderTopBodySlot?.({ openAddModal: onAddClick }) || (\n        <TopBody openAddModal={onAddClick} />\n      )}\n      <DataTable\n        size={size}\n        type={type}\n        loading={loading}\n        dataSource={dataSource}\n        onEdit={editHandle}\n        onDelete={runDelete}\n        onAddClick={onAddClick}\n        renderDataEmptySlot={renderDataEmptySlot}\n        getCustomDataConfig={getCustomDataConfig}\n      />\n      {showDataForm\n        ? renderPermissionModal?.(permissionModalOptions) || (\n            <PermissionModal {...permissionModalOptions} />\n          )\n        : null}\n      <ResultModal\n        data={successData}\n        visible={showResult}\n        onOk={() => setShowResult(false)}\n      />\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type TaskNotice,\n  type PicTask,\n  type GeneratePicPrompt,\n} from '@coze-arch/idl/playground_api';\n\nexport enum GenerateType {\n  Static = 'static',\n  Gif = 'gif',\n}\nexport enum DotStatus {\n  Generating = 1,\n  Success,\n  Fail,\n  Cancel,\n  None,\n}\n\nexport interface GenerateGifInfo {\n  loading: boolean;\n  dotStatus: DotStatus;\n  text: string;\n  image: PicTask;\n}\n\nexport interface GenerateAvatarModal {\n  visible: boolean;\n  activeKey: GenerateType;\n  selectedImage: PicTask;\n  generatingTaskId?: string;\n  gif: GenerateGifInfo;\n  image: {\n    loading: boolean;\n    dotStatus: DotStatus;\n    text: string;\n    textCustomizable: boolean;\n  };\n}\n\nexport interface GenerateBackGroundModal {\n  activeKey: GenerateType;\n  selectedImage: PicTask;\n  generatingTaskId?: string;\n  gif: GenerateGifInfo;\n  image: {\n    loading: boolean;\n    dotStatus: DotStatus;\n    promptInfo: GeneratePicPrompt;\n  };\n}\n\n// The state of generating images asynchronously\nexport interface GenerateImageState {\n  // Candidate image list information\n  imageList: PicTask[];\n  // Generate image message information\n  noticeList: TaskNotice[];\n  // The status of generating pictures in the avatar pop-up window\n  generateAvatarModal: GenerateAvatarModal;\n  // The status of the generated image in the background cover pop-up window\n  generateBackGroundModal: GenerateBackGroundModal;\n}\n\nexport interface GenerateImageAction {\n  updateImageList: (list: PicTask[]) => void;\n  pushImageList: (image: PicTask) => void;\n  // updateImageList: (update: (state: PicTask[]) => void) => void;\n  updateNoticeList: (list: TaskNotice[]) => void;\n  setGenerateAvatarModal: (state: GenerateAvatarModal) => void;\n  resetGenerateAvatarModal: () => void;\n  setGenerateAvatarModalByImmer: (\n    update: (state: GenerateAvatarModal) => void,\n  ) => void;\n  setGenerateBackgroundModalByImmer: (\n    update: (state: GenerateBackGroundModal) => void,\n  ) => void;\n  clearGenerateImageStore: () => void;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { usePageRuntimeStore } from '../store/page-runtime';\nimport { useCollaborationStore, EditLockStatus } from '../store/collaboration';\n\n/**\n * Non-responsive; reference useBotDetailIsReadonly method\n */\nexport function getBotDetailIsReadonly() {\n  const pageRuntime = usePageRuntimeStore.getState();\n  const collaboration = useCollaborationStore.getState();\n  return getBotDetailIsReadonlyByState({\n    editable: pageRuntime.editable,\n    isPreview: pageRuntime.isPreview,\n    editLockStatus: collaboration.editLockStatus,\n  });\n}\n\nexport const getBotDetailIsReadonlyByState = ({\n  editable,\n  isPreview,\n  editLockStatus,\n}: {\n  editable: boolean;\n  isPreview: boolean;\n  editLockStatus?: EditLockStatus;\n}) => !editable || isPreview || editLockStatus === EditLockStatus.Lose;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools, subscribeWithSelector } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { produce } from 'immer';\nimport { type TaskNotice, type PicTask } from '@coze-arch/idl/playground_api';\n\nimport {\n  type GenerateImageState,\n  type GenerateImageAction,\n  type GenerateAvatarModal,\n  GenerateType,\n  DotStatus,\n  type GenerateBackGroundModal,\n} from '../types/generate-image';\n\nexport const DEFAULT_BOT_GENERATE_AVATAR_MODAL = (): GenerateAvatarModal => ({\n  visible: false,\n  activeKey: GenerateType.Static,\n  selectedImage: { id: '', img_info: {} },\n  gif: {\n    loading: false,\n    dotStatus: DotStatus.None,\n    text: '',\n    image: { id: '', img_info: {} },\n  },\n  image: {\n    loading: false,\n    dotStatus: DotStatus.None,\n    text: '',\n    textCustomizable: false,\n  },\n});\n\nexport const DEFAULT_BOT_GENERATE_BACKGROUND_MODAL =\n  (): GenerateBackGroundModal => ({\n    activeKey: GenerateType.Static,\n    selectedImage: { id: '', img_info: {} },\n    gif: {\n      loading: false,\n      dotStatus: DotStatus.None,\n      text: '',\n      image: { id: '', img_info: {} },\n    },\n    image: {\n      loading: false,\n      dotStatus: DotStatus.None,\n      promptInfo: {},\n    },\n  });\n\nexport const useGenerateImageStore = create<\n  GenerateImageState & GenerateImageAction\n>()(\n  devtools(\n    subscribeWithSelector(set => ({\n      imageList: [],\n      noticeList: [],\n      generateAvatarModal: DEFAULT_BOT_GENERATE_AVATAR_MODAL(),\n      generateBackGroundModal: DEFAULT_BOT_GENERATE_BACKGROUND_MODAL(),\n      clearGenerateImageStore: () => {\n        set({\n          imageList: [],\n          noticeList: [],\n          generateAvatarModal: DEFAULT_BOT_GENERATE_AVATAR_MODAL(),\n          generateBackGroundModal: DEFAULT_BOT_GENERATE_BACKGROUND_MODAL(),\n        });\n      },\n      updateImageList: (imageList: PicTask[]) => {\n        set(s => ({\n          ...s,\n          imageList,\n        }));\n      },\n      pushImageList: (image: PicTask) => {\n        set(s => ({\n          ...s,\n          imageList: [...s.imageList, image],\n        }));\n      },\n      updateNoticeList: (notices: TaskNotice[]) => {\n        set(s => ({ ...s, notices }));\n      },\n      setGenerateAvatarModal: generateAvatarModal => {\n        set({ generateAvatarModal });\n      },\n      resetGenerateAvatarModal: () => {\n        set({ generateAvatarModal: DEFAULT_BOT_GENERATE_AVATAR_MODAL() });\n      },\n      setGenerateAvatarModalByImmer: update =>\n        set(\n          produce<GenerateImageState>(({ generateAvatarModal }) =>\n            update(generateAvatarModal),\n          ),\n        ),\n      setGenerateBackgroundModalByImmer: update =>\n        set(\n          produce<GenerateImageState>(({ generateBackGroundModal }) =>\n            update(generateBackGroundModal),\n          ),\n        ),\n    })),\n\n    {\n      enabled: IS_DEV_MODE,\n      name: 'botStudio.botDetail.botGenerateImage',\n    },\n  ),\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { withSlardarIdButton } from '@coze-studio/bot-utils';\nimport { logger } from '@coze-arch/logger';\nimport { I18n } from '@coze-arch/i18n';\nimport { arrayBufferToObject } from '@coze-arch/bot-utils';\nimport { type GenPicMessage, PicType } from '@coze-arch/bot-api/playground_api';\nimport { PlaygroundApi } from '@coze-arch/bot-api';\nimport webSocketManager, {\n  type Connection,\n  type FrontierEventMap,\n} from '@coze-common/websocket-manager-adapter';\nimport { Toast } from '@coze-arch/coze-design';\n\nimport { getBotDetailIsReadonly } from '../get-read-only';\nimport { DotStatus } from '../../types/generate-image';\nimport { useGenerateImageStore } from '../../store/generate-image-store';\nimport { useBotInfoStore } from '../../store/bot-info';\n\nclass AvatarBackgroundWebSocket {\n  private connection: Connection | undefined;\n  private eventListenerList:\n    | Array<{\n        key: keyof FrontierEventMap;\n        listener: (event) => void;\n      }>\n    | undefined;\n  private biz: string;\n  private service: number | undefined;\n  private taskSet = new Set();\n\n  constructor(biz: string, service: number) {\n    this.biz = biz;\n    this.service = service;\n  }\n\n  createConnection(retry = true) {\n    if (this.connection) {\n      return;\n    }\n    try {\n      this.connection = webSocketManager.createConnection({\n        biz: this.biz,\n        service: this.service,\n      });\n      this.addWSEventListener();\n    } catch (error) {\n      // Try again.\n      if (retry) {\n        this.createConnection(false);\n      }\n    }\n  }\n\n  destroy() {\n    if (this.connection) {\n      this.eventListenerList?.forEach(({ key, listener }) => {\n        this.connection?.removeEventListener(key, listener);\n      });\n      this.connection?.close();\n      this.connection = undefined;\n    }\n  }\n\n  private addWSEventListener() {\n    this.eventListenerList = [\n      { key: 'message', listener: this.onSocketMessage },\n      { key: 'error', listener: this.onSocketError },\n    ];\n    this.eventListenerList?.forEach(({ key, listener }) => {\n      this.connection?.addEventListener(key, listener);\n    });\n  }\n\n  private onSocketMessage = event => {\n    const payload = arrayBufferToObject(\n      event?.message?.payload,\n    ) as GenPicMessage;\n    const task = payload?.pic_task;\n    const taskId = task?.id || '';\n    if (this.taskSet.has(taskId)) {\n      logger.info({\n        message: 'duplicate task',\n        meta: { taskId },\n      });\n      return;\n    }\n    this.taskSet.add(taskId);\n    const botId = useBotInfoStore.getState().botId || '0';\n\n    if (botId !== '0' && getBotDetailIsReadonly()) {\n      return;\n    }\n    const taskBotId = task?.bot_id || '0';\n    if (task && taskBotId === botId) {\n      const {\n        generateAvatarModal,\n        generateBackGroundModal,\n        setGenerateAvatarModalByImmer,\n        setGenerateBackgroundModalByImmer,\n        pushImageList,\n      } = useGenerateImageStore.getState();\n      const {\n        gif: { dotStatus: avatarGifDotStatus },\n        image: { dotStatus: avatarStaticImageDotStatus },\n      } = generateAvatarModal;\n      const {\n        gif: { dotStatus: backgroundGifDotStatus },\n        image: { dotStatus: backgroundStaticImageDotStatus },\n      } = generateBackGroundModal;\n      const { status } = task;\n      // Update avatar or background after receiving message\n      const updateState = (\n        key: string,\n        setImmer:\n          | typeof setGenerateAvatarModalByImmer\n          | typeof setGenerateBackgroundModalByImmer,\n        currentDotStatus: DotStatus,\n      ) => {\n        let dotStatus = DotStatus.None;\n        if (currentDotStatus === DotStatus.Generating) {\n          dotStatus =\n            (status as number) === DotStatus.Success\n              ? DotStatus.Success\n              : DotStatus.Fail;\n        } else {\n          // Mark as read\n          if (taskBotId !== '0') {\n            PlaygroundApi.MarkReadNotice({\n              bot_id: taskBotId,\n              pic_type: task.type,\n            });\n          }\n          if ((status as number) === DotStatus.Fail) {\n            Toast.error({\n              content: withSlardarIdButton(\n                payload?.err_msg || I18n.t('profilepicture_toast_failed'),\n              ),\n            });\n          } else if ((status as number) === DotStatus.Success) {\n            Toast.success(I18n.t('profilepicture_toast_generated'));\n          }\n        }\n        setImmer(state => {\n          state[key] = {\n            ...state[key],\n            loading: false,\n            dotStatus,\n            generateTaskId: '',\n          };\n          if ((status as number) === DotStatus.Success) {\n            state.selectedImage = task;\n          }\n        });\n        if ((status as number) === DotStatus.Success) {\n          pushImageList(task);\n        }\n      };\n      switch (task.type) {\n        case PicType.IconGif: {\n          updateState('gif', setGenerateAvatarModalByImmer, avatarGifDotStatus);\n          break;\n        }\n        case PicType.IconStatic: {\n          updateState(\n            'image',\n            setGenerateAvatarModalByImmer,\n            avatarStaticImageDotStatus,\n          );\n          break;\n        }\n        case PicType.BackgroundGif: {\n          updateState(\n            'gif',\n            setGenerateBackgroundModalByImmer,\n            backgroundGifDotStatus,\n          );\n          break;\n        }\n        case PicType.BackgroundStatic: {\n          updateState(\n            'image',\n            setGenerateBackgroundModalByImmer,\n            backgroundStaticImageDotStatus,\n          );\n          break;\n        }\n        default:\n      }\n    }\n  };\n\n  private onSocketError = event => {\n    // TODO\n  };\n}\n\nconst getPluginServiceId = () => {\n  // Region/service_id mapping\n  const regionServiceIdMap = {\n    boe: 16778137,\n    cn: 33554636,\n    sg: 67108932,\n    va: 67108932,\n  };\n  return regionServiceIdMap[IS_BOE ? 'boe' : REGION];\n};\nconst serviceID = getPluginServiceId();\n\nexport const avatarBackgroundWebSocket = new AvatarBackgroundWebSocket(\n  'EditorPic',\n  serviceID,\n);\n\nexport function initAvatarBackgroundWebSocket() {\n  // Create connection\n  setTimeout(() => {\n    const {\n      generateAvatarModal: {\n        gif: { dotStatus: avatarGifDotStatus },\n        image: { dotStatus: avatarStaticImageDotStatus },\n      },\n      generateBackGroundModal: {\n        gif: { dotStatus: backgroundGifDotStatus },\n        image: { dotStatus: backgroundStaticImageDotStatus },\n      },\n    } = useGenerateImageStore.getState();\n    if (\n      [\n        avatarGifDotStatus,\n        avatarStaticImageDotStatus,\n        backgroundGifDotStatus,\n        backgroundStaticImageDotStatus,\n      ].includes(DotStatus.Generating)\n    ) {\n      avatarBackgroundWebSocket.createConnection();\n    }\n  }, 10);\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useShallow } from 'zustand/react/shallow';\n\nimport { getBotDetailIsReadonlyByState } from '../utils/get-read-only';\nimport { usePageRuntimeStore } from '../store/page-runtime';\nimport { useCollaborationStore } from '../store/collaboration';\n\nexport const useBotDetailIsReadonly = (): boolean => {\n  const { editable, isPreview } = usePageRuntimeStore(\n    useShallow(state => ({\n      editable: state.editable,\n      isPreview: state.isPreview,\n    })),\n  );\n  const editLockStatus = useCollaborationStore(state => state.editLockStatus);\n  return getBotDetailIsReadonlyByState({\n    editable,\n    isPreview,\n    editLockStatus,\n  });\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type Branch, type Committer } from '@coze-arch/bot-api/developer_api';\n\nimport { useCollaborationStore } from '../store/collaboration';\n\ninterface HeaderStatusType {\n  branch?: Branch;\n  same_with_online?: boolean;\n  committer?: Committer;\n  commit_version?: string;\n}\n\nexport function updateHeaderStatus(props: HeaderStatusType) {\n  const { setCollaborationByImmer } = useCollaborationStore.getState();\n  setCollaborationByImmer(store => {\n    store.sameWithOnline = props.same_with_online ?? false;\n    if (props.committer) {\n      store.commit_time = props.committer.commit_time ?? '';\n      store.committer_name = props.committer.name ?? '';\n    }\n    if (props.commit_version) {\n      store.commit_version = props.commit_version;\n      store.baseVersion = props.commit_version;\n    }\n    if (props.branch) {\n      store.branch = props.branch;\n    }\n  });\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { isNil } from 'lodash-es';\nimport {\n  type BotMonetizationConfigData,\n  BotMonetizationRefreshPeriod,\n} from '@coze-arch/idl/benefit';\n\nexport interface MonetizeConfigState {\n  /** Whether to start payment */\n  isOn: boolean;\n  /** The number of free user experiences after starting payment */\n  freeCount: number;\n  /** refresh cycle */\n  refreshCycle: BotMonetizationRefreshPeriod;\n}\n\nexport interface MonetizeConfigAction {\n  setIsOn: (isOn: boolean) => void;\n  setFreeCount: (freeCount: number) => void;\n  setRefreshCycle: (refreshCycle: BotMonetizationRefreshPeriod) => void;\n  initStore: (data: BotMonetizationConfigData) => void;\n  reset: () => void;\n}\n\nconst DEFAULT_STATE: () => MonetizeConfigState = () => ({\n  isOn: false,\n  freeCount: 0,\n  refreshCycle: 1,\n});\n\nexport type MonetizeConfigStore = MonetizeConfigState & MonetizeConfigAction;\n\nexport const useMonetizeConfigStore = create<MonetizeConfigStore>()(\n  devtools(\n    (set, get) => ({\n      ...DEFAULT_STATE(),\n\n      setIsOn: isOn => set({ isOn }),\n      setFreeCount: freeCount => set({ freeCount }),\n      setRefreshCycle: refreshCycle => set({ refreshCycle }),\n      initStore: data => {\n        const { setIsOn, setFreeCount, setRefreshCycle } = get();\n        setIsOn(isNil(data?.is_enable) ? true : data.is_enable);\n        setFreeCount(\n          isNil(data?.free_chat_allowance_count)\n            ? 0\n            : data.free_chat_allowance_count,\n        );\n        setRefreshCycle(\n          data?.refresh_period ?? BotMonetizationRefreshPeriod.Never,\n        );\n      },\n      reset: () => set(DEFAULT_STATE()),\n    }),\n    { enabled: IS_DEV_MODE, name: 'botStudio.monetizeConfig' },\n  ),\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools, subscribeWithSelector } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { produce } from 'immer';\nimport { type AuditInfo } from '@coze-arch/idl/playground_api';\nimport { type GetDraftBotInfoAgwData } from '@coze-arch/bot-api/playground_api';\n\nimport {\n  type SetterAction,\n  setterActionFactory,\n} from '../utils/setter-factory';\n\nexport const getDefaultAuditInfoStore = (): AuditInfoStore => ({\n  audit_status: 1,\n});\n\nexport type AuditInfoStore = AuditInfo;\n\nexport interface AuditInfoAction {\n  setAuditInfo: SetterAction<AuditInfoStore>;\n  setAuditInfoByImmer: (update: (state: AuditInfoStore) => void) => void;\n  initStore: (botData: GetDraftBotInfoAgwData) => void;\n  clear: () => void;\n}\n\nexport const useAuditInfoStore = create<AuditInfoStore & AuditInfoAction>()(\n  devtools(\n    subscribeWithSelector((set, get) => ({\n      ...getDefaultAuditInfoStore(),\n      setAuditInfo: setterActionFactory<AuditInfoStore>(set),\n      setAuditInfoByImmer: update =>\n        set(produce<AuditInfoStore>(auditInfo => update(auditInfo))),\n      initStore: botData => {\n        const { setAuditInfo } = get();\n        botData && setAuditInfo(botData?.latest_audit_info ?? {});\n      },\n      clear: () => {\n        set({ ...getDefaultAuditInfoStore() });\n      },\n    })),\n    {\n      enabled: IS_DEV_MODE,\n      name: 'botStudio.botDetail.auditInfo',\n    },\n  ),\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useAuditInfoStore } from '@/store/audit-info';\n\nimport { useQueryCollectStore } from './query-collect';\nimport { usePersonaStore } from './persona';\nimport { usePageRuntimeStore } from './page-runtime';\nimport { useMultiAgentStore } from './multi-agent';\nimport { useMonetizeConfigStore } from './monetize-config-store';\nimport { useModelStore } from './model';\nimport { useManuallySwitchAgentStore } from './manually-switch-agent-store';\nimport { useDiffTaskStore } from './diff-task';\nimport { useCollaborationStore } from './collaboration';\nimport { useBotSkillStore } from './bot-skill';\nimport { useBotInfoStore } from './bot-info';\n\nexport interface BotDetailStoreSet {\n  usePersonaStore: typeof usePersonaStore;\n  useQueryCollectStore: typeof useQueryCollectStore;\n  useMultiAgentStore: typeof useMultiAgentStore;\n  useModelStore: typeof useModelStore;\n  useBotSkillStore: typeof useBotSkillStore;\n  useBotInfoStore: typeof useBotInfoStore;\n  useCollaborationStore: typeof useCollaborationStore;\n  usePageRuntimeStore: typeof usePageRuntimeStore;\n  useMonetizeConfigStore: typeof useMonetizeConfigStore;\n  useManuallySwitchAgentStore: typeof useManuallySwitchAgentStore;\n  useDiffTaskStore: typeof useDiffTaskStore;\n}\n\ninterface UseBotDetailStoreSet {\n  getStore: () => BotDetailStoreSet;\n  clear: () => void;\n}\n\nexport const useBotDetailStoreSet: UseBotDetailStoreSet = {\n  getStore() {\n    return {\n      usePersonaStore,\n      useQueryCollectStore,\n      useMultiAgentStore,\n      useModelStore,\n      useBotSkillStore,\n      useBotInfoStore,\n      useCollaborationStore,\n      usePageRuntimeStore,\n      useMonetizeConfigStore,\n      useManuallySwitchAgentStore,\n      useAuditInfoStore,\n      useDiffTaskStore,\n    };\n  },\n  clear() {\n    usePersonaStore.getState().clear();\n    useQueryCollectStore.getState().clear();\n    useMultiAgentStore.getState().clear();\n    useModelStore.getState().clear();\n    useBotSkillStore.getState().clear();\n    useBotInfoStore.getState().clear();\n    useCollaborationStore.getState().clear();\n    usePageRuntimeStore.getState().clear();\n    useMonetizeConfigStore.getState().reset();\n    useManuallySwitchAgentStore.getState().clearAgentId();\n    useAuditInfoStore.getState().clear();\n    useDiffTaskStore.getState().clear();\n  },\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type GetBotVersionInfoData,\n  GetBotVersionScene,\n  type GetDraftBotInfoAgwData,\n} from '@coze-arch/idl/playground_api';\nimport {\n  MonetizationEntityType,\n  type BotMonetizationConfigData,\n} from '@coze-arch/bot-api/benefit';\nimport { benefitApi, PlaygroundApi } from '@coze-arch/bot-api';\n\nexport const getBotDataService = async (params: {\n  scene: 'bot' | 'market';\n  botId: string;\n  customVersion?: string;\n  botInfoVersion: string;\n}): Promise<{\n  botData: GetDraftBotInfoAgwData;\n  monetizeConfig: BotMonetizationConfigData | undefined;\n}> => {\n  const { scene, botId, customVersion, botInfoVersion } = params;\n  if (scene === 'bot') {\n    const [botInfoResp, monetizeConfigResp] = await getBotSceneData({\n      botId,\n      version: customVersion ?? '',\n    });\n    return {\n      botData: getCommonBotData(botInfoResp?.data ?? {}),\n      monetizeConfig: monetizeConfigResp?.data,\n    };\n  }\n  const botInfoResp = await getMarketSceneData({\n    botId,\n    version: botInfoVersion,\n  });\n  return {\n    botData: getCommonBotData(botInfoResp?.data ?? {}),\n    monetizeConfig: undefined,\n  };\n};\n\nconst getBotSceneData = async (params: { botId: string; version: string }) => {\n  const { botId, version } = params;\n  return await Promise.all([\n    PlaygroundApi.GetDraftBotInfoAgw({\n      bot_id: botId,\n      version,\n    }),\n    IS_OVERSEA\n      ? benefitApi.PublicGetBotMonetizationConfig({\n          entity_id: botId,\n          entity_type: MonetizationEntityType.Bot,\n        })\n      : Promise.resolve(undefined),\n  ]);\n};\n\nconst getMarketSceneData = async (params: {\n  botId: string;\n  version: string;\n}) => {\n  const { botId, version } = params;\n  return await PlaygroundApi.GetBotVersionInfo({\n    bot_id: botId,\n    version: version ?? '',\n    scene: GetBotVersionScene.BotStore,\n  });\n};\n\nexport const getCommonBotData = (\n  botData: GetDraftBotInfoAgwData | GetBotVersionInfoData,\n): GetDraftBotInfoAgwData => {\n  let commonBotData: GetDraftBotInfoAgwData = {\n    bot_info: {},\n  };\n  if ('bot_info' in botData) {\n    commonBotData = botData;\n  }\n  if ('bot_version_info' in botData) {\n    commonBotData = {\n      bot_info: botData.bot_version_info?.common_bot_info ?? {},\n    };\n  }\n  return commonBotData;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  REPORT_EVENTS as ReportEventNames,\n  createReportEvent,\n} from '@coze-arch/report-events';\nimport { type BotMonetizationConfigData } from '@coze-arch/idl/benefit';\nimport { type GetDraftBotInfoAgwData } from '@coze-arch/bot-api/playground_api';\nimport { type HistoryInfo } from '@coze-arch/bot-api/developer_api';\n\nimport { useQueryCollectStore } from '../store/query-collect';\nimport { usePersonaStore } from '../store/persona';\nimport { usePageRuntimeStore } from '../store/page-runtime';\nimport { useMultiAgentStore } from '../store/multi-agent';\nimport { useMonetizeConfigStore } from '../store/monetize-config-store';\nimport { useModelStore } from '../store/model';\nimport { useBotDetailStoreSet } from '../store/index';\nimport { useCollaborationStore } from '../store/collaboration';\nimport { useBotSkillStore } from '../store/bot-skill';\nimport { useBotInfoStore } from '../store/bot-info';\nimport { useAuditInfoStore } from '../store/audit-info';\nimport { getBotDataService } from '../services/get-bot-data-service';\n\nexport async function initBotDetailStore(params?: {\n  version?: HistoryInfo['version'];\n  scene?: 'bot' | 'market';\n}) {\n  const { version, scene = 'bot' } = params ?? {};\n  const getRecordEvent = createReportEvent({\n    eventName: ReportEventNames.botDebugGetRecord,\n  });\n  const { botId, version: botInfoVersion } = useBotInfoStore.getState();\n  const { setPageRuntimeBotInfo } = usePageRuntimeStore.getState();\n  const { clear } = useBotDetailStoreSet;\n  try {\n    setPageRuntimeBotInfo({ init: false });\n    const getBotInfoEvent = createReportEvent({\n      eventName: ReportEventNames.botGetDraftBotInfo,\n    });\n    try {\n      const { botData, monetizeConfig = {} } = await getBotDataService({\n        scene,\n        botId,\n        customVersion: version,\n        botInfoVersion,\n      });\n      // Handling bot draft page-specific fields\n      if (scene === 'bot') {\n        initBotSceneStore(botData, version);\n      }\n      // Initialize store set\n      initBotDetailStoreSet(botData, monetizeConfig);\n      getBotInfoEvent.success();\n    } catch (e) {\n      clear();\n      getBotInfoEvent.error({\n        reason: 'get new draft bot info fail',\n        error: e instanceof Error ? e : void 0,\n      });\n      throw e;\n    }\n\n    getRecordEvent.success();\n  } catch (e) {\n    getRecordEvent.error({\n      reason: 'init fail',\n      error: e instanceof Error ? e : void 0,\n    });\n    throw e;\n  }\n}\n\nconst initBotSceneStore = (info: GetDraftBotInfoAgwData, version?: string) => {\n  const { initStore: initPageRuntimeStore } = usePageRuntimeStore.getState();\n  const { initStore: initCollaborationStore } =\n    useCollaborationStore.getState();\n  initPageRuntimeStore({\n    ...info,\n    customVersion: version,\n  });\n  initCollaborationStore(info);\n};\n\nconst initBotDetailStoreSet = (\n  botData: GetDraftBotInfoAgwData,\n  monetizeConfig: BotMonetizationConfigData,\n) => {\n  const { initStore: initBotInfoStore } = useBotInfoStore.getState();\n  const { initStore: initPersonaStore } = usePersonaStore.getState();\n  const { initStore: initModelStore } = useModelStore.getState();\n  const { initStore: initBotSkillStore } = useBotSkillStore.getState();\n  const { initStore: initMultiAgentStore } = useMultiAgentStore.getState();\n  const { initStore: initMonetizeConfigStore } =\n    useMonetizeConfigStore.getState();\n  const { initStore: initQueryCollectStore } = useQueryCollectStore.getState();\n  const { initStore: initAuditInfoStore } = useAuditInfoStore.getState();\n  initBotInfoStore(botData);\n  initPersonaStore(botData);\n  initModelStore(botData);\n  initBotSkillStore(botData);\n  initMultiAgentStore(botData);\n  // Settings Information Payment Information\n  initMonetizeConfigStore(monetizeConfig);\n  initQueryCollectStore(botData);\n  initAuditInfoStore(botData);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { I18n } from '@coze-arch/i18n';\nimport { UIToast } from '@coze-arch/bot-semi';\n\nexport const hasBraces = (str: string) => {\n  const pattern = /{{/g;\n  return pattern.test(str);\n};\n// Determine whether it is all environments or just release the environment restriction {{}} and pop up the toast prompt\nexport const verifyBracesAndToast = (str: string, isAll = false) => {\n  if (isAll && hasBraces(str)) {\n    UIToast.warning({\n      showClose: false,\n      content: I18n.t('bot_prompt_bracket_error'),\n    });\n    return false;\n  }\n  return true;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { I18n } from '@coze-arch/i18n';\nimport { Toast } from '@coze-arch/bot-semi';\nimport { MultiAgentSessionType } from '@coze-arch/bot-api/playground_api';\n\nimport { useMultiAgentStore } from '../store/multi-agent';\nimport { useManuallySwitchAgentStore } from '../store/manually-switch-agent-store';\nimport { saveDeleteAgents } from '../save-manager/manual-save/multi-agent';\nimport { findTargetAgentIndex } from './find-agent';\n\n/**\n * After the full amount of FG, a structured new interface is used by default\n */\nexport const deleteAgent = async (agentId?: string) => {\n  if (!agentId) {\n    return;\n  }\n  await saveDeleteAgents(agentId);\n  useMultiAgentStore.getState().setMultiAgentByImmer(multiAgent => {\n    const { agents } = multiAgent;\n    // Find the location to delete\n    const targetAgentIndex = findTargetAgentIndex(agents, agentId);\n    if (targetAgentIndex < 0) {\n      Toast.error(I18n.t('chatflow_error_delete_failed'));\n      return;\n    }\n    // Delete the current agent\n    agents.splice(targetAgentIndex, 1);\n  });\n};\n\n/**\n * Users manually switch chatting nodes\n *\n * In host mode, the host node will be switched together.\n */\nexport const manuallySwitchAgent = (agentID: string) => {\n  const { setMultiAgentByImmer } = useMultiAgentStore.getState();\n  useManuallySwitchAgentStore\n    .getState()\n    .recordAgentIdOnManuallySwitchAgent(agentID);\n  setMultiAgentByImmer(multiAgent => {\n    multiAgent.currentAgentID = agentID;\n    if (multiAgent.chatModeConfig.type === MultiAgentSessionType.Host) {\n      multiAgent.chatModeConfig.currentHostId = agentID;\n    }\n  });\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useBotSkillStore } from '../store/bot-skill';\n\nexport const useChatBackgroundState = () => {\n  const backgroundState = useBotSkillStore(s => s.backgroundImageInfoList);\n\n  const showBackground =\n    !!backgroundState?.[0]?.mobile_background_image?.origin_image_url;\n  const mobileBackGround =\n    backgroundState?.[0]?.web_background_image?.origin_image_url;\n\n  const pcBackground =\n    backgroundState?.[0]?.web_background_image?.origin_image_url;\n\n  return {\n    showBackground,\n    mobileBackGround,\n    pcBackground,\n    backgroundModeClassName: showBackground ? '!coz-fg-images-white' : '',\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type PicType,\n  type GetPicTaskData,\n} from '@coze-arch/idl/playground_api';\n\nimport { DotStatus } from '../types/generate-image';\n\nfunction getDotStatus(data: GetPicTaskData, picType: PicType) {\n  const { notices = [], tasks = [] } = data || {};\n  const task = tasks.find(item => item.type === picType);\n  return (task?.status as number) === DotStatus.Generating ||\n    notices.some(item => item.type === picType && item.un_read)\n    ? task?.status ?? DotStatus.None\n    : DotStatus.None;\n}\n\nexport default getDotStatus;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  GenPicStatus,\n  PicType,\n  type GetPicTaskData,\n} from '@coze-arch/idl/playground_api';\n\nimport {\n  type GenerateBackGroundModal,\n  type GenerateAvatarModal,\n  DotStatus,\n  GenerateType,\n} from '../types/generate-image';\nimport { useBotSkillStore } from '../store/bot-skill';\nimport getDotStatus from './get-dot-status';\n\nexport const getInitBackgroundInfo = (\n  data: GetPicTaskData,\n  state: GenerateBackGroundModal,\n) => {\n  const { tasks = [] } = data;\n  const { backgroundImageInfoList = [] } = useBotSkillStore.getState();\n  // Currently rendering background cover\n  const uri =\n    backgroundImageInfoList[0]?.mobile_background_image?.origin_image_uri;\n\n  const backgroundGifList = tasks.filter(\n    item => item.type && [PicType.BackgroundGif].includes(item.type),\n  );\n  const backgroundStaticList = tasks.filter(\n    item => item.type && [PicType.BackgroundStatic].includes(item.type),\n  );\n  const imageDotStatus = getDotStatus(\n    data,\n    PicType.BackgroundStatic,\n  ) as DotStatus;\n  const gifDotStatus = getDotStatus(data, PicType.BackgroundGif) as DotStatus;\n\n  // Graph related state\n  state.gif.loading = backgroundGifList.some(\n    item => item.status === GenPicStatus.Generating,\n  );\n  state.gif.text =\n    backgroundGifList.find(item => item?.img_info?.prompt)?.img_info?.prompt\n      ?.ori_prompt ?? '';\n\n  state.gif.dotStatus = gifDotStatus;\n  const image = backgroundGifList.find(item => item.img_info?.ori_url);\n  // first frame information\n  if (image) {\n    state.gif.image = {\n      img_info: {\n        tar_uri: image.img_info?.ori_uri,\n        tar_url: image.img_info?.ori_url,\n      },\n    };\n  }\n\n  // Static graph correlation state\n  state.image.loading = backgroundStaticList.some(\n    item => item.status === GenPicStatus.Generating,\n  );\n  state.image.dotStatus = imageDotStatus;\n  state.image.promptInfo =\n    backgroundStaticList.find(item => item?.img_info?.prompt?.ori_prompt)\n      ?.img_info?.prompt ?? {};\n\n  const lastImageTask =\n    tasks.find(item => item.type === PicType.BackgroundStatic) ?? {};\n  const lastGifTask =\n    tasks.find(item => item.type === PicType.BackgroundGif) ?? {};\n  // Currently selected image: generate a successful display, the successful image, otherwise find the same background cover\n  if (gifDotStatus === DotStatus.Success) {\n    state.selectedImage = lastGifTask;\n  } else if (imageDotStatus === DotStatus.Success) {\n    state.selectedImage = lastImageTask;\n  } else {\n    // Uploaded manually, can't find it.\n    state.selectedImage =\n      tasks.find(item => item.img_info?.tar_uri === uri) ?? {};\n  }\n  // Current tab: only if, only gif when the state is not done, in the gif tab\n  if (gifDotStatus !== DotStatus.None) {\n    state.activeKey = GenerateType.Gif;\n  }\n  // The taskId currently being generated\n  if (\n    gifDotStatus === DotStatus.Generating ||\n    imageDotStatus === DotStatus.Generating\n  ) {\n    state.generatingTaskId =\n      gifDotStatus === DotStatus.Generating\n        ? lastGifTask?.id\n        : lastImageTask?.id;\n  }\n};\n\nexport const getInitAvatarInfo = (\n  data: GetPicTaskData,\n  state: GenerateAvatarModal,\n) => {\n  const { tasks = [] } = data || {};\n  const lastImageTask = tasks.find(\n    item => item.type === PicType.IconStatic,\n  ) || {\n    id: '',\n    img_info: {},\n  };\n  const lastGifTask = tasks.find(item => item.type === PicType.IconGif) || {\n    id: '',\n    img_info: {},\n  };\n  const gifDotStatus = getDotStatus(data, PicType.IconGif) as DotStatus;\n  const imageDotStatus = getDotStatus(data, PicType.IconStatic) as DotStatus;\n  if (\n    gifDotStatus === DotStatus.Success ||\n    imageDotStatus === DotStatus.Success\n  ) {\n    state.selectedImage =\n      gifDotStatus === DotStatus.Success ? lastGifTask : lastImageTask;\n  }\n\n  if (\n    gifDotStatus === DotStatus.Generating ||\n    imageDotStatus === DotStatus.Generating\n  ) {\n    state.generatingTaskId =\n      gifDotStatus === DotStatus.Generating\n        ? lastGifTask?.id\n        : lastImageTask?.id;\n  }\n  state.gif = {\n    dotStatus: gifDotStatus,\n    text: lastGifTask?.img_info?.prompt?.ori_prompt ?? '',\n    loading: gifDotStatus === DotStatus.Generating,\n    image: {\n      id: lastGifTask.img_info?.ori_uri ?? '',\n      img_info: {\n        tar_uri: lastGifTask.img_info?.ori_uri ?? '',\n        tar_url: lastGifTask.img_info?.ori_url ?? '',\n      },\n    },\n  };\n  state.image = {\n    dotStatus: imageDotStatus,\n    text: lastImageTask.img_info?.prompt?.ori_prompt ?? '',\n    loading: imageDotStatus === DotStatus.Generating,\n    textCustomizable: Boolean(lastImageTask.img_info?.prompt?.ori_prompt),\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { logger } from '@coze-arch/logger';\nimport { getFlags } from '@coze-arch/bot-flags';\nimport { PlaygroundApi } from '@coze-arch/bot-api';\n\nimport { getBotDetailIsReadonly } from '../utils/get-read-only';\nimport {\n  getInitAvatarInfo,\n  getInitBackgroundInfo,\n} from '../utils/generate-image';\nimport { initAvatarBackgroundWebSocket } from '../utils/avatar-background-socket';\nimport { useGenerateImageStore } from '../store/generate-image-store';\nimport { useBotInfoStore } from '../store/bot-info';\n\nexport const initGenerateImageStore = async () => {\n  try {\n    const {\n      updateImageList,\n      updateNoticeList,\n      setGenerateAvatarModalByImmer,\n      setGenerateBackgroundModalByImmer,\n      clearGenerateImageStore,\n    } = useGenerateImageStore.getState();\n    const { botId } = useBotInfoStore.getState();\n\n    const isReadOnly = getBotDetailIsReadonly();\n    const FLAGS = getFlags();\n\n    if (isReadOnly || !FLAGS['bot.studio.gif_avater_background']) {\n      return;\n    }\n\n    // Initialize it to prevent jumping from the create page to the edit page and bring the state of the created page\n    clearGenerateImageStore();\n\n    const resp = await PlaygroundApi.GetPicTask({\n      bot_id: botId,\n    });\n    const respData = resp?.data ?? {};\n    const { tasks = [], notices = [] } = respData;\n    updateImageList(tasks);\n    updateNoticeList(notices);\n    setGenerateAvatarModalByImmer(state => {\n      getInitAvatarInfo(respData, state);\n    });\n\n    setGenerateBackgroundModalByImmer(state => {\n      getInitBackgroundInfo(respData, state);\n    });\n\n    initAvatarBackgroundWebSocket();\n  } catch (error) {\n    const e = error instanceof Error ? error : new Error(error as string);\n    logger.error({ error: e });\n  }\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/naming-convention */\nimport { type StoreApi, type UseBoundStore } from 'zustand';\nimport type { Diff } from 'deep-diff';\n\n/**\n * stabilization delay time\n * @readonly\n * @enum {number}\n */\nexport enum DebounceTime {\n  /** For saving operations that require an immediate response, such as buttons or drop-down selections  */\n  Immediate = 0,\n  /** For saving operations that require a short response time, such as dragging and dropping */\n  Medium = 500,\n  /** Suitable for operations such as text input */\n  Long = 1000,\n}\n\n/** Functional form when the trigger configuration is declared, used to specify when the field will trigger at runtime */\nexport type FunctionDebounceTime = () => DebounceTime;\n\n/** The array form when the trigger configuration is declared, which is used to specify the trigger timing when the array content changes */\nexport interface ArrayDebounceTime {\n  arrayType: boolean;\n  action:\n    | DebounceTime\n    | {\n        N?: DebounceTime;\n        D?: DebounceTime;\n        E?: DebounceTime;\n      };\n}\n\n/** The object form when the trigger configuration declaration is used to specify the triggering time of multiple fields separately */\nexport interface ObjectDebounceTime {\n  default: DebounceTime;\n  [index: string]: DebounceTime | ArrayDebounceTime;\n}\n\nexport type DebounceConfig =\n  | DebounceTime\n  | ObjectDebounceTime\n  | FunctionDebounceTime;\n\nexport type FlexibleState<T> = T | any;\n\nexport type HostedObserverConfig<StoreType, ScopeKey, ScopeStateType> = Omit<\n  AutosaveObserverConfig<StoreType, ScopeKey, ScopeStateType>,\n  'saveRequest' | 'eventCallBacks' | 'unobserver' | 'immediate'\n>;\n\nexport type AutosaveObserverProps<StoreType, ScopeKey, ScopeStateType> =\n  AutosaveObserverConfig<StoreType, ScopeKey, ScopeStateType> & {\n    store: UseBoundStore<StoreApi<StoreType>>;\n  };\n\nexport type SelectorType<StoreType, ScopeStateType> =\n  | ((store: StoreType) => ScopeStateType)\n  | {\n      deps: ((store: StoreType) => ScopeStateType)[];\n      transformer: (...args: ScopeStateType[]) => FlexibleState<ScopeStateType>;\n    };\n\nexport interface AutosaveObserverConfig<StoreType, ScopeKey, ScopeStateType> {\n  /** The type of data field being hosted */\n  key: ScopeKey;\n  /** stabilization delay time */\n  debounce?: DebounceConfig;\n  /** Store property selectors that need to be listened to, support configuration dependencies */\n  selector: SelectorType<StoreType, ScopeStateType>;\n  /** Middleware, which supports business chain processing of monitoring data */\n  middleware?: MiddlewareHanderMap<ScopeStateType>;\n  /** Whether to save the current field immediately */\n  immediate?: boolean;\n  /** saved request */\n  saveRequest: SaveRequest<ScopeStateType, ScopeKey>;\n  /** Callbacks when hosted data is unsubscribed */\n  unobserver?: () => void;\n  /** Life Cycle */\n  eventCallBacks?: EventCallBacks<ScopeStateType, ScopeKey>;\n}\n\nexport type SaveRequest<ScopeStateType, ScopeKey> = (\n  payload: FlexibleState<ScopeStateType>,\n  key: ScopeKey,\n  diff: Diff<ScopeStateType, ScopeStateType>[],\n) => Promise<FlexibleState<ScopeStateType>>;\n\nexport type SaveMiddlewareHander<ScopeStateType> = (\n  data: FlexibleState<ScopeStateType>,\n) => Promise<FlexibleState<ScopeStateType>> | FlexibleState<ScopeStateType>;\n\nexport interface MiddlewareHanderMap<ScopeStateType> {\n  /** Lifecycle - After detecting changes */\n  onBeforeSave?: SaveMiddlewareHander<ScopeStateType>;\n  /** Lifecycle - after successful saving */\n  onAfterSave?: SaveMiddlewareHander<ScopeStateType>;\n}\n\nexport interface EventCallBacks<ScopeStateType, ScopeKey> {\n  /** Lifecycle - After detecting changes */\n  onBeforeSave?: (params: {\n    data: FlexibleState<ScopeStateType>;\n    key: ScopeKey;\n  }) => void | Promise<void>;\n  /** Lifecycle - after successful saving */\n  onAfterSave?: (params: {\n    data: FlexibleState<ScopeStateType>;\n    key: ScopeKey;\n  }) => void | Promise<void>;\n  /** Life Cycle - Abnormal */\n  onError?: (params: { error: Error; key: ScopeKey }) => void;\n}\n\n// The path of the changed key compared, corresponding to the array in the form of number\nexport type PathType = string | number;\n\nexport interface UseStoreType<StoreType, ScopeStateType> {\n  subscribe: {\n    (\n      listener: (\n        selectedState: ScopeStateType,\n        previousSelectedState: ScopeStateType,\n      ) => void,\n    ): () => void;\n    <U>(\n      selector: (state: StoreType) => U,\n      listener: (selectedState: U, previousSelectedState: U) => void,\n      options?: {\n        equalityFn?: (a: U, b: U) => boolean;\n        fireImmediately?: boolean;\n      },\n    ): () => void;\n  };\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { ItemType } from '@coze-arch/bot-api/developer_api';\n\n// The scope server level that automatically saves the update interface will maintain ItemType, and other scope front-ends are maintained in ItemTypeExtra.\nexport enum ItemTypeExtra {\n  MultiAgent = 1024,\n  TTS = 1025,\n  ConnectorType = 1026,\n  ChatBackGround = 1027,\n  Shortcut = 1028,\n  QueryCollect = 1029,\n  LayoutInfo = 1030,\n  TaskInfo = 1031,\n  TimeCapsule = 1032,\n}\n\nexport type BizKey = ItemType | ItemTypeExtra | undefined;\nexport type ScopeStateType = any;\nexport { ItemType };\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  isObject as isObjectBase,\n  isFunction as isFunctionBase,\n} from 'lodash-es';\n\nimport {\n  type DebounceConfig,\n  type ObjectDebounceTime,\n  type SaveMiddlewareHander,\n  type FunctionDebounceTime,\n} from '../type/index';\n\nexport function isFunction(\n  value: DebounceConfig,\n): value is FunctionDebounceTime {\n  return isFunctionBase(value);\n}\n\nexport function isObject(value: DebounceConfig): value is ObjectDebounceTime {\n  return isObjectBase(value);\n}\n\n/**\n * Get the parameters required to save the interface call\n */\nexport const getPayloadByFormatter = async <T>(\n  state: T,\n  formatter?: SaveMiddlewareHander<T>,\n) => {\n  if (formatter) {\n    return await formatter(state);\n  }\n  return state;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type StoreApi, type UseBoundStore } from 'zustand';\nimport { createSelector } from 'reselect';\nimport { debounce, has, get, type DebouncedFunc } from 'lodash-es';\nimport diff, { type Diff } from 'deep-diff';\n\nimport { isFunction, isObject, getPayloadByFormatter } from '../utils';\nimport {\n  DebounceTime,\n  type AutosaveObserverConfig,\n  type UseStoreType,\n  type PathType,\n  type AutosaveObserverProps,\n} from '../type/index';\n\nexport class AutosaveObserver<StoreType, ScopeKey, ScopeStateType> {\n  private store: UseBoundStore<StoreApi<StoreType>>;\n\n  public lock: boolean;\n  public debouncedSaveFunc: DebouncedFunc<() => Promise<void>>;\n  public nextState!: ScopeStateType;\n  public prevState!: ScopeStateType;\n  private diff!: Diff<ScopeStateType, ScopeStateType>[];\n\n  private unobserver?: () => void;\n  private unsubscribe!: () => void;\n  public config: AutosaveObserverConfig<StoreType, ScopeKey, ScopeStateType>;\n\n  constructor(\n    props: AutosaveObserverProps<StoreType, ScopeKey, ScopeStateType>,\n  ) {\n    const { store, ...config } = props;\n    this.store = store;\n    this.lock = false;\n    this.config = config;\n\n    // Subscription field initialization\n    this.initSubscribe();\n  }\n\n  private initSubscribe = () => {\n    const memoizeSelector = this.getMemoizeSelector();\n\n    this.unsubscribe = (\n      this.store as unknown as UseStoreType<StoreType, ScopeStateType>\n    ).subscribe(memoizeSelector, this.subscribeCallback);\n  };\n\n  private getMemoizeSelector = () => {\n    if (typeof this.config.selector === 'function') {\n      return this.config.selector;\n    } else {\n      // Create a memorable selector with createSelector\n      const { deps, transformer } = this.config.selector;\n      return createSelector(deps, transformer);\n    }\n  };\n\n  private subscribeCallback = async (nextState, prevState) => {\n    console.log('nextState :>> ', nextState);\n    console.log('prevState :>> ', prevState);\n\n    // The state returned by the selector\n    this.nextState = nextState;\n    this.prevState = prevState;\n\n    if (this.lock) {\n      return;\n    }\n\n    const diffChange: Diff<ScopeStateType, ScopeStateType>[] | undefined = diff(\n      prevState,\n      nextState,\n    );\n\n    console.log('diffChange:>>', diffChange);\n    if (!diffChange) {\n      return;\n    }\n    this.debouncedSaveFunc?.cancel?.();\n\n    this.diff = diffChange;\n\n    const delayTime = this.getTriggerDelayTime(prevState, diffChange);\n\n    console.log('delayTime:>>>>>', delayTime);\n\n    if (delayTime === 0 || this.config.immediate) {\n      await this.parsedSaveFunc();\n      return;\n    }\n    this.debouncedSaveFunc = debounce(this.parsedSaveFunc, delayTime);\n\n    await this.debouncedSaveFunc();\n  };\n\n  private parsedSaveFunc = async () => {\n    // Middleware - Before saving\n    const beforeSavePayload = await getPayloadByFormatter<ScopeStateType>(\n      this.nextState,\n      this.config?.middleware?.onBeforeSave,\n    );\n    // Life cycle - before saving\n    await this.config?.eventCallBacks?.onBeforeSave?.({\n      key: this.config.key,\n      data: beforeSavePayload,\n    });\n\n    console.log('beforeSavePayload:>>', beforeSavePayload);\n    try {\n      await this.config.saveRequest(\n        beforeSavePayload,\n        this.config.key,\n        this.diff,\n      );\n\n      // Middleware - after saving\n      const afterSavePayload = await getPayloadByFormatter<ScopeStateType>(\n        this.nextState,\n        this.config?.middleware?.onAfterSave,\n      );\n      console.log('afterSavePayload:>>', afterSavePayload);\n\n      // Life cycle - after saving\n      await this.config?.eventCallBacks?.onAfterSave?.({\n        key: this.config.key,\n        data: afterSavePayload,\n      });\n    } catch (error) {\n      console.log('error:>>', error);\n      // Life Cycle - Abnormal\n      this.config?.eventCallBacks?.onError?.({\n        key: this.config.key,\n        error: error as Error,\n      });\n    }\n  };\n\n  /**\n   * unsubscribe\n   */\n  public close = () => {\n    this.debouncedSaveFunc?.flush();\n    this.unsubscribe();\n    this.unobserver?.();\n  };\n\n  /**\n   * Get the trigger delay time caused by the state change\n   * @param prevState selector to store content\n   * @param diffChange the diff before and after comparison\n   * @returns delay time\n   */\n  private getTriggerDelayTime = (\n    prevState?: ScopeStateType,\n    diffChange?: Diff<ScopeStateType, ScopeStateType>[],\n  ) => {\n    const configDebounce = this.config.debounce;\n\n    if (!configDebounce) {\n      return DebounceTime.Immediate;\n    }\n\n    if (isFunction(configDebounce)) {\n      return configDebounce();\n    }\n\n    if (!isObject(configDebounce)) {\n      return configDebounce;\n    }\n\n    if (!diffChange || diffChange.length === 0) {\n      return configDebounce.default;\n    }\n\n    const targetDelayTimes: number[] = [];\n    for (const change of diffChange) {\n      const changePath = change.path;\n      const debouncePath = this.getdebouncePath(changePath);\n\n      if (\n        !changePath ||\n        !has(prevState, changePath) ||\n        typeof debouncePath === 'number'\n      ) {\n        targetDelayTimes.push(configDebounce.default);\n        continue;\n      }\n      const debounceType = get(\n        configDebounce,\n        debouncePath,\n        configDebounce.default,\n      );\n      if (!isObject(debounceType)) {\n        targetDelayTimes.push(debounceType);\n        continue;\n      }\n\n      if (!debounceType.arrayType) {\n        targetDelayTimes.push(configDebounce.default);\n        continue;\n      }\n\n      if (!isObject(debounceType.action as DebounceTime)) {\n        targetDelayTimes.push(debounceType.action as DebounceTime);\n      } else {\n        const kind =\n          change.kind === 'A' && change.item?.kind\n            ? change.item?.kind\n            : change.kind;\n        const triggerKind = debounceType.action[kind];\n        targetDelayTimes.push(triggerKind);\n      }\n    }\n\n    return Math.min(...targetDelayTimes);\n  };\n\n  /**\n   * Gets the key that changes the configuration corresponding to the trigger declaration\n   * @param changePath diff path\n   * @returns path key\n   */\n  private getdebouncePath = (changePath?: PathType[]) => {\n    if (!changePath) {\n      return '';\n    }\n\n    const indexPath = path => typeof path === 'number';\n    const isArrayPath = changePath.some(indexPath);\n\n    if (isArrayPath) {\n      return changePath[0];\n    }\n\n    return changePath.join('.');\n  };\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type StoreApi, type UseBoundStore } from 'zustand';\n\nimport {\n  type AutosaveObserverConfig,\n  type HostedObserverConfig,\n  type EventCallBacks,\n  type SaveRequest,\n} from '../type';\nimport { AutosaveObserver } from './observer';\n\nexport interface AutosaveManagerProps<StoreType, ScopeKey, ScopeStateType> {\n  store: UseBoundStore<StoreApi<StoreType>>;\n  registers: HostedObserverConfig<StoreType, ScopeKey, ScopeStateType>[];\n  saveRequest: SaveRequest<ScopeStateType, ScopeKey>;\n  eventCallBacks?: EventCallBacks<ScopeStateType, ScopeKey>;\n}\n\nexport class AutosaveManager<StoreType, ScopeKey, ScopeStateType> {\n  private configList: AutosaveObserverConfig<\n    StoreType,\n    ScopeKey,\n    ScopeStateType\n  >[];\n  private observerList: AutosaveObserver<StoreType, ScopeKey, ScopeStateType>[];\n  private store: UseBoundStore<StoreApi<StoreType>>;\n\n  private eventCallBacks?: EventCallBacks<ScopeStateType, ScopeKey>;\n  private saveRequest: SaveRequest<ScopeStateType, ScopeKey>;\n\n  constructor(\n    props: AutosaveManagerProps<StoreType, ScopeKey, ScopeStateType>,\n  ) {\n    this.configList = [];\n    this.observerList = [];\n    this.saveRequest = props.saveRequest;\n    this.eventCallBacks = props.eventCallBacks;\n    this.store = props.store;\n\n    this.register(props.registers);\n  }\n\n  /**\n   * Register the data source and define the corresponding Observer configuration\n   * @param _config\n   */\n  public register = (\n    registers: HostedObserverConfig<StoreType, ScopeKey, ScopeStateType>[],\n  ) => {\n    this.close();\n    this.configList = [];\n\n    registers.forEach(register => {\n      const config: AutosaveObserverConfig<\n        StoreType,\n        ScopeKey,\n        ScopeStateType\n      > = {\n        ...register,\n        eventCallBacks: this.eventCallBacks,\n        saveRequest: this.saveRequest,\n      };\n      this.configList.push(config);\n    });\n  };\n\n  /**\n   * Launch Manager Module\n   */\n  public start = () => {\n    if (this.observerList.length > 0) {\n      return;\n    }\n    this.observerList = this.configList.map(\n      config =>\n        new AutosaveObserver({\n          store: this.store,\n          ...config,\n        }),\n    );\n  };\n\n  /**\n   * Turn off all property listeners under the Manager module\n   */\n  public close = () => {\n    this.observerList.forEach(observer => observer.close());\n    this.observerList = [];\n  };\n\n  /**\n   * save manually\n   * @param params\n   */\n  public manualSave = async (key: ScopeKey, params: ScopeStateType) => {\n    const config = this.getConfig(key);\n    if (!config) {\n      return;\n    }\n    const { middleware, eventCallBacks, saveRequest } = config;\n    const beforeSavePayload = middleware?.onBeforeSave\n      ? await middleware?.onBeforeSave(params)\n      : params;\n    eventCallBacks?.onBeforeSave?.(beforeSavePayload);\n\n    await saveRequest(beforeSavePayload as ScopeStateType, key, []);\n\n    const afterSavePayload = middleware?.onAfterSave\n      ? await middleware?.onAfterSave(params)\n      : params;\n    eventCallBacks?.onAfterSave?.(afterSavePayload);\n  };\n\n  /**\n   * Turn off autosave during a callback\n   * @param params\n   */\n  public handleWithoutAutosave = async (params: {\n    key: ScopeKey;\n    handler: () => Promise<void>;\n  }) => {\n    const { key, handler } = params;\n\n    const observers = this.observerList.filter(o => o.config.key === key);\n    if (observers.length) {\n      observers.forEach(o => (o.lock = true));\n      await handler();\n      observers.forEach(o => (o.lock = false));\n    }\n  };\n\n  /**\n   * Trigger save immediately\n   * @param key\n   */\n  public saveFlush = (key: ScopeKey) => {\n    const observer = this.getObserver(key);\n    observer?.debouncedSaveFunc?.flush?.();\n  };\n\n  /**\n   * Trigger all saves immediately\n   * @param key\n   */\n  public saveFlushAll = () => {\n    this.observerList.forEach(observer =>\n      observer?.debouncedSaveFunc?.flush?.(),\n    );\n  };\n\n  /**\n   * Get target observer configuration\n   * @param key\n   */\n  private getObserver = (key: ScopeKey) =>\n    this.observerList.find(i => i.config.key === key);\n\n  /**\n   * Get target configuration item\n   * @param key\n   */\n  private getConfig = (key: ScopeKey) =>\n    this.configList.find(i => i.key === key);\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { PlaygroundApi } from '@coze-arch/bot-api';\nimport { type SaveRequest } from '@coze-studio/autosave';\n\nimport { storage } from '@/utils/storage';\nimport { useBotInfoStore } from '@/store/bot-info';\nimport { type BizKey, type ScopeStateType } from '@/save-manager/types';\n\nimport { saveFetcher } from '../utils/save-fetcher';\n\n/**\n * Autosave Uniform Request Method\n */\nexport const saveRequest: SaveRequest<ScopeStateType, BizKey> = async (\n  payload: ScopeStateType,\n  itemType: BizKey,\n) => {\n  const { botId } = useBotInfoStore.getState();\n\n  await saveFetcher(\n    async () =>\n      await PlaygroundApi.UpdateDraftBotInfoAgw({\n        bot_info: {\n          bot_id: botId,\n          ...payload,\n        },\n        base_commit_version: storage.baseVersion,\n      }),\n    itemType,\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DebounceTime, type HostedObserverConfig } from '@coze-studio/autosave';\n\nimport {\n  usePersonaStore,\n  type PersonaStore,\n  type RequiredBotPrompt,\n} from '@/store/persona';\nimport { ItemType } from '@/save-manager/types';\n\ntype RegisterSystemContent = HostedObserverConfig<\n  PersonaStore,\n  ItemType,\n  RequiredBotPrompt\n>;\n\nexport const personaConfig: RegisterSystemContent = {\n  key: ItemType.SYSTEMINFO,\n  selector: state => state.systemMessage,\n  debounce: () => {\n    const { systemMessage } = usePersonaStore.getState();\n    const { isOptimize } = systemMessage;\n\n    console.log('systemMessage:>>', systemMessage);\n    console.log('isOptimize:>>', isOptimize);\n    if (isOptimize) {\n      return DebounceTime.Immediate;\n    }\n    return DebounceTime.Long;\n  },\n  middleware: {\n    onBeforeSave: nextState => ({\n      prompt_info: usePersonaStore.getState().transformVo2Dto(nextState),\n    }),\n  },\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AutosaveManager } from '@coze-studio/autosave';\n\nimport {\n  usePersonaStore,\n  type PersonaStore,\n  type RequiredBotPrompt,\n} from '@/store/persona';\nimport { type ItemType } from '@/save-manager/types';\n\nimport { saveRequest } from '../request';\nimport { personaConfig } from './config';\n\nexport const personaSaveManager = new AutosaveManager<\n  PersonaStore,\n  ItemType,\n  RequiredBotPrompt\n>({\n  store: usePersonaStore,\n  registers: [personaConfig],\n  saveRequest,\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ModelInfo } from '@coze-arch/bot-api/developer_api';\nimport { DebounceTime, type HostedObserverConfig } from '@coze-studio/autosave';\n\nimport { type ModelStore, useModelStore } from '@/store/model';\nimport { ItemType } from '@/save-manager/types';\n\ntype RegisterSystemContent = HostedObserverConfig<\n  ModelStore,\n  ItemType,\n  ModelInfo\n>;\n\nexport const modelConfig: RegisterSystemContent = {\n  key: ItemType.OTHERINFO,\n  selector: store => store.config,\n  debounce: {\n    default: DebounceTime.Immediate,\n    temperature: DebounceTime.Medium,\n    max_tokens: DebounceTime.Medium,\n    'ShortMemPolicy.HistoryRound': DebounceTime.Medium,\n  },\n  middleware: {\n    onBeforeSave: dataSource => ({\n      model_info: useModelStore.getState().transformVo2Dto(dataSource),\n    }),\n  },\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ModelInfo } from '@coze-arch/bot-api/developer_api';\nimport { AutosaveManager } from '@coze-studio/autosave';\n\nimport { useModelStore, type ModelStore } from '@/store/model';\nimport { type BizKey } from '@/save-manager/types';\n\nimport { saveRequest } from '../request';\nimport { modelConfig } from './config';\n\nexport const modelSaveManager = new AutosaveManager<\n  ModelStore,\n  BizKey,\n  ModelInfo\n>({\n  store: useModelStore,\n  registers: [modelConfig],\n  saveRequest,\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { cloneDeep, uniqBy } from 'lodash-es';\nimport { DebounceTime, type HostedObserverConfig } from '@coze-studio/autosave';\n\nimport type { WorkFlowItemType } from '@/types/skill';\nimport { type BotSkillStore, useBotSkillStore } from '@/store/bot-skill';\nimport { ItemType } from '@/save-manager/types';\n\ntype RegisterWorkflows = HostedObserverConfig<\n  BotSkillStore,\n  ItemType,\n  WorkFlowItemType[]\n>;\n\nexport const workflowsConfig: RegisterWorkflows = {\n  key: ItemType.WORKFLOW,\n  selector: store => store.workflows,\n  debounce: DebounceTime.Immediate,\n  middleware: {\n    onBeforeSave: (dataSource: WorkFlowItemType[]) => {\n      const workflowsToBackend = cloneDeep(dataSource);\n\n      const filterList = uniqBy(workflowsToBackend, 'workflow_id').map(v => {\n        // Solve the problem of loading the icon due to the failure of the icon link and report an error. Do not save the plugin_icon of the invalid workflow here, but pull the latest valid icon link every time.\n        v.plugin_icon = '';\n        return v;\n      });\n      return {\n        workflow_info_list: useBotSkillStore\n          .getState()\n          .transformVo2Dto.workflow(filterList),\n      };\n    },\n  },\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { merge } from 'lodash-es';\nimport { type BotInfoForUpdate } from '@coze-arch/idl/playground_api';\nimport { DebounceTime, type HostedObserverConfig } from '@coze-studio/autosave';\n\nimport { type TTSInfo, type VoicesInfo } from '@/types/skill';\nimport { transformVo2Dto } from '@/store/bot-skill/transform';\nimport { type BotSkillStore } from '@/store/bot-skill';\nimport { ItemType } from '@/save-manager/types';\n\ninterface Values {\n  voicesInfo: VoicesInfo;\n  tts: TTSInfo;\n}\n\ntype RegisterVariables = HostedObserverConfig<BotSkillStore, ItemType, Values>;\n\nexport const voicesInfoConfig: RegisterVariables = {\n  key: ItemType.PROFILEMEMORY,\n  selector: store => ({ voicesInfo: store.voicesInfo, tts: store.tts }),\n  debounce: DebounceTime.Immediate,\n  middleware: {\n    // Be careful when changing any warnings\n    onBeforeSave: (\n      values: Values,\n    ): Pick<Required<BotInfoForUpdate>, 'voices_info'> => ({\n      voices_info: merge(\n        {},\n        transformVo2Dto.tts(values.tts),\n        transformVo2Dto.voicesInfo(values.voicesInfo),\n      ),\n    }),\n  },\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { REPORT_EVENTS as ReportEventNames } from '@coze-arch/report-events';\nimport { DebounceTime, type HostedObserverConfig } from '@coze-studio/autosave';\nimport { CustomError } from '@coze-arch/bot-error';\n\nimport { uniqMemoryList } from '@/utils/uniq-memory-list';\nimport { type VariableItem, VariableKeyErrType } from '@/types/skill';\nimport { usePageRuntimeStore } from '@/store/page-runtime';\nimport { type BotSkillStore, useBotSkillStore } from '@/store/bot-skill';\nimport { ItemType } from '@/save-manager/types';\n\ntype RegisterVariables = HostedObserverConfig<\n  BotSkillStore,\n  ItemType,\n  VariableItem[]\n>;\n\nexport const variablesConfig: RegisterVariables = {\n  key: ItemType.PROFILEMEMORY,\n  selector: store => store.variables,\n  debounce: DebounceTime.Immediate,\n  middleware: {\n    onBeforeSave: dataSource => {\n      const { editable } = usePageRuntimeStore.getState();\n\n      const filteredVariables = uniqMemoryList(dataSource).filter(i => {\n        const errType = i?.errType || VariableKeyErrType.KEY_CHECK_PASS;\n\n        return errType > VariableKeyErrType.KEY_CHECK_PASS;\n      });\n\n      if (!filteredVariables.length && editable) {\n        return {\n          variable_list: useBotSkillStore\n            .getState()\n            .transformVo2Dto.variables(dataSource),\n        };\n      }\n      throw new CustomError(\n        ReportEventNames.parmasValidation,\n        'botSkill.variables return nothing',\n      );\n    },\n  },\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DebounceTime, type HostedObserverConfig } from '@coze-studio/autosave';\n\nimport { type BotSkillStore, useBotSkillStore } from '@/store/bot-skill';\nimport { ItemType } from '@/save-manager/types';\n\ntype RegisterTaskInfo = HostedObserverConfig<BotSkillStore, ItemType, boolean>;\n\nexport const taskInfoConfig: RegisterTaskInfo = {\n  key: ItemType.TASK,\n  selector: store => store.taskInfo.user_task_allowed,\n  debounce: DebounceTime.Immediate,\n  middleware: {\n    onBeforeSave: dataSource => ({\n      task_info: useBotSkillStore.getState().transformVo2Dto.task({\n        user_task_allowed: dataSource,\n      }),\n    }),\n  },\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DebounceTime, type HostedObserverConfig } from '@coze-studio/autosave';\n\nimport type { BotSuggestionConfig } from '@/types/skill';\nimport { type BotSkillStore, useBotSkillStore } from '@/store/bot-skill';\nimport { ItemType } from '@/save-manager/types';\n\ntype RegisterSuggestionConfig = HostedObserverConfig<\n  BotSkillStore,\n  ItemType,\n  BotSuggestionConfig\n>;\n\nexport const suggestionConfig: RegisterSuggestionConfig = {\n  key: ItemType.SUGGESTREPLY,\n  selector: store => store.suggestionConfig,\n  debounce: {\n    default: DebounceTime.Immediate,\n    customized_suggest_prompt: DebounceTime.Long,\n  },\n  middleware: {\n    onBeforeSave: dataSource => ({\n      suggest_reply_info: useBotSkillStore\n        .getState()\n        .transformVo2Dto.suggestionConfig(dataSource),\n    }),\n  },\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { cloneDeep } from 'lodash-es';\nimport { DebounceTime, type HostedObserverConfig } from '@coze-studio/autosave';\n\nimport type { EnabledPluginApi } from '@/types/skill';\nimport { type BotSkillStore, useBotSkillStore } from '@/store/bot-skill';\nimport { ItemType } from '@/save-manager/types';\n\ntype RegisterSystemContent = HostedObserverConfig<\n  BotSkillStore,\n  ItemType,\n  EnabledPluginApi[]\n>;\n\nexport const pluginConfig: RegisterSystemContent = {\n  key: ItemType.APIINFO,\n  selector: store => store.pluginApis,\n  debounce: DebounceTime.Immediate,\n  middleware: {\n    onBeforeSave: dataSource => {\n      // You must clone deeply first. Processing the original data will change the value of the store.\n      const clonePluginApis = cloneDeep(dataSource);\n\n      const newPluginApis = clonePluginApis.map(item => {\n        // AI generated animation only takes effect once, deleted when requesting an interface\n        delete item.autoAddCss;\n        return item;\n      });\n      return {\n        plugin_info_list: useBotSkillStore\n          .getState()\n          .transformVo2Dto.plugin(newPluginApis),\n      };\n    },\n  },\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type OnboardingInfo } from '@coze-arch/bot-api/playground_api';\nimport { DebounceTime, type HostedObserverConfig } from '@coze-studio/autosave';\n\nimport type { ExtendOnboardingContent } from '@/types/skill';\nimport { useBotSkillStore } from '@/store/bot-skill';\nimport type { BotSkillStore } from '@/store/bot-skill';\nimport { ItemType } from '@/save-manager/types';\n\ntype RegisterOnboardingContent = HostedObserverConfig<\n  BotSkillStore,\n  ItemType,\n  ExtendOnboardingContent\n>;\n\nexport const onboardingConfig: RegisterOnboardingContent = {\n  key: ItemType.ONBOARDING,\n  selector: {\n    deps: [state => state.onboardingContent],\n    transformer: onboardingContent =>\n      useBotSkillStore.getState().transformVo2Dto.onboarding(onboardingContent),\n  },\n  debounce: {\n    default: DebounceTime.Immediate,\n    prologue: DebounceTime.Long,\n    suggested_questions: {\n      arrayType: true,\n      action: {\n        N: DebounceTime.Immediate,\n        D: DebounceTime.Immediate,\n        E: DebounceTime.Long,\n      },\n    },\n  },\n  middleware: {\n    onBeforeSave: (dataSource: OnboardingInfo) => ({\n      onboarding_info: dataSource,\n    }),\n  },\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type LayoutInfo } from '@coze-arch/idl/developer_api';\nimport { DebounceTime, type HostedObserverConfig } from '@coze-studio/autosave';\n\nimport { type BotSkillStore, useBotSkillStore } from '@/store/bot-skill';\nimport { ItemTypeExtra } from '@/save-manager/types';\n\ntype RegisterLayoutInfo = HostedObserverConfig<\n  BotSkillStore,\n  ItemTypeExtra,\n  LayoutInfo\n>;\n\nexport const layoutInfoConfig: RegisterLayoutInfo = {\n  key: ItemTypeExtra.LayoutInfo,\n  selector: store => store.layoutInfo,\n  debounce: DebounceTime.Immediate,\n  middleware: {\n    onBeforeSave: layoutInfo => ({\n      layout_info: useBotSkillStore\n        .getState()\n        .transformVo2Dto.layoutInfo(layoutInfo),\n    }),\n  },\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DebounceTime, type HostedObserverConfig } from '@coze-studio/autosave';\n\nimport type { KnowledgeConfig } from '@/types/skill';\nimport { type BotSkillStore, useBotSkillStore } from '@/store/bot-skill';\nimport { ItemType } from '@/save-manager/types';\n\ntype RegisterKnowledge = HostedObserverConfig<\n  BotSkillStore,\n  ItemType,\n  KnowledgeConfig\n>;\n\nexport const knowledgeConfig: RegisterKnowledge = {\n  key: ItemType.DataSet,\n  selector: store => store.knowledge,\n  debounce: {\n    default: DebounceTime.Immediate,\n    'dataSetInfo.min_score': DebounceTime.Medium,\n    'dataSetInfo.top_k': DebounceTime.Medium,\n  },\n  middleware: {\n    onBeforeSave: dataSource => ({\n      knowledge: useBotSkillStore\n        .getState()\n        .transformVo2Dto.knowledge(dataSource),\n    }),\n  },\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type BackgroundImageInfo } from '@coze-arch/bot-api/developer_api';\nimport { DebounceTime, type HostedObserverConfig } from '@coze-studio/autosave';\n\nimport type { BotSkillStore } from '@/store/bot-skill';\nimport { ItemTypeExtra } from '@/save-manager/types';\n\ntype RegisterChatBackgroundConfig = HostedObserverConfig<\n  BotSkillStore,\n  ItemTypeExtra,\n  BackgroundImageInfo[]\n>;\n\nexport const chatBackgroundConfig: RegisterChatBackgroundConfig = {\n  key: ItemTypeExtra.ChatBackGround,\n  selector: store => store.backgroundImageInfoList,\n  debounce: DebounceTime.Immediate,\n  middleware: {\n    onBeforeSave: dataSource => ({\n      background_image_info_list: dataSource,\n    }),\n  },\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AutosaveManager } from '@coze-studio/autosave';\n\nimport { useBotSkillStore, type BotSkillStore } from '@/store/bot-skill';\nimport { type BizKey, type ScopeStateType } from '@/save-manager/types';\n\nimport { saveRequest } from '../request';\nimport { registers } from './configs';\n\nexport const botSkillSaveManager = new AutosaveManager<\n  BotSkillStore,\n  BizKey,\n  ScopeStateType\n>({\n  store: useBotSkillStore,\n  registers,\n  saveRequest,\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type HostedObserverConfig } from '@coze-studio/autosave';\n\nimport { type BotSkillStore } from '@/store/bot-skill';\nimport { type BizKey, type ScopeStateType } from '@/save-manager/types';\n\nimport { workflowsConfig } from './workflows';\nimport { voicesInfoConfig } from './voices-info';\nimport { variablesConfig } from './variables';\nimport { taskInfoConfig } from './task-info';\nimport { suggestionConfig } from './suggestion-config';\nimport { pluginConfig } from './plugin';\nimport { onboardingConfig } from './onboarding-content';\nimport { layoutInfoConfig } from './layout-info';\nimport { knowledgeConfig } from './knowledge';\nimport { chatBackgroundConfig } from './chat-background';\n\nexport const registers: HostedObserverConfig<\n  BotSkillStore,\n  BizKey,\n  ScopeStateType\n>[] = [\n  pluginConfig,\n  chatBackgroundConfig,\n  onboardingConfig,\n  knowledgeConfig,\n  layoutInfoConfig,\n  suggestionConfig,\n  taskInfoConfig,\n  variablesConfig,\n  workflowsConfig,\n  voicesInfoConfig,\n];\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { personaSaveManager } from './persona';\nimport { modelSaveManager } from './model';\nimport { botSkillSaveManager } from './bot-skill';\n\nconst managers = [personaSaveManager, botSkillSaveManager, modelSaveManager];\n\nexport const autosaveManager = {\n  start: () => {\n    console.log('start:>>');\n    managers.forEach(manager => {\n      manager.start();\n    });\n  },\n  close: () => {\n    console.log('close:>>');\n    managers.forEach(manager => {\n      manager.close();\n    });\n  },\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DebounceTime, type HostedObserverConfig } from '@coze-studio/autosave';\n\nimport { ItemTypeExtra } from '../../types';\nimport type { Agent } from '../../../types/agent';\nimport { type MultiAgentStore } from '../../../store/multi-agent/store';\n\ntype RegisterSystemContent = HostedObserverConfig<\n  MultiAgentStore,\n  ItemTypeExtra,\n  Agent\n>;\n\nexport const registerMultiAgentConfig: RegisterSystemContent = {\n  key: ItemTypeExtra.MultiAgent,\n  selector: state => state.agents?.[0],\n  debounce: {\n    default: DebounceTime.Immediate,\n    description: DebounceTime.Long,\n    'position.x': DebounceTime.Medium,\n    'position.y': DebounceTime.Medium,\n    'skills.knowledge.dataSetInfo.min_score': DebounceTime.Medium,\n    'skills.knowledge.dataSetInfo.top_k': DebounceTime.Medium,\n    'skills.knowledge.dataSetInfo.no_recall_reply_customize_prompt':\n      DebounceTime.Long,\n    'model.temperature': DebounceTime.Medium,\n    'model.max_tokens': DebounceTime.Medium,\n    'model.top_p': DebounceTime.Medium,\n    'model.ShortMemPolicy.HistoryRound': DebounceTime.Medium,\n    prompt: DebounceTime.Long, // Agent prompt word\n    'suggestion.customized_suggest_prompt': DebounceTime.Long,\n    intents: { arrayType: true, action: { E: DebounceTime.Long } },\n  },\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useSpaceStore } from '@coze-arch/bot-studio-store';\nimport { PlaygroundApi } from '@coze-arch/bot-api';\nimport { AutosaveManager, type SaveRequest } from '@coze-studio/autosave';\n\nimport { storage } from '@/utils/storage';\nimport type { Agent } from '@/types/agent';\nimport {\n  type MultiAgentStore,\n  useMultiAgentStore,\n} from '@/store/multi-agent/store';\nimport { useBotInfoStore } from '@/store/bot-info';\n\nimport { saveFetcher } from '../../utils/save-fetcher';\nimport { ItemTypeExtra } from '../../types';\nimport { registerMultiAgentConfig } from './config';\n\nconst saveRequestAgent: SaveRequest<Agent, ItemTypeExtra> = async (\n  payload: Agent,\n) =>\n  await saveFetcher(() => {\n    const params = useMultiAgentStore.getState().transformVo2Dto.agent(payload);\n    return PlaygroundApi.UpdateAgentV2({\n      ...params,\n      id: payload.id,\n      bot_id: useBotInfoStore.getState().botId,\n      space_id: useSpaceStore.getState().getSpaceId(),\n      base_commit_version: storage.baseVersion,\n    });\n  }, ItemTypeExtra.MultiAgent);\n\nexport const multiAgentSaveManager = new AutosaveManager<\n  MultiAgentStore,\n  ItemTypeExtra,\n  Agent\n>({\n  store: useMultiAgentStore,\n  registers: [registerMultiAgentConfig],\n  saveRequest: saveRequestAgent,\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ItemType } from '@coze-arch/bot-api/developer_api';\n\nimport { useBotSkillStore } from '@/store/bot-skill';\n\nimport { saveFetcher, updateBotRequest } from '../utils/save-fetcher';\n\nexport async function saveTableMemory() {\n  const { databaseList } = useBotSkillStore.getState();\n\n  return await saveFetcher(\n    () =>\n      updateBotRequest({\n        database_list: useBotSkillStore\n          .getState()\n          .transformVo2Dto.databaseList(databaseList),\n      }),\n    ItemType.TABLE,\n  );\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { saveFetcher, updateBotRequest } from '../utils/save-fetcher';\nimport { ItemTypeExtra } from '../types';\n\nexport const updateShortcutSort = async (shortcutSort: string[]) =>\n  await saveFetcher(\n    () =>\n      updateBotRequest({\n        shortcut_sort: shortcutSort,\n      }),\n\n    ItemTypeExtra.Shortcut,\n  );\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { merge } from 'lodash-es';\nimport {\n  REPORT_EVENTS as ReportEventNames,\n  createReportEvent,\n} from '@coze-arch/report-events';\nimport {\n  type VoicesInfo,\n  type BotInfoForUpdate,\n} from '@coze-arch/idl/playground_api';\nimport { BotMode } from '@coze-arch/bot-api/developer_api';\n\nimport { type RemoveOptional, type UnionUndefined } from '@/types/utils';\nimport { useQueryCollectStore } from '@/store/query-collect';\nimport { usePersonaStore } from '@/store/persona';\nimport { useMultiAgentStore } from '@/store/multi-agent';\nimport { useModelStore } from '@/store/model';\nimport { useBotSkillStore } from '@/store/bot-skill';\nimport { useBotInfoStore } from '@/store/bot-info';\n\nexport const getBotDetailDtoInfo = () => {\n  const { mode } = useBotInfoStore.getState();\n  const botSkill = useBotSkillStore.getState();\n  const multiAgent = useMultiAgentStore.getState();\n  const model = useModelStore.getState();\n  const persona = usePersonaStore.getState();\n  const queryCollect = useQueryCollectStore.getState();\n\n  const isMulti = mode === BotMode.MultiMode;\n  const {\n    knowledge,\n    variables,\n    workflows,\n    taskInfo,\n    suggestionConfig,\n    onboardingContent,\n    pluginApis,\n    backgroundImageInfoList,\n    shortcut,\n    tts,\n    timeCapsule,\n    filebox,\n    devHooks,\n    voicesInfo,\n  } = botSkill;\n\n  const { agents } = multiAgent;\n\n  const reportEvent = createReportEvent({\n    eventName: ReportEventNames.botDebugSaveAll,\n  });\n\n  try {\n    const botSkillInfo: Omit<BotInfoForUpdate, 'voices_info'> & {\n      voices_info: UnionUndefined<RemoveOptional<VoicesInfo>>;\n    } = {\n      prompt_info: persona.transformVo2Dto(persona.systemMessage),\n      model_info: model.transformVo2Dto(model.config),\n      plugin_info_list: isMulti\n        ? undefined\n        : botSkill.transformVo2Dto.plugin(pluginApis),\n      workflow_info_list: isMulti\n        ? undefined\n        : botSkill.transformVo2Dto.workflow(workflows),\n      knowledge: isMulti\n        ? undefined\n        : botSkill.transformVo2Dto.knowledge(knowledge),\n      variable_list: botSkill.transformVo2Dto.variables(variables),\n      task_info: botSkill.transformVo2Dto.task(taskInfo),\n      suggest_reply_info:\n        botSkill.transformVo2Dto.suggestionConfig(suggestionConfig),\n      onboarding_info: botSkill.transformVo2Dto.onboarding(onboardingContent),\n      background_image_info_list: backgroundImageInfoList,\n      shortcut_sort: botSkill.transformVo2Dto.shortcut(shortcut),\n      // @ts-expect-error fix me late\n      voices_info: merge(\n        {},\n        botSkill.transformVo2Dto.tts(tts),\n        botSkill.transformVo2Dto.voicesInfo(voicesInfo),\n      ),\n      bot_tag_info: botSkill.transformVo2Dto.timeCapsule(timeCapsule),\n      filebox_info: botSkill.transformVo2Dto.filebox(filebox),\n      hook_info: isMulti ? undefined : devHooks,\n      user_query_collect_conf: queryCollect.transformVo2Dto(queryCollect),\n      agents: isMulti\n        ? agents.map(item => multiAgent.transformVo2Dto.agent(item))\n        : undefined,\n    };\n\n    reportEvent.success();\n\n    return { botSkillInfo };\n  } catch (e) {\n    reportEvent.error({\n      reason: 'bot debug save all fail',\n      error: e instanceof Error ? e : void 0,\n    });\n    return {};\n  }\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport dayjs from 'dayjs';\nimport { REPORT_EVENTS as ReportEventNames } from '@coze-arch/report-events';\nimport { reporter } from '@coze-arch/logger';\nimport { type BotInfoForUpdate } from '@coze-arch/idl/playground_api';\nimport { BotPageFromEnum } from '@coze-arch/bot-typings/common';\nimport { type UpdateDraftBotResponse } from '@coze-arch/bot-api/developer_api';\nimport { PlaygroundApi } from '@coze-arch/bot-api';\n\nimport { useBotInfoStore } from '@/store/bot-info';\n\nimport { type BizKey } from '../types';\nimport { storage } from '../../utils/storage';\nimport { usePageRuntimeStore } from '../../store/page-runtime';\nimport { useCollaborationStore } from '../../store/collaboration';\n\nexport async function saveFetcher(\n  saveRequest: () => Promise<UpdateDraftBotResponse>,\n  scopeKey: BizKey,\n) {\n  const { editable, isPreview, pageFrom, init, setPageRuntimeByImmer } =\n    usePageRuntimeStore.getState();\n\n  const { setCollaborationByImmer } = useCollaborationStore.getState();\n  const isReadonly = () =>\n    !editable || isPreview || pageFrom === BotPageFromEnum.Explore;\n\n  if (isReadonly() || !init) {\n    return;\n  }\n\n  try {\n    setPageRuntimeByImmer(state => {\n      state.savingInfo.saving = true;\n      state.savingInfo.scopeKey = scopeKey ? String(scopeKey) : '';\n    });\n\n    const res = await saveRequest();\n\n    setPageRuntimeByImmer(state => {\n      state.savingInfo = {\n        saving: false,\n        time: dayjs().format('HH:mm:ss'),\n      };\n    });\n\n    if (res) {\n      setPageRuntimeByImmer(state => {\n        state.hasUnpublishChange = res.data.has_change ?? false;\n      });\n      setCollaborationByImmer(state => {\n        state.sameWithOnline = res.data.same_with_online ?? false;\n        if (state.branch && res.data.branch) {\n          state.branch = res.data.branch;\n        }\n      });\n    }\n    reporter.successEvent({\n      eventName: ReportEventNames.AutosaveSuccess,\n      meta: { itemType: scopeKey },\n    });\n  } catch (e) {\n    reporter.errorEvent({\n      eventName: ReportEventNames.AutosaveError,\n      error: e as Error,\n      meta: { itemType: scopeKey },\n    });\n  }\n}\n\n/**\n * Update the structure of bot draft information\n * @Returns update bots using different request bodies based on tags\n */\nexport function updateBotRequest(structPayload: BotInfoForUpdate) {\n  const { botId } = useBotInfoStore.getState();\n  return PlaygroundApi.UpdateDraftBotInfoAgw({\n    bot_info: {\n      bot_id: botId,\n      ...structPayload,\n    },\n    base_commit_version: storage.baseVersion,\n  });\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools, subscribeWithSelector } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { produce } from 'immer';\nimport {\n  type BotInfo,\n  type GetDraftBotInfoAgwData,\n  type UserInfo,\n  type BusinessType,\n} from '@coze-arch/idl/playground_api';\nimport {\n  BotMarketStatus,\n  BotMode,\n  type ConnectorInfo,\n} from '@coze-arch/bot-api/developer_api';\n\nimport {\n  type SetterAction,\n  setterActionFactory,\n} from '../utils/setter-factory';\n\nexport const getDefaultBotInfoStore = (): BotInfoStore => ({\n  botId: '',\n  mode: BotMode.SingleMode,\n  botMarketStatus: BotMarketStatus.Offline,\n  name: '',\n  description: '',\n  icon_uri: '',\n  icon_url: '',\n  create_time: '',\n  creator_id: '',\n  update_time: '',\n  connector_id: '',\n  publisher: {},\n  has_publish: false,\n  connectors: [],\n  publish_time: '',\n  space_id: '',\n  version: '',\n  raw: {},\n});\n\n/** Define the basic information of the bot*/\nexport interface BotInfoStore {\n  botId: string;\n  /** Published business line details */\n  connectors: Array<ConnectorInfo>;\n  /** For frontend, release time */\n  publish_time: string;\n  /** Space ID */\n  space_id: string;\n  /** Has it been published? */\n  has_publish: boolean;\n  mode: BotMode;\n  /** Publisher of the latest release */\n  publisher: UserInfo;\n  /** The product status after the bot is put on the shelves */\n  botMarketStatus: BotMarketStatus;\n  /** bot name */\n  name: string;\n  /** Bot description */\n  description: string;\n  /** Bot icon uri */\n  icon_uri: string;\n  /** Bot icon url */\n  icon_url: string;\n  /** creation time */\n  create_time: string;\n  /** creator id */\n  creator_id: string;\n  /** update time */\n  update_time: string;\n  /** line of business */\n  connector_id: string;\n  /** Multi agent mode agent information */\n  // agents?: Array<Agent>;\n  /** Version, ms */\n  version: string;\n  /** multi_agent structure */\n  // multi_agent_info?: MultiAgentInfo;\n  /** @Save the original bot data, readonly **/\n  raw: BotInfo;\n  /** Douyin doppelganger app id */\n  appId?: string;\n  /** Business Type, Default 0 Clone Business 1  */\n  businessType?: BusinessType;\n}\n\nexport interface BotInfoAction {\n  setBotInfo: SetterAction<BotInfoStore>;\n  setBotInfoByImmer: (update: (state: BotInfoStore) => void) => void;\n  transformVo2Dto: (data: GetDraftBotInfoAgwData) => BotInfoStore;\n  initStore: (data: GetDraftBotInfoAgwData) => void;\n  clear: () => void;\n}\n\nexport const useBotInfoStore = create<BotInfoStore & BotInfoAction>()(\n  devtools(\n    subscribeWithSelector((set, get) => ({\n      ...getDefaultBotInfoStore(),\n      setBotInfo: setterActionFactory<BotInfoStore>(set),\n      setBotInfoByImmer: update =>\n        set(produce<BotInfoStore>(state => update(state))),\n      // eslint-disable-next-line complexity\n      transformVo2Dto: data => {\n        // Convert botData to botInfoStore, taking only the fixed fields in BotInfoStore\n        const botInfo = data.bot_info ?? {};\n        return {\n          botId: botInfo?.bot_id ?? '',\n          mode: botInfo?.bot_mode ?? BotMode.SingleMode,\n          botMarketStatus: data.bot_market_status ?? BotMarketStatus.Offline,\n          name: botInfo.name ?? '',\n          description: botInfo.description ?? '',\n          icon_uri: botInfo.icon_uri ?? '',\n          icon_url: botInfo.icon_url ?? '',\n          create_time: botInfo.create_time ?? '',\n          creator_id: botInfo.creator_id ?? '',\n          update_time: botInfo.update_time ?? '',\n          connector_id: botInfo.connector_id ?? '',\n          version: botInfo.version ?? '',\n          publisher: data.publisher ?? {},\n          has_publish: data.has_publish ?? false,\n          connectors: data.connectors ?? [],\n          publish_time: data.publish_time ?? '',\n          space_id: data.space_id ?? '',\n          businessType: botInfo.business_type,\n          appId: data.app_id ?? '',\n          raw: botInfo,\n        };\n      },\n      initStore: data => {\n        const { transformVo2Dto } = get();\n        const transformedData = transformVo2Dto(data);\n        set(transformedData);\n      },\n      clear: () => {\n        set({ ...getDefaultBotInfoStore() });\n      },\n    })),\n    {\n      enabled: IS_DEV_MODE,\n      name: 'botStudio.botDetail.botInfo',\n    },\n  ),\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { I18n } from '@coze-arch/i18n';\nimport { BotTableRWMode } from '@coze-arch/bot-api/memory';\nimport {\n  type BackgroundImageInfo,\n  SuggestedQuestionsShowMode,\n  SuggestReplyMode,\n} from '@coze-arch/bot-api/developer_api';\n\nimport {\n  type VoicesInfo,\n  type BotSuggestionConfig,\n  type DatabaseInfo,\n  type ExtendOnboardingContent,\n  type TimeCapsuleConfig,\n  type TTSInfo,\n} from '../../types/skill';\n\nexport const DEFAULT_KNOWLEDGE_CONFIG = () => {\n  const baseConfig = {\n    top_k: 3,\n    min_score: 0.5,\n    auto: true,\n    search_strategy: 0,\n    show_source: false,\n  };\n  return baseConfig;\n};\n\nexport const DEFAULT_BOT_NODE_SUGGESTION_CONFIG = (): BotSuggestionConfig => ({\n  suggest_reply_mode: SuggestReplyMode.UseOriginBotMode,\n  customized_suggest_prompt: '',\n});\n\nexport const DEFAULT_SUGGESTION_PROMPT = () =>\n  IS_OVERSEA\n    ? I18n.t('bot_suggestion_customize_default_gpt')\n    : I18n.t('bot_suggestion_customize_default_seed');\n\nexport const DEFAULT_ONBOARDING_CONFIG = (): ExtendOnboardingContent => ({\n  prologue: '',\n  suggested_questions: [],\n  suggested_questions_show_mode: SuggestedQuestionsShowMode.Random,\n});\n\nexport const DEFAULT_SUGGESTION_CONFIG = (): BotSuggestionConfig => ({\n  suggest_reply_mode: SuggestReplyMode.WithDefaultPrompt,\n  customized_suggest_prompt: '',\n});\n\nexport const DEFAULT_BACKGROUND_IMAGE_LIST = (): BackgroundImageInfo[] => [];\nexport const DEFAULT_DATABASE = (): DatabaseInfo => ({\n  tableId: '',\n  name: '',\n  desc: '',\n  icon_uri: '',\n  readAndWriteMode: BotTableRWMode.LimitedReadWrite,\n  tableMemoryList: [],\n});\nexport const DEFAULT_TTS_CONFIG = (): TTSInfo => ({\n  muted: false,\n  close_voice_call: false,\n  i18n_lang_voice: {},\n  autoplay: false,\n  autoplay_voice: {},\n  tag_list: [],\n  debugVoice: [],\n  i18n_lang_voice_str: {},\n});\n\nexport const DEFAULT_TIME_CAPSULE_CONFIG = (): TimeCapsuleConfig => ({\n  time_capsule_mode: 0,\n  disable_prompt_calling: 0, // Default support for prompt calls\n  time_capsule_time_to_live: '0',\n});\n\nexport const DEFAULT_SHORTCUT_CONFIG = () => ({\n  shortcut_list: [],\n  shortcut_sort: [],\n});\n\nexport const DEFAULT_VOICES_INFO: () => VoicesInfo = () => ({\n  defaultUserInputType: undefined,\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools, subscribeWithSelector } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { isFunction } from 'lodash-es';\nimport { produce } from 'immer';\nimport { type ShortCutStruct } from '@coze-agent-ide/tool-config';\nimport {\n  type HookInfo,\n  type LayoutInfo,\n  type BackgroundImageInfo,\n  type GetDraftBotInfoAgwData,\n} from '@coze-arch/bot-api/playground_api';\nimport {\n  type DefaultUserInputType,\n  FileboxInfoMode,\n  type PluginApi,\n} from '@coze-arch/bot-api/developer_api';\nimport { botInputLengthService } from '@coze-agent-ide/bot-input-length-limit';\n\nimport {\n  type SetterAction,\n  setterActionFactory,\n} from '../../utils/setter-factory';\nimport { getPluginApisFilterExample } from '../../utils/plugin-apis';\nimport {\n  type VoicesInfo,\n  type BotSuggestionConfig,\n  type DatabaseInfo,\n  type DatabaseList,\n  type EnabledPluginApi,\n  type ExtendOnboardingContent,\n  type FileboxConfig,\n  type KnowledgeConfig,\n  type TaskManageInfo,\n  type TimeCapsuleConfig,\n  type TTSInfo,\n  type VariableItem,\n  type WorkFlowItemType,\n} from '../../types/skill';\nimport { transformDto2Vo, transformVo2Dto } from './transform';\nimport {\n  DEFAULT_BACKGROUND_IMAGE_LIST,\n  DEFAULT_DATABASE,\n  DEFAULT_KNOWLEDGE_CONFIG,\n  DEFAULT_ONBOARDING_CONFIG,\n  DEFAULT_SHORTCUT_CONFIG,\n  DEFAULT_SUGGESTION_CONFIG,\n  DEFAULT_TIME_CAPSULE_CONFIG,\n  DEFAULT_TTS_CONFIG,\n  DEFAULT_VOICES_INFO,\n} from './defaults';\n\nexport const getDefaultBotSkillStore = (): BotSkillStore => ({\n  pluginApis: [],\n  workflows: [],\n  knowledge: {\n    dataSetList: [],\n    dataSetInfo: DEFAULT_KNOWLEDGE_CONFIG(),\n  },\n\n  taskInfo: {\n    user_task_allowed: false,\n    data: [],\n    task_list: [],\n    loading: false,\n  },\n  variables: [],\n  database: DEFAULT_DATABASE(),\n  databaseList: [],\n  onboardingContent: DEFAULT_ONBOARDING_CONFIG(),\n  suggestionConfig: DEFAULT_SUGGESTION_CONFIG(),\n  tts: DEFAULT_TTS_CONFIG(),\n  voicesInfo: DEFAULT_VOICES_INFO(),\n  timeCapsule: DEFAULT_TIME_CAPSULE_CONFIG(),\n  filebox: {\n    mode: FileboxInfoMode.Off,\n  },\n  backgroundImageInfoList: DEFAULT_BACKGROUND_IMAGE_LIST(),\n  shortcut: DEFAULT_SHORTCUT_CONFIG(),\n  layoutInfo: {},\n  devHooks: {},\n});\n\n/** Persona & Prompted Areas */\nexport interface BotSkillStore {\n  // Region Bot and Agent dimension common skills\n  /** Selected plugin api */\n  pluginApis: EnabledPluginApi[];\n  /** Selected workflow */\n  workflows: WorkFlowItemType[];\n  /** Knowledge Allocation */\n  knowledge: KnowledgeConfig;\n  // endregion\n\n  // Region Bot Dimension Unique skills\n  /**\n   * Task configuration\n   *\n   * No added tasks are included, and those added are managed independently within the component\n   */\n  taskInfo: TaskManageInfo;\n  /**\n   * Variable default configuration\n   *\n   * The present value in the upper right corner is not included. The present value is the component state requested after opening the pop-up window.\n   */\n  variables: VariableItem[];\n  /**\n   * Database default configuration\n   *\n   * The present value in the upper right corner is not included. The present value is the component state requested after opening the pop-up window.\n   */\n  database: DatabaseInfo;\n  /**\n   * Database multi-table default configuration\n   *\n   * The present value in the upper right corner is not included. The present value is the component state requested after opening the pop-up window.\n   */\n  databaseList: DatabaseList;\n  /** Opener configuration */\n  onboardingContent: ExtendOnboardingContent;\n  /** User Questions Suggested Configuration */\n  suggestionConfig: BotSuggestionConfig;\n  // endregion\n  /** Text to Speech */\n  tts: TTSInfo;\n  /** Voice settings, the above tts are no longer accurate in naming and meaning division, but they are very involved */\n  voicesInfo: VoicesInfo;\n  // Time Capsule\n  timeCapsule: TimeCapsuleConfig;\n  filebox: FileboxConfig;\n  // Chat background cover\n  backgroundImageInfoList: BackgroundImageInfo[];\n  // Quick Instruction\n  shortcut: ShortCutStruct;\n  // hooks\n  devHooks?: HookInfo;\n  layoutInfo: LayoutInfo;\n}\n\nexport interface BotSkillAction {\n  setBotSkill: SetterAction<BotSkillStore>;\n  setBotSkillByImmer: (update: (state: BotSkillStore) => void) => void;\n  updateSkillPluginApis: (pluginApis: PluginApi[]) => void;\n  updateSkillWorkflows: (workflows: WorkFlowItemType[]) => void;\n  updateSkillKnowledgeDatasetList: (\n    dataSetList: KnowledgeConfig['dataSetList'],\n  ) => void;\n  updateSkillKnowledgeDatasetInfo: (\n    dataSetInfo: KnowledgeConfig['dataSetInfo'],\n  ) => void;\n  updateSkillTaskInfo: (taskInfo: Partial<TaskManageInfo>) => void;\n  updateSkillDatabase: (database: Partial<DatabaseInfo>) => void;\n  updateSkillDatabaseList: (database: DatabaseList) => void;\n  updateSkillOnboarding: (\n    onboarding:\n      | Partial<ExtendOnboardingContent>\n      | ((prev: ExtendOnboardingContent) => Partial<ExtendOnboardingContent>),\n  ) => void;\n  updateSkillLayoutInfo: (layoutInfo: LayoutInfo) => void;\n  setBackgroundImageInfoList: (params: BackgroundImageInfo[]) => void;\n  setSuggestionConfig: (config: Partial<BotSuggestionConfig>) => void;\n  setDefaultUserInputType: (type: DefaultUserInputType) => void;\n  transformDto2Vo: typeof transformDto2Vo;\n  transformVo2Dto: typeof transformVo2Dto;\n  initStore: (botData: GetDraftBotInfoAgwData) => void;\n  clear: () => void;\n}\n\nexport const useBotSkillStore = create<BotSkillStore & BotSkillAction>()(\n  devtools(\n    subscribeWithSelector((set, get) => ({\n      ...getDefaultBotSkillStore(),\n\n      setBotSkill: setterActionFactory<BotSkillStore>(set),\n      setBotSkillByImmer: update =>\n        set(produce<BotSkillStore>(botSkill => update(botSkill))),\n      updateSkillPluginApis: (pluginApis: PluginApi[]) => {\n        set(s => ({\n          ...s,\n          pluginApis: getPluginApisFilterExample(pluginApis),\n        }));\n      },\n      updateSkillWorkflows: workflows => set(s => ({ ...s, workflows })),\n      updateSkillKnowledgeDatasetList: dataSetList =>\n        set(\n          produce<BotSkillStore>(s => {\n            s.knowledge.dataSetList = dataSetList;\n          }),\n        ),\n      updateSkillKnowledgeDatasetInfo: dataSetInfo =>\n        set(\n          produce<BotSkillStore>(s => {\n            s.knowledge.dataSetInfo = dataSetInfo;\n          }),\n        ),\n      updateSkillTaskInfo: taskInfo =>\n        set(s => ({\n          ...s,\n          taskInfo: { ...s.taskInfo, ...taskInfo },\n        })),\n      updateSkillDatabase: database =>\n        set(s => ({\n          ...s,\n          database: { ...s.database, ...database },\n        })),\n      updateSkillDatabaseList: databaseList =>\n        set(\n          produce<BotSkillStore>(s => {\n            s.databaseList = databaseList;\n          }),\n        ),\n      updateSkillOnboarding: update =>\n        set(s => ({\n          ...s,\n          onboardingContent: {\n            ...s.onboardingContent,\n            ...(isFunction(update) ? update(s.onboardingContent) : update),\n          },\n        })),\n      updateSkillLayoutInfo: layoutInfo => {\n        set(s => ({\n          ...s,\n          layoutInfo,\n        }));\n      },\n      setSuggestionConfig: config =>\n        set(s => ({\n          ...s,\n          suggestionConfig: { ...s.suggestionConfig, ...config },\n        })),\n      setBackgroundImageInfoList: config =>\n        set(s => ({\n          ...s,\n          backgroundImageInfoList: [...config],\n        })),\n      setDefaultUserInputType: inputType =>\n        set(\n          state =>\n            produce(state, draft => {\n              draft.voicesInfo.defaultUserInputType = inputType;\n            }),\n          false,\n          'setDefaultUserInputType',\n        ),\n      transformDto2Vo,\n      transformVo2Dto,\n      initStore: botData => {\n        const { bot_info: botInfo, bot_option_data: optionData } = botData;\n        set({\n          pluginApis: transformDto2Vo.plugin(\n            botInfo?.plugin_info_list,\n            optionData?.plugin_detail_map,\n            optionData?.plugin_api_detail_map,\n          ),\n          workflows: transformDto2Vo.workflow(\n            botInfo?.workflow_info_list,\n            optionData?.workflow_detail_map,\n          ),\n          knowledge: transformDto2Vo.knowledge(\n            botInfo?.knowledge,\n            optionData?.knowledge_detail_map,\n          ),\n          taskInfo: transformDto2Vo.task(botInfo?.task_info),\n          variables: transformDto2Vo.variables(botInfo?.variable_list),\n          databaseList: transformDto2Vo.databaseList(botInfo?.database_list),\n          timeCapsule: transformDto2Vo.timeCapsule(\n            botInfo?.bot_tag_info?.time_capsule_info,\n          ),\n          filebox: transformDto2Vo.filebox(botInfo?.filebox_info),\n\n          onboardingContent:\n            botInputLengthService.sliceWorkInfoOnboardingByMaxLength(\n              transformDto2Vo.onboarding(botInfo?.onboarding_info),\n            ),\n          suggestionConfig: transformDto2Vo.suggestionConfig(\n            botInfo?.suggest_reply_info,\n          ),\n          tts: transformDto2Vo.tts(botInfo?.voices_info),\n          voicesInfo: transformDto2Vo.voicesInfo(botInfo.voices_info),\n          backgroundImageInfoList: botInfo?.background_image_info_list ?? [],\n          shortcut: transformDto2Vo.shortcut(\n            botInfo?.shortcut_sort ?? [],\n            optionData?.shortcut_command_list,\n          ),\n          devHooks: transformDto2Vo.hookInfo(botInfo?.hook_info),\n          layoutInfo: transformDto2Vo.layoutInfo(botInfo?.layout_info),\n        });\n      },\n      clear: () => {\n        set({ ...getDefaultBotSkillStore() });\n      },\n    })),\n    {\n      enabled: IS_DEV_MODE,\n      name: 'botStudio.botDetail.botSkill',\n    },\n  ),\n);\n","/* eslint-disable max-len */\n/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { nanoid } from 'nanoid';\nimport { isNumber, mapValues } from 'lodash-es';\nimport {\n  type PluginStatus,\n  type PluginType,\n} from '@coze-arch/idl/plugin_develop';\nimport { BotTableRWMode } from '@coze-arch/idl/memory';\nimport {\n  type Int64,\n  type PluginInfo,\n  type PluginDetal,\n  type PluginAPIDetal,\n  type WorkflowInfo,\n  type WorkflowDetail,\n  type Knowledge,\n  type KnowledgeDetail,\n  type TaskInfo,\n  type Variable,\n  type Database,\n  type TimeCapsuleInfo,\n  type OnboardingInfo,\n  type SuggestReplyInfo,\n  type VoicesInfo as IDLVoicesInfo,\n  type FileboxInfo,\n  FileboxInfoMode,\n  TimeCapsuleMode,\n  type ShortcutCommand,\n  type BotInfoForUpdate,\n  type SuggestReplyMode as SuggestReplyModeFromPlayground,\n  type HookInfo,\n  SuggestedQuestionsShowMode,\n  type LayoutInfo,\n  DisablePromptCalling,\n  type PluginFrom,\n} from '@coze-arch/bot-api/playground_api';\nimport { SuggestReplyMode } from '@coze-arch/bot-api/developer_api';\nimport { type ShortCutStruct } from '@coze-agent-ide/tool-config';\n\nimport {\n  type WorkFlowItemType,\n  type EnabledPluginApi,\n  type KnowledgeConfig,\n  type TaskManageInfo,\n  type VariableItem,\n  type TimeCapsuleConfig,\n  type ExtendOnboardingContent,\n  type BotSuggestionConfig,\n  type TTSInfo,\n  type FileboxConfig,\n  type DatabaseList,\n  type TableMemoryItem,\n  type VoicesInfo,\n} from '../../types/skill';\nimport {\n  DEFAULT_BOT_NODE_SUGGESTION_CONFIG,\n  DEFAULT_KNOWLEDGE_CONFIG,\n  DEFAULT_SUGGESTION_CONFIG,\n  DEFAULT_SUGGESTION_PROMPT,\n  DEFAULT_TTS_CONFIG,\n} from './defaults';\n\n// After the structured BotInfo interface, data transformation\nexport const transformDto2Vo = {\n  plugin: (\n    data?: PluginInfo[],\n    plugins?: Record<Int64, PluginDetal>,\n    pluginsAPIs?: Record<Int64, PluginAPIDetal>,\n  ): EnabledPluginApi[] =>\n    data\n      ?.filter(i => i.plugin_id && i.api_id && plugins?.[i.plugin_id as string])\n      ?.map(item => {\n        const plugin = plugins?.[item.plugin_id as string];\n        const api = pluginsAPIs?.[item.api_id as string];\n        return {\n          plugin_icon: plugin?.icon_url,\n          name: api?.name,\n          desc: api?.description,\n          plugin_id: item.plugin_id,\n          plugin_name: plugin?.name,\n          api_id: item.api_id,\n          parameters:\n            api?.parameters?.map(i => ({\n              ...i,\n              // Compatible with open-source pages. Interface fields are named differently\n              desc: i.description,\n              required: i.is_required,\n            })) || [],\n          is_official: plugin?.is_official,\n          // The historical reason for this type is that each service on the server level is not unified, and the actual business use is the enumeration type\n          plugin_type: plugin?.plugin_type as unknown as PluginType,\n          status: plugin?.plugin_status as unknown as PluginStatus,\n          plugin_from: plugin?.plugin_from as unknown as PluginFrom,\n        };\n      }) ?? [],\n\n  workflow: (\n    data?: WorkflowInfo[],\n    config?: Record<Int64, WorkflowDetail>,\n  ): WorkFlowItemType[] =>\n    data\n      ?.filter(i => i.workflow_id && config?.[i.workflow_id])\n      ?.map(item => {\n        const w = config?.[item.workflow_id as string];\n        return {\n          workflow_id: w?.id ?? '',\n          plugin_id: w?.plugin_id ?? '',\n          name: w?.name ?? '',\n          desc: w?.description ?? '',\n          plugin_icon: w?.icon_url ?? '',\n          flow_mode: item?.flow_mode,\n          parameters:\n            w?.api_detail?.parameters?.map(i => ({\n              ...i,\n              desc: i.description,\n              required: i.is_required,\n            })) || [],\n        };\n      }) ?? [],\n  // Knowledge Base\n  knowledge: (\n    data?: Knowledge,\n    config?: Record<string, KnowledgeDetail>,\n  ): KnowledgeConfig => {\n    if (!data) {\n      return {\n        dataSetList: [],\n        dataSetInfo: DEFAULT_KNOWLEDGE_CONFIG(),\n      };\n    } else {\n      const dataSetList =\n        data?.knowledge_info\n          ?.filter(i => i.id && config?.[i.id as string])\n          ?.map(item => {\n            const k = config?.[item.id as string];\n            return {\n              id: k?.id,\n              name: k?.name,\n              avatar_url: k?.icon_url,\n              icon_url: k?.icon_url,\n              dataset_id: k?.id,\n            };\n          }) ?? [];\n\n      return {\n        dataSetList,\n        dataSetInfo: {\n          min_score: data?.min_score ?? 0,\n          top_k: Number(data?.top_k ?? 0),\n          auto: Boolean(data?.auto),\n\n          search_strategy: data?.search_strategy,\n          no_recall_reply_mode: data?.no_recall_reply_mode,\n          no_recall_reply_customize_prompt:\n            data?.no_recall_reply_customize_prompt,\n          show_source: data?.show_source,\n          show_source_mode: data?.show_source_mode,\n          recall_strategy: data.recall_strategy,\n        },\n      };\n    }\n  },\n\n  task: (data?: TaskInfo): TaskManageInfo => ({\n    user_task_allowed: Boolean(data?.user_task_allowed),\n    task_list: [],\n    loading: false,\n    data: [],\n  }),\n\n  variables: (data?: Variable[]): VariableItem[] =>\n    data?.map(item => ({\n      id: nanoid(),\n      key: item.key ?? '',\n      description: item.description,\n      default_value: item.default_value,\n      is_system: !!item.is_system,\n      prompt_disabled: !!item.prompt_disabled,\n      is_disabled: !!item.is_disabled,\n    })) ?? [],\n\n  databaseList: (data?: Database[]): DatabaseList => {\n    const res: DatabaseList = [];\n\n    if (Array.isArray(data)) {\n      data.forEach(target => {\n        if (target?.table_id && target.field_list?.length) {\n          res.push({\n            tableId: target.table_id as string,\n            name: target.table_name as string,\n            desc: target.table_desc as string,\n            extra_info: {\n              prompt_disabled: String(target.prompt_disabled),\n            },\n            readAndWriteMode:\n              (target.rw_mode as BotTableRWMode) ||\n              BotTableRWMode.LimitedReadWrite,\n            tableMemoryList: (target.field_list as TableMemoryItem[])?.map(\n              i => ({\n                ...i,\n                nanoid: nanoid(),\n                // Server level rpc has used the id of the string, which is difficult to modify. Here is compatible with the number required for subsequent links.\n                id: Number(i.id),\n              }),\n            ),\n          });\n        }\n      });\n    }\n    return res;\n  },\n\n  timeCapsule: (data?: TimeCapsuleInfo): TimeCapsuleConfig => ({\n    // @ts-expect-error interface enumeration type value redefinition\n    time_capsule_mode: data?.time_capsule_mode ?? TimeCapsuleMode.Off,\n    disable_prompt_calling:\n      data?.disable_prompt_calling ?? DisablePromptCalling.Off,\n    time_capsule_time_to_live: data?.time_capsule_time_to_live ?? '0',\n  }),\n\n  filebox: (data?: FileboxInfo): FileboxConfig => ({\n    mode: data?.Mode ?? FileboxInfoMode.Off,\n  }),\n\n  onboarding: (data?: OnboardingInfo): ExtendOnboardingContent => ({\n    prologue: data?.prologue ?? '',\n    suggested_questions_show_mode:\n      data?.suggested_questions_show_mode ?? SuggestedQuestionsShowMode.Random,\n    suggested_questions:\n      data?.suggested_questions?.map(item => ({\n        id: item,\n        content: item,\n      })) ?? [],\n  }),\n\n  suggestionConfig: (\n    data?: SuggestReplyInfo,\n    isBotNode = false,\n  ): BotSuggestionConfig => {\n    const defaultSuggestionConfig: BotSuggestionConfig = isBotNode\n      ? DEFAULT_BOT_NODE_SUGGESTION_CONFIG()\n      : DEFAULT_SUGGESTION_CONFIG();\n    // @ts-expect-error xxxxxxxxxxx SuggestReplyMode The two file definitions are inconsistent\n    const suggestionConfig: BotSuggestionConfig = isNumber(\n      data?.suggest_reply_mode,\n    )\n      ? {\n          suggest_reply_mode: data?.suggest_reply_mode,\n          customized_suggest_prompt: data?.customized_suggest_prompt,\n        }\n      : defaultSuggestionConfig;\n\n    if (\n      !suggestionConfig.customized_suggest_prompt &&\n      suggestionConfig.suggest_reply_mode ===\n        SuggestReplyMode.WithCustomizedPrompt\n    ) {\n      suggestionConfig.customized_suggest_prompt = DEFAULT_SUGGESTION_PROMPT();\n    }\n    return suggestionConfig;\n  },\n\n  tts: (ttsConfig?: IDLVoicesInfo): TTSInfo => {\n    if (!ttsConfig || typeof ttsConfig !== 'object') {\n      return DEFAULT_TTS_CONFIG();\n    }\n    if (!('muted' in ttsConfig && 'i18n_lang_voice' in ttsConfig)) {\n      return DEFAULT_TTS_CONFIG();\n    }\n    const isValidObject = (obj: unknown): Record<string, number> =>\n      obj && typeof obj === 'object' ? (obj as Record<string, number>) : {};\n\n    return {\n      muted: !!ttsConfig.muted,\n      close_voice_call: !!ttsConfig.voice_call,\n      i18n_lang_voice: isValidObject(ttsConfig?.i18n_lang_voice),\n      i18n_lang_voice_str: ttsConfig.i18n_lang_voice_str ?? {},\n      autoplay: !!ttsConfig.autoplay,\n      autoplay_voice: isValidObject(ttsConfig?.autoplay_voice),\n      debugVoice: [],\n    };\n  },\n  voicesInfo: (idlVoicesInfo: IDLVoicesInfo | undefined): VoicesInfo => ({\n    defaultUserInputType: idlVoicesInfo?.default_user_input_type,\n  }),\n  shortcut: (\n    shortcutSortList: string[],\n    config?: ShortcutCommand[],\n  ): ShortCutStruct => ({\n    shortcut_sort: shortcutSortList,\n    // @ts-expect-error ShortCutCommand The definition of the front and back ends is inconsistent, and the front-end differentiation is subject to type constraints\n    shortcut_list: config,\n  }),\n\n  hookInfo: (data?: HookInfo): HookInfo | undefined => data,\n  layoutInfo: (layoutInfoFromService?: LayoutInfo): LayoutInfo => ({\n    workflow_id: layoutInfoFromService?.workflow_id,\n    plugin_id: layoutInfoFromService?.plugin_id,\n  }),\n};\n\nexport const transformVo2Dto = {\n  plugin: (plugins: EnabledPluginApi[]): BotInfoForUpdate['plugin_info_list'] =>\n    plugins.map(plugin => ({\n      api_id: plugin.api_id,\n      plugin_id: plugin.plugin_id,\n      api_name: plugin.name,\n      plugin_from: plugin.plugin_from,\n    })),\n\n  workflow: (\n    workflows: WorkFlowItemType[],\n  ): BotInfoForUpdate['workflow_info_list'] =>\n    workflows.map(\n      w =>\n        ({\n          workflow_id: w.workflow_id,\n          plugin_id: w.plugin_id,\n          flow_mode: w.flow_mode,\n          workflow_name: w.name,\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        }) as any,\n    ),\n\n  knowledge: (knowledge: KnowledgeConfig): BotInfoForUpdate['knowledge'] => ({\n    ...knowledge.dataSetInfo,\n    knowledge_info: knowledge.dataSetList\n      .filter(i => !!i.dataset_id)\n      .map(dataset => ({\n        id: dataset.dataset_id,\n        name: dataset.name,\n      })),\n  }),\n\n  task: (task: Partial<TaskManageInfo>): BotInfoForUpdate['task_info'] => ({\n    user_task_allowed: task.user_task_allowed,\n  }),\n\n  suggestionConfig: (\n    suggestion: BotSuggestionConfig,\n  ): BotInfoForUpdate['suggest_reply_info'] => ({\n    suggest_reply_mode:\n      suggestion.suggest_reply_mode as unknown as SuggestReplyModeFromPlayground,\n    customized_suggest_prompt: suggestion.customized_suggest_prompt,\n  }),\n\n  variables: (variables: VariableItem[]): BotInfoForUpdate['variable_list'] =>\n    variables.map(v => ({\n      key: v.key,\n      description: v.description,\n      default_value: v.default_value,\n      is_system: v.is_system,\n      prompt_disabled: v.prompt_disabled,\n      is_disabled: v.is_disabled,\n    })),\n\n  databaseList: (\n    databaseList: DatabaseList,\n  ): BotInfoForUpdate['database_list'] =>\n    // @ts-expect-error fix me late\n    databaseList.map(d => ({\n      table_id: d.tableId,\n      table_name: d.name,\n      table_desc: d.desc,\n      rw_mode: d.readAndWriteMode,\n      field_list: d.tableMemoryList.map(f => ({\n        name: f.name,\n        desc: f.desc,\n        type: f.type,\n        must_required: f.must_required,\n        id: f.id?.toString(),\n      })),\n    })),\n\n  timeCapsule: (\n    timeCapsule: TimeCapsuleConfig,\n  ): BotInfoForUpdate['bot_tag_info'] => ({\n    time_capsule_info: {\n      time_capsule_mode:\n        timeCapsule.time_capsule_mode as unknown as TimeCapsuleMode,\n      disable_prompt_calling:\n        timeCapsule.disable_prompt_calling as unknown as DisablePromptCalling,\n      time_capsule_time_to_live: timeCapsule.time_capsule_time_to_live,\n    },\n  }),\n\n  filebox: (filebox: FileboxConfig): BotInfoForUpdate['filebox_info'] => ({\n    Mode: filebox.mode,\n  }),\n\n  onboarding: (\n    data: ExtendOnboardingContent,\n  ): BotInfoForUpdate['onboarding_info'] => ({\n    prologue: data.prologue,\n    suggested_questions_show_mode: data.suggested_questions_show_mode,\n    suggested_questions: data.suggested_questions\n      .map(i => i.content?.trim())\n      .filter(c => !!c),\n  }),\n\n  tts: (tts: Partial<TTSInfo>) => ({\n    muted: tts.muted,\n    i18n_lang_voice: tts.i18n_lang_voice,\n    autoplay: tts.autoplay,\n    autoplay_voice: tts.autoplay_voice,\n    voice_call: tts.close_voice_call,\n    i18n_lang_voice_str: tts.i18n_lang_voice_str,\n  }),\n\n  voicesInfo: (voicesInfo: VoicesInfo) => ({\n    default_user_input_type: voicesInfo.defaultUserInputType,\n  }),\n\n  shortcut: (shortcut: ShortCutStruct): BotInfoForUpdate['shortcut_sort'] =>\n    shortcut.shortcut_sort,\n\n  layoutInfo: (info: LayoutInfo): BotInfoForUpdate['layout_info'] =>\n    // Undefined will be filtered by axios, where the backend needs to have a key.\n    mapValues(info, (val?: string) => val ?? ''),\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools, subscribeWithSelector } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { produce } from 'immer';\nimport {\n  Branch,\n  type GetDraftBotInfoAgwData,\n} from '@coze-arch/idl/playground_api';\nimport { type BotCollaboratorStatus } from '@coze-arch/idl/developer_api';\n\nimport {\n  type SetterAction,\n  setterActionFactory,\n} from '../utils/setter-factory';\n\nexport const getDefaultCollaborationStore = (): CollaborationStore => ({\n  inCollaboration: false,\n  sameWithOnline: false,\n  committer_name: '',\n  editLockStatus: EditLockStatus.Offline,\n  collaboratorStatus: {\n    commitable: false,\n    operateable: false,\n    manageable: false,\n  },\n  baseVersion: '',\n  branch: Branch.Base,\n  commit_time: '',\n  commit_version: '',\n  openCollaboratorsEnable: false,\n  canUpgrade: false,\n  currentCollaborationBotCount: 0,\n  maxCollaborationBotCount: 0,\n  maxCollaboratorsCount: 0,\n});\nexport enum EditLockStatus {\n  Lose, // No edit lock\n  Holder, // There is edit lock.\n  Offline, // The network disconnection status can be edited, but cannot be saved. Avoid overwriting the editing of other pages during the disconnection period after networking.\n}\n/**multiplayer collaboration*/\nexport interface CollaborationStore {\n  editLockStatus: EditLockStatus;\n  inCollaboration: boolean;\n  collaboratorStatus: BotCollaboratorStatus;\n  sameWithOnline: boolean;\n  baseVersion: string;\n  /** For the front end, the most recent author */\n  committer_name: string;\n  /** What branch did you get the content of? */\n  branch?: Branch;\n  /** For frontend, commit time */\n  commit_time: string;\n  commit_version: string;\n  /** Can it be turned on? The cooperation switch is false and cannot be turned on. */\n  openCollaboratorsEnable: boolean;\n  /** Whether the package can be upgraded, the top paid account cannot be upgraded */\n  canUpgrade: boolean;\n  // The current number of active collaboration bots\n  currentCollaborationBotCount: number;\n  /** Limit on the maximum number of user-enabled multiplayer collaborative bots */\n  maxCollaborationBotCount: number;\n  /** maximum number of collaborators */\n  maxCollaboratorsCount: number;\n}\n\nexport interface CollaborationAction {\n  setCollaboration: SetterAction<CollaborationStore>;\n  setCollaborationByImmer: (\n    update: (state: CollaborationStore) => void,\n  ) => void;\n  getBaseVersion: () => string | undefined;\n  initStore: (data: GetDraftBotInfoAgwData) => void;\n  clear: () => void;\n}\n\nexport const useCollaborationStore = create<\n  CollaborationStore & CollaborationAction\n>()(\n  devtools(\n    subscribeWithSelector((set, get) => ({\n      ...getDefaultCollaborationStore(),\n      setCollaboration: setterActionFactory<CollaborationStore>(set),\n      setCollaborationByImmer: update =>\n        set(produce<CollaborationStore>(state => update(state))),\n      getBaseVersion: () => {\n        const { baseVersion, inCollaboration } = get();\n        // FG is on and in single mode, no base_version is provided\n        if (!inCollaboration) {\n          return undefined;\n        }\n        return baseVersion;\n      },\n      initStore: info => {\n        set({\n          collaboratorStatus: info?.collaborator_status,\n          inCollaboration: info.in_collaboration,\n          baseVersion: info.commit_version,\n          sameWithOnline: info?.same_with_online,\n          committer_name: info?.committer_name,\n          commit_version: info?.commit_version,\n          branch: info?.branch,\n          commit_time: info?.commit_time,\n        });\n      },\n      clear: () => {\n        set({ ...getDefaultCollaborationStore() });\n      },\n    })),\n    {\n      enabled: IS_DEV_MODE,\n      name: 'botStudio.botDetail.collaboration',\n    },\n  ),\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools, subscribeWithSelector } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { produce } from 'immer';\n\nimport {\n  type SetterAction,\n  setterActionFactory,\n} from '../utils/setter-factory';\n\nexport type DiffTaskType = 'prompt' | 'model' | '';\n\nexport const getDefaultDiffTaskStore = (): DiffTaskStore => ({\n  diffTask: '',\n  hasContinueTask: false,\n  continueTask: '',\n  promptDiffInfo: {\n    diffPromptResourceId: '',\n    diffMode: 'draft',\n    diffPrompt: '',\n  },\n});\n\n/** Diff task related information */\nexport interface DiffTaskStore {\n  /** Current diff task type */\n  diffTask: DiffTaskType;\n  /** Is there a continuation mission? */\n  hasContinueTask: boolean;\n  /** Continue task information */\n  continueTask: DiffTaskType;\n  /** Current diff task information */\n  promptDiffInfo: {\n    diffPromptResourceId: string;\n    diffPrompt: string;\n    diffMode: 'draft' | 'new-diff';\n  };\n}\n\nexport interface DiffTaskAction {\n  setDiffTask: SetterAction<DiffTaskStore>;\n  setDiffTaskByImmer: (update: (state: DiffTaskStore) => void) => void;\n  enterDiffMode: (props: {\n    diffTask: DiffTaskType;\n    promptDiffInfo?: {\n      diffPromptResourceId: string;\n      diffMode: 'draft' | 'new-diff';\n      diffPrompt: string;\n    };\n  }) => void;\n  exitDiffMode: () => void;\n  clear: () => void;\n}\n\nexport const useDiffTaskStore = create<DiffTaskStore & DiffTaskAction>()(\n  devtools(\n    subscribeWithSelector((set, get) => ({\n      ...getDefaultDiffTaskStore(),\n      setDiffTask: setterActionFactory<DiffTaskStore>(set),\n      setDiffTaskByImmer: update =>\n        set(produce<DiffTaskStore>(state => update(state))),\n      enterDiffMode: ({ diffTask, promptDiffInfo }) => {\n        set(\n          produce<DiffTaskStore>(state => {\n            state.diffTask = diffTask;\n          }),\n          false,\n          'enterDiffMode',\n        );\n        if (diffTask === 'prompt' && promptDiffInfo) {\n          get().setDiffTaskByImmer(state => {\n            state.promptDiffInfo = promptDiffInfo;\n          });\n        }\n      },\n      exitDiffMode: () => {\n        get().clear();\n      },\n      clear: () => {\n        set({ ...getDefaultDiffTaskStore() }, false, 'clear');\n      },\n    })),\n    {\n      enabled: IS_DEV_MODE,\n      name: 'botStudio.botDetail.diffTask',\n    },\n  ),\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * To fulfill a miraculous function\n * In multi agent mode, replying.\n * The user switched agents manually\n * Regenerate the conversation based on the new agent\n * It is necessary to record that the switch of the agent is \"manual\" | \"automatic\"\n */\n\n/**\n * !! Not mixed with Bot Details.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\n\nexport interface ManuallySwitchAgentState {\n  agentId: string | null;\n}\n\nexport interface ManuallySwitchAgentAction {\n  recordAgentIdOnManuallySwitchAgent: (agentId: string) => void;\n  clearAgentId: () => void;\n}\n\nexport const useManuallySwitchAgentStore = create<\n  ManuallySwitchAgentAction & ManuallySwitchAgentState\n>()(\n  devtools(\n    set => ({\n      agentId: null,\n      recordAgentIdOnManuallySwitchAgent: agentId => {\n        set({ agentId }, false, 'recordAgentIdOnManuallySwitchAgent');\n      },\n      clearAgentId: () => {\n        set({ agentId: null }, false, 'clearAgentId');\n      },\n    }),\n    { enabled: IS_DEV_MODE, name: 'botStudio.manuallySwitchAgentStore' },\n  ),\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools, subscribeWithSelector } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { produce } from 'immer';\nimport {\n  type BotInfoForUpdate,\n  type ContextMode,\n  type GetDraftBotInfoAgwData,\n} from '@coze-arch/idl/playground_api';\nimport {\n  ContextContentType,\n  type Model,\n  type ModelInfo,\n  type ModelInfo as ModelInfoConfig,\n} from '@coze-arch/bot-api/developer_api';\n\nimport {\n  type SetterAction,\n  setterActionFactory,\n} from '../utils/setter-factory';\nimport type { BotDetailModel } from '../types/model';\nexport const DEFAULT_MODEL_INFO = (): ModelInfo => ({\n  model: '',\n  temperature: 0,\n  max_tokens: 4096,\n  top_p: 0,\n  frequency_penalty: 0,\n  presence_penalty: 0,\n  prompt_id: 0,\n  ShortMemPolicy: {\n    ContextContentType: ContextContentType.USER_RES,\n  },\n  card_ids: [],\n});\nexport const getDefaultModelStore = (): ModelStore => ({\n  config: {\n    model: '',\n    temperature: 0,\n    max_tokens: 4096,\n    top_p: 0,\n    frequency_penalty: 0,\n    presence_penalty: 0,\n    prompt_id: 0,\n    ShortMemPolicy: {\n      ContextContentType: ContextContentType.USER_RES,\n    },\n    card_ids: [],\n  },\n  modelList: [],\n});\n\n/** Persona & Prompted Areas */\nexport interface ModelStore {\n  config: ModelInfoConfig;\n  /** All optional models */\n  modelList: Model[];\n}\n\nexport interface ModelAction {\n  setModel: SetterAction<ModelStore>;\n  setModelByImmer: (update: (state: ModelStore) => void) => void;\n  transformDto2Vo: (\n    botData: GetDraftBotInfoAgwData,\n  ) => BotDetailModel['config'];\n  transformVo2Dto: (\n    model: BotDetailModel['config'],\n  ) => BotInfoForUpdate['model_info'];\n  initStore: (botData: GetDraftBotInfoAgwData) => void;\n  clear: () => void;\n}\n\nexport const useModelStore = create<ModelStore & ModelAction>()(\n  devtools(\n    subscribeWithSelector((set, get) => ({\n      ...getDefaultModelStore(),\n      setModel: setterActionFactory<ModelStore>(set),\n      setModelByImmer: update =>\n        set(\n          produce<ModelStore>(model => update(model)),\n          false,\n          'setModelByImmer',\n        ),\n      transformDto2Vo: botData => {\n        const modelInfo = botData.bot_info.model_info;\n        const config = botData.bot_option_data?.model_detail_map;\n        return {\n          model: modelInfo?.model_id,\n          temperature: modelInfo?.temperature,\n          max_tokens: modelInfo?.max_tokens,\n          top_p: modelInfo?.top_p,\n          frequency_penalty: modelInfo?.frequency_penalty,\n          presence_penalty: modelInfo?.presence_penalty,\n          ShortMemPolicy: {\n            ContextContentType: modelInfo?.short_memory_policy\n              ?.context_mode as unknown as ContextContentType,\n            HistoryRound: modelInfo?.short_memory_policy?.history_round,\n          },\n          model_name:\n            modelInfo?.model_id && config\n              ? config[modelInfo.model_id]?.model_name\n              : '',\n\n          model_style: modelInfo?.model_style,\n          response_format: modelInfo?.response_format,\n        };\n      },\n      transformVo2Dto: model =>\n        model?.model\n          ? {\n              model_id: model.model,\n              temperature: model.temperature,\n              max_tokens: model.max_tokens,\n              top_p: model.top_p,\n              presence_penalty: model.presence_penalty,\n              frequency_penalty: model.frequency_penalty,\n              short_memory_policy: {\n                history_round: model?.ShortMemPolicy?.HistoryRound,\n                context_mode: model?.ShortMemPolicy\n                  ?.ContextContentType as unknown as ContextMode,\n              },\n              response_format: model.response_format,\n              model_style: model.model_style,\n            }\n          : {},\n      initStore: botData => {\n        const { transformDto2Vo } = get();\n        const { bot_info, bot_option_data } = botData;\n        bot_info?.model_info && bot_option_data?.model_detail_map\n          ? set({\n              config: transformDto2Vo(botData),\n            })\n          : set({ config: DEFAULT_MODEL_INFO() });\n      },\n      clear: () => {\n        set({ ...getDefaultModelStore() });\n      },\n    })),\n    {\n      enabled: IS_DEV_MODE,\n      name: 'botStudio.botDetail.model',\n    },\n  ),\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { I18n } from '@coze-arch/i18n';\n\nimport type { AgentBizInfo } from '../../types/agent';\n\nexport const DEFAULT_AGENT_BIZ_INFO = (): AgentBizInfo => ({});\nexport const DEFAULT_AGENT_DESCRIPTION = () =>\n  I18n.t('multiagent_node_scenarios_context_default');\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { nanoid } from 'nanoid';\nimport { omit } from 'lodash-es';\nimport {\n  type Agent as AgentFromPlayground,\n  type BotOptionData,\n  AgentType,\n  type DraftBotApi,\n  type MultiAgentInfo,\n  MultiAgentSessionType,\n  type UpdateAgentV2Request,\n  ReferenceUpdateType,\n} from '@coze-arch/bot-api/playground_api';\nimport { LineType } from '@flowgram-adapter/free-layout-editor';\n\nimport { useModelStore } from '../model';\nimport { useBotSkillStore } from '../bot-skill';\nimport { findFirstAgentId } from '../../utils/find-agent';\nimport type { BotSuggestionConfig } from '../../types/skill';\nimport type { Agent, BotMultiAgent, DraftBotVo } from '../../types/agent';\nimport { DEFAULT_AGENT_BIZ_INFO, DEFAULT_AGENT_DESCRIPTION } from './defaults';\nexport const transformDto2Vo = {\n  agent: (botOpts?: BotOptionData, data?: AgentFromPlayground): Agent => {\n    const { transformDto2Vo: transformDto2Vo4BotSkill } =\n      useBotSkillStore.getState();\n    const { transformDto2Vo: transformDto2Vo4Model } = useModelStore.getState();\n    const model = transformDto2Vo4Model({\n      bot_info: {\n        model_info: data?.model_info,\n      },\n      bot_option_data: botOpts,\n    });\n\n    const prompt = data?.prompt_info?.prompt ?? '';\n\n    const pluginApis = transformDto2Vo4BotSkill.plugin(\n      data?.plugin_info_list,\n      botOpts?.plugin_detail_map,\n      botOpts?.plugin_api_detail_map,\n    );\n\n    const workflows = transformDto2Vo4BotSkill.workflow(\n      data?.workflow_info_list,\n      botOpts?.workflow_detail_map,\n    );\n    const knowledge = transformDto2Vo4BotSkill.knowledge(\n      data?.knowledge,\n      botOpts?.knowledge_detail_map,\n    );\n\n    const devHooks = transformDto2Vo4BotSkill.hookInfo(data?.hook_info);\n\n    return {\n      id: data?.agent_id ?? '',\n      reference_id: data?.reference_id,\n      reference_info_status: data?.reference_info_status,\n      update_type: data?.update_type,\n      agent_type: data?.agent_type,\n      name: data?.agent_name,\n      position: data?.agent_position,\n      model,\n      prompt,\n      description: data?.description || DEFAULT_AGENT_DESCRIPTION(),\n      // Default business state bizInfo\n      bizInfo: DEFAULT_AGENT_BIZ_INFO(),\n      system_info_all: [],\n      skills: {\n        pluginApis,\n        workflows,\n        knowledge,\n        ...(devHooks ? { devHooks } : {}),\n      },\n      current_version: data?.current_version,\n      suggestion: data?.suggest_reply_info as unknown as BotSuggestionConfig,\n      intents: data?.intents || [],\n      jump_config: data?.jump_config || {},\n      ...(data?.agent_type === AgentType.Global_Agent && {\n        intents: data.intents?.length\n          ? data.intents\n          : [{ intent_id: nanoid() }],\n      }),\n    };\n  },\n  botNodeInfo: (bot: DraftBotApi): DraftBotVo => {\n    const { transformDto2Vo: transformDto2Vo4BotSkill } =\n      useBotSkillStore.getState();\n    return {\n      ...bot,\n      work_info: {\n        suggest_reply: transformDto2Vo4BotSkill.suggestionConfig(\n          bot.suggest_reply,\n          true,\n        ),\n      },\n    };\n  },\n  multiAgent: ({\n    agents,\n    multiInfo,\n    botOpts,\n  }: {\n    agents?: AgentFromPlayground[];\n    multiInfo?: MultiAgentInfo;\n    botOpts?: BotOptionData;\n  }): BotMultiAgent => {\n    const transformedAgents =\n      agents?.map(item => transformDto2Vo.agent(botOpts, item)) || [];\n\n    const tempEdges = transformedAgents?.flatMap(\n      agent =>\n        agent.intents?.map(intent => ({\n          sourceNodeID: agent.id,\n          targetNodeID: intent.next_agent_id || '',\n          sourcePortID: intent.intent_id,\n        })) || [],\n    );\n\n    return {\n      edges: tempEdges,\n      connector_type: (multiInfo?.connector_type ??\n        LineType.BEZIER) as LineType,\n      agents: transformedAgents,\n      botAgentInfos: [],\n      chatModeConfig:\n        multiInfo?.session_type === MultiAgentSessionType.Host\n          ? {\n              type: multiInfo.session_type,\n              currentHostId:\n                findFirstAgentId({\n                  agents: transformedAgents,\n                }) || '',\n            }\n          : { type: MultiAgentSessionType.Flow },\n    };\n  },\n};\n\nexport const transformVo2Dto = {\n  agent: (targetAgent: Agent): Omit<UpdateAgentV2Request, 'bot_id'> => {\n    const { transformVo2Dto: transformVo2Dto4BotSkill } =\n      useBotSkillStore.getState();\n    const { transformVo2Dto: transformVo2Dto4Model } = useModelStore.getState();\n\n    return {\n      ...omit(targetAgent, [\n        'skills',\n        'system_info_all',\n        'prompt',\n        'bizInfo',\n        'jump_config',\n        'model',\n        'suggestion',\n      ]),\n\n      plugin_info_list: transformVo2Dto4BotSkill.plugin(\n        targetAgent?.skills?.pluginApis,\n      ),\n      workflow_info_list: transformVo2Dto4BotSkill.workflow(\n        targetAgent?.skills?.workflows,\n      ),\n      knowledge: transformVo2Dto4BotSkill.knowledge(\n        targetAgent?.skills?.knowledge,\n      ),\n      suggest_reply_info: transformVo2Dto4BotSkill.suggestionConfig(\n        targetAgent?.suggestion,\n      ),\n      hook_info: targetAgent?.skills?.devHooks,\n      model_info: transformVo2Dto4Model(targetAgent?.model),\n      prompt_info: {\n        prompt: targetAgent.prompt,\n      },\n      jump_config: targetAgent.jump_config,\n\n      current_version:\n        targetAgent.update_type === ReferenceUpdateType.AutoUpdate\n          ? // If the current agent is automatically updated, set the current_version to \"0\"\n            '0'\n          : targetAgent.current_version,\n    };\n  },\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools, subscribeWithSelector } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { nanoid } from 'nanoid';\nimport { isEqual, uniqWith } from 'lodash-es';\nimport { produce } from 'immer';\nimport { withSlardarIdButton } from '@coze-studio/bot-utils';\nimport {\n  type BotOptionData,\n  type bot_common,\n  type AgentReferenceInfo,\n  type Agent as AgentFromPlayground,\n  BotMode,\n  type GetDraftBotInfoAgwData,\n} from '@coze-arch/idl/playground_api';\nimport { I18n } from '@coze-arch/i18n';\nimport { useSpaceStore } from '@coze-arch/bot-studio-store';\nimport { SpaceApiV2 } from '@coze-arch/bot-space-api';\nimport { UIToast } from '@coze-arch/bot-semi';\nimport {\n  AgentType,\n  AgentVersionCompat,\n  MultiAgentSessionType,\n  type PluginApi,\n} from '@coze-arch/bot-api/developer_api';\nimport { PlaygroundApi } from '@coze-arch/bot-api';\nimport { LineType } from '@flowgram-adapter/free-layout-editor';\nimport type { WorkflowEdgeJSON } from '@flowgram-adapter/free-layout-editor';\nimport type { IPoint } from '@flowgram-adapter/common';\n\nimport { type SetterAction, setterActionFactory } from '@/utils/setter-factory';\nimport { getPluginApisFilterExample } from '@/utils/plugin-apis';\nimport {\n  findAgentByNextIntentID,\n  findFirstAgent,\n  findFirstAgentId,\n  findTargetAgent,\n} from '@/utils/find-agent';\nimport type { BotDetailSkill, KnowledgeConfig } from '@/types/skill';\n\nimport { useManuallySwitchAgentStore } from '../manually-switch-agent-store';\nimport { useCollaborationStore } from '../collaboration';\nimport { useBotInfoStore } from '../bot-info';\nimport {\n  type Agent,\n  type ChatModeConfig,\n  type DraftBotVo,\n  type MultiSheetViewOpenState,\n} from '../../types/agent';\nimport { transformDto2Vo, transformVo2Dto } from './transform';\n\nexport interface MultiAgentStore {\n  agents: Agent[];\n  edges: WorkflowEdgeJSON[];\n  connector_type: LineType;\n  /** Use to save bot information for bot type nodes */\n  botAgentInfos: DraftBotVo[];\n  /**\n   * Session takeover configuration\n   * Default to flow mode\n   */\n  chatModeConfig: ChatModeConfig;\n  /** Current agent id **/\n  currentAgentID: string;\n  /**Muti left and right expanded state **/\n  multiSheetViewOpen: MultiSheetViewOpenState;\n}\n\nexport const getDefaultMultiAgentStore = (): MultiAgentStore => ({\n  agents: [],\n  edges: [],\n  connector_type: LineType.BEZIER,\n  currentAgentID: '',\n  botAgentInfos: [],\n  multiSheetViewOpen: {\n    left: true,\n    right: true,\n  },\n  chatModeConfig: {\n    type: MultiAgentSessionType.Host,\n    currentHostId: '',\n  },\n});\n\nexport interface MultiAgentAction {\n  setMultiAgent: SetterAction<MultiAgentStore>;\n  setMultiAgentByImmer: (update: (state: MultiAgentStore) => void) => void;\n  setMultiSheetViewOpen: (state: Partial<MultiSheetViewOpenState>) => void;\n  updatedCurrentAgentIdWithConnectStart: () => void;\n  /** Reset host node to start connected node */\n  resetHostAgent: () => void;\n  /**\n   * Set the intent of sourceAgentId's portId to next_agent_id nextAgentId\n   *\n   * @Deprecated This is the method of the old canvas, the new version is addAgentIntent\n   */\n  setAgentIntentNextID: (\n    sourceAgentId?: string,\n    portId?: string,\n    agentId?: string,\n  ) => void;\n  addAgentIntent: (sourceAgentId: string, targetAgentId: string) => void;\n  deleteAgentIntent: (sourceAgentId: string, targetAgentId: string) => void;\n  /**\n   * The agent that finds the source of the current agent according to the agentId, that is, the upstream agent\n   * Find an intent in the upstream agent, next_agent_id === agentId. Clear the next_agent_id of the intent\n   */\n  clearEdgesByTargetAgentId: (agentId?: string) => void;\n  updateAgentSkillKnowledgeDatasetInfo: (\n    agentId: string,\n    dataSetInfo: KnowledgeConfig['dataSetInfo'],\n  ) => void;\n  updateAgentSkillPluginApis: (\n    agentId: string,\n    pluginApis: Array<PluginApi>,\n  ) => void;\n  addAgent2Store: (\n    agentInfo: bot_common.Agent,\n    optionData?: BotOptionData,\n  ) => Agent;\n  addAgent: (config: {\n    /** @default AgentType.LLM_Agent */\n    type?: AgentType;\n    position?: IPoint;\n    /** Whether to use the struct version - easy to write single test will be deleted soon*/\n    structFlag?: boolean;\n  }) => Promise<Agent | undefined>;\n  batchAddBotAgent: (config: {\n    bots: AgentReferenceInfo[];\n    positions: IPoint[];\n    /** Whether to use the struct version - easy to write single test will be deleted soon*/\n    structFlag?: boolean;\n  }) => Promise<Agent[]>;\n  updateBotNodeInfo: (\n    agents: AgentFromPlayground[],\n  ) => Promise<void> | undefined;\n  copyAgent: (agentId: string) => Promise<Agent | undefined>;\n  removeAgentSkillItem: (\n    agentId: string,\n    type: keyof Pick<BotDetailSkill, 'pluginApis' | 'workflows' | 'knowledge'>,\n    apiId?: string,\n  ) => void;\n  /**\n   * Clears the next_id of an intent (i.e. edge)\n   *\n   * - Q1: Why not use the intent id directly to find the intent?\n   * A1: When dragging and dropping an existing connection to another node, the SDK fires the addEdge event for that intent first, followed by the deleteEdge event.\n   *      Causes the deleteEdge event to overwrite the newly updated intent of addEdge with the intent id.\n   *\n   * - Q2: Is it not enough to find the intent by the target AgentId, why do you need the intent id?\n   * - A2: When both intents of the same node point to the same target, one of the connections is deleted. It is impossible to determine which one is deleted. It must be judged with the intent id.\n   *\n   * @Deprecated the method of the old canvas, the new version is deleteAgentIntent\n   */\n  clearIntentNextId: (\n    sourceAgentId: string,\n    targetAgentId: string,\n    intentId: string,\n  ) => void;\n  transformDto2Vo: typeof transformDto2Vo;\n  transformVo2Dto: typeof transformVo2Dto;\n  initStore: (botData: GetDraftBotInfoAgwData) => void;\n  clear: () => void;\n}\n\nexport const useMultiAgentStore = create<MultiAgentStore & MultiAgentAction>()(\n  devtools(\n    // eslint-disable-next-line @coze-arch/max-line-per-function\n    subscribeWithSelector((set, get) => ({\n      ...getDefaultMultiAgentStore(),\n      setMultiAgent: setterActionFactory<MultiAgentStore>(set),\n      setMultiAgentByImmer: update =>\n        set(produce<MultiAgentStore>(multiAgent => update(multiAgent))),\n      setMultiSheetViewOpen: (state: Partial<MultiSheetViewOpenState>) => {\n        set(s => ({\n          ...s,\n          multiSheetViewOpen: {\n            ...s.multiSheetViewOpen,\n            ...state,\n          },\n        }));\n      },\n      updatedCurrentAgentIdWithConnectStart: () => {\n        const firstAgent = findFirstAgent(get());\n        const newAgentId = firstAgent?.id;\n        useManuallySwitchAgentStore.getState().clearAgentId();\n        if (newAgentId) {\n          set(\n            produce<MultiAgentStore>(state => {\n              state.currentAgentID = newAgentId;\n            }),\n          );\n        }\n      },\n      resetHostAgent: () => {\n        const firstAgentId = findFirstAgentId(get());\n        if (!firstAgentId) {\n          return;\n        }\n        set(\n          produce<MultiAgentStore>(multiAgent => {\n            if (multiAgent.chatModeConfig.type !== MultiAgentSessionType.Host) {\n              return;\n            }\n            multiAgent.chatModeConfig.currentHostId = firstAgentId;\n          }),\n        );\n      },\n      setAgentIntentNextID: (\n        sourceAgentId?: string,\n        portId?: string,\n        agentId?: string,\n      ) => {\n        set(\n          produce<MultiAgentStore>(state => {\n            const { agents } = state;\n            const sourceAgent = findTargetAgent(agents, sourceAgentId);\n            if (sourceAgent) {\n              const targetIntent = sourceAgent.intents?.find(\n                item => item.intent_id === portId,\n              );\n              if (targetIntent && agentId) {\n                targetIntent.next_agent_id = agentId;\n              }\n            }\n          }),\n        );\n      },\n      clearIntentNextId: (\n        sourceAgentId: string,\n        targetAgentId: string,\n        intentId: string,\n      ) => {\n        set(\n          produce<MultiAgentStore>(state => {\n            const sourceAgent = findTargetAgent(state.agents, sourceAgentId);\n            const sourceIntent = sourceAgent?.intents?.find(\n              i =>\n                i.next_agent_id === targetAgentId && i.intent_id === intentId,\n            );\n            if (!sourceIntent) {\n              return;\n            }\n            sourceIntent.next_agent_id = undefined;\n          }),\n        );\n      },\n      addAgentIntent: (sourceAgentId, targetAgentId) => {\n        set(\n          produce<MultiAgentStore>(({ agents }) => {\n            const sourceAgent = findTargetAgent(agents, sourceAgentId);\n            if (!sourceAgent) {\n              return;\n            }\n            const newIntent = {\n              intent_id: nanoid(),\n              next_agent_id: targetAgentId,\n            };\n            switch (sourceAgent.agent_type) {\n              case AgentType.Global_Agent:\n                if (sourceAgent.intents?.[0]) {\n                  sourceAgent.intents[0].next_agent_id = targetAgentId;\n                } else {\n                  sourceAgent.intents = [newIntent];\n                }\n                break;\n              default:\n                if (sourceAgent.intents) {\n                  sourceAgent.intents.push(newIntent);\n                } else {\n                  sourceAgent.intents = [newIntent];\n                }\n            }\n          }),\n        );\n      },\n      deleteAgentIntent: (sourceAgentId, targetAgentId) =>\n        set(\n          produce<MultiAgentStore>(({ agents }) => {\n            const sourceAgent = findTargetAgent(agents, sourceAgentId);\n            if (!sourceAgent) {\n              return;\n            }\n            switch (sourceAgent.agent_type) {\n              case AgentType.Global_Agent:\n                if (sourceAgent.intents?.[0]) {\n                  sourceAgent.intents[0].next_agent_id = undefined;\n                } else {\n                  sourceAgent.intents = [{ intent_id: nanoid() }];\n                }\n                break;\n              default:\n                sourceAgent.intents =\n                  sourceAgent.intents?.filter(\n                    intent => intent.next_agent_id !== targetAgentId,\n                  ) || [];\n            }\n          }),\n        ),\n      clearEdgesByTargetAgentId: (targetAgentId?: string) => {\n        set(\n          produce<MultiAgentStore>(state => {\n            const { agents } = state;\n            const sourceAgent = findAgentByNextIntentID(agents, targetAgentId);\n\n            if (sourceAgent) {\n              const { intents } = sourceAgent;\n\n              // Execute the first step instruction. Clear the upstream agent's next_agent_id\n              intents?.forEach(item => {\n                if (item.next_agent_id === targetAgentId) {\n                  item.next_agent_id = undefined;\n                }\n              });\n            }\n          }),\n        );\n      },\n      updateAgentSkillKnowledgeDatasetInfo: (agentId, dataSetInfo) => {\n        set(\n          produce<MultiAgentStore>(state => {\n            const findAgent = findTargetAgent(state.agents, agentId);\n            if (findAgent) {\n              findAgent.skills.knowledge.dataSetInfo = dataSetInfo;\n            }\n          }),\n        );\n      },\n      updateAgentSkillPluginApis: (agentId, pluginApis) => {\n        set(\n          produce<MultiAgentStore>(state => {\n            const findAgent = findTargetAgent(state.agents, agentId);\n            if (findAgent) {\n              findAgent.skills.pluginApis =\n                getPluginApisFilterExample(pluginApis);\n            }\n          }),\n        );\n      },\n      addAgent2Store: (\n        agentInfo: bot_common.Agent,\n        optionData?: BotOptionData,\n      ) => {\n        const agent = transformDto2Vo.agent(optionData, agentInfo);\n        set(\n          produce<MultiAgentStore>(state => {\n            state.agents.push(agent);\n          }),\n        );\n        return agent;\n      },\n      addAgent: async ({ type = AgentType.LLM_Agent, position }) => {\n        const { botId } = useBotInfoStore.getState();\n        const { getBaseVersion, setCollaborationByImmer } =\n          useCollaborationStore.getState();\n        const createAgentParams = {\n          agent_type: type,\n          bot_id: botId,\n          position,\n          base_commit_version: getBaseVersion(),\n          version_compat: AgentVersionCompat.NewVersion,\n        };\n        const { data, same_with_online, branch } =\n          await PlaygroundApi.CreateAgentV2(createAgentParams);\n        if (!data) {\n          UIToast.error({\n            content: withSlardarIdButton(\n              I18n.t('chatflow_error_create_failed'),\n            ),\n          });\n          return;\n        }\n        setCollaborationByImmer(state => {\n          state.sameWithOnline = same_with_online ?? false;\n          state.branch = branch;\n        });\n        return get().addAgent2Store(data);\n      },\n      batchAddBotAgent: async ({ bots, positions }) => {\n        const spaceId = useSpaceStore.getState().space.id as string;\n        const { botId } = useBotInfoStore.getState();\n        const { getBaseVersion, setCollaborationByImmer } =\n          useCollaborationStore.getState();\n        const { botAgentInfos } = get();\n        const batchCreateAgentParams = {\n          bot_id: botId,\n          agent_type: AgentType.Bot_Agent,\n          position: positions,\n          references: bots,\n          agent_cnt: bots.length,\n          base_commit_version: getBaseVersion(),\n        };\n        const [\n          { data: agentInfos, same_with_online, branch },\n          { data: botInfos },\n        ] = await Promise.all([\n          PlaygroundApi.BatchCreateAgentV2(batchCreateAgentParams),\n          PlaygroundApi.MGetBotByVersion({\n            space_id: spaceId,\n            bot_versions: bots?.map(e => ({\n              bot_id: e.ReferenceId,\n              version: e.Version,\n            })),\n          }),\n        ]);\n\n        if (\n          !Array.isArray(agentInfos) ||\n          agentInfos.length === 0 ||\n          !Array.isArray(botInfos) ||\n          botInfos.length === 0\n        ) {\n          UIToast.error({\n            content: withSlardarIdButton(\n              I18n.t('chatflow_error_create_failed'),\n            ),\n          });\n          return [] as Agent[];\n        }\n        const botInfosVo = botInfos.map(transformDto2Vo.botNodeInfo);\n        setCollaborationByImmer(store => {\n          store.sameWithOnline = same_with_online ?? false;\n          store.branch = branch;\n        });\n        set(\n          produce<MultiAgentStore>(store => {\n            store.botAgentInfos = uniqWith(\n              [...botAgentInfos, ...botInfosVo],\n              isEqual,\n            );\n          }),\n        );\n        return agentInfos.map(e => {\n          const botInfo = botInfosVo.find(b => b.id === e.reference_id);\n          return get().addAgent2Store({\n            ...e,\n            agent_name: botInfo?.name,\n            icon_uri: botInfo?.icon_url,\n          });\n        });\n      },\n      copyAgent: async (agentId: string) => {\n        const { botId } = useBotInfoStore.getState();\n        const { getBaseVersion } = useCollaborationStore.getState();\n        const copyAgentParams = {\n          space_id: useSpaceStore.getState().getSpaceId(),\n          bot_id: botId,\n          base_commit_version: getBaseVersion(),\n          agent_id: agentId,\n        };\n        const { data, bot_option_data = {} } = await PlaygroundApi.CopyAgentV2(\n          copyAgentParams,\n        );\n        if (!data) {\n          UIToast.error({\n            content: withSlardarIdButton(\n              I18n.t('chatflow_error_create_failed'),\n            ),\n          });\n          return;\n        }\n        return get().addAgent2Store(data, bot_option_data);\n      },\n      removeAgentSkillItem: (agentId, type, apiId) => {\n        set(\n          produce<MultiAgentStore>(s => {\n            const findAgent = findTargetAgent(s.agents, agentId);\n            if (findAgent?.skills) {\n              switch (type) {\n                case 'pluginApis': {\n                  findAgent.skills.pluginApis =\n                    findAgent.skills.pluginApis.filter(\n                      item => item.api_id !== apiId,\n                    );\n                  break;\n                }\n                case 'workflows': {\n                  findAgent.skills.workflows =\n                    findAgent.skills.workflows.filter(\n                      item => item.workflow_id !== apiId,\n                    );\n                  break;\n                }\n                case 'knowledge': {\n                  findAgent.skills.knowledge.dataSetList =\n                    findAgent.skills.knowledge.dataSetList.filter(\n                      item => item.dataset_id !== apiId,\n                    );\n                  break;\n                }\n                default:\n                  console.warn('[removeAgentSkillItem]: ?');\n              }\n            }\n          }),\n        );\n      },\n      updateBotNodeInfo: agents => {\n        const { setMultiAgentByImmer } = get();\n        const botAgents = agents.filter(\n          e => e.agent_type === AgentType.Bot_Agent,\n        );\n        if (Array.isArray(botAgents) && botAgents.length > 0) {\n          return SpaceApiV2.MGetBotByVersion({\n            bot_versions: botAgents?.map(e => ({\n              bot_id: e.reference_id,\n              version: e.current_version,\n            })),\n          }).then(botInfos => {\n            setMultiAgentByImmer(s => {\n              s.botAgentInfos = (botInfos.data ?? []).map(\n                transformDto2Vo.botNodeInfo,\n              );\n            });\n          });\n        }\n      },\n      transformDto2Vo,\n      transformVo2Dto,\n      initStore: botData => {\n        const { bot_info: botInfo } = botData;\n        const {\n          transformDto2Vo: transformDto2Vo4Multi,\n          updatedCurrentAgentIdWithConnectStart,\n          updateBotNodeInfo,\n        } = get();\n\n        const {\n          bot_info: { agents, multi_agent_info: multiInfo },\n          bot_option_data: botOpts,\n        } = botData;\n\n        set(\n          transformDto2Vo4Multi.multiAgent({\n            agents,\n            multiInfo,\n            botOpts,\n          }),\n        );\n        const isMultiAgent = botInfo?.bot_mode === BotMode.MultiMode;\n        if (isMultiAgent) {\n          // Set the initial conversation agent id\n          updatedCurrentAgentIdWithConnectStart();\n          // Get the information of the sub-bot whose agent node is a child bot, and assign it to the store.\n          updateBotNodeInfo(botInfo?.agents || []);\n        }\n      },\n      clear: () => {\n        // eslint-disable-next-line max-lines\n        set({ ...getDefaultMultiAgentStore() });\n      },\n    })),\n    {\n      enabled: IS_DEV_MODE,\n      name: 'botStudio.botDetail.multiAgent',\n    },\n  ),\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type TabDisplayItems, TabStatus } from '@coze-arch/idl/developer_api';\n\nexport const DEFAULT_BOT_SKILL_BLOCK_COLLAPSIBLE_STATE =\n  (): TabDisplayItems => ({\n    plugin_tab_status: TabStatus.Default,\n    workflow_tab_status: TabStatus.Default,\n    imageflow_tab_status: TabStatus.Default,\n    knowledge_tab_status: TabStatus.Default,\n    database_tab_status: TabStatus.Default,\n    variable_tab_status: TabStatus.Default,\n    opening_dialog_tab_status: TabStatus.Default,\n    scheduled_task_tab_status: TabStatus.Default,\n    suggestion_tab_status: TabStatus.Default,\n    tts_tab_status: TabStatus.Default,\n    filebox_tab_status: TabStatus.Default,\n    background_image_tab_status: TabStatus.Default,\n    shortcut_tab_status: TabStatus.Default,\n  });\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools, subscribeWithSelector } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { size } from 'lodash-es';\nimport { produce } from 'immer';\nimport dayjs from 'dayjs';\nimport { type GetDraftBotInfoAgwData } from '@coze-arch/idl/playground_api';\nimport { type BotPageFromEnum } from '@coze-arch/bot-typings/common';\nimport { SpaceApi } from '@coze-arch/bot-space-api';\nimport {\n  type GetDraftBotDisplayInfoResponse,\n  type TabDisplayItems,\n} from '@coze-arch/bot-api/developer_api';\nimport { DeveloperApi } from '@coze-arch/bot-api';\n\nimport { useBotInfoStore } from '../bot-info';\nimport {\n  type SetterAction,\n  setterActionFactory,\n} from '../../utils/setter-factory';\nimport { DEFAULT_BOT_SKILL_BLOCK_COLLAPSIBLE_STATE } from './defaults';\n\ninterface SavingInfo {\n  saving: boolean;\n  time: string;\n  debouncing?: boolean;\n  scopeKey?: string;\n  triggerType?: string;\n}\nexport const getDefaultPageRuntimeStore = (): PageRuntime => ({\n  init: false,\n  isSelf: false,\n  isPreview: false,\n  editable: false,\n  savingInfo: {\n    saving: false,\n    time: dayjs().format('HH:mm:ss'),\n    debouncing: false,\n    scopeKey: '',\n    triggerType: '',\n  },\n  historyVisible: false,\n  botSkillBlockCollapsibleState: {},\n  grabPluginId: '',\n  hasUnpublishChange: false,\n});\n\n// Editor state control for bot\nexport interface PageRuntime {\n  /** Initialization **/\n  init: boolean;\n  /** Is the current user the creator of the bot?*/\n  isSelf: boolean;\n  /** Is it preview status isPreview = typeof version! == 'undefined'; **/\n  isPreview: boolean;\n  /** Server level passthrough **/\n  editable: boolean;\n  /**Control bot history version display **/\n  historyVisible?: boolean;\n\n  /**  Record the status of the user actively expanding/retracting the bot capability module **/\n  botSkillBlockCollapsibleState: TabDisplayItems;\n  /** Page Source **/\n  pageFrom?: BotPageFromEnum;\n  /** Save information **/\n  savingInfo: SavingInfo;\n  /** Dashword plugin id, one chat-area one **/\n  grabPluginId: string;\n  /** Are there any unpublished changes, header display **/\n  hasUnpublishChange: boolean;\n}\n\nexport type InitStoreData = GetDraftBotInfoAgwData & { customVersion?: string };\nexport interface PageRuntimeAction {\n  setPageRuntimeBotInfo: SetterAction<PageRuntime>;\n  setPageRuntimeByImmer: (update: (state: PageRuntime) => void) => void;\n  getBotSkillBlockCollapsibleState: () => Promise<void>;\n  setBotSkillBlockCollapsibleState: (\n    $params: TabDisplayItems,\n    disableUpdateService?: boolean,\n  ) => void;\n  getIsPreview: (version?: string) => boolean;\n  initStore: (data: InitStoreData) => void;\n  clear: () => void;\n}\n\nexport const usePageRuntimeStore = create<PageRuntime & PageRuntimeAction>()(\n  devtools(\n    subscribeWithSelector((set, get) => ({\n      ...getDefaultPageRuntimeStore(),\n      setPageRuntimeBotInfo: setterActionFactory<PageRuntime>(set),\n      setPageRuntimeByImmer: update =>\n        set(produce<PageRuntime>(state => update(state))),\n\n      /**\n       * Get the status of the user's active expand/collapse bot capability module\n       *  Called only when opening my bot edit page for the first time\n       * @see\n       */\n      getBotSkillBlockCollapsibleState: async () => {\n        try {\n          const resp: GetDraftBotDisplayInfoResponse =\n            await SpaceApi.GetDraftBotDisplayInfo({\n              bot_id: useBotInfoStore.getState().botId,\n            });\n          const botSkillBlockCollapsibleState =\n            resp.data?.tab_display_info ??\n            DEFAULT_BOT_SKILL_BLOCK_COLLAPSIBLE_STATE();\n\n          set(prevState => ({\n            ...prevState,\n            botSkillBlockCollapsibleState,\n          }));\n        } catch (error) {\n          set(prevState => ({\n            ...prevState,\n            botSkillBlockCollapsibleState:\n              DEFAULT_BOT_SKILL_BLOCK_COLLAPSIBLE_STATE(),\n          }));\n          throw error;\n        }\n      },\n      /**\n       * Stores the status of the user's active expand/retract bot capability module\n       *  Only record when active\n       * @see\n       */\n      setBotSkillBlockCollapsibleState: (\n        $params: TabDisplayItems,\n        disableUpdateService?: boolean,\n      ) => {\n        if (size($params) > 0) {\n          // Record to local finite-state machine\n          set({\n            ...get(),\n            botSkillBlockCollapsibleState: {\n              ...get().botSkillBlockCollapsibleState,\n              ...$params,\n            },\n          });\n\n          if (disableUpdateService) {\n            return;\n          }\n\n          // Synchronize to server level\n          DeveloperApi.UpdateDraftBotDisplayInfo({\n            bot_id: useBotInfoStore.getState().botId,\n            display_info: { tab_display_info: $params },\n            space_id: useBotInfoStore.getState().space_id,\n          });\n        }\n      },\n      getIsPreview: version => typeof version !== 'undefined',\n      initStore: info => {\n        const { getIsPreview } = get();\n        set({\n          init: true,\n          isPreview: getIsPreview(info?.customVersion),\n          editable: info?.editable,\n          savingInfo: { saving: false, time: dayjs().format('HH:mm:ss') },\n          hasUnpublishChange: Boolean(info.has_unpublished_change),\n        });\n      },\n      clear: () => {\n        set({ ...getDefaultPageRuntimeStore() });\n      },\n    })),\n    {\n      enabled: IS_DEV_MODE,\n      name: 'botStudio.botDetail.pageRuntime',\n    },\n  ),\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools, subscribeWithSelector } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { produce } from 'immer';\nimport {\n  type BotInfoForUpdate,\n  type GetDraftBotInfoAgwData,\n} from '@coze-arch/bot-api/playground_api';\nimport { type BotPrompt, PromptType } from '@coze-arch/bot-api/developer_api';\n\nimport {\n  type SetterAction,\n  setterActionFactory,\n} from '../utils/setter-factory';\n\nexport const getDefaultPersonaStore = (): PersonaStore => ({\n  systemMessage: {\n    data: '',\n    prompt_type: PromptType.SYSTEM,\n    isOptimize: false,\n    record_id: '',\n  },\n  optimizePrompt: '',\n  promptOptimizeUuid: '',\n  promptOptimizeStatus: 'waitForRespond',\n});\n\nexport interface RequiredBotPrompt extends BotPrompt {\n  prompt_type: PromptType;\n  data: string;\n  isOptimize: boolean;\n  record_id?: string;\n}\n\n/** Persona & Prompted Areas */\nexport interface PersonaStore {\n  systemMessage: RequiredBotPrompt;\n  optimizePrompt: string;\n  promptOptimizeUuid: string;\n  promptOptimizeStatus: 'responding' | 'waitForRespond' | 'endResponse';\n}\n\nexport interface PersonaAction {\n  setPersona: SetterAction<PersonaStore>;\n  setPersonaByImmer: (update: (state: PersonaStore) => void) => void;\n  transformDto2Vo: (data: GetDraftBotInfoAgwData) => RequiredBotPrompt;\n  transformVo2Dto: (\n    persona: Partial<RequiredBotPrompt>,\n  ) => BotInfoForUpdate['prompt_info'];\n  initStore: (botData: GetDraftBotInfoAgwData) => void;\n  clear: () => void;\n}\n\nexport const usePersonaStore = create<PersonaStore & PersonaAction>()(\n  devtools(\n    subscribeWithSelector((set, get) => ({\n      ...getDefaultPersonaStore(),\n      setPersona: setterActionFactory<PersonaStore>(set),\n      setPersonaByImmer: update =>\n        set(produce<PersonaStore>(persona => update(persona))),\n      transformDto2Vo: botData =>\n        ({\n          data: botData.bot_info?.prompt_info?.prompt ?? '',\n          prompt_type: PromptType.SYSTEM,\n          isOptimize: false,\n          record_id: '',\n        } as unknown as RequiredBotPrompt),\n      transformVo2Dto: persona =>\n        ({\n          prompt: persona?.data || '',\n        } as unknown as BotInfoForUpdate['prompt_info']),\n      initStore: botData => {\n        const { setPersonaByImmer, transformDto2Vo } = get();\n        botData &&\n          setPersonaByImmer(store => {\n            store.systemMessage = transformDto2Vo(botData);\n          });\n      },\n      clear: () => {\n        set({ ...getDefaultPersonaStore() });\n      },\n    })),\n    {\n      enabled: IS_DEV_MODE,\n      name: 'botStudio.botDetail.persona',\n    },\n  ),\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools, subscribeWithSelector } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport {\n  type BotInfoForUpdate,\n  type GetDraftBotInfoAgwData,\n  type UserQueryCollectConf,\n} from '@coze-arch/idl/playground_api';\n\nimport {\n  type SetterAction,\n  setterActionFactory,\n} from '../utils/setter-factory';\nexport interface QueryCollectStore {\n  is_collected: boolean;\n  private_policy: string;\n}\n\nexport const getDefaultQueryCollectStore = (): QueryCollectStore => ({\n  is_collected: false,\n  private_policy: '',\n});\n\nexport interface QueryCollectAction {\n  setQueryCollect: SetterAction<QueryCollectStore>;\n  transformDto2Vo: (data: GetDraftBotInfoAgwData) => UserQueryCollectConf;\n  transformVo2Dto: (\n    queryCollectConf: UserQueryCollectConf,\n  ) => BotInfoForUpdate['user_query_collect_conf'];\n  initStore: (data: GetDraftBotInfoAgwData) => void;\n  clear: () => void;\n}\n\nexport const useQueryCollectStore = create<\n  QueryCollectStore & QueryCollectAction\n>()(\n  devtools(\n    subscribeWithSelector((set, get) => ({\n      ...getDefaultQueryCollectStore(),\n      setQueryCollect: setterActionFactory<QueryCollectStore>(set),\n      transformDto2Vo: botData => {\n        const data = botData.bot_info?.user_query_collect_conf;\n        return {\n          is_collected: data?.is_collected,\n          private_policy: data?.private_policy,\n        };\n      },\n      transformVo2Dto: info => info,\n      initStore: botData => {\n        const { transformDto2Vo } = get();\n        set(transformDto2Vo(botData));\n      },\n      clear: () => {\n        set({ ...getDefaultQueryCollectStore() });\n      },\n    })),\n    {\n      enabled: IS_DEV_MODE,\n      name: 'botStudio.botDetail.queryCollect',\n    },\n  ),\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type PluginStatus,\n  type PluginType,\n} from '@coze-arch/idl/plugin_develop';\nimport { type WorkflowMode } from '@coze-arch/bot-api/workflow_api';\nimport {\n  type HookInfo,\n  type LayoutInfo,\n  type BackgroundImageInfo,\n  type SuggestedQuestionsShowMode,\n  type DisablePromptCalling,\n  type RecallStrategy,\n  type DefaultUserInputType,\n  type PluginFrom,\n} from '@coze-arch/bot-api/playground_api';\nimport { type BotTableRWMode, type FieldItem } from '@coze-arch/bot-api/memory';\nimport { type Dataset } from '@coze-arch/bot-api/knowledge';\nimport type {\n  FileboxInfo,\n  PluginApi,\n  PluginParameter,\n  TaskInfoData,\n  TaskInfo,\n  SuggestReplyMode,\n} from '@coze-arch/bot-api/developer_api';\nimport { type ShortCutStruct } from '@coze-agent-ide/tool-config/src/shortcut-config/type';\n\ninterface DefaultPluginApi extends PluginApi {\n  isAuto?: boolean;\n  autoAddCss?: boolean;\n  // #The plugin dimension field where the region api is located\n  plugin_type?: PluginType;\n  is_official?: boolean;\n  plugin_icon?: string;\n  plugin_from?: PluginFrom;\n  status?: PluginStatus;\n  // #endregion\n}\nexport type EnabledPluginApi = Omit<DefaultPluginApi, 'debug_example'>;\n\nexport interface BotDetailSkill {\n  // Region Bot and Agent dimension common skills\n  /** Selected plugin api */\n  pluginApis: EnabledPluginApi[];\n  /** Selected workflow */\n  workflows: WorkFlowItemType[];\n  /** Knowledge Allocation */\n  knowledge: KnowledgeConfig;\n  // endregion\n\n  // Region Bot Dimension Unique skills\n  /**\n   * Task configuration\n   *\n   * No added tasks are included, and those added are managed independently within the component\n   */\n  taskInfo: TaskManageInfo;\n  /**\n   * Variable default configuration\n   *\n   * The present value in the upper right corner is not included. The present value is the component state requested after opening the pop-up window.\n   */\n  variables: VariableItem[];\n  /**\n   * Database default configuration\n   *\n   * The present value in the upper right corner is not included. The present value is the component state requested after opening the pop-up window.\n   */\n  database: DatabaseInfo;\n  /**\n   * Database multi-table default configuration\n   *\n   * The present value in the upper right corner is not included. The present value is the component state requested after opening the pop-up window.\n   */\n  databaseList: DatabaseList;\n  /** Opener configuration */\n  onboardingContent: ExtendOnboardingContent;\n  /** User Questions Suggested Configuration */\n  suggestionConfig: BotSuggestionConfig;\n  // endregion\n  /** Text to Speech */\n  tts: TTSInfo;\n  // Time Capsule\n  timeCapsule: TimeCapsuleConfig;\n  filebox: FileboxConfig;\n  // Chat background cover\n  backgroundImageInfoList: BackgroundImageInfo[];\n  // Quick Instruction\n  shortcut: ShortCutStruct;\n  // hooks\n  devHooks?: HookInfo;\n  layoutInfo: LayoutInfo;\n}\n\nexport interface TaskManageInfo {\n  user_task_allowed: boolean;\n  /** Request task loading status, business usage */\n  loading: boolean;\n  /** Task interface data, business use */\n  data: TaskInfoData[];\n  /** New task interface data for business use */\n  task_list: TaskInfo[];\n}\n\nexport enum VariableKeyErrType {\n  KEY_CHECK_PASS = 0, // Check passed\n  KEY_NAME_USED = 1, // Name is occupied\n\n  KEY_IS_NULL = 2, // is null\n}\n\nexport interface TableMemoryItem extends FieldItem {\n  errorMapper?: Record<string, string[]>;\n  disableMustRequired?: boolean;\n  nanoid?: string;\n  /**\n   * Is it a built-in field?\n   * @Description Built-in field: For display only, users cannot modify it, and fields with the same name cannot be created\n   */\n  isSystemField?: boolean;\n}\n\nexport interface DatabaseInfo {\n  tableId: string;\n  name: string;\n  desc: string;\n  icon_uri?: string;\n  extra_info?: Record<string, string>;\n  readAndWriteMode: BotTableRWMode;\n  tableMemoryList: TableMemoryItem[];\n}\nexport type DatabaseList = DatabaseInfo[];\n\nexport interface VariableItem {\n  id?: string;\n  key?: string;\n  description?: string;\n  enable?: boolean;\n  channel?: string;\n  default_value?: string;\n  errType?: VariableKeyErrType;\n  is_system?: boolean;\n  prompt_disabled?: boolean;\n  is_disabled?: boolean;\n}\n\nexport interface TagListType {\n  tagName: string;\n  key: string;\n  id: string;\n  name: string;\n  style_id: string;\n  language_code: string;\n  language_name: string;\n}\n\nexport interface ChatVoiceType {\n  key?: string;\n  id: string;\n  name?: string;\n  style_id: string;\n  language_code: string;\n  language_name?: string;\n}\nexport interface DebugStateType {\n  bot_id: string;\n  voice_id?: string;\n  enable?: boolean;\n  style_id?: string;\n}\nexport interface TTSInfo {\n  muted: boolean;\n  close_voice_call: boolean;\n  i18n_lang_voice: Record<string, number>;\n  i18n_lang_voice_str: Record<string, string>;\n  autoplay: boolean;\n  autoplay_voice: Record<string, number>;\n  tag_list?: TagListType[];\n  chatVoiceList?: ChatVoiceType[];\n  debugVoice: DebugStateType[];\n}\n\nexport enum TimeCapsuleOptionsEnum {\n  ON = 1,\n  OFF = 0,\n}\n\nexport interface TimeCapsuleConfig {\n  time_capsule_mode: TimeCapsuleOptionsEnum;\n  disable_prompt_calling: DisablePromptCalling;\n  time_capsule_time_to_live: string;\n}\n\nexport interface WorkFlowItemType {\n  workflow_id: string;\n  plugin_id: string;\n  name: string;\n  desc: string;\n  parameters: Array<PluginParameter>;\n  plugin_icon: string;\n  flow_mode?: WorkflowMode;\n}\n\nexport interface KnowledgeConfig {\n  /** Selected knowledge */\n  dataSetList: Array<Dataset>;\n  dataSetInfo: {\n    min_score: number;\n    search_strategy?: number;\n    top_k: number;\n    auto: boolean;\n    show_source?: boolean;\n    no_recall_reply_mode?: number;\n    no_recall_reply_customize_prompt?: string;\n    show_source_mode?: number;\n    recall_strategy?: RecallStrategy;\n  };\n}\n\nexport interface SuggestQuestionMessage {\n  id: string;\n  content: string;\n  highlight?: boolean;\n}\nexport interface ExtendOnboardingContent {\n  prologue: string;\n  suggested_questions: SuggestQuestionMessage[];\n  suggested_questions_show_mode: SuggestedQuestionsShowMode;\n}\n\nexport interface BotSuggestionConfig {\n  /** 0 on; 1 custom; 2 off; 3 follow bot (agentflow bot nodes only) */\n  suggest_reply_mode: SuggestReplyMode;\n  customized_suggest_prompt: string;\n}\n\nexport interface FileboxConfig {\n  mode: FileboxInfo['mode'];\n}\n\nexport interface VoicesInfo {\n  defaultUserInputType: DefaultUserInputType | undefined;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { withSlardarIdButton } from '@coze-studio/bot-utils';\nimport { I18n } from '@coze-arch/i18n';\nimport { Toast } from '@coze-arch/bot-semi';\nimport { AgentType } from '@coze-arch/bot-api/developer_api';\n\nimport type { BotMultiAgent, Agent } from '../types/agent';\n\nexport const findFirstAgent = (\n  multiAgent: BotMultiAgent,\n): Agent | undefined => {\n  const startNode = multiAgent.agents.find(\n    agent => agent.agent_type === AgentType.Start_Agent,\n  );\n  if (!startNode) {\n    Toast.error({\n      content: withSlardarIdButton(I18n.t('chatflow_error_miss_start')),\n    });\n    return;\n  }\n  const firstAgentId = multiAgent.edges.find(\n    edge => edge.sourceNodeID === startNode.id,\n  )?.targetNodeID;\n  if (!firstAgentId) {\n    Toast.error({\n      content: withSlardarIdButton(I18n.t('chatflow_error_miss_start_agent')),\n    });\n    return;\n  }\n  return findTargetAgent(multiAgent.agents, firstAgentId);\n};\n\nexport const findTargetAgent = (agents: Agent[], agentId?: string) => {\n  if (!agentId) {\n    return;\n  }\n  return agents.find(item => item.id === agentId);\n};\n\n/** Find an agent whose intent next_agent_id the current agent id. */\nexport const findAgentByNextIntentID = (\n  agents: Agent[],\n  nextAgentID?: string,\n) => {\n  if (!nextAgentID) {\n    return;\n  }\n  return agents.find(item =>\n    (item.intents || []).some(intent => intent.next_agent_id === nextAgentID),\n  );\n};\n\nexport const findTargetAgentIndex = (agents: Agent[], agentId?: string) => {\n  if (!agentId) {\n    return -1;\n  }\n  return agents.findIndex(item => item.id === agentId);\n};\n\n/**\n * The node id pointed to by the start node\n */\nexport const findFirstAgentId = ({\n  agents,\n}: Pick<BotMultiAgent, 'agents'>): string | undefined => {\n  const startNode = agents.find(\n    agent => agent.agent_type === AgentType.Start_Agent,\n  );\n  return startNode?.intents?.at(0)?.next_agent_id;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { omit } from 'lodash-es';\nimport type { PluginApi } from '@coze-arch/bot-api/playground_api';\n\nimport { type EnabledPluginApi } from '../types/skill';\n\n// Filter debug_example fields to avoid exceeding model resolution length\nexport const getPluginApisFilterExample = (\n  pluginApis: PluginApi[],\n): EnabledPluginApi[] => pluginApis.map(item => omit(item, 'debug_example'));\n\nexport const getSinglePluginApiFilterExample = (\n  tool: PluginApi,\n): EnabledPluginApi => omit(tool, 'debug_example');\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type create } from 'zustand';\n\nexport interface SetterAction<T> {\n  /**\n   * incremental update\n   *\n   * @example\n   * // store.x: { a: 1, b: 2 }\n   * setX({a: 2});\n   * // store.x: { a: 2, b: 2 }\n   */\n  (state: Partial<T>): void;\n  /**\n   * full update\n   *\n   * @example\n   * // store.x: { a: 1, b: 2 }\n   * setX({a: 2}, { replace: true });\n   * // store.x: { a: 2 }\n   */\n  (state: T, config: { replace: true }): void;\n}\n\nexport function setterActionFactory<T>(\n  set: Parameters<Parameters<typeof create<T, []>>[0]>[0],\n): SetterAction<T> {\n  return (state: Partial<T>, config?: { replace: true }) => {\n    if (config?.replace) {\n      set(state);\n    } else {\n      set(prevState => ({ ...prevState, ...state }));\n    }\n  };\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCollaborationStore } from '../store/collaboration';\n\nexport function createStorage<T extends object>(\n  s: Storage,\n  target: T,\n  prefix = 'common_storage',\n) {\n  return new Proxy(target, {\n    set: (_, prop: string, value) => {\n      if (typeof value === 'string') {\n        s.setItem(`${prefix}.${prop}`, value);\n        return true;\n      }\n      return false;\n    },\n    get: (_, prop: string) => s.getItem(`${prefix}.${prop}`) ?? undefined,\n    deleteProperty: (_, prop): boolean => {\n      if (typeof prop === 'string') {\n        s.removeItem(`${prefix}.${prop}`);\n      }\n      return true;\n    },\n  });\n}\nexport const storageLocal = createStorage<Record<string, string | undefined>>(\n  localStorage,\n  {},\n);\n\n// NOTICE: Custom logic: baseVersion to get from bot_detail_store\nexport const storage = new Proxy(storageLocal, {\n  get: (target, prop: string, receiver) => {\n    if (prop === 'baseVersion') {\n      return useCollaborationStore.getState().getBaseVersion();\n    }\n    return Reflect.get(target, prop, receiver);\n  },\n  set(target, prop, ...rest) {\n    if (prop === 'baseVersion') {\n      console.error(\n        'you should use botDetailStore instead of storage to keep base_commit_version',\n      );\n      return false;\n    }\n    return Reflect.set(target, prop, ...rest);\n  },\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type VariableItem, VariableKeyErrType } from '../types/skill';\n\nexport function uniqMemoryList(\n  list: VariableItem[],\n  sysVariables: VariableItem[] = [],\n) {\n  return list.map(i => {\n    const res = { ...i };\n    if (\n      list.filter(j => j.key === i.key).length === 1 &&\n      sysVariables.filter(v => v.key === i.key)?.length === 0\n    ) {\n      res.errType = VariableKeyErrType.KEY_CHECK_PASS;\n    } else {\n      res.errType = VariableKeyErrType.KEY_NAME_USED;\n    }\n    if (!i.key) {\n      res.errType = VariableKeyErrType.KEY_IS_NULL;\n    }\n    return res;\n  });\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type UserAuthInfo,\n  type UserLabel,\n} from '@coze-arch/idl/developer_api';\nimport {\n  getIsSettled,\n  getIsLogined,\n  getUserInfo,\n  getUserAuthInfos,\n  useIsSettled,\n  useIsLogined,\n  useUserInfo,\n  useUserAuthInfo,\n  useUserLabel,\n  subscribeUserAuthInfos,\n  type UserInfo,\n} from '@coze-arch/foundation-sdk';\n\nexport { type UserAuthInfo, type UserLabel, type UserInfo };\n\nexport const userStoreService = {\n  getIsSettled,\n  getIsLogined,\n  getUserInfo,\n  getUserAuthInfos,\n  useIsSettled,\n  useIsLogined,\n  useUserInfo,\n  useUserAuthInfo,\n  useUserLabel,\n  subscribeUserAuthInfos,\n} as const;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ProjectFormValues } from '../components/project-form';\n\nexport const commonProjectFormValid = (\n  values: Pick<ProjectFormValues, 'name'>,\n) => Boolean(values.name?.trim());\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState } from 'react';\n\nexport const useFormSubmitState = <T>({\n  initialValues,\n  getIsFormValid,\n}: {\n  initialValues?: T;\n  getIsFormValid: (values: T) => boolean;\n}) => {\n  const [isFormValid, setFormValid] = useState(\n    initialValues ? getIsFormValid(initialValues) : true,\n  );\n  const [isUploading, setUploading] = useState(false);\n\n  const checkFormValid = (values: T) => {\n    setFormValid(getIsFormValid(values));\n  };\n\n  const onValuesChange = (values: T) => {\n    checkFormValid(values);\n  };\n  const onBeforeUpload = () => {\n    setUploading(true);\n  };\n\n  const onAfterUpload = () => {\n    setUploading(false);\n  };\n\n  return {\n    isSubmitDisabled: !isFormValid || isUploading,\n    checkFormValid,\n    bizCallback: {\n      onValuesChange,\n      onBeforeUpload,\n      onAfterUpload,\n    },\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useRef, useState } from 'react';\n\nimport { useRequest } from 'ahooks';\nimport {\n  appendCopySuffix,\n  ProjectTemplateCopyModal,\n  type ProjectTemplateCopyValue,\n} from '@coze-studio/components';\nimport { ProductEntityType } from '@coze-arch/idl/product_api';\nimport { I18n } from '@coze-arch/i18n';\nimport {\n  EVENT_NAMES,\n  type ParamsTypeDefine,\n  sendTeaEvent,\n} from '@coze-arch/bot-tea';\nimport { type ProductInfo } from '@coze-arch/bot-api/product_api';\nimport { ProductApi } from '@coze-arch/bot-api';\nimport { botInputLengthService } from '@coze-agent-ide/bot-input-length-limit';\nimport { type FormApi } from '@coze-arch/coze-design';\n\nimport { commonProjectFormValid } from '../utils/common-project-form-valid';\nimport { useFormSubmitState } from './use-project-form-submit-state';\n\nexport type ProjectTemplateCopySuccessCallback = (param: {\n  originProductId: string;\n  newEntityId: string;\n  toSpaceId: string;\n}) => void;\n\nexport type BeforeProjectTemplateCopyCallback = (params: {\n  toSpaceId: string;\n}) => void;\n\nexport const useProjectTemplateCopyModal = (props: {\n  onBefore?: BeforeProjectTemplateCopyCallback;\n  onError?: () => void;\n  onSuccess?: ProjectTemplateCopySuccessCallback;\n  /** Event tracking parameters - current page/source */\n  source: NonNullable<\n    ParamsTypeDefine[EVENT_NAMES.template_action_front]['source']\n  >;\n}) => {\n  const [isSelectSpace, setSelectSpace] = useState(false);\n  const [visible, setVisible] = useState(false);\n  const [initValues, setInitValues] = useState<ProjectTemplateCopyValue>();\n  const [sourceProduct, setSourceProduct] = useState<ProductInfo>();\n  const formApi = useRef<FormApi<ProjectTemplateCopyValue>>();\n  const {\n    bizCallback: { onValuesChange },\n    isSubmitDisabled,\n    checkFormValid,\n  } = useFormSubmitState<ProjectTemplateCopyValue>({\n    getIsFormValid: values =>\n      commonProjectFormValid(values) && Boolean(values.spaceId),\n  });\n\n  const onModalClose = () => {\n    setVisible(false);\n    setInitValues(undefined);\n    formApi.current = undefined;\n    setSelectSpace(false);\n  };\n\n  const { run, loading } = useRequest(\n    async (copyRequestParam: ProjectTemplateCopyValue) => {\n      const { productId, spaceId, name } = copyRequestParam;\n      return ProductApi.PublicDuplicateProduct({\n        product_id: productId,\n        space_id: spaceId,\n        name,\n        entity_type: ProductEntityType.ProjectTemplate,\n      });\n    },\n    {\n      manual: true,\n      onBefore: ([inputParam]) => {\n        props.onBefore?.({ toSpaceId: inputParam.spaceId ?? '' });\n      },\n      onError: props.onError,\n      onSuccess: (data, [inputParam]) => {\n        onModalClose();\n        sendTeaEvent(EVENT_NAMES.template_action_front, {\n          template_id: sourceProduct?.meta_info.id || '',\n          template_name: sourceProduct?.meta_info?.name || '',\n          template_type: 'project',\n          entity_id: sourceProduct?.meta_info.entity_id || '',\n          entity_copy_id:\n            sourceProduct?.project_extra?.template_project_id || '',\n          template_tag_professional: sourceProduct?.meta_info.is_professional\n            ? 'professional'\n            : 'basic',\n          action: 'duplicate',\n          after_id: data.data?.new_entity_id,\n          source: props.source,\n          ...(sourceProduct?.meta_info?.is_free\n            ? ({\n                template_tag_prize: 'free',\n              } as const)\n            : ({\n                template_tag_prize: 'paid',\n                template_prize_detail:\n                  Number(sourceProduct?.meta_info?.price?.amount) || 0,\n              } as const)),\n        });\n        props?.onSuccess?.({\n          originProductId: inputParam?.productId ?? '',\n          newEntityId: data.data?.new_entity_id ?? '',\n          toSpaceId: inputParam?.spaceId ?? '',\n        });\n      },\n    },\n  );\n\n  return {\n    modalContextHolder: (\n      <ProjectTemplateCopyModal\n        title={I18n.t('creat_project_use_template')}\n        isSelectSpace={isSelectSpace}\n        visible={visible}\n        okButtonProps={{\n          disabled: isSubmitDisabled,\n          loading,\n        }}\n        maskClosable={false}\n        onOk={() => {\n          const requestValues = formApi.current?.getValues();\n          if (!requestValues) {\n            throw new Error('duplicate project template values not provided');\n          }\n          run(requestValues);\n        }}\n        onCancel={onModalClose}\n        formProps={{\n          initValues,\n          onValueChange: onValuesChange,\n          getFormApi: api => {\n            formApi.current = api;\n          },\n        }}\n      />\n    ),\n    copyProject: ({\n      isSelectSpace: inputIsSelectSpace,\n      sourceProduct: inputSourceProduct,\n      ...rest\n    }: ProjectTemplateCopyValue & {\n      isSelectSpace: boolean;\n      /** Used to extract event tracking parameters */\n      sourceProduct: ProductInfo;\n    }) => {\n      setSelectSpace(inputIsSelectSpace);\n      const fixedInitValues = {\n        ...rest,\n        name: botInputLengthService.sliceStringByMaxLength({\n          value: appendCopySuffix(rest.name),\n          field: 'projectName',\n        }),\n      };\n      setInitValues(fixedInitValues);\n      checkFormValid(fixedInitValues);\n      setSourceProduct(inputSourceProduct);\n      setVisible(true);\n    },\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ReactNode, type PropsWithChildren } from 'react';\n\nimport classNames from 'classnames';\n\nimport styles from './card.module.less';\n\nexport interface ProjectTemplateGroupProps {\n  title: ReactNode | undefined;\n  groupChildrenClassName?: string;\n}\n\nexport const ProjectTemplateGroup: React.FC<\n  PropsWithChildren<ProjectTemplateGroupProps>\n> = ({ title, groupChildrenClassName, children }) => (\n  <div>\n    <div className=\"mb-8px coz-fg-plus text-[16px] font-medium leading-[22px]\">\n      {title}\n    </div>\n    <div\n      className={classNames(\n        'grid',\n        styles['template-group'],\n        groupChildrenClassName,\n      )}\n    >\n      {children}\n    </div>\n  </div>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Skeleton } from '@coze-arch/coze-design';\n\nimport { ProjectTemplateGroup } from './project-template-group';\n\nexport const CardSkeleton: React.FC = () => (\n  <Skeleton.Image className=\"rounded-xl\" />\n);\n\nexport const TemplateGroupSkeleton: React.FC = () => (\n  <ProjectTemplateGroup\n    title={<Skeleton.Title className=\"w-120px\" />}\n    groupChildrenClassName=\"h-[200px]\"\n  >\n    <CardSkeleton />\n    <CardSkeleton />\n    <CardSkeleton />\n  </ProjectTemplateGroup>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  forwardRef,\n  type MouseEventHandler,\n  type PropsWithChildren,\n  useRef,\n} from 'react';\n\nimport classNames from 'classnames';\nimport { useHover } from 'ahooks';\nimport { TeaExposure } from '@coze-studio/components';\nimport { type ProductInfo } from '@coze-arch/idl/product_api';\nimport { I18n } from '@coze-arch/i18n';\nimport { openNewWindow } from '@coze-arch/bot-utils';\nimport { extractTemplateActionCommonParams } from '@coze-arch/bot-tea/utils';\nimport {\n  EVENT_NAMES,\n  type ParamsTypeDefine,\n  sendTeaEvent,\n} from '@coze-arch/bot-tea';\nimport { Button, Image } from '@coze-arch/coze-design';\n\nimport styles from './card.module.less';\n\nexport interface ProjectTemplateCardContentProps {\n  /** Event tracking parameters, page source */\n  viewSource: ParamsTypeDefine[EVENT_NAMES.template_action_front]['source'];\n  product: ProductInfo;\n  onCopyTemplate?: (param: { name: string; id: string }) => void;\n  className?: string;\n  onClick?: () => void;\n}\n\nexport const openTemplatePreview = (templateId: string) => {\n  const url = new URL(\n    `/template/project/${templateId}`,\n    window.location.origin,\n  );\n  openNewWindow(() => url.toString());\n};\n\nconst ActionButton: React.FC<ProjectTemplateCardContentProps> = ({\n  viewSource,\n  product,\n  className,\n  onCopyTemplate,\n}) => {\n  const onPreview: MouseEventHandler<HTMLButtonElement> = e => {\n    e.stopPropagation();\n    sendTeaEvent(EVENT_NAMES.template_action_front, {\n      action: 'click',\n      source: viewSource,\n      ...extractTemplateActionCommonParams(product),\n    });\n    openTemplatePreview(product.meta_info.id ?? '');\n  };\n  const onCopy: MouseEventHandler<HTMLButtonElement> = e => {\n    e.stopPropagation();\n    onCopyTemplate?.({\n      name: product.meta_info.name ?? '',\n      id: product.meta_info.id ?? '',\n    });\n  };\n\n  const isShowCopyActionButton = !product.meta_info.is_professional;\n\n  return (\n    <div className={classNames('w-full px-12px', className)}>\n      <div\n        className={classNames('w-full h-24px', styles['template-card-mask'])}\n      />\n      <div className=\"w-full flex justify-between pt-8px coz-bg-max gap-x-8px\">\n        <Button color=\"highlight\" className=\"flex-[1]\" onClick={onPreview}>\n          {I18n.t('creat_project_use_template_preview')}\n        </Button>\n        {isShowCopyActionButton ? (\n          <Button color=\"hgltplus\" className=\"flex-[1]\" onClick={onCopy}>\n            {I18n.t('creat_project_use_template_use')}\n          </Button>\n        ) : null}\n      </div>\n    </div>\n  );\n};\n\nexport const ProjectTemplateCardUI = forwardRef<\n  HTMLDivElement,\n  PropsWithChildren<{ className?: string; onClick?: () => void }>\n>(({ className, children, onClick }, ref) => (\n  <div\n    ref={ref}\n    onClick={onClick}\n    className={classNames(\n      'cursor-pointer p-12px coz-bg-max coz-stroke-primary border-solid border-[1px] hover:coz-shadow-default rounded-[16px]',\n      className,\n    )}\n  >\n    {children}\n  </div>\n));\n\nexport const ProjectTemplateCard: React.FC<ProjectTemplateCardContentProps> = ({\n  viewSource,\n  product,\n  onCopyTemplate,\n  className,\n  onClick,\n}) => {\n  const divRef = useRef<HTMLDivElement>(null);\n  const isHover = useHover(divRef);\n  return (\n    <ProjectTemplateCardUI\n      ref={divRef}\n      className={classNames('relative', className)}\n      onClick={() => {\n        sendTeaEvent(EVENT_NAMES.template_action_front, {\n          action: 'click',\n          source: viewSource,\n          ...extractTemplateActionCommonParams(product),\n        });\n        onClick?.();\n      }}\n    >\n      <TeaExposure\n        once\n        teaEvent={{\n          name: EVENT_NAMES.template_action_front,\n          params: {\n            ...extractTemplateActionCommonParams(product),\n            action: 'card_view',\n            source: viewSource,\n          },\n        }}\n      >\n        <div className=\"px-4px mb-8px overflow-hidden text-ellipsis coz-fg-primary text-[14px] font-medium leading-[20px]\">\n          {product.meta_info.name}\n        </div>\n        <Image\n          preview={false}\n          src={product.meta_info.covers?.at(0)?.url}\n          className=\"rounded-[16px] block w-full\"\n          imgCls=\"object-cover object-center w-full\"\n          height={148}\n        />\n        <ActionButton\n          viewSource={viewSource}\n          product={product}\n          onCopyTemplate={onCopyTemplate}\n          className={classNames(\n            'absolute left-0 bottom-[8px]',\n            !isHover && 'hidden',\n          )}\n        />\n      </TeaExposure>\n    </ProjectTemplateCardUI>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { I18n } from '@coze-arch/i18n';\nimport { IconCozPlusFill } from '@coze-arch/coze-design/icons';\n\nimport { ProjectTemplateCardUI } from './project-template-card';\n\nexport const CreateEmptyProjectUI: React.FC<{\n  onClick: (() => void) | undefined;\n}> = ({ onClick }) => (\n  <ProjectTemplateCardUI\n    onClick={onClick}\n    className=\"h-200px flex items-center justify-center flex-col coz-fg-primary\"\n  >\n    <IconCozPlusFill />\n    <div className=\"py-6px px-8px text-[14px] leading-[20px] font-medium\">\n      {I18n.t('creat_project_creat_new_project')}\n    </div>\n  </ProjectTemplateCardUI>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { groupBy, xorBy } from 'lodash-es';\nimport { useRequest } from 'ahooks';\nimport {\n  ProductEntityType,\n  ProductListSource,\n  SortType,\n  type ProductInfo,\n} from '@coze-arch/idl/product_api';\nimport { I18n } from '@coze-arch/i18n';\nimport { ProductApi } from '@coze-arch/bot-api';\nimport {\n  IllustrationFailure,\n  IllustrationFailureDark,\n} from '@douyinfe/semi-illustrations';\nimport { IconCozRefresh } from '@coze-arch/coze-design/icons';\nimport { Button, Empty, Modal, type ModalProps } from '@coze-arch/coze-design';\n\nimport {\n  type BeforeProjectTemplateCopyCallback,\n  type ProjectTemplateCopySuccessCallback,\n  useProjectTemplateCopyModal,\n} from '../../hooks/use-project-template-copy-modal';\nimport {\n  CardSkeleton,\n  TemplateGroupSkeleton,\n} from './template-components/skeleton';\nimport { ProjectTemplateGroup } from './template-components/project-template-group';\nimport {\n  openTemplatePreview,\n  ProjectTemplateCard,\n} from './template-components/project-template-card';\nimport { CreateEmptyProjectUI } from './template-components/create-empty-project-ui';\n\nimport styles from './index.module.less';\n\nconst MAX_PAGE_SIZE = 50;\n\nexport interface ProjectTemplateBaseProps {\n  spaceId?: string;\n  isSelectSpaceOnCopy: boolean;\n  onBeforeCopy: BeforeProjectTemplateCopyCallback | undefined;\n  onCopyError: (() => void) | undefined;\n  onCopyOk: ProjectTemplateCopySuccessCallback | undefined;\n  onCreateProject?: () => void;\n}\n\n/**\n * Templates that require special handling and are placed in the \"Basic\" category\n * There is no \"foundation\" category in the business itself, but in this scenario created by replication, pm wants to provide users with some representative templates with basic functions\n * And so this special treatment template came into being.\n *\n * When iterating, it is necessary to ensure that these templates are recommended in order to reuse PublicGetProductList this interface\n */\nconst BASE_TEMPLATE_ID_LIST = ['7439261984903938074'];\n\nconst ProjectTemplateContent: React.FC<ProjectTemplateBaseProps> = ({\n  spaceId,\n  isSelectSpaceOnCopy,\n  onCopyOk,\n  onCreateProject,\n  onBeforeCopy,\n  onCopyError,\n}) => {\n  const {\n    data: categories,\n    error: categoriesError,\n    loading: isCategoryLoading,\n    refresh: refreshCategoryRequest,\n  } = useRequest(async () => {\n    const response = await ProductApi.PublicGetProductCategoryList({\n      entity_type: ProductEntityType.TemplateCommon,\n    });\n    return response.data?.categories;\n  });\n\n  const {\n    data: products,\n    error: productsError,\n    loading: isProductLoading,\n    refresh: refreshProductRequest,\n  } = useRequest(async () => {\n    const response = await ProductApi.PublicGetProductList({\n      entity_type: ProductEntityType.ProjectTemplate,\n      page_num: 1,\n      page_size: MAX_PAGE_SIZE,\n      sort_type: SortType.Heat,\n      source: ProductListSource.Recommend,\n      is_free: true,\n    });\n    return response.data?.products;\n  });\n\n  const { copyProject, modalContextHolder } = useProjectTemplateCopyModal({\n    onSuccess: onCopyOk,\n    source: spaceId ? 'space' : 'navi',\n    onBefore: onBeforeCopy,\n    onError: onCopyError,\n  });\n  const refreshRequest = () => {\n    refreshCategoryRequest();\n    refreshProductRequest();\n  };\n  const isRequestLoading = isCategoryLoading || isProductLoading;\n  const isRequestError = Boolean(categoriesError || productsError);\n\n  if (!categories || !products) {\n    return (\n      <>\n        {modalContextHolder}\n        <div className=\"px-24px flex flex-col gap-y-[20px]\">\n          <ProjectTemplateGroup title=\"\">\n            <CreateEmptyProjectUI onClick={onCreateProject} />\n            {isRequestLoading ? (\n              <>\n                <CardSkeleton />\n                <CardSkeleton />\n              </>\n            ) : null}\n          </ProjectTemplateGroup>\n          {isRequestLoading ? (\n            <>\n              <TemplateGroupSkeleton />\n              <TemplateGroupSkeleton />\n            </>\n          ) : null}\n          {!isRequestLoading && isRequestError ? (\n            <Empty\n              className={styles['error-empty']}\n              image={<IllustrationFailure className=\"h-160px w-160px\" />}\n              darkModeImage={\n                <IllustrationFailureDark className=\"h-160px w-160px\" />\n              }\n              title={\n                <span className=\"coz-fg-primary text-[14px] font-medium leading-20px\">\n                  {I18n.t('creat_project_templates_load_failed')}\n                </span>\n              }\n            >\n              <Button onClick={refreshRequest} icon={<IconCozRefresh />}>\n                {I18n.t('Retry')}\n              </Button>\n            </Empty>\n          ) : null}\n        </div>\n      </>\n    );\n  }\n\n  const baseTemplateList = products.filter(p =>\n    BASE_TEMPLATE_ID_LIST.some(id => id === p.meta_info.id),\n  );\n  const recommendTemplateList = xorBy(\n    products,\n    baseTemplateList,\n    p => p.meta_info.id,\n  );\n  const productGroupList = groupBy(\n    recommendTemplateList,\n    p => p.meta_info.category?.id,\n  );\n\n  const renderTemplateList = (productList: ProductInfo[]) =>\n    productList.map(product => (\n      <ProjectTemplateCard\n        viewSource={spaceId ? 'space' : 'navi'}\n        onClick={() => {\n          openTemplatePreview(product.meta_info.id ?? '');\n        }}\n        onCopyTemplate={param => {\n          copyProject({\n            spaceId,\n            isSelectSpace: isSelectSpaceOnCopy,\n            productId: param.id,\n            name: param.name,\n            sourceProduct: product,\n          });\n        }}\n        key={product.meta_info.id}\n        product={product}\n      />\n    ));\n  return (\n    <>\n      {modalContextHolder}\n      <div className=\"px-24px flex flex-col gap-y-[20px]\">\n        <ProjectTemplateGroup title=\"\">\n          <CreateEmptyProjectUI onClick={onCreateProject} />\n          {renderTemplateList(baseTemplateList)}\n        </ProjectTemplateGroup>\n        {categories.map(category => {\n          const productList = productGroupList[category.id ?? ''];\n          if (!productList?.length) {\n            return null;\n          }\n          return (\n            <ProjectTemplateGroup key={category.id} title={category.name}>\n              {renderTemplateList(productGroupList[category.id ?? ''] ?? [])}\n            </ProjectTemplateGroup>\n          );\n        })}\n      </div>\n    </>\n  );\n};\n\nexport const ProjectTemplateModal: React.FC<\n  Omit<ModalProps, 'size' | 'title' | 'className' | 'footer'> &\n    ProjectTemplateBaseProps\n> = ({\n  spaceId,\n  isSelectSpaceOnCopy,\n  onCopyOk,\n  onCreateProject,\n  onBeforeCopy,\n  onCopyError,\n  ...props\n}) => (\n  <Modal\n    size=\"xxl\"\n    title={I18n.t('creat_project_templates')}\n    className={styles['project-template-modal']}\n    footer={null}\n    {...props}\n  >\n    <ProjectTemplateContent\n      spaceId={spaceId}\n      isSelectSpaceOnCopy={isSelectSpaceOnCopy}\n      onCopyOk={onCopyOk}\n      onCreateProject={onCreateProject}\n      onBeforeCopy={onBeforeCopy}\n      onCopyError={onCopyError}\n    />\n  </Modal>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type PropsWithChildren } from 'react';\n\nimport {\n  PictureUpload,\n  type RenderAutoGenerateParams,\n} from '@coze-common/biz-components/picture-upload';\nimport {\n  type DraftProjectCopyRequest,\n  type DraftProjectUpdateRequest,\n  type DraftProjectCreateRequest,\n} from '@coze-arch/idl/intelligence_api';\nimport { I18n } from '@coze-arch/i18n';\nimport { IconCozUpload } from '@coze-arch/coze-design/icons';\nimport {\n  type BaseFormProps,\n  Form,\n  FormInput,\n  FormTextArea,\n  useFormApi,\n  withField,\n} from '@coze-arch/coze-design';\nimport { FileBizType, IconType } from '@coze-arch/bot-api/developer_api';\nimport { botInputLengthService } from '@coze-agent-ide/bot-input-length-limit';\n\nimport { SwitchWithDesc } from '../switch-with-desc';\nimport { type ModifyUploadValueType } from '../../type';\n\nexport type ProjectFormValues = ModifyUploadValueType<\n  Omit<DraftProjectCreateRequest, 'monetization_conf' | 'create_from'> &\n    DraftProjectCopyRequest &\n    DraftProjectUpdateRequest & {\n      enableMonetize?: boolean;\n    }\n>;\n\nexport type ProjectFormSubmitValues = DraftProjectCreateRequest;\n\nexport type ProjectFormProps = BaseFormProps<ProjectFormValues>;\n\nexport interface ProjectInfoFieldProps {\n  /** @default false */\n  showMonetizeConfig?: boolean;\n  onBeforeUpload?: () => void;\n  onAfterUpload?: () => void;\n  renderAutoGenerate?: (params: RenderAutoGenerateParams) => React.ReactNode;\n}\n\nexport const ProjectForm: React.FC<PropsWithChildren<ProjectFormProps>> = ({\n  children,\n  ...formProps\n}) => <Form<ProjectFormValues> {...formProps}>{children}</Form>;\n\n// @ts-expect-error fix me late\nexport const filedKeyMap: Record<\n  keyof ProjectFormValues,\n  keyof ProjectFormValues\n> = {\n  name: 'name',\n  enableMonetize: 'enableMonetize',\n  description: 'description',\n  icon_uri: 'icon_uri',\n  space_id: 'space_id',\n  project_id: 'project_id',\n  to_space_id: 'to_space_id',\n} as const;\n\nexport const ProjectInfoFieldFragment: React.FC<ProjectInfoFieldProps> = ({\n  showMonetizeConfig,\n  onAfterUpload,\n  onBeforeUpload,\n  renderAutoGenerate,\n}) => {\n  const formApi = useFormApi<ProjectFormValues>();\n  return (\n    <>\n      <FormInput\n        label={I18n.t('creat_project_project_name')}\n        rules={[{ required: true }]}\n        field={filedKeyMap.name}\n        maxLength={botInputLengthService.getInputLengthLimit('projectName')}\n        getValueLength={botInputLengthService.getValueLength}\n        noErrorMessage\n      />\n      {showMonetizeConfig ? (\n        <FormSwitch\n          field={filedKeyMap.enableMonetize}\n          label={I18n.t('monetization')}\n          desc={I18n.t('monetization_des')}\n          initValue={true}\n          rules={[{ required: true }]}\n        />\n      ) : null}\n      <FormTextArea\n        label={I18n.t('creat_project_project_describe')}\n        field={filedKeyMap.description}\n        maxCount={botInputLengthService.getInputLengthLimit(\n          'projectDescription',\n        )}\n        maxLength={botInputLengthService.getInputLengthLimit(\n          'projectDescription',\n        )}\n        getValueLength={botInputLengthService.getValueLength}\n      />\n      <PictureUpload\n        accept=\".jpeg,.jpg,.png,.gif\"\n        label={I18n.t('bot_edit_profile_pircture')}\n        field={filedKeyMap.icon_uri}\n        rules={[{ required: true }]}\n        fileBizType={FileBizType.BIZ_BOT_ICON}\n        iconType={IconType.Bot}\n        maskIcon={<IconCozUpload />}\n        withAutoGenerate\n        renderAutoGenerate={renderAutoGenerate}\n        generateInfo={() => {\n          const values = formApi.getValues();\n          return {\n            name: values?.name,\n            desc: values?.description,\n          };\n        }}\n        beforeUploadCustom={onBeforeUpload}\n        afterUploadCustom={onAfterUpload}\n      />\n    </>\n  );\n};\n\nconst FormSwitch = withField(SwitchWithDesc);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport cls from 'classnames';\nimport { Switch, type SwitchProps } from '@coze-arch/coze-design';\n\nexport function SwitchWithDesc({\n  value,\n  onChange,\n  className,\n  desc,\n  descClassName,\n  switchClassName,\n  ...rest\n}: Omit<SwitchProps, 'checked'> & {\n  value?: boolean;\n  desc: string;\n  descClassName?: string;\n  switchClassName?: string;\n}) {\n  return (\n    <div className={cls('flex items-center justify-between', className)}>\n      <span className={cls('coz-fg-primary', descClassName)}>{desc}</span>\n      <Switch\n        size=\"small\"\n        {...rest}\n        checked={value}\n        onChange={onChange}\n        className={cls('shrink-0', switchClassName)}\n      />\n    </div>\n  );\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useRef, useState, Suspense, lazy } from 'react';\n\nimport { SpaceFormSelect } from '@coze-studio/components';\nimport { type AuditData } from '@coze-arch/idl/intelligence_api';\nimport { I18n } from '@coze-arch/i18n';\nimport { type RenderAutoGenerateParams } from '@coze-common/biz-components/picture-upload';\nimport { type FormApi, Modal, type ModalProps } from '@coze-arch/coze-design';\n\nimport {\n  filedKeyMap,\n  ProjectForm,\n  type ProjectFormProps,\n  type ProjectFormValues,\n  ProjectInfoFieldFragment,\n} from '../project-form';\nimport { useFormSubmitState } from '../../hooks/use-project-form-submit-state';\n\nconst LazyReactMarkdown = lazy(() => import('react-markdown'));\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst ReactMarkdown = (props: any) => (\n  <Suspense fallback={null}>\n    <LazyReactMarkdown {...props} />\n  </Suspense>\n);\ninterface ProjectFormModalProps\n  extends Omit<\n    ModalProps,\n    'size' | 'okText' | 'cancelText' | 'okButtonProps' | 'onOk'\n  > {\n  /** @default false */\n  showMonetizeConfig?: boolean;\n  selectSpace?: boolean;\n  formProps?: Omit<ProjectFormProps, 'getFormApi' | 'onValueChange'>;\n  request: (param: ProjectFormValues) => Promise<AuditData>;\n  isFormValid: (values: ProjectFormValues) => boolean;\n}\n\nexport type BizProjectFormModalProps = ProjectFormModalProps & {\n  renderAutoGenerate?: (params: RenderAutoGenerateParams) => React.ReactNode;\n};\n\nexport const ProjectFormModal: React.FC<BizProjectFormModalProps> = ({\n  selectSpace,\n  formProps = {},\n  isFormValid,\n  request,\n  showMonetizeConfig,\n  renderAutoGenerate,\n  ...restModalProps\n}) => {\n  const [loading, setLoading] = useState(false);\n  const [auditResult, setAuditResult] = useState<AuditData>({\n    check_not_pass: false,\n  });\n  const {\n    bizCallback: { onAfterUpload, onBeforeUpload, onValuesChange },\n    isSubmitDisabled,\n  } = useFormSubmitState<ProjectFormValues>({\n    initialValues: formProps.initValues,\n    getIsFormValid: isFormValid,\n  });\n  const formApi = useRef<FormApi<ProjectFormValues>>();\n\n  const onFormSubmit: ModalProps['onOk'] = async () => {\n    if (!formApi.current) {\n      return;\n    }\n    try {\n      setLoading(true);\n      const auditData = await request(formApi.current.getValues());\n      setAuditResult(auditData);\n\n      // Do not close the pop-up window without passing the verification\n      if (auditData.check_not_pass) {\n        return;\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Modal\n      size=\"default\"\n      okText={I18n.t('Confirm')}\n      cancelText={I18n.t('Cancel')}\n      okButtonProps={{\n        disabled: isSubmitDisabled,\n        loading,\n      }}\n      onOk={onFormSubmit}\n      {...restModalProps}\n    >\n      <ProjectForm\n        {...formProps}\n        getFormApi={api => {\n          formApi.current = api;\n        }}\n        onValueChange={onValuesChange}\n      >\n        {selectSpace ? <SpaceFormSelect field={filedKeyMap.space_id} /> : null}\n        <ProjectInfoFieldFragment\n          showMonetizeConfig={showMonetizeConfig}\n          onBeforeUpload={onBeforeUpload}\n          onAfterUpload={onAfterUpload}\n          renderAutoGenerate={renderAutoGenerate}\n        />\n      </ProjectForm>\n      {auditResult.check_not_pass ? (\n        <div className=\"coz-fg-hglt-red mt-[-8px]\">\n          <ReactMarkdown skipHtml={true} linkTarget=\"_blank\">\n            {/* Note that using | | msg undefined or empty string goes to the bottom */}\n            {auditResult.check_not_pass_msg || I18n.t('publish_audit_pop7')}\n          </ReactMarkdown>\n        </div>\n      ) : null}\n    </Modal>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState } from 'react';\n\nimport { localStorageService } from '@coze-foundation/local-storage';\n\nconst SESSION_HIDDEN_KEY = 'coze-project-entity-hidden-key';\n\nexport const useHiddenSession = (key: string) => {\n  const [isSessionHidden, setIsSessionHidden] = useState(isKeyExist(key));\n  return {\n    isSessionHidden,\n    hideSession: () => {\n      if (isKeyExist(key)) {\n        return;\n      }\n      const oldValue = localStorageService.getValue(SESSION_HIDDEN_KEY) || '';\n      localStorageService.setValue(\n        SESSION_HIDDEN_KEY,\n        oldValue ? `${oldValue},${key}` : key,\n      );\n      setIsSessionHidden(true);\n    },\n  };\n};\n\nconst isKeyExist = (key: string) => {\n  const oldValue = localStorageService.getValue(SESSION_HIDDEN_KEY);\n  return oldValue?.includes(key);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ReactNode } from 'react';\n\nimport classNames from 'classnames';\nimport { I18n } from '@coze-arch/i18n';\nimport { IconCozCross } from '@coze-arch/coze-design/icons';\nimport {\n  Badge,\n  Button,\n  Avatar,\n  Modal,\n  type ModalProps,\n} from '@coze-arch/coze-design';\n\nimport { useHiddenSession } from '../../hooks/use-hidden-session';\nimport ProjectImg from '../../assets/project-img.png';\nimport ProjectImgOversea from '../../assets/project-img-oversea.png';\nimport AgentImg from '../../assets/agent-img.png';\nimport AgentImgOversea from '../../assets/agent-img-oversea.png';\n\nimport styles from './index.module.less';\n\nexport type CreateType = 'project' | 'agent';\n\nexport interface GuideModalProps\n  extends Omit<ModalProps, 'size' | 'footer' | 'header' | 'onCancel'> {\n  onCancel: () => void;\n  onChange: (type: CreateType) => void;\n  extraButtonConfigs?: GuideButtonProps[];\n}\n\ninterface GuideButtonProps {\n  onClick: () => void;\n  assetSrc: string;\n  title: ReactNode;\n  description: ReactNode;\n  tip?: ReactNode;\n}\n\nexport const GuideButton: React.FC<GuideButtonProps> = ({\n  onClick,\n  assetSrc,\n  title,\n  description,\n  tip,\n}) => {\n  const { isSessionHidden, hideSession } = useHiddenSession(\n    tip ? 'guideTip' : '',\n  );\n  const showTip = !isSessionHidden && Boolean(tip);\n\n  return (\n    <div\n      onClick={onClick}\n      className={classNames(\n        'relative cursor-pointer p-8px pb-16px hover:coz-shadow-default coz-bg-max coz-stroke-primary border-[1px] border-solid rounded-[12px] flex flex-col items-center',\n        styles['guide-button-hover'],\n      )}\n    >\n      <Avatar\n        src={assetSrc}\n        className={classNames(\n          'w-[314px] h-[240px] rounded-[8px] coz-bg-secondary',\n          styles['guide-img-bg'],\n          styles['guide-button'],\n          {\n            '!mb-[-28px]': showTip,\n          },\n        )}\n        imgCls=\"w-full h-full\"\n        bottomSlot={{\n          render: () =>\n            showTip ? (\n              <div className=\"z-10 px-2 coz-fg-hglt text-[12px] font-medium w-full flex justify-center items-center h-[28px] rounded-[4px] rounded-t-none bg-[#DEDBFF]\">\n                <div className=\"mx-auto\">{tip}</div>\n                <IconCozCross\n                  className=\"w-[12px] h-[12px]\"\n                  onClick={e => {\n                    e.stopPropagation();\n                    hideSession();\n                  }}\n                />\n              </div>\n            ) : null,\n          text: tip,\n          textColor: '',\n          bgColor: '#DEDBFF',\n          className: '',\n        }}\n      />\n      <div className=\"mb-[4px] mt-[20px] coz-fg-plus text-[20px] font-medium leading-[28px]\">\n        {title}\n      </div>\n      <div\n        className={classNames(\n          'mb-[8px] coz-fg-secondary text-[14px] font-normal leading-[20px] opacity-100',\n          styles['guide-desc-hover'],\n        )}\n      >\n        {description}\n      </div>\n      <div\n        className={classNames(\n          'absolute w-full flex justify-center left-0 bottom-[12px] opacity-0',\n          styles['create-button-hover'],\n        )}\n      >\n        <Button>{I18n.t('create_title')}</Button>\n      </div>\n    </div>\n  );\n};\n\nconst ProjectAsset = IS_OVERSEA ? ProjectImgOversea : ProjectImg;\nconst AgentAsset = IS_OVERSEA ? AgentImgOversea : AgentImg;\n\nexport const GuideModal: React.FC<GuideModalProps> = ({\n  onChange,\n  extraButtonConfigs = [],\n  ...modalProps\n}) => (\n  <Modal\n    // Clear the modal's own margins, propped up by the internal padding, and show the button shadow\n    className={styles['guide-modal']}\n    size=\"xl\"\n    title={I18n.t('create_title')}\n    width={'fit-content'}\n    {...modalProps}\n  >\n    <div className=\"flex justify-between pl-24px pb-24px pr-24px gap-[8px]\">\n      <GuideButton\n        onClick={() => onChange('agent')}\n        assetSrc={AgentAsset}\n        title={I18n.t('creat_project_creat_agent')}\n        description={I18n.t('creat_project_agent_describe')}\n        tip={!IS_OPEN_SOURCE ? I18n.t('agent_creat_tips') : null}\n      />\n      <GuideButton\n        onClick={() => onChange('project')}\n        assetSrc={ProjectAsset}\n        title={\n          <span className=\"flex gap-x-4px items-center\">\n            {I18n.t('creat_project_creat_project')}\n            <Badge count=\"Beta\" type=\"alt\" />\n          </span>\n        }\n        description={\n          IS_OPEN_SOURCE\n            ? I18n.t('creat_project_describe_open')\n            : I18n.t('creat_project_describe')\n        }\n      />\n      {extraButtonConfigs.map(({ onClick, ...config }, index) => (\n        <GuideButton\n          key={index}\n          onClick={() => {\n            modalProps.onCancel();\n            onClick();\n          }}\n          {...config}\n        />\n      ))}\n    </div>\n  </Modal>\n);\n\nGuideModal.displayName = 'GuideModal';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState } from 'react';\n\nimport { useRequest } from 'ahooks';\nimport { useCreateAgent } from '@coze-studio/entity-adapter';\nimport { type RenderAutoGenerateParams } from '@coze-common/biz-components/picture-upload';\nimport { type DraftProjectCreateRequest } from '@coze-arch/idl/intelligence_api';\nimport { I18n } from '@coze-arch/i18n';\nimport { intelligenceApi } from '@coze-arch/bot-api';\n\nimport { commonProjectFormValid } from '../utils/common-project-form-valid';\nimport { ProjectTemplateModal } from '../components/project-template-modal';\nimport {\n  type BizProjectFormModalProps,\n  ProjectFormModal,\n} from '../components/project-form-modal';\nimport { type ProjectFormValues } from '../components/project-form';\nimport {\n  type CreateType,\n  GuideModal,\n  type GuideModalProps,\n} from '../components/guide-modal';\nimport {\n  type BeforeProjectTemplateCopyCallback,\n  type ProjectTemplateCopySuccessCallback,\n} from './use-project-template-copy-modal';\n\ntype CreateBotParam = Parameters<typeof useCreateAgent>[0];\nexport interface CreateProjectSuccessCallbackParam {\n  projectId: string;\n  spaceId: string;\n}\nexport interface CreateProjectHookProps\n  extends Pick<BizProjectFormModalProps, 'selectSpace'> {\n  onBeforeCreateBot?: CreateBotParam['onBefore'];\n  onCreateBotSuccess?: CreateBotParam['onSuccess'];\n  onCreateBotError?: CreateBotParam['onError'];\n  initialSpaceId?: string;\n  onBeforeCreateProject?: () => void;\n  onCreateProjectError?: () => void;\n  onCreateProjectSuccess?: (param: CreateProjectSuccessCallbackParam) => void;\n  onCopyProjectTemplateSuccess?: ProjectTemplateCopySuccessCallback;\n  onBeforeCopyProjectTemplate?: BeforeProjectTemplateCopyCallback;\n  onProjectTemplateCopyError?: () => void;\n  /**\n   * Navigation bar\n   * Button in the upper right corner of the space workspace\n   * */\n  bizCreateFrom: 'navi' | 'space';\n  renderAutoGenerate?: (params: RenderAutoGenerateParams) => React.ReactNode;\n  extraGuideButtonConfigs?: GuideModalProps['extraButtonConfigs'];\n}\n\n// eslint-disable-next-line @coze-arch/max-line-per-function\nexport const useCreateProjectModalBase = ({\n  selectSpace,\n  onBeforeCreateBot,\n  onCreateBotError,\n  onCreateBotSuccess,\n  initialSpaceId,\n  onCreateProjectSuccess,\n  onCopyProjectTemplateSuccess,\n  onBeforeCreateProject,\n  onCreateProjectError,\n  onBeforeCopyProjectTemplate,\n  onProjectTemplateCopyError,\n  bizCreateFrom,\n  renderAutoGenerate,\n  extraGuideButtonConfigs,\n}: CreateProjectHookProps) => {\n  const [guideModalVisible, setGuideModalVisible] = useState(false);\n  const [projectModalVisible, setProjectModalVisible] = useState(false);\n  const [projectTemplateModalVisible, setProjectTemplateModalVisible] =\n    useState(false);\n  const { modal, startEdit } = useCreateAgent({\n    showSpace: selectSpace,\n    onBefore: onBeforeCreateBot,\n    onError: onCreateBotError,\n    onSuccess: onCreateBotSuccess,\n    spaceId: initialSpaceId,\n    bizCreateFrom,\n  });\n\n  const onGuideChange = (guideType: CreateType) => {\n    setGuideModalVisible(false);\n\n    if (guideType === 'project') {\n      // The overseas version and the open-source version do not support project templates\n      if (IS_OVERSEA || IS_OPEN_SOURCE) {\n        setProjectModalVisible(true);\n        return;\n      }\n      setProjectTemplateModalVisible(true);\n      return;\n    }\n    if (guideType === 'agent') {\n      startEdit();\n      return;\n    }\n  };\n\n  const onCreateEmptyProject = () => {\n    setProjectModalVisible(true);\n    setProjectTemplateModalVisible(false);\n  };\n\n  const onGuideCancel = () => {\n    setGuideModalVisible(false);\n  };\n\n  const projectTemplateCancel = () => {\n    setProjectTemplateModalVisible(false);\n  };\n\n  const onCopyProjectTemplateOk: ProjectTemplateCopySuccessCallback =\n    params => {\n      setProjectTemplateModalVisible(false);\n      onCopyProjectTemplateSuccess?.(params);\n    };\n\n  const onCreateProjectOk = (param: CreateProjectSuccessCallbackParam) => {\n    setProjectModalVisible(false);\n    onCreateProjectSuccess?.(param);\n  };\n\n  const onCreateProjectCancel = () => {\n    setProjectModalVisible(false);\n  };\n\n  const { runAsync: createProjectRequest } = useRequest(\n    async (param: ProjectFormValues) => {\n      const { icon_uri: uriList, enableMonetize, ...restValues } = param;\n      const requestFormValues: DraftProjectCreateRequest = {\n        ...restValues,\n        icon_uri: uriList?.at(0)?.uid,\n        ...(IS_OVERSEA && {\n          monetization_conf: {\n            is_enable: enableMonetize ?? true,\n          },\n        }),\n        create_from: bizCreateFrom,\n      };\n      const response = await intelligenceApi.DraftProjectCreate(\n        requestFormValues,\n      );\n      const { project_id, audit_data } = response.data ?? {};\n      return {\n        ...audit_data,\n        project_id: project_id ?? '',\n      };\n    },\n    {\n      manual: true,\n      onBefore: onBeforeCreateProject,\n      onError: onCreateProjectError,\n      onSuccess: (data, [inputParam]) => {\n        if (data.check_not_pass) {\n          return;\n        }\n        onCreateProjectOk({\n          projectId: data.project_id,\n          spaceId: inputParam.space_id ?? '',\n        });\n      },\n    },\n  );\n\n  return {\n    modalContextHolder: (\n      <>\n        {modal}\n        <ProjectTemplateModal\n          maskClosable={false}\n          onCreateProject={onCreateEmptyProject}\n          onBeforeCopy={onBeforeCopyProjectTemplate}\n          onCopyError={onProjectTemplateCopyError}\n          onCopyOk={onCopyProjectTemplateOk}\n          isSelectSpaceOnCopy={Boolean(selectSpace)}\n          spaceId={initialSpaceId}\n          visible={projectTemplateModalVisible}\n          onCancel={projectTemplateCancel}\n        />\n        {guideModalVisible ? (\n          <GuideModal\n            visible={guideModalVisible}\n            onChange={onGuideChange}\n            onCancel={onGuideCancel}\n            extraButtonConfigs={extraGuideButtonConfigs}\n          />\n        ) : null}\n        {projectModalVisible ? (\n          <ProjectFormModal\n            showMonetizeConfig={IS_OVERSEA}\n            isFormValid={values =>\n              commonProjectFormValid(values) && Boolean(values.space_id)\n            }\n            maskClosable={false}\n            title={I18n.t('creat_project_title')}\n            formProps={{\n              initValues: {\n                space_id: initialSpaceId,\n                project_id: '',\n              },\n            }}\n            request={createProjectRequest}\n            selectSpace={selectSpace}\n            visible={projectModalVisible}\n            onCancel={onCreateProjectCancel}\n            renderAutoGenerate={renderAutoGenerate}\n          />\n        ) : null}\n      </>\n    ),\n    createProject: () => {\n      setGuideModalVisible(true);\n    },\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState } from 'react';\n\nimport { useRequest } from 'ahooks';\nimport { appendCopySuffix } from '@coze-studio/components';\nimport {\n  type IntelligenceBasicInfo,\n  type User,\n} from '@coze-arch/idl/intelligence_api';\nimport { I18n } from '@coze-arch/i18n';\nimport { intelligenceApi } from '@coze-arch/bot-api';\nimport { type RenderAutoGenerateParams } from '@coze-common/biz-components/picture-upload';\nimport { botInputLengthService } from '@coze-agent-ide/bot-input-length-limit';\n\nimport { commonProjectFormValid } from '../utils/common-project-form-valid';\nimport { ProjectFormModal } from '../components/project-form-modal';\nimport { type ProjectFormValues } from '../components/project-form';\n\nexport interface CopyProjectSuccessCallbackParam {\n  basicInfo: IntelligenceBasicInfo;\n  templateId: string;\n  ownerInfo?: User;\n}\n\nexport interface UpdateProjectSuccessCallbackParam {\n  projectId: string;\n  spaceId: string;\n}\n\ntype UseBaseUpdateOrCopyProjectModalProps = {\n  renderAutoGenerate?: (params: RenderAutoGenerateParams) => React.ReactNode;\n} & (\n  | {\n      scene: 'update';\n      onSuccess?: (params: UpdateProjectSuccessCallbackParam) => void;\n    }\n  | {\n      scene: 'copy';\n      onSuccess?: (param: CopyProjectSuccessCallbackParam) => void;\n    }\n);\n\nexport const useBaseUpdateOrCopyProjectModal = ({\n  scene,\n  onSuccess: inputOnSuccess,\n  renderAutoGenerate,\n}: UseBaseUpdateOrCopyProjectModalProps) => {\n  const [projectModalVisible, setProjectModalVisible] = useState(false);\n  const [initialValues, setInitialValues] = useState<ProjectFormValues>();\n\n  const onModalClose = () => {\n    setInitialValues(undefined);\n    setProjectModalVisible(false);\n  };\n\n  const onUpdateOk = (param: UpdateProjectSuccessCallbackParam) => {\n    onModalClose();\n    if (scene !== 'update') {\n      throw new Error('update project error scene');\n    }\n    inputOnSuccess?.(param);\n  };\n\n  const onCopyOK = (param: CopyProjectSuccessCallbackParam) => {\n    onModalClose();\n    if (scene !== 'copy') {\n      throw new Error('copy project error scene');\n    }\n    inputOnSuccess?.(param);\n  };\n\n  const onCancel = () => {\n    onModalClose();\n  };\n\n  const sharedProps = {\n    formProps: {\n      initValues: initialValues,\n    },\n    visible: projectModalVisible,\n    onCancel,\n    maskClosable: false,\n  };\n\n  const { runAsync: updateProjectRequest } = useRequest(\n    async (param: ProjectFormValues) => {\n      const { icon_uri: uriList, description = '', ...restValues } = param;\n      const requestFormValues = {\n        ...restValues,\n        icon_uri: uriList?.at(0)?.uid,\n        description,\n      };\n      const response = await intelligenceApi.DraftProjectUpdate(\n        requestFormValues,\n      );\n      const { audit_data } = response.data ?? {};\n      return {\n        ...audit_data,\n      };\n    },\n    {\n      manual: true,\n      onSuccess: (data, [inputParam]) => {\n        if (data.check_not_pass) {\n          return;\n        }\n        onUpdateOk({\n          projectId: inputParam.project_id,\n          spaceId: inputParam.space_id ?? '',\n        });\n      },\n    },\n  );\n\n  const { runAsync: copyProjectRequest } = useRequest(\n    async (param: ProjectFormValues) => {\n      const { icon_uri: uriList, ...restValues } = param;\n      const requestFormValues = {\n        ...restValues,\n        icon_uri: uriList?.at(0)?.uid,\n      };\n      const response = await intelligenceApi.DraftProjectCopy(\n        requestFormValues,\n      );\n      const { audit_data, basic_info, user_info } = response.data ?? {};\n      return {\n        ...audit_data,\n        basic_info,\n        user_info,\n      };\n    },\n    {\n      manual: true,\n      onSuccess: (data, [inputParam]) => {\n        if (!data.basic_info) {\n          return;\n        }\n        if (data.check_not_pass) {\n          return;\n        }\n        onCopyOK({\n          templateId: inputParam.project_id,\n          basicInfo: data.basic_info,\n          ownerInfo: data.user_info,\n        });\n      },\n    },\n  );\n\n  const getModalTitle = () => {\n    if (scene === 'copy') {\n      return I18n.t('project_ide_create_duplicate');\n    }\n    if (scene === 'update') {\n      return I18n.t('project_ide_edit_project');\n    }\n  };\n\n  return {\n    modalContextHolder: projectModalVisible ? (\n      <ProjectFormModal\n        {...sharedProps}\n        isFormValid={commonProjectFormValid}\n        title={getModalTitle()}\n        request={scene === 'update' ? updateProjectRequest : copyProjectRequest}\n        renderAutoGenerate={renderAutoGenerate}\n      />\n    ) : null,\n    openModal: ({ initialValue }: { initialValue: ProjectFormValues }) => {\n      setProjectModalVisible(true);\n      if (scene === 'update') {\n        setInitialValues(initialValue);\n        return;\n      }\n      if (scene === 'copy') {\n        setInitialValues({\n          ...initialValue,\n          name: botInputLengthService.sliceStringByMaxLength({\n            value: appendCopySuffix(initialValue.name ?? ''),\n            field: 'projectName',\n          }),\n        });\n      }\n    },\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ReactNode } from 'react';\n\nimport { type DraftProjectUpdateRequest } from '@coze-arch/idl/intelligence_api';\nimport { type RenderAutoGenerateParams } from '@coze-common/biz-components/picture-upload';\n\nimport { type ModifyUploadValueType } from '../type';\nimport {\n  type UpdateProjectSuccessCallbackParam,\n  useBaseUpdateOrCopyProjectModal,\n} from './use-base-update-or-copy-project-modal';\n\nexport const useUpdateProjectModalBase = ({\n  onSuccess,\n  renderAutoGenerate,\n}: {\n  onSuccess?: (param: UpdateProjectSuccessCallbackParam) => void;\n  renderAutoGenerate?: (params: RenderAutoGenerateParams) => React.ReactNode;\n}): {\n  modalContextHolder: ReactNode;\n  openModal: (param: {\n    initialValue: ModifyUploadValueType<DraftProjectUpdateRequest>;\n  }) => void;\n} =>\n  useBaseUpdateOrCopyProjectModal({\n    scene: 'update',\n    onSuccess,\n    renderAutoGenerate,\n  });\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { I18n } from '@coze-arch/i18n';\nimport { Modal, Form, Input, type ModalProps } from '@coze-arch/coze-design';\n\nexport interface DeleteProjectBaseProps {\n  value?: string;\n  onChange?: (value: string) => void;\n  placeholder?: string;\n}\n\nexport interface DeleteProjectModalProps\n  extends Omit<\n      ModalProps,\n      'size' | 'footer' | 'header' | 'okButtonColor' | 'okText' | 'cancelText'\n    >,\n    DeleteProjectBaseProps {}\n\nconst DeleteProjectContent: React.FC<DeleteProjectBaseProps> = ({\n  value,\n  onChange,\n  placeholder,\n}) => (\n  <>\n    <div className=\"coz-fg-secondary leading-20px text-[14px] font-normal mb-16px\">\n      {I18n.t('project_ide_delete_confirm_describe')}\n    </div>\n    <Form.Label required>{I18n.t('project_ide_project_name')}</Form.Label>\n    <Input value={value} onChange={onChange} placeholder={placeholder} />\n  </>\n);\n\nexport const DeleteProjectModal: React.FC<DeleteProjectModalProps> = ({\n  value,\n  onChange,\n  placeholder,\n  ...restModalProps\n}) => (\n  <Modal\n    size=\"default\"\n    header={I18n.t('project_ide_delete_confirm')}\n    okButtonColor=\"red\"\n    okText={I18n.t('project_ide_delete')}\n    cancelText={I18n.t('Cancel')}\n    {...restModalProps}\n  >\n    <DeleteProjectContent\n      value={value}\n      onChange={onChange}\n      placeholder={placeholder}\n    />\n  </Modal>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useRef, useState } from 'react';\n\nimport { isObject } from 'lodash-es';\nimport { useRequest } from 'ahooks';\nimport { DeveloperApi, intelligenceApi } from '@coze-arch/bot-api';\n\nimport { DeleteProjectModal } from '../components/delete-project-modal';\n\ninterface DeleteAgentParam {\n  spaceId: string;\n  agentId: string;\n}\n\ninterface DeleteProjectParam {\n  projectId: string;\n}\n\nconst isAgentParam = (value: unknown): value is DeleteAgentParam =>\n  isObject(value) && 'agentId' in value;\n\nconst isProjectParam = (value: unknown): value is DeleteProjectParam =>\n  isObject(value) && 'projectId' in value;\n\nexport type DeleteIntelligenceParam = (\n  | DeleteAgentParam\n  | DeleteProjectParam\n) & { name: string };\n\nexport const useDeleteIntelligence = (props?: {\n  onDeleteProjectSuccess?: (param: DeleteProjectParam) => void;\n  onDeleteAgentSuccess?: (param: DeleteAgentParam) => void;\n}) => {\n  const [deleteIntelligenceName, setDeleteIntelligenceName] =\n    useState<string>('');\n\n  const deleteParamsRef = useRef<DeleteProjectParam | DeleteAgentParam>();\n\n  const [visible, setVisible] = useState<boolean>(false);\n\n  const [name, setName] = useState<string>();\n\n  const onCloseModal = () => {\n    setVisible(false);\n    setDeleteIntelligenceName('');\n    setName('');\n    deleteParamsRef.current = undefined;\n  };\n\n  const onDeleteCancel = () => {\n    onCloseModal();\n  };\n\n  const { loading, runAsync } = useRequest(\n    async (request: DeleteAgentParam | DeleteProjectParam) => {\n      if (isAgentParam(request)) {\n        const { spaceId, agentId } = request;\n        await DeveloperApi.DeleteDraftBot({\n          space_id: spaceId,\n          bot_id: agentId,\n        });\n        return;\n      }\n\n      if (isProjectParam(request)) {\n        const { projectId } = request;\n        await intelligenceApi.DraftProjectDelete({ project_id: projectId });\n      }\n    },\n    {\n      manual: true,\n      onSuccess: (_m, [p]) => {\n        onCloseModal();\n        if (isAgentParam(p)) {\n          props?.onDeleteAgentSuccess?.(p);\n          return;\n        }\n        if (isProjectParam(p)) {\n          props?.onDeleteProjectSuccess?.(p);\n          return;\n        }\n      },\n    },\n  );\n\n  const onDelete = () => {\n    if (!deleteParamsRef.current) {\n      return;\n    }\n    return runAsync(deleteParamsRef.current);\n  };\n\n  return {\n    modalContextHolder: (\n      <DeleteProjectModal\n        maskClosable={false}\n        value={name}\n        onChange={setName}\n        placeholder={deleteIntelligenceName}\n        visible={visible}\n        onCancel={onDeleteCancel}\n        onOk={onDelete}\n        okButtonProps={{\n          disabled: deleteIntelligenceName !== name,\n          loading,\n        }}\n      />\n    ),\n    deleteIntelligence: ({\n      name: deleteName,\n      ...restParam\n    }: DeleteIntelligenceParam) => {\n      setVisible(true);\n      setDeleteIntelligenceName(deleteName);\n      deleteParamsRef.current = restParam;\n    },\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ReactNode } from 'react';\n\nimport { type DraftProjectCopyRequest } from '@coze-arch/idl/intelligence_api';\nimport { type RenderAutoGenerateParams } from '@coze-common/biz-components/picture-upload';\n\nimport {\n  type ModifyUploadValueType,\n  type RequireCopyProjectRequest,\n} from '../type';\nimport {\n  type CopyProjectSuccessCallbackParam,\n  useBaseUpdateOrCopyProjectModal,\n} from './use-base-update-or-copy-project-modal';\n\nexport const useCopyProjectModalBase = ({\n  onSuccess,\n  renderAutoGenerate,\n}: {\n  onSuccess?: (param: CopyProjectSuccessCallbackParam) => void;\n  renderAutoGenerate?: (params: RenderAutoGenerateParams) => React.ReactNode;\n}): {\n  modalContextHolder: ReactNode;\n  openModal: (param: {\n    initialValue: ModifyUploadValueType<\n      RequireCopyProjectRequest<DraftProjectCopyRequest>\n    >;\n  }) => void;\n} =>\n  useBaseUpdateOrCopyProjectModal({\n    scene: 'copy',\n    onSuccess,\n    renderAutoGenerate,\n  });\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport {\n  useDeleteIntelligence,\n  type ProjectFormValues,\n  type UpdateProjectSuccessCallbackParam,\n  type CreateProjectHookProps,\n  type CopyProjectSuccessCallbackParam,\n  type ModifyUploadValueType,\n  type RequireCopyProjectRequest,\n  type DeleteIntelligenceParam,\n} from '@coze-studio/project-entity-base';\nimport { type ReactNode } from 'react';\n\nimport { type DraftProjectCopyRequest } from '@coze-arch/idl/intelligence_api';\nimport {\n  useCreateProjectModalBase,\n  useUpdateProjectModalBase,\n  useCopyProjectModalBase,\n  type ProjectFormValues,\n  type UpdateProjectSuccessCallbackParam,\n  type CreateProjectHookProps,\n  type CopyProjectSuccessCallbackParam,\n  type ModifyUploadValueType,\n  type RequireCopyProjectRequest,\n} from '@coze-studio/project-entity-base';\n\nexport const useCreateProjectModal = (\n  params: CreateProjectHookProps,\n): {\n  modalContextHolder: ReactNode;\n  createProject: () => void;\n} => useCreateProjectModalBase(params);\n\nexport const useUpdateProjectModal = (params: {\n  onSuccess?: (param: UpdateProjectSuccessCallbackParam) => void;\n}): {\n  modalContextHolder: ReactNode;\n  openModal: (params: { initialValue: ProjectFormValues }) => void;\n} => useUpdateProjectModalBase(params);\n\nexport const useCopyProjectModal = (params: {\n  onSuccess?: (param: CopyProjectSuccessCallbackParam) => void;\n}): {\n  modalContextHolder: ReactNode;\n  openModal: (param: {\n    initialValue: ModifyUploadValueType<\n      RequireCopyProjectRequest<DraftProjectCopyRequest>\n    >;\n  }) => void;\n} => useCopyProjectModalBase(params);\n","\n      import API from \"!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./global.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./global.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./responsive.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./responsive.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./parameters.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./parameters.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.modules.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.modules.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./load-retry.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./load-retry.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./uikit.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./uikit.less\";\n       export default content && content.locals ? content.locals : undefined;\n"],"names":["options","undefined","ToNewestTip","messageWidth","usePreference","showBackground","useShowBackGround","loadEagerly","useLoadMoreClient","useMessageIndexStore","useChatAreaStoreSet","nextHasMore","scrollViewFarFromBottom","useShallow","state","FullWidthAligner","styles","ToNewestTipUI","classNames","getThinkingPlaceholderTheme","bizTheme","WaitGenerating","layout","theme","configs","useChatAreaContext","useWaitingStore","useSenderInfoStore","useMessagesStore","senderInfo","botId","Object","waiting","_state_responding","functionCallLength","llmLength","_state_messageGroupList_at","memberSet","showSenderInfo","selectable","UIKitMessageBox","ThinkingPlaceholder","Wrapper","children","className","getContentConfigs","ContentBoxType","I18n","CARD_BUILDER_ENV_STR","FileStatus","MAX_UPLOAD_PROGRESS","UPLOAD_FILE_TIMEOUT","FILE_EXCEEDS_LIMIT_I18N_KEY","getFileSizeReachLimitI18n","limitText","MESSAGE_LIST_SIZE","MARK_MESSAGE_READ_DEBOUNCE_INTERVAL","MARK_MESSAGE_READ_DEBOUNCE_MAX_WAIT","LOAD_SILENTLY_MAX_NEW_ADDED_COUNT","LOAD_MORE_CALL_GET_HISTORY_LIST_TIME_WINDOW","LOAD_MORE_CALL_GET_HISTORY_LIST_LIMIT","LOAD_MORE_CALL_GET_HISTORY_LIST_EXCEED_RATE_DELAY","CURSOR_TO_LOAD_LATEST_MESSAGE","LOAD_EAGERLY_LOAD_MESSAGE_COUNT","MIN_MESSAGE_INDEX_DIFF_TO_ABORT_CURRENT","SERVER_MESSAGE_REPLY_ID_PLACEHOLDER_VALUES","SCROLL_VIEW_BOTTOM_DISTANCE_TO_SHOW_NEWEST_TIP","LOAD_NEXT_ANCHOR_ADDITIONAL_MOVE_DISTANCE","LOAD_NEXT_LOCK_DELAY","AfterInitServiceContext","createContext","AfterInitServiceProvider","useAfterInitService","key","service","services","useContext","Error","useMarkReadService","ChatActionLockContext","useChatActionLockService","lockService","safeAsyncThrow","fallbackChatActionLockService","NullableChatAreaContext","IgnoreMessageType","allIgnorableMessageTypes","ChatAreaCustomComponentContext","ChatAreaCustomComponentProvider","ChatInputLayoutContext","ChatInputLayoutProvider","props","ChatInputPropsContext","useChatInputProps","ChatInputPropsProvider","getDefaultCopywriting","CopywritingContext","CopywritingProvider","rest","merge","useCopywriting","DragUploadTargetContext","useDragUploadContext","DragUploadContextProvider","LoadMoreContext","LoadMoreProvider","loadMoreClient","client","fallbackLoadMoreClient","MessageBoxContext","Promise","useMessageBoxContext","_useContext","message","messageUniqKey","meta","getIsGroupChatActive","sending","groupId","isFormalWaiting","WaitingPhase","isSending","MessageBoxProvider","useMessageMetaStore","isGroupChatActive","isEqual","PreferenceContext","getDefaultProviderPassThroughPreference","SuggestedQuestionsShowMode","getDefaultPreference","Layout","ProviderPassThroughContext","useProviderPassThoughContext","PreferenceProvider","value","preferencesValues","omitBy","isUndefined","ScrollViewContext","ScrollViewProvider","ScrollViewSizeContext","useScrollViewSize","StoreSetContext","UploadControllerContext","useUploadController","getLoadRequest","reporter","getChatCore","ignoreMessageConfigList","lifeCycleService","request","getLoadRequestRaw","limiter","RateLimit","count","cursor","loadDirection","chatCore","ctx","modifyCtx","data","fixedMessageLitData","fixHistoryMessageList","ReportEventNames","e","getReportError","useUpdateLoadEnvContent","useGlobalInitStore","useEffect","invoke","fn","ListenMessageLengthChange","Set","useListenMessagesLengthChangeLayoutEffect","fnsRef","useRef","askTrigger","useImperativeLayoutEffect","listener","useMemo","dispose","chatAreaContext","storeSetContext","isValidContext","useChatAreaCustomComponent","_context_componentTypes","useChatCore","useGetScrollView","getScrollView","useInitStatus","chatAreaStoreSetContext","useMethodCommonDeps","context","chatActionLockService","storeSet","computedStyleToNumber","stringifyStyle","parseFloat","useComputeScrollViewSize","scrollViewWrapper","isOnboardingCentered","enableImageAutoSize","sizeTarget","scrollViewSize","useSize","computedStyle","getComputedStyle","useDeleteFile","useBatchFileUploadStore","cancelUploadById","fileId","immerDeleteFileDataById","useDragUpload","closeDelay","isDragOver","setIsDragOver","useState","uploadFile","useCreateFileAndUpload","ref","fileLimit","enableMultimodalUpload","enableDragUpload","validateFileList","useValidateFileList","timer","clearTimer","clearTimeout","target","localLog","onDragEnter","checkHasFileOnDrag","onDragOver","onDragLeave","setTimeout","onDragDrop","verifiedFileList","fileList","getFileListByDrag","file","nanoid","usePasteUpload","enablePasteUpload","getFileListByPaste","useUpload","createControllerAndUpload","userInfo","immerUpdateFileDataById","_e","id","event","uploadResult","_uploadResult_ImageWidth","_uploadResult_ImageHeight","uri","FileType","upload","immerCreateFileData","useRetryUpload","hasExceedSizeFile","isFileSizeNotExceed","hasEmptyFile","isNotEmptyFile","Toast","MAX_FILE_MBYTE","filteredFileList","isFileCountExceedsLimit","getPureAnswerMessagesByGroup","messages","messageGroupList","targetGroup","g","findMessageById","msg","getIsPureAnswerMessage","getLastPureAnswerMessage","useIsGroupAnswerFinish","Boolean","functionCallMessages","isAnswerFinishVerboseMessage","useIsGroupFakeInterruptAnswer","isFakeInterruptVerboseMessage","useClearContext","eventCallback","useSectionIdStore","useSuggestionsStore","useSelectionStore","setLatestSectionId","addMessages","stopResponding","useStopResponding","clearSuggestions","latestOnboardingId","_state_onboardingIdList","requireScrollIntoView","dom","document","getNewConversationDomId","taskIdRef","clearMessageContextParams","newClearMessageContextParams","processedClearMessageContextParams","res","new_section_id","new_section_message_list","fixMessageStruct","ContentType","taskId","useClearHistory","getClearHistoryImplement","deps","clearMessage","unselectAll","getUnselectAllImplement","getStopRespondingImplement","fileManager","FileManagerEventNames","useDeleteMessageGroup","deleteMessageGroupById","useIsClearMessageHistoryLock","useChatActionStore","useIsRenderAnswerAction","readonly","enableMessageBoxActionBar","MarkReadHelper","getEnvInfo","updateIndex","MarkReadService","getHelper","index","compareInt64","debounce","readIndex","conversationId","currentReadIndex","DeveloperApi","Date","ReportErrorEventNames","usePrepareMarkMessageReadService","useReporter","helperRef","useMarkMessageRead","markReadService","enableMarkRead","reported","getRegenerateMessage","userMessage","clonedMessage","cloneDeep","hasLocalMessageId","isFromHistory","regenerateMessage","sendMessage","deleteMessageByIdList","userMessageId","llmAnswerMessageIdList","functionCallMessageIdList","followUpMessageIdList","checkNoneMessageGroupMemberLeft","toRegenerateMessage","getMessageUniqueKey","useCreateImageMessage","useFileStore","latestSectionId","updateTemporaryFile","clearSending","updateMessage","findMessage","payload","mentionList","unsentMessage","uploader","localMessageId","unsentMessageLocalMessageId","removeFileUploader","addFileUploader","getIsImageMessage","useCreateFileMessage","modifyFileMessagePercentAndStatus","info","useSendFileMessage","createFileMessage","useSendNewMessage","from","useCreateMultimodalMessage","useSendImageMessage","createImageMessage","useSendMultimodalMessage","createMultimodalMessage","result","toastBySendMessageResult","useCreateNormalizedMessage","useSendNormalizedMessage","createNormalizedMessage","useResendMessage","sendTextMessage","useSendTextMessage","sendFileMessage","sendImageMessage","temporaryFile","couldSendMessage","useCouldSendNewMessage","deleteMessageByIdStruct","isFile","local_message_id","useRegenerateMessage","useSendMessageAndAutoUpdate","messageGroup","originRegenerateMessage","useRegenerateMessageByUserMessageId","messageId","builtinASRProcess","_response_data","audioFile","formData","FormData","response","translationText","getIsTextMessage","getIsMultimodalMessage","textItem","item","JSON","revertVoiceMessageConditionally","getAudioProcessStateByLocalId","audioProcessState","removeAudioFileAfterSendMessage","removeAudioFileByLocalId","updateAudioProcessState","buildInProcessSentMessage","_message_content_obj_file_list","_message_content_obj_file_list1","getSendMessageAndAutoUpdateImplement","sendMessageParams","startWaiting","startSending","toSenDMessage","stopRespondingPromise","defaultSendMessageOptions","String","websocketManager","mergedOptions","sendingMessage","_handledMessageAndOptions_message","_handledMessageAndOptions_options","handledMessageAndOptions","proxyFreeze","processedMessage","processedOptions","sentMessage","failMessage","isError","errorData","parseErrorInfoFromErrorMessage","isChatCoreError","isToastErrorMessage","CozeTokenInsufficient","emitAPIErrorEvent","APIErrorEvent","getSendNewMessageImplement","processASRConditionally","getAudioFileByLocalId","addMessage","preReadySendMessage","error","ApiError","customError","getCreateTextMessageImplement","getSendTextMessageImplement","createTextMessage","newMessageInterruptScenario","isSendMessageLock","useIsSendMessageLock","hasFileNotSuccess","baseCouldSendMessage","useMessageWidth","useChatAreaLayout","getIsGlobalActionLockMap","useMessagesOverview","isEmpty","latestSectionHasMessage","useOnboardingCenterOffset","onboardingHeight","minOffset","Math","useSelectOnboarding","getSelectOnboardingImplement","params","_params_onboarding_prologue","setOnboardingSelected","selectedOnboardingId","hasSelectedOnboarding","useUnselectAll","clearSelectedReplyIdList","selectOnboarding","useBackgroundScroll","_styles_scrollmask","hasHeaderNode","maskNode","showGradient","setShowGradient","useBuiltinButtonStatus","isClearContextButtonDisabledFromParams","isMoreButtonDisabledFromParams","isSendingMessage","isSendButtonDisabled","filesLength","hasMessage","useDisplayUserInfo","showUserExtendedInfo","userSenderInfo","getMessageUserInfo","infoWithoutExtend","useEventCallbacks","eventCenter","enableMention","updatePreviewURL","_msg_content_obj_file_list__file_url","_I18n_t","fileIndex","copy","UIToast","EventNames","extra","useUIKitMessageImageAutoSizeConfig","_useScrollViewSize","imageAutoSizeContainerWidth","width","paddingLeft","paddingRight","autoWidth","mdBoxWidth","EXPECT_CONTEXT_WIDTH_MOBILE","EXPECT_CONTEXT_WIDTH_PC","MD_BOX_INNER_PADDING","PluginMode","LifeCycleStage","LifeCycleScope","PluginName","findFileDataIndexById","fileIdList","isImage","UploadPlugin","eventName","callback","_this_uploader","EventEmitter","AbortController","errorEvent","UploadController","userId","onProgress","onComplete","onError","onReady","multiUploadPlugin","UploadControllerProvider","uploadControllerMap","clearAllSideEffect","controller","param","getIsSuggestion","splitMessageAndSuggestions","messageList","idAndSuggestions","clearUserMessageAndContextStrategy","CombineStrategy","strategyList","strategy","DeleteMessageGroupStrategy","action","remove_query_id","SetNewSectionIdStrategy","updateStoreSectionIdStrategy","UpdateStoreSectionIdStrategy","SecurityStrategyContext","_this_strategy","getMessageGroupByUserMessageId","inputReplyId","_this_newSectionIdStruct","statusToForceUpdateFinish","statusToReportError","listenMessageUpdate","_lifeCycleService_app","securityStrategyContext","onMessageSuccess","onReceiveMessage","onMessageError","updateResponding","updateWaiting","clearUnsettledByReplyId","onMessageUpdate","getShouldDropMessage","handleSuggestionMessage","handleNormalMessage","onMessageStatusChange","abort","status","errorInfo","ChatBusinessErrorCode","ctx1","forceUpdateMessageFinishByData","ChatCore","allMessages","replyId","targetMessages","findMessagesByReplyId","updateMessageToFinish","getUpdateMessageToFinish","updateSuggestion","useMessageStore","fixedMessage","fixImageMessage","map","Map","initServiceMap","clearExtendedLifecycleData","biz","recordInitServiceController","initService","retrieveAndClearInitService","useChatInputLayout","createWriteableSectionIdMethods","clear","createAndSendResumeMessage","questionMessage","createWriteableMessageMethods","createSubscribeWaiting","store","usePluginStore","selector","off","createSubscribeSelection","createSubscribeOnboarding","createSubscribeMessageMeta","createSubscribeMessage","createSubscribeGlobalInitState","getOnboardingStoreWriteableMethods","useOnboardingStore","updatePrologue","partialUpdateOnboardingData","getMessagesStoreWriteableMethods","getMessageIndexStoreWriteableMethods","updateIgnoreIndexAndHistoryMessages","getMessagesStoreReadonlyMethods","getMessageGroupById","getMessageIndexRange","getMessageMetaStoreReadonlyMethods","getMetaByMessage","createGetBotInfoStoreReadonlyMethods","getBotInfo","botInfoMap","createGetBatchFileStoreReadonlyMethods","useBatchFileStore","fileDataMap","fileTypeMap","createSectionIdInstantValues","createGetMessagesStoreInstantValues","createGetMessageMetaStoreInstantValues","metaList","createGetGlobalInitStoreInstantValues","initStatus","createMessageMethods","refreshMessageList","createChatAreaPluginContext","getCommonDeps","initPlugins","pluginRegistryList","pluginInstanceList","registerPlugin","console","pluginBizContext","chatAreaPluginContext","pluginInstance","policyExceptionCodeList","getIsPolicyException","isWriteablePlugin","SystemRenderLifeCycleService","proxyFreezeContext","plugin","_plugin_lifeCycleServices_renderLifeCycleService1","_plugin_lifeCycleServices_renderLifeCycleService","newContext","lifeCycleContext","LUCKY_NUMBER","createPluginBenchmark","_reporter_tracer","lifeCycleName","lifeCycleScope","trace","recordLifeCycleStart","recordLifeCycleEnd","recordPluginStart","recordPluginEnd","SystemMessageLifeCycleService","pluginBenchmark","_plugin_lifeCycleServices_messageLifeCycleService1","_plugin_lifeCycleServices_messageLifeCycleService","SystemCommandLifeCycleService","_plugin_lifeCycleServices_commandLifeCycleService1","_plugin_lifeCycleServices_commandLifeCycleService","SystemAppLifeCycleService","stores","_plugin_lifeCycleServices_appLifeCycleService","SystemLifeCycleService","getChatProcessing","getListenProcessChatStateChange","callbacks","unsubscribe","getInsertMessages","onBeforeLoadMoreInsertMessages","toLatest","clearFirst","generateChatCoreBiz","Scene","createPluginStore","mark","create","devtools","set","get","updater","produce","offSubscription","serviceOffSubscriptionList","IS_DEV_MODE","PreInitStoreService","_this_prePositionedStoreSet","prePositionedRest","exhaustiveCheckForRecord","createSuggestionsStore","createWithEqualityFn","suggestion","updateSuggestionMutator","batch","_suggestionBatchMap_replyId","suggestionBatchMap","batchItem","getDefaultState","createSenderInfoStore","subscribeWithSelector","infoList","changedBotInfoMap","newItem","curItem","userInfoMap","senderId","createSelectionStore","replyIdList","_id","subscribeSelectionUpdate","selectableMessageGroupList","selectedMessageGroupList","messageIdList","flatMessageGroupIdList","createSectionIdStore","prevSectionId","createOnboardingStore","prologue","suggestions","name","avatar","content","targetSuggestionItem","remove","list","scanAndMarkShowSuggestions","lastMessageGroup","markGroupShowContextDivider","group","isShow","groupMessages","getMessagesByGroup","getDefaultDistributeMemberSetType","getIsTriggerMessage","getMessageGroupId","makeGroup","sectionId","groupMessageList","reversedGroupIdList","groupMap","produceGroup","group1","scanMessageToMakeGroups","modifiedGroup","defaultMemberSetType","memberSetType","primitiveExhaustiveCheck","i","groupIdList","flatMapByKeyList","reverseMemberSet","scanGroupsToMarkContextDividers","markLatestGroup","latestGroup","_group_memberSet","groups","curGroup","prevGroup","updateLatestMessageGroupContextDivider","latestMessageGroup","filterDeduplicateMessage","all","added","messageIdSet","localMessageIdSet","getUpdateMessage","idOrStruct","newMessage","getIsValidMessage","idx","findMessageIndexById","idx1","findMessageIndexByIdStruct","serializeIdStruct","getDefaultPagination","createMessagesStore","findMessageByIdStruct","addedMessages","deduplicated","idStruct","idList","findMessageGroupById","findMessageGroupByUserMessageId","subscribeSectionIdToUpdateMessageGroup","updateMessageGroupByImmer","subscribeMessageToUpdateMessageGroup","finalMessageGroupList","updateMetaListDivider","getIsVisibleMessageMeta","updateDividerByScanList","inputGetIsVisibleMessageMeta","getIsVisibleMessage","builtinGetIsVisibleMessageMeta","visibleMessageMeta","next","current","mutateUpdateMetaByGroupInfo","groupList","mutateMetaIsLatestGroupAnswer","mutateMetaIsLastAnswerInItsGroup","mutateMetaIsLastAnswerMessage","lastGroup","lastGroupMessageIdList","targetMetas","checkMessageHasUniqId","lastAnswerId","getLastMessageId","it","answerId","functionCallId","scanAndUpdateHideAvatar","scanAndUpdateHideAvatarForOther","scanAndUpdateHideAvatarForDebug","later","earlier","getIsAsyncResultMessage","getIsFunctionCalling","getIsFinishedFunctionCallCached","finishedFunctionCallMessageMap","_finishedFunctionCallMessageMap_get","_finishedFunctionCallMessageMap_get1","message_id","updateFinishFunctionCallMessageMap","functionCallIndex","targetIndex","searchItems","sliceArrayByIndexRange","_item_extra_info","_message_extra_info","isBotState","getBotState","stringifyBotState","safeJSONParse","getInitMetaByMessage","_getVerboseContentObj","getIsCardDisabled","addJumpVerboseInfo","lastJumpVerboseMeta","VerboseMsgType","isSameGroup","isAnswer","addAnswerLocation","answerMessageMeta","lastAnswerMeta","createMessageMetaStore","subscribeMessageToUpdateMeta","_","subscribeSectionIdToUpdateMeta","updateMetaByImmer","createMessageIndexStore","ignoreIndexAndHistoryMessages","newVal","curVal","finalVal","max","hasMore","cursors","farAwayEnough","endIndex","subscribeMessageToUpdateMessageLoadIndex","updateMaxLoadIndexByMessages","createGlobalInitStore","offListen","getFakeChatCore","_get_chatCore","createFileStore","draft","url","createChatActionStore","updateFn","inputActionLock","targetGroupLock","definedActionLock","createBatchFileUploadStore","baseFileData","defaultFileData","immerUpdater","_get_fileDataMap_id","createAudioUIStore","isRecording","isPointerMoveOut","audioLeftTime","recordingInteractionType","getMessageIndexStoreMethods","InitStoreService","createWaitingStore","useAudioUIStore","unsubscribeMessageToUpdateMeta","unsubscribeSectionIdToUpdateMeta","unsubscribeSelectionUpdate","unsubscribeSectionIdToUpdateMessageGroup","unsubscribeMessageStoreToUpdateMessageGroup","unsubscribeMessageStoreToUpdateMessageLoadIndex","_this_storeSet","InitService","loadMoreDispose","loadMoreEnvTools","destroyPlugins","initStoreService","preInitStoreService","_this_context_eventCallback","commonDeps","getAnswerActionLockMap","getGlobalActionLock","updateGlobalActionLockByImmer","updateAnswerActionLockMapByImmer","ChatActionLockService","_this_context_enableChatActionLock","listenProcessChatStateChange","forceDispose","loadMoreEnv","updateCursor","updateHasMore","updateLockAndErrorByImmer","resetCursors","resetHasMore","resetLoadLockAndError","alignMessageIndexes","clearAll","envTools","LoadMoreEnvTools","waitingState","LoadMoreClient","onBefore","onAfter","currentRequestIndex","requestData","setConversationId","setChatCore","setChatCoreOffListen","localeChatCore","lastSectionId","onboardingSuggestions","fixedMessageList","setInitStatus","initSuccess","ableToSkipInit","mitt","_this_lifeCycleService","ableToSkip","destroyFileManager","_this_context_userInfo","uploadPluginName","APP_ID","setUserInfoMap","setBotInfoMap","updateUserInfo","recordBotInfo","botInfo","defaultConfigs","useCreateAndUpdateInitService","spaceId","presetBot","requestToInit","scene","inputReporter","userConfigs","createChatCoreOverrideConfig","enableChatCoreDebug","enableChatActionLock","extendDataLifecycle","enableTwoWayLoad","flagRef","initControllerRef","isFullSite","preInitController","useAutoUpdateUserInfo","ChatAreaProviderNew","forwardRef","_initControllerRef_current_storeSet","isInputReadonly","enableSelectOnboarding","uikitChatInputButtonStatus","onboardingSuggestionsShowMode","stopRespondOverrideWaiting","checkBotIdOrPresetBot","destroyFullSite","init","waitMessagesLengthChangeLayoutEffect","useImperativeHandle","_initControllerRef_current","LocalCacheContext","getReadLocalStoreValue","getWriteLocalStoreValue","ChatAreaProvider","useChatArea","immerUpdateSuggestionById","immerAddSuggestion","immerDeleteSuggestionById","setSuggestionList","getOnboardingContent","useBotInfo","useBotInfoWithSenderId","useChatAreaController","updateReplyIdList","onboardingIdList","builtinClearHistory","clearHistory","selectAll","maxLength","direction","firstOnboardingId","getMessageList","useLatestSectionMessage","latestSectionMessageLength","useGetRegisteredPlugin","usePluginPublicMethods","pluginName","targetPlugin","isReadonlyPlugin","useWriteablePlugin","builtinPluginName","usePluginScopeContext","useReadonlyPlugin","LifeCycleService","WriteableLifeCycleService","WriteableAppLifeCycleService","WriteableMessageLifeCycleService","WriteableCommandLifeCycleService","ChatAreaPlugin","ReadonlyChatAreaPlugin","WriteableChatAreaPlugin","WriteableRenderLifeCycleService","createWriteableLifeCycleServices","generator","bindPluginInstance","createReadonlyLifeCycleServices","appLifeCycleService","messageLifeCycleService","commandLifeCycleService","renderLifeCycleService","createCustomComponents","customComponents","useLatestSectionId","useIsDeleteMessageLock","getIsAnswerActionLockMap","PluginScopeContext","PluginScopeContextProvider","usePluginList","usePluginCustomComponents","componentKey","pluginList","_plugin","_plugin_customComponents","componentConfig","getDefaultAnswerActionLock","globalActionLockUpdateFnMap","timestamp","_$param","globalActionLock","_param_messageUniqKey","globalActionUnLockUpdateFnMap","globalLock","answerActionLockUpdateFnMap","lockMap","answerActionUnLockUpdateFnMap","_lockMap_groupId","_globalActionLock_sendMessageToACK","readEnvValues","actionLockUpdateFn","historyMessageList","markHistoryMessage","_fixedMessage_content_obj_image_list","_fixedMessage_content_obj_image_list1","img","defaultChatMessage","convertedMessage","convertMessageSource","mutateFixMessageReplyId","getIsFileMessage","mutateFixNoticeMessageReplyId","messageSource","mutateFixAsyncResultReplyId","mutateFixTaskTriggerMessageReplyId","isBusinessError","isObject","unknownInfo","code","CODE_JINJA_FORMAT_ERROR","checkIgnoreMessageFuncMap","parsedContent","isKnowledgeRecallVerboseContentDeprecated","isKnowledgeRecallVerboseContent","isLongTermMemoryVerboseContent","isJumpToVerboseContent","isBackwardsVerboseContent","allVerboseTypesMap","isIdentifiedVerboseMessage","isVerboseContent","isVerboseMessage","ignoreConfig","LoadCommand","LoadEffect","LoadAsyncEffect","OnInitialLoadEffect","messageIndexHelper","resolve","InitialLoadLocating","getIsValidMessageIndex","targetMessageBox","nextReadIndex","compute","messageIds","targetDom","OnClearHistoryEffect","LoadSilently","loadLockErrorHelper","insertMessages","loadLock","LoadDirection","LoadPassivelyCommand","LoadEagerly","needScroll","needLoadData","needLoadDataIndeed","_getScrollController","getScrollController","loadRequest","abortInfo","abortLoaded","err","unconditionally","LoadByScrollPrev","prevCursor","prevHasMore","LoadByScrollNext","nextCursor","verifyLoadLockStillValid","scrollController","getOriginScrollInfo","scrollInfo","newScrollInfo","optimizedScrollTop","properScrollTop","core","loadEnv","maxLoadIndex","newEndIsGreater","shouldBeSilent","getIsDiffWithinRange","MessageIndexHelper","refreshIndexByRequest","updateOnlyDefined","hasMoreInfo","cursorInfo","requestMessageIndex","indexes","min","indexInfo","isSmallDiff","_data_read_message_index","_data_hasMore","_data_next_has_more","currentEndIndex","LoadLockErrorHelper","higherPriorityActions","higherAction","now","loadError","errorAction","coveredActions","covered","lock","opt","load","uniquePush","isProcessing","getIsFakeChatCore","clearMessageIndexStore","Deferred","SendMessageService","methods","inputPayload","sendNormalizedMessage","fileDataList","fileData","createNormalizedFilePayload","filteredFileDataList","createNormalizedImagePayload","sendMultimodalMessage","mixList","formatFileDataListToMessagePayload","getIsMessageWithValidIndex","validMessages","withNoIndexed","validIndexes","getMinMax","findRespondRecord","findRespondByIndex","getResponse","messageIdStruct","_get_waiting","reply_id","updateRespondingInImmer","_state_waiting","phase","isAnswerMessageFinish","responding","isAllFinish","isAllFinishVerboseMessage","currentReplyId","record1","handleToolResponseMessage","handleNormalPluginMessage","curIndex","array","center","side","start","end","arr","val","getReceiveMessageBoxTheme","onParseReceiveMessageBoxTheme","isThemeDisabled","isBorderTheme","customParsed","fakeChatCoreMark","Symbol","Proxy","callTip","fileUploaderMap","_fileUploaderMap_localMessageId","removeAllFileUploader","getMessageTimeCost","ext","getMessageUnitsByFunctionCallMessageList","functionCallMessageList","messageUnits","m","role","getRoleByMessage","MessageUnitRole","modifiedMessageUnits","acc","modifyMessageUnitByToolResponseMessage","type","msg_type","findTargetToolUnit","streamUuid","unit","findTargetFunctionCall","handelMatchCallId","_targetToolUnit_time","_getMessageTimeCost","targetToolUnit","Number","isHaveFunctionId","isNormalPlugin","isStreamPluginRunning","isStreamPluginFinish","targetToolUnit1","_targetToolUnit_time1","_getMessageTimeCost1","messageContentObj","getVerboseContentObj","dataObj","tool_output_content","uuid","targetToolUnit2","onboardingId","fileCount","existingFileCount","keyName","prevResult","currentProperty","args","messageIdListArray","keys","messageIdOrList","Array","isMessageGroupEqual","oldGroup","newGroup","isLastMessageGroup","userMessageMeta","isLast","deleteMessageById","expectToDeleteMessageId","functionCallTypes","getIsFunctionCallType","getIsCardMessage","hiddenMessageType","showFunctionCallDetail","messageTestFields","struct","field","getSendMultimodalMessageStrategy","text","hasFile","hasText","source","values","getIsNotificationMessage","_messageList_filter_at","isCardContent","isNotFirstAnswerQuestion","getToastI18nMap","i18nMap","addFileType","fileMessage","_copiedFileMessage_content_obj","_copiedFileMessage_content_obj1","_copiedFileMessage_content_obj2","copiedFileMessage","targetFile","_FILE_TYPE_CONFIG_find_fileType","file_name","file_type","fileType","c","FileTypeEnum","percent","content_obj","newContent","path","WeakMap","safeJSONParseV2","fallback","StopRespondingErrorScene","breakAccurately","_finalAnswer_content","finalAnswer","breakGenerally","clearAllUnsettledUnconditionally","invokeOnAfterStopRespondingCallback","brokenReplyId","onAfterStopRespondingOld","getBreakFlattenMessageGroup","removeAllListeners","instance","signal","onUploaderReady","onUploadError","onGetTokenError","onSuccess","bytedUploader","shouldContinue","getToken","dataAuth","authToken","service_id","upload_host","auth","schema","getUploader","IMAGE_FALLBACK_HOST","BYTE_UPLOADER_REGION","IS_OVERSEA","inform","fileKey","checkShouldContinue","authData","isDirectory","_item_webkitGetAsEntry","_e_dataTransfer","_e_dataTransfer_items","itemList","_e_clipboardData_items","getFileTypConfig","FILE_TYPE_CONFIG","config","extension","DEFAULT_MAX_FILE_SIZE","_meta_width","_meta_height","getCommonFileIcon","SUCCESS_FILE_ICON_MAP","validFinalFileList","finalFileList","finalFile","_finalFile_fileTypeConfig","URL","_finalFile_meta_width","_finalFile_meta_height","_finalFile_meta_width1","_finalFile_meta_height1","isVerboseMessageType","verboseContent","isVerboseContentData","isRequireInfoInterruptMessage","_message_required_action_submit_tool_outputs_tool_calls","_res_dataObj","FinishReasonType","RequestScene","SlardarEvents","ChunkEvent","HttpChunkEvents","SdkEventsEnum","ReportMessageAction","filterEmptyField","obj","pickBy","muteMergeWithArray","mergeWith","objValue","srcValue","isArray","AxiosError","_response_headers","useApiErrorResponseHook","useCsrfRequestHook","_config_method","getDefaultSceneConfig","RequestManager","baseURL","timeout","headers","axios","onCommonBeforeRequest","_this_mergedBaseOptions","hooks","scenes","onBeforeRequest","hook","onSceneBeforeRequest","targetScene","v","_config","onCommonAfterResponse","hooksName","_response","onSceneAfterResponse","reportLog","getSlardarEnv","env","deployVersion","slardarInstance","createMinimalBrowserClient","createSlardarConfig","defaultConfig","CHAT_CORE_VERSION","jsErrorPlugin","customPlugin","LogOptionsHelper","_key","r","mergeLogOption","source1","source2","meta1","rest1","meta2","rest2","defaultReportLogProps","unChangeProps","ReportLog","logger","logType","logLevel","PreSendLocalMessageEventsManager","local_message_status","PreSendLocalMessageEventsEnum","message1","MessageManager","requestManager","ChatCoreError","_$message","_$ext","PreSendLocalMessage","bot_id","preset_bot","content_type","message_status","user","section_id","mention_list","file_upload_result","PreSendLocalMessageFactory","messageEventsManager","pluginUploadManager","uploadPluginConstructorOptions","uploaderPluginInstance","contentObj","contentType","blobUrl","Uri","Url","ImageWidth","ImageHeight","_getFileInfo","commonProps","bot_version","draft_mode","stream","chatHistory","isRegenMessage","extendFiled","conversation_id","StreamBufferHelper","chunk","_previousMessage_reasoning_content","_message_reasoning_content","previousIndex","previousMessage","ChunkProcessor","flow","cloneMessage","replyMessages","replyMessage","verboseContentData","is_finish","logId","enableDebug","RetryCounter","FetchDataHelper","localMessageID","retryCounterConfig","betweenChunkTimeout","totalFetchTimeout","streamParser","parseEvent","terminate","getDataHelperPlaceholder","CustomEventEmitter","getMessageLifecycleCallbackParam","dataClump","replyID","logID","HttpChunk","tokenManager","reportLogWithScope","fetchDataHelper","validChunk","_this_tokenManager","_this_requestManager","_isRePullMessage","fetchUrl","onBeforeSendMessage","onGetMessageStreamParser","channelFetchInfo","fetchStream","localeData","fetchStreamError","localClump","FetchStreamErrorCode","_targetFetchDataHelper_abortSignal","targetFetchDataHelper","rawError","clump","isPresetBotUnique","sth","ReportEventsTracer","traceInfo","chatCoreError","SEND_MESSAGE_TIMEOUT","BETWEEN_CHUNK_TIMEOUT","exposedMessage","uploadMessage","sendMessageOptions","reject","stashedLocalMessage","preSendLocalMessage","sendTimeout","_this_reportEventsTracer","isHandled","receiveMessage","preSendLocalMessageFactory","httpChunk","preSendLocalMessageEventsManager","reportEventsTracer","PluginsService","constructorOptions","exhaustiveCheckSimple","MessageManagerService","contentLength","messageManager","chunkProcessor","HttpChunkService","chatSdkEventEmit","chatSdkEventBus","_this_reportEventsTracer_pullStreamTracer","_this_reportEventsTracer_pullStreamTracer1","ackMessage","pullingStatus","hasOnMessage","stashedAckMessage","CreateMessageService","pluginsService","ChatSDK","unique_key","space_id","apiKeyAuthValue","TokenManager","token","apiKey","_this","tokenRefresher","MILLISECONDS_PER_MINUTE","SECONDS_PER_MINUTE","UIKitEvents","UploadType","useObserveChatContainer","chatContainerRef","resizeObserver","ResizeObserver","UIKitEventContext","UIKitEventProvider","useCreation","useUiKitEventCenter","cnf","UiKitReportEvents","cached","getBarHeights","waveBarNumber","volumeRealNumber","waveBarHeights","_item","getBarHeight3","minHeight","maxHeight","heightSpan","maxNumber","volumeNumber","baseHeight","randomMin","randomMax","getBarBgColor","bgColor","opacity","rColor","gColor","bColor","opacity1","percent1","waveBarNumberMap","AudioWave","size","wrapperClassName","waveClassName","Space","height","AudioRecord","getVolume","setVolumeNumber","animationIdRef","run","flush","useThrottleFn","_getVolume","requestAnimationFrame","cancelAnimationFrame","OnboardingContext","useOnboardingContext","UIKitMessageBoxContext","UIKitMessageBoxProvider","useUiKitMessageBoxContext","safeParseUrl","isHttpLink","link","parsedLink","isCocoLink","CozeLink","_ref","_ref1","style","href","onSendMessage","onLinkClick","onLinkRender","onOpenLink","_type","onLinkElementEnterFromProps","onLinkElementLeaveFromProps","restProps","handleOpenLink","window","parsedUrl","containerRef","eventCallbacks","eventCallbacksFromOnboarding","onLinkElementEnterFromEventCallback","onLinkElementLeaveFromEventCallback","onMdBoxLinkElementEnterFromOnboarding","onMdBoxLinkElementLeaveFromOnboarding","onLinkElementEnter","onLinkElementLeave","omit","cs","extObj","typeSafeJsonParse","reportError","wikiLink","isString","LinkType","getImageDisplayAttribute","contentWidth","imageRatio","displayWidth","displayHeight","isCover","CozeImage","memo","_ref2","showPreview","setShowPreview","src","onImageClick","imageAutoSizeContainerWidthFromProps","enablePreview","imageAutoSizeContainerWidthFromContext","onImageElementEnterFromEventCallback","onImageElementLeaveFromEventCallback","imageAutoSizeContainerWidthFromOnboardingContext","onMdBoxImageElementEnterFromOnboarding","onMdBoxImageElementLeaveFromOnboarding","onImageElementEnter","onImageElementLeave","originImageInfoRef","imageStyles","setImageStyles","loading","setLoading","imageSrc","setImageSrc","DefaultImage","resetImageSize","clearImageErrorTimeout","builtinLoadImage","loadImageSrc","image","Image","ImagePreview","Skeleton","ImageStatus","prevProps","nextProps","CozeImageWithPreview","LazyCozeMdBox","MdBoxLazy","isText","TextContent","_message_broken_pos","mdBoxProps","enableAutoSizeImage","imageOptions","contentRef","isStreaming","Infinity","eventData","SingleImageContentWithAutoSize","typeSafeJsonParseEnhanced","SingleImageContentWithAutoSizeImpl","blobImageMap","isBlob","_content_obj_image_list_at_image_ori_url","_content_obj_image_list_at_image_ori_width","_content_obj_image_list_at_image_ori_height","_blobImageMap_localMessageId","_imageInfo_url","currentImageUrl","imageInfo","setImageInfo","preloadImage","emptyValue","SingleImageContentUI","thumbUrl","originalUrl","onClick","EmptyImage","SingleImageContent","imageUrl","setImageUrl","originUrl","isFunctionCall","SimpleFunctionContent","_copywriting_using","copywriting","IconCozLoading","Typography","PlainTextContent","isContentLoading","getMentionBotContent","_getBotInfo","mentioned","isMultimodalContentListLike","isTextMixItem","isImageModel","isImageMixItem","isFileModel","isFileMixItem","messageBoxInnerVariants","cva","TextItemList","textItemList","renderTextContentAddonTop","typeSafeMessageBoxInnerVariants","getImageBoxGutterAndSpan","length","ImageBox","onImageRender","image_list","Row","image_thumb","Col","makeFakeImageMessage","originMessage","ImageItemList","imageItemList","handleImageClick","_eventData_src","UIKitTooltip","hideToolTip","Tooltip","getFileExtensionAndName","fileName","dotIndex","nameWithoutExtension","convertBytes","bytes","decimals","digit","sizes","fileCardVariants","fileCardNameVariants","CSVSuccess","DOCXSuccess","EXCELSuccess","PDFSuccess","AUDIOSuccess","VIDEOSuccess","ARCHIVESuccess","CODESuccess","TXTSuccess","PPTSuccess","DefaultUnknownSuccess","FAIL_FILE_ICON_MAP","CSVFail","DOCXFail","EXCELFail","PDFFail","AUDIOFail","VIDEOFail","ARCHIVEFail","CODEFail","TXTFail","PPTFail","DefaultUnknownFail","FileCard","attributeKeys","tooltipsCopywriting","onCancel","onCopy","onRetry","statusKey","statusEnum","percentKey","fileIconMap","isCanceled","typeSafeFileCardVariants","typeSafeFileCardNameVariants","buttonsVisible","IconButton","IconCozCross","IconCozRefresh","IconCozCopy","FILE_CARD_WIDTH","FileItemList","fileItemList","fileAttributeKeys","fileCopywriting","handleCancel","handleRetry","handleCopy","MultimodalContent","ImageContentImpl","_content_obj_image_list","ImageContent","ErrorBoundary","defaultImage","FileContent","defaultEnable","MESSAGE_TYPE_VALID_IN_TEXT_LIST","ContentBox","contentConfigs","isCardDisabled","enhancedContentConfigList","isTextEnable","_contentConfigs_ContentBoxType_TEXT","isImageEnable","_contentConfigs_ContentBoxType_IMAGE","isFileEnable","_contentConfigs_ContentBoxType_FILE","isSimpleFunctionEnable","_contentConfigs_ContentBoxType_SIMPLE_FUNCTION","enhancedContentConfig","_contentConfigs_ContentBoxType_FILE1","eventCallbacks1","onCancelUpload","onCopyUpload","onRetryUpload","eventCallbacks2","onImageClick1","UsedSingleImageContent","_contentConfigs_ContentBoxType_SIMPLE_FUNCTION1","copywriting1","_contentConfigs_ContentBoxType_FILE2","copywriting2","fileAttributeKeys1","eventCallbacks3","onCancelUpload1","onCopyUpload1","onRetryUpload1","onImageClick2","UserLabel","userLabel","UserName","userUniqueName","formatMessageBoxContentTime","contentTime","today","dayjs","messageDay","MessageContentTime","useObserveCardContainer","cardContainerRef","onResize","debouncedDisconnect","useDebounceFn","getResizeObserver","onAfterCardRender","renderCardMessageId","UIKitCustomComponentsContext","UIKitCustomComponentsProvider","useUIKitCustomComponent","messageBoxContainerVariants","botNicknameVariants","getMessageBoxInnerVariantsByTheme","FallbackComponent","DefaultAvatarWrap","MessageBoxWrap","nickname","showUserInfo","renderFooter","hoverContent","right","classname","messageBubbleClassname","messageBubbleWrapperClassname","messageBoxWrapperClassname","messageHoverWrapperClassName","messageErrorWrapperClassname","isHoverShowUserInfo","extendedUserInfo","topRightSlot","botAvatar","setBotAvatar","defaultAvatar","MentionOperateTool","AvatarWrap","wrapRef","messageContainerRef","messageFooterRef","isMobileLayout","refreshContainerWidthConditionally","useEventCallback","currentMessageWidth","currentFooterWidth","useUpdateEffect","isHovering","useHover","hoverContentVisible","setHoverContentVisible","useClickAway","classnames","Avatar","typeSafeBotNicknameVariants","MessageBox","getMessageContentTime","getMessageBoxContent","OutlinedIconButton","touchSupported","isTouchEvent","eventType","TouchEvent","getClientPosition","_event_touches__clientX","_event_touches__clientY","useAudioRecordInteraction","events","onStart","onEnd","onMoveEnter","onMoveLeave","shortcutKey","getIsShortcutKeyDisabled","enabled","getActiveZoneTarget","onStartRef","useLatest","onEndRef","onMoveEnterRef","onMoveLeaveRef","isKeydown","isMouseOrTouchDown","isMoveLeave","onKeyUp","onPointerMove","activeZoneElement","clientX","clientY","rect","isOutRect","onClickOrTouchStart","onClickOrTouchEnd","useKeyPress","onWindowBlur","element","findFileTypeConfig","ChatUpload","copywritingConfig","maxFileSize","onUpload","isDisabled","limitFileCount","Upload","_fileConfig_fileTypeConfig","fileSizeReachLimitToast","fileExceedsLimitToast","fileEmptyToast","hasOverflowLimitFileSize","fileConfig","useTextSend","onSubmit","defaultValue","allowEmpty","onBeforeSubmit","inputNativeCallbacks","inputText","setInputText","composingRef","rcTextareaRef","selectionRef","getTextarea","_rcTextareaRef_current","waitAndUpdateSelectPos","updateSelectPos","readStateRef","requireSetMousePosition","_getTextarea","pos","textarea","submit","onKeydownToSubmit","evt","isPressEnterToChangeLine","handleNewLine","cursorPosition","onChange","composing","onKeyDown","tooltipContent","IconCozSendFill","IconCozPlusCircle","IconCozBroom","IconCozChatPlus","ChatInput","visibleCondition","onFocus","onBlur","isReadonly","leftActions","rightActions","addonTop","addonLeft","aboveOutside","buildInButtonConfig","buildInButtonStatus","onClearHistory","onClearContext","onInputClick","hasOtherContentToSend","InputTooltip","onPaste","CustomSendButton","audioRecordEvents","audioRecordState","audioRecordOptions","_className","inputModeProps","isSendButtonVisible","isClearHistoryButtonVisible","isMoreButtonVisible","isClearContextButtonVisible","isClearHistoryButtonDisabled","isMoreButtonDisabled","isClearContextButtonDisabled","tooltip","inputPlaceholder","uploadConfig","bottomTips","sendButtonTooltipContent","clearHistoryButtonTooltipContent","clearContextButtonTooltipContent","moreButtonTooltipContent","audioButtonTooltipContent","keyboardButtonTooltipContent","isMultiLines","setIsMultiLines","breakLength","setBreakLength","isFocus","setIsFocus","mode","setMode","useControllableValue","audioButtonWrapperRef","inputSizeRef","inputWidth","setInputWidth","observer","isInputMode","isAudioMode","setIsComposing","handleSendButtonClick","buttonClass","finalClearHistoryButtonDisable","finalSendButtonDisable","finalMoreButtonDisable","finalClearContextButtonDisable","SendButton","BuiltinSendButton","ClearContextButton","ClearHistoryButton","Textarea","_inputText_trim","getFinalSendButtonVisible","IconCozMicrophone","IconCozKeyboard","Divider","uploadType","MoreButton","suggestionItemVariants","SuggestionItem","onSuggestionClick","color","typeSafeSuggestionItemVariants","NO_MESSAGE_ID_MARK","botInfoNameVariants","BotInfo","typeSafeBotInfoNameVariants","OnBoarding","suggestionList","suggestionListWithString","prologueClassName","suggestionsWrap","suggestionsWithStringWrap","suggestionItemColor","isOnboardingEmpty","CozeImageWithSizeProps","StopRespondButton","Button","IconCozStopCircle","thinkingPlaceholderVariants","getVariantByProps","typeSafeThinkingPlaceholderVariants","MODE_CONFIG","getStandardRatio","computeShowGradient","imgWidth","useGetResponsiveBackgroundInfo","backgroundInfo","targetRef","isMobileMode","mobileBackgroundInfo","pcBackgroundInfo","currentBackgroundInfo","theme_color","cropperSize","Gradient","position","preview","background","getGradient","gradient","canvasData","cropperWidth","cropperImgLeft","cropperImgWidth","WithRuleImgBackground","targetHeight","targetWidth","gradient_position","canvas_position","gradientLeft","gradientRight","cropperImgTop","cropperImgHeight","themeColor","setThemeColor","mediumColor","addAlpha","alpha","regex","alignWidth","innerWrapClassName","show","IconCozLongArrowUp","PERSIST_CACHE_KEY","cachedReadWholeStore","readFromCache","getPlaceholderStruct","fallbackValue","_readStruct_name","readStruct","writeStruct","saveToCache","MESSAGE_BOX_CONTAINER_MARGIN_X_PC","MESSAGE_BOX_CONTAINER_MARGIN_X_MOBILE","audioStaticToastVariants","AudioStaticToast","cvaClassNames","typeSafeAudioStaticToastVariants","effect","effectValue","setEffectValue","paramRef","effectRef","useLayoutEffect","pre","exposedRef","isNumber","str","onParseError","verifyStruct","onVerifyError","assertStruct","resLocal","inputError","reason","covertInputObject","left","nums","num","minRes","bigInt","maxRes","curStr","cur","a","b","range","abs","diff","bigA","sleep","t","timeWindow","limit","onLimitDelay","windowEdge","lasts","last","invokeDelay","isParent","ast","isLink","parseMarkdownHelper","cozeMitt","WorkflowJSONFormatContribution","useEntity","entityRegistry","autoCreate","entityManager","usePlaygroundContainer","EntityManager","entity","refresh","useRefresh","isOversea","imageHost","Uploader","originalAddImageFile","Connection","channel","WebSocketManager","CaseBlock","label","s","TipContent","description","RewriteTips","caseList","labelKey","contentKey","labelContentPairs","RerankTips","secLabelContentPairs","IconFactory","svg","Icon","SvtPlaygroundIcon","SvtPlaygroundIconFill","SvtUserGuideIcon","SvtUserGuideIconFill","SvtDeveloperGuideIcon","SvtDeveloperGuideIconFill","SvtProGuideIcon","SvtProGuideIconFill","SvgLegacyIcon","SvgArenaRankIcon","IconOfficialLabel","SvgOfficialLabel","SvgRankKnowledge","SvgRankCreation","SvgRankMath","SvgRankRole","SvgRankTool","SvgRankChat","SvgRankCode","SvgModelConfig","SvgIconCozShare","SvgArenaModel","SvgBrandRoundIcon","SvgMenuArena","SvgMenuArenaSelected","SvgReplyCnOutlined","SvgThumbupOutlined","SvgThumbdownOutlined","SvgSpaceDownOutlined","SvgArenaDice","SvgArenaBattle","SvgAddDesktopIcon","IconAvatarEditMask","SvgAvatarEditMask","SvgDeleteOutline1","SvgRefreshOutlined1","IconUploadOutlined1","SvgUploadOutlined1","IconImageOverlay","SvgImageOverlay","SvgTextStyle","SvgPin","SvgEffects","IconEditKnowledge","SvgEditKnowledgeIcon","SvgHotIcon","IconEdit","SvgEdit","SvgEditBlue","IconInfoCircle","SvgInfoCircle","SvgInfoOutlined","SvgFlowArrow","IconSend","SvgSend","IconAdd","SvgAdd","SvgAddSubItemsOutlined","SvgAddMoreNew","IconRobot","SvgRobot","IconStyleSet","SvgStyleSet","IconSetting","SvgSetting","SvgDelete","SvgReplace","SvgAuto","IconCopy","SvgCopy","SvgCopySuccess","IconInfo","SvgInfo","IconNo","SvgNo","SvgAddFiled","SvgCamera","IconImageFailOutlined","SvgImageFailOutlined","SvgBotManage","SvgDataSetting","SvgTimeCapsule","SvgPlugin","SvgPlayground","IconPullDown","SvgPullDown","IconNote","SvgNote","SvgMemory","SvgStopOutlined","IconDownArrow","SvgDownArrow","SvgDownArrowBlack","SvgRightArrow","SvgDataSet","IconSearch","SvgSearch","SvgBrowse","SvgUsePlugin","SvgDownArrowStroked","SvgViewList","IconClose","SvgClose","SvgModify","SvgTable","SvgTemplate","IconAlertStroked","SvgAlertStroked","IconAlertFilled","SvgAlertFilled","SvgTickStroked","SvgFile","SvgPinOutlined","SvgTrashCan","SvgBackTop","IconCollectFilled","SvgCollectFilled","IconCollectStroked","SvgCollectStroked","SvgConfig","SvgArrow","SvgCircleClose","IconWorkflowRunning","SvgWorkflowRunning","IconWorkflowRunSuccess","SvgWorkflowRunSuccess","IconWorkflowRunFail","SvgWorkflowRunFail","SvgWorkflowRunResultClose","SvgLinkStroked","SvgBan","SvgEyeClose","SvgSelectorIcon","SvgDiscover","SvgClearStroked","SvgAddedPlugin","SvgMyPlugin","IconMyTools","SvgMyTools","IconTeamTools","SvgTeamTools","SvgTeamAddOutlined","SvgSettingStroked","SvgMoreAdd","IconMore","SvgMore","SvgMoreVertical","IconFilter","SvgFilterIcon","SvgPlaceholderImg","MenuCollapse","SvgBots","SvgBotsSelected","SvgPlugins","IconPluginsSelected","SvgPluginsSelected","SvgWorkflows","IconWorkflowsSelected","SvgWorkflowsSelected","SvgDatasets","SvgDatasetsSelected","SvgTeam","SvgTeamTag","IconTeamDefault","SvgTeamDefault","SvgTeamSelected","SvgExploreBots","SvgExploreBotsSelected","SvgExplorePlugins","SvgExplorePluginsSelected","SvgHome","SvgLongArrowUp","SvgHomeSelected","SvgIconThumbupFilled","SvgIconThumbdownFilled","SvgPerson","SvgPersonSelected","SvgDocuments","SvgDocumentsLanding","SvgBlogs","SvgFeedback","SvgFileLink","SvgTime","IconDeleteOutline","SvgDeleteOutline","SvgDeleteOutline2File","SvgDraftsTag","SvgMoreRound","SvgUploadOutlined","IconEditOutline","SvgEditOutline","IconEditOutlined","SvgEditOutlined","SvgEditOutlined1","IconSearchInput","SvgSearchInput","SvgIconAutoShape","SvgIconMenuSocialMedia","SvgIconMenuSocialMediaYoutube","SvgIconMenuSocialMediaX","SvgIconMenuFeedback","SvgIconMenuDocument","SvgIconMenuCommunity","SvgIconMenuCommunityTelegram","SvgIconMenuCommunityDiscord","IconMenuLogo","SvgIconBotMenuLogo","SvgChatHashtag","SvgIconBotMenuLogoText","SvgIconBotMenuLogoTextCN","SvgIconBotMenuPlus","SvgQueryEmpty","IconCollapse","SvgCollapse","SvgLargeEmptyIcon","SvgEmptyIcon","IconPlayRoundOutlined","SvgPlayOutline","IconCardSearchOutlined","SvgCardSearchOutline","IconGroupCardOutlined","SvgGroupCardOutlined","SvgGroupCardNoBind","SvgHistory","SvgDataSheet","SvgTask","IconPDFFile","SvgPDFFile","IconDocxFile","SvgDocxFile","IconTextFile","SvgTextFile","IconUnitsFile","SvgUnitsFile","IconUpdateOutlined","SvgIconUpdateOutlined","IconUnitsTable","SvgUnitsTable","IconUnknowFile","SvgUnknowFile","IconRefresh","SvgRefresh","SvgDeleteMessage","SvgMoreOperationsMessage","SvgMoreOperationsDeleteMessage","SvgFrownUponMessageSelected","SvgFrownUponMessage","SvgThumbsUpMessageSelected","SvgThumbsUpMessage","IconUpload","SvgUpload","SvgLocalFile","SvgOnlineData","SvgTableApiOutlined","SvgCustomData","SvgSucceed","SvgWarning","SvgStatusInfo","SvgNewConversation","IconBrandCnWhiteRow","SvgBrandCnWhiteRow","SvgBrandEnWhiteRow","IconBrandCnBlackRow","SvgBrandCnBlackRow","IconBrandEnBlackRow","SvgBrandEnBlackRow","SvgBrandCnWhiteColumn","SvgBrandEnWhiteColumn","SvgBrandCnBlackColumn","SvgBrandEnBlackColumn","SvgBotIcon","SvgGoogle","SvgDouyin","SvgDouyinSquare","SvgFullscreen","SvgPlus","SvgMinus","SvgAutoLayout","SvgWithdraw","SvgPolyline","SvgSmoothline","SvgIconArrowRight","SvgIconImportOutlined","SvgIconArrowRightAdjustable","SvgParagraphCopy","SvgWorkflowCardMore","IconError","SvgErrorIcon","SvgModalErrorIcon","IconSuccess","SvgSuccessIcon","SvgCommunityWeixinLoading","SvgCommunityWeixin","SvgCommunityDiscord","SvgIconGoogle16","SvgDropdownTrigger","SvgLogo","SvgLogoWife","SvgAddCircle","SvgSlash","IconListCheck","SvgListCheck","SvgPersonFilled","SvgTeamFilled","IconToastInfo","SvgToastInfo","IconToastSuccess","SvgToastSuccess","IconToastWarning","SvgToastWarning","IconToastError","SvgToastError","SvgMultipleMode","IconSingleMode","SvgSingleMode","SvgBotMultiModelBtn","SvgChatIcon","SvgChatIconDisable","SvgAgentLogo","SvgAgentToolsSkill","SvgAgentWorkflowSkill","SvgAgentKnowledgeSkill","IconBotMultiLeftBtnIcon","SvgBotMultiLeftBtnIcon","IconBotMultiRightBtnIcon","SvgBotMultiRightBtnIcon","SvgBotExit","SvgValcanoColored","SvgBotPublished","SvgNoFilledIcon","SvgNationalEmblem","SvgUploadOutlinedUp","SvgAi","SvgCloseOutlined","SvgDropdownMobile","SvgLearnMoreIcon","SvgMobileCommunity","SvgMobileFeishu","SvgDropdownClose","SvgMobileEmail","SvgIconMobileSound","SvgIconMobileSoundNormal","SvgIconMobileSoundClosed","SvgIconMobileSoundDisable","SVGIconMobileShare","SvgIconMobileSetting","IconMobileCollect","SvgIconMobileCollect","IconMobileCollectFill","SvgIconMobileCollectFill","SvgIconMobileMenu","SvgIconMobileClose","SvgIconMobileMore","SvgDebugTts","SvgMinimizeWindow","SvgBotDatabase","IconWarningInfo","SvgWarningInfoIcon","IconCloseNoCycle","SvgIconCloseNoCycle","SvgWarningStrongInfoIcon","IconWarningSize24","SvgWarningSize24","SvgTextFormat","SvgTextFormatActive","SvgTableFormat","SvgTableFormatActive","SvgDocResegment","SvgKnowledgeSetting","SvgUpdateFrequency","SvgUpdateTableConfig","SvgUploadAPI","IconUploadPDF","SvgUploadPdf","IconUploadCSV","SvgUploadCsv","IconUploadDoc","SvgUploadDoc","IconUploadTxt","SvgUploadTxt","IconUploadTableUrl","SvgUploadTableUrl","IconUploadTextUrl","SvgUploadTextUrl","IconUploadXLS","SvgUploadXLS","IconUploadMD","SvgUploadMD","SvgUploadFileSuccess","SvgUploadFileFail","IconWaringRed","SvgWaringRedIcon","IconSegmentEmpty","SvgSegmentEmptyIcon","SvgUpBoldIcon","SvgDownBoldIcon","SvgUploadCompletedIcon","SvgUnitEditIcon","SvgUpOutlined","SvgChatboxOutlined","SvgGlobalIntentLogo","SvgAddAgentLogo","SvgExitIcon","IconArrowLeft","SvgArrowLeft","IconEditNew","SvgEditNew","SvgNavBarBack","IconCloseKnowledge","SvgCloseKnowledge","SvgCopyOutlined","SvgRefreshOutlined","IconRefreshOutlinedNormalized","SvgRefreshOutlinedNormalized","SvgLogOutIcon","IconSvgFile","SvgFileIcon","IconSvgSheet","SvgSheetIcon","IconSvgUnbound","SvgUnBoundIcon","SvgTabDownOutlined","SvgCancelLinkOutlinedIcon","SvgMemberOutlinedIcon","IconLoading","SvgLoading","SvgTimeOutlinedIcon","SvgCollectionOutlinedIcon","IconViewinchatOutlined","SvgViewinchatOutlined","SvgReportIcon","SvgEffectsFilled","SvgConversionOutlined","SvgPlatformOutlined","SvgHotBot","SvgDrag","SvgEllipsis","SvgLeftArrow","SvgStoreIcon","SvgShareIcon","SvgClear","SvgIconAt","SvgIconAtOutlined","SvgIconCcmNextOutlined","SvgTokenIcon","SvgTokenIconSelected","SvgTasklistOutlined","SvgIDEFilebox","IconCommunityTabOutlined","SvgCommunityTabOutlined","IconDiscussOutlined","SvgDiscussOutlined","IconApiOutlined","SvgApiOutlined","SvgOpenAPIIcon","IconCopyLink","SvgCopyLinkIcon","SvgSpeakerOutlined","SvgEditOptions","SvgNotionIcon","SvgGoogleIcon","SvgFeishuIcon","SvgWeixinIcon","SvgFolderIcon","SvgTextFileIcon","SvgSheetFileIcon","SvgWaringOrangeIcon","SvgSelectArrowIcon","SvgProcessPlugin","SvgProcessDataSet","SvgProcessJump","SvgTaskTime","SvgTaskEvent","SvgPluginShop","SvgOpenInDefault","IconCodeOutlined","SvgCodeOutlined","SvgPositionFilled","SvgDateListPickerIcon","SvgWidgetPublished","SvgWidgetUnpublished","SvgPaLogOutlined","IconCalendar","SvgCalendar","IconSpanBMParallel","SvgSpanBMParallel","IconSpanBMConnector","SvgSpanBMConnector","IconSpanBMBatch","SvgSpanBMBatch","IconSpanAgent","SvgSpanAgent","SvgSpanBot","IconSpanCode","SvgSpanCode","IconSpanHook","SvgSpanHook","IconSpanCondition","SvgSpanCondition","SvgSpanDatabase","IconSpanKnowledge","SvgSpanKnowledge","IconSpanLLMCall","SvgSpanLLMCall","IconpanNodeDamaged","SvgSpanNodeDamaged","IconSpanPluginTool","SvgSpanPluginTool","IconSpanVar","SvgSpanVar","IconSpanWorkflowEnd","SvgSpanWorkflowEnd","IconSpanWorkflowStart","SvgSpanWorkflowStart","IconSpanCard","SvgSpanCard","IconSpanMessage","SvgSpanMessage","IconSpanWorkflow","SvgSpanWorkflow","IconSpanUnknown","SvgSpanUnknown","IconAddChildOutlined","SvgAddChildOutlined","SvgAutoGenerationIcon","SvgFooterDocumentIcon","SvgFooterMailIcon","SvgFooterWeixinIcon","SvgFooterFeishuIcon","SvgFooterDiscordIcon","SvgBotStoreUser","SvgBotStoreConversaion","SvgBotStoreLink","SvgIconBotStoreQuestion","SvgHandIcon","SvgHelpIcon","SvgOpenTranslateIcon","SvgExpandOutlined","SvgAiStopGenIcon","IconViewDiff","SvgDiff","IconYesFilled","SvgYesFilled","SVGIconSideFoldOutlined","SvgCozeTxtEn","IconSvgCozeTxtCn","SvgCozeTxtCn","IconSvgCozeLogo","SvgCozeLogo","SvgInvisible","SvgVisible","IconMenu","SvgMenuIcon","IconChevronRight","SvgChevronRightIcon","IconChevronDown","SvgChevronDownIcon","IconSvgListFilter","SvgListFilter","SvgStoreListMoreIcon","SvgSceneListEmptyIcon","SvgPhoneIcon","SvgPCIcon","SvgIntelligentIcon","SvgStandardRefresh","SvgStandardCopy","IconArrowDownFill","SvgArrowDownFill","SvgBold","SvgHn","SvgItalic","SvgStrikethrough","SvgListDisorder","SvglistOrder","SvgQuotation","SvgLink","SvgImage","SvgH1","SvgH2","SvgH3","SvgEmojiOutlined","SvgReplyOutlined","IconMinimizeOutlined","SvgMinimizeOutlined","SvgBrace","SvgPost","SvgKnowledgeDocAvatar","SvgKnowledgeTableAvatar","SvgArrowKnowledgeIcon","SvgKnowledgeImgAvatar","IconExampleInvalid","SvgExampleInvalidIcon","IconExampleNone","SvgExampleNoneIcon","IconExampleNormal","SvgExampleNormalIcon","SvgAnalyticsGlobalIcon","SvgAnalyticsRegionalIcon","SvgAnalyticsRankingIcon","SvgShortcutEdit","IconShortcutTrash","SvgShortcutTrash","IconShortcutDisorder","SvgShortcutDisorder","SvgTemplateShortcut","SvgTemplateShortcutTransparency","IconShortcutTemplateClose","SvgTemplateShortcutClose","SvgLoadMoreShortcuts","IconShortcutComponentTag","SvgShortcutComponentTag","IconSvgShortcutDrag","SvgShortcutDrag","SvgMarIcon","SvgMarColorIcon","SvgSortDescendIcon","SvgSortAscendIcon","SvgSortDefaultIcon","SvgWeChatColorful","SvgWeiboColorful","SvgQzoneColorful","SvgJuejinColorful","SvgXColorful","SvgRedditColorful","SvgImageColorful","SvgStoreMenuWorkflow","SvgStoreMenuWorkflowSelected","SvgCozeENIcon","SvgCozeZHIcon","SvgBitableFormOutlined","SvgCozOfficialFill","SvgConnect","SvgReadInfoOutlined","SvgLtmEditIcon","SvgDatabaseTabIcon","SvgLtmTabIcon","SvgVariableTabIcon","IconMemoryDownMenu","SvgMemoryDownMenuIcon","SvgBotstoreMemoryIcon","SvgUpOutlinedBold","SvgAddIcon","SvgKnowledgeEdit","IconCozeCross","SvgCozeCross","SvgLocalPluginIcon","SvgDocLinkOutlinedIcon","SvgDocRefreshOutlinedIcon","SvgKnowledgeSettingOutlinedIcon","SvgViewContentOutlinedIcon","IconDragOutlined","SvgDragOutlined","SvgFileBox","SvgFileLinkOutlined","SvgAddEntryBottomOutlined","SvgAddEntryTopOutlined","SvgHotIconSettingOutlined","SvgDocumentCode","IconCozArrowDown","SvgCozArrowDownIcon","SvgCozArrowDownLeftIcon","SvgDiamondFill","SvgCozCheckMark","Input","SemiInput","SemiButton","InputInner","withField","UIFormInput","_inputRef_current_offsetLeft","fieldClassName","inputRef","TextAreaInner","TextArea","UIFormTextArea","UISelectOption","disabled","selected","optionClassName","BaseSelect","clickToHide","selectedClassname","Select","_item_value","itemT","IconSmallTriangleDown","UISelect","dropdownClassName","localeProps","FormSelectInner","UIFormSelect","UITable","_indicatorRef_current","offsetY","scrollX","propsTableProps","empty","total","onLoad","enableLoad","useHoverStyle","mergeTableList","tableA","tableB","dataSource","tableProps","initialized","setInitialized","showTable","IndicatorRoot","tableRef","onLoadRef","delayClear","innerData","setInnerData","indicatorFlag","needRenderIndicator","needLoad","needLoadRef","indicatorRef","d","_IndicatorRoot_current","tableContainer","f","createRoot","Indicator","intersecting","assign","Spin","Table","onIntersecting","i18n","i18nContext","setState","IntersectionObserver","entries","_entries_","IconSpin","UIIconButton","wrapperClass","iconSize","UITableAction","_deleteProps_popconfirm_icon","editProps","deleteProps","copyProps","iconColor","useCallback","targetProps","Popconfirm","UIContent","UILayout","title","_title","Helmet","breadcrumb","UITabBar","containerClass","Tabs","innerProps","Node","UIModal","Modal","_this_props","centered","showScrollBar","okButtonProps","cancelButtonProps","UICompositionModalSider","UICompositionModalMain","UICompositionModal","sider","header","filter","UIMobileModal","hideOkButton","hideContent","hideCancelButton","showCloseIcon","useModal","isMobile","visible","setVisible","inner","UITabsModal","tabsProps","tabPanes","_tabPaneProps_itemKey","tabPaneProps","TabPane","useShouldUpdateAnchor","prevStyleLeft","prevStyleTop","shouldUpdateGrabAnchor","grabAnchorBuffer","getGrabAnchorBufferExceed","updateCheckState","currentLeft","currentTop","isUnChanged","updateGrabAnchorBuffer","getShouldUpdateGrabAnchor","refreshCheckState","useGrab","grabTarget","grabAnchor","isModifyStyle","onPositionChange","grabbing","setGrabbing","isGrabbingRef","anchorOffsetX","anchorOffsetY","setGrabStatus","grab","handleMouseMove","docElement","handleMouseUp","unsubscribeDocumentMouseEvent","subscribeDocumentMouseEvent","updateGrabAnchor","top","subscribeGrab","anchor","handleAnchorMouseDown","handleAnchorMouseMove","UIDragModal","zIndex","footer","focusKey","onWindowFocus","unSubscribe","createPortal","SignFrame","brandNode","SignPanel","UIEmpty","isNotFound","notFound","Empty","IllustrationNoResult","IllustrationNoResultDark","IllustrationNoContent","IllustrationNoContentDark","UITag","Tag","cls","UICascader","_param","Cascader","ToastFactory","rewriteToastCreate","opts","icon","cleanObject","getIcon","rewriteToastCreateAlias","Menu","Dropdown","Item","UISearchInput","onSearch","onCompositionStart","onCompositionUpdate","onCompositionEnd","compositionFlag","_inputRef_current","UISearch","showClear","prefix","localValue","setValue","changedValue","React","LineStatus","LogObjSpecialKey","LogValueStyleType","isBigNumber","BigNumber","getLineByParent2Child","pLine","generateFields","object","lineMap","dfs","$object","$parentPath","parentLines","lines","generateInitialExpandValue","fields","expandAll","_fields_","setExpandAllFields","JsonViewerContext","noop","JsonViewerProvider","defaultExpandAllFields","expand","setExpand","handleExpand","autoExpand","TextField","paragraphs","paragraph","Line","Text","generateStrAvoidEscape","characters","char","LongStrValue","more","setMore","echoStr","useValue","isNull","isBoolean","useExpand","useContextSelector","_v_expand","handleExpandChange","FieldValue","JsonField","isObj","echoLines","pathStr","isWarning","keyWithColon","l","IconTreeTriangleRight","JsonViewer","render","isNil","ScrollStatus","isAppleWebkit","getChromeVersion","pieces","navigator","major","minor","build","patch","piece","parseInt","SUPPORT_NEGATIVE_SCROLL_TOP","supportNegativeScrollTop","chromeVersion","useScrollViewControllerAndState","reverse","scrollStatusRef","wrapperRef","isDisableScroll","getContainer","container","_getContainerScrollTop","_setContainerScrollTop","scrollTo","update","updatingScrollTop","scrollToPercentage","ratio","offsetHeight","scrollHeight","endScrollTop","getScrollTop","scrollTop","_containerRef_current","_containerRef_current1","getScrollViewWrapper","getScrollPercentage","relativeRatio","getScrollBottom","refreshAnchor","disableScroll","enableScroll","checkContentIsFull","_parentRect_height","parentNode","parentRect","useAutoAnchorWhenAppendOnSafari","enableThreshold","prevLastChild","prevContainerHeight","scrollToKeepAnchor","_container_lastElementChild","currentLastChild","currentContainerHeight","heightIncrease","prevScrollTop","ScrollViewContentContext","ScrollView","outerRef","before","beforeClassName","after","innerBefore","reachTopThreshold","onReachTop","onLeaveTop","reachBottomThreshold","onReachBottom","onLeaveBottom","showScrollbar","autoShowScrollbar","onScroll","scrollbarWidthNone","defaultScrollStatus","scrollViewContentRef","isReachTopRef","isReachBottomRef","handleDebounceUpdateScrollStatus","scrollStatus","handleScroll","topThreshold","bottomThreshold","isFunction","EditMenuItem","TextRender","record","dataIndex","validator","editable","isEditing","validate","errorMsg","isEditCom","setIsEditCom","inputValue","setInputValue","textAreaRef","onBlurFn","updateRecord","valueLength","CommonE2e","TagRender","ActionsRender","editDisabled","onEdit","deleteDisabled","onDelete","IconCozEdit","IconCozTrashCan","getBase64","fileReader","FileReader","_event_target","CustomError","getFileExtension","isValidSize","LIMIT_SIZE","useImagePreview","setSrc","tosKey","setTosKey","uploading","setUploading","open","close","modal","useDataModalWithCoze","customRequest","fileInstance","_result_data","_result_data1","base64","FileBizType","_e_total","REPORT_EVENTS","fileItem","_currentFile_fileInstance","currentFile","showTips","IconCozUpload","ImageContainer","srcList","setCurSrc","imageProps","ImageRender","customEmpty","curSrc","imagePreviewModal","resizeFn","column","getRowKey","getRowOpConfig","indexs","deleteConfig","colWidthCacheService","ColWidthCacheService","mapArr","widthMap","tableKey","cacheWidthMap","temp","EditMenu","onExit","menuConfigs","EditToolBar","ButtonGroup","TableWrapper","isVirtualized","AutoSizer","scrollProps","EmptyStatus","TableView","rowSelect","rowOperation","resizable","columns","scrollToBottom","extraTableProps","menuVisible","setMenuVisible","menuStyle","setMenuStyle","setSelected","focusRow","setFocusRow","useTheme","currentThemeClassName","toolBarVisible","tableData","columnsHandler","cols","col","_record","rowIndex","offsetWidth","SAFEY","newColumns","setNewColumns","rowSelection","selectedRowKeys","publicEditProps","debounceScrollToBottom","getTableHeight","bodyH","scrollDirection","scrollOffset","scrollUpdateWasRequested","resizedCols","oCol","resizedCol","BotE2e","KnowledgeE2e","DataNamespace","ErrorFallbackComponent","namespace","IllustrationNoAccess","DataErrorBoundary","reporterFun","inputMeta","eventParams","dataReporter","DataReporter","pathName","regRes","reg","FilterKnowledgeType","DocumentUpdateInterval","getFormatTypeFromUnitType","UnitType","FormatType","isFeishuOrLarkDocumentSource","DocumentSource","getUpdateIntervalOptions","documentSource","$state","useReactive","getDataTypeText","dataTypes","ColumnType","getDataTypeOptions","DataTypeSelect","_props_selectProps","selectValue","setSelectValue","SinglelineSelect","LimitCount","maxLen","len","CozeInputWithCountField","getValueLength","CozeFormTextArea","useUnmountSignal","controllerRef","abortable","func","abortSignal","useDataModal","disableOk","setDisableOk","defaultState","createProcessingKnowledgeStore","datasetId","processingDatasets","createParamsStore","initialState","getInitialState","createKnowledgePreviewStore","getDefaultLevelSegmentsState","createLevelSegmentsSlice","dataSetDetail","documentList","curDocId","KnowledgeParamsStoreContext","KnowledgeParamsStoreProvider","onUpdateDisplayName","onStatusChange","resourceNavigate","paramsStoreRef","knowledgeStoreRef","processingStoreRef","useKnowledgeParamsStore","useStoreWithEqualityFn","shallow","useKnowledgeParams","useDataCallbacks","useDataNavigate","useKnowledgeStore","getDefaultStorageStrategyState","StorageLocation","createStorageStrategySlice","enableStorageStrategy","storageLocation","openSearchConfig","testConnectionSuccess","useDatasetStore","dataSetList","ActionType","FilterPhotoType","SelectFormatType","RadioGroup","Radio","TextKnowledgeLogo","TableKnowledgeLogo","IconCozInfoCircle","ImageKnowledgeLogo","SourceRadio","e2e","TextLocal","IconCozDocument","TextCustom","IconCozPencilPaper","SourceSelect","TextKnowledgeSourceSelect","initValue","TableLocal","TableCustom","TableKnowledgeSourceSelect","ImageLocal","ImageKnowledgeSourceSelect","ImportKnowledgeSourceSelect","formatType","CozeKnowledgeAddTypeContent","onImportKnowledgeTypeChange","onSelectFormatTypeChange","formApi","useFormApi","currentFormatType","setCurrentFormatType","iconInfoGenerate","setIconInfoGenerate","coverIcon","setCoverIcon","fetchIcon","_currentCover_","_icon_url","_icon_uri","_icon_uri1","KnowledgeApi","currentCover","unitType","setUnitType","prev","PictureUpload","IconType","useCreateKnowledgeModalV2","onFinish","beforeCreate","projectID","formRef","useSpaceStore","createDataset","_formRef_current","_formRef_current1","_formRef_current2","_formRef_current_formApi_getValue","LoadingButton","Form","useKnowledgeListModal","onClickAddKnowledge","createKnowledgeModal","shouldUpload","useKnowledgeListModalBase","useKnowledgeListModalContent","useKnowledgeListModalContentBase","KnowledgeListModalContent","KnowledgeListModalContentBase","ModalActionType","KNOWLEDGE_UNIT_NAME_MAX_LEN","KNOWLEDGE_MAX_DOC_SIZE","KNOWLEDGE_MAX_SLICE_COUNT","DATA_REFACTOR_CLASS_NAME","useEditKnowledgeModal","initVal","contentCheckErrorMsg","setContentCheckErrorMsg","getFormValues","enableOk","canOk","validateNL2SqlName","currentUnitName","notationReg","recallStrategyUpdater","datasetInfo","SliderSetting","step","precision","marks","Slider","InputNumber","isNaN","TitleArea","tip","tipStyle","Popover","SettingItem","RadioGroupSetting","_options_find","desc","getSearchStrategyOptions","getAutomaticCallOptions","getNoRecallReplyOptions","KnowledgeNoRecallReplyMode","ZhCustomizePromptPNG","EnCustomizePromptPNG","localeMapLink","getShowSourceModeOptions","language","getUnReactiveLanguage","goToGuides","module","KnowledgeShowSourceMode","RagModeConfiguration","dataSetInfo","onDataSetInfoChange","showTitle","showNL2SQLConfig","showAuto","showSourceDisplay","auto","minScore","topK","searchStrategy","show_source","no_recall_reply_mode","no_recall_reply_customize_prompt","show_source_mode","recall_strategy","use_nl2sql","use_rerank","use_rewrite","FLAGS","getFlags","debounceOnNoRecallReplyCustomizePromptChange","Banner","Switch","nextState","useSliceDeleteModal","onDel","useDeleteUnitModal","docId","useRequest","getEllipsisCount","formatBytes","transSliceContentOutput","ignoreImg","tosKeyMatches","srcMatches","getSrcFromImg","matches","match","_match_match","TableSegmentContent","canEdit","RenderFooter","modalProps","OptimizedTextArea","initialValue","handleTextAreaChange","ImageEmpty","IconCozImage","TableSegmentModal","getFormData","updateWithSliceList","slices","extendedTableMeta","slice","useTableSegmentModal","setTableData","tableMeta","actionTypeRef","getFormVerification","isValid","newTextAreas","textArea","newTextArea","fetchCreateTableSegment","createLoading","createContent","fetchUpdateTableSegment","uploadLoading","sliceId","updateContent","formatRecord","colData","modalLoading","onOpen","newTableData","originTableData","newValue","_newData_index","newData","getDatasetList","pageIndex","query","search_type","scope_type","format_type","resp","DEFAULT_SEARCH_TYPE","OrderField","EmptyToCreate","onAdd","canCreate","defaultKnowledgeTypeFallback","_param_at","useKnowledgeFilter","hideHeader","showFilters","headerClassName","defaultType","knowledgeTypeConfigList","uniqKnowledgeTypeConfigList","uniq","currentKnowledgeType","setCurrentKnowledgeType","setQuery","searchType","setSearchType","scopeType","setScopeType","DatasetScopeType","scopeOptions","space_type","isPersonal","SpaceType","loadingMore","noMore","reload","useInfiniteScroll","handleResetFilter","documentVisibility","useDocumentVisibility","handleSearchTypeChange","handleQueryChange","handleAdd","renderContent","renderSearch","renderCreateBtn","UIButton","renderFilters","accumulator","currentValue","currentIndex","reactNode","renderKnowledgeTypeConfigNode","filterType","renderContentFilter","FilePopover","fileNames","AddedButton","buttonProps","isMouseIn","setFalse","setTrue","useBoolean","SpaceTags","_item_processing_file_list","_item_processing_file_list1","_item_file_list","_item_file_list1","_item_file_list2","_item_file_list3","fileInfo","KnowledgeCardListVertical","onRemove","isAdded","onClickKnowledgeDetail","handleRow","unix","DatasetStatus","datasetList","onDatasetListChange","useBotInfoStore","dataset","sendTeaEvent","EVENT_NAMES","IconCozKnowledgeFill","hideCreate","category","setCategory","handleClose","SiderCategory","useUpdateFrequencyModal","setContent","DocumentUpdateType","setDisabled","UpdateType","_object_values","FormSelect","editContent","IconCozDicumentOnline","IconCozNotionFill","IconCozLarkFill","IconCozGoogleDriveFill","IconCozWechatFill","useEditUnitNameModal","onOk","onColse","FrequencyType","OptType","FooterBtnStatus","CreateUnitStatus","UploadStatus","EntityStatus","CheckedStatus","KnowledgeUploadStoreContext","KnowledgeUploadStoreProvider","_store_current","createStore","reset","_steps_find","_useUploadMount","storeContext","useUploadMount","showStep","currentStep","placeHolder","checkStatus","showStepFlags","_step_showThisStep1","steps","_v","ContentComp","BOT_DATA_REFACTOR_CLASS_NAME","Steps","IconCozCheckMarkFill","filterUnnecessaryContentFromSlice","getSourceTypeDescription","sourceType","getFormatTypeDescription","RecallSlice","_meta_document_name","llmOutput","score","isOpen","setIsOpen","needCollapse","setNeedCollapse","sliceContentRef","_sliceContentRef_current_scrollHeight","_sliceContentRef_current_clientHeight","formatTypeDesc","sourceTypeDesc","filteredSlice","Card","origin","hrefSlices","spaceIndex","LinkToKnowledgeIcon","RecallSlices","useUserStore","isSettled","_get_userInfo","fetchUserLabel","_res_id_user_info_map_id","PlaygroundApi","useLoginStatus","_state_userInfo","useUserInfo","useHasError","currentUidLSKey","useAlterOnLogout","alert","visibility","loginStatus","isLogined","memoizedAlert","useMemoizedFn","_useUserStore_getState_userInfo","lastUserId","localStorage","_useUserStore_getState_userInfo_user_id_str","useUserLabel","useUserAuthInfo","useSyncLocalStorageUid","localStorageService","getUserInfo","getLoginStatus","resetUserStore","setUserInfo","getUserLabel","getUserAuthInfos","subscribeUserAuthInfos","usernameRegExp","usernameRegExpValidate","refreshUserInfoBase","checkLogin","logoutBase","logout","checkLoginBase","checkLoginImpl","hasError","setUserInfoContext","useCheckLoginBase","needLogin","goLogin","memoizedGoLogin","fired","handleUnauthorized","handleAPIErrorEvent","removeAPIErrorEvent","passportApi","passport","refreshUserInfo","connector2Redirect","useGoLogin","loginFallbackPath","navigate","useNavigate","pathname","search","useLocation","redirectPath","signRedirectKey","encodeURIComponent","useCheckLogin","useLoginService","email","password","loginService","registerService","Favicon","FaviconBase","FaviconAddon","LoginPage","setEmail","setPassword","setHasError","login","register","loginLoading","registerLoading","submitDisabled","CozeBrand","errors","useLogout","node","LoadingContainer","ErrorContainer","Mask","LoginCheckMask","loginOptional","RequireAuthContainer","UsernameInput","errorMessage","EditWrap","onSave","UserInfoField","CustomComponent","disabledTip","customContent","isEdit","setEdit","handleSave","EditButton","WrappedInputWithCount","onEnterPress","WrappedUsernameInput","WrappedPasswordInput","getLanguageOptions","WrappedSelectInput","UserInfoFieldWrap","updateProfileEvent","createReportEvent","updateProfileCheckEvent","getUserName","_userInfo_bui_audit_info","_userInfo_app_user_info_user_unique_name","UserInfoPanel","_getLanguageOptions_find","_userInfo_avatar_url","userStoreService","setNickname","username","setUsername","userNameErrorInfo","setUsernameErrorInfo","lang","setLang","setAvatar","uploadRef","onNicknameChange","onPasswordChange","newPassword","_userInfo_email","onLanguageChange","newLang","handleUsernameRegexpError","validateUsername","cancelValidateUsername","innerUsername","isApiError","_error_msg","onUsernameChange","onUserInfoFieldCancel","UpdateUserAvatar","IconCozWarningCircleFillPalette","langValue","useAccountSettings","tabs","onClose","realTabs","currentTab","setCurrentTab","_realTabs_","tabName","tabList","Content","tabId","useCurrentEnterpriseInfo","uploadAvatar","getIsSettled","getIsLogined","getUserInfoImpl","getUserAuthInfosImpl","useIsSettled","useIsLogined","useUserInfoImpl","useUserAuthInfoImpl","useUserLabelImpl","subscribeUserAuthInfosImpl","refreshUserInfoImpl","useLoginStatusImpl","getLoginStatusImpl","useSpace","space","useInternalSpace","PC_VERSION_CONFIG","CN_CHROME_URL","CN_EDGE_URL","CN_BROWSER_DOWNLOAD_CONFIG","testLowVersionBrowse","testPCVersion","_CN_BROWSER_DOWNLOAD_CONFIG_name","browserInfo","detect","version","configVersion","compareVersion","version1","version2","parts1","parts2","part1","part2","BrowserUpgradeWrap","bannerInfo","setBannerInfo","bannerHeight","setBannerHeight","bannerRef","downloadUrl","_bannerRef_current_getBoundingClientRect_height","prevState","useCreateBotAction","urlSearch","currentSpaceId","newWindowRef","openWindow","destroyWindow","modalContextHolder","createProject","useCreateProjectModal","targetSpaceId","toSpaceId","projectId","baseUrl","ellipsis","UserInfoMenu","_userInfo_app_user_info","Badge","CozAvatar","PatBody","useBaseAccountSettings","AccountDropdown","logoutModal","openLogoutModal","accountSettingsNode","openAccountSettings","GlobalLayoutAccountDropdown","IconCozExit","IconCozSetting","useHasSider","useRouteConfig","location","pageMode","queryParams","URLSearchParams","notCheckLoginPage","GlobalLayoutComposed","hasSider","useParams","createBot","createBotModal","GlobalLayout","IconCozWorkspace","IconCozWorkspaceFill","IconCozCompass","IconCozCompassFill","useUpdate","currentLocale","transformedCurrentLocale","I18nProvider","CDLocaleProvider","en_US","zh_CN","LocaleProvider","enUS","zhCN","ThemeProvider","IS_BOE","Outlet","useAlertOnLogout","alertRef","useAlertOnLogoutImpl","useSetResponsiveBodyStyle","isResponsive","useIsResponsiveByRouteConfig","setMobileBody","setPCBody","useResetStoreOnLogout","useBotListFilterStore","useInitCommonConfig","useCommonConfigStore","useAppInit","requireAuth","requireAuthOptional","slardar","useErrorCatch","DEFAULT_COMMON_CONFIG_STATE","commonConfigs","useSignMobileStore","flag","useMobileTips","useUIModal","GlobalLayoutProvider","globalLayoutContext","useLayoutResponsive","mobileTips","setMobileTips","mobileTipsModal","openMobileTipsModal","isResponsiveOld","useIsResponsive","isResponsiveByRouteConfig","GlobalError","_customGlobalErrorConfig_title","_customGlobalErrorConfig_subtitle","spaceApp","useSpaceApp","base","getPersonalSpaceID","spaceStore","useRouteError","useRouteErrorCatch","isLazyLoadError","hasErrorMessage","customGlobalErrorConfig","isCustomError","_error_ext","sessionId","_getSlardarInstance_config","BaseEnum","_useSpaceStore_getState_spaceList_","escape","BackButton","onClickBack","STORAGE_KEY","SubMenu","SubMenuComponent","setWidth","savedWidth","handleMouseDown","startX","newWidth","startWidth","Suspense","reportNavClick","GLobalLayoutMenuItem","activeIcon","dataTestId","isActive","newPath","p","navId","NavLink","GlobalLayoutActionBtn","iconClass","portal","renderButton","onButtonClick","btn","siderStyle","mainMenuStyle","GlobalLayoutSider","actions","menus","extras","onClickLogo","hasSubNav","menu","banner","sideSheetVisible","setSideSheetVisible","siderContent","SideSheet","sideSheetStyle","userBadge","userTips","disableVisibleChange","onVisibleChange","isReactNode","isValidElement","LOCAL_STORAGE_CACHE_KEYS","cacheConfig","isValidDataItem","isValidCacheData","userRelated","dateItem","paseLocalStorageValue","raw","filterDataItems","filterCacheData","cacheData","LOCAL_STORAGE_KEY","_state","_userId","_saveState","initState","setPermanent","setUserRelated","getPermanent","getUserRelated","waitUserId","LocalStorageService","_cacheConfig_key","bindAccount","throttle","_class_private_field_get_userRelated__class_private_field_get","_class_private_field_get_userRelated1","_class_private_field_get_userRelated__class_private_field_get1","_class_private_field_get_permanent","polling","maxRetry","interval","tryCount","go","reportSpaceListPollingRes","isSuccess","_get_spaces_bot_space_list_find","spaceID","_get_spaces_bot_space_list","spaces","targetSapce","force","_res_bot_space_list","_res_has_personal_space","_res_team_space_num","_res_max_team_space_num","_res_recently_used_space_list","prePromise","currentPromise","pollingRes","_data_bot_space_list_length","spaceInfo","useRefreshSpaces","enterpriseInfo","useSpaceList","spaceItem","getSpaceApp","SpaceSubModuleEnum","useCreateSpace","_iconUrl_","autoNavigate","spaceName","setSpaceName","setDescription","iconUrl","setIconUrl","createSpace","fetchSpaces","handleCreate","spaceFoundInList","retryCount","currentSpaceList","spaceExists","manualCheck","finalSpaceList","spaceStore1","targetSpaceId1","targetUrl","customUploadRequest","WorkspaceSubMenu","subMenuKey","currentSpace","spaceList","createSpaceModal","openCreateSpaceModal","subMenu","IconCozBot","IconCozBotFill","IconCozKnowledge","addSpaceText","isZhCN","currentLang","headerNode","SpaceSwitcherDropdown","BaseWorkspaceSubMenu","useInitSpace","useBaseInitSpace","SpaceLayout","spaceListLoading","IconCozIllusAdd","WorkspaceListItem","currentSubMenu","WorkspaceList","getSubPath","IntelligenceType","getIntelligenceNavigateUrl","basic_info","FavoritesListItem","clickToUnfavorite","ProductApi","ProductEntityType","icon_url","IconCozMore","emptyDraftBotListData","getFavoritesList","spaceType","cursorId","pageSize","_resData_total","intelligenceApi","IntelligenceStatus","SearchScope","resData","useInfiniteScrollRef","req","FavoritesList","_data_list","_data_list1","_data_list2","_dataSource_cursorId","handler","refreshFavListParams","_req_data_list","currLength","mutateData","Loading","intelligenceData","_intelligenceData_basic_info","hasSpace","SpaceIdContainer","useDestorySpace","isCompleted","useInitSpaceRole","SpaceIdLayout","DropdownContent","searchValue","searchPlaceholder","onSearchChange","personalSpace","teamSpaces","onSpaceClick","onAddSpaceClick","IconCozPlus","setSearchValue","finalSearchPlaceholder","finalAddSpaceText","filtered","_space_name","handleSpaceClick","handleAddSpaceClick","handleSearchChange","dropdownContent","getFallbackWorkspaceURL","fallbackSpaceID","fallbackSpaceMenu","checkSpaceID","targetSpaceSubMenu","fetchSpacesWithSpaceId","isReady","setIsError","capture","useErrorHandler","personalSpaceID","firstSpaceID","targetURL","withSlardarIdButton","getFileInfo","judge","accept","isWhite","navBack","GenerateType","AvatarBackgroundNoticeDot","DotStatus","dot","IconCozCheckMarkCircleFillPalette","InputWithCountField","UIInput","UIBreadcrumb","documentinfo","pluginInfo","pluginToolInfo","mockSetInfo","isPublish","goBack","goBackToDoc","goBackToPluginIdList","goBackToBot","goBackToToolIdList","goBackToMockSetList","renderBreadcrumbItemForPlugin","onBackClick","breadCrumbList","IconCozArrowLeft","SemiBreadcrumb","renderBreadcrumbItem","SpaceAppEnum","SemiUISearch","LazyReactMarkdown","lazy","ReactMarkdown","PopoverContent","SelectSpaceModal","_list_filter","botName","onConfirm","pageFrom","usePageRuntimeStore","hasWorkflow","useBotSkillStore","hide_operation","form","_form_current","_list__id","copyAddonAfter","maxBotNameLength","botInputLengthService","maxBotNameLengthWithAddonAfter","_form_current1","_params_spaceId","BotPageFromEnum","getBotName","maxBotNameLengthWithJoin","botNameJoin","_rule","reactText","optionNode","botDuplicateEvent","DuplicateBot","storeCategory","botID","btnTxt","buttonSize","enableCozeDesign","isBlock","pageFromFromStore","botIdFromStore","botNameFromStore","showSpaceModal","setShowSpaceModal","copyAndOpenBot","_resp_data_bot_id","newBotId","SpaceApi","botTeaparams","respData","beforeCopyClick","getParamsFromQuery","openNewWindow","CardThumbnailPopover","imgProps","popoverRef","onImageLoad","calcPosition","AvatarSizeMap","AvatarName","nameMaxWidth","renderCenterSlot","AvatarDefault","getIsIPad","hotZoneStyle","handleStyle","ResizableLayoutHandle","hotZoneClassName","onMove","onMoveStart","onMoveEnd","moving","setMoving","stateRef","callbackRef","moveEnd","offEvents","move","ResizableLayout","handleClassName","childRef","useDebounceEffect","totalSize","sum","newItemWidth","w","Children","child","cloneElement","HTMLElement","elm","_item_clientWidth","offset","formateDecimalPlacesString","prevValue","decimalPlaces","numberValue","stringValue","isInteger","decimalPointIndex","formattedValue","formateDecimalPlacesNumber","pow","InputSlider","hover","sliderRenderId","setFocus","inputRenderId","setInputRenderId","updateInputNumber","fixedValue","expectedFormattedValue","TeaExposure","once","teaEvent","divParams","divRef","inViewport","useInViewport","reportedRef","BaseSpaceFormSelect","_operationalSpaceList_at","currentOptionalSpace","operationalSpaceList","fixedInitValue","IconCozTeamFill","SpaceFormSelect","appendCopySuffix","filedKeyMap","ProjectTemplateCopyModal","isSelectSpace","formProps","FormInput","getPictureUploadInitValue","useCreateOrUpdateAgent","botInfoRef","showSpace","outerSpaceId","bizCreateFrom","isOkButtonDisable","checkErr","errMsg","confirmDisabled","setCheckErr","setErrMsg","handleFormValuesChange","getValues","resetFormState","useAgentFormManagement","persistenceLoading","handleCreateBot","handleUpdateBot","useAgentPersistence","_formRef_current_formApi_getValues","_res_bot_space_list1","_formRef_current_formApi1","formInitialValues","startEdit","Fragment","AgentInfoForm","useCreateAgent","useUpdateAgent","ExpirationDate","useGetPATList","fetchCustomPatList","setDataSource","fetchPatList","patPermissionApi","fetchData","dataSourceData","_dataSourceData_data","useCreatePAT","successData","setSuccessData","runCreate","useUpdatePAT","handle","runUpdate","updateSuccessData","useDeletePAT","successHandle","runAsync","runDelete","usePATPermission","patId","patPermission","setPatPermission","detailError","usePatOperation","afterCancelPermissionModal","showDataForm","setShowDataForm","showResult","setShowResult","isCreate","setIsCreate","editInfo","setEditInfo","onAddClick","createSuccessHandle","refreshHandle","editHandle","LinkDocs","PATInstructionWrap","Tips","tips","TopBody","openAddModal","disabledDate","date","getExpirationOptions","dataOptionsList","futureDate","currentDate","getExpireAt","getDetailTime","getExpirationTime","getStatus","ResultModal","_data_personal_access_token_name","doCopyAsync","targetKey","doCopy","targetText","getDurationData","durationDay","expireAt","validateName","validateDuration","authMigrateNoticeLSKey","useAuthMigrateNotice","isShowAuthMigrateNotice","usePatForm","getCustomParams","validateCustomParams","afterSubmit","updateLoading","isFailToValid","setIsFailToValid","validateParams","_formApi_current","duration_day","expire_at","nameValid","isCustomParamsValid","durationValid","_patPermission_personal_access_token","_patPermission_personal_access_token1","_formApi_current1","ready","_editInfo_id","onFormValueChange","_values","_changedValue","CommonFormParams","setDurationDay","PermissionModal","onRefresh","onCreateSuccess","onPatPermissionChange","onCustomFormValueChange","modalReady","api","useTableHeight","tableHeight","setTableHeight","calculateHeight","topPosition","AuthTable","columnStatusConf","ColumnOpBody","isCurrentUser","afterConfirmDelete","afterCancelDelete","IconCozMinusCircle","columnOpConf","columnNameConf","columnLastUseAtConf","lastUseTime","columnExpireAtConf","expireTime","columnCreateAtConf","createTime","getTableColumnConf","DataTable","renderDataEmptySlot","getCustomDataConfig","renderTopBodySlot","renderPermissionModal","permissionModalOptions","getBotDetailIsReadonly","pageRuntime","collaboration","useCollaborationStore","getBotDetailIsReadonlyByState","isPreview","editLockStatus","EditLockStatus","DEFAULT_BOT_GENERATE_AVATAR_MODAL","DEFAULT_BOT_GENERATE_BACKGROUND_MODAL","useGenerateImageStore","imageList","notices","generateAvatarModal","generateBackGroundModal","avatarBackgroundWebSocket","AvatarBackgroundWebSocket","retry","webSocketManager","_this_eventListenerList","_this_connection","_event_message","arrayBufferToObject","task","taskBotId","setGenerateAvatarModalByImmer","setGenerateBackgroundModalByImmer","pushImageList","avatarGifDotStatus","avatarStaticImageDotStatus","backgroundGifDotStatus","backgroundStaticImageDotStatus","updateState","setImmer","currentDotStatus","dotStatus","PicType","useBotDetailIsReadonly","updateHeaderStatus","setCollaborationByImmer","_props_same_with_online","_props_committer_commit_time","_props_committer_name","DEFAULT_STATE","useMonetizeConfigStore","isOn","freeCount","refreshCycle","_data_refresh_period","setIsOn","setFreeCount","setRefreshCycle","BotMonetizationRefreshPeriod","getDefaultAuditInfoStore","useAuditInfoStore","setterActionFactory","auditInfo","botData","_botData_latest_audit_info","setAuditInfo","useBotDetailStoreSet","usePersonaStore","useQueryCollectStore","useMultiAgentStore","useModelStore","useManuallySwitchAgentStore","useDiffTaskStore","getBotDataService","_botInfoResp_data1","customVersion","botInfoVersion","_botInfoResp_data","botInfoResp","monetizeConfigResp","getBotSceneData","getCommonBotData","botInfoResp1","getMarketSceneData","GetBotVersionScene","_botData_bot_version_info_common_bot_info","commonBotData","_initBotDetailStore","getRecordEvent","setPageRuntimeBotInfo","getBotInfoEvent","monetizeConfig","initBotSceneStore","initBotDetailStoreSet","initPageRuntimeStore","initCollaborationStore","initBotInfoStore","initPersonaStore","initModelStore","initBotSkillStore","initMultiAgentStore","initMonetizeConfigStore","initQueryCollectStore","initAuditInfoStore","hasBraces","pattern","verifyBracesAndToast","isAll","manuallySwitchAgent","agentID","setMultiAgentByImmer","multiAgent","MultiAgentSessionType","useChatBackgroundState","_backgroundState__mobile_background_image","_backgroundState__web_background_image","_backgroundState__web_background_image1","backgroundState","mobileBackGround","pcBackground","picType","_task_status","tasks","getInitBackgroundInfo","_backgroundImageInfoList__mobile_background_image","_backgroundGifList_find_img_info_prompt_ori_prompt","_backgroundStaticList_find_img_info_prompt","_image_img_info","_image_img_info1","_tasks_find","_tasks_find1","_tasks_find2","backgroundImageInfoList","backgroundGifList","backgroundStaticList","imageDotStatus","getDotStatus","gifDotStatus","GenPicStatus","_item_img_info","_item_img_info_prompt","lastImageTask","lastGifTask","getInitAvatarInfo","_lastGifTask_img_info_prompt_ori_prompt","_lastGifTask_img_info_ori_uri","_lastGifTask_img_info_ori_uri1","_lastGifTask_img_info_ori_url","_lastImageTask_img_info_prompt_ori_prompt","_lastImageTask_img_info_prompt1","initGenerateImageStore","_resp_data","updateImageList","updateNoticeList","clearGenerateImageStore","isReadOnly","DebounceTime","ItemTypeExtra","isObjectBase","getPayloadByFormatter","formatter","AutosaveObserver","memoizeSelector","transformer","createSelector","_this_debouncedSaveFunc","diffChange","delayTime","_this_config_eventCallBacks2","beforeSavePayload","_this_config_middleware","_this_config_eventCallBacks","_this_config_middleware1","_this_config_eventCallBacks1","afterSavePayload","configDebounce","isFunctionBase","targetDelayTimes","change","changePath","debouncePath","has","debounceType","_change_item","_change_item1","kind","triggerKind","AutosaveManager","registers","eventCallBacks","middleware","saveRequest","observers","o","_observer_debouncedSaveFunc","itemType","saveFetcher","storage","personaConfig","ItemType","systemMessage","isOptimize","personaSaveManager","modelConfig","modelSaveManager","workflowsConfig","workflowsToBackend","filterList","uniqBy","voicesInfoConfig","transformVo2Dto","variablesConfig","filteredVariables","uniqMemoryList","errType","VariableKeyErrType","taskInfoConfig","suggestionConfig","pluginConfig","newPluginApis","clonePluginApis","onboardingConfig","onboardingContent","layoutInfoConfig","layoutInfo","knowledgeConfig","chatBackgroundConfig","botSkillSaveManager","managers","autosaveManager","manager","registerMultiAgentConfig","_state_agents","saveRequestAgent","multiAgentSaveManager","_saveTableMemory","databaseList","updateBotRequest","updateShortcutSort","shortcutSort","getBotDetailDtoInfo","botSkill","model","persona","queryCollect","isMulti","BotMode","knowledge","variables","workflows","taskInfo","pluginApis","shortcut","tts","timeCapsule","filebox","devHooks","voicesInfo","agents","reportEvent","botSkillInfo","_saveFetcher","scopeKey","setPageRuntimeByImmer","_res_data_has_change","_res_data_same_with_online","structPayload","getDefaultBotInfoStore","BotMarketStatus","_data_bot_info","_botInfo_bot_id","_botInfo_bot_mode","_data_bot_market_status","_botInfo_name","_botInfo_description","_botInfo_icon_uri","_botInfo_icon_url","_botInfo_create_time","_botInfo_creator_id","_botInfo_update_time","_botInfo_connector_id","_botInfo_version","_data_publisher","_data_has_publish","_data_connectors","_data_publish_time","_data_space_id","_data_app_id","DEFAULT_KNOWLEDGE_CONFIG","DEFAULT_BOT_NODE_SUGGESTION_CONFIG","SuggestReplyMode","DEFAULT_SUGGESTION_PROMPT","DEFAULT_ONBOARDING_CONFIG","DEFAULT_SUGGESTION_CONFIG","DEFAULT_BACKGROUND_IMAGE_LIST","DEFAULT_DATABASE","BotTableRWMode","DEFAULT_TTS_CONFIG","DEFAULT_TIME_CAPSULE_CONFIG","DEFAULT_SHORTCUT_CONFIG","DEFAULT_VOICES_INFO","getDefaultBotSkillStore","FileboxInfoMode","getPluginApisFilterExample","database","inputType","transformDto2Vo","_botInfo_bot_tag_info","_botInfo_background_image_info_list","_botInfo_shortcut_sort","optionData","plugins","pluginsAPIs","_data_filter_map","_api_parameters","_w_api_detail_parameters","_w_id","_w_plugin_id","_w_name","_w_description","_w_icon_url","_data_knowledge_info_filter_map","_data_min_score","_data_top_k","k","_data_map","_item_key","_target_field_list","_target_field_list1","_data_time_capsule_mode","_data_disable_prompt_calling","_data_time_capsule_time_to_live","TimeCapsuleMode","DisablePromptCalling","_data_Mode","_data_suggested_questions_map","_data_prologue","_data_suggested_questions_show_mode","isBotNode","defaultSuggestionConfig","ttsConfig","_ttsConfig_i18n_lang_voice_str","isValidObject","idlVoicesInfo","shortcutSortList","layoutInfoFromService","_f_id","_i_content","mapValues","getDefaultCollaborationStore","Branch","baseVersion","inCollaboration","getDefaultDiffTaskStore","diffTask","promptDiffInfo","agentId","DEFAULT_MODEL_INFO","ContextContentType","getDefaultModelStore","_botData_bot_option_data","_modelInfo_short_memory_policy","_modelInfo_short_memory_policy1","_config_modelInfo_model_id","modelInfo","_model_ShortMemPolicy","_model_ShortMemPolicy1","bot_info","bot_option_data","DEFAULT_AGENT_BIZ_INFO","DEFAULT_AGENT_DESCRIPTION","botOpts","_data_prompt_info_prompt","_data_intents","_data_agent_id","transformDto2Vo4BotSkill","transformDto2Vo4Model","prompt","AgentType","bot","_multiInfo_connector_type","multiInfo","transformedAgents","agent","_agent_intents","intent","LineType","findFirstAgentId","targetAgent","_targetAgent_skills","_targetAgent_skills1","_targetAgent_skills2","_targetAgent_skills3","transformVo2Dto4BotSkill","transformVo2Dto4Model","ReferenceUpdateType","getDefaultMultiAgentStore","firstAgent","findFirstAgent","newAgentId","firstAgentId","sourceAgentId","portId","sourceAgent","findTargetAgent","_sourceAgent_intents","targetIntent","targetAgentId","intentId","sourceIntent","newIntent","_sourceAgent_intents1","findAgentByNextIntentID","intents","findAgent","agentInfo","getBaseVersion","createAgentParams","AgentVersionCompat","same_with_online","branch","bots","positions","botAgentInfos","batchCreateAgentParams","agentInfos","botInfos","botInfosVo","uniqWith","copyAgentParams","apiId","botAgents","SpaceApiV2","_botInfos_data","transformDto2Vo4Multi","updatedCurrentAgentIdWithConnectStart","updateBotNodeInfo","DEFAULT_BOT_SKILL_BLOCK_COLLAPSIBLE_STATE","TabStatus","getDefaultPageRuntimeStore","_resp_data_tab_display_info","botSkillBlockCollapsibleState","$params","disableUpdateService","getIsPreview","getDefaultPersonaStore","PromptType","_botData_bot_info_prompt_info_prompt","setPersonaByImmer","getDefaultQueryCollectStore","_botData_bot_info","_multiAgent_edges_find","startNode","edge","nextAgentID","_startNode_intents_at","storageLocal","createStorage","prop","_s_getItem","receiver","Reflect","sysVariables","_sysVariables_filter","j","commonProjectFormValid","_values_name","useFormSubmitState","initialValues","getIsFormValid","isFormValid","setFormValid","isUploading","checkFormValid","onValuesChange","onBeforeUpload","onAfterUpload","useProjectTemplateCopyModal","setSelectSpace","initValues","setInitValues","sourceProduct","setSourceProduct","isSubmitDisabled","onModalClose","copyRequestParam","productId","_inputParam_spaceId","inputParam","_sourceProduct_meta_info","_sourceProduct_project_extra","_data_data","_sourceProduct_meta_info1","_sourceProduct_meta_info_price","_data_data_new_entity_id","_inputParam_productId","requestValues","inputIsSelectSpace","inputSourceProduct","fixedInitValues","ProjectTemplateGroup","groupChildrenClassName","CardSkeleton","TemplateGroupSkeleton","openTemplatePreview","templateId","ActionButton","viewSource","product","onCopyTemplate","isShowCopyActionButton","_product_meta_info_id","extractTemplateActionCommonParams","_product_meta_info_name","ProjectTemplateCardUI","ProjectTemplateCard","_product_meta_info_covers_at","isHover","CreateEmptyProjectUI","IconCozPlusFill","BASE_TEMPLATE_ID_LIST","ProjectTemplateContent","isSelectSpaceOnCopy","onCopyOk","onCreateProject","onBeforeCopy","onCopyError","categories","categoriesError","isCategoryLoading","refreshCategoryRequest","products","productsError","isProductLoading","refreshProductRequest","SortType","ProductListSource","copyProject","isRequestLoading","IllustrationFailure","IllustrationFailureDark","baseTemplateList","recommendTemplateList","xorBy","productGroupList","groupBy","_p_meta_info_category","renderTemplateList","productList","_category_id","_category_id1","_productGroupList_","ProjectTemplateModal","ProjectForm","ProjectInfoFieldFragment","showMonetizeConfig","renderAutoGenerate","FormSwitch","FormTextArea","descClassName","switchClassName","ProjectFormModal","selectSpace","restModalProps","auditResult","setAuditResult","onFormSubmit","auditData","SESSION_HIDDEN_KEY","useHiddenSession","isSessionHidden","setIsSessionHidden","isKeyExist","oldValue","GuideButton","assetSrc","hideSession","showTip","GuideModal","extraButtonConfigs","AgentImg","ProjectImg","useCreateProjectModalBase","onBeforeCreateBot","onCreateBotError","onCreateBotSuccess","initialSpaceId","onCreateProjectSuccess","onCopyProjectTemplateSuccess","onBeforeCreateProject","onCreateProjectError","onBeforeCopyProjectTemplate","onProjectTemplateCopyError","extraGuideButtonConfigs","guideModalVisible","setGuideModalVisible","projectModalVisible","setProjectModalVisible","projectTemplateModalVisible","setProjectTemplateModalVisible","onCreateProjectOk","createProjectRequest","_useRequest","_uriList_at","uriList","enableMonetize","restValues","requestFormValues","project_id","audit_data","_inputParam_space_id","guideType","useBaseUpdateOrCopyProjectModal","inputOnSuccess","setInitialValues","onUpdateOk","onCopyOK","updateProjectRequest","copyProjectRequest","_useRequest1","user_info","sharedProps","_initialValue_name","useUpdateProjectModalBase","DeleteProjectContent","placeholder","DeleteProjectModal","isAgentParam","isProjectParam","useDeleteIntelligence","deleteIntelligenceName","setDeleteIntelligenceName","deleteParamsRef","setName","onCloseModal","_m","deleteName","restParam","useCopyProjectModalBase","useUpdateProjectModal","useCopyProjectModal"],"mappings":"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"}