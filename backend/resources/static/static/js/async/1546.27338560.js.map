{"version":3,"file":"static/js/async/1546.27338560.js","sources":["webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/resegment/text/constants.ts","webpack://@coze-studio/app/../../packages/arch/idl/src/auto-generated/developer_api/namespaces/document.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/resegment/table/constants.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/local/resegment/constants.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/local/add/constants.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/custom/add/constants.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/custom/add/steps/upload/editor-toolbar-actions-contributes.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/custom/add/steps/upload/editor-context-actions-contributes.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/local/constants.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/custom/incremental/constants.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/custom/add/constant.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/image/file/types.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/upload-footer/index.module.less?3973","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/upload-footer/upload-footer.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/browser-url-modal/editor-toolbar-actions-contributes.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/browser-url-modal/editor-context-actions-contributes.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/browser-url-modal/index.module.less?9aa8","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/unit-progress/index.module.less?bc05","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/unit-progress/unit-progress.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/configuration/index.module.less?9cd7","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/configuration/error.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/configuration/loading.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/configuration/banner.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/empty-auth/common-empty-auth/index.module.less?b282","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/empty/index.module.less?f155","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/frequency-form-item/index.module.less?ae32","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/collapse-panel/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/card-radio-group/index.module.less?3fb2","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/card-radio-group/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/slice.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/resegment/text/store/store.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/services/common.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/segment-strategys/segment-strategy/custom/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/segment-strategys/segment-strategy/automatic-cleaning/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/segment-config/base/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/resegment/text/steps/segment/segment.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/utils/is-local-text-document.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/utils/map-pdf-filter-config.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/utils/convert-filter-strategy-to-params.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/hooks/common.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/utils.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/resegment/text/steps/processing/hooks.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/resegment/text/steps/processing/index.module.less?28dc","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/resegment/text/steps/processing/processing.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/resegment/text/config.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/slice.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/resegment/table/store/slice.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/local/add/steps/services.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/utils.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/hooks.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/resegment/table/steps/configuration/index.module.less?3eaf","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/resegment/table/steps/configuration/configuration.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/resegment/table/steps/preview/preview.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/resegment/table/steps/processing/hooks.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/resegment/table/steps/processing/processing.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/resegment/table/config.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/resegment/table/store/store.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/local/resegment/store/doc-review-slice.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/local/resegment/store/store.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/segment-strategys/document-parse-strategy/quick-parsing/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/utils/render-document-filter-value.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/document-list/document-item.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/document-list/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/utils/convert-crop-data.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/segment-strategys/document-parse-strategy/precision-parsing/document-parse-form/pdf-filter/pdf-document.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/segment-strategys/document-parse-strategy/precision-parsing/document-parse-form/pdf-filter/filter-modal.module.less?fed2","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/segment-strategys/document-parse-strategy/precision-parsing/document-parse-form/pdf-filter/filter-modal.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/segment-strategys/document-parse-strategy/precision-parsing/document-parse-form/pdf-filter/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/segment-strategys/document-parse-strategy/precision-parsing/document-parse-form/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/segment-strategys/document-parse-strategy/precision-parsing/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/segment-config/text-local/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/local/resegment/steps/segment/segment.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/local/resegment/steps/processing/hooks.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/local/resegment/steps/processing/index.module.less?4449","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/local/resegment/steps/processing/processing.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/segment-preview/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/local/resegment/steps/preview/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/local/resegment/config.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/local/add/store/doc-review-slice.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/local/add/store/store.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/local/add/steps/preview/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/upload-task-list/text-local/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/local/add/steps/upload/hooks.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/local/add/steps/upload/upload.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/local/add/steps/segment/segment.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/local/add/steps/processing/index.module.less?4e23","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/local/add/steps/processing/processing.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/local/add/steps/processing/utils.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/local/add/config.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/custom/add/store/slice.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/custom/add/steps/upload/index.module.less?99b9","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/custom/add/steps/upload/upload.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/custom/add/steps/segment/segment.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/custom/add/steps/segment/utils.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/custom/add/steps/processing/index.module.less?848b","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/custom/add/steps/processing/processing.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/custom/add/config.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/custom/add/store/store.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/local/incremental/steps/services.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/local/incremental/steps/upload/upload.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/local/incremental/steps/upload/utils.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/local/incremental/steps/index.module.less?86c7","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/local/incremental/steps/configuration/configuration.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/local/incremental/steps/preview/preview.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/local/incremental/steps/processing/processing.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/local/incremental/config.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/local/incremental/store.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/hooks.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/local/add/steps/upload/upload.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/local/add/steps/upload/utils.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/local/add/steps/configuration/configuration.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/local/add/steps/preview/preview.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/local/add/steps/processing/processing.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/local/add/config.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/local/add/store.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/custom/incremental/steps/upload/index.module.less?90c3","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/custom/incremental/steps/upload/utils.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/custom/incremental/steps/upload/hooks.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/custom/incremental/steps/upload/upload.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/custom/incremental/config.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/custom/incremental/store.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/custom/add/store/slice.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/custom/add/steps/create/create-v2.module.less?974a","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/custom/add/steps/create/create-v2.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/custom/add/steps/create/create.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/custom/add/config.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/custom/add/store/store.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/image/file/store/index.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/image/file/steps/upload/use-retry.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/image/file/steps/upload/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/image/file/steps/process/index.module.less?80a3","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/image/file/steps/process/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/image/file/steps/annotation/index.module.less?ce71","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/image/file/steps/annotation/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/image/file/config.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-adapter/src/scenes/base/config.ts","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/upload-navbar/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/layout/base/index.module.less?57f0","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/layout/base/index.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-adapter/src/scenes/base/index.tsx","webpack://@coze-studio/app/../../packages/project-ide/biz-data/src/main.tsx","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/browser-url-modal/index.module.less","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/card-radio-group/index.module.less","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/configuration/index.module.less","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/empty-auth/common-empty-auth/index.module.less","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/empty/index.module.less","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/frequency-form-item/index.module.less","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/unit-progress/index.module.less","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/components/upload-footer/index.module.less","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/image/file/steps/annotation/index.module.less","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/image/file/steps/process/index.module.less","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/custom/add/steps/create/create-v2.module.less","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/custom/incremental/steps/upload/index.module.less","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/table/first-party/local/incremental/steps/index.module.less","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/custom/add/steps/processing/index.module.less","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/custom/add/steps/upload/index.module.less","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/local/add/steps/processing/index.module.less","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/knowledge-type/text/first-party/local/resegment/steps/processing/index.module.less","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/resegment/table/steps/configuration/index.module.less","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/resegment/text/steps/processing/index.module.less","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/features/segment-strategys/document-parse-strategy/precision-parsing/document-parse-form/pdf-filter/filter-modal.module.less","webpack://@coze-studio/app/../../packages/data/knowledge/knowledge-resource-processor-base/src/layout/base/index.module.less"],"sourcesContent":["/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport enum TextResegmentStep {\n  SEGMENT_CLEANER = 0,\n  EMBED_PROGRESS = 1,\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.\n/* eslint-disable */\n/* tslint:disable */\n// @ts-nocheck\n\nexport type Int64 = string | number;\n\nexport enum DocumentSourceType {\n  /** 本地上传 */\n  Document = 0,\n  /** url */\n  Web = 1,\n  /** 自定义 */\n  Custom = 2,\n  /** 第三方 */\n  ThirdParty = 3,\n}\n\nexport enum DocumentStatus {\n  /** 上传中 */\n  Processing = 0,\n  /** 生效 */\n  Enable = 1,\n  /** 失效 */\n  Disable = 2,\n  /** 删除 */\n  Deleted = 3,\n  /** 失败 */\n  Failed = 9,\n}\n\nexport enum DocumentUpdateType {\n  NoUpdate = 0,\n  Cover = 1,\n  Append = 2,\n}\n\n/** 文件类型 */\nexport enum FormatType {\n  /** 文本 */\n  Text = 0,\n  /** 表格 */\n  Table = 1,\n}\n\nexport interface CreateDocumentRequest {\n  /** 知识库 id */\n  dataset_id?: string;\n  /** 空间 id */\n  space_id?: string;\n  /** 文件信息 */\n  document?: DocumentInfo;\n}\n\nexport interface CreateDocumentResponse {\n  code?: number;\n  msg?: string;\n  /** document id */\n  id?: string;\n}\n\n/** 表格的列信息 */\nexport interface DocTableColumn {\n  id?: string;\n  /** 列名 */\n  column_name?: string;\n  /** 是否为语义匹配列 */\n  is_semantic?: boolean;\n  /** 列原本在 excel 的序号 */\n  sequence?: string;\n}\n\nexport interface DocTableSheet {\n  /** sheet 的编号 */\n  id?: Int64;\n  /** sheet 名 */\n  sheet_name?: string;\n  /** 总行数 */\n  total_row?: Int64;\n}\n\n/** 文件信息 */\nexport interface DocumentInfo {\n  name?: string;\n  document_id?: string;\n  /** 文件资源 */\n  tos_uri?: string;\n  /** 使用的bot数量 */\n  bot_used_count?: number;\n  /** 创建时间 */\n  create_time?: number;\n  /** 更新时间 */\n  update_time?: number;\n  /** 创建人 */\n  creator_id?: string;\n  /** 包含分段数量 */\n  slice_count?: number;\n  /** 文件名后缀 */\n  type?: string;\n  /** 文件大小 字节数 */\n  size?: number;\n  /** 字符数 */\n  char_count?: number;\n  /** 状态 */\n  status?: DocumentStatus;\n  /** 命中次数 */\n  hit_count?: number;\n  /** 来源 */\n  source_type?: DocumentSourceType;\n  /** 更新类型 */\n  update_type?: DocumentUpdateType;\n  /** 更新间隔 */\n  update_interval?: number;\n  /** 切片规则 */\n  rule?: string;\n  /** 文件类型 */\n  format_type?: FormatType;\n  /** 表格类型的表结构 */\n  table_meta?: Array<DocTableColumn>;\n  /** url 地址 */\n  web_url?: string;\n  /** 状态的详细信息；如果切片失败，返回失败信息 */\n  status_descript?: string;\n  /** 三方同步过来的文档是否已断开连接 */\n  is_disconnect?: boolean;\n  /** 三方文件 id */\n  data_source_id?: Int64;\n}\n\nexport interface GetDocumentTableInfoRequest {\n  /** 如果为第一次 url 上传的表格，传递该值 */\n  submit_web_id?: string;\n  /** 如果为第一次本地文件上传的表格，传递该值 */\n  tos_uri?: string;\n  /** 如果为已有 document 的表格，传递该值 */\n  document_id?: string;\n  /** 三方数据源的文件 id */\n  source_file_id?: string;\n  /** 文件类型 */\n  source_type?: DocumentSourceType;\n}\n\nexport interface GetDocumentTableInfoResponse {\n  code?: number;\n  msg?: string;\n  sheet_list?: Array<DocTableSheet>;\n  /** key: sheet_id -> list<DocTableColumn> */\n  table_meta?: Record<string, Array<DocTableColumn>>;\n  /** key: sheet_id -> list_preview_data, list idx: line_idx, list elem: key(sequence) -> value(cell_data) */\n  preview_data?: Record<string, Array<Record<string, string>>>;\n}\n\nexport interface ListDocumentData {\n  documents_info?: Array<DocumentInfo>;\n  total?: number;\n}\n\nexport interface ListDocumentRequest {\n  dataset_id?: string;\n  page?: number;\n  size?: number;\n  document_id?: string;\n}\n\nexport interface ListDocumentResponse {\n  code?: number;\n  msg?: string;\n  data?: ListDocumentData;\n}\n\nexport interface UpdateDocumentRequest {\n  document_id?: string;\n  status?: DocumentStatus;\n  document_name?: string;\n  /** 表格类型元数据信息 */\n  table_meta?: Array<DocTableColumn>;\n}\n\nexport interface UpdateDocumentResponse {\n  code?: number;\n  msg?: string;\n}\n\nexport interface UpdateWebRuleRequest {\n  document_id?: string;\n  update_type?: DocumentUpdateType;\n  update_interval?: number;\n}\n\nexport interface UpdateWebRuleResponse {\n  code?: number;\n  msg?: string;\n}\n/* eslint-enable */\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** table-local resegment unit steps */\nexport enum TableLocalResegmentStep {\n  CONFIGURATION,\n  PREVIEW,\n  PROCESSING,\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport enum TextLocalResegmentStep {\n  SEGMENT_CLEANER,\n  SEGMENT_PREVIEW,\n  EMBED_PROGRESS,\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport enum TextLocalAddUpdateStep {\n  UPLOAD_FILE,\n  SEGMENT_CLEANER,\n  SEGMENT_PREVIEW,\n  EMBED_PROGRESS,\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport enum TextCustomAddUpdateStep {\n  UPLOAD_CONTENT = 0,\n  SEGMENT_CLEANER = 1,\n  EMBED_PROGRESS = 2,\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { UploadImageButton } from '@coze-data/knowledge-common-components/text-knowledge-editor/features/editor-actions/upload-image';\nimport {\n  createEditorActionFeatureRegistry,\n  type EditorActionRegistry,\n} from '@coze-data/knowledge-common-components/text-knowledge-editor/features/editor-actions';\nexport const editorToolbarActionRegistry: EditorActionRegistry = (() => {\n  const editorToolbarActionFeatureRegistry = createEditorActionFeatureRegistry(\n    'editor-toolbar-actions',\n  );\n  editorToolbarActionFeatureRegistry.registerSome([\n    {\n      type: 'upload-image',\n      module: {\n        Component: UploadImageButton,\n      },\n    },\n  ]);\n  return editorToolbarActionFeatureRegistry;\n})();\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { UploadImageMenu } from '@coze-data/knowledge-common-components/text-knowledge-editor/features/editor-actions/upload-image';\nimport {\n  createEditorActionFeatureRegistry,\n  type EditorActionRegistry,\n} from '@coze-data/knowledge-common-components/text-knowledge-editor/features/editor-actions';\nexport const editorContextActionRegistry: EditorActionRegistry = (() => {\n  const editorContextActionFeatureRegistry = createEditorActionFeatureRegistry(\n    'editor-context-actions',\n  );\n  editorContextActionFeatureRegistry.registerSome([\n    {\n      type: 'upload-image',\n      module: {\n        Component: UploadImageMenu,\n      },\n    },\n  ]);\n  return editorContextActionFeatureRegistry;\n})();\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** table-local add and resegment unit steps */\nexport enum TableLocalStep {\n  UPLOAD,\n  CONFIGURATION,\n  PREVIEW,\n  PROCESSING,\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport enum TableCustomIncrementalStep {\n  UPLOAD,\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** table-custom add steps */\nexport enum TableCustomStep {\n  CREATE,\n}\n\nexport const TABLE_CUSTOM_WRAPPER_CLASS_NAME = 'table-custom-wrapper';\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport enum ImageFileAddStep {\n  Upload = 0,\n  Annotation,\n  Process,\n}\n\nexport enum ImageAnnotationType {\n  Auto = 'auto',\n  Manual = 'manual',\n}\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isArray, isObject, get } from 'lodash-es';\nimport {\n  FooterBtnStatus,\n  type FooterControlsProps,\n  type FooterControlProp,\n  type FooterBtnProps,\n  type FooterPrefixType,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { Button, Tooltip } from '@coze-arch/coze-design';\n\nimport styles from './index.module.less';\n\ninterface UploadFooterProps {\n  controls: FooterControlsProps;\n}\n\n/** Type assertion imported parameter yes no, button array */\nfunction isBtnArray(controls: unknown): controls is FooterBtnProps[] {\n  return !!controls && isArray(controls);\n}\n\nfunction isControlsObject(controls: unknown): controls is FooterControlProp {\n  return (\n    !!controls &&\n    isObject(controls) &&\n    !!get(controls, 'btns') &&\n    !!get(controls, 'prefix')\n  );\n}\n\nexport const UploadFooter = (props: UploadFooterProps) => {\n  const { controls } = props;\n  let btns: FooterBtnProps[] = [];\n  let prefix: FooterPrefixType;\n  if (isBtnArray(controls)) {\n    btns = controls;\n  }\n  if (isControlsObject(controls)) {\n    ({ btns, prefix } = controls);\n  }\n\n  return (\n    <div className={styles['upload-footer']}>\n      {prefix}\n      {btns.map(btnItem => {\n        const isShowHoverContent =\n          btnItem.disableHoverContent &&\n          btnItem.status === FooterBtnStatus.DISABLE;\n        const buttonNode = (\n          <Button\n            data-testid={btnItem.e2e}\n            key={btnItem.text}\n            disabled={btnItem.status === FooterBtnStatus.DISABLE}\n            loading={btnItem.status === FooterBtnStatus.LOADING}\n            color={btnItem.type || 'hgltplus'}\n            // theme={btnItem.theme || 'solid'}\n            onClick={btnItem.onClick}\n          >\n            {btnItem.text}\n          </Button>\n        );\n        if (!isShowHoverContent) {\n          return buttonNode;\n        }\n        return (\n          <Tooltip content={btnItem.disableHoverContent}>{buttonNode}</Tooltip>\n        );\n      })}\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { UploadImageButton } from '@coze-data/knowledge-common-components/text-knowledge-editor/features/editor-actions/upload-image';\nimport {\n  createEditorActionFeatureRegistry,\n  type EditorActionRegistry,\n} from '@coze-data/knowledge-common-components/text-knowledge-editor/features/editor-actions';\nexport const editorToolbarActionRegistry: EditorActionRegistry = (() => {\n  const editorToolbarActionFeatureRegistry = createEditorActionFeatureRegistry(\n    'editor-toolbar-actions',\n  );\n  editorToolbarActionFeatureRegistry.registerSome([\n    {\n      type: 'upload-image',\n      module: {\n        Component: UploadImageButton,\n      },\n    },\n  ]);\n  return editorToolbarActionFeatureRegistry;\n})();\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { UploadImageMenu } from '@coze-data/knowledge-common-components/text-knowledge-editor/features/editor-actions/upload-image';\nimport {\n  createEditorActionFeatureRegistry,\n  type EditorActionRegistry,\n} from '@coze-data/knowledge-common-components/text-knowledge-editor/features/editor-actions';\nexport const editorContextActionRegistry: EditorActionRegistry = (() => {\n  const editorContextActionFeatureRegistry = createEditorActionFeatureRegistry(\n    'editor-context-actions',\n  );\n  editorContextActionFeatureRegistry.registerSome([\n    {\n      type: 'upload-image',\n      module: {\n        Component: UploadImageMenu,\n      },\n    },\n  ]);\n  return editorContextActionFeatureRegistry;\n})();\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useMemo } from 'react';\n\nimport { getFormatTypeFromUnitType } from '@coze-data/utils';\nimport { useKnowledgeParams } from '@coze-data/knowledge-stores';\nimport {\n  type ProgressItem,\n  CreateUnitStatus,\n  UnitType,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { DocumentStatus } from '@coze-arch/idl/knowledge';\nimport { I18n } from '@coze-arch/i18n';\nimport { formatBytes } from '@coze-arch/bot-utils';\n\nimport { getTypeIcon } from '../upload-unit-table/utils';\nimport { ProcessProgressItem } from '../process-progress-item';\nimport { getFrequencyMap } from '../../utils';\nimport { ProcessStatus } from '../../types';\n\nconst INIT_PERCENT = 10;\n\nimport styles from './index.module.less';\n\ninterface UnitProgressProps {\n  progressList: ProgressItem[];\n  createStatus: CreateUnitStatus;\n}\n\nconst OneHundred = 100;\n\nfunction hoursToDays(hours: number | string) {\n  const curHours = typeof hours === 'string' ? parseInt(hours) : hours;\n  if (isNaN(curHours)) {\n    return 0;\n  }\n  return curHours / 24;\n}\n\nfunction formatRemainingTime(remainingSeconds: number) {\n  const minutes = Math.floor(remainingSeconds / 60);\n  const seconds = remainingSeconds % 60;\n  return {\n    minutes,\n    seconds,\n  };\n}\n\nconst renderSubText = (\n  status: ProcessStatus,\n  item: ProgressItem,\n  hasURLImport?: boolean,\n) => {\n  const statusDesc = item?.statusDesc || I18n.t('datasets_unit_upload_fail');\n  if (status === ProcessStatus.Failed) {\n    return (\n      <div\n        data-dtestid={`${KnowledgeE2e.CreateUnitListProgressName}.${'subText'}`}\n        className={'text-12px'}\n      >\n        {statusDesc}\n      </div>\n    );\n  }\n  let subDesc = '';\n  if (hasURLImport) {\n    // update frequency\n    const updateInterval = hoursToDays(item?.update_interval || 0);\n    subDesc = getFrequencyMap(updateInterval);\n  } else {\n    subDesc = formatBytes((item?.size || 0) as number);\n  }\n  return (\n    <div\n      data-dtestid={`${KnowledgeE2e.CreateUnitListProgressName}.${item?.name}`}\n      className={'coz-fg-secondary text-12px'}\n    >\n      {subDesc}\n    </div>\n  );\n};\n\nexport const UnitProgress: React.FC<UnitProgressProps> = ({\n  progressList,\n  createStatus,\n}) => {\n  const params = useKnowledgeParams();\n\n  const headerTitle = useMemo(() => {\n    let msg: string = I18n.t('datasets_createFileModel_step4_processing');\n    if (createStatus === CreateUnitStatus.TASK_FINISH) {\n      const allFailed = progressList.every(\n        status => status.status === DocumentStatus.Failed,\n      );\n\n      if (allFailed) {\n        msg = I18n.t('datasets_createFileModel_step4_failed');\n      } else {\n        msg = I18n.t('datasets_createFileModel_step4_Finish');\n      }\n    }\n    return msg;\n  }, [createStatus, progressList]);\n\n  const unitType = params.type as UnitType;\n  const formatType = getFormatTypeFromUnitType(unitType);\n  const hasURLImport = [\n    UnitType.TABLE_API,\n    UnitType.TABLE_FEISHU,\n    UnitType.TABLE_GOOGLE_DRIVE,\n    UnitType.TABLE_LARK,\n    UnitType.TEXT_FEISHU,\n    UnitType.TEXT_LARK,\n    UnitType.TEXT_NOTION,\n    UnitType.TEXT_URL,\n    UnitType.TEXT_GOOGLE_DRIVE,\n  ].includes(unitType);\n\n  const percentFormat = (percent: number, remainingTime: number) => {\n    const { minutes, seconds } = formatRemainingTime(remainingTime as number);\n    const remainingTimeText = I18n.t('knowledge_upload_remaining_time_text', {\n      minutes,\n      seconds,\n    });\n\n    return percent < OneHundred\n      ? `${percent}% ${\n          Number(remainingTime) > 0 ? `(${remainingTimeText})` : ''\n        }`\n      : null;\n  };\n\n  return (\n    <div className={styles['embed-progress']}>\n      <div className={styles['progress-info']}>\n        <div\n          className={styles.text}\n          data-testid={KnowledgeE2e.CreateUnitProgressTitle}\n        >\n          {headerTitle}\n        </div>\n        <div className={styles['progress-list']}>\n          {progressList.map(item => {\n            const { status } = item;\n            const getProcessStatus = () => {\n              if (\n                [DocumentStatus.Failed, DocumentStatus.AuditFailed].includes(\n                  status,\n                )\n              ) {\n                return ProcessStatus.Failed;\n              }\n\n              if (\n                [\n                  DocumentStatus.Processing,\n                  DocumentStatus.Resegment,\n                  DocumentStatus.Refreshing,\n                ].includes(status)\n              ) {\n                return ProcessStatus.Processing;\n              }\n\n              if (\n                [DocumentStatus.Enable, DocumentStatus.Disable].includes(status)\n              ) {\n                return ProcessStatus.Complete;\n              }\n\n              return ProcessStatus.Processing;\n            };\n\n            const curStatus = getProcessStatus();\n            const percent = item?.progress || INIT_PERCENT;\n            return (\n              <ProcessProgressItem\n                className={styles['data-processing']}\n                key={item?.documentId}\n                mainText={item?.name}\n                subText={renderSubText(curStatus, item, hasURLImport)}\n                tipText={renderSubText(curStatus, item, hasURLImport)}\n                status={curStatus}\n                avatar={getTypeIcon({\n                  type: item?.type,\n                  url: item?.url,\n                  formatType,\n                })}\n                percent={percent}\n                percentFormat={percentFormat(\n                  percent,\n                  item?.remaining_time as number,\n                )}\n                actions={[\n                  ProcessStatus.Complete ? (\n                    <div\n                      className={styles['finish-text']}\n                      data-testid={`${\n                        KnowledgeE2e.CreateUnitListProgressSuccessIcon\n                      }.${item?.name || ''}`}\n                    >\n                      {I18n.t('datasets_unit_process_success')}\n                    </div>\n                  ) : null,\n                ]}\n              />\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n};\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { IllustrationNoResult } from '@douyinfe/semi-illustrations';\nimport { UIEmpty } from '@coze-arch/bot-semi';\n\nimport styles from './index.module.less';\n\ninterface ConfigurationErrorProps {\n  fetchTableInfo: () => void;\n}\nexport const ConfigurationError = (props: ConfigurationErrorProps) => {\n  const { fetchTableInfo } = props;\n  return (\n    <UIEmpty\n      className={styles['load-failure']}\n      empty={{\n        title: 'Read failure',\n        description: '',\n        icon: <IllustrationNoResult></IllustrationNoResult>,\n        btnText: 'Retry',\n        btnOnClick: fetchTableInfo,\n      }}\n    />\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { I18n } from '@coze-arch/i18n';\nimport { Spin } from '@coze-arch/coze-design';\n\nimport styles from './index.module.less';\n\nexport const ConfigurationLoading = () => (\n  <div className={styles.loading}>\n    <Spin spinning></Spin>\n    <div className={styles['loading-content']}>\n      {I18n.t('knowledge_1221_03')}\n    </div>\n  </div>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { I18n } from '@coze-arch/i18n';\nimport { Banner } from '@coze-arch/coze-design';\n\nexport const ConfigurationBanner = () => (\n  <Banner\n    style={{ marginTop: '10px' }}\n    type=\"warning\"\n    description={I18n.t('knowledge_limit_20')}\n  />\n);\n","\n      import API from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useState, type PropsWithChildren } from 'react';\n\nimport classNames from 'classnames';\nimport { IconCozArrowRight } from '@coze-arch/coze-design/icons';\nimport { Collapsible, Typography } from '@coze-arch/coze-design';\n\nexport interface CollapsePanelProps extends PropsWithChildren {\n  header: React.ReactNode;\n  keepDOM?: boolean;\n}\n\n/**\n * A collapsible panel with Collapsible for better UI design\n */\nexport function CollapsePanel({\n  header,\n  keepDOM,\n  children,\n}: CollapsePanelProps) {\n  const [open, setOpen] = useState(true);\n\n  return (\n    <div className=\"mb-[4px]\">\n      <div\n        className={classNames(\n          'h-[40px] flex items-center gap-[4px] shrink-0 rounded',\n          'cursor-pointer hover:coz-mg-secondary-hovered active:coz-mg-secondary-pressed',\n        )}\n        onClick={() => setOpen(!open)}\n      >\n        <IconCozArrowRight\n          className={classNames('coz-fg-secondary text-[14px] m-[4px]', {\n            'rotate-90': open,\n          })}\n        />\n        <Typography.Text fontSize=\"14px\" weight={400}>\n          {header}\n        </Typography.Text>\n      </div>\n      <Collapsible\n        className=\"ml-[26px] [&>div]:pt-[4px]\"\n        isOpen={open}\n        keepDOM={keepDOM}\n      >\n        {children}\n      </Collapsible>\n    </div>\n  );\n}\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type PropsWithChildren } from 'react';\n\nimport classNames from 'classnames';\nimport { RadioGroup, type RadioGroupProps } from '@coze-arch/coze-design';\n\nimport styles from './index.module.less';\n\nexport type CardRadioGroupProps<T = unknown> = PropsWithChildren<\n  Pick<RadioGroupProps, 'value' | 'className'>\n> & {\n  onChange?: (value: T) => void;\n};\n\n/**\n * Always use the card style and conform to the UI design style {@link RadioGroup}\n */\nexport function CardRadioGroup<T = unknown>({\n  value,\n  onChange,\n  className,\n  children,\n}: CardRadioGroupProps<T>) {\n  return (\n    <RadioGroup\n      type=\"pureCard\"\n      direction=\"vertical\"\n      value={value}\n      onChange={e => {\n        onChange?.(e.target.value as T);\n      }}\n      className={classNames(styles['card-radio-group'], className)}\n    >\n      {children}\n    </RadioGroup>\n  );\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type StateCreator } from 'zustand';\nimport {\n  CreateUnitStatus,\n  type ProgressItem,\n  type UnitItem,\n} from '@coze-data/knowledge-resource-processor-core';\nimport {\n  type OpenSearchConfig,\n  StorageLocation,\n} from '@coze-arch/idl/knowledge';\n\nimport { SegmentMode, type CustomSegmentRule } from '@/types';\nimport { defaultCustomSegmentRule } from '@/constants';\n\nimport { type UploadTextStore, type UploadTextState } from './interface';\n\nexport const getDefaultTextState: () => UploadTextState<number> = () => ({\n  /** base store */\n  createStatus: CreateUnitStatus.UPLOAD_UNIT,\n  progressList: [],\n  unitList: [],\n  currentStep: 0,\n  /** text store */\n  segmentRule: defaultCustomSegmentRule,\n  segmentMode: SegmentMode.AUTO,\n  enableStorageStrategy: false,\n  storageLocation: StorageLocation.Default,\n  openSearchConfig: {},\n  testConnectionSuccess: false,\n});\n\nexport const createTextSlice: StateCreator<UploadTextStore<number>> = set => ({\n  /** defaultState */\n  ...getDefaultTextState(),\n  /** base store action */\n  setCurrentStep: (currentStep: number) => {\n    set({ currentStep });\n  },\n  setCreateStatus: (createStatus: CreateUnitStatus) => {\n    set({ createStatus });\n  },\n  setProgressList: (progressList: ProgressItem[]) => {\n    set({ progressList });\n  },\n  setUnitList: (unitList: UnitItem[]) => {\n    set({ unitList });\n  },\n  /** text store action */\n  setSegmentRule: (rule: CustomSegmentRule) => set({ segmentRule: rule }),\n  setSegmentMode: (mode: SegmentMode) => set({ segmentMode: mode }),\n  setEnableStorageStrategy: (enableStorageStrategy: boolean) => {\n    set({ enableStorageStrategy });\n  },\n  setStorageLocation: (storageLocation: StorageLocation) => {\n    set({ storageLocation });\n  },\n  setOpenSearchConfig: (openSearchConfig: OpenSearchConfig) => {\n    set({ openSearchConfig });\n  },\n  setTestConnectionSuccess: (testConnectionSuccess: boolean) => {\n    set({ testConnectionSuccess });\n  },\n  /** reset state */\n  reset: () => {\n    set(getDefaultTextState());\n  },\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { merge } from 'lodash-es';\nimport { ParsingType } from '@coze-arch/idl/knowledge';\n\nimport {\n  createTextSlice,\n  getDefaultTextState,\n} from '@/features/knowledge-type/text/slice';\n\nimport { TextResegmentStep } from '../constants';\nimport {\n  type UploadTextResegmentState,\n  type UploadTextResegmentStore,\n} from './types';\n\nconst getDefaultTextResegmentState: () => UploadTextResegmentState = () => ({\n  ...getDefaultTextState(),\n  currentStep: TextResegmentStep.SEGMENT_CLEANER,\n  parsingStrategy: {\n    parsing_type: ParsingType.AccurateParsing,\n    image_extraction: true,\n    image_ocr: false,\n    table_extraction: true,\n  },\n  filterStrategy: [],\n  indexStrategy: {},\n  documentInfo: null,\n  levelChunkStrategy: {\n    maxLevel: 3,\n  },\n});\n\nexport const createTextResegmentStore = () =>\n  create<UploadTextResegmentStore>()(\n    devtools(\n      (set, get, ...arg) => ({\n        ...createTextSlice(set, get, ...arg),\n        // overwrite\n        ...getDefaultTextResegmentState(),\n        // /** reset state */\n        reset: () => {\n          set(getDefaultTextResegmentState());\n        },\n        setFilterStrategy: filterStrategy => {\n          set({ filterStrategy }, false, 'setFilterStrategy');\n        },\n        setIndexStrategyByMerge: indexStrategy => {\n          set(\n            { indexStrategy: merge({}, get().indexStrategy, indexStrategy) },\n            false,\n            'setIndexStrategyByMerge',\n          );\n        },\n        setParsingStrategyByMerge: parsingStrategy => {\n          set(\n            {\n              parsingStrategy: merge(\n                {},\n                get().parsingStrategy,\n                parsingStrategy,\n              ),\n            },\n            false,\n            'setParsingStrategyByMerge',\n          );\n        },\n        setDocumentInfo: documentInfo =>\n          set({ documentInfo }, false, 'setDocumentInfo'),\n        setLevelChunkStrategy: (key, value) => {\n          set(state => ({\n            ...state,\n            levelChunkStrategy: {\n              ...state.levelChunkStrategy,\n              [key]: value,\n            },\n          }));\n        },\n      }),\n      {\n        enabled: IS_DEV_MODE,\n        name: 'Coz.Data.TextResegment',\n      },\n    ),\n  );\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useRequest } from 'ahooks';\nimport { useKnowledgeParams } from '@coze-data/knowledge-stores';\nimport { DataNamespace, dataReporter } from '@coze-data/reporter';\nimport { REPORT_EVENTS } from '@coze-arch/report-events';\nimport type {\n  CreateDocumentRequest,\n  CreateDocumentResponse,\n  ListDocumentResponse,\n  ListDocumentRequest,\n} from '@coze-arch/bot-api/knowledge';\nimport { KnowledgeApi } from '@coze-arch/bot-api';\n\nexport const useListDocumentReq = (\n  onSuccess?: (res: ListDocumentResponse) => void,\n  onError?: () => void,\n) => {\n  const { run: listDocument } = useRequest(\n    async (params: ListDocumentRequest) => {\n      const res = await KnowledgeApi.ListDocument(params);\n      onSuccess && onSuccess(res);\n    },\n    {\n      onError: error => {\n        dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n          eventName: REPORT_EVENTS.KnowledgeGetTableInfo,\n          error: error as Error,\n        });\n        onError && onError();\n      },\n      manual: true,\n    },\n  );\n\n  return listDocument;\n};\n\nexport const useCreateDocumentReq = (options?: {\n  onSuccess?: (res: CreateDocumentResponse) => void;\n  onFail?: (error: Error) => void;\n}) => {\n  const params = useKnowledgeParams();\n  const { run: createDocument } = useRequest(\n    async (req: CreateDocumentRequest) => {\n      const res = await KnowledgeApi.CreateDocument({\n        dataset_id: params.datasetID,\n        ...req,\n      });\n      options?.onSuccess && options.onSuccess(res);\n    },\n    {\n      onError: error => {\n        dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n          eventName: REPORT_EVENTS.KnowledgeCreateDocument,\n          error,\n        });\n        options?.onFail && options.onFail(error);\n      },\n      manual: true,\n    },\n  );\n  return createDocument;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from 'classnames';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport {\n  Checkbox,\n  Select,\n  CozInputNumber,\n  Form,\n  Input,\n  CheckboxGroup,\n  Radio,\n  type SelectProps,\n} from '@coze-arch/coze-design';\n\nimport {\n  PreProcessRule,\n  SeperatorType,\n  type CustomSegmentRule,\n  SegmentMode,\n} from '@/types';\nimport { getSeperatorOptionList } from '@/constants';\n\nconst SEGMENT_MIN = 100;\nconst SEGMENT_MAX = 5000;\nconst OVERLAP_MAX = 90;\nconst OVERLAP_MIN = 0;\n\ninterface CustomSegmentProps {\n  segmentMode: SegmentMode;\n  segmentRule: CustomSegmentRule;\n  onChange: (params: {\n    segmentMode?: SegmentMode;\n    segmentRule?: CustomSegmentRule;\n  }) => void;\n}\n\nfunction getMaxTokens(maxTokens: number): number {\n  if (maxTokens < SEGMENT_MIN) {\n    return SEGMENT_MIN;\n  }\n  if (maxTokens > SEGMENT_MAX) {\n    return SEGMENT_MAX;\n  }\n  return maxTokens;\n}\n\nconst CustomSegmentContent = ({\n  segmentRule,\n  onChange,\n}: {\n  segmentRule: CustomSegmentRule;\n  onChange: (segmentRule: CustomSegmentRule) => void;\n}) => {\n  const { separator, maxTokens, preProcessRules, overlap } = segmentRule;\n\n  const handleSelectChange: SelectProps['onChange'] = value => {\n    if (typeof value === 'string') {\n      onChange({\n        ...segmentRule,\n        separator: {\n          type: value as SeperatorType,\n          customValue: separator.customValue,\n        },\n      });\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col gap-[12px] mt-12px\">\n      <div data-testid={KnowledgeE2e.ResegmentCustomIdentifierSelect}>\n        <Form.Label required>{I18n.t('datasets_Custom_segmentID')}</Form.Label>\n        <Select\n          placeholder={I18n.t('datasets_custom_segmentID_placeholder')}\n          optionList={getSeperatorOptionList()}\n          className=\"w-full\"\n          value={separator.type}\n          onChange={handleSelectChange}\n        />\n        {separator.type === SeperatorType.CUSTOM ? (\n          <Input\n            className=\"w-full mt-[4px]\"\n            value={separator.customValue}\n            onChange={(v: string) => {\n              onChange({\n                ...segmentRule,\n                separator: {\n                  type: separator.type,\n                  customValue: v,\n                },\n              });\n            }}\n            placeholder={I18n.t('datasets_custom_segmentID_placeholder')}\n          />\n        ) : null}\n      </div>\n      <div data-testid={KnowledgeE2e.ResegmentCustomMaxLenInput}>\n        <Form.Label required>{I18n.t('datasets_Custom_maxLength')}</Form.Label>\n        <CozInputNumber\n          value={maxTokens}\n          onChange={v => {\n            onChange({\n              ...segmentRule,\n              maxTokens: getMaxTokens(Number(v)),\n            });\n          }}\n          className=\"w-full\"\n          min={SEGMENT_MIN}\n          max={SEGMENT_MAX}\n        />\n      </div>\n      <div>\n        <Form.Label required>{I18n.t('kl_write_014')}</Form.Label>\n        <CozInputNumber\n          value={overlap}\n          onChange={v => {\n            onChange({\n              ...segmentRule,\n              overlap: Number(v),\n            });\n          }}\n          className=\"w-full\"\n          max={OVERLAP_MAX}\n          min={OVERLAP_MIN}\n        />\n      </div>\n      <div data-testid={KnowledgeE2e.ResegmentCustomRuleText}>\n        <Form.Label>{I18n.t('datasets_Custom_rule')}</Form.Label>\n        <CheckboxGroup\n          value={preProcessRules}\n          className=\"w-full gap-[4px]\"\n          aria-label={I18n.t('datasets_Custom_rule')}\n          onChange={(v: PreProcessRule[]) => {\n            onChange({\n              ...segmentRule,\n              preProcessRules: v,\n            });\n          }}\n        >\n          <Checkbox value={PreProcessRule.REMOVE_SPACES}>\n            {I18n.t('datasets_Custom_rule_replace')}\n          </Checkbox>\n          <Checkbox value={PreProcessRule.REMOVE_EMAILS}>\n            {I18n.t('datasets_Custom_rule_delete')}\n          </Checkbox>\n        </CheckboxGroup>\n      </div>\n    </div>\n  );\n};\n\nexport const CustomSegment = ({\n  segmentMode,\n  segmentRule,\n  onChange,\n}: CustomSegmentProps) => (\n  <Radio\n    data-testid={KnowledgeE2e.CreateUnitResegmentCustomRadio}\n    className={classNames(\n      segmentMode === SegmentMode.CUSTOM ? 'custom-wrapper' : '',\n    )}\n    value={SegmentMode.CUSTOM}\n    extra={\n      <>\n        {I18n.t('datasets_createFileModel_step3_customDescription')}\n        {segmentMode === SegmentMode.CUSTOM && (\n          <CustomSegmentContent\n            segmentRule={segmentRule}\n            onChange={newSegmentRule => {\n              onChange({ segmentRule: newSegmentRule });\n            }}\n          />\n        )}\n      </>\n    }\n  >\n    {I18n.t('datasets_createFileModel_step3_custom')}\n  </Radio>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport { Radio } from '@coze-arch/coze-design';\n\nimport { SegmentMode } from '@/types';\n\nexport const AutomaticCleaning = () => (\n  <Radio\n    data-testid={KnowledgeE2e.CreateUnitResegmentAutoRadio}\n    value={SegmentMode.AUTO}\n    extra={I18n.t('datasets_createFileModel_step3_autoDescription')}\n  >\n    {I18n.t('datasets_createFileModel_step3_auto')}\n  </Radio>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { ParsingStrategy } from '@coze-arch/idl/knowledge';\nimport { I18n } from '@coze-arch/i18n';\nimport type { FormApi } from '@coze-arch/coze-design';\n\nimport { type SegmentMode, type CustomSegmentRule } from '@/types';\nimport { CustomSegment } from '@/features/segment-strategys/segment-strategy/custom';\nimport { AutomaticCleaning } from '@/features/segment-strategys/segment-strategy/automatic-cleaning';\nimport type { PDFFile } from '@/features/segment-strategys/document-parse-strategy/precision-parsing/document-parse-form/pdf-filter/filter-modal';\nimport type { DocumentParseFormValue } from '@/features/segment-strategys/document-parse-strategy/precision-parsing/document-parse-form';\nimport type { PDFDocumentFilterValue } from '@/features/knowledge-type/text/interface';\nimport { defaultCustomSegmentRule } from '@/constants';\nimport { CardRadioGroup, CollapsePanel } from '@/components';\n\nexport interface OnChangeProps {\n  segmentRule?: CustomSegmentRule;\n  segmentMode?: SegmentMode;\n  parsingStrategy?: ParsingStrategy;\n  // indexStrategy?: IndexStrategy;\n  filterStrategy?: PDFDocumentFilterValue[];\n}\n\ninterface SegmentConfigProps {\n  segmentMode: SegmentMode;\n  segmentRule?: CustomSegmentRule;\n  parsingStrategy?: ParsingStrategy;\n  filterStrategy?: PDFDocumentFilterValue[];\n  onChange: (params: OnChangeProps) => void;\n  pdfList?: PDFFile[];\n  getParseFormApi?: (formApi: FormApi<DocumentParseFormValue>) => void;\n}\n\nexport const SegmentConfig = ({\n  segmentMode,\n  segmentRule = defaultCustomSegmentRule,\n  onChange,\n}: SegmentConfigProps) => (\n  <>\n    <CollapsePanel header={I18n.t('kl_write_011')}>\n      <CardRadioGroup<SegmentMode>\n        value={segmentMode}\n        onChange={value => {\n          onChange({ segmentMode: value, segmentRule });\n        }}\n      >\n        <AutomaticCleaning />\n        <CustomSegment\n          segmentMode={segmentMode}\n          segmentRule={segmentRule}\n          onChange={onChange}\n        />\n      </CardRadioGroup>\n    </CollapsePanel>\n  </>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable complexity */\nimport { type FC, useEffect, useRef, useState } from 'react';\n\nimport { useShallow } from 'zustand/react/shallow';\nimport { isUndefined } from 'lodash-es';\nimport { useKnowledgeParams } from '@coze-data/knowledge-stores';\nimport { type ContentProps } from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { type ParsingStrategy } from '@coze-arch/idl/knowledge';\nimport { I18n } from '@coze-arch/i18n';\nimport { type FormApi } from '@coze-arch/coze-design';\n\nimport { validateCommonDocResegmentStep } from '@/utils/validate-common-doc-next-step';\nimport { getSegmentCleanerParams } from '@/utils';\nimport { SegmentMode } from '@/types';\nimport { useListDocumentReq } from '@/services';\nimport { type PDFFile } from '@/features/segment-strategys/document-parse-strategy/precision-parsing/document-parse-form/pdf-filter/filter-modal';\nimport { type DocumentParseFormValue } from '@/features/segment-strategys/document-parse-strategy/precision-parsing/document-parse-form';\nimport {\n  type OnChangeProps,\n  SegmentConfig,\n} from '@/features/segment-config/base';\nimport { type UploadTextResegmentStore } from '@/features/resegment/text/store';\nimport { TextResegmentStep } from '@/features/resegment/text/constants';\nimport { type PDFDocumentFilterValue } from '@/features/knowledge-type/text/interface';\n\nexport const TextSegment: FC<\n  ContentProps<UploadTextResegmentStore>\n> = props => {\n  const [pdfList, setPDFList] = useState<PDFFile[]>([]);\n  const { useStore, footer } = props;\n  const parseFormApi = useRef<FormApi<DocumentParseFormValue>>();\n  const {\n    // common store\n    setCurrentStep,\n    // text store\n    segmentRule,\n    segmentMode,\n    parsingStrategy,\n    filterStrategy,\n  } = useStore(\n    useShallow(state => ({\n      setCurrentStep: state.setCurrentStep,\n      segmentRule: state.segmentRule,\n      segmentMode: state.segmentMode || SegmentMode.AUTO,\n      parsingStrategy: state.parsingStrategy,\n      filterStrategy: state.filterStrategy,\n    })),\n  );\n\n  const {\n    setSegmentMode,\n    setParsingStrategyByMerge,\n    setSegmentRule,\n    setFilterStrategy,\n  } = useStore.getState();\n\n  const params = useKnowledgeParams();\n\n  // const { data: vectorModelList } = useRequest(\n  //   async () => {\n  //     const res = await KnowledgeApi.ListModel();\n  //     return res.models.map(m => ({\n  //       id: m.name ?? '',\n  //       name: m.name ?? '',\n  //     }));\n  //   },\n  //   {\n  //     onSuccess: response => {\n  //       indexFormApi.current?.setValue('model', response.at(0)?.id);\n  //     },\n  //   },\n  // );\n\n  const listDocumentReq = useListDocumentReq(res => {\n    const resDocumentInfo = res.document_infos?.[0];\n    if (!resDocumentInfo) {\n      return;\n    }\n    const docSegmentParams = getSegmentCleanerParams(resDocumentInfo);\n    if (!docSegmentParams) {\n      return;\n    }\n    const { docInfo, ...restParams } = docSegmentParams;\n    setSegmentRule(restParams.segmentRule);\n    setSegmentMode(restParams.segmentMode);\n    setParsingStrategyByMerge(docInfo.parsing_strategy ?? {});\n    parseFormApi.current?.setValues(docInfo.parsing_strategy ?? {});\n    const isPDF = docInfo.type?.toLocaleLowerCase() === 'pdf';\n    if (docInfo.filter_strategy && isPDF) {\n      const [\n        topPercent = 0,\n        rightPercent = 0,\n        bottomPercent = 0,\n        leftPercent = 0,\n      ] = docInfo.filter_strategy.filter_box_position ?? [];\n      const filterData = [\n        {\n          uri: docInfo.tos_uri ?? '',\n          filterPagesConfig:\n            docInfo.filter_strategy?.filter_page?.map(pageIndex => ({\n              pageIndex,\n              isFilter: true,\n            })) ?? [],\n          cropperSizePercent: {\n            topPercent,\n            rightPercent,\n            bottomPercent,\n            leftPercent,\n          },\n        },\n      ];\n      setFilterStrategy(filterData);\n      parseFormApi.current?.setValue('filterStrategy', filterData);\n      setPDFList([\n        {\n          uri: docInfo.tos_uri ?? '',\n          url: docInfo.web_url ?? '',\n          name: docInfo.name ?? '',\n        },\n      ]);\n    }\n  });\n\n  useEffect(() => {\n    listDocumentReq({\n      dataset_id: params?.datasetID || '',\n      document_ids: [params?.docID || ''],\n    });\n  }, []);\n\n  return (\n    <>\n      <SegmentConfig\n        pdfList={pdfList}\n        segmentRule={segmentRule}\n        segmentMode={segmentMode}\n        parsingStrategy={parsingStrategy}\n        filterStrategy={filterStrategy}\n        getParseFormApi={api => {\n          parseFormApi.current = api;\n        }}\n        onChange={({\n          segmentRule: rule,\n          segmentMode: mode,\n          parsingStrategy: inputParsingStrategy,\n          filterStrategy: inputFilterStrategy,\n        }: OnChangeProps) => {\n          rule !== undefined && setSegmentRule(rule);\n          mode !== undefined && setSegmentMode(mode);\n          if (!isUndefined(inputParsingStrategy)) {\n            setParsingStrategyByMerge(inputParsingStrategy as ParsingStrategy);\n          }\n          if (!isUndefined(inputFilterStrategy)) {\n            setFilterStrategy(inputFilterStrategy as PDFDocumentFilterValue[]);\n          }\n        }}\n      />\n      {footer?.([\n        {\n          e2e: KnowledgeE2e.ResegmentUploadUnitNextBtn,\n          type: 'hgltplus',\n          theme: 'solid',\n          onClick: () => setCurrentStep(TextResegmentStep.EMBED_PROGRESS),\n          text: I18n.t('datasets_createFileModel_NextBtn'),\n          status: validateCommonDocResegmentStep(segmentMode, segmentRule),\n        },\n      ])}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type DocumentInfo,\n  DocumentSource,\n  FormatType,\n} from '@coze-arch/idl/knowledge';\n\nexport const isLocalTextDocument = (document: DocumentInfo) =>\n  document.format_type === FormatType.Text &&\n  document.source_type === DocumentSource.Document;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FilterPageConfig } from '@/features/knowledge-type/text/interface';\n\nexport const mapPDFFilterConfig = (list: FilterPageConfig[]) =>\n  list\n    .map(config => {\n      if (config.isFilter) {\n        return config.pageIndex;\n      }\n      return null;\n    })\n    .filter((page): page is number => typeof page === 'number');\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ResegmentRequest } from '@coze-arch/idl/knowledge';\n\nimport { type PDFDocumentFilterValue } from '@/features/knowledge-type/text/interface';\n\nimport { mapPDFFilterConfig } from './map-pdf-filter-config';\n\nexport const convertFilterStrategyToParams = (\n  filterValue: PDFDocumentFilterValue | undefined,\n): ResegmentRequest => {\n  if (!filterValue) {\n    return {};\n  }\n  // const { topPercent, rightPercent, bottomPercent, leftPercent } =\n  //   filterValue.cropperSizePercent;\n  return {\n    filter_strategy: {\n      // filter_box_position: [\n      //   topPercent,\n      //   rightPercent,\n      //   bottomPercent,\n      //   leftPercent,\n      // ],\n      filter_page: mapPDFFilterConfig(filterValue.filterPagesConfig),\n    },\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useRef, useEffect } from 'react';\n\nimport { type StoreApi, type UseBoundStore } from 'zustand';\nimport { isString } from 'lodash-es';\nimport { useRequest } from 'ahooks';\nimport { useKnowledgeParams } from '@coze-data/knowledge-stores';\nimport { DataNamespace, dataReporter } from '@coze-data/reporter';\nimport {\n  CheckedStatus,\n  CreateUnitStatus,\n  type UploadBaseAction,\n  type UploadBaseState,\n  type ProgressItem,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { REPORT_EVENTS } from '@coze-arch/report-events';\nimport {\n  type DocumentFileInfo,\n  DocumentStatus,\n} from '@coze-arch/bot-api/memory';\nimport {\n  type CreateDocumentRequest,\n  type CreateDocumentResponse,\n} from '@coze-arch/bot-api/knowledge';\nimport { KnowledgeApi } from '@coze-arch/bot-api';\n\nimport { reportFailGetProgress, isStopPolling, clearPolling } from '../utils';\nimport { useListDocumentReq } from '../services';\nimport { POLLING_TIME } from '../constants';\n\nexport const usePollingTaskProgress = () => {\n  const pollingId = useRef<number>();\n  useEffect(\n    () => () => {\n      clearPolling(pollingId);\n    },\n    [],\n  );\n  const pollingTaskProgressInternal = async (\n    documentList: DocumentFileInfo[],\n    options: {\n      onProgressing: (progressList: ProgressItem[]) => void;\n      onFinish: () => void;\n    },\n  ) => {\n    const { data = [] } = await KnowledgeApi.GetDocumentProgress({\n      document_ids: documentList.map(item => item.document_id).filter(isString),\n    });\n    const updatedProgressList: ProgressItem[] = documentList.map(\n      ({ document_id: documentId, uri }) => {\n        const item = data.find(d => d.document_id === documentId);\n        return {\n          ...item,\n          documentId: documentId ?? '',\n          progress: item?.progress ?? 0,\n          name: item?.document_name ?? '',\n          uri: uri ?? '',\n          status: item?.status ?? DocumentStatus.Processing,\n          statusDesc: item?.status_descript ?? '',\n          remainingTime: (item?.remaining_time ?? 0) as number,\n        };\n      },\n    );\n    reportFailGetProgress(data);\n    options.onProgressing(updatedProgressList);\n\n    if (isStopPolling(data)) {\n      options.onFinish();\n      return;\n    }\n    pollingId.current = window.setTimeout(\n      () => pollingTaskProgressInternal(documentList, options),\n      POLLING_TIME,\n    );\n  };\n  return pollingTaskProgressInternal;\n};\n\nexport const useCreateDocument = <\n  T extends UploadBaseState<number> & UploadBaseAction<number>,\n>(\n  useStore: UseBoundStore<StoreApi<T>>,\n  options?: {\n    onSuccess?: (res: CreateDocumentResponse) => void;\n    onFail?: (error: Error) => void;\n  },\n) => {\n  const params = useKnowledgeParams();\n  const setCreateStatus = useStore(state => state.setCreateStatus);\n  const setProgressList = useStore(state => state.setProgressList);\n  const pollingTaskProgress = usePollingTaskProgress();\n  const { run: createDocument } = useRequest(\n    async (reqParams: CreateDocumentRequest) => {\n      try {\n        const res = await KnowledgeApi.CreateDocument({\n          dataset_id: params.datasetID,\n          ...reqParams,\n        });\n        const { document_infos = [] } = res;\n        if (document_infos.length) {\n          await pollingTaskProgress(document_infos, {\n            onProgressing: (progressList: ProgressItem[]) => {\n              setProgressList(progressList);\n            },\n            onFinish: () => {\n              setCreateStatus(CreateUnitStatus.TASK_FINISH);\n            },\n          });\n        }\n        options?.onSuccess && options.onSuccess(res);\n      } catch (e) {\n        // Failed to create, default rendering of processed data\n        const error = e as Error;\n        const fakeProgressList = reqParams?.document_bases?.map(item => ({\n          ...item,\n          name: item?.name || 'unknown',\n          documentId: '',\n          uri: '',\n          remainingTime: 0,\n          remaining_time: 0,\n          progress: 100,\n          status: DocumentStatus.Failed,\n          statusDesc: error?.message,\n          format_type: reqParams?.format_type,\n        }));\n        setProgressList(fakeProgressList || []);\n        dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n          eventName: REPORT_EVENTS.KnowledgeCreateDocument,\n          error,\n        });\n        options?.onFail && options.onFail(error);\n      }\n    },\n    {\n      onError: error => {\n        dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n          eventName: REPORT_EVENTS.KnowledgeCreateDocument,\n          error,\n        });\n        options?.onFail && options.onFail(error);\n      },\n      manual: true,\n    },\n  );\n  return createDocument;\n};\n\nexport const useTextDisplaySegmentStepCheck = (): [\n  React.ReactElement | undefined,\n  CheckedStatus,\n] => {\n  const checkStatus = useRef<CheckedStatus>(CheckedStatus.SIMPLE);\n  const listDocumentReq = useListDocumentReq(res => {\n    if (res?.total === 0) {\n      checkStatus.current = CheckedStatus.HAD_SEGMENT_RULES;\n    }\n  });\n  const params = useKnowledgeParams();\n\n  useEffect(() => {\n    if (params.datasetID) {\n      listDocumentReq({\n        dataset_id: params.datasetID,\n      });\n    }\n  }, [params.datasetID]);\n\n  return [undefined, checkStatus.current];\n};\n\nexport const useImageDisplayAnnotationStepCheck = (): [\n  React.ReactElement | undefined,\n  CheckedStatus,\n] => {\n  const checkStatus = useRef<CheckedStatus>(CheckedStatus.SIMPLE);\n  const listDocumentReq = useListDocumentReq(res => {\n    if (res?.total === 0) {\n      checkStatus.current = CheckedStatus.HAD_SEGMENT_RULES;\n    }\n  });\n  const params = useKnowledgeParams();\n\n  useEffect(() => {\n    if (params.datasetID) {\n      listDocumentReq({\n        dataset_id: params.datasetID,\n      });\n    }\n  }, [params.datasetID]);\n\n  return [undefined, checkStatus.current];\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type UnitItem } from '@coze-data/knowledge-resource-processor-core';\nimport { type DocumentTaskInfo } from '@coze-arch/bot-api/memory';\nimport {\n  type ChunkStrategy,\n  ChunkType,\n  DocumentSource,\n  FormatType,\n} from '@coze-arch/bot-api/knowledge';\n\nimport {\n  SegmentMode,\n  SeperatorType,\n  PreProcessRule,\n  type CustomSegmentRule,\n} from '@/types';\n\nimport { type LevelChunkStrategy } from './interface';\n\nexport const getCustomValues = (\n  segmentMode: SegmentMode,\n  segmentRule: CustomSegmentRule,\n  levelChunkStrategy?: LevelChunkStrategy,\n): ChunkStrategy => {\n  if (segmentMode === SegmentMode.AUTO) {\n    return {\n      chunk_type: ChunkType.DefaultChunk,\n    };\n  }\n  if (segmentMode === SegmentMode.LEVEL) {\n    return {\n      chunk_type: ChunkType.LevelChunk,\n      max_level: levelChunkStrategy?.maxLevel,\n      save_title: levelChunkStrategy?.isSaveTitle,\n    };\n  }\n  const separator =\n    segmentRule.separator.type === SeperatorType.CUSTOM\n      ? segmentRule.separator.customValue\n      : segmentRule.separator.type;\n  return {\n    separator,\n    max_tokens: segmentRule.maxTokens,\n    remove_extra_spaces: segmentRule?.preProcessRules?.includes(\n      PreProcessRule.REMOVE_SPACES,\n    ),\n    remove_urls_emails: segmentRule?.preProcessRules?.includes(\n      PreProcessRule.REMOVE_EMAILS,\n    ),\n    chunk_type: ChunkType.CustomChunk,\n    overlap: segmentRule.overlap,\n  };\n};\n\nexport function filterTextList(\n  unitList: UnitItem[],\n  documentSourceType?: DocumentSource,\n): DocumentTaskInfo[] {\n  return unitList.map(item => ({\n    name: item.name,\n    source_info: {\n      tos_uri: item.uri,\n      document_source: documentSourceType ?? DocumentSource.Document,\n    },\n  }));\n}\n\nexport function getCreateDocumentParams({\n  unitList,\n  segmentMode,\n  segmentRule,\n  documentSourceType,\n  levelChunkStrategy,\n}: {\n  unitList: UnitItem[];\n  segmentMode: SegmentMode;\n  segmentRule: CustomSegmentRule;\n  documentSourceType?: DocumentSource;\n  levelChunkStrategy: LevelChunkStrategy;\n}) {\n  return {\n    format_type: FormatType.Text,\n    document_bases: filterTextList(unitList, documentSourceType),\n    chunk_strategy: getCustomValues(\n      segmentMode,\n      segmentRule,\n      levelChunkStrategy,\n    ),\n  };\n}\n\nexport function validateSegmentRules(\n  segmentMode: SegmentMode,\n  segmentRule: CustomSegmentRule,\n): boolean {\n  if (segmentMode === SegmentMode.CUSTOM) {\n    const maxTokens = segmentRule?.maxTokens || 0;\n    const separator = segmentRule?.separator;\n    const isCustomSeperatorEmpty =\n      separator?.type === SeperatorType.CUSTOM && !separator?.customValue;\n\n    if (maxTokens === 0 || isCustomSeperatorEmpty) {\n      false;\n    }\n  }\n  return true;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useShallow } from 'zustand/react/shallow';\nimport { type UseBoundStore, type StoreApi } from 'zustand';\nimport { merge } from 'lodash-es';\nimport { useRequest } from 'ahooks';\nimport { useKnowledgeParams } from '@coze-data/knowledge-stores';\nimport { DataNamespace, dataReporter } from '@coze-data/reporter';\nimport {\n  type ProgressItem,\n  CreateUnitStatus,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { REPORT_EVENTS } from '@coze-arch/report-events';\nimport { I18n } from '@coze-arch/i18n';\nimport { CustomError } from '@coze-arch/bot-error';\nimport { KnowledgeApi } from '@coze-arch/bot-api';\nimport { Toast } from '@coze-arch/coze-design';\n\nimport { isLocalTextDocument } from '@/utils/is-local-text-document';\nimport { convertFilterStrategyToParams } from '@/utils/convert-filter-strategy-to-params';\nimport { useDocIdFromQuery, reportProcessDocumentFail } from '@/utils';\nimport { usePollingTaskProgress } from '@/hooks';\nimport { getCustomValues } from '@/features/knowledge-type/text/utils';\n\nimport { type UploadTextResegmentStore } from '../../store';\n\nexport const useResegment = <T extends UploadTextResegmentStore>(\n  useStore: UseBoundStore<StoreApi<T>>,\n) => {\n  const params = useKnowledgeParams();\n  const { segmentMode, segmentRule, setCreateStatus, setProgressList } =\n    useStore(\n      useShallow(state => ({\n        segmentMode: state.segmentMode,\n        segmentRule: state.segmentRule,\n        setCreateStatus: state.setCreateStatus,\n        setProgressList: state.setProgressList,\n      })),\n    );\n  const pollingTaskProgress = usePollingTaskProgress();\n  const docId = useDocIdFromQuery() ?? '';\n\n  const { run: handleProcessText } = useRequest(\n    async () => {\n      if (!params.datasetID) {\n        Toast.warning({\n          content: I18n.t('datasets_ID_miss'),\n          showClose: false,\n        });\n        throw new CustomError(\n          REPORT_EVENTS.KnowledgeResegment,\n          `${REPORT_EVENTS.KnowledgeResegment}: missing datasets_id`,\n        );\n      }\n      const { parsingStrategy, filterStrategy, documentInfo } =\n        useStore.getState();\n      const isLocalText = documentInfo && isLocalTextDocument(documentInfo);\n      const fixedParsingStrategy = isLocalText ? parsingStrategy : undefined;\n      try {\n        const { document_infos = [] } = await KnowledgeApi.Resegment(\n          merge(\n            {},\n            {\n              dataset_id: params.datasetID,\n              document_ids: [docId],\n              chunk_strategy: getCustomValues(segmentMode, segmentRule),\n              parsing_strategy: fixedParsingStrategy,\n            },\n            convertFilterStrategyToParams(filterStrategy.at(0)),\n          ),\n        );\n        if (Object.keys(document_infos).length) {\n          setCreateStatus(CreateUnitStatus.GET_TASK_PROGRESS);\n          await pollingTaskProgress(document_infos, {\n            onProgressing: (progressList: ProgressItem[]) => {\n              setProgressList(progressList);\n            },\n            onFinish: () => {\n              setCreateStatus(CreateUnitStatus.TASK_FINISH);\n            },\n          });\n          reportProcessDocumentFail(\n            document_infos,\n            REPORT_EVENTS.KnowledgeProcessDocument,\n          );\n        }\n      } catch (error) {\n        dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n          eventName: REPORT_EVENTS.KnowledgeProcessDocument,\n          error: error as Error,\n        });\n      }\n    },\n    { manual: true },\n  );\n  return handleProcessText;\n};\n","\n      import API from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC, useEffect } from 'react';\n\nimport {\n  useDataNavigate,\n  useKnowledgeParams,\n} from '@coze-data/knowledge-stores';\nimport { type ContentProps } from '@coze-data/knowledge-resource-processor-core';\nimport { getKnowledgeIDEQuery } from '@coze-data/knowledge-common-services/use-case';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\n\nimport { getProcessingDescMsg } from '@/utils';\nimport { UnitProgress } from '@/components';\n\nimport type { UploadTextResegmentStore } from '../../store';\nimport { useResegment } from './hooks';\n\nimport styles from './index.module.less';\n\nexport const TextProcessing: FC<\n  ContentProps<UploadTextResegmentStore>\n> = props => {\n  const { useStore, footer } = props;\n\n  const resourceNavigate = useDataNavigate();\n\n  /** store */\n  const progressList = useStore(state => state.progressList);\n  const createStatus = useStore(state => state.createStatus);\n\n  /** config */\n  const params = useKnowledgeParams();\n\n  const handleResegment = useResegment(useStore);\n\n  useEffect(() => {\n    handleResegment();\n  }, []);\n  return (\n    <>\n      <UnitProgress progressList={progressList} createStatus={createStatus} />\n      {footer?.({\n        btns: [\n          {\n            e2e: KnowledgeE2e.ResegmentUnitConfirmBtn,\n            type: 'hgltplus',\n            theme: 'solid',\n            text: I18n.t('variable_reset_yes'),\n            onClick: () => {\n              const query = getKnowledgeIDEQuery() as Record<string, string>;\n              resourceNavigate.toResource?.(\n                'knowledge',\n                params.datasetID,\n                query,\n              );\n            },\n          },\n        ],\n        prefix: (\n          <span className={styles['footer-sub-tip']}>\n            {getProcessingDescMsg(createStatus)}\n          </span>\n        ),\n      })}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type UploadConfig,\n  type FooterControlsProps,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { I18n } from '@coze-arch/i18n';\n\nimport { UploadFooter } from '@/components';\n\nimport {\n  createTextResegmentStore,\n  type UploadTextResegmentStore,\n} from './store';\nimport { TextSegment, TextProcessing } from './steps';\nimport { TextResegmentStep } from './constants';\n\nexport const TextResegmentConfig: UploadConfig<\n  TextResegmentStep,\n  UploadTextResegmentStore\n> = {\n  steps: [\n    {\n      content: props => (\n        <TextSegment\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('datasets_createFileModel_step3'),\n      step: TextResegmentStep.SEGMENT_CLEANER,\n    },\n    {\n      content: props => (\n        <TextProcessing\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('datasets_createFileModel_step4'),\n      step: TextResegmentStep.EMBED_PROGRESS,\n    },\n  ],\n  createStore: createTextResegmentStore,\n  showStep: true,\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type StateCreator } from 'zustand';\nimport {\n  CreateUnitStatus,\n  type ProgressItem,\n  type UnitItem,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { type DocumentInfo } from '@coze-arch/bot-api/knowledge';\n\nimport type { SemanticValidate, TableInfo, TableSettings } from '@/types';\nimport { TableStatus, DEFAULT_TABLE_SETTINGS_FROM_ONE } from '@/constants';\n\nimport type { UploadTableAction, UploadTableState } from './interface';\n\nexport const getDefaultState = () => ({\n  /** base store */\n  createStatus: CreateUnitStatus.UPLOAD_UNIT,\n  progressList: [],\n  unitList: [],\n  currentStep: 0,\n  /** table store */\n  status: TableStatus.NORMAL,\n  semanticValidate: {},\n  tableData: {},\n  originTableData: {},\n  tableSettings: DEFAULT_TABLE_SETTINGS_FROM_ONE,\n  documentList: [],\n});\n\nexport const createTableSlice: StateCreator<\n  UploadTableState<number> & UploadTableAction<number>\n> = (set, get) => ({\n  /** defaultState */\n  ...getDefaultState(),\n\n  /** base store action */\n  setCurrentStep: (currentStep: number) => {\n    set({ currentStep });\n  },\n  setCreateStatus: (createStatus: CreateUnitStatus) => {\n    set({ createStatus });\n  },\n  setProgressList: (progressList: ProgressItem[]) => {\n    set({ progressList });\n  },\n  setUnitList: (unitList: UnitItem[]) => {\n    set({ unitList });\n  },\n\n  /** table store action */\n  setStatus: (status: TableStatus) => {\n    set({ status });\n  },\n  setSemanticValidate: (semanticValidate: SemanticValidate) => {\n    set({ semanticValidate });\n  },\n  setTableData: (tableData: TableInfo) => {\n    set({ tableData });\n  },\n  setOriginTableData: (originTableData: TableInfo) => {\n    set({ originTableData });\n  },\n  setTableSettings: (tableSettings: TableSettings) => {\n    set({ tableSettings });\n  },\n  setDocumentList: (documentList: Array<DocumentInfo>) => {\n    set({ documentList });\n  },\n\n  /** reset state */\n  reset: () => {\n    set(getDefaultState());\n  },\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type StateCreator } from 'zustand';\n\nimport {\n  createTableSlice,\n  getDefaultState,\n} from '@/features/knowledge-type/table/slice';\nimport type {\n  UploadTableAction,\n  UploadTableState,\n} from '@/features/knowledge-type/table/interface';\nimport { DEFAULT_TABLE_SETTINGS_FROM_ZERO } from '@/constants';\n\nexport const createTableLocalResegmentSlice: StateCreator<\n  UploadTableState<number> & UploadTableAction<number>\n> = (set, get, store) => ({\n  ...createTableSlice(set, get, store),\n  tableSettings: DEFAULT_TABLE_SETTINGS_FROM_ZERO,\n  reset: () => {\n    set({\n      ...getDefaultState(),\n      tableSettings: DEFAULT_TABLE_SETTINGS_FROM_ZERO,\n    });\n  },\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Service definition: contains business processes & events\n */\nimport { useMemo } from 'react';\n\nimport { type StoreApi, type UseBoundStore } from 'zustand';\nimport { get } from 'lodash-es';\nimport { type UnitItem } from '@coze-data/knowledge-resource-processor-core';\nimport { DocumentSource } from '@coze-arch/bot-api/knowledge';\nimport { FileBizType } from '@coze-arch/bot-api/developer_api';\nimport { DeveloperApi } from '@coze-arch/bot-api';\n\nimport { transformUnitList, getFileExtension, getBase64 } from '@/utils';\nimport {\n  type UploadTableAction,\n  type UploadTableState,\n} from '@/features/knowledge-type/table/interface';\n\n/** Use tos_uri to get table_info when uploading table-local */\nexport const useUploadFetchTableParams = <\n  T extends UploadTableState<number> & UploadTableAction<number>,\n>(\n  useStore: UseBoundStore<StoreApi<T>>,\n) => {\n  const unitList = useStore(state => state.unitList);\n  return useMemo(\n    () => ({\n      tos_uri: get(unitList, '0.uri', ''),\n      document_source: DocumentSource.Document,\n    }),\n    [unitList],\n  );\n};\n\n/**\n * table-local add upload onRetry\n */\nexport const useRetry = <\n  T extends UploadTableState<number> & UploadTableAction<number>,\n>(\n  useStore: UseBoundStore<StoreApi<T>>,\n) => {\n  const setUnitList = useStore(state => state.setUnitList);\n  const unitList = useStore(state => state.unitList);\n\n  const onRetry = async (record: UnitItem, index: number) => {\n    try {\n      const { fileInstance } = record;\n      if (fileInstance) {\n        const { name } = fileInstance;\n        const extension = getFileExtension(name);\n        const base64 = await getBase64(fileInstance);\n        const result = await DeveloperApi.UploadFile({\n          file_head: {\n            file_type: extension,\n            biz_type: FileBizType.BIZ_BOT_DATASET,\n          },\n          data: base64,\n        });\n\n        setUnitList(\n          transformUnitList({\n            unitList,\n            data: result?.data,\n            fileInstance,\n            index,\n          }),\n        );\n      }\n    } catch (e) {\n      // TODO plus report\n      console.log(e);\n    }\n  };\n  return onRetry;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { get } from 'lodash-es';\nimport { isFeishuOrLarkDocumentSource } from '@coze-data/utils';\nimport {\n  FooterBtnStatus,\n  UploadStatus,\n} from '@coze-data/knowledge-resource-processor-core';\nimport type {\n  UnitItem,\n  OptType,\n  ProgressItem,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { I18n } from '@coze-arch/i18n';\nimport {\n  type GetDocumentTableInfoResponse,\n  type DocumentTaskInfo,\n  type DocTableColumn,\n  ColumnType,\n} from '@coze-arch/bot-api/memory';\nimport {\n  TableDataType,\n  DocumentSource,\n  type DocumentBase,\n  type TableColumn,\n  type UpdateRule,\n} from '@coze-arch/bot-api/knowledge';\nimport { FormatType } from '@coze-arch/bot-api/developer_api';\n\nimport {\n  useDocIdFromQuery,\n  tableSettingsToString,\n  validateField,\n} from '@/utils';\nimport {\n  type TableSettings,\n  type TableInfo,\n  type SemanticValidate,\n  type AddCustomTableMeta,\n} from '@/types';\nimport {\n  TableStatus,\n  MAX_TABLE_META_COLUMN_LEN,\n  MAX_TABLE_META_STR_LEN,\n  TableSettingFormFields,\n} from '@/constants';\n\n/**\n * Verify whether the key can be used as a semantic match\n * @param data\n * @returns\n */\nexport const semanticValidator = (\n  data?: GetDocumentTableInfoResponse,\n  startRow = 0,\n): SemanticValidate => {\n  if (!data) {\n    return {};\n  }\n\n  const { table_meta, preview_data } = data;\n\n  if (\n    !table_meta ||\n    !preview_data ||\n    !Object.keys(table_meta).length ||\n    !Object.keys(preview_data).length\n  ) {\n    return {};\n  }\n\n  // The forEach below TODO is not well written and needs to be optimized.\n  const res: SemanticValidate = {};\n  Object.keys(table_meta).forEach(sheetId => {\n    res[sheetId] = {};\n    const curTableMeta = table_meta[sheetId];\n    if (!Array.isArray(curTableMeta)) {\n      return {};\n    }\n\n    curTableMeta.forEach(meta => {\n      const { column_type, sequence } = meta;\n      if (sequence === undefined) {\n        return;\n      }\n      res[sheetId][sequence] = {\n        valid: true,\n        msg: '',\n      };\n      preview_data[sheetId].slice(startRow).forEach(dataMap => {\n        if (column_type === ColumnType.Image) {\n          res[sheetId][sequence] = {\n            valid: false,\n            msg: I18n.t('knowledge_insert_img_011'),\n          };\n          return;\n        }\n      });\n    });\n  });\n\n  return res;\n};\n\nexport function filterDocumentList({\n  unitList,\n  tableData,\n  tableSettings,\n  docIdFromQuery,\n}: {\n  unitList: UnitItem[];\n  tableData: TableInfo;\n  tableSettings: TableSettings;\n  docIdFromQuery: string;\n}): DocumentTaskInfo[] {\n  const meta = tableData.table_meta?.[tableSettings.sheet_id];\n  const { sheet_id, header_line_idx, start_line_idx } = tableSettings;\n  const settings = {\n    sheet_id: sheet_id.toString(),\n    header_line_idx: header_line_idx.toString(),\n    start_line_idx: start_line_idx.toString(),\n  };\n  return unitList.map(item => {\n    if (item.docId) {\n      return {\n        name: item.name,\n        uri: item.uri,\n        document_id: item.docId,\n        format_type: FormatType.Table,\n        doc_table_meta: meta,\n        doc_table_info: settings,\n      };\n    }\n    return {\n      name: item.name,\n      uri: item.uri,\n      document_id: docIdFromQuery === '' ? undefined : docIdFromQuery,\n      format_type: FormatType.Table,\n      doc_table_meta: meta,\n      doc_table_info: settings,\n    };\n  }) as DocumentTaskInfo[];\n}\n\nexport const useResegmentFetchTableParams = () => ({\n  document_id: useDocIdFromQuery(),\n  // source_file: {\n  //   document_source: DocumentSource.Document,\n  // },\n  table_data_type: TableDataType.AllData,\n});\n\nexport function isConfigurationLoading(status: TableStatus) {\n  return status === TableStatus.LOADING;\n}\n\nexport function isConfigurationError(status: TableStatus) {\n  return status === TableStatus.ERROR;\n}\n\nexport function isConfigurationShowBanner(\n  opt: OptType,\n  originTableData: TableInfo,\n  tableSettings: TableSettings,\n): boolean {\n  return opt\n    ? (\n        get(\n          originTableData,\n          `table_meta.${tableSettings[TableSettingFormFields.SHEET]}`,\n        ) || []\n      ).length > MAX_TABLE_META_COLUMN_LEN\n    : Object.keys(\n        get(\n          originTableData,\n          `preview_data.${tableSettings[TableSettingFormFields.SHEET]}.${\n            tableSettings[TableSettingFormFields.KEY_START_ROW]\n          }`,\n        ) || {},\n      ).length > MAX_TABLE_META_COLUMN_LEN;\n}\n\nexport function getConfigurationMeta(\n  tableData: TableInfo,\n  tableSettings: TableSettings,\n) {\n  return tableData\n    ? (\n        (tableData.table_meta || {})[\n          tableSettings[TableSettingFormFields.SHEET] || 0\n        ] || []\n      ).map(_meta => ({\n        ..._meta,\n        key: _meta.id,\n        column_name: (_meta.column_name ?? '').substring(\n          0,\n          MAX_TABLE_META_STR_LEN,\n        ),\n      }))\n    : [];\n}\n\nexport function getExpandConfigurationMeta(\n  tableData: TableInfo,\n  tableSettings: TableSettings,\n  validResult: Record<string, string>,\n): Array<\n  DocTableColumn & {\n    autofocus?: boolean;\n    errMsg?: string;\n  }\n> {\n  const tableColumn = getConfigurationMeta(tableData, tableSettings);\n  const validResultKeys = Object.keys(validResult);\n  return tableColumn.map(item => {\n    const newItem: DocTableColumn & {\n      autofocus?: boolean;\n      errMsg?: string;\n    } = {\n      ...item,\n    };\n    const hasHit = validResultKeys.includes(item?.column_name || '');\n    if (hasHit) {\n      newItem.errMsg = validResult[item?.column_name || ''];\n    }\n    return newItem;\n  });\n}\n\nexport function getConfigurationNextStatus(\n  tableData: TableInfo,\n  tableSettings: TableSettings,\n): FooterBtnStatus {\n  if (!tableData) {\n    return FooterBtnStatus.DISABLE;\n  }\n  const { table_meta } = tableData;\n  const meta =\n    get(table_meta, tableSettings[TableSettingFormFields.SHEET]) || [];\n  const hasEmptyMeta = meta.some(v => (v.column_name ?? '') === '');\n  const hasEmptyType = meta.some(v => !(v.column_type ?? ''));\n  const hasSystemField = meta.some(\n    v => validateField(v?.column_name ?? '')?.valid === false,\n  );\n  const hasSemantic = meta.some(v => v.is_semantic === true);\n  const hasDuplicateColumnName = meta.some(\n    v => meta.filter(i => i.column_name === v.column_name).length >= 2,\n  );\n  // No table structure data prohibits next step\n  if (\n    !Object.keys(meta).length ||\n    hasEmptyMeta ||\n    hasEmptyType ||\n    !hasSemantic ||\n    hasSystemField ||\n    meta.length > MAX_TABLE_META_COLUMN_LEN ||\n    hasDuplicateColumnName\n  ) {\n    return FooterBtnStatus.DISABLE;\n  }\n  return FooterBtnStatus.ENABLE;\n}\n\nexport function getDocIdFromProgressList(progressList: ProgressItem[]) {\n  return Array.isArray(progressList) && progressList.length > 0\n    ? get(progressList, '0.documentId')\n    : null;\n}\n\n/**\n * Get footer status, excluding loading status, only judge start/disable\n * Disable the footer button when any of the following conditions are met\n * 1. There is an empty column name\n * 2. unitName is empty\n * 3. No semantic match selected\n * @param metaData\n * @param unitName//TODO unitName judgment to be deletede deleted\n * @returns\n */\nexport const getCustomStatus = (\n  metaData: AddCustomTableMeta,\n  unitName: string,\n): FooterBtnStatus => {\n  const isDisabled =\n    metaData.some(meta => !meta.column_type) ||\n    !validateField(unitName)?.valid || // TODO line to be deleted\n    !metaData.some(meta => meta.is_semantic === true) ||\n    metaData.some(v => validateField(v.column_name ?? '')?.valid === false);\n  return isDisabled ? FooterBtnStatus.DISABLE : FooterBtnStatus.ENABLE;\n};\n\n// Table upload first step footer status judgment\nexport function getButtonStatus(unitList: UnitItem[]) {\n  const valid = unitList.some(v => validateField(v.name)?.valid === false);\n  if (\n    unitList.length === 0 ||\n    valid ||\n    unitList.some(\n      unitItem =>\n        unitItem.name.length === 0 || unitItem.status !== UploadStatus.SUCCESS,\n    )\n  ) {\n    return FooterBtnStatus.DISABLE;\n  }\n  return FooterBtnStatus.ENABLE;\n}\n\nexport function getAddSegmentParams({\n  spaceId,\n  docId,\n  datasetId,\n  documentInfo,\n}: {\n  spaceId?: string;\n  docId?: string;\n  datasetId: string;\n  documentInfo: DocumentBase[];\n}) {\n  const payload = {\n    space_id: spaceId, // Compatible with outdated interfaces\n    document_id: docId, // Compatible with outdated interfaces\n    dataset_id: datasetId,\n    format_type: FormatType.Table,\n    document_bases: documentInfo,\n    is_append: true,\n  };\n  return payload;\n}\n\nexport function getCreateDocumentParams({\n  isAppend,\n  unitList,\n  metaData,\n  tableSettings,\n  sourceType,\n  updateRule,\n}: {\n  isAppend: boolean;\n  unitList: UnitItem[];\n  metaData: TableColumn[];\n  tableSettings: TableSettings;\n  sourceType?: DocumentSource;\n  updateRule?: UpdateRule;\n}) {\n  const documentSource = sourceType ?? DocumentSource.Document;\n  const getSourceFileId = (unit: UnitItem) =>\n    [DocumentSource.GoogleDrive, DocumentSource.Notion].includes(documentSource)\n      ? unit.file_id\n      : unit.entity_id;\n\n  const getUpdateRule = () => {\n    if (updateRule) {\n      return updateRule;\n    }\n\n    if (\n      !isAppend &&\n      (documentSource === DocumentSource.Web ||\n        isFeishuOrLarkDocumentSource(documentSource))\n    ) {\n      return {\n        update_interval: get(unitList, '0.updateInterval'),\n        update_type: get(unitList, '0.updateType'),\n      };\n    }\n  };\n\n  return {\n    source_type: documentSource,\n    format_type: FormatType.Table,\n    document_bases: unitList.map(unit => ({\n      name: '',\n      source_info: {\n        tos_uri: unit.uri,\n        document_source: documentSource,\n        source_file_id: getSourceFileId(unit),\n        web_id: unit.webID as string,\n      },\n      update_rule: getUpdateRule(),\n      table_sheet: tableSettingsToString(tableSettings),\n      table_meta: metaData.map(meta => ({\n        id: isAppend ? meta.id : '0', // Not append, default is new ('0')\n        column_name: meta.column_name,\n        is_semantic: meta.is_semantic,\n        column_type: meta.column_type,\n        desc: meta.desc,\n        sequence: meta.sequence,\n      })),\n    })),\n\n    is_append: isAppend,\n    // document_id: useDocIdFromQuery ()?? undefined,//TODO to be deleted, here is to be compatible with the original MemoryApi. ProcessDocumentsTask update logic\n  };\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * pure network request & common services\n */\n// TODO to be solved\n\nimport { type StoreApi, type UseBoundStore } from 'zustand';\nimport { debounce, get } from 'lodash-es';\nimport { useRequest } from 'ahooks';\nimport {\n  useDataNavigate,\n  useKnowledgeParams,\n} from '@coze-data/knowledge-stores';\nimport { DataNamespace, dataReporter } from '@coze-data/reporter';\nimport {\n  type ProgressItem,\n  CreateUnitStatus,\n  FooterBtnStatus,\n  OptType,\n  UnitType,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { REPORT_EVENTS } from '@coze-arch/report-events';\nimport { type FormApi } from '@coze-arch/bot-semi/Form';\nimport { useFlags } from '@coze-arch/bot-flags';\nimport { CustomError } from '@coze-arch/bot-error';\nimport { DocumentSourceType, FormatType } from '@coze-arch/bot-api/memory';\nimport type {\n  AssociateFileResponse,\n  DocTableColumn,\n  DocTableSheet,\n  // DocumentTableTaskInfo,\n  FileNode,\n  GetDocumentTableInfoRequest,\n  GetDocumentTableInfoResponse,\n  // GetTableSchemaInfoRequest,\n} from '@coze-arch/bot-api/memory';\nimport {\n  type GetTableSchemaRequest,\n  TableDataType,\n  DocumentSource,\n  type DocumentInfo,\n  type CreateDocumentRequest,\n  type CreateDocumentResponse,\n  type ValidateTableSchemaRequest,\n} from '@coze-arch/bot-api/knowledge';\nimport { MemoryApi, KnowledgeApi } from '@coze-arch/bot-api';\n\nimport {\n  isThirdResegment as isThirdResegmentFunc,\n  isIncremental as isIncrementalFunc,\n} from '@/utils';\nimport { type CustomFormFields } from '@/types/table';\nimport { type TableSettings } from '@/types';\nimport { usePollingTaskProgress } from '@/hooks';\nimport { TABLE_ACCEPT_LOCAL_FILE } from '@/constants/common';\nimport { TableStatus } from '@/constants';\n\nimport {\n  type UploadTableAction,\n  type UploadTableState,\n} from '../table/interface';\nimport { useUploadFetchTableParams } from '../table/first-party/local/add/steps/services';\nimport { semanticValidator, getCustomStatus } from './utils';\n\nexport interface TableSchemaInfoResponse {\n  code?: number;\n  msg?: string;\n  sheet_list?: DocTableSheet[];\n  table_meta?: Record<string, DocTableColumn[]>;\n  preview_data?: Record<string, Record<number, string>[]>;\n}\n\nexport interface ThirdTableState {\n  tosUrlRef?: string;\n  fileTreeNodesMap?: Record<string, FileNode[]>;\n  docInfo?: DocumentInfo;\n  fileIdsMap?: AssociateFileResponse['file_mapping'];\n}\nexport const useFetchTableInfoReq = (\n  onSuccess: (res: TableSchemaInfoResponse) => void,\n  onError: () => void,\n) => {\n  const { run: fetchTableInfo } = useRequest(\n    async (params: GetDocumentTableInfoRequest) => {\n      const res = await MemoryApi.GetDocumentTableInfo(params);\n      onSuccess(res);\n    },\n    {\n      onError: error => {\n        dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n          eventName: REPORT_EVENTS.KnowledgeGetTableInfo,\n          error: error as Error,\n        });\n        onError();\n      },\n      manual: true,\n    },\n  );\n\n  return fetchTableInfo;\n};\n\nexport const useFetchTableSchemaInfoReq = (\n  onSuccess: (res: GetDocumentTableInfoResponse) => void,\n  onError: () => void,\n) => {\n  const { run: fetchTableInfo } = useRequest(\n    async (params: GetTableSchemaRequest) => {\n      try {\n        const { table_meta, preview_data, ...rest } =\n          await KnowledgeApi.GetTableSchema(params);\n        const updateParams =\n          params?.table_data_type === TableDataType.OnlyPreview\n            ? {\n                preview_data: {\n                  [`${params.table_sheet?.sheet_id || '0'}`]:\n                    preview_data ?? [],\n                },\n              }\n            : {\n                ...rest,\n                table_meta: {\n                  [`${params.table_sheet?.sheet_id || '0'}`]: table_meta ?? [],\n                },\n                preview_data: {\n                  [`${params.table_sheet?.sheet_id || '0'}`]:\n                    preview_data ?? [],\n                },\n              };\n        onSuccess(updateParams);\n      } catch (error) {\n        dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n          eventName: REPORT_EVENTS.KnowledgeGetTableInfo,\n          error: error as Error,\n        });\n        onError();\n      }\n    },\n    {\n      onError: error => {\n        dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n          eventName: REPORT_EVENTS.KnowledgeGetTableInfo,\n          error: error as Error,\n        });\n        onError();\n      },\n      manual: true,\n    },\n  );\n  return fetchTableInfo;\n};\n\n/**\n * This method is used by all table links\n * Impure, will change the store, because all table links are similar, so put it here\n */\nexport const useFetchTableSchemaInfo = <\n  T extends UploadTableState<number> & UploadTableAction<number>,\n>(\n  useStore: UseBoundStore<StoreApi<T>>,\n) => {\n  const tableData = useStore(state => state.tableData);\n  const setSemanticValidate = useStore(state => state.setSemanticValidate);\n  const setOriginTableData = useStore(state => state.setOriginTableData);\n  const setTableData = useStore(state => state.setTableData);\n  const setStatus = useStore(state => state.setStatus);\n\n  return useFetchTableSchemaInfoReq(\n    res => {\n      const isOnlyPreview = !get(res, 'table_meta');\n      const newData = isOnlyPreview\n        ? {\n            ...tableData,\n            preview_data: get(res, 'preview_data'),\n          }\n        : res;\n      if (!isOnlyPreview) {\n        // Why is there this if, because the first request is full, and the second request is OnlyPreview.\n        setOriginTableData(newData);\n      }\n      const validateRes = semanticValidator(newData);\n      setSemanticValidate(validateRes);\n      setTableData(newData);\n      setStatus(TableStatus.NORMAL);\n    },\n    () => {\n      console.log('setStatus(TableStatus.ERROR)');\n      setStatus(TableStatus.ERROR);\n    },\n  );\n};\n\n// TODO needs to be optimized. This function contains too much logic and is very messy.\n// Events action nl2ql link\nexport const useChangeTableSettingsNl2ql = <\n  T extends UploadTableState<number> &\n    UploadTableAction<number> &\n    ThirdTableState,\n>(\n  useStore: UseBoundStore<StoreApi<T>>,\n) => {\n  const { type, docID, opt } = useKnowledgeParams();\n  const setStatus = useStore(state => state.setStatus);\n  const setTableSettings = useStore(state => state.setTableSettings);\n  const fileIdsMap = useStore(state => state.fileIdsMap ?? {});\n  const docInfo = useStore(state => state.docInfo);\n  const tosUrlRef = useStore(state => state.tosUrlRef);\n  const sourceFileId =\n    fileIdsMap[Object.keys(fileIdsMap)?.[0]]?.[0].source_file_id ??\n    docInfo?.source_file_id;\n  const fetchTableInfo = useFetchTableSchemaInfo(useStore);\n  const AWAIT = 500;\n  const params = useUploadFetchTableParams(useStore);\n\n  const isThirdResegment = isThirdResegmentFunc(opt ?? OptType.ADD, type); // Determine whether it is a tripartite resegment\n  const isIncremental = isIncrementalFunc(opt ?? OptType.ADD);\n\n  const onChangeTableSettings = debounce((v: TableSettings) => {\n    setStatus(TableStatus.LOADING);\n    const sourceFile =\n      type &&\n      [UnitType.TABLE_GOOGLE_DRIVE, UnitType.TABLE_FEISHU].includes(type)\n        ? {\n            // Feishu needs to pass tos_uri\n            tos_uri: type === UnitType.TABLE_FEISHU ? tosUrlRef : undefined,\n            source_file_id: sourceFileId ?? undefined,\n            document_source:\n              type === UnitType.TABLE_GOOGLE_DRIVE\n                ? DocumentSource.GoogleDrive\n                : DocumentSource.FeishuWeb,\n          }\n        : params;\n    fetchTableInfo({\n      // If it is a resegment of three parties, it will not be transmitted source_file\n      source_file: isThirdResegment ? undefined : sourceFile,\n      table_sheet:\n        !isIncremental &&\n        get(sourceFile, 'document_source') === DocumentSource.Web\n          ? undefined\n          : {\n              sheet_id: String(v.sheet_id),\n              header_line_idx: String(v.header_line_idx),\n              start_line_idx: String(v.start_line_idx),\n            },\n      // If it is a three-party resegment and incremental import, it will pass document_id other cases will not pass\n      document_id: isThirdResegment || isIncremental ? docID : undefined,\n      table_data_type: TableDataType.AllData,\n    });\n    setTableSettings(v);\n  }, AWAIT);\n  return onChangeTableSettings;\n};\nexport const useUpdateDocument = <\n  T extends UploadTableState<number> & UploadTableAction<number>,\n>(\n  useStore: UseBoundStore<StoreApi<T>>,\n) => {\n  const tableData = useStore(state => state.tableData);\n  const setStatus = useStore(state => state.setStatus);\n  const setCreateStatus = useStore(state => state.setCreateStatus);\n  const setProgressList = useStore(state => state.setProgressList);\n  const pollingTaskProgress = usePollingTaskProgress();\n  const { docID: docIdFromQuery } = useKnowledgeParams();\n\n  const { run: handleUpdateDocument } = useRequest(\n    async () => {\n      try {\n        setStatus(TableStatus.LOADING);\n        await KnowledgeApi.UpdateDocument({\n          document_id: docIdFromQuery,\n          table_meta: tableData.table_meta?.[0],\n        });\n        await pollingTaskProgress(\n          [\n            {\n              document_id: docIdFromQuery,\n            },\n          ],\n          {\n            onProgressing: (progressList: ProgressItem[]) => {\n              setProgressList(progressList);\n            },\n            onFinish: () => {\n              setCreateStatus(CreateUnitStatus.TASK_FINISH);\n            },\n          },\n        );\n      } catch (error) {\n        dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n          eventName: REPORT_EVENTS.KnowledgeUpdateDocument,\n          error: error as Error,\n        });\n      } finally {\n        setStatus(TableStatus.NORMAL);\n      }\n    },\n    {\n      manual: true,\n    },\n  );\n  return handleUpdateDocument;\n};\n\n/**\n * table custom createDocument\n * TODO will be abandoned soon, and will be deleted after cutting to the new knowledge information architecture\n * @deprecated\n * @param setStatus\n * @param formApi\n * @returns\n */\nexport const useCreateDocument = (\n  setStatus: (v: FooterBtnStatus) => void,\n  formApi: React.MutableRefObject<FormApi<CustomFormFields> | undefined>,\n) => {\n  const params = useKnowledgeParams();\n  const resourceNavigate = useDataNavigate();\n  const { run: createDocument } = useRequest(\n    async () => {\n      setStatus(FooterBtnStatus.LOADING);\n      const data = formApi?.current?.getValues();\n      const payload = {\n        space_id: params.spaceID,\n        dataset_id: params.datasetID,\n        document: {\n          source_type: DocumentSourceType.Custom,\n          name: data?.unitName,\n          format_type: FormatType.Table,\n          table_meta: (data?.metaData ?? []).map(meta => ({\n            column_name: meta.column_name,\n            is_semantic: meta.is_semantic,\n            column_type: meta.column_type,\n            desc: meta.desc,\n          })),\n        },\n      };\n      const { id } = await MemoryApi.CreateDocument(payload);\n      console.log('doc-id', id);\n      resourceNavigate.toResource?.('knowledge', params.datasetID);\n      setStatus(getCustomStatus(data?.metaData ?? [], data?.unitName ?? ''));\n    },\n    {\n      onError: error => {\n        const data = formApi?.current?.getValues();\n        dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n          eventName: REPORT_EVENTS.KnowledgeCreateDocument,\n          error,\n        });\n        setStatus(getCustomStatus(data?.metaData ?? [], data?.unitName ?? ''));\n      },\n      manual: true,\n    },\n  );\n  return createDocument;\n};\n\n/**\n * @deprecated\n * Table unit name verification\n * TODO to be deleted, the new link is no longer used, only the new one is used directly, because the product function is new.\n */\nexport const useValidateUnitName = () => {\n  const { docID: docIdFromQuery, spaceID, datasetID } = useKnowledgeParams();\n  return async (params: { unit_name: string | string[] }) => {\n    const { unit_name: unitName, ...rest } = params;\n    const unitNameList = unitName instanceof Array ? unitName : [unitName];\n    return Promise.all(\n      unitNameList.map(\n        async (name: string) =>\n          await MemoryApi.ValidateUnitName({\n            space_id: spaceID ?? '',\n            dataset_id: datasetID ?? '',\n            document_id: docIdFromQuery ? docIdFromQuery : undefined,\n            unit_name: name,\n            format_type: FormatType.Table,\n            ...rest,\n          }),\n      ),\n    );\n  };\n};\n\nexport const useTableSchemaValid = (\n  onSuccess: (res: boolean, validResult: Record<string, string>) => void,\n  onError?: (error: Error) => void,\n) => {\n  const { run: tableSchemaValid } = useRequest(\n    async (params: ValidateTableSchemaRequest) => {\n      const res = await KnowledgeApi.ValidateTableSchema(params);\n      const validResult = res?.column_valid_result || {};\n      const validResultKeys = Object.keys(validResult);\n      const state = validResultKeys.length === 0 ? res?.code === 0 : false;\n      onSuccess(state, validResult);\n    },\n    {\n      onError: error => {\n        dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n          eventName: REPORT_EVENTS.KnowledgeTableSchemaValid,\n          error: error as Error,\n        });\n        onError?.(error);\n      },\n      manual: true,\n    },\n  );\n\n  return tableSchemaValid;\n};\n\nexport const useFetchAddSegmentReq = (\n  onSuccess: (res: CreateDocumentResponse) => void,\n  onError?: () => void,\n) => {\n  const { run: fetchAddSegment, loading: addSegmentLoading } = useRequest(\n    async (params: CreateDocumentRequest) => {\n      const res = await KnowledgeApi.CreateDocument(params);\n      onSuccess(res);\n    },\n    {\n      onError: error => {\n        dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n          eventName: REPORT_EVENTS.KnowledgeTableAddSegment,\n          error: error as Error,\n        });\n        onError?.();\n      },\n      manual: true,\n    },\n  );\n\n  return {\n    fetchAddSegment,\n    addSegmentLoading,\n  };\n};\n\nexport const useAddSegment = <\n  T extends UploadTableState<number> & UploadTableAction<number>,\n>(\n  useStore: UseBoundStore<StoreApi<T>>,\n) => {\n  const setStatus = useStore(state => state.setStatus);\n  const setCreateStatus = useStore(state => state.setCreateStatus);\n  const setProgressList = useStore(state => state.setProgressList);\n  const pollingTaskProgress = usePollingTaskProgress();\n  const { docID: docIdFromQuery } = useKnowledgeParams();\n\n  const { fetchAddSegment } = useFetchAddSegmentReq(\n    async res => {\n      await pollingTaskProgress(\n        [\n          {\n            document_id: docIdFromQuery,\n          },\n        ],\n        {\n          onProgressing: (progressList: ProgressItem[]) => {\n            setProgressList(progressList);\n          },\n          onFinish: () => {\n            setCreateStatus(CreateUnitStatus.TASK_FINISH);\n          },\n        },\n      );\n      setStatus(TableStatus.NORMAL);\n    },\n    () => {\n      setStatus(TableStatus.ERROR);\n    },\n  );\n\n  return fetchAddSegment;\n};\n\nexport const useFetchListDocumentReq = (\n  onSuccess: (res: DocumentInfo) => void,\n  onError?: () => void,\n) => {\n  const params = useKnowledgeParams();\n\n  const { run: fetchListDocument } = useRequest(\n    async () => {\n      if (!params.datasetID) {\n        throw new CustomError(\n          REPORT_EVENTS.KnowledgeListDocument,\n          `${REPORT_EVENTS.KnowledgeListDocument}: no datasetID`,\n        );\n      }\n\n      if (!params.docID) {\n        throw new CustomError(\n          REPORT_EVENTS.KnowledgeListDocument,\n          `${REPORT_EVENTS.KnowledgeListDocument}: no docId`,\n        );\n      }\n\n      const listDocumentRes = await KnowledgeApi.ListDocument({\n        dataset_id: params.datasetID,\n        document_ids: [params.docID],\n      });\n\n      const docInfo: DocumentInfo =\n        listDocumentRes?.document_infos?.find(\n          i => i.document_id === params.docID,\n        ) || {};\n      onSuccess(docInfo);\n    },\n    {\n      onError: error => {\n        dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n          eventName: REPORT_EVENTS.KnowledgeListDocument,\n          error: error as Error,\n        });\n        onError?.();\n      },\n      manual: true,\n    },\n  );\n\n  return fetchListDocument;\n};\n\nexport const useAcceptFiles = (): string => {\n  const [FLAGS] = useFlags();\n\n  const accept = TABLE_ACCEPT_LOCAL_FILE.filter(i => {\n    if (!FLAGS['bot.data.knowledge_md_xls']) {\n      return i !== '.xls';\n    }\n    return !!i;\n  }).join(',');\n\n  return accept;\n};\n","\n      import API from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable @coze-arch/max-line-per-function */\nimport { useEffect } from 'react';\n\nimport { nanoid } from 'nanoid';\nimport { isEmpty } from 'lodash-es';\nimport { IllustrationNoResult } from '@douyinfe/semi-illustrations';\nimport { type ContentProps } from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport { UIEmpty } from '@coze-arch/bot-semi';\nimport { IconAdd } from '@coze-arch/bot-icons';\nimport { TableDataType } from '@coze-arch/bot-api/memory';\nimport { Button, Tooltip } from '@coze-arch/coze-design';\n\nimport { useOptFromQuery } from '@/utils';\nimport { type TableItem } from '@/types/table';\nimport type {\n  UploadTableState,\n  UploadTableAction,\n} from '@/features/knowledge-type/table/index';\nimport {\n  useResegmentFetchTableParams,\n  isConfigurationLoading as isLoadingFunc,\n  isConfigurationError as isErrorFunc,\n  isConfigurationShowBanner as isShowBannerFunc,\n  getConfigurationMeta,\n  getConfigurationNextStatus,\n  semanticValidator,\n  useFetchTableSchemaInfo,\n} from '@/features/knowledge-type/table/index';\nimport {\n  TableStatus,\n  TableSettingFormFields,\n  MAX_TABLE_META_COLUMN_LEN,\n} from '@/constants';\nimport {\n  TableStructure as TableStructureInternal,\n  ConfigurationLoading,\n  ConfigurationError,\n  ConfigurationBanner,\n} from '@/components';\n\nimport { TableLocalResegmentStep } from '../../constants';\n\nimport styles from './index.module.less';\n\nexport const TableConfiguration = <\n  T extends UploadTableState<number> & UploadTableAction<number>,\n>(\n  props: ContentProps<T>,\n) => {\n  const { useStore, footer } = props;\n  /** common action */\n  const setCurrentStep = useStore(state => state.setCurrentStep);\n\n  /** table store*/\n  const status = useStore(state => state.status);\n  const tableData = useStore(state => state.tableData);\n  const originTableData = useStore(state => state.originTableData);\n  const tableSettings = useStore(state => state.tableSettings);\n  const semanticValidate = useStore(state => state.semanticValidate);\n  /** table action*/\n  const setTableData = useStore(state => state.setTableData);\n  const setStatus = useStore(state => state.setStatus);\n  const setSemanticValidate = useStore(state => state.setSemanticValidate);\n\n  /** compute action */\n  const opt = useOptFromQuery();\n  const isLoading = isLoadingFunc(status);\n  const isError = isErrorFunc(status);\n  const isShowBanner = isShowBannerFunc(opt, tableData, tableSettings);\n  const meta = getConfigurationMeta(tableData, tableSettings);\n\n  /** network action */\n  const fetchTableInfo = useFetchTableSchemaInfo<T>(useStore);\n\n  const resegmentParams = useResegmentFetchTableParams();\n\n  useEffect(() => {\n    if (!tableData.table_meta) {\n      setStatus(TableStatus.LOADING);\n      fetchTableInfo(resegmentParams);\n    }\n  }, [tableData]);\n\n  if (isLoading) {\n    return <ConfigurationLoading />;\n  }\n  if (isError) {\n    return (\n      <ConfigurationError\n        fetchTableInfo={() => {\n          setStatus(TableStatus.LOADING);\n          fetchTableInfo(resegmentParams);\n        }}\n      />\n    );\n  }\n\n  const TooltipWrapper = ({ children }: { children: JSX.Element }) => {\n    if (meta.length >= MAX_TABLE_META_COLUMN_LEN) {\n      return (\n        <Tooltip trigger=\"hover\" content={I18n.t('knowledge_1222_01')}>\n          {children}\n        </Tooltip>\n      );\n    }\n    return <>{children}</>;\n  };\n\n  const handleAddField = () => {\n    const curUuid = nanoid();\n    const curSheet = tableSettings[TableSettingFormFields.SHEET];\n    const newData = {\n      ...tableData,\n      table_meta: {\n        ...tableData.table_meta,\n        [curSheet]: tableData?.table_meta?.[curSheet]?.concat({\n          id: curUuid,\n          key: curUuid,\n          column_name: '',\n          is_semantic: false,\n          column_type: undefined,\n          sequence: undefined,\n          is_new_column: true,\n        }),\n      },\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    setTableData(newData as any);\n  };\n\n  return (\n    <>\n      <div className={styles['table-resegment']}>\n        <TableStructureInternal\n          tipsNode={\n            <>\n              {isShowBanner ? <ConfigurationBanner /> : null}\n              {!meta.length || isEmpty(originTableData) ? (\n                <UIEmpty\n                  empty={{\n                    title: I18n.t('knowledge_1221_02'),\n                    icon: <IllustrationNoResult></IllustrationNoResult>,\n                  }}\n                />\n              ) : null}\n            </>\n          }\n          showTitle\n          initValid\n          isDragTable\n          baseKey={`${tableSettings[TableSettingFormFields.SHEET]}.${\n            tableSettings[TableSettingFormFields.KEY_START_ROW]\n          }.`}\n          data={meta}\n          verifyMap={\n            semanticValidate[tableSettings[TableSettingFormFields.SHEET]] || {}\n          }\n          setData={v => {\n            const curSheet = tableSettings[TableSettingFormFields.SHEET];\n            const newData = {\n              ...tableData,\n              table_meta: {\n                ...tableData.table_meta,\n                [curSheet]: (v || []).map((item, index) => ({\n                  ...item,\n                  sequence: index.toString(),\n                })),\n              },\n            };\n            setTableData(newData);\n            setSemanticValidate(semanticValidator(newData));\n          }}\n          loading={isLoading}\n        />\n        <TooltipWrapper>\n          <Button\n            className={styles['add-btn']}\n            color=\"primary\"\n            disabled={meta.length >= MAX_TABLE_META_COLUMN_LEN}\n            icon={<IconAdd />}\n            onClick={handleAddField}\n          >\n            {I18n.t('datasets_segment_tableStructure_add_field')}\n          </Button>\n        </TooltipWrapper>\n      </div>\n\n      {footer\n        ? footer([\n            {\n              e2e: KnowledgeE2e.UploadUnitNextBtn,\n              type: 'hgltplus',\n              theme: 'solid',\n              text: I18n.t('datasets_createFileModel_NextBtn'),\n              disableHoverContent: I18n.t('knowledge_multi_index_noti'),\n              onClick: () => {\n                setCurrentStep(TableLocalResegmentStep.PREVIEW);\n\n                fetchTableInfo({\n                  ...resegmentParams,\n                  table_data_type: TableDataType.OnlyPreview,\n                  origin_table_meta: originTableData?.table_meta?.[0],\n                  preview_table_meta: (tableData?.table_meta?.[0] || []).map(\n                    (item: TableItem) => ({\n                      column_name: item.column_name,\n                      column_type: item.column_type,\n                      desc: item.desc,\n                      id: item?.is_new_column ? '0' : item.id,\n                      is_semantic: item.is_semantic,\n                      sequence: item.sequence,\n                    }),\n                  ),\n                });\n              },\n              status: getConfigurationNextStatus(tableData, tableSettings),\n            },\n          ])\n        : null}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type ContentProps,\n  FooterBtnStatus,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\n\nimport type {\n  UploadTableState,\n  UploadTableAction,\n} from '@/features/knowledge-type/table/interface';\nimport { TablePreview as TablePreviewInternal } from '@/components';\n\nimport { TableLocalResegmentStep } from '../../constants';\n\nexport const TablePreview = <\n  T extends UploadTableState<number> & UploadTableAction<number>,\n>(\n  props: ContentProps<T>,\n) => {\n  const { useStore, footer } = props;\n\n  /** store */\n  const tableData = useStore(state => state.tableData);\n  const tableSettings = useStore(state => state.tableSettings);\n  const setCurrentStep = useStore(state => state.setCurrentStep);\n\n  return (\n    <>\n      <TablePreviewInternal data={tableData} settings={tableSettings} />\n      {footer\n        ? footer([\n            {\n              e2e: KnowledgeE2e.UploadUnitUpBtn,\n              type: 'primary',\n              theme: 'light',\n              text: I18n.t('datasets_createFileModel_previousBtn'),\n              onClick: () => {\n                setCurrentStep(TableLocalResegmentStep.CONFIGURATION);\n              },\n              status: FooterBtnStatus.ENABLE,\n            },\n            {\n              e2e: KnowledgeE2e.UploadUnitNextBtn,\n              type: 'hgltplus',\n              theme: 'solid',\n              text: I18n.t('datasets_createFileModel_NextBtn'),\n              onClick: () => {\n                setCurrentStep(TableLocalResegmentStep.PROCESSING);\n              },\n              status: FooterBtnStatus.ENABLE,\n            },\n          ])\n        : null}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type StoreApi, type UseBoundStore } from 'zustand';\nimport { useRequest } from 'ahooks';\nimport { DataNamespace, dataReporter } from '@coze-data/reporter';\nimport {\n  CreateUnitStatus,\n  type ProgressItem,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { REPORT_EVENTS } from '@coze-arch/report-events';\nimport { KnowledgeApi } from '@coze-arch/bot-api';\n\nimport { useDocIdFromQuery } from '@/utils';\nimport { type TableItem } from '@/types/table';\nimport { usePollingTaskProgress } from '@/hooks';\nimport {\n  type UploadTableAction,\n  type UploadTableState,\n} from '@/features/knowledge-type/table/index';\nimport { TableStatus } from '@/constants';\n\nexport const useUpdateDocument = <\n  T extends UploadTableState<number> & UploadTableAction<number>,\n>(\n  useStore: UseBoundStore<StoreApi<T>>,\n) => {\n  const tableData = useStore(state => state.tableData);\n  const setStatus = useStore(state => state.setStatus);\n  const setCreateStatus = useStore(state => state.setCreateStatus);\n  const setProgressList = useStore(state => state.setProgressList);\n  const pollingTaskProgress = usePollingTaskProgress();\n  const docIdFromQuery = useDocIdFromQuery();\n\n  const { run: handleUpdateDocument } = useRequest(\n    async () => {\n      try {\n        setStatus(TableStatus.LOADING);\n        await KnowledgeApi.UpdateDocument({\n          document_id: docIdFromQuery,\n          table_meta: (tableData?.table_meta?.[0] || []).map(\n            (item: TableItem) => ({\n              column_name: item.column_name,\n              column_type: item.column_type,\n              desc: item.desc,\n              id: item?.is_new_column ? '0' : item.id,\n              is_semantic: item.is_semantic,\n              sequence: item.sequence,\n            }),\n          ),\n        });\n        await pollingTaskProgress(\n          [\n            {\n              document_id: docIdFromQuery,\n            },\n          ],\n          {\n            onProgressing: (progressList: ProgressItem[]) => {\n              setProgressList(progressList);\n            },\n            onFinish: () => {\n              setCreateStatus(CreateUnitStatus.TASK_FINISH);\n            },\n          },\n        );\n      } catch (error) {\n        dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n          eventName: REPORT_EVENTS.KnowledgeUpdateDocument,\n          error: error as Error,\n        });\n      } finally {\n        setStatus(TableStatus.NORMAL);\n      }\n    },\n    {\n      manual: true,\n    },\n  );\n  return handleUpdateDocument;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useMemo, useEffect } from 'react';\n\nimport {\n  useDataNavigate,\n  useKnowledgeParams,\n} from '@coze-data/knowledge-stores';\nimport {\n  type ContentProps,\n  FooterBtnStatus,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\n\nimport { getDocIdFromProgressList } from '@/features/knowledge-type/table/index';\nimport type {\n  UploadTableState,\n  UploadTableAction,\n} from '@/features/knowledge-type/table/index';\nimport { UnitProgress } from '@/components';\n\nimport { useUpdateDocument } from './hooks';\n\nexport const TableProcessing = <\n  T extends UploadTableState<number> & UploadTableAction<number>,\n>(\n  props: ContentProps<T>,\n) => {\n  const { useStore, footer } = props;\n\n  /** store */\n  const progressList = useStore(state => state.progressList);\n  const createStatus = useStore(state => state.createStatus);\n\n  /** config */\n  const params = useKnowledgeParams();\n  const resourceNavigate = useDataNavigate();\n  const docId = useMemo(\n    () => getDocIdFromProgressList(progressList),\n    [progressList],\n  );\n\n  const handleUpdateDocument = useUpdateDocument(useStore);\n  useEffect(() => {\n    handleUpdateDocument();\n  }, []);\n  return (\n    <>\n      <UnitProgress progressList={progressList} createStatus={createStatus} />\n      {footer\n        ? footer([\n            {\n              e2e: KnowledgeE2e.CreateUnitConfirmBtn,\n              type: 'hgltplus',\n              theme: 'solid',\n              text: I18n.t('variable_reset_yes'),\n              onClick: () => {\n                resourceNavigate.toResource?.('knowledge', params.datasetID);\n              },\n              status: docId ? FooterBtnStatus.ENABLE : FooterBtnStatus.DISABLE,\n            },\n          ])\n        : null}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type UploadConfig,\n  type FooterControlsProps,\n  type ContentProps,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { I18n } from '@coze-arch/i18n';\n\nimport {\n  type UploadTableAction,\n  type UploadTableState,\n} from '@/features/knowledge-type/table/index';\nimport { UploadFooter } from '@/components';\n\nimport { createTableLocalResegmentStore } from './store';\nimport { TableConfiguration, TablePreview, TableProcessing } from './steps';\nimport { TableLocalResegmentStep } from './constants';\n\ntype TableLocalResegmentContentProps = ContentProps<\n  UploadTableAction<TableLocalResegmentStep> &\n    UploadTableState<TableLocalResegmentStep>\n>;\n\nexport const TableResegmentConfig: UploadConfig<\n  TableLocalResegmentStep,\n  UploadTableAction<TableLocalResegmentStep> &\n    UploadTableState<TableLocalResegmentStep>\n> = {\n  steps: [\n    {\n      content: (props: TableLocalResegmentContentProps) => (\n        <TableConfiguration\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('datasets_createFileModel_tab_step2'),\n      step: TableLocalResegmentStep.CONFIGURATION,\n    },\n    {\n      content: (props: TableLocalResegmentContentProps) => (\n        <TablePreview\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('datasets_createFileModel_tab_step3'),\n      step: TableLocalResegmentStep.PREVIEW,\n    },\n    {\n      content: (props: TableLocalResegmentContentProps) => (\n        <TableProcessing\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('datasets_createFileModel_step4'),\n      step: TableLocalResegmentStep.PROCESSING,\n    },\n  ],\n  createStore: createTableLocalResegmentStore,\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\n\nimport {\n  type UploadTableAction,\n  type UploadTableState,\n} from '@/features/knowledge-type/table/index';\n\nimport { type TableLocalResegmentStep } from '../constants';\nimport { createTableLocalResegmentSlice } from './slice';\n\nexport const createTableLocalResegmentStore = () =>\n  create<\n    UploadTableState<TableLocalResegmentStep> &\n      UploadTableAction<TableLocalResegmentStep>\n  >()(\n    devtools((set, get, store) => ({\n      ...createTableLocalResegmentSlice(set, get, store),\n    })),\n  );\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type StateCreator } from 'zustand';\nimport { type Review } from '@coze-arch/idl/knowledge';\n\nexport interface IDocReviewState {\n  /**\n   * The id of the currently active doc review\n   */\n  currentReviewID?: string;\n  /**\n   * The ID of the currently selected segment\n   */\n  selectionIDs?: string[];\n  /**\n   * List of docReview\n   */\n  docReviewList: Review[];\n}\n\nexport interface IDocReviewAction {\n  /**\n   * Set the id of the currently active doc review\n   * @param id\n   */\n  setCurrentReviewID: (id: string) => void;\n  /**\n   * Sets the ID of the currently selected segment.\n   * @param ids\n   */\n  setSelectionIDs: (ids: string[]) => void;\n  /**\n   * Set up a list of docReviews\n   * @param list\n   */\n  setDocReviewList: (list: Review[]) => void;\n}\n\nexport type IDocReviewSlice = IDocReviewState & IDocReviewAction;\n\nexport const getDefaultDocReviewState = () => ({\n  currentReviewID: undefined,\n  selectionID: undefined,\n  docReviewList: [],\n});\n\nexport const createDocReviewSlice: StateCreator<IDocReviewSlice> = set => ({\n  ...getDefaultDocReviewState(),\n\n  setCurrentReviewID: (id: string) => set(() => ({ currentReviewID: id })),\n  setSelectionIDs: (ids: string[]) => set(() => ({ selectionIDs: ids })),\n  setDocReviewList: (list: Review[]) => set(() => ({ docReviewList: list })),\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { merge } from 'lodash-es';\nimport {\n  createLevelSegmentsSlice,\n  getDefaultLevelSegmentsState,\n} from '@coze-data/knowledge-stores';\nimport { ParsingType, type DocumentInfo } from '@coze-arch/idl/knowledge';\n\nimport {\n  createTextSlice,\n  getDefaultTextState,\n} from '@/features/knowledge-type/text/slice';\n\nimport { TextLocalResegmentStep } from '../constants';\nimport {\n  type UploadTextLocalResegmentState,\n  type UploadTextLocalResegmentStore,\n} from './types';\nimport {\n  createDocReviewSlice,\n  getDefaultDocReviewState,\n} from './doc-review-slice';\n\nconst getDefaultTextLocalResegmentState: () => UploadTextLocalResegmentState =\n  () => ({\n    ...getDefaultTextState(),\n    ...getDefaultDocReviewState(),\n    ...getDefaultLevelSegmentsState(),\n    currentStep: TextLocalResegmentStep.SEGMENT_CLEANER,\n    parsingStrategy: {\n      parsing_type: ParsingType.AccurateParsing,\n      image_extraction: true,\n      table_extraction: true,\n      image_ocr: false,\n    },\n    indexStrategy: {},\n    filterStrategy: [],\n    levelChunkStrategy: {\n      maxLevel: 3,\n      isSaveTitle: true,\n    },\n    documentInfo: null,\n  });\n\nexport const createTextLocalResegmentStore = () =>\n  create<UploadTextLocalResegmentStore>()(\n    devtools(\n      (set, get, ...args) => ({\n        ...createTextSlice(set, get, ...args),\n        ...createDocReviewSlice(set, get, ...args),\n        ...createLevelSegmentsSlice(set, get, ...args),\n        // overwrite\n        ...getDefaultTextLocalResegmentState(),\n        // /** reset state */\n        reset: () => {\n          set(getDefaultTextLocalResegmentState());\n        },\n        setFilterStrategy: filterStrategy => {\n          set({ filterStrategy }, false, 'setFilterStrategy');\n        },\n        setIndexStrategyByMerge: indexStrategy => {\n          set(\n            { indexStrategy: merge({}, get().indexStrategy, indexStrategy) },\n            false,\n            'setIndexStrategyByMerge',\n          );\n        },\n        setParsingStrategyByMerge: parsingStrategy => {\n          set(\n            {\n              parsingStrategy: merge(\n                {},\n                get().parsingStrategy,\n                parsingStrategy,\n              ),\n            },\n            false,\n            'setParsingStrategyByMerge',\n          );\n        },\n        setLevelChunkStrategy: (key, value) => {\n          set(state => ({\n            ...state,\n            levelChunkStrategy: {\n              ...state.levelChunkStrategy,\n              [key]: value,\n            },\n          }));\n        },\n        setDocumentInfo: (doc: DocumentInfo) => {\n          set({ documentInfo: doc });\n        },\n      }),\n      {\n        enabled: IS_DEV_MODE,\n        name: 'Coz.Data.TextLocalResegment',\n      },\n    ),\n  );\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ParsingType } from '@coze-arch/idl/knowledge';\nimport { I18n } from '@coze-arch/i18n';\nimport { Radio } from '@coze-arch/coze-design';\n\nexport const QuickParsing = () => (\n  <Radio value={ParsingType.FastParsing} extra={I18n.t('kl_write_005')}>\n    {I18n.t('kl_write_004')}\n  </Radio>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { I18n } from '@coze-arch/i18n';\n\nimport {\n  type FilterPageConfig,\n  type PDFDocumentFilterValue,\n} from '@/features/knowledge-type/text/interface';\n\nexport const getSortedFilterPages = (filterPagesConfig: FilterPageConfig[]) =>\n  filterPagesConfig\n    .filter(config => config.isFilter)\n    .map(config => config.pageIndex)\n    .sort((prev, after) => prev - after);\n\nexport const getFilterPagesString = (pages: number[]) => pages.join(' / ');\n\n/**\n * Render as the following example:\n * Paper 1: Filter page 2/4/6; set page local filtering\n * Paper 2: Filtering Page 1...\n */\nexport const renderDocumentFilterValue = ({\n  filterValue,\n  pdfList,\n}: {\n  filterValue: PDFDocumentFilterValue[];\n  pdfList: { name: string; uri: string }[];\n}) =>\n  filterValue\n    .map(value => {\n      const pdf = pdfList.find(item => item.uri === value.uri);\n      if (!pdf) {\n        return null;\n      }\n\n      const filterPages = getSortedFilterPages(value.filterPagesConfig);\n\n      if (!filterPages.length) {\n        return null;\n      }\n      const filterPagesString = getFilterPagesString(filterPages);\n      return `${pdf.name}: ${I18n.t('data_filter_values', {\n        filterPages: filterPagesString,\n      })}`;\n    })\n    .filter((filterString): filterString is string => Boolean(filterString))\n    .join('\\n');\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ReactNode } from 'react';\n\nimport cls from 'classnames';\nimport { Typography } from '@coze-arch/coze-design';\n\ninterface IDocumentItemProps {\n  id: string;\n  onClick: (id: string) => void;\n  selected: boolean;\n  title: string;\n  status?: 'pending' | 'finished' | 'failed';\n  addonAfter?: ReactNode;\n}\n\nexport const DocumentItem: React.FC<IDocumentItemProps> = props => {\n  const { id, onClick, title, selected, addonAfter } = props;\n\n  return (\n    <div\n      className={cls(\n        'w-full h-8 px-2 py-[6px] rounded-[8px] hover:coz-mg-primary cursor-pointer flex flex-nowrap',\n        selected && 'coz-mg-primary',\n      )}\n      onClick={() => onClick(id)}\n    >\n      <Typography.Text\n        className=\"w-full coz-fg-primary text-[14px] leading-[20px] grow truncate\"\n        ellipsis\n      >\n        {title}\n      </Typography.Text>\n      {addonAfter}\n    </div>\n  );\n};\n\nexport default DocumentItem;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from 'classnames';\nimport { I18n } from '@coze-arch/i18n';\nimport { Tag, Tooltip } from '@coze-arch/coze-design';\n\nimport {\n  getFilterPagesString,\n  getSortedFilterPages,\n} from '../../utils/render-document-filter-value';\nimport { DocumentItem } from './document-item';\n\ninterface FilterPageConfig {\n  pageIndex: number;\n  isFilter: boolean;\n}\n\ninterface Document {\n  // TODO: Expansion\n  id: string;\n  title: string;\n  /** Is there filtered content? */\n  filterPageConfigList: FilterPageConfig[];\n}\n\ninterface IDocumentListProps {\n  documents: Document[];\n  value: string;\n  onChange: (value: string) => void;\n  className?: string;\n}\n\nexport const DocumentList = (props: IDocumentListProps) => (\n  <div className={classNames('flex flex-col gap-1 h-full', props.className)}>\n    <div className=\"w-full pl-2 h-6 items-center flex\">\n      <div className=\"coz-fg-secondary text-[12px] font-[400] leading-4 shrink-0\">\n        {I18n.t('kl_write_105')}\n      </div>\n    </div>\n    <div className=\"flex flex-col gap-1 h-[150px] !overflow-scroll shrink-0\">\n      {props.documents.map(document => {\n        if (!document.id) {\n          return null;\n        }\n        const filterPages = getSortedFilterPages(document.filterPageConfigList);\n        const isFiltered = Boolean(filterPages.length);\n        const filterPagesString = getFilterPagesString(filterPages);\n\n        return (\n          <DocumentItem\n            id={document.id}\n            selected={document.id === props.value}\n            onClick={id => {\n              props.onChange(id);\n            }}\n            title={document.title}\n            addonAfter={\n              isFiltered ? (\n                <Tooltip\n                  content={I18n.t('data_filter_values', {\n                    filterPages: filterPagesString,\n                  })}\n                >\n                  <Tag color=\"primary\" className=\"flex-shrink-0\">\n                    {I18n.t('knowledge_new_002')}\n                  </Tag>\n                </Tooltip>\n              ) : null\n            }\n          />\n        );\n      })}\n    </div>\n  </div>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type Cropper from 'cropperjs';\n\nimport { type CropperSizePercent } from '@/features/knowledge-type/text/interface';\n\nconst fixPrecision = (value: number) => parseFloat(value.toFixed(2));\n\nexport const convertCropDataToPercentSize = ({\n  data,\n  pdfSize: { naturalHeight, naturalWidth },\n}: {\n  data: Cropper.Data;\n  pdfSize: {\n    naturalHeight: number;\n    naturalWidth: number;\n  };\n}): CropperSizePercent => {\n  const topPixel = data.y;\n  const bottomPixel = data.y + data.height;\n  const leftPixel = data.x;\n  const rightPixel = data.x + data.width;\n  return {\n    topPercent: fixPrecision(topPixel / naturalHeight),\n    bottomPercent: fixPrecision((naturalHeight - bottomPixel) / naturalHeight),\n    leftPercent: fixPrecision(leftPixel / naturalWidth),\n    rightPercent: fixPrecision((naturalWidth - rightPixel) / naturalWidth),\n  };\n};\n\nexport const convertPercentSizeToCropData = ({\n  cropSizePercent: { topPercent, bottomPercent, rightPercent, leftPercent },\n  pdfSize: { naturalHeight, naturalWidth },\n}: {\n  cropSizePercent: CropperSizePercent;\n  pdfSize: {\n    naturalHeight: number;\n    naturalWidth: number;\n  };\n}): Cropper.Data => {\n  const x = leftPercent * naturalWidth;\n  const y = topPercent * naturalHeight;\n  const width = naturalWidth - x - naturalWidth * rightPercent;\n  const height = naturalHeight - y - naturalHeight * bottomPercent;\n  return {\n    scaleX: 1,\n    scaleY: 1,\n    rotate: 0,\n    x,\n    y,\n    width,\n    height,\n  };\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Document, Page, pdfjs } from 'react-pdf';\nimport { useEffect, useRef, useState } from 'react';\n\nimport { produce } from 'immer';\nimport Cropper from 'cropperjs';\nimport classNames from 'classnames';\nimport { I18n } from '@coze-arch/i18n';\nimport {\n  IconCozArrowLeft,\n  IconCozArrowRight,\n  IconCozMinus,\n  IconCozPlus,\n} from '@coze-arch/coze-design/icons';\nimport { Checkbox, Divider, IconButton, Loading } from '@coze-arch/coze-design';\nimport 'cropperjs/dist/cropper.css';\n\nimport {\n  convertCropDataToPercentSize,\n  convertPercentSizeToCropData,\n} from '@/utils/convert-crop-data';\nimport {\n  type CropperSizePercent,\n  type FilterPageConfig,\n  type PDFDocumentFilterValue,\n} from '@/features/knowledge-type/text/interface';\n\nexport interface PDFDocumentProps {\n  uri: string;\n  url: string;\n  onChange?: (props: PDFDocumentFilterValue) => void;\n  className?: string;\n  initPageCropperSizePercent: CropperSizePercent | null;\n  filterPagesConfig: FilterPageConfig[];\n  enableCropper: boolean;\n}\n\npdfjs.GlobalWorkerOptions.workerSrc =\n  REGION === 'cn'\n    ? // cp-disable-next-line\n      `//lf-cdn.coze.cn/obj/unpkg/pdfjs-dist/${pdfjs.version}/build/pdf.worker.min.mjs`\n    : // cp-disable-next-line\n      `//sf-cdn.coze.com/obj/unpkg-va/pdfjs-dist/${pdfjs.version}/build/pdf.worker.min.mjs`;\n\nconst getDefaultState = () => ({\n  totalPages: 0,\n  currentPage: 0,\n  percentZoomRatio: 100,\n});\n\nconst ZOOM_RATIO_STEP = 0.1;\nconst PERCENT = 100;\n\ntype ChangeZoomRatioOption = 'increase' | 'decrease';\n\nconst PDF_WIDTH = 484;\n\nconst PDF_HEIGHT = 624;\n\n// eslint-disable-next-line @coze-arch/max-line-per-function\nexport const PDFDocument: React.FC<PDFDocumentProps> = ({\n  uri,\n  url,\n  onChange,\n  className,\n  initPageCropperSizePercent,\n  filterPagesConfig,\n  enableCropper,\n}) => {\n  const {\n    totalPages: defaultTotalPages,\n    currentPage: defaultCurrentPage,\n    percentZoomRatio: defaultPercentZoomRatio,\n  } = getDefaultState();\n  const [loading, setLoading] = useState(false);\n  const [totalPages, setTotalPages] = useState(defaultTotalPages);\n  const [currentPage, setCurrentPage] = useState(defaultCurrentPage);\n  const [percentZoomRatio, setPercentZoomRation] = useState(\n    defaultPercentZoomRatio,\n  );\n  const pageCanvasRef = useRef<HTMLCanvasElement>(null);\n  const cropperRef = useRef<Cropper>();\n\n  const onPDFLoadSuccess = ({ numPages }: { numPages: number }) => {\n    setCurrentPage(1);\n    setTotalPages(numPages);\n  };\n\n  const initCropper = () => {\n    if (!enableCropper) {\n      return;\n    }\n\n    if (!pageCanvasRef.current) {\n      return;\n    }\n\n    const pdfSize = {\n      naturalHeight: pageCanvasRef.current.height,\n      naturalWidth: pageCanvasRef.current.width,\n    };\n\n    cropperRef.current = new Cropper(pageCanvasRef.current, {\n      dragMode: 'crop',\n      zoomable: true,\n      zoomOnWheel: false,\n      viewMode: 2,\n      modal: false,\n      background: false,\n      highlight: true,\n      crop: event => {\n        onChange?.({\n          uri,\n          filterPagesConfig,\n          cropperSizePercent: convertCropDataToPercentSize({\n            data: event.detail,\n            pdfSize,\n          }),\n        });\n      },\n      data: initPageCropperSizePercent\n        ? convertPercentSizeToCropData({\n            cropSizePercent: initPageCropperSizePercent,\n            pdfSize,\n          })\n        : undefined,\n    });\n  };\n\n  const getChangedPercentZoomRatio = (\n    currentPercentRatio: number,\n    option: ChangeZoomRatioOption,\n  ) => {\n    const percentRatioStep = ZOOM_RATIO_STEP * PERCENT;\n    if (option === 'decrease') {\n      return currentPercentRatio - percentRatioStep;\n    }\n    return currentPercentRatio + percentRatioStep;\n  };\n\n  const changeZoomRatio = (option: ChangeZoomRatioOption) => {\n    setPercentZoomRation(prev => {\n      const currentPercentRatio = getChangedPercentZoomRatio(prev, option);\n      cropperRef.current?.zoomTo(currentPercentRatio / PERCENT);\n      return currentPercentRatio;\n    });\n  };\n\n  const increaseZoomRatio = () => {\n    changeZoomRatio('increase');\n  };\n\n  const decreaseZoomRatio = () => {\n    changeZoomRatio('decrease');\n  };\n\n  const onPageRenderSuccess = () => {\n    setLoading(false);\n    initCropper();\n  };\n\n  const nextPage = () => {\n    setCurrentPage(p => Math.min(p + 1, totalPages));\n  };\n\n  const prevPage = () => {\n    setCurrentPage(p => Math.max(p - 1, 1));\n  };\n\n  const onCurrentPageChange = () => {\n    setLoading(true);\n    return () => {\n      cropperRef.current?.destroy();\n    };\n  };\n\n  const reset = () => {\n    const {\n      currentPage: _currentPage,\n      totalPages: _totalPages,\n      percentZoomRatio: _percentZoomRatio,\n    } = getDefaultState();\n    setCurrentPage(_currentPage);\n    setTotalPages(_totalPages);\n    setPercentZoomRation(_percentZoomRatio);\n    cropperRef.current?.destroy();\n  };\n\n  useEffect(onCurrentPageChange, [currentPage]);\n\n  useEffect(() => reset, [uri]);\n\n  return (\n    <div\n      className={classNames('relative flex justify-center py-16px', className)}\n    >\n      {!loading ? (\n        <div className=\"absolute left-8px top-8px\">\n          <Checkbox\n            checked={\n              filterPagesConfig.find(config => config.pageIndex === currentPage)\n                ?.isFilter\n            }\n            onChange={e => {\n              onChange?.(\n                produce<PDFDocumentFilterValue>(\n                  {\n                    uri,\n                    filterPagesConfig,\n                    cropperSizePercent:\n                      enableCropper && cropperRef.current\n                        ? convertCropDataToPercentSize({\n                            data: cropperRef.current.getData(),\n                            pdfSize: cropperRef.current.getCanvasData(),\n                          })\n                        : null,\n                  },\n                  draft => {\n                    const target = draft.filterPagesConfig.find(\n                      config => config.pageIndex === currentPage,\n                    );\n                    if (!target) {\n                      draft.filterPagesConfig.push({\n                        pageIndex: currentPage,\n                        isFilter: Boolean(e.target.checked),\n                      });\n                      return;\n                    }\n                    target.isFilter = Boolean(e.target.checked);\n                  },\n                ),\n              );\n            }}\n          >\n            {I18n.t('kl_write_106')}\n          </Checkbox>\n        </div>\n      ) : null}\n      {loading ? (\n        <div\n          className=\"absolute w-full flex items-center justify-center\"\n          style={{ height: PDF_HEIGHT }}\n        >\n          <Loading loading />\n        </div>\n      ) : null}\n\n      <div style={{ height: PDF_HEIGHT, width: PDF_WIDTH }}>\n        <Document\n          className=\"w-full\"\n          file={url}\n          onLoadSuccess={onPDFLoadSuccess}\n          loading={null}\n        >\n          <Page\n            loading={<Loading loading />}\n            className=\"w-full\"\n            height={PDF_HEIGHT}\n            width={PDF_WIDTH}\n            canvasRef={pageCanvasRef}\n            pageNumber={currentPage}\n            onRenderSuccess={onPageRenderSuccess}\n            renderTextLayer={false}\n            renderAnnotationLayer={false}\n          />\n        </Document>\n      </div>\n      {!loading ? (\n        <div className=\"absolute right-8px top-8px flex items-center p-[4px] rounded-normal coz-shadow-default\">\n          <IconButton\n            onClick={prevPage}\n            disabled={currentPage <= 1}\n            icon={<IconCozArrowLeft />}\n          />\n          <div>\n            {currentPage}/{totalPages}\n          </div>\n          <IconButton\n            onClick={nextPage}\n            disabled={currentPage >= totalPages}\n            icon={<IconCozArrowRight />}\n          />\n          {enableCropper ? (\n            <>\n              <Divider margin={3} layout=\"vertical\" />\n              <IconButton\n                disabled={percentZoomRatio <= defaultPercentZoomRatio}\n                onClick={decreaseZoomRatio}\n                icon={<IconCozMinus />}\n              />\n              <div>{percentZoomRatio}%</div>\n              <IconButton onClick={increaseZoomRatio} icon={<IconCozPlus />} />\n            </>\n          ) : null}\n        </div>\n      ) : null}\n    </div>\n  );\n};\n","\n      import API from \"!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./filter-modal.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./filter-modal.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, useRef, useState } from 'react';\n\nimport { produce } from 'immer';\nimport cls from 'classnames';\nimport { I18n } from '@coze-arch/i18n';\nimport { Modal, type ModalProps } from '@coze-arch/coze-design';\n\nimport { type PDFDocumentFilterValue } from '@/features/knowledge-type/text';\nimport { DocumentList } from '@/components/document-list';\n\nimport { PDFDocument } from './pdf-document';\n\nimport styles from './filter-modal.module.less';\n\n//\nexport interface PDFFile {\n  uri: string;\n  url: string;\n  name: string;\n}\n\nexport const FilterModal: React.FC<\n  ModalProps & {\n    pdfList: PDFFile[];\n    value?: PDFDocumentFilterValue[];\n    onChange?: (props: PDFDocumentFilterValue[]) => void;\n  }\n> = ({ pdfList, value, onChange, onCancel: inputOnCancel, ...modalProps }) => {\n  const [currentUri, setCurrentUri] = useState(pdfList.at(0)?.uri ?? '');\n  const currentFileUrl = pdfList.find(i => i.uri === currentUri)?.url;\n  const currentDocValue = value?.find(v => v.uri === currentUri);\n  const filterValueCache = useRef<PDFDocumentFilterValue[]>([]);\n\n  const recordFilterValue = (filterValue: PDFDocumentFilterValue[]) => {\n    filterValueCache.current = filterValue;\n  };\n  const resetFilterValue = () => {\n    onChange?.(filterValueCache.current);\n  };\n\n  const onCancel: ModalProps['onCancel'] = e => {\n    resetFilterValue();\n    inputOnCancel?.(e);\n  };\n\n  useEffect(() => {\n    if (!modalProps.visible) {\n      return;\n    }\n    setCurrentUri(pdfList.at(0)?.uri ?? '');\n    recordFilterValue(value ?? []);\n    return () => {\n      filterValueCache.current = [];\n    };\n  }, [modalProps.visible]);\n\n  return (\n    <Modal\n      title={I18n.t('kl_write_103')}\n      size=\"xxl\"\n      maskClosable={false}\n      className={styles['filter-modal']}\n      cancelText={I18n.t('Cancel')}\n      okText={I18n.t('Confirm')}\n      onCancel={onCancel}\n      {...modalProps}\n    >\n      <div\n        className={cls(\n          'flex h-full',\n          'border border-solid coz-stroke-primary rounded-[8px]',\n          'overflow-hidden',\n        )}\n      >\n        <DocumentList\n          className=\"w-240px p-[16px]\"\n          documents={pdfList.map(item => ({\n            id: item.uri ?? '',\n            title: item.name,\n            filterPageConfigList:\n              value?.find(f => f.uri === item.uri)?.filterPagesConfig ?? [],\n          }))}\n          value={currentUri}\n          onChange={setCurrentUri}\n        />\n        <div className=\"border-[0.5px] border-solid coz-stroke-primary h-full w-[1px]\"></div>\n        {currentUri && currentFileUrl ? (\n          <PDFDocument\n            enableCropper={false}\n            className=\"flex-[1]\"\n            uri={currentUri}\n            url={currentFileUrl}\n            onChange={changedValue => {\n              if (!value) {\n                onChange?.([changedValue]);\n                return;\n              }\n              const res = produce<PDFDocumentFilterValue[]>(value, draft => {\n                const targetIndex = draft.findIndex(\n                  v => v.uri === changedValue.uri,\n                );\n\n                if (targetIndex < 0) {\n                  draft.push(changedValue);\n                  return;\n                }\n\n                draft[targetIndex] = changedValue;\n              });\n\n              onChange?.(res);\n            }}\n            filterPagesConfig={currentDocValue?.filterPagesConfig ?? []}\n            initPageCropperSizePercent={\n              currentDocValue?.cropperSizePercent ?? null\n            }\n          />\n        ) : null}\n      </div>\n    </Modal>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ComponentProps, type ComponentType, useState } from 'react';\n\nimport { I18n } from '@coze-arch/i18n';\nimport {\n  type CommonFieldProps,\n  TextArea,\n  Typography,\n  withField,\n} from '@coze-arch/coze-design';\n\nimport { renderDocumentFilterValue } from '@/utils/render-document-filter-value';\nimport { type PDFDocumentFilterValue } from '@/features/knowledge-type/text/interface';\n\nimport { FilterModal, type PDFFile } from './filter-modal';\n\nexport { type PDFFile };\n\nconst PDFFilterImpl: React.FC<{\n  value?: PDFDocumentFilterValue[];\n  onChange?: (value: PDFDocumentFilterValue[]) => void;\n  pdfList?: PDFFile[];\n}> = ({ value, onChange, pdfList }) => {\n  const [filterModalVisible, setFilterModalVisible] = useState(false);\n\n  const canFilter = pdfList && pdfList.length > 0;\n  const openFilterModal = () => {\n    if (canFilter) {\n      setFilterModalVisible(true);\n    }\n  };\n  const closeFilterModal = () => {\n    setFilterModalVisible(false);\n  };\n\n  return (\n    <>\n      <label className=\"leading-[20px] mb-[4px] flex items-center gap-[4px]\">\n        <Typography.Text fontSize=\"14px\" weight={500}>\n          {I18n.t('kl_write_102')}\n        </Typography.Text>\n        <Typography.Text\n          fontSize=\"12px\"\n          link={canFilter}\n          disabled={!canFilter}\n          onClick={openFilterModal}\n        >\n          {I18n.t('kl_write_103')}\n        </Typography.Text>\n      </label>\n      <TextArea\n        disabled\n        className=\"!coz-mg-primary\"\n        autosize={{ minRows: 3, maxRows: 6 }}\n        value={\n          value && pdfList\n            ? renderDocumentFilterValue({ filterValue: value, pdfList })\n            : ''\n        }\n        placeholder={I18n.t('kl_write_104')}\n      />\n      <FilterModal\n        value={value}\n        onChange={onChange}\n        visible={filterModalVisible}\n        onOk={closeFilterModal}\n        onCancel={closeFilterModal}\n        pdfList={pdfList ?? []}\n      />\n    </>\n  );\n};\n\nexport const PDFFilter: ComponentType<\n  ComponentProps<typeof PDFFilterImpl> & CommonFieldProps\n> = withField(PDFFilterImpl);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type ParsingStrategy } from '@coze-arch/idl/knowledge';\nimport { I18n } from '@coze-arch/i18n';\nimport { IconCozInfoCircle } from '@coze-arch/coze-design/icons';\nimport {\n  type BaseFormProps,\n  Form,\n  Tooltip,\n  Typography,\n} from '@coze-arch/coze-design';\n\nimport { type PDFDocumentFilterValue } from '@/features/knowledge-type/text/interface';\n\nimport { type PDFFile } from './pdf-filter/filter-modal';\nimport { PDFFilter } from './pdf-filter';\n\nexport interface DocumentParseFormValue\n  extends Omit<ParsingStrategy, 'parsing_type'> {\n  filterStrategy: PDFDocumentFilterValue[];\n}\nconst FORM_FIELD_KEY_MAP: Record<\n  keyof DocumentParseFormValue,\n  keyof DocumentParseFormValue\n> = {\n  filterStrategy: 'filterStrategy',\n  image_extraction: 'image_extraction',\n  image_ocr: 'image_ocr',\n  table_extraction: 'table_extraction',\n};\n\nexport type DocumentParseFormProps = BaseFormProps<DocumentParseFormValue> & {\n  pdfList?: PDFFile[];\n};\n\nexport const DocumentParseForm: React.FC<DocumentParseFormProps> = ({\n  pdfList,\n  ...formProps\n}) => (\n  <>\n    <Form<DocumentParseFormValue>\n      className=\"flex flex-col gap-[4px] [&_.semi-form-field]:p-0\"\n      {...formProps}\n    >\n      <div className=\"h-[24px] leading-[24px]\">\n        <Typography.Text fontSize=\"14px\" weight={500}>\n          {I18n.t('kl_write_100')}\n        </Typography.Text>\n      </div>\n      <Form.Checkbox noLabel field={FORM_FIELD_KEY_MAP.image_extraction}>\n        {I18n.t('kl_write_008')}\n        <Tooltip content={I18n.t('pic_not_supported')}>\n          <IconCozInfoCircle className=\"coz-fg-secondary w-[14px] ml-[4px]\" />\n        </Tooltip>\n      </Form.Checkbox>\n      <Form.Checkbox noLabel field={FORM_FIELD_KEY_MAP.image_ocr}>\n        {I18n.t('kl_write_009')}\n      </Form.Checkbox>\n      <Form.Checkbox noLabel field={FORM_FIELD_KEY_MAP.table_extraction}>\n        {I18n.t('kl_write_010')}\n      </Form.Checkbox>\n      <PDFFilter\n        field={FORM_FIELD_KEY_MAP.filterStrategy}\n        pdfList={pdfList}\n        noLabel\n        fieldClassName=\"!mt-[8px]\"\n      />\n    </Form>\n  </>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { merge, omit } from 'lodash-es';\nimport classNames from 'classnames';\nimport { type ParsingStrategy, ParsingType } from '@coze-arch/idl/knowledge';\nimport { I18n } from '@coze-arch/i18n';\nimport { Radio, Divider, type FormApi } from '@coze-arch/coze-design';\n\nimport { type PDFDocumentFilterValue } from '@/features/knowledge-type/text/interface';\n\nimport { type PDFFile } from './document-parse-form/pdf-filter/filter-modal';\nimport {\n  DocumentParseForm,\n  type DocumentParseFormValue,\n} from './document-parse-form';\n\ninterface PrecisionParsingProps {\n  parsingStrategy?: ParsingStrategy;\n  filterStrategy?: PDFDocumentFilterValue[];\n  pdfList?: PDFFile[];\n  getParseFormApi?: (formApi: FormApi<DocumentParseFormValue>) => void;\n  onChange: (params: {\n    parsingStrategy?: ParsingStrategy;\n    filterStrategy?: PDFDocumentFilterValue[];\n  }) => void;\n}\n\nconst PrecisionParsingContent = ({\n  parsingStrategy,\n  filterStrategy,\n  pdfList,\n  getParseFormApi,\n  onChange,\n}: PrecisionParsingProps) => (\n  <>\n    {I18n.t('kl_write_007')}\n    <div\n      className={classNames({\n        hidden: parsingStrategy?.parsing_type !== ParsingType.AccurateParsing,\n      })}\n    >\n      <Divider margin={12} />\n      <DocumentParseForm\n        getFormApi={getParseFormApi}\n        pdfList={pdfList}\n        initValues={{\n          ...omit(parsingStrategy, 'parsing_type'),\n          filterStrategy: filterStrategy ?? [],\n        }}\n        onValueChange={({\n          filterStrategy: formFilterValues,\n          ...parseValues\n        }) => {\n          onChange({\n            parsingStrategy: merge({}, parseValues),\n            filterStrategy: formFilterValues,\n          });\n        }}\n      />\n    </div>\n  </>\n);\n\nexport const PrecisionParsing = (props: PrecisionParsingProps) => (\n  <Radio\n    value={ParsingType.AccurateParsing}\n    extra={<PrecisionParsingContent {...props} />}\n  >\n    {I18n.t('kl_write_006')}\n  </Radio>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport type { ParsingStrategy, ParsingType } from '@coze-arch/idl/knowledge';\nimport { I18n } from '@coze-arch/i18n';\nimport type { FormApi } from '@coze-arch/coze-design';\n\nimport { type SegmentMode, type CustomSegmentRule } from '@/types';\nimport { CustomSegment } from '@/features/segment-strategys/segment-strategy/custom';\nimport { AutomaticCleaning } from '@/features/segment-strategys/segment-strategy/automatic-cleaning';\nimport { QuickParsing } from '@/features/segment-strategys/document-parse-strategy/quick-parsing';\nimport type { PDFFile } from '@/features/segment-strategys/document-parse-strategy/precision-parsing/document-parse-form/pdf-filter/filter-modal';\nimport type { DocumentParseFormValue } from '@/features/segment-strategys/document-parse-strategy/precision-parsing/document-parse-form';\nimport { PrecisionParsing } from '@/features/segment-strategys/document-parse-strategy/precision-parsing';\nimport type { PDFDocumentFilterValue } from '@/features/knowledge-type/text/interface';\nimport { defaultCustomSegmentRule } from '@/constants';\nimport { CardRadioGroup } from '@/components/card-radio-group';\nimport { CollapsePanel } from '@/components';\nexport interface OnChangeProps {\n  segmentRule?: CustomSegmentRule;\n  segmentMode?: SegmentMode;\n  parsingStrategy?: ParsingStrategy;\n  // indexStrategy?: IndexStrategy;\n  filterStrategy?: PDFDocumentFilterValue[];\n}\n\ninterface SegmentConfigProps {\n  segmentMode: SegmentMode;\n  segmentRule?: CustomSegmentRule;\n  parsingStrategy?: ParsingStrategy;\n  filterStrategy?: PDFDocumentFilterValue[];\n  onChange: (params: OnChangeProps) => void;\n  pdfList?: PDFFile[];\n  getParseFormApi?: (formApi: FormApi<DocumentParseFormValue>) => void;\n}\n\nexport const SegmentConfig = ({\n  segmentMode,\n  segmentRule = defaultCustomSegmentRule,\n  parsingStrategy,\n  filterStrategy,\n  onChange,\n  pdfList,\n  getParseFormApi,\n}: SegmentConfigProps) => (\n  <>\n    <CollapsePanel keepDOM header={I18n.t('kl_write_032')}>\n      <CardRadioGroup<ParsingType>\n        value={parsingStrategy?.parsing_type}\n        onChange={value => {\n          onChange({ parsingStrategy: { parsing_type: value } });\n        }}\n      >\n        <PrecisionParsing\n          parsingStrategy={parsingStrategy}\n          filterStrategy={filterStrategy}\n          pdfList={pdfList}\n          getParseFormApi={getParseFormApi}\n          onChange={onChange}\n        />\n        <QuickParsing />\n      </CardRadioGroup>\n    </CollapsePanel>\n    <CollapsePanel header={I18n.t('kl_write_011')}>\n      <CardRadioGroup<SegmentMode>\n        value={segmentMode}\n        onChange={value => {\n          onChange({ segmentMode: value, segmentRule });\n        }}\n      >\n        <AutomaticCleaning />\n        <CustomSegment\n          segmentMode={segmentMode}\n          segmentRule={segmentRule}\n          onChange={onChange}\n        />\n      </CardRadioGroup>\n    </CollapsePanel>\n  </>\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC, useEffect, useRef } from 'react';\n\nimport { useShallow } from 'zustand/react/shallow';\nimport { isUndefined } from 'lodash-es';\nimport { useKnowledgeParams } from '@coze-data/knowledge-stores';\nimport { type ContentProps } from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport { type FormApi } from '@coze-arch/coze-design';\n\nimport { validateCommonDocResegmentStep } from '@/utils/validate-common-doc-next-step';\nimport { getSegmentCleanerParams } from '@/utils/text';\nimport { SegmentMode } from '@/types';\nimport { useListDocumentReq } from '@/services';\nimport { type DocumentParseFormValue } from '@/features/segment-strategys/document-parse-strategy/precision-parsing/document-parse-form';\nimport {\n  SegmentConfig,\n  type OnChangeProps,\n} from '@/features/segment-config/text-local';\n\nimport type { UploadTextLocalResegmentStore } from '../../store';\nimport { TextLocalResegmentStep } from '../../constants';\n\n// ! Local file upload\nexport const TextSegment: FC<\n  ContentProps<UploadTextLocalResegmentStore>\n> = props => {\n  const { useStore, footer } = props;\n  const parseFormApi = useRef<FormApi<DocumentParseFormValue>>();\n  const {\n    setCurrentStep,\n    segmentRule,\n    segmentMode,\n    parsingStrategy,\n    filterStrategy,\n  } = useStore(\n    useShallow(state => ({\n      setCurrentStep: state.setCurrentStep,\n      segmentRule: state.segmentRule,\n      segmentMode: state.segmentMode || SegmentMode.AUTO,\n      parsingStrategy: state.parsingStrategy,\n      filterStrategy: state.filterStrategy,\n    })),\n  );\n\n  const {\n    setSegmentMode,\n    setParsingStrategyByMerge,\n    setSegmentRule,\n    setFilterStrategy,\n    setLevelChunkStrategy,\n    setDocumentInfo,\n  } = useStore.getState();\n\n  const { datasetID, docID } = useKnowledgeParams();\n\n  const listDocumentReq = useListDocumentReq(res => {\n    const resDocumentInfo = res.document_infos?.[0];\n    if (!resDocumentInfo || !resDocumentInfo.chunk_strategy) {\n      return;\n    }\n    const chunkStrategy = resDocumentInfo.chunk_strategy;\n    const segmentParams = getSegmentCleanerParams(resDocumentInfo);\n    if (!segmentParams) {\n      return;\n    }\n    setSegmentMode(segmentParams.segmentMode);\n    setSegmentRule(segmentParams.segmentRule);\n    setParsingStrategyByMerge(resDocumentInfo.parsing_strategy ?? {});\n    parseFormApi.current?.setValues(resDocumentInfo.parsing_strategy ?? {});\n    setLevelChunkStrategy('maxLevel', chunkStrategy.max_level ?? 3);\n    setLevelChunkStrategy('isSaveTitle', chunkStrategy.save_title);\n    setDocumentInfo(resDocumentInfo);\n  });\n\n  // TODO: Cut back\n  useEffect(() => {\n    if (docID) {\n      listDocumentReq({\n        dataset_id: datasetID || '',\n        document_ids: docID ? [docID] : [],\n      });\n    }\n  }, []);\n\n  return (\n    <>\n      <SegmentConfig\n        segmentRule={segmentRule}\n        segmentMode={segmentMode}\n        parsingStrategy={parsingStrategy}\n        filterStrategy={filterStrategy}\n        getParseFormApi={api => {\n          parseFormApi.current = api;\n        }}\n        onChange={({\n          segmentRule: rule,\n          segmentMode: mode,\n          parsingStrategy: inputParsingStrategy,\n          filterStrategy: inputFilterStrategy,\n        }: OnChangeProps) => {\n          rule !== undefined && setSegmentRule(rule);\n          mode !== undefined && setSegmentMode(mode);\n          if (!isUndefined(inputParsingStrategy)) {\n            setParsingStrategyByMerge(inputParsingStrategy);\n          }\n          if (!isUndefined(inputFilterStrategy)) {\n            setFilterStrategy(inputFilterStrategy);\n          }\n        }}\n      />\n      {footer?.([\n        {\n          e2e: KnowledgeE2e.ResegmentUploadUnitNextBtn,\n          type: 'hgltplus',\n          theme: 'solid',\n          onClick: () => setCurrentStep(TextLocalResegmentStep.SEGMENT_PREVIEW),\n          text: I18n.t('datasets_createFileModel_NextBtn'),\n          status: validateCommonDocResegmentStep(segmentMode, segmentRule),\n        },\n      ])}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type UseBoundStore, type StoreApi } from 'zustand';\nimport { merge } from 'lodash-es';\nimport { useRequest } from 'ahooks';\nimport { useKnowledgeParams } from '@coze-data/knowledge-stores';\nimport { DataNamespace, dataReporter } from '@coze-data/reporter';\nimport {\n  type ProgressItem,\n  CreateUnitStatus,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { REPORT_EVENTS } from '@coze-arch/report-events';\nimport { I18n } from '@coze-arch/i18n';\nimport { CustomError } from '@coze-arch/bot-error';\nimport { KnowledgeApi } from '@coze-arch/bot-api';\nimport { Toast } from '@coze-arch/coze-design';\n\nimport { convertFilterStrategyToParams } from '@/utils/convert-filter-strategy-to-params';\nimport { usePollingTaskProgress } from '@/hooks';\nimport { getCustomValues } from '@/features/knowledge-type/text/utils';\n\nimport { type UploadTextLocalResegmentStore } from '../../store';\n\nexport const useResegment = <T extends UploadTextLocalResegmentStore>(\n  useStore: UseBoundStore<StoreApi<T>>,\n) => {\n  const params = useKnowledgeParams();\n  const [segmentMode, segmentRule] = useStore(state => [\n    state.segmentMode,\n    state.segmentRule,\n  ]);\n  const [setCreateStatus, setProgressList] = useStore(state => [\n    state.setCreateStatus,\n    state.setProgressList,\n  ]);\n  const docReviewList = useStore(state => state.docReviewList);\n  const pollingTaskProgress = usePollingTaskProgress();\n  const docId = params.docID ?? '';\n\n  // TODO: Hierarchical correlation\n  const { run: handleProcessText } = useRequest(\n    async () => {\n      if (!params.datasetID) {\n        Toast.warning({\n          content: I18n.t('datasets_ID_miss'),\n          showClose: false,\n        });\n        throw new CustomError(\n          REPORT_EVENTS.KnowledgeResegment,\n          `${REPORT_EVENTS.KnowledgeResegment}: missing datasets_id`,\n        );\n      }\n      const { parsingStrategy, filterStrategy } = useStore.getState();\n      const fixedParsingStrategy = parsingStrategy;\n      try {\n        const { document_infos = [] } = await KnowledgeApi.Resegment(\n          merge(\n            {},\n            {\n              dataset_id: params.datasetID,\n              document_ids: [docId],\n              review_ids: docReviewList.map(item => item.review_id),\n              chunk_strategy: getCustomValues(segmentMode, segmentRule),\n              parsing_strategy: fixedParsingStrategy,\n            },\n            convertFilterStrategyToParams(filterStrategy.at(0)),\n          ),\n        );\n        if (Object.keys(document_infos).length) {\n          setCreateStatus(CreateUnitStatus.GET_TASK_PROGRESS);\n          await pollingTaskProgress(document_infos, {\n            onProgressing: (progressList: ProgressItem[]) => {\n              setProgressList(progressList);\n            },\n            onFinish: () => {\n              setCreateStatus(CreateUnitStatus.TASK_FINISH);\n            },\n          });\n        }\n      } catch (error) {\n        dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n          eventName: REPORT_EVENTS.KnowledgeProcessDocument,\n          error: error as Error,\n        });\n      }\n    },\n    { manual: true },\n  );\n  return handleProcessText;\n};\n","\n      import API from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC, useEffect } from 'react';\n\nimport {\n  useDataNavigate,\n  useKnowledgeParams,\n} from '@coze-data/knowledge-stores';\nimport { type ContentProps } from '@coze-data/knowledge-resource-processor-core';\nimport { getKnowledgeIDEQuery } from '@coze-data/knowledge-common-services';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\n\nimport { getProcessingDescMsg } from '@/utils';\nimport { UnitProgress } from '@/components';\n\nimport type { UploadTextLocalResegmentStore } from '../../store';\nimport { useResegment } from './hooks';\n\nimport styles from './index.module.less';\n\nexport const TextProcessing: FC<\n  ContentProps<UploadTextLocalResegmentStore>\n> = props => {\n  const { useStore, footer } = props;\n\n  const resourceNavigate = useDataNavigate();\n\n  /** store */\n  const progressList = useStore(state => state.progressList);\n  const createStatus = useStore(state => state.createStatus);\n\n  // const docReviewList = useStore(state => state.docReviewList);\n  /** config */\n  const params = useKnowledgeParams();\n\n  const handleResegment = useResegment(useStore);\n\n  useEffect(() => {\n    handleResegment();\n  }, []);\n\n  return (\n    <>\n      <UnitProgress progressList={progressList} createStatus={createStatus} />\n      {footer?.({\n        btns: [\n          {\n            e2e: KnowledgeE2e.ResegmentUnitConfirmBtn,\n            type: 'hgltplus',\n            theme: 'solid',\n            text: I18n.t('variable_reset_yes'),\n            onClick: () => {\n              const query = getKnowledgeIDEQuery() as Record<string, string>;\n\n              resourceNavigate.toResource?.(\n                'knowledge',\n                params.datasetID,\n                query,\n              );\n            },\n          },\n        ],\n        prefix: (\n          <span className={styles['footer-sub-tip']}>\n            {getProcessingDescMsg(createStatus)}\n          </span>\n        ),\n      })}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable react-hooks/exhaustive-deps */\n/* eslint-disable @typescript-eslint/no-magic-numbers */\n/* eslint-disable complexity */\n/* eslint-disable @coze-arch/max-line-per-function */\nimport { useEffect, useState, type ReactNode } from 'react';\n\nimport { nanoid } from 'nanoid';\nimport cls from 'classnames';\nimport { useRequest } from 'ahooks';\nimport { type ILevelSegment } from '@coze-data/knowledge-stores';\nimport { useTosContent } from '@coze-data/knowledge-common-hooks';\nimport { withTitle } from '@coze-data/knowledge-common-components/text-knowledge-editor/scenes/level';\nimport { LevelTextKnowledgeEditor } from '@coze-data/knowledge-common-components/text-knowledge-editor';\nimport {\n  SegmentMenu,\n  usePreviewPdf,\n  PreviewTxt,\n  PreviewMd,\n} from '@coze-data/knowledge-common-components';\nimport { ReviewStatus, type Review } from '@coze-arch/idl/knowledge';\nimport { I18n } from '@coze-arch/i18n';\nimport { KnowledgeApi } from '@coze-arch/bot-api';\nimport {\n  IconCozArrowLeft,\n  IconCozArrowRight,\n  IconCozInfoCircle,\n  IconCozMinus,\n  IconCozPlus,\n  IconCozSideExpand,\n} from '@coze-arch/coze-design/icons';\nimport { IconButton, Spin, Tag, Tooltip } from '@coze-arch/coze-design';\n\nimport { SegmentMode } from '../../types';\n\ninterface ISegmentPreviewProps {\n  docReviewList: Review[];\n  setDocReviewList?: (list: Review[]) => void;\n  currentReviewID?: string;\n  setCurrentReviewID: (id: string) => void;\n  selectionIDs?: string[];\n  setSelectionIDs: (ids: string[]) => void;\n  segmentMode: SegmentMode;\n  levelSegments: ILevelSegment[];\n  setLevelSegments: (segments: ILevelSegment[]) => void;\n  datasetID?: string;\n  segmentInfo?: ReactNode;\n}\n\nexport const SegmentPreview = (props: ISegmentPreviewProps) => {\n  const {\n    docReviewList,\n    setDocReviewList,\n    currentReviewID,\n    setCurrentReviewID,\n    levelSegments,\n    setLevelSegments,\n    selectionIDs,\n    setSelectionIDs,\n    segmentMode,\n    datasetID,\n    segmentInfo,\n  } = props;\n\n  const [isMenuPanelVisible, setIsMenuPanelVisible] = useState(true);\n\n  /** preview file */\n  const currentReview = docReviewList.find(\n    review => review.review_id === currentReviewID,\n  );\n  const fileType = currentReview?.document_type;\n  // The front end is not good to display docx, so you need to use the URL in pdf format converted by the back end.\n  const fileUrl = ['docx', 'doc'].includes(fileType ?? '')\n    ? currentReview?.preview_tos_url ?? ''\n    : currentReview?.tos_url ?? '';\n  const segmentTosUrl = currentReview?.doc_tree_tos_url ?? '';\n  // Save review when switching documents\n  const { loading: saveLoading, runAsync: saveDocumentReview } = useRequest(\n    async () => {\n      const res = await KnowledgeApi.SaveDocumentReview({\n        review_id: currentReviewID,\n        dataset_id: datasetID,\n        doc_tree_json: JSON.stringify({ chunks: levelSegments }),\n      });\n      return res.code === 0;\n    },\n    {\n      manual: true,\n    },\n  );\n  const { runAsync: getNewDocReview } = useRequest(\n    async () => {\n      const res = await KnowledgeApi.MGetDocumentReview({\n        dataset_id: datasetID,\n        review_ids: docReviewList.map(item => item.review_id ?? ''),\n      });\n      if (res.code === 0) {\n        setDocReviewList?.(res.reviews ?? []);\n      }\n    },\n    {\n      manual: true,\n    },\n  );\n\n  const {\n    pdfNode,\n    numPages,\n    currentPage,\n    onNext,\n    onBack,\n    scale,\n    increaseScale,\n    decreaseScale,\n  } = usePreviewPdf({\n    fileUrl,\n  });\n\n  const { content, loading: tosLoading } = useTosContent(\n    currentReview?.status === ReviewStatus.Enable && segmentTosUrl\n      ? segmentTosUrl\n      : undefined,\n  );\n\n  useEffect(() => {\n    if (content) {\n      setLevelSegments(\n        withTitle(content?.chunks ?? [], currentReview?.document_name),\n      );\n    }\n  }, [content]);\n\n  const getDocumentTag = (status: ReviewStatus) => {\n    switch (status) {\n      case ReviewStatus.Failed:\n        return (\n          <Tag size=\"mini\" color=\"red\">\n            {I18n.t('knowlege_qqq_003')}\n          </Tag>\n        );\n      case ReviewStatus.Processing:\n        return <Tag size=\"mini\">{I18n.t('knowlege_qqq_002')}</Tag>;\n      case ReviewStatus.Enable:\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"w-full grow flex flex-col item-center justify-center\">\n      <div className=\"flex w-full h-full border border-solid coz-stroke-primary coz-bg-max rounded-[8px]\">\n        <div className=\"w-full h-full flex\">\n          <div\n            className={cls(\n              'w-[300px] h-full px-4 flex flex-col',\n              'transition-all duration-100 ease-in-out',\n              !isMenuPanelVisible && '!w-[0px] !p-0 !invisible',\n            )}\n          >\n            <div className=\"w-full flex justify-between h-[48px] pl-[8px] items-center shrink-0\">\n              <div className=\"text-[14px] font-[500] leading-[20px] coz-fg-plus shrink-0 flex items-center gap-[4px]\">\n                {segmentMode === SegmentMode.CUSTOM\n                  ? I18n.t('datasets_createFileModel_step3_custom')\n                  : null}\n                {segmentMode === SegmentMode.AUTO\n                  ? I18n.t('datasets_createFileModel_step3_auto')\n                  : null}\n                {segmentMode === SegmentMode.LEVEL\n                  ? I18n.t('knowledge_level_001')\n                  : null}\n                {segmentInfo ? (\n                  <Tooltip content={segmentInfo} style={{ maxWidth: 500 }}>\n                    <IconCozInfoCircle className=\"coz-fg-secondary cursor-pointer\" />\n                  </Tooltip>\n                ) : null}\n              </div>\n              <IconButton\n                icon={<IconCozSideExpand />}\n                color=\"secondary\"\n                onClick={() => {\n                  setIsMenuPanelVisible(false);\n                }}\n              ></IconButton>\n            </div>\n            <Spin\n              wrapperClassName=\"w-full h-[500px] grow flex flex-col\"\n              childStyle={{ width: '100%', height: '100%' }}\n              spinning={saveLoading || tosLoading}\n            >\n              <SegmentMenu\n                list={docReviewList.map(item => ({\n                  id: item.review_id ?? '',\n                  title: item.document_name ?? '',\n                  tosUrl: item.doc_tree_tos_url ?? '',\n                  tag: getDocumentTag(item.status ?? ReviewStatus.Enable),\n                }))}\n                selectedID={currentReviewID}\n                onClick={async id => {\n                  if (id !== currentReviewID) {\n                    await saveDocumentReview();\n                    await getNewDocReview();\n                    setLevelSegments([]);\n                  }\n                  setCurrentReviewID(id);\n                }}\n                levelSegments={levelSegments}\n                setLevelSegments={setLevelSegments}\n                setSelectionIDs={setSelectionIDs}\n                treeVisible={segmentMode === SegmentMode.LEVEL}\n              />\n            </Spin>\n          </div>\n\n          <div className=\"h-full w-[calc(100%-300px)] flex grow\">\n            <div\n              className={cls(\n                'h-full w-1/2 flex-1',\n                isMenuPanelVisible &&\n                  'border border-r-0 border-y-0 border-solid coz-stroke-primary',\n                'flex flex-col',\n              )}\n            >\n              <div\n                className={cls(\n                  'w-full flex justify-between h-[48px] px-[16px] items-center coz-bg-max',\n                  'border border-x-0 border-t-0 border-solid coz-stroke-primary',\n                  !isMenuPanelVisible && 'rounded-tl-[8px]',\n                )}\n              >\n                <div className=\"flex w-full h-full items-center justify-between\">\n                  <div className=\"flex h-full items-center\">\n                    {!isMenuPanelVisible ? (\n                      <>\n                        <IconButton\n                          icon={<IconCozSideExpand className=\"rotate-180\" />}\n                          color=\"secondary\"\n                          className=\"mr-[8px]\"\n                          onClick={() => {\n                            setIsMenuPanelVisible(true);\n                          }}\n                        ></IconButton>\n                        <div className=\"w-[1px] h-[12px] coz-mg-primary mr-[8px]\"></div>\n                      </>\n                    ) : null}\n                    <div className=\"text-[14px] font-[500] leading-[20px] coz-fg-plus\">\n                      {I18n.t('knowledge_level_010')}\n                    </div>\n                  </div>\n                  {['pdf', 'docx', 'doc'].includes(fileType ?? '') &&\n                  numPages >= 1 ? (\n                    <div className=\"flex h-full items-center gap-[3px]\">\n                      <IconButton\n                        icon={<IconCozArrowLeft />}\n                        size=\"small\"\n                        color=\"secondary\"\n                        onClick={onBack}\n                      ></IconButton>\n                      <div className=\"coz-fg-secondary text-[12px] font-[400] leading-[24px]\">\n                        {currentPage} / {numPages}\n                      </div>\n                      <IconButton\n                        icon={<IconCozArrowRight />}\n                        size=\"small\"\n                        color=\"secondary\"\n                        onClick={onNext}\n                      />\n                      <div className=\"w-[1px] h-[12px] coz-mg-primary\"></div>\n                      <IconButton\n                        icon={<IconCozMinus />}\n                        size=\"small\"\n                        color=\"secondary\"\n                        onClick={decreaseScale}\n                      />\n                      <div className=\"coz-fg-secondary text-[12px] font-[400] leading-[16px]\">\n                        {Math.round(scale * 100)}%\n                      </div>\n                      <IconButton\n                        icon={<IconCozPlus />}\n                        size=\"small\"\n                        color=\"secondary\"\n                        onClick={increaseScale}\n                      />\n                    </div>\n                  ) : null}\n                </div>\n              </div>\n              <div className=\"grow w-full h-[650px] flex flex-col items-center overflow-auto\">\n                {fileType === 'md' ? <PreviewMd fileUrl={fileUrl} /> : null}\n                {fileType === 'txt' ? <PreviewTxt fileUrl={fileUrl} /> : null}\n                {['docx', 'pdf', 'doc'].includes(fileType ?? '') ? (\n                  <div className=\"grow w-full\">{pdfNode}</div>\n                ) : null}\n              </div>\n            </div>\n            <div\n              className={cls(\n                'h-full w-1/2 flex-1 coz-bg-max',\n                'border border-r-0 border-y-0 border-solid coz-stroke-primary',\n                'rounded-r-[8px]',\n                'flex flex-col',\n              )}\n            >\n              <div\n                className={cls(\n                  'w-full flex justify-between h-[48px] px-[16px] items-center',\n                  'border border-x-0 border-t-0 border-solid coz-stroke-primary',\n                )}\n              >\n                <div className=\"text-[14px] font-[500] leading-[20px] coz-fg-plus\">\n                  {I18n.t('knowledge_level_011')}\n                </div>\n              </div>\n              <div\n                className={cls(\n                  'w-full h-[650px] grow flex flex-col items-center overflow-auto',\n                  'p-4 pb-0',\n                )}\n              >\n                <Spin\n                  wrapperClassName=\"!w-full min-h-[650px] grow\"\n                  childStyle={{\n                    width: '100%',\n                    minHeight: '100%',\n                  }}\n                  spinning={!content}\n                >\n                  <LevelTextKnowledgeEditor\n                    readonly\n                    documentId={currentReviewID ?? ''}\n                    selectionIDs={selectionIDs}\n                    chunks={levelSegments.map(item => ({\n                      ...item,\n                      text_knowledge_editor_chunk_uuid: nanoid(),\n                      sequence: item.slice_sequence?.toString(),\n                      content: item.text,\n                    }))}\n                  />\n                </Spin>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable @coze-arch/max-line-per-function */\nimport { useEffect, useMemo, type FC } from 'react';\n\nimport classNames from 'classnames';\nimport { useRequest } from 'ahooks';\nimport { useKnowledgeParams } from '@coze-data/knowledge-stores';\nimport {\n  FooterBtnStatus,\n  type ContentProps,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { ReviewStatus } from '@coze-arch/idl/knowledge';\nimport { I18n } from '@coze-arch/i18n';\nimport { KnowledgeApi } from '@coze-arch/bot-api';\nimport { Toast } from '@coze-arch/coze-design';\n\nimport { PreProcessRule, SegmentMode, SeperatorType } from '@/types';\nimport { SegmentPreview } from '@/features/segment-preview';\nimport { getCustomValues } from '@/features/knowledge-type/text/utils';\nimport { getSeperatorOptionList } from '@/constants';\n\nimport type { UploadTextLocalResegmentStore } from '../../store';\nimport { TextLocalResegmentStep } from '../../constants';\n\nexport const SegmentPreviewStep: FC<\n  ContentProps<UploadTextLocalResegmentStore>\n> = props => {\n  const { useStore, footer } = props;\n  const params = useKnowledgeParams();\n  /** common store */\n  const setCurrentStep = useStore(state => state.setCurrentStep);\n  const segmentMode = useStore(state => state.segmentMode);\n  const docReviewList = useStore(state => state.docReviewList);\n  const setDocReviewList = useStore(state => state.setDocReviewList);\n  const currentReviewID = useStore(state => state.currentReviewID);\n  const setCurrentReviewID = useStore(state => state.setCurrentReviewID);\n  const selectionIDs = useStore(state => state.selectionIDs);\n  const setSelectionIDs = useStore(state => state.setSelectionIDs);\n  const levelSegments = useStore(state => state.levelSegments);\n  const setLevelSegments = useStore(state => state.setLevelSegments);\n  const parsingStrategy = useStore(state => state.parsingStrategy);\n  const levelChunkStrategy = useStore(state => state.levelChunkStrategy);\n  const segmentRule = useStore(state => state.segmentRule);\n  const documentInfo = useStore(state => state.documentInfo);\n\n  const docReviewCreated = useMemo(\n    () =>\n      Boolean(\n        docReviewList.find(item => item.document_name === documentInfo?.name),\n      ),\n    [docReviewList, documentInfo],\n  );\n\n  /** Create doc review */\n  useEffect(() => {\n    const createDocReview = async () => {\n      const res = await KnowledgeApi.CreateDocumentReview({\n        dataset_id: params.datasetID,\n        reviews: [{ document_id: documentInfo?.document_id }],\n        parsing_strategy: parsingStrategy,\n        chunk_strategy: getCustomValues(\n          segmentMode,\n          segmentRule,\n          levelChunkStrategy,\n        ),\n      });\n      if (res.code === 0 && res.reviews?.length) {\n        setDocReviewList(res.reviews);\n        setCurrentReviewID(res.reviews[0].review_id ?? '');\n      }\n    };\n    if (!docReviewCreated) {\n      createDocReview();\n    }\n    // TODO: segmentMode needs to be recreated when switching doc review\n  }, [\n    docReviewCreated,\n    parsingStrategy,\n    segmentMode,\n    segmentRule,\n    levelChunkStrategy,\n    documentInfo,\n  ]);\n\n  /** Poll doc review status */\n  const { run: pollDocReviewStatus, cancel: cancelPollDocReviewStatus } =\n    useRequest(\n      async () => {\n        const res = await KnowledgeApi.MGetDocumentReview({\n          dataset_id: params.datasetID,\n          review_ids: docReviewList.map(item => item.review_id ?? ''),\n        });\n        if (res.code === 0) {\n          setDocReviewList(res.reviews ?? []);\n        }\n      },\n      {\n        manual: true,\n        pollingInterval: 2000,\n      },\n    );\n\n  useEffect(() => {\n    if (docReviewCreated) {\n      pollDocReviewStatus();\n    }\n    return () => {\n      cancelPollDocReviewStatus();\n    };\n  }, [docReviewCreated]);\n\n  /** end polling */\n  const docReviewProcessFinished =\n    docReviewList.length > 0 &&\n    docReviewList.every(\n      item =>\n        // DocReview has no status when it is first created. In other cases, check whether the status is Processing.\n        typeof item.status !== 'undefined' &&\n        item.status !== ReviewStatus.Processing,\n    );\n\n  useEffect(() => {\n    if (docReviewProcessFinished) {\n      cancelPollDocReviewStatus();\n    }\n  }, [docReviewProcessFinished]);\n\n  const { loading: saveLoading, run: saveDocumentReview } = useRequest(\n    async () => {\n      const res = await KnowledgeApi.SaveDocumentReview({\n        review_id: currentReviewID,\n        dataset_id: params.datasetID,\n        doc_tree_json: JSON.stringify({ chunks: levelSegments }),\n      });\n      return res.code === 0;\n    },\n    {\n      manual: true,\n      onSuccess: data => {\n        if (data) {\n          setCurrentStep(TextLocalResegmentStep.EMBED_PROGRESS);\n        }\n      },\n      onError: () => {\n        Toast.error('变更保存失败');\n      },\n    },\n  );\n\n  return (\n    <>\n      <SegmentPreview\n        docReviewList={docReviewList}\n        // There is only one document when re-segmenting, so there is no need to refresh the docReviewList.\n        segmentMode={segmentMode}\n        currentReviewID={currentReviewID}\n        setCurrentReviewID={setCurrentReviewID}\n        selectionIDs={selectionIDs}\n        setSelectionIDs={setSelectionIDs}\n        levelSegments={levelSegments}\n        setLevelSegments={setLevelSegments}\n        datasetID={params.datasetID}\n        segmentInfo={\n          segmentMode !== SegmentMode.AUTO ? (\n            <div\n              className={classNames(\n                'flex flex-col',\n                'text-[14px] font-[400] leading-[20px] coz-fg-primary',\n              )}\n            >\n              {segmentMode === SegmentMode.LEVEL ? (\n                <>\n                  <span>\n                    {'\\u2022'} {I18n.t('knowledge_level_004')}:\n                    {levelChunkStrategy.maxLevel}\n                  </span>\n                  {levelChunkStrategy.isSaveTitle ? (\n                    <span>\n                      {'\\u2022'} {I18n.t('knowledge_level_005')}\n                    </span>\n                  ) : null}\n                </>\n              ) : null}\n              {segmentMode === SegmentMode.CUSTOM ? (\n                <>\n                  <span>\n                    {'\\u2022'} {I18n.t('datasets_Custom_segmentID')}:\n                    {segmentRule.separator.type !== SeperatorType.CUSTOM\n                      ? getSeperatorOptionList().find(\n                          item => item.value === segmentRule.separator.type,\n                        )?.label\n                      : segmentRule.separator.customValue}\n                  </span>\n                  <span>\n                    {'\\u2022'} {I18n.t('datasets_Custom_maxLength')}:\n                    {segmentRule.maxTokens}\n                  </span>\n                  <span>\n                    {'\\u2022'} {I18n.t('kl_write_014')}: {segmentRule.overlap}\n                  </span>\n                  {segmentRule.preProcessRules.includes(\n                    PreProcessRule.REMOVE_SPACES,\n                  ) ? (\n                    <span>\n                      {'\\u2022'} {I18n.t('datasets_Custom_rule_replace')}\n                    </span>\n                  ) : null}\n                  {segmentRule.preProcessRules.includes(\n                    PreProcessRule.REMOVE_EMAILS,\n                  ) ? (\n                    <span>\n                      {'\\u2022'} {I18n.t('datasets_Custom_rule_delete')}\n                    </span>\n                  ) : null}\n                </>\n              ) : null}\n            </div>\n          ) : null\n        }\n      />\n      {footer?.([\n        {\n          e2e: KnowledgeE2e.UploadUnitUpBtn,\n          type: 'primary',\n          theme: 'light',\n          onClick: () => setCurrentStep(TextLocalResegmentStep.SEGMENT_CLEANER),\n          text: I18n.t('datasets_createFileModel_previousBtn'),\n        },\n        {\n          e2e: KnowledgeE2e.UploadUnitNextBtn,\n          type: 'hgltplus',\n          theme: 'solid',\n          status: saveLoading\n            ? FooterBtnStatus.LOADING\n            : FooterBtnStatus.ENABLE,\n          onClick: async () => {\n            await saveDocumentReview();\n          },\n          text: I18n.t('datasets_createFileModel_NextBtn'),\n        },\n      ])}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type UploadConfig,\n  type FooterControlsProps,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { I18n } from '@coze-arch/i18n';\n\nimport { useTextDisplaySegmentStepCheck } from '@/hooks/common';\nimport { UploadFooter } from '@/components';\n\nimport {\n  createTextLocalResegmentStore,\n  type UploadTextLocalResegmentStore,\n} from './store';\nimport { SegmentPreviewStep, TextSegment, TextProcessing } from './steps';\nimport { TextLocalResegmentStep } from './constants';\n\nexport const TextLocalResegmentConfig: UploadConfig<\n  TextLocalResegmentStep,\n  UploadTextLocalResegmentStore\n> = {\n  steps: [\n    {\n      content: props => (\n        <TextSegment\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('kl_write_107'),\n      step: TextLocalResegmentStep.SEGMENT_CLEANER,\n    },\n    {\n      content: props => (\n        <SegmentPreviewStep\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('knowlege_qqq_001'),\n      step: TextLocalResegmentStep.SEGMENT_PREVIEW,\n      showThisStep: () => true,\n    },\n    {\n      content: props => (\n        <TextProcessing\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('datasets_createFileModel_step4'),\n      step: TextLocalResegmentStep.EMBED_PROGRESS,\n    },\n  ],\n  createStore: createTextLocalResegmentStore,\n  useUploadMount: store => useTextDisplaySegmentStepCheck(),\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type StateCreator } from 'zustand';\nimport { type Review } from '@coze-arch/idl/knowledge';\n\nexport interface IDocReviewState {\n  /**\n   * The id of the currently active doc review\n   */\n  currentReviewID?: string;\n  /**\n   * The ID of the currently selected segment\n   */\n  selectionIDs?: string[];\n  /**\n   * List of docReview\n   */\n  docReviewList: Review[];\n}\n\nexport interface IDocReviewAction {\n  /**\n   * Set the id of the currently active doc review\n   * @param id\n   */\n  setCurrentReviewID: (id: string) => void;\n  /**\n   * Sets the ID of the currently selected segment.\n   * @param ids\n   */\n  setSelectionIDs: (ids: string[]) => void;\n  /**\n   * Set up a list of docReviews\n   * @param list\n   */\n  setDocReviewList: (list: Review[]) => void;\n}\n\nexport type IDocReviewSlice = IDocReviewState & IDocReviewAction;\n\nexport const getDefaultDocReviewState = () => ({\n  currentReviewID: undefined,\n  selectionID: undefined,\n  docReviewList: [],\n});\n\nexport const createDocReviewSlice: StateCreator<IDocReviewSlice> = set => ({\n  ...getDefaultDocReviewState(),\n\n  setCurrentReviewID: (id: string) => set(() => ({ currentReviewID: id })),\n  setSelectionIDs: (ids: string[]) => set(() => ({ selectionIDs: ids })),\n  setDocReviewList: (list: Review[]) => set(() => ({ docReviewList: list })),\n});\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport { merge } from 'lodash-es';\nimport {\n  createLevelSegmentsSlice,\n  createStorageStrategySlice,\n  getDefaultLevelSegmentsState,\n} from '@coze-data/knowledge-stores';\nimport { ParsingType } from '@coze-arch/idl/knowledge';\n\nimport {\n  createTextSlice,\n  getDefaultTextState,\n} from '@/features/knowledge-type/text/slice';\n\nimport { TextLocalAddUpdateStep } from '../constants';\nimport {\n  type UploadTextLocalAddUpdateState,\n  type UploadTextLocalAddUpdateStore,\n} from './types';\nimport {\n  createDocReviewSlice,\n  getDefaultDocReviewState,\n} from './doc-review-slice';\n\nconst getDefaultTextLocalAddUpdateState: () => UploadTextLocalAddUpdateState =\n  () => ({\n    ...getDefaultTextState(),\n    ...getDefaultDocReviewState(),\n    ...getDefaultLevelSegmentsState(),\n    currentStep: TextLocalAddUpdateStep.UPLOAD_FILE,\n    parsingStrategy: {\n      parsing_type: ParsingType.AccurateParsing,\n      image_extraction: true,\n      table_extraction: true,\n      image_ocr: false,\n    },\n    indexStrategy: {},\n    filterStrategy: [],\n    levelChunkStrategy: {\n      maxLevel: 3,\n      isSaveTitle: true,\n    },\n  });\n\nexport const createTextLocalAddUpdateStore = () =>\n  create<UploadTextLocalAddUpdateStore>()(\n    devtools(\n      (set, get, ...args) => ({\n        ...createTextSlice(set, get, ...args),\n        ...createDocReviewSlice(set, get, ...args),\n        ...createLevelSegmentsSlice(set, get, ...args),\n        ...createStorageStrategySlice(set, get, ...args),\n        // overwrite\n        ...getDefaultTextLocalAddUpdateState(),\n        // /** reset state */\n        reset: () => {\n          set(getDefaultTextLocalAddUpdateState());\n        },\n        setFilterStrategy: filterStrategy => {\n          set({ filterStrategy }, false, 'setFilterStrategy');\n        },\n        setIndexStrategyByMerge: indexStrategy => {\n          set(\n            { indexStrategy: merge({}, get().indexStrategy, indexStrategy) },\n            false,\n            'setIndexStrategyByMerge',\n          );\n        },\n        setParsingStrategyByMerge: parsingStrategy => {\n          set(\n            {\n              parsingStrategy: merge(\n                {},\n                get().parsingStrategy,\n                parsingStrategy,\n              ),\n            },\n            false,\n            'setParsingStrategyByMerge',\n          );\n        },\n        setLevelChunkStrategy: (key, value) => {\n          set(state => ({\n            ...state,\n            levelChunkStrategy: {\n              ...state.levelChunkStrategy,\n              [key]: value,\n            },\n          }));\n        },\n      }),\n      {\n        enabled: IS_DEV_MODE,\n        name: 'Coz.Data.TextLocalAddUpdate',\n      },\n    ),\n  );\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable @coze-arch/max-line-per-function */\nimport { useEffect, useMemo, type FC } from 'react';\n\nimport { isEqual } from 'lodash-es';\nimport classNames from 'classnames';\nimport { useRequest } from 'ahooks';\nimport { useKnowledgeParams } from '@coze-data/knowledge-stores';\nimport {\n  FooterBtnStatus,\n  type ContentProps,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { ReviewStatus } from '@coze-arch/idl/knowledge';\nimport { I18n } from '@coze-arch/i18n';\nimport { KnowledgeApi } from '@coze-arch/bot-api';\nimport { Toast } from '@coze-arch/coze-design';\n\nimport { PreProcessRule, SegmentMode, SeperatorType } from '@/types';\nimport { SegmentPreview } from '@/features/segment-preview';\nimport { getCustomValues } from '@/features/knowledge-type/text/utils';\nimport { getSeperatorOptionList } from '@/constants';\n\nimport type { UploadTextLocalAddUpdateStore } from '../../store';\nimport { TextLocalAddUpdateStep } from '../../constants';\n\nexport const SegmentPreviewStep: FC<\n  ContentProps<UploadTextLocalAddUpdateStore>\n> = props => {\n  const { useStore, footer } = props;\n  const params = useKnowledgeParams();\n  /** common store */\n  const setCurrentStep = useStore(state => state.setCurrentStep);\n  const unitList = useStore(state => state.unitList);\n  const segmentMode = useStore(state => state.segmentMode);\n  const docReviewList = useStore(state => state.docReviewList);\n  const setDocReviewList = useStore(state => state.setDocReviewList);\n  const currentReviewID = useStore(state => state.currentReviewID);\n  const setCurrentReviewID = useStore(state => state.setCurrentReviewID);\n  const selectionIDs = useStore(state => state.selectionIDs);\n  const setSelectionIDs = useStore(state => state.setSelectionIDs);\n  const levelSegments = useStore(state => state.levelSegments);\n  const setLevelSegments = useStore(state => state.setLevelSegments);\n  const parsingStrategy = useStore(state => state.parsingStrategy);\n  const levelChunkStrategy = useStore(state => state.levelChunkStrategy);\n  const segmentRule = useStore(state => state.segmentRule);\n\n  const docReviewCreated = useMemo(\n    () =>\n      isEqual(\n        docReviewList.map(item => item.document_name),\n        unitList.map(item => item.name),\n      ),\n    [docReviewList, unitList],\n  );\n\n  /** Create doc review */\n  useEffect(() => {\n    const createDocReview = async () => {\n      const { unitList: inputUnitList } = useStore.getState();\n      const res = await KnowledgeApi.CreateDocumentReview({\n        dataset_id: params.datasetID,\n        reviews: inputUnitList.map(item => ({\n          tos_uri: item.uri,\n          document_name: item.name,\n          document_type: item.type,\n        })),\n        parsing_strategy: parsingStrategy,\n        chunk_strategy: getCustomValues(\n          segmentMode,\n          segmentRule,\n          levelChunkStrategy,\n        ),\n      });\n      if (res.code === 0 && res.reviews?.length) {\n        setDocReviewList(res.reviews);\n        setCurrentReviewID(res.reviews[0].review_id ?? '');\n      }\n    };\n    if (!docReviewCreated) {\n      createDocReview();\n    }\n    // TODO: segmentMode needs to be recreated when switching doc review\n  }, [\n    docReviewCreated,\n    parsingStrategy,\n    segmentMode,\n    segmentRule,\n    levelChunkStrategy,\n  ]);\n\n  /** Poll doc review status */\n  const { run: pollDocReviewStatus, cancel: cancelPollDocReviewStatus } =\n    useRequest(\n      async () => {\n        const res = await KnowledgeApi.MGetDocumentReview({\n          dataset_id: params.datasetID,\n          review_ids: docReviewList.map(item => item.review_id ?? ''),\n        });\n        if (res.code === 0) {\n          setDocReviewList(res.reviews ?? []);\n        }\n      },\n      {\n        manual: true,\n        pollingInterval: 2000,\n      },\n    );\n\n  useEffect(() => {\n    if (docReviewCreated) {\n      pollDocReviewStatus();\n    }\n    return () => {\n      cancelPollDocReviewStatus();\n    };\n  }, [docReviewCreated]);\n\n  /** end polling */\n  const docReviewProcessFinished =\n    docReviewList.length > 0 &&\n    docReviewList.every(\n      item =>\n        // DocReview has no status when it is first created. In other cases, check whether the status is Processing.\n        typeof item.status !== 'undefined' &&\n        item.status !== ReviewStatus.Processing,\n    );\n\n  useEffect(() => {\n    if (docReviewProcessFinished) {\n      cancelPollDocReviewStatus();\n    }\n  }, [docReviewProcessFinished]);\n\n  const { loading: saveLoading, run: saveDocumentReview } = useRequest(\n    async () => {\n      const res = await KnowledgeApi.SaveDocumentReview({\n        review_id: currentReviewID,\n        dataset_id: params.datasetID,\n        doc_tree_json: JSON.stringify({ chunks: levelSegments }),\n      });\n      return res.code === 0;\n    },\n    {\n      manual: true,\n      onSuccess: data => {\n        if (data) {\n          setCurrentStep(TextLocalAddUpdateStep.EMBED_PROGRESS);\n        }\n      },\n      onError: () => {\n        Toast.error('变更保存失败');\n      },\n    },\n  );\n\n  return (\n    <>\n      <SegmentPreview\n        docReviewList={docReviewList}\n        setDocReviewList={setDocReviewList}\n        segmentMode={segmentMode}\n        currentReviewID={currentReviewID}\n        setCurrentReviewID={setCurrentReviewID}\n        selectionIDs={selectionIDs}\n        setSelectionIDs={setSelectionIDs}\n        levelSegments={levelSegments}\n        setLevelSegments={setLevelSegments}\n        datasetID={params.datasetID}\n        segmentInfo={\n          segmentMode !== SegmentMode.AUTO ? (\n            <div\n              className={classNames(\n                'flex flex-col',\n                'text-[14px] font-[400] leading-[20px] coz-fg-primary',\n              )}\n            >\n              {segmentMode === SegmentMode.LEVEL ? (\n                <>\n                  <span>\n                    {'\\u2022'} {I18n.t('knowledge_level_004')}:\n                    {levelChunkStrategy.maxLevel}\n                  </span>\n                  {levelChunkStrategy.isSaveTitle ? (\n                    <span>\n                      {'\\u2022'} {I18n.t('knowledge_level_005')}\n                    </span>\n                  ) : null}\n                </>\n              ) : null}\n              {segmentMode === SegmentMode.CUSTOM ? (\n                <>\n                  <span>\n                    {'\\u2022'} {I18n.t('datasets_Custom_segmentID')}:\n                    {segmentRule.separator.type !== SeperatorType.CUSTOM\n                      ? getSeperatorOptionList().find(\n                          item => item.value === segmentRule.separator.type,\n                        )?.label\n                      : segmentRule.separator.customValue}\n                  </span>\n                  <span>\n                    {'\\u2022'} {I18n.t('datasets_Custom_maxLength')}:\n                    {segmentRule.maxTokens}\n                  </span>\n                  <span>\n                    {'\\u2022'} {I18n.t('kl_write_014')}: {segmentRule.overlap}\n                  </span>\n                  {segmentRule.preProcessRules.includes(\n                    PreProcessRule.REMOVE_SPACES,\n                  ) ? (\n                    <span>\n                      {'\\u2022'} {I18n.t('datasets_Custom_rule_replace')}\n                    </span>\n                  ) : null}\n                  {segmentRule.preProcessRules.includes(\n                    PreProcessRule.REMOVE_EMAILS,\n                  ) ? (\n                    <span>\n                      {'\\u2022'} {I18n.t('datasets_Custom_rule_delete')}\n                    </span>\n                  ) : null}\n                </>\n              ) : null}\n            </div>\n          ) : null\n        }\n      />\n      {footer?.([\n        {\n          e2e: KnowledgeE2e.UploadUnitUpBtn,\n          type: 'primary',\n          theme: 'light',\n          onClick: () => {\n            setDocReviewList([]);\n            setCurrentStep(TextLocalAddUpdateStep.SEGMENT_CLEANER);\n          },\n          text: I18n.t('datasets_createFileModel_previousBtn'),\n        },\n        {\n          e2e: KnowledgeE2e.UploadUnitNextBtn,\n          type: 'hgltplus',\n          theme: 'solid',\n          status: saveLoading\n            ? FooterBtnStatus.LOADING\n            : FooterBtnStatus.ENABLE,\n          onClick: async () => {\n            await saveDocumentReview();\n          },\n          text: I18n.t('datasets_createFileModel_NextBtn'),\n        },\n      ])}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { type FC } from 'react';\n\nimport {\n  UnitType,\n  type UnitItem,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { FormatType } from '@coze-arch/bot-api/memory';\n\nimport { ProcessStatus } from '../../../types';\nimport { getProcessStatus } from '../../../components/upload-unit-table/utils';\nimport { UploadUnitTable } from '../../../components/upload-unit-table/upload-unit-table';\nimport {\n  type ColumnInfo,\n  type UploadUnitTableProps,\n  type RenderColumnsProps,\n} from '../../../components/upload-unit-table/types';\nimport {\n  ActionRenderByDelete,\n  ActionRenderByEditName,\n  ActionRenderByRetry,\n  getFileSizeInfo,\n} from '../../../components/upload-unit-table';\n\nexport const TextLocalTaskList: FC<\n  Omit<UploadUnitTableProps, 'getColumns' | 'type'>\n> = props => {\n  const { unitList = [] } = props;\n\n  if (unitList.length === 0) {\n    return null;\n  }\n\n  // Implement your own getTextLocalInfo method\n  const getTextLocalInfo = (data: RenderColumnsProps) => {\n    const { record } = data;\n    const curStatus = getProcessStatus(record?.status);\n\n    return {\n      formatType: FormatType.Text,\n      subText: getFileSizeInfo(record),\n      actions: [\n        curStatus === ProcessStatus.Failed ? (\n          <ActionRenderByRetry {...data} />\n        ) : null,\n        curStatus === ProcessStatus.Complete ? (\n          <ActionRenderByEditName {...data} />\n        ) : null,\n        <ActionRenderByDelete {...data} />,\n      ],\n    };\n  };\n\n  const getColumns = (record: UnitItem, index: number): ColumnInfo => {\n    const result = getTextLocalInfo({\n      record,\n      index,\n      params: { ...props, type: UnitType.TEXT_DOC },\n    });\n\n    return result as ColumnInfo;\n  };\n\n  return (\n    <UploadUnitTable\n      {...props}\n      type={UnitType.TEXT_DOC}\n      getColumns={getColumns}\n    />\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DataNamespace, dataReporter } from '@coze-data/reporter';\nimport { type UnitItem } from '@coze-data/knowledge-resource-processor-core';\nimport { REPORT_EVENTS } from '@coze-arch/report-events';\nimport { FileBizType } from '@coze-arch/bot-api/developer_api';\nimport { DeveloperApi } from '@coze-arch/bot-api';\n\nimport { transformUnitList, getFileExtension, getBase64 } from '@/utils';\n\nexport const useRetry = (params: {\n  unitList: UnitItem[];\n  setUnitList: (unitList: UnitItem[]) => void;\n}) => {\n  const { unitList, setUnitList } = params;\n\n  const onRetry = async (record: UnitItem, index: number) => {\n    try {\n      const { fileInstance } = record;\n      if (fileInstance) {\n        const { name } = fileInstance;\n        const extension = getFileExtension(name);\n        const base64 = await getBase64(fileInstance);\n        const result = await DeveloperApi.UploadFile({\n          file_head: {\n            file_type: extension,\n            biz_type: FileBizType.BIZ_BOT_DATASET,\n          },\n          data: base64,\n        });\n\n        setUnitList(\n          transformUnitList({\n            unitList,\n            data: result?.data,\n            fileInstance,\n            index,\n          }),\n        );\n      }\n    } catch (e) {\n      const error = e as Error;\n      dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n        eventName: REPORT_EVENTS.KnowledgeUploadFile,\n        error,\n      });\n    }\n  };\n  return onRetry;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useMemo, useContext } from 'react';\n\nimport { KnowledgeParamsStoreContext } from '@coze-data/knowledge-stores/src/context';\nimport {\n  type UnitItem,\n  type ContentProps,\n  FooterBtnStatus,\n  UploadStatus,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\n\nimport { useDocIdFromQuery } from '@/utils';\nimport { TextLocalTaskList } from '@/features/upload-task-list';\nimport { PDF_MAX_PAGES } from '@/constants/components';\nimport { getTextUploadChannelConfig, type Channel } from '@/constants/common';\nimport { UNIT_MAX_MB } from '@/constants';\nimport { UploadUnitFile } from '@/components';\n\nimport type { UploadTextLocalAddUpdateStore } from '../../store';\nimport { TextLocalAddUpdateStep } from '../../constants';\nimport { useRetry } from './hooks';\n\nconst UpdateContentMaxLimit = 1;\n\nexport const TextUpload = <T extends UploadTextLocalAddUpdateStore>(\n  props: ContentProps<T>,\n) => {\n  const { useStore, footer } = props;\n  const isDouyin = useContext(KnowledgeParamsStoreContext)?.paramsStore?.(\n    s => s.params?.isDouyinBot,\n  );\n  /** common store */\n  const unitList = useStore(state => state.unitList);\n  /** common action */\n  const setUnitList = useStore(state => state.setUnitList);\n  const setCurrentStep = useStore(state => state.setCurrentStep);\n\n  const onRetry = useRetry({ unitList, setUnitList });\n\n  const docId = useDocIdFromQuery();\n  const channel: Channel = isDouyin ? 'DOUYIN' : 'DEFAULT';\n  const textUploadChannelConfig = getTextUploadChannelConfig(channel);\n  const AddUnitMaxLimit = textUploadChannelConfig.addUnitMaxLimit;\n\n  const buttonStatus = useMemo(() => {\n    if (\n      unitList.length === 0 ||\n      unitList.some(\n        unitItem =>\n          unitItem.name.length === 0 ||\n          unitItem.status !== UploadStatus.SUCCESS,\n      )\n    ) {\n      return FooterBtnStatus.DISABLE;\n    }\n    return FooterBtnStatus.ENABLE;\n  }, [unitList]);\n\n  const isUpdateMode = useMemo(() => !!docId, [docId]);\n\n  const uploadLimit = useMemo(\n    () => (isUpdateMode ? UpdateContentMaxLimit : AddUnitMaxLimit),\n    [isUpdateMode, AddUnitMaxLimit],\n  );\n\n  const hideUploadFile = useMemo(\n    () => isUpdateMode && unitList?.length === UpdateContentMaxLimit,\n    [unitList, isUpdateMode],\n  );\n\n  const handleClickNext = () => {\n    setCurrentStep(TextLocalAddUpdateStep.SEGMENT_CLEANER);\n  };\n\n  const handleUnitListUpdate = (data: UnitItem[]) => {\n    let result = data;\n    if (docId) {\n      result = data.map(item => ({\n        ...item,\n        docId,\n      }));\n    }\n    setUnitList(result);\n  };\n\n  const accept = textUploadChannelConfig.acceptFileTypes.join(',');\n\n  return (\n    <>\n      <UploadUnitFile\n        action=\"\"\n        accept={accept}\n        dragMainText={I18n.t('datasets_createFileModel_step2_UploadDoc')}\n        dragSubText={I18n.t(\n          'datasets_createFileModel_step2_UploadDoc_description',\n          {\n            fileFormat: textUploadChannelConfig.fileFormatString,\n            maxDocNum: uploadLimit,\n            filesize: `${UNIT_MAX_MB}MB`,\n            pdfPageNum: PDF_MAX_PAGES,\n          },\n        )}\n        limit={uploadLimit}\n        unitList={unitList}\n        multiple={uploadLimit > 1}\n        style={hideUploadFile ? { visibility: 'hidden', height: 0 } : undefined}\n        setUnitList={handleUnitListUpdate}\n        onFinish={handleUnitListUpdate}\n      />\n\n      {unitList.length > 0 ? (\n        <div className=\"overflow-y-auto mt-[16px]\">\n          <TextLocalTaskList\n            edit={!isUpdateMode}\n            unitList={unitList}\n            onChange={setUnitList}\n            onRetry={onRetry}\n          />\n        </div>\n      ) : null}\n\n      {footer?.([\n        {\n          type: 'hgltplus',\n          theme: 'solid',\n          text: I18n.t('datasets_createFileModel_NextBtn'),\n          status: buttonStatus,\n          onClick: handleClickNext,\n          e2e: KnowledgeE2e.UploadUnitNextBtn,\n        },\n      ])}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC, useEffect } from 'react';\n\nimport { useShallow } from 'zustand/react/shallow';\nimport { get, isUndefined } from 'lodash-es';\nimport { useKnowledgeParams } from '@coze-data/knowledge-stores';\nimport { type ContentProps } from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { type ParsingStrategy } from '@coze-arch/idl/knowledge';\nimport { I18n } from '@coze-arch/i18n';\nimport { KnowledgeApi } from '@coze-arch/bot-api';\n\nimport { validateCommonDocResegmentStep } from '@/utils/validate-common-doc-next-step';\nimport { getSegmentCleanerParams, getStorageStrategyEnabled } from '@/utils';\nimport { SegmentMode } from '@/types';\nimport { useListDocumentReq } from '@/services';\nimport {\n  SegmentConfig,\n  type OnChangeProps,\n} from '@/features/segment-config/text-local';\nimport { type PDFDocumentFilterValue } from '@/features/knowledge-type/text';\n\nimport type { UploadTextLocalAddUpdateStore } from '../../store';\nimport { TextLocalAddUpdateStep } from '../../constants';\n\n// ! Local file upload\nexport const TextSegment: FC<\n  ContentProps<UploadTextLocalAddUpdateStore>\n> = props => {\n  const { useStore, footer } = props;\n  // const indexFormApi = useRef<FormApi<DocumentIndexFormValue>>();\n  const {\n    unitList,\n    setCurrentStep,\n    segmentRule,\n    segmentMode,\n    parsingStrategy,\n    filterStrategy,\n  } = useStore(\n    useShallow(state => ({\n      unitList: state.unitList,\n      setCurrentStep: state.setCurrentStep,\n      segmentRule: state.segmentRule,\n      segmentMode: state.segmentMode || SegmentMode.AUTO,\n      parsingStrategy: state.parsingStrategy,\n      filterStrategy: state.filterStrategy,\n    })),\n  );\n\n  const {\n    setSegmentMode,\n    setParsingStrategyByMerge,\n    setSegmentRule,\n    setFilterStrategy,\n    setEnableStorageStrategy,\n  } = useStore.getState();\n\n  const { datasetID, docID } = useKnowledgeParams();\n\n  // const { data: vectorModelList } = useRequest(\n  //   async () => {\n  //     const res = await KnowledgeApi.ListModel();\n  //     return res.models.map(m => ({\n  //       id: m.name ?? '',\n  //       name: m.name ?? '',\n  //     }));\n  //   },\n  //   {\n  //     onSuccess: response => {\n  //       indexFormApi.current?.setValue('model', response.at(0)?.id);\n  //     },\n  //   },\n  // );\n\n  const listDocumentReq = useListDocumentReq(res => {\n    const segment = getSegmentCleanerParams(get(res, 'document_infos[0]', {}));\n    if (segment) {\n      setSegmentRule(segment.segmentRule);\n      setSegmentMode(segment.segmentMode);\n    }\n  });\n\n  useEffect(() => {\n    if (docID) {\n      listDocumentReq({\n        dataset_id: datasetID || '',\n        document_ids: [docID || ''],\n      });\n    }\n  }, []);\n\n  useEffect(() => {\n    if (datasetID) {\n      KnowledgeApi.DatasetDetail({ dataset_ids: [datasetID] }).then(res => {\n        const dataset = res.dataset_details?.[datasetID];\n        setEnableStorageStrategy(getStorageStrategyEnabled(dataset));\n      });\n    }\n  }, [datasetID]);\n\n  const segmentValid = validateCommonDocResegmentStep(segmentMode, segmentRule);\n  const nextBtnStatus = segmentValid;\n\n  return (\n    <>\n      <SegmentConfig\n        // vectorModelList={vectorModelList}\n        pdfList={unitList.filter(u => u.type.toLocaleLowerCase() === 'pdf')}\n        segmentRule={segmentRule}\n        segmentMode={segmentMode}\n        parsingStrategy={parsingStrategy}\n        // indexStrategy={indexStrategy}\n        filterStrategy={filterStrategy}\n        // getIndexFormApi={api => {\n        //   indexFormApi.current = api;\n        // }}\n        onChange={({\n          segmentRule: rule,\n          segmentMode: mode,\n          parsingStrategy: inputParsingStrategy,\n          // indexStrategy: inputIndexStrategy,\n          filterStrategy: inputFilterStrategy,\n        }: OnChangeProps) => {\n          rule !== undefined && setSegmentRule(rule);\n          mode !== undefined && setSegmentMode(mode);\n          if (!isUndefined(inputParsingStrategy)) {\n            setParsingStrategyByMerge(inputParsingStrategy as ParsingStrategy);\n          }\n          if (!isUndefined(inputFilterStrategy)) {\n            setFilterStrategy(inputFilterStrategy as PDFDocumentFilterValue[]);\n          }\n        }}\n      />\n      {footer?.([\n        {\n          e2e: KnowledgeE2e.UploadUnitUpBtn,\n          type: 'primary',\n          theme: 'light',\n          onClick: () => setCurrentStep(TextLocalAddUpdateStep.UPLOAD_FILE),\n          text: I18n.t('datasets_createFileModel_previousBtn'),\n        },\n        {\n          e2e: KnowledgeE2e.UploadUnitNextBtn,\n          type: 'hgltplus',\n          theme: 'solid',\n          onClick: () => setCurrentStep(TextLocalAddUpdateStep.SEGMENT_PREVIEW),\n          text: I18n.t('datasets_createFileModel_NextBtn'),\n          status: nextBtnStatus,\n        },\n      ])}\n    </>\n  );\n};\n","\n      import API from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC, useEffect } from 'react';\n\nimport { useShallow } from 'zustand/react/shallow';\nimport {\n  useDataNavigate,\n  useKnowledgeParams,\n} from '@coze-data/knowledge-stores';\nimport { type ContentProps } from '@coze-data/knowledge-resource-processor-core';\nimport { getKnowledgeIDEQuery } from '@coze-data/knowledge-common-services';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { REPORT_EVENTS } from '@coze-arch/report-events';\nimport { I18n } from '@coze-arch/i18n';\n\nimport { getProcessingDescMsg, reportProcessDocumentFail } from '@/utils';\nimport { useCreateDocument } from '@/hooks';\nimport { UnitProgress } from '@/components';\n\nimport type { UploadTextLocalAddUpdateStore } from '../../store';\nimport { getCreateDocumentParams } from './utils';\n\nimport styles from './index.module.less';\n\nexport const TextProcessing: FC<\n  ContentProps<UploadTextLocalAddUpdateStore>\n> = props => {\n  const { useStore, footer } = props;\n\n  const resourceNavigate = useDataNavigate();\n  const params = useKnowledgeParams();\n\n  /** store */\n  const {\n    unitList,\n    progressList,\n    createStatus,\n    segmentMode,\n    segmentRule,\n    enableStorageStrategy,\n    storageLocation,\n    openSearchConfig,\n    docReviewList,\n  } = useStore(\n    useShallow(state => ({\n      unitList: state.unitList,\n      progressList: state.progressList,\n      createStatus: state.createStatus,\n      segmentMode: state.segmentMode,\n      segmentRule: state.segmentRule,\n      enableStorageStrategy: state.enableStorageStrategy,\n      storageLocation: state.storageLocation,\n      openSearchConfig: state.openSearchConfig,\n      docReviewList: state.docReviewList,\n    })),\n  );\n\n  const createDocument = useCreateDocument(useStore, {\n    onSuccess: docRes => {\n      const documentInfos = docRes.document_infos ?? [];\n      reportProcessDocumentFail(\n        documentInfos,\n        REPORT_EVENTS.KnowledgeProcessDocument,\n      );\n    },\n  });\n\n  useEffect(() => {\n    const { parsingStrategy, filterStrategy, levelChunkStrategy } =\n      useStore.getState();\n    createDocument({\n      ...getCreateDocumentParams({\n        unitList,\n        segmentMode,\n        segmentRule,\n        pdfFilterValueList: filterStrategy,\n        levelChunkStrategy,\n        docReviewList,\n        enableStorageStrategy,\n        storageLocation,\n        openSearchConfig,\n      }),\n      parsing_strategy: parsingStrategy,\n    });\n  }, []);\n\n  return (\n    <>\n      <UnitProgress progressList={progressList} createStatus={createStatus} />\n      {footer?.({\n        btns: [\n          {\n            e2e: KnowledgeE2e.CreateUnitConfirmBtn,\n            type: 'hgltplus',\n            theme: 'solid',\n            text: I18n.t('variable_reset_yes'),\n            onClick: () => {\n              const query = getKnowledgeIDEQuery() as Record<string, string>;\n\n              resourceNavigate.toResource?.(\n                'knowledge',\n                params.datasetID,\n                query,\n              );\n            },\n          },\n        ],\n        prefix: (\n          <span className={styles['footer-sub-tip']}>\n            {getProcessingDescMsg(createStatus)}\n          </span>\n        ),\n      })}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { merge } from 'lodash-es';\nimport { type UnitItem } from '@coze-data/knowledge-resource-processor-core';\nimport {\n  type CreateDocumentRequest,\n  type DocumentBase,\n  DocumentSource,\n  FormatType,\n  type OpenSearchConfig,\n  type Review,\n  StorageLocation,\n} from '@coze-arch/bot-api/knowledge';\n\nimport { convertFilterStrategyToParams } from '@/utils/convert-filter-strategy-to-params';\nimport { type CustomSegmentRule, type SegmentMode } from '@/types';\nimport { getCustomValues } from '@/features/knowledge-type/text/utils';\nimport {\n  type LevelChunkStrategy,\n  type PDFDocumentFilterValue,\n} from '@/features/knowledge-type/text/interface';\n\nexport function filterTextList(\n  unitList: UnitItem[],\n  pdfFilterValueList: PDFDocumentFilterValue[],\n  docReviewList: Review[],\n): DocumentBase[] {\n  return unitList.map((item, index) => {\n    const target = pdfFilterValueList.find(pdf => pdf.uri === item.uri);\n\n    const base: DocumentBase = {\n      name: item.name,\n      source_info: {\n        tos_uri: item.uri,\n        document_source: DocumentSource.Document,\n        review_id: docReviewList[index]?.review_id,\n      },\n    };\n\n    return merge({}, base, convertFilterStrategyToParams(target));\n  });\n}\n\nexport function getCreateDocumentParams({\n  unitList,\n  segmentMode,\n  segmentRule,\n  pdfFilterValueList,\n  levelChunkStrategy,\n  enableStorageStrategy,\n  storageLocation,\n  openSearchConfig,\n  docReviewList,\n}: {\n  unitList: UnitItem[];\n  segmentMode: SegmentMode;\n  segmentRule: CustomSegmentRule;\n  pdfFilterValueList: PDFDocumentFilterValue[];\n  levelChunkStrategy: LevelChunkStrategy;\n  enableStorageStrategy: boolean;\n  storageLocation: StorageLocation;\n  openSearchConfig: OpenSearchConfig;\n  docReviewList: Review[];\n}): Pick<\n  CreateDocumentRequest,\n  'format_type' | 'document_bases' | 'chunk_strategy' | 'storage_strategy'\n> {\n  const req: CreateDocumentRequest = {\n    format_type: FormatType.Text,\n    document_bases: filterTextList(unitList, pdfFilterValueList, docReviewList),\n    chunk_strategy: getCustomValues(\n      segmentMode,\n      segmentRule,\n      levelChunkStrategy,\n    ),\n  };\n  // Volcano [Cloud Search Service] is only available in the domestic environment\n  if (IS_CN_REGION && enableStorageStrategy) {\n    req.storage_strategy = {\n      storage_location: storageLocation,\n      open_search_config:\n        storageLocation === StorageLocation.OpenSearch\n          ? openSearchConfig\n          : undefined,\n    };\n  }\n  return req;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type UploadConfig,\n  type FooterControlsProps,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { I18n } from '@coze-arch/i18n';\n\nimport { useTextDisplaySegmentStepCheck } from '@/hooks/common';\nimport { UploadFooter } from '@/components';\n\nimport {\n  createTextLocalAddUpdateStore,\n  type UploadTextLocalAddUpdateStore,\n} from './store';\nimport { SegmentPreviewStep } from './steps/preview';\nimport { TextUpload, TextSegment, TextProcessing } from './steps';\nimport { TextLocalAddUpdateStep } from './constants';\n\nexport const TextLocalAddUpdateConfig: UploadConfig<\n  TextLocalAddUpdateStep,\n  UploadTextLocalAddUpdateStore\n> = {\n  steps: [\n    {\n      content: props => (\n        <TextUpload\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={props.checkStatus}\n        />\n      ),\n      title: I18n.t('datasets_createFileModel_step2'),\n      step: TextLocalAddUpdateStep.UPLOAD_FILE,\n    },\n    {\n      content: props => (\n        <TextSegment\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('kl_write_107'),\n      step: TextLocalAddUpdateStep.SEGMENT_CLEANER,\n    },\n    {\n      content: props => (\n        <SegmentPreviewStep\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('knowlege_qqq_001'),\n      step: TextLocalAddUpdateStep.SEGMENT_PREVIEW,\n      showThisStep: () => true,\n    },\n    {\n      content: props => (\n        <TextProcessing\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('datasets_createFileModel_step4'),\n      step: TextLocalAddUpdateStep.EMBED_PROGRESS,\n    },\n  ],\n  createStore: createTextLocalAddUpdateStore,\n  useUploadMount: store => useTextDisplaySegmentStepCheck(),\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type StateCreator } from 'zustand';\n\nimport {\n  createTextSlice,\n  getDefaultTextState,\n} from '@/features/knowledge-type/text/slice';\n\nimport { TextCustomAddUpdateStep } from '../constants';\nimport {\n  type UploadTextCustomAddUpdateStore,\n  type UploadTextCustomAddUpdateState,\n} from './types';\n\nexport const getDefaultTextCustomAddState: () => UploadTextCustomAddUpdateState =\n  () => ({\n    ...getDefaultTextState(),\n    currentStep: TextCustomAddUpdateStep.UPLOAD_CONTENT,\n    docName: '',\n    docContent: '',\n  });\n\nexport const createTextCustomAddUpdateSlice: StateCreator<\n  UploadTextCustomAddUpdateStore\n> = (set, ...arg) => ({\n  ...createTextSlice(set, ...arg),\n  // overwrite\n  ...getDefaultTextCustomAddState(),\n  // /** reset state */\n  reset: () => {\n    set(getDefaultTextCustomAddState());\n  },\n  setDocContent: (content: string) => {\n    set({\n      docContent: content,\n    });\n  },\n  setDocName: (name: string) => {\n    set({\n      docName: name,\n    });\n  },\n});\n","\n      import API from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useContext, useMemo } from 'react';\n\nimport { nanoid } from 'nanoid';\nimport { CozeInputWithCountField } from '@coze-data/utils';\nimport { KnowledgeParamsStoreContext } from '@coze-data/knowledge-stores';\nimport {\n  type ContentProps,\n  FooterBtnStatus,\n} from '@coze-data/knowledge-resource-processor-core';\nimport {\n  DocumentEditor,\n  useInitEditor,\n  EditorToolbar,\n  type Chunk,\n} from '@coze-data/knowledge-common-components/text-knowledge-editor';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport { Form } from '@coze-arch/bot-semi';\n\nimport type { UploadTextCustomAddUpdateStore } from '../../store';\nimport { TextCustomAddUpdateStep } from '../../constants';\nimport { editorToolbarActionRegistry } from './editor-toolbar-actions-contributes';\nimport { editorContextActionRegistry } from './editor-context-actions-contributes';\n\nimport styles from './index.module.less';\n\nconst MAX_DOC_NAME_LEN = 100;\n\nexport const TextUpload = <T extends UploadTextCustomAddUpdateStore>(\n  props: ContentProps<T>,\n) => {\n  const { useStore, footer } = props;\n  /** common store */\n  const docName = useStore(state => state.docName);\n  const docContent = useStore(state => state.docContent);\n  const isDouyin = useContext(KnowledgeParamsStoreContext)?.paramsStore?.(\n    s => s.params?.isDouyinBot,\n  );\n  /** common action */\n  const setDocName = useStore(state => state.setDocName);\n  const setDocContent = useStore(state => state.setDocContent);\n  const setCurrentStep = useStore(state => state.setCurrentStep);\n\n  const buttonStatus = useMemo(() => {\n    if (!docName || !docContent) {\n      return FooterBtnStatus.DISABLE;\n    }\n    return FooterBtnStatus.ENABLE;\n  }, [docName, docContent]);\n\n  const handleClickNext = () => {\n    setCurrentStep(TextCustomAddUpdateStep.SEGMENT_CLEANER);\n  };\n\n  const initChunk = useMemo<Chunk>(\n    () => ({\n      text_knowledge_editor_chunk_uuid: nanoid(),\n      content: '',\n    }),\n    [],\n  );\n\n  const { editor } = useInitEditor({\n    chunk: initChunk,\n    editorProps: {\n      attributes: {\n        class: 'h-[360px] overflow-y-auto',\n      },\n    },\n    onChange: v => {\n      setDocContent(v.content ?? '');\n    },\n  });\n\n  return (\n    <>\n      <Form<Record<string, unknown>>\n        layout=\"vertical\"\n        showValidateIcon={false}\n        className={styles['custom-text-form']}\n      >\n        <CozeInputWithCountField\n          data-testid={KnowledgeE2e.CustomUploadNameInput}\n          className={styles['doc-name-input']}\n          field=\"docName\"\n          autoFocus\n          trigger=\"blur\"\n          onChange={(v: string) => setDocName(v)}\n          maxLength={MAX_DOC_NAME_LEN}\n          placeholder={I18n.t('knowledge_upload_text_custom_doc_name_tips')}\n          label={I18n.t('knowledge_upload_text_custom_doc_name')}\n          rules={[\n            {\n              required: true,\n              message: I18n.t('knowledge_upload_text_custom_doc_name_tips'),\n            },\n          ]}\n        />\n        <Form.Slot\n          className={styles['form-segment-content']}\n          label={{ text: I18n.t('knowledge_upload_text_custom_doc_content') }}\n          // error={I18n.t('knowledge_upload_text_custom_doc_content_tips')}\n        >\n          <DocumentEditor\n            editor={editor}\n            placeholder={I18n.t(\n              'knowledge_upload_text_custom_doc_content_tips',\n            )}\n            editorContextMenuItemsRegistry={\n              !isDouyin ? editorContextActionRegistry : undefined\n            }\n            editorBottomSlot={\n              !isDouyin ? (\n                <EditorToolbar\n                  editor={editor}\n                  actionRegistry={editorToolbarActionRegistry}\n                />\n              ) : null\n            }\n          />\n        </Form.Slot>\n      </Form>\n\n      {footer?.([\n        {\n          e2e: KnowledgeE2e.UploadUnitNextBtn,\n          type: 'hgltplus',\n          theme: 'solid',\n          text: I18n.t('datasets_createFileModel_NextBtn'),\n          status: buttonStatus,\n          onClick: handleClickNext,\n        },\n      ])}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC, useEffect } from 'react';\n\nimport { useShallow } from 'zustand/react/shallow';\nimport { get } from 'lodash-es';\nimport { useKnowledgeParams } from '@coze-data/knowledge-stores';\nimport { type ContentProps } from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport { KnowledgeApi } from '@coze-arch/bot-api';\n\nimport { getSegmentCleanerParams, getStorageStrategyEnabled } from '@/utils';\nimport { SegmentMode } from '@/types';\nimport { useListDocumentReq } from '@/services';\nimport {\n  SegmentConfig,\n  type OnChangeProps,\n} from '@/features/segment-config/base';\n\nimport type { UploadTextCustomAddUpdateStore } from '../../store';\nimport { TextCustomAddUpdateStep } from '../../constants';\nimport { getButtonNextStatus } from './utils';\n\nexport const TextSegment: FC<\n  ContentProps<UploadTextCustomAddUpdateStore>\n> = props => {\n  const { useStore, footer } = props;\n  const {\n    // common store\n    setCurrentStep,\n    // text store\n    segmentRule,\n    setSegmentRule,\n    segmentMode,\n    setSegmentMode,\n    setEnableStorageStrategy,\n    storageLocation,\n    testConnectionSuccess,\n  } = useStore(\n    useShallow(state => ({\n      setCurrentStep: state.setCurrentStep,\n      segmentRule: state.segmentRule,\n      setSegmentRule: state.setSegmentRule,\n      segmentMode: state.segmentMode || SegmentMode.AUTO,\n      setSegmentMode: state.setSegmentMode,\n      setEnableStorageStrategy: state.setEnableStorageStrategy,\n      storageLocation: state.storageLocation,\n      testConnectionSuccess: state.testConnectionSuccess,\n    })),\n  );\n\n  const { datasetID, docID } = useKnowledgeParams();\n\n  const listDocumentReq = useListDocumentReq(res => {\n    const segment = getSegmentCleanerParams(get(res, 'document_infos[0]', {}));\n    if (segment) {\n      setSegmentRule(segment.segmentRule);\n      setSegmentMode(segment.segmentMode);\n    }\n  });\n\n  useEffect(() => {\n    if (docID) {\n      listDocumentReq({\n        dataset_id: datasetID || '',\n        document_ids: [docID || ''],\n      });\n    }\n  }, []);\n\n  useEffect(() => {\n    if (datasetID) {\n      KnowledgeApi.DatasetDetail({ dataset_ids: [datasetID] }).then(res => {\n        const dataset = res.dataset_details?.[datasetID];\n        setEnableStorageStrategy(getStorageStrategyEnabled(dataset));\n      });\n    }\n  }, [datasetID]);\n\n  return (\n    <>\n      <SegmentConfig\n        segmentRule={segmentRule}\n        segmentMode={segmentMode}\n        onChange={({ segmentRule: rule, segmentMode: mode }: OnChangeProps) => {\n          rule !== undefined && setSegmentRule(rule);\n          mode !== undefined && setSegmentMode(mode);\n        }}\n      />\n      {footer?.([\n        {\n          e2e: KnowledgeE2e.UploadUnitUpBtn,\n          type: 'primary',\n          theme: 'light',\n          onClick: () => setCurrentStep(TextCustomAddUpdateStep.UPLOAD_CONTENT),\n          text: I18n.t('datasets_createFileModel_previousBtn'),\n        },\n        {\n          e2e: KnowledgeE2e.UploadUnitNextBtn,\n          type: 'hgltplus',\n          theme: 'solid',\n          onClick: () => setCurrentStep(TextCustomAddUpdateStep.EMBED_PROGRESS),\n          text: I18n.t('datasets_createFileModel_NextBtn'),\n          status: getButtonNextStatus({\n            segmentMode,\n            segmentRule,\n            storageLocation,\n            testConnectionSuccess,\n          }),\n        },\n      ])}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FooterBtnStatus } from '@coze-data/knowledge-resource-processor-core';\nimport { type StorageLocation } from '@coze-arch/idl/knowledge';\n\nimport { type CustomSegmentRule, type SegmentMode } from '@/types';\nimport { validateSegmentRules } from '@/features/knowledge-type/text/utils';\n\nexport function getButtonNextStatus(params: {\n  segmentMode: SegmentMode;\n  segmentRule: CustomSegmentRule;\n  storageLocation: StorageLocation;\n  testConnectionSuccess: boolean;\n}): FooterBtnStatus {\n  const segmentValid = validateSegmentRules(\n    params.segmentMode,\n    params.segmentRule,\n  );\n  return segmentValid ? FooterBtnStatus.ENABLE : FooterBtnStatus.DISABLE;\n}\n","\n      import API from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type FC, useEffect } from 'react';\n\nimport { useShallow } from 'zustand/react/shallow';\nimport {\n  useDataNavigate,\n  useKnowledgeParams,\n} from '@coze-data/knowledge-stores';\nimport { type ContentProps } from '@coze-data/knowledge-resource-processor-core';\nimport { getKnowledgeIDEQuery } from '@coze-data/knowledge-common-services';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport {\n  DocumentSource,\n  FormatType,\n  StorageLocation,\n} from '@coze-arch/bot-api/knowledge';\n\nimport { getProcessingDescMsg } from '@/utils';\nimport { useCreateDocument } from '@/hooks';\nimport { getCustomValues } from '@/features/knowledge-type/text/utils';\nimport { UnitProgress } from '@/components';\n\nimport type { UploadTextCustomAddUpdateStore } from '../../store';\n\nimport styles from './index.module.less';\n\nexport const TextProcessing: FC<\n  ContentProps<UploadTextCustomAddUpdateStore>\n> = props => {\n  const { useStore, footer } = props;\n\n  const resourceNavigate = useDataNavigate();\n  const params = useKnowledgeParams();\n\n  const {\n    progressList,\n    createStatus,\n    docName,\n    docContent,\n    segmentMode,\n    segmentRule,\n    enableStorageStrategy,\n    storageLocation,\n    openSearchConfig,\n  } = useStore(\n    useShallow(state => ({\n      progressList: state.progressList,\n      createStatus: state.createStatus,\n      docName: state.docName,\n      docContent: state.docContent,\n      segmentMode: state.segmentMode,\n      segmentRule: state.segmentRule,\n      enableStorageStrategy: state.enableStorageStrategy,\n      storageLocation: state.storageLocation,\n      openSearchConfig: state.openSearchConfig,\n    })),\n  );\n\n  const createDocument = useCreateDocument(useStore);\n\n  useEffect(() => {\n    createDocument({\n      format_type: FormatType.Text,\n      document_bases: [\n        {\n          name: docName,\n          source_info: {\n            custom_content: docContent,\n            document_source: DocumentSource.Custom,\n          },\n        },\n      ],\n      // When not added for the first time, no segmentation rules are required\n      chunk_strategy: getCustomValues(segmentMode, segmentRule),\n      storage_strategy:\n        IS_CN_REGION && enableStorageStrategy\n          ? {\n              storage_location: storageLocation,\n              open_search_config:\n                storageLocation === StorageLocation.OpenSearch\n                  ? openSearchConfig\n                  : undefined,\n            }\n          : undefined,\n    });\n  }, []);\n\n  return (\n    <>\n      <UnitProgress progressList={progressList} createStatus={createStatus} />\n      {footer?.({\n        btns: [\n          {\n            e2e: KnowledgeE2e.UploadUnitNextBtn,\n            type: 'hgltplus',\n            theme: 'solid',\n            text: I18n.t('variable_reset_yes'),\n            onClick: () => {\n              const query = getKnowledgeIDEQuery() as Record<string, string>;\n              resourceNavigate.toResource?.(\n                'knowledge',\n                params.datasetID,\n                query,\n              );\n            },\n          },\n        ],\n        prefix: (\n          <span className={styles['footer-sub-tip']}>\n            {getProcessingDescMsg(createStatus)}\n          </span>\n        ),\n      })}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type UploadConfig,\n  type FooterControlsProps,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { I18n } from '@coze-arch/i18n';\n\nimport { useTextDisplaySegmentStepCheck } from '@/hooks/common';\nimport { UploadFooter } from '@/components';\n\nimport {\n  createTextCustomAddUpdateStore,\n  type UploadTextCustomAddUpdateStore,\n} from './store';\nimport { TextUpload, TextSegment, TextProcessing } from './steps';\nimport { TextCustomAddUpdateStep } from './constants';\n\nexport const TextCustomAddUpdateConfig: UploadConfig<\n  TextCustomAddUpdateStep,\n  UploadTextCustomAddUpdateStore\n> = {\n  steps: [\n    {\n      content: props => (\n        <TextUpload\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('knowledge_upload_text_custom_add_title'),\n      step: TextCustomAddUpdateStep.UPLOAD_CONTENT,\n    },\n    {\n      content: props => (\n        <TextSegment\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('kl_write_107'),\n      step: TextCustomAddUpdateStep.SEGMENT_CLEANER,\n    },\n    {\n      content: props => (\n        <TextProcessing\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('datasets_createFileModel_step4'),\n      step: TextCustomAddUpdateStep.EMBED_PROGRESS,\n    },\n  ],\n  createStore: createTextCustomAddUpdateStore,\n  useUploadMount: store => useTextDisplaySegmentStepCheck(),\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\n\nimport { type UploadTextCustomAddUpdateStore } from './types';\nimport { createTextCustomAddUpdateSlice } from './slice';\n\nexport const createTextCustomAddUpdateStore = () =>\n  create<UploadTextCustomAddUpdateStore>()(\n    devtools((set, get, store) => ({\n      ...createTextCustomAddUpdateSlice(set, get, store),\n    })),\n  );\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Service definition: contains business processes & events\n */\nimport { useMemo } from 'react';\n\nimport { type StoreApi, type UseBoundStore } from 'zustand';\nimport { get } from 'lodash-es';\nimport { type UnitItem } from '@coze-data/knowledge-resource-processor-core';\nimport { DocumentSource } from '@coze-arch/bot-api/knowledge';\nimport { FileBizType } from '@coze-arch/bot-api/developer_api';\nimport { DeveloperApi } from '@coze-arch/bot-api';\n\nimport { transformUnitList, getFileExtension, getBase64 } from '@/utils';\nimport {\n  type UploadTableAction,\n  type UploadTableState,\n} from '@/features/knowledge-type/table/interface';\n\n/** Use tos_uri to get table_info when uploading table-local */\nexport const useUploadFetchTableParams = <\n  T extends UploadTableState<number> & UploadTableAction<number>,\n>(\n  useStore: UseBoundStore<StoreApi<T>>,\n) => {\n  const unitList = useStore(state => state.unitList);\n  return useMemo(\n    () => ({\n      tos_uri: get(unitList, '0.uri', ''),\n      document_source: DocumentSource.Document,\n    }),\n    [unitList],\n  );\n};\n\n/**\n * table-local add upload onRetry\n */\nexport const useRetry = <\n  T extends UploadTableState<number> & UploadTableAction<number>,\n>(\n  useStore: UseBoundStore<StoreApi<T>>,\n) => {\n  const setUnitList = useStore(state => state.setUnitList);\n  const unitList = useStore(state => state.unitList);\n\n  const onRetry = async (record: UnitItem, index: number) => {\n    try {\n      const { fileInstance } = record;\n      if (fileInstance) {\n        const { name } = fileInstance;\n        const extension = getFileExtension(name);\n        const base64 = await getBase64(fileInstance);\n        const result = await DeveloperApi.UploadFile({\n          file_head: {\n            file_type: extension,\n            biz_type: FileBizType.BIZ_BOT_DATASET,\n          },\n          data: base64,\n        });\n\n        setUnitList(\n          transformUnitList({\n            unitList,\n            data: result?.data,\n            fileInstance,\n            index,\n          }),\n        );\n      }\n    } catch (e) {\n      // TODO plus report\n      console.log(e);\n    }\n  };\n  return onRetry;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\n\nimport { isEmpty } from 'lodash-es';\nimport {\n  UnitType,\n  type UnitItem,\n  type ContentProps,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport { TableDataType } from '@coze-arch/bot-api/knowledge';\n\nimport { useDocIdFromQuery, tableSettingsToString } from '@/utils';\nimport type {\n  UploadTableState,\n  UploadTableAction,\n} from '@/features/knowledge-type/table/interface';\nimport {\n  useAcceptFiles,\n  useFetchTableSchemaInfo,\n} from '@/features/knowledge-type/table/hooks';\nimport { DEFAULT_TABLE_SETTINGS_FROM_ONE, TableStatus } from '@/constants';\nimport { UploadUnitTable, UploadUnitFile } from '@/components';\n\nimport { useRetry, useUploadFetchTableParams } from '../services';\nimport { TableLocalStep } from '../../../constants';\nimport { getButtonStatus } from './utils';\n\nexport const TableUpload = <\n  T extends UploadTableState<number> & UploadTableAction<number>,\n>(\n  props: ContentProps<T>,\n) => {\n  const { useStore, footer } = props;\n\n  /** common store */\n  const docId = useDocIdFromQuery();\n  const unitList = useStore(state => state.unitList);\n  /** common action */\n  const setUnitList = useStore(state => state.setUnitList);\n  const setCurrentStep = useStore(state => state.setCurrentStep);\n\n  /** table store */\n  const originTableData = useStore(state => state.originTableData);\n  const tableSettings = useStore(state => state.tableSettings);\n  /** table action */\n  const setOriginTableData = useStore(state => state.setOriginTableData);\n  const setTableData = useStore(state => state.setTableData);\n  const setTableSettings = useStore(state => state.setTableSettings);\n  const setStatus = useStore(state => state.setStatus);\n\n  /** event action */\n  const onRetry = useRetry(useStore);\n  const params = useUploadFetchTableParams(useStore);\n  const fetchTableInfo = useFetchTableSchemaInfo<T>(useStore);\n\n  useEffect(() => {\n    // When deleting an uploaded file, delete the table source data synchronously\n    if (!unitList.length) {\n      setOriginTableData({});\n      setTableData({});\n      setTableSettings(DEFAULT_TABLE_SETTINGS_FROM_ONE);\n    }\n  }, [unitList.length]);\n\n  const accept = useAcceptFiles();\n\n  return (\n    <>\n      {\n        <UploadUnitFile\n          setUnitList={setUnitList}\n          unitList={unitList}\n          onFinish={(list: UnitItem[]) => {\n            setUnitList(list);\n          }}\n          limit={1}\n          accept={accept}\n          dragMainText={I18n.t('datasets_createFileModel_step2_UploadDoc')}\n          dragSubText={\n            <div>\n              <p>{I18n.t('datasets_unit_update_exception_tips3')}</p>\n              <p>{I18n.t('knowledg_table_increment_tips')}</p>\n            </div>\n          }\n          action={''}\n          style={\n            !unitList.length\n              ? {}\n              : {\n                  display: 'none',\n                }\n          }\n          showIllustration={false}\n        />\n      }\n      <div className=\"upload-unit-table\">\n        <UploadUnitTable\n          edit={false}\n          type={UnitType.TABLE_DOC}\n          unitList={unitList}\n          onChange={(list: UnitItem[]) => {\n            setUnitList(list);\n          }}\n          canValidator={false}\n          onRetry={onRetry}\n        />\n      </div>\n\n      {footer\n        ? footer([\n            {\n              e2e: KnowledgeE2e.UploadUnitNextBtn,\n              type: 'hgltplus',\n              theme: 'solid',\n              text: I18n.t('datasets_createFileModel_NextBtn'),\n              onClick: () => {\n                setCurrentStep(TableLocalStep.CONFIGURATION);\n                if (!isEmpty(originTableData)) {\n                  return;\n                }\n                setStatus(TableStatus.LOADING);\n                fetchTableInfo({\n                  source_file: params,\n                  document_id: docId,\n                  table_sheet: tableSettingsToString(tableSettings),\n                  table_data_type: TableDataType.AllData,\n                });\n              },\n              status: getButtonStatus(unitList),\n            },\n          ])\n        : null}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type UnitItem,\n  FooterBtnStatus,\n  UploadStatus,\n} from '@coze-data/knowledge-resource-processor-core';\n\nexport function getButtonStatus(unitList: UnitItem[]) {\n  if (\n    unitList.length === 0 ||\n    unitList.some(\n      unitItem =>\n        unitItem.name.length === 0 || unitItem.status !== UploadStatus.SUCCESS,\n    )\n  ) {\n    return FooterBtnStatus.DISABLE;\n  }\n  return FooterBtnStatus.ENABLE;\n}\n","\n      import API from \"!../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, useRef, useState } from 'react';\n\nimport { isEmpty } from 'lodash-es';\nimport { IllustrationNoResult } from '@douyinfe/semi-illustrations';\nimport { useKnowledgeParams } from '@coze-data/knowledge-stores';\nimport {\n  type ContentProps,\n  FooterBtnStatus,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport { UIEmpty } from '@coze-arch/bot-semi';\nimport { isApiError } from '@coze-arch/bot-http';\nimport { DocumentSource, TableDataType } from '@coze-arch/bot-api/knowledge';\n\nimport { tableSettingsToString } from '@/utils';\nimport {\n  isConfigurationLoading as isLoadingFunc,\n  isConfigurationError as isErrorFunc,\n  getExpandConfigurationMeta,\n  semanticValidator,\n} from '@/features/knowledge-type/table/utils';\nimport type {\n  UploadTableState,\n  UploadTableAction,\n} from '@/features/knowledge-type/table/interface';\nimport {\n  useChangeTableSettingsNl2ql,\n  useFetchTableSchemaInfo,\n  useTableSchemaValid,\n} from '@/features/knowledge-type/table/hooks';\nimport { TableSettingFormFields } from '@/constants';\nimport {\n  TableStructure as TableStructureInternal,\n  TableSettingBar,\n  ConfigurationLoading,\n  ConfigurationError,\n} from '@/components';\n\nimport { useUploadFetchTableParams } from '../services';\nimport styles from '../index.module.less';\nimport { TableLocalStep } from '../../../constants';\n\ninterface TableHeaderProps {\n  isTableStructureError: boolean;\n}\n\nconst validErrorCode = '708024073';\n\nconst TableHeader = ({ isTableStructureError }: TableHeaderProps) => (\n  <>\n    <div className={styles['validation-results']}>\n      <div className={styles['validation-item']}></div>\n      <div className={styles['validation-item']}>\n        {isTableStructureError ? (\n          <p className={styles['error-msg']}>\n            {I18n.t('knowledg_table_structure_err_msg')}\n          </p>\n        ) : null}\n        <p className={styles.tips}>{I18n.t('knowledg_table_structure_tips')}</p>\n      </div>\n      <div className={styles['validation-item']}></div>\n    </div>\n    <div\n      className={styles['table-structure-title']}\n      data-testid={KnowledgeE2e.TableLocalTableStructureTitle}\n    >\n      {I18n.t('datasets_segment_tableStructure_title')}\n    </div>\n  </>\n);\n\n// eslint-disable-next-line @coze-arch/max-line-per-function\nexport const TableConfiguration = <\n  T extends UploadTableState<number> & UploadTableAction<number>,\n>(\n  props: ContentProps<T>,\n) => {\n  const { useStore, footer } = props;\n  const setCurrentStep = useStore(state => state.setCurrentStep);\n\n  const status = useStore(state => state.status);\n  const tableData = useStore(state => state.tableData);\n  const originTableData = useStore(state => state.originTableData);\n  const tableSettings = useStore(state => state.tableSettings);\n  const semanticValidate = useStore(state => state.semanticValidate);\n  const setTableData = useStore(state => state.setTableData);\n  const setSemanticValidate = useStore(state => state.setSemanticValidate);\n\n  const isLoading = isLoadingFunc(status);\n  const [validate, setValidate] = useState(false);\n  const isConfigurationError = isErrorFunc(status);\n  const [isTableStructureError, setIsTableStructureError] = useState(false);\n  const validResultRef = useRef<Record<string, string>>({});\n  const meta = getExpandConfigurationMeta(\n    tableData,\n    tableSettings,\n    validResultRef.current,\n  );\n  const onChangeTableSettings = useChangeTableSettingsNl2ql(useStore);\n  const uploadParams = useUploadFetchTableParams(useStore);\n  const params = useKnowledgeParams();\n  const fetchTableInfo = useFetchTableSchemaInfo<T>(useStore);\n  const tableSchemaValid = useTableSchemaValid(\n    (state, result) => {\n      setIsTableStructureError(!state);\n      setValidate(state);\n      validResultRef.current = result;\n    },\n    err => {\n      if (isApiError(err) && err?.code === validErrorCode) {\n        setIsTableStructureError(true);\n      }\n      setValidate(false);\n      validResultRef.current = {};\n    },\n  );\n  useEffect(() => {\n    if (tableSettings) {\n      setValidate(false);\n      tableSchemaValid({\n        space_id: params.spaceID || '',\n        document_id: params.docID || '',\n        source_file: {\n          tos_uri: uploadParams.tos_uri || '',\n          document_source: DocumentSource.Document,\n        },\n        table_sheet: {\n          sheet_id: tableSettings.sheet_id.toString(),\n          header_line_idx: tableSettings.header_line_idx.toString(),\n          start_line_idx: tableSettings.start_line_idx.toString(),\n        },\n      });\n    }\n  }, [tableSettings]);\n  if (isLoading) {\n    return <ConfigurationLoading />;\n  }\n\n  if (isConfigurationError) {\n    return (\n      <ConfigurationError\n        fetchTableInfo={() => {\n          fetchTableInfo({\n            ...uploadParams,\n            document_id: params.docID,\n            table_data_type: TableDataType.AllData,\n            table_sheet: tableSettingsToString(tableSettings),\n          });\n        }}\n      />\n    );\n  }\n\n  return (\n    <>\n      <TableSettingBar\n        className={`${styles['table-setting-bar-container']} ${\n          isTableStructureError ? styles['is-error'] : ''\n        }`}\n        data={tableData}\n        tableSettings={tableSettings}\n        setTableSettings={onChangeTableSettings}\n      />\n      <TableHeader isTableStructureError={isTableStructureError} />\n      {!meta.length || isEmpty(originTableData) ? (\n        <UIEmpty\n          empty={{\n            title: I18n.t('knowledge_1221_02'),\n            icon: <IllustrationNoResult></IllustrationNoResult>,\n          }}\n        />\n      ) : (\n        <TableStructureInternal\n          initValid={false}\n          baseKey={`${tableSettings[TableSettingFormFields.SHEET]}.${\n            tableSettings[TableSettingFormFields.KEY_START_ROW]\n          }.`}\n          data={meta}\n          verifyMap={\n            semanticValidate[tableSettings[TableSettingFormFields.SHEET]] || {}\n          }\n          setData={v => {\n            const curSheet = tableSettings[TableSettingFormFields.SHEET];\n            const newData = {\n              ...tableData,\n              table_meta: {\n                ...tableData.table_meta,\n                [curSheet]: v,\n              },\n            };\n            setTableData(newData);\n            setSemanticValidate(semanticValidator(newData));\n          }}\n          loading={isLoading}\n          isPreview={true}\n        />\n      )}\n      {footer\n        ? footer([\n            {\n              e2e: KnowledgeE2e.UploadUnitUpBtn,\n              type: 'primary',\n              theme: 'light',\n              text: I18n.t('datasets_createFileModel_previousBtn'),\n              onClick: () => {\n                setCurrentStep(TableLocalStep.UPLOAD);\n              },\n              status: FooterBtnStatus.ENABLE,\n            },\n            {\n              e2e: KnowledgeE2e.UploadUnitNextBtn,\n              type: 'hgltplus',\n              theme: 'solid',\n              text: I18n.t('datasets_createFileModel_NextBtn'),\n              onClick: () => {\n                setCurrentStep(TableLocalStep.PREVIEW);\n                fetchTableInfo({\n                  table_data_type: TableDataType.OnlyPreview,\n                  source_file: uploadParams,\n                  document_id: params.docID,\n                  origin_table_meta:\n                    originTableData?.table_meta?.[tableSettings.sheet_id],\n                  preview_table_meta:\n                    tableData?.table_meta?.[tableSettings.sheet_id],\n                  table_sheet: tableSettingsToString(tableSettings),\n                });\n              },\n              status: validate\n                ? FooterBtnStatus.ENABLE\n                : FooterBtnStatus.DISABLE,\n            },\n          ])\n        : null}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type ContentProps,\n  FooterBtnStatus,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\n\nimport type {\n  UploadTableState,\n  UploadTableAction,\n} from '@/features/knowledge-type/table/interface';\nimport { TablePreview as TablePreviewInternal } from '@/components';\n\nimport { TableLocalStep } from '../../../constants';\n\nexport const TablePreview = <\n  T extends UploadTableState<number> & UploadTableAction<number>,\n>(\n  props: ContentProps<T>,\n) => {\n  const { useStore, footer } = props;\n\n  /** store */\n  const tableData = useStore(state => state.tableData);\n  const tableSettings = useStore(state => state.tableSettings);\n  const setCurrentStep = useStore(state => state.setCurrentStep);\n  return (\n    <>\n      <TablePreviewInternal data={tableData} settings={tableSettings} />\n      {footer\n        ? footer([\n            {\n              e2e: KnowledgeE2e.UploadUnitUpBtn,\n              type: 'primary',\n              theme: 'light',\n              text: I18n.t('datasets_createFileModel_previousBtn'),\n              onClick: () => {\n                setCurrentStep(TableLocalStep.CONFIGURATION);\n              },\n              status: FooterBtnStatus.ENABLE,\n            },\n            {\n              e2e: KnowledgeE2e.UploadUnitNextBtn,\n              type: 'hgltplus',\n              theme: 'solid',\n              text: I18n.t('datasets_createFileModel_NextBtn'),\n              onClick: () => {\n                setCurrentStep(TableLocalStep.PROCESSING);\n              },\n              status: FooterBtnStatus.ENABLE,\n            },\n          ])\n        : null}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useMemo, useEffect } from 'react';\n\nimport {\n  useDataNavigate,\n  useKnowledgeParams,\n} from '@coze-data/knowledge-stores';\nimport {\n  type ContentProps,\n  FooterBtnStatus,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport { DocumentSource } from '@coze-arch/bot-api/knowledge';\n\nimport {\n  getAddSegmentParams,\n  getDocIdFromProgressList,\n} from '@/features/knowledge-type/table/utils';\nimport type {\n  UploadTableState,\n  UploadTableAction,\n} from '@/features/knowledge-type/table/interface';\nimport { useAddSegment } from '@/features/knowledge-type/table/hooks';\nimport { UnitProgress } from '@/components';\n\nexport const TableProcessing = <\n  T extends UploadTableState<number> & UploadTableAction<number>,\n>(\n  props: ContentProps<T>,\n) => {\n  const { useStore, footer } = props;\n  /** store */\n  const unitList = useStore(state => state.unitList);\n  const progressList = useStore(state => state.progressList);\n  const createStatus = useStore(state => state.createStatus);\n  const tableSettings = useStore(state => state.tableSettings);\n\n  /** config */\n  const params = useKnowledgeParams();\n  const { docID: docIdByQuery, spaceID, datasetID } = params;\n  const resourceNavigate = useDataNavigate();\n  const docId = useMemo(\n    () => getDocIdFromProgressList(progressList),\n    [progressList],\n  );\n\n  const handleAddSegment = useAddSegment(useStore);\n  useEffect(() => {\n    if (\n      !docIdByQuery ||\n      !datasetID ||\n      !spaceID ||\n      !tableSettings ||\n      !unitList\n    ) {\n      return;\n    }\n    const payload = getAddSegmentParams({\n      spaceId: spaceID,\n      docId: docIdByQuery,\n      datasetId: datasetID,\n      documentInfo: unitList.map(item => ({\n        name: '', // item.name,\n        source_info: {\n          document_source: DocumentSource.Document,\n          tos_uri: item.uri,\n        },\n        table_sheet: {\n          sheet_id: tableSettings.sheet_id.toString(),\n          header_line_idx: tableSettings.header_line_idx.toString(),\n          start_line_idx: tableSettings.start_line_idx.toString(),\n        },\n      })),\n    });\n    handleAddSegment(payload);\n  }, [tableSettings, unitList]);\n\n  return (\n    <>\n      <UnitProgress progressList={progressList} createStatus={createStatus} />\n      {footer\n        ? footer([\n            {\n              e2e: KnowledgeE2e.CreateUnitConfirmBtn,\n              type: 'hgltplus',\n              theme: 'solid',\n              text: I18n.t('variable_reset_yes'),\n              onClick: () => {\n                resourceNavigate.toResource?.('knowledge', params.datasetID);\n              },\n              status: docId ? FooterBtnStatus.ENABLE : FooterBtnStatus.DISABLE,\n            },\n          ])\n        : null}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type UploadConfig,\n  type FooterControlsProps,\n  type ContentProps,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { I18n } from '@coze-arch/i18n';\n\nimport { UploadFooter } from '@/components';\n\nimport { TableLocalStep } from '../constants';\nimport {\n  type UploadTableAction,\n  type UploadTableState,\n} from '../../../interface';\nimport { createTableLocalIncrementalStore } from './store';\nimport {\n  TableUpload,\n  TableConfiguration,\n  TablePreview,\n  TableProcessing,\n} from './steps';\n\ntype TableLocalContentProps = ContentProps<\n  UploadTableAction<TableLocalStep> & UploadTableState<TableLocalStep>\n>;\n\nexport const TableLocalIncrementalConfig: UploadConfig<\n  TableLocalStep,\n  UploadTableAction<TableLocalStep> & UploadTableState<TableLocalStep>\n> = {\n  steps: [\n    {\n      content: (props: TableLocalContentProps) => (\n        <TableUpload\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('datasets_createFileModel_step2'),\n      step: TableLocalStep.UPLOAD,\n    },\n    {\n      content: (props: TableLocalContentProps) => (\n        <TableConfiguration\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('datasets_createFileModel_tab_step2'),\n      step: TableLocalStep.CONFIGURATION,\n    },\n    {\n      content: (props: TableLocalContentProps) => (\n        <TablePreview\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('datasets_createFileModel_tab_step3'),\n      step: TableLocalStep.PREVIEW,\n    },\n    {\n      content: (props: TableLocalContentProps) => (\n        <TableProcessing\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('datasets_createFileModel_step4'),\n      step: TableLocalStep.PROCESSING,\n    },\n  ],\n  createStore: createTableLocalIncrementalStore,\n  className: 'table-local-wrapper',\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\n\nimport { type TableLocalStep } from '../constants';\nimport { createTableSlice } from '../../../slice';\nimport {\n  type UploadTableAction,\n  type UploadTableState,\n} from '../../../interface';\n\nexport const createTableLocalIncrementalStore = () =>\n  create<\n    UploadTableState<TableLocalStep> & UploadTableAction<TableLocalStep>\n  >()(\n    devtools((set, get, store) => ({\n      ...createTableSlice(set, get, store),\n    })),\n  );\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect } from 'react';\n\nimport { type StoreApi, type UseBoundStore } from 'zustand';\nimport { useKnowledgeParams } from '@coze-data/knowledge-stores';\n\nimport { useListDocumentReq } from '@/services';\n\nimport { type UploadTableAction, type UploadTableState } from '../interface';\n\nexport const useTableCheck = (\n  store: UseBoundStore<\n    StoreApi<UploadTableState<number> & UploadTableAction<number>>\n  >,\n) => {\n  const params = useKnowledgeParams();\n  const setDocumentList = store(state => state.setDocumentList);\n\n  const listDocument = useListDocumentReq(res => {\n    const { document_infos = [] } = res;\n    setDocumentList && setDocumentList(document_infos);\n  });\n\n  useEffect(() => {\n    listDocument({\n      dataset_id: params.datasetID ?? '',\n      document_ids: params.docID ? [params.docID] : undefined,\n    });\n  }, []);\n  return null;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect } from 'react';\n\nimport {\n  UnitType,\n  type UnitItem,\n  type ContentProps,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport { TableDataType } from '@coze-arch/bot-api/knowledge';\n\nimport { tableSettingsToString } from '@/utils';\nimport type {\n  UploadTableState,\n  UploadTableAction,\n} from '@/features/knowledge-type/table/interface';\nimport {\n  useAcceptFiles,\n  useFetchTableSchemaInfo,\n} from '@/features/knowledge-type/table/hooks';\nimport { DEFAULT_TABLE_SETTINGS_FROM_ONE, TableStatus } from '@/constants';\nimport { UploadUnitTable, UploadUnitFile } from '@/components';\n\nimport { useRetry, useUploadFetchTableParams } from '../services';\nimport { TableLocalStep } from '../../../constants';\nimport { getNextBtnStatus } from './utils';\n\nexport const TableUpload = <\n  T extends UploadTableState<number> & UploadTableAction<number>,\n>(\n  props: ContentProps<T>,\n) => {\n  const { useStore, footer } = props;\n  /** common store */\n  const unitList = useStore(state => state.unitList);\n  /** common action */\n  const setUnitList = useStore(state => state.setUnitList);\n  const setCurrentStep = useStore(state => state.setCurrentStep);\n  /** table store */\n  const tableSettings = useStore(state => state.tableSettings);\n  /** table action */\n  const setOriginTableData = useStore(state => state.setOriginTableData);\n  const setTableData = useStore(state => state.setTableData);\n  const setTableSettings = useStore(state => state.setTableSettings);\n  const setStatus = useStore(state => state.setStatus);\n\n  /** event action */\n  const onRetry = useRetry(useStore);\n  const params = useUploadFetchTableParams(useStore);\n  const fetchTableInfo = useFetchTableSchemaInfo<T>(useStore);\n\n  useEffect(() => {\n    // When deleting an uploaded file, delete the table source data synchronously\n    if (!unitList.length) {\n      setOriginTableData({});\n      setTableData({});\n      setTableSettings(DEFAULT_TABLE_SETTINGS_FROM_ONE);\n    }\n  }, [unitList.length]);\n\n  const accept = useAcceptFiles();\n\n  return (\n    <>\n      {\n        <UploadUnitFile\n          setUnitList={setUnitList}\n          unitList={unitList}\n          onFinish={(list: UnitItem[]) => {\n            setUnitList(list);\n          }}\n          limit={1}\n          accept={accept}\n          dragMainText={I18n.t('datasets_createFileModel_step2_UploadDoc')}\n          dragSubText={I18n.t('datasets_unit_update_exception_tips3')}\n          action={''}\n          style={\n            !unitList.length\n              ? {}\n              : {\n                  display: 'none',\n                }\n          }\n          showIllustration={false}\n        />\n      }\n      <div className=\"upload-unit-table\">\n        <UploadUnitTable\n          edit={false}\n          type={UnitType.TABLE_DOC}\n          unitList={unitList}\n          onChange={(list: UnitItem[]) => {\n            setUnitList(list);\n          }}\n          onRetry={onRetry}\n        />\n      </div>\n\n      {footer\n        ? footer([\n            {\n              e2e: KnowledgeE2e.UploadUnitNextBtn,\n              type: 'hgltplus',\n              theme: 'solid',\n              text: I18n.t('datasets_createFileModel_NextBtn'),\n              onClick: () => {\n                setCurrentStep(TableLocalStep.CONFIGURATION);\n                setStatus(TableStatus.LOADING);\n                fetchTableInfo({\n                  source_file: params,\n                  table_data_type: TableDataType.AllData,\n                  table_sheet: tableSettingsToString(tableSettings),\n                });\n              },\n              status: getNextBtnStatus(unitList),\n            },\n          ])\n        : null}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type UnitItem,\n  FooterBtnStatus,\n  UploadStatus,\n} from '@coze-data/knowledge-resource-processor-core';\n\nexport function getNextBtnStatus(unitList: UnitItem[]) {\n  if (\n    unitList.length === 0 ||\n    unitList.some(\n      unitItem =>\n        unitItem.name.length === 0 || unitItem.status !== UploadStatus.SUCCESS,\n    )\n  ) {\n    return FooterBtnStatus.DISABLE;\n  }\n  return FooterBtnStatus.ENABLE;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isEmpty } from 'lodash-es';\nimport { IllustrationNoResult } from '@douyinfe/semi-illustrations';\nimport {\n  type ContentProps,\n  FooterBtnStatus,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport { UIEmpty } from '@coze-arch/bot-semi';\nimport { TableDataType } from '@coze-arch/bot-api/knowledge';\n\nimport { useOptFromQuery, tableSettingsToString } from '@/utils';\nimport {\n  isConfigurationLoading as isLoadingFunc,\n  isConfigurationError as isErrorFunc,\n  isConfigurationShowBanner as isShowBannerFunc,\n  getConfigurationMeta,\n  getConfigurationNextStatus,\n  semanticValidator,\n} from '@/features/knowledge-type/table/utils';\nimport type {\n  UploadTableState,\n  UploadTableAction,\n} from '@/features/knowledge-type/table/interface';\nimport {\n  useChangeTableSettingsNl2ql,\n  useFetchTableSchemaInfo,\n} from '@/features/knowledge-type/table/hooks';\nimport { TableSettingFormFields } from '@/constants';\nimport {\n  TableStructure as TableStructureInternal,\n  TableSettingBar,\n  ConfigurationLoading,\n  ConfigurationError,\n  ConfigurationBanner,\n} from '@/components';\n\nimport { useUploadFetchTableParams } from '../services';\nimport { TableLocalStep } from '../../../constants';\n\nexport const TableConfiguration = <\n  T extends UploadTableState<number> & UploadTableAction<number>,\n>(\n  props: ContentProps<T>,\n) => {\n  const { useStore, footer } = props;\n  /** common action */\n  const setCurrentStep = useStore(state => state.setCurrentStep);\n\n  /** table store*/\n  const status = useStore(state => state.status);\n  const tableData = useStore(state => state.tableData);\n  const originTableData = useStore(state => state.originTableData);\n  const tableSettings = useStore(state => state.tableSettings);\n  const semanticValidate = useStore(state => state.semanticValidate);\n  /** table action*/\n  const setTableData = useStore(state => state.setTableData);\n  const setSemanticValidate = useStore(state => state.setSemanticValidate);\n\n  /** compute action */\n  const opt = useOptFromQuery();\n  const isLoading = isLoadingFunc(status);\n  const isError = isErrorFunc(status);\n  const isShowBanner = isShowBannerFunc(opt, tableData, tableSettings);\n  const currentMeta = getConfigurationMeta(tableData, tableSettings);\n  const meta = currentMeta.map((item, index) => ({\n    ...item,\n    key: index + item.column_name,\n  }));\n\n  /** events action */\n  const onChangeTableSettings = useChangeTableSettingsNl2ql(useStore);\n  /** network action */\n  const fetchTableParams = useUploadFetchTableParams(useStore);\n  const fetchTableInfo = useFetchTableSchemaInfo<T>(useStore);\n  const getContent = () => {\n    if (isLoading) {\n      return <ConfigurationLoading />;\n    }\n    if (isError) {\n      return (\n        <ConfigurationError\n          fetchTableInfo={() => {\n            fetchTableInfo({\n              source_file: fetchTableParams,\n              table_data_type: TableDataType.AllData,\n              table_sheet: tableSettingsToString(tableSettings),\n            });\n          }}\n        />\n      );\n    }\n    return (\n      <>\n        <TableStructureInternal\n          tipsNode={\n            <>\n              {isShowBanner ? <ConfigurationBanner /> : null}\n              {!meta.length || isEmpty(originTableData) ? (\n                <UIEmpty\n                  empty={{\n                    title: I18n.t('knowledge_1221_02'),\n                    icon: <IllustrationNoResult></IllustrationNoResult>,\n                  }}\n                />\n              ) : null}\n            </>\n          }\n          showTitle\n          initValid\n          isDragTable\n          baseKey={`${tableSettings[TableSettingFormFields.SHEET]}.${\n            tableSettings[TableSettingFormFields.KEY_START_ROW]\n          }.`}\n          data={meta}\n          verifyMap={\n            semanticValidate[tableSettings[TableSettingFormFields.SHEET]] || {}\n          }\n          setData={v => {\n            const curSheet = tableSettings[TableSettingFormFields.SHEET];\n            const newData = {\n              ...tableData,\n              table_meta: {\n                ...tableData.table_meta,\n                [curSheet]: v,\n              },\n            };\n            setTableData(newData);\n            setSemanticValidate(semanticValidator(newData));\n          }}\n          loading={isLoading}\n        />\n        {footer\n          ? footer([\n              {\n                e2e: KnowledgeE2e.UploadUnitUpBtn,\n                type: 'primary',\n                theme: 'light',\n                text: I18n.t('datasets_createFileModel_previousBtn'),\n                onClick: () => {\n                  setCurrentStep(TableLocalStep.UPLOAD);\n                },\n                status: FooterBtnStatus.ENABLE,\n              },\n              {\n                e2e: KnowledgeE2e.UploadUnitNextBtn,\n                type: 'hgltplus',\n                theme: 'solid',\n                text: I18n.t('datasets_createFileModel_NextBtn'),\n                onClick: () => {\n                  setCurrentStep(TableLocalStep.PREVIEW);\n                  fetchTableInfo({\n                    table_sheet: tableSettingsToString(tableSettings),\n                    table_data_type: TableDataType.OnlyPreview,\n                    source_file: fetchTableParams,\n                    origin_table_meta:\n                      originTableData?.table_meta?.[tableSettings.sheet_id],\n                    preview_table_meta:\n                      tableData?.table_meta?.[tableSettings.sheet_id],\n                  });\n                },\n                status: getConfigurationNextStatus(tableData, tableSettings),\n              },\n            ])\n          : null}\n      </>\n    );\n  };\n\n  return (\n    <>\n      <TableSettingBar\n        data={tableData}\n        tableSettings={tableSettings}\n        setTableSettings={onChangeTableSettings}\n      />\n      {getContent()}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type ContentProps,\n  FooterBtnStatus,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\n\nimport type {\n  UploadTableState,\n  UploadTableAction,\n} from '@/features/knowledge-type/table/interface';\nimport { TablePreview as TablePreviewInternal } from '@/components';\n\nimport { TableLocalStep } from '../../../constants';\n\nexport const TablePreview = <\n  T extends UploadTableState<number> & UploadTableAction<number>,\n>(\n  props: ContentProps<T>,\n) => {\n  const { useStore, footer } = props;\n\n  /** store */\n  const tableData = useStore(state => state.tableData);\n  const tableSettings = useStore(state => state.tableSettings);\n  const setCurrentStep = useStore(state => state.setCurrentStep);\n\n  return (\n    <>\n      <TablePreviewInternal data={tableData} settings={tableSettings} />\n      {footer\n        ? footer([\n            {\n              e2e: KnowledgeE2e.UploadUnitUpBtn,\n              type: 'primary',\n              theme: 'light',\n              text: I18n.t('datasets_createFileModel_previousBtn'),\n              onClick: () => {\n                setCurrentStep(TableLocalStep.CONFIGURATION);\n              },\n              status: FooterBtnStatus.ENABLE,\n            },\n            {\n              e2e: KnowledgeE2e.UploadUnitNextBtn,\n              type: 'hgltplus',\n              theme: 'solid',\n              text: I18n.t('datasets_createFileModel_NextBtn'),\n              onClick: () => {\n                setCurrentStep(TableLocalStep.PROCESSING);\n              },\n              status: FooterBtnStatus.ENABLE,\n            },\n          ])\n        : null}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useMemo, useEffect } from 'react';\n\nimport {\n  useDataNavigate,\n  useKnowledgeParams,\n} from '@coze-data/knowledge-stores';\nimport {\n  type ContentProps,\n  FooterBtnStatus,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\n\nimport { useCreateDocument } from '@/hooks';\nimport {\n  getDocIdFromProgressList,\n  getConfigurationMeta,\n  getCreateDocumentParams,\n} from '@/features/knowledge-type/table/utils';\nimport type {\n  UploadTableState,\n  UploadTableAction,\n} from '@/features/knowledge-type/table/interface';\nimport { UnitProgress } from '@/components';\n\nexport const TableProcessing = <\n  T extends UploadTableState<number> & UploadTableAction<number>,\n>(\n  props: ContentProps<T>,\n) => {\n  const { useStore, footer } = props;\n  /** store */\n  const progressList = useStore(state => state.progressList);\n  const unitList = useStore(state => state.unitList);\n  const createStatus = useStore(state => state.createStatus);\n  const tableData = useStore(state => state.tableData);\n  const tableSettings = useStore(state => state.tableSettings);\n  const meta = getConfigurationMeta(tableData, tableSettings);\n  /** config */\n  const params = useKnowledgeParams();\n  const resourceNavigate = useDataNavigate();\n  const docId = useMemo(\n    () => getDocIdFromProgressList(progressList),\n    [progressList],\n  );\n  const createDocument = useCreateDocument(useStore);\n  useEffect(() => {\n    createDocument(\n      getCreateDocumentParams({\n        isAppend: false,\n        unitList,\n        metaData: meta,\n        tableSettings,\n      }),\n    );\n  }, []);\n  return (\n    <>\n      <UnitProgress progressList={progressList} createStatus={createStatus} />\n      {footer\n        ? footer([\n            {\n              e2e: KnowledgeE2e.CreateUnitConfirmBtn,\n              type: 'hgltplus',\n              theme: 'solid',\n              text: I18n.t('variable_reset_yes'),\n              onClick: () => {\n                resourceNavigate.toResource?.('knowledge', params.datasetID);\n              },\n              status: docId ? FooterBtnStatus.ENABLE : FooterBtnStatus.DISABLE,\n            },\n          ])\n        : null}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type UploadConfig,\n  type FooterControlsProps,\n  type ContentProps,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { I18n } from '@coze-arch/i18n';\n\nimport { UploadFooter } from '@/components';\n\nimport { TableLocalStep } from '../constants';\nimport { useTableCheck } from '../../hooks';\nimport {\n  type UploadTableAction,\n  type UploadTableState,\n} from '../../../interface';\nimport { createTableLocalAddStore } from './store';\nimport {\n  TableUpload,\n  TableConfiguration,\n  TablePreview,\n  TableProcessing,\n} from './steps';\n\ntype TableLocalContentProps = ContentProps<\n  UploadTableAction<TableLocalStep> & UploadTableState<TableLocalStep>\n>;\n\nexport const TableLocalAddConfig: UploadConfig<\n  TableLocalStep,\n  UploadTableAction<TableLocalStep> & UploadTableState<TableLocalStep>\n> = {\n  steps: [\n    {\n      content: (props: TableLocalContentProps) => (\n        <TableUpload\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('datasets_createFileModel_step2'),\n      step: TableLocalStep.UPLOAD,\n    },\n    {\n      content: (props: TableLocalContentProps) => (\n        <TableConfiguration\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('datasets_createFileModel_tab_step2'),\n      step: TableLocalStep.CONFIGURATION,\n    },\n    {\n      content: (props: TableLocalContentProps) => (\n        <TablePreview\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('datasets_createFileModel_tab_step3'),\n      step: TableLocalStep.PREVIEW,\n    },\n    {\n      content: (props: TableLocalContentProps) => (\n        <TableProcessing\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('datasets_createFileModel_step4'),\n      step: TableLocalStep.PROCESSING,\n    },\n  ],\n  createStore: createTableLocalAddStore,\n  className: 'table-local-wrapper',\n  useUploadMount: store => useTableCheck(store),\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\n\nimport { type TableLocalStep } from '../constants';\nimport { createTableSlice } from '../../../slice';\nimport {\n  type UploadTableAction,\n  type UploadTableState,\n} from '../../../interface';\n\nexport const createTableLocalAddStore = () =>\n  create<\n    UploadTableState<TableLocalStep> & UploadTableAction<TableLocalStep>\n  >()(\n    devtools((set, get, store) => ({\n      ...createTableSlice(set, get, store),\n    })),\n  );\n","\n      import API from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { getDataTypeText } from '@coze-data/utils';\nimport { FooterBtnStatus } from '@coze-data/knowledge-resource-processor-core';\nimport {\n  TextRender,\n  type TableViewRecord,\n  ImageRender,\n  ActionsRender,\n} from '@coze-common/table-view';\nimport { I18n } from '@coze-arch/i18n';\nimport { type ColumnProps } from '@coze-arch/bot-semi/Table';\nimport { Typography } from '@coze-arch/bot-semi';\nimport {\n  type DocTableColumn,\n  type GetDocumentTableInfoResponse,\n  ColumnType,\n} from '@coze-arch/bot-api/memory';\nimport { Tag } from '@coze-arch/coze-design';\n\nimport { getSrcFromImg } from '@/utils/table';\n\nimport styles from './index.module.less';\n\nconst MAX_WIDTH = 1400;\nconst MIN_WIDTH = 200;\nconst DIFF_WIDTH = 397;\n\nexport function transformTableData<T>(\n  tableColumns: T[],\n  indexName: string,\n  valueName?: string,\n) {\n  const tableDataItem: Record<string, string> = {};\n  tableColumns.forEach(column => {\n    const key = column[indexName as keyof T] as string;\n    const value = valueName ? (column[valueName as keyof T] as string) : '';\n    tableDataItem[key] = value;\n  });\n\n  return [tableDataItem];\n}\n\nexport interface TableDataCleaningParams {\n  data: GetDocumentTableInfoResponse;\n  handleEdit: (record: TableViewRecord, index: number) => void;\n  handleDel: (indexList: number[]) => void;\n  handleCellUpdate: (record: TableViewRecord, index: number) => void;\n  tableContainerRef: React.RefObject<HTMLDivElement>;\n}\n\nconst ColumnTypeComp = (props: { columnType: ColumnType }) => (\n  <Tag color=\"primary\" className={styles['column-type']}>\n    {getDataTypeText(props.columnType)}\n  </Tag>\n);\n\nexport function tableDataCleaning({\n  data,\n  handleEdit,\n  handleDel,\n  handleCellUpdate,\n  tableContainerRef,\n}: TableDataCleaningParams) {\n  const defaultData = {\n    sheetStructure: [],\n    tableColumns: [],\n    tableData: [],\n  };\n\n  if (!data) {\n    return defaultData;\n  }\n  const { table_meta, sheet_list } = data;\n\n  if (!table_meta || !Object.keys(table_meta).length || !sheet_list?.length) {\n    return defaultData;\n  }\n\n  const curSubSheet = sheet_list[0];\n  const curSheetStructure = table_meta[curSubSheet?.id ?? ''] || [];\n  const dom = tableContainerRef.current;\n  const maxWidth = dom ? dom.offsetWidth - DIFF_WIDTH : MAX_WIDTH;\n\n  const dataWidth =\n    maxWidth / curSheetStructure.length > MIN_WIDTH\n      ? maxWidth / curSheetStructure.length\n      : MIN_WIDTH;\n  const tableColumns: ColumnProps[] = curSheetStructure.map(column => ({\n    id: column.column_name,\n    dataIndex: column.column_name,\n    columnType: column.column_type,\n    title: (\n      <div className={styles['table-view-title']}>\n        <Typography.Text\n          className={styles['table-view-title-content']}\n          ellipsis={{\n            showTooltip: {\n              opts: { content: column.column_name },\n            },\n          }}\n        >\n          {column.column_name}\n        </Typography.Text>\n        {column.is_semantic ? (\n          <Tag color=\"green\" className={styles['semantic-tag']}>\n            {I18n.t('knowledge_1226_001')}\n          </Tag>\n        ) : null}\n        {column.column_type ? (\n          <ColumnTypeComp columnType={column.column_type}></ColumnTypeComp>\n        ) : null}\n      </div>\n    ),\n    width: dataWidth,\n    render: (text: string, record: TableViewRecord, index: number) => {\n      if (column.column_type === ColumnType.Image) {\n        const srcList = getSrcFromImg(\n          record?.[column?.column_name as string] as string,\n        );\n        return (\n          <ImageRender\n            srcList={srcList}\n            onChange={(src, tosKey) => {\n              let val = '';\n              if (src || tosKey) {\n                val = `<img src=\"${src ?? ''}\" ${\n                  tosKey ? `data-tos-key=\"${tosKey}\"` : ''\n                }>`;\n              }\n              const newRecord = {\n                ...record,\n                [column?.column_name as string]: val,\n              };\n              handleCellUpdate(newRecord, index);\n            }}\n          />\n        );\n      }\n      return (\n        <TextRender\n          dataIndex={column.column_name}\n          value={text}\n          record={record}\n          index={index}\n          editable\n          validator={{\n            validate: value => {\n              if (column.is_semantic) {\n                return !value || value === '';\n              }\n              return false;\n            },\n            errorMsg: I18n.t('datasets_url_empty'),\n          }}\n          onBlur={async (_text, updateRecord) =>\n            await handleCellUpdate(updateRecord, index)\n          }\n        />\n      );\n    },\n  }));\n\n  // Add action column\n  tableColumns.push({\n    title: <></>,\n    width: 100,\n    dataIndex: 'actions',\n    className: styles['unit-actions-column'],\n    fixed: 'right',\n    render: (_text, record, index) => (\n      <ActionsRender\n        record={record}\n        index={index}\n        editProps={{\n          disabled: false,\n          onEdit: () => {\n            handleEdit?.(record, index);\n          },\n        }}\n        deleteProps={{\n          disabled: false,\n          onDelete: () => {\n            handleDel?.([index]);\n          },\n        }}\n      />\n    ),\n  });\n\n  const tableDataItem = transformTableData<DocTableColumn>(\n    curSheetStructure,\n    'column_name',\n  );\n\n  return {\n    sheetStructure: curSheetStructure,\n    tableColumns,\n    tableData: tableDataItem,\n  };\n}\n\nexport function getSubmitBtnStatus(\n  sheetStructure: DocTableColumn[],\n  tableData: TableViewRecord[],\n  loading?: boolean,\n) {\n  if (loading) {\n    return FooterBtnStatus.LOADING;\n  }\n  const semanticItem = sheetStructure.find(item => item.is_semantic);\n  if (!semanticItem) {\n    return FooterBtnStatus.DISABLE;\n  }\n\n  const semanticItemName = semanticItem?.column_name;\n  if (!semanticItemName) {\n    return FooterBtnStatus.DISABLE;\n  }\n\n  if (!tableData.length) {\n    return FooterBtnStatus.DISABLE;\n  }\n\n  const hasSemanticItemNull = tableData.some(\n    item => item && item[semanticItemName] === '',\n  );\n\n  if (hasSemanticItemNull) {\n    return FooterBtnStatus.DISABLE;\n  }\n\n  return FooterBtnStatus.ENABLE;\n}\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useCallback, useRef, useState, useEffect } from 'react';\n\nimport { type TableDataItem } from '@coze-data/knowledge-modal-base';\nimport { type TableViewRecord } from '@coze-common/table-view';\nimport { type DocTableColumn } from '@coze-arch/bot-api/memory';\n\nimport { transformTableData } from './utils';\n\ninterface UseTableOperationsParams {\n  initialData?: TableViewRecord[];\n  createTableSegment?: () => void;\n  editTableSegment?: (data: string | TableDataItem[]) => void;\n}\nfunction useTableOperations({\n  initialData = [],\n  editTableSegment,\n}: UseTableOperationsParams) {\n  const [tableData, setTableData] = useState<TableViewRecord[]>(initialData);\n  const tableDataRef = useRef<TableViewRecord[]>(initialData);\n  const sheetStructureRef = useRef<DocTableColumn[]>([]);\n  const [editItemIndex, setEditItemIndex] = useState<number>(-1);\n\n  const handleCellUpdate = useCallback(\n    (_record: TableViewRecord, index: number) => {\n      setTableData(prevData =>\n        prevData.map((item, i) => {\n          if (i === index) {\n            return { ...item, ..._record };\n          }\n          return item;\n        }),\n      );\n    },\n    [tableData],\n  );\n  const handleDel = useCallback(\n    (indexList: (string | number)[]) => {\n      const currentTableData = tableDataRef.current;\n      const newTableData = [...currentTableData];\n      indexList.forEach(index => {\n        newTableData.splice(Number(index), 1);\n      });\n      setTableData(newTableData);\n    },\n    [tableDataRef.current],\n  );\n\n  const handleEdit = useCallback(\n    (record: TableViewRecord, index: string | number) => {\n      const currentTableData = tableDataRef.current;\n      setEditItemIndex(Number(index));\n      const curTableItem = currentTableData[Number(index)];\n      const curTableItemKeys = Object.keys(curTableItem);\n      const editTableData = curTableItemKeys.map(key => {\n        const sItem = sheetStructureRef.current.find(\n          item => item.column_name === key,\n        );\n        return {\n          column_name: sItem?.column_name || '',\n          column_id: sItem?.id || '',\n          is_semantic: Boolean(sItem?.is_semantic),\n          value: curTableItem[key] as string,\n        };\n      });\n      editTableSegment?.(editTableData);\n    },\n    [sheetStructureRef.current, tableDataRef.current],\n  );\n  const handleAdd = useCallback(() => {\n    const tableDataItem = transformTableData<DocTableColumn>(\n      sheetStructureRef.current,\n      'column_name',\n    );\n    const currentTableData = tableDataRef.current;\n    setTableData([...currentTableData, ...tableDataItem]);\n  }, [tableDataRef.current]);\n\n  useEffect(() => {\n    tableDataRef.current = tableData;\n  }, [tableData]);\n\n  return {\n    editItemIndex,\n    tableData,\n    setTableData,\n    handleCellUpdate,\n    handleAdd,\n    handleDel,\n    handleEdit,\n    tableDataRef,\n    sheetStructureRef,\n  };\n}\n\nexport default useTableOperations;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable @coze-arch/max-line-per-function */\n\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\n\nimport classNames from 'classnames';\nimport {\n  useDataNavigate,\n  useKnowledgeParams,\n} from '@coze-data/knowledge-stores';\nimport { type ContentProps } from '@coze-data/knowledge-resource-processor-core';\nimport {\n  type TableDataItem,\n  useTableSegmentModal,\n  ModalActionType,\n  transSliceContentOutput,\n} from '@coze-data/knowledge-modal-base';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport {\n  TableView,\n  type TableViewColumns,\n  type TableViewRecord,\n} from '@coze-common/table-view';\nimport { I18n } from '@coze-arch/i18n';\nimport { Spin } from '@coze-arch/bot-semi';\nimport { type DocTableColumn } from '@coze-arch/bot-api/memory';\nimport { ColumnType } from '@coze-arch/bot-api/memory';\nimport {\n  DocumentSource,\n  type DocumentInfo,\n} from '@coze-arch/bot-api/knowledge';\nimport { IconCozPlus } from '@coze-arch/coze-design/icons';\nimport { Button } from '@coze-arch/coze-design';\n\nimport { getAddSegmentParams } from '@/features/knowledge-type/table/utils';\nimport type {\n  UploadTableState,\n  UploadTableAction,\n} from '@/features/knowledge-type/table/interface';\nimport {\n  useFetchAddSegmentReq,\n  useFetchListDocumentReq,\n  useFetchTableInfoReq,\n} from '@/features/knowledge-type/table/hooks';\nimport { TableStatus } from '@/constants';\n\nimport {\n  getSubmitBtnStatus,\n  tableDataCleaning,\n  transformTableData,\n} from './utils';\nimport useTableOperations from './hooks';\n\nimport styles from './index.module.less';\n\ninterface StructureBarProps {\n  docTitle: string;\n}\n\nconst StructureBar = ({ docTitle }: StructureBarProps) => (\n  <div\n    className={styles['structure-bar']}\n    data-testid={KnowledgeE2e.IncrementTableUploadStructureTitle}\n  >\n    <div className={styles['structure-bar-title']}>{docTitle}</div>\n  </div>\n);\n\ninterface TableContainerProps {\n  loading: boolean;\n  tableData: TableViewRecord[];\n  columns: TableViewColumns[];\n  handleAdd: () => void;\n  handleDel: (indexList: (string | number)[]) => void;\n  handleEdit: (record: TableViewRecord, index: string | number) => void;\n}\nconst TableContainer = ({\n  loading,\n  tableData,\n  columns,\n  handleAdd,\n  handleDel,\n  handleEdit,\n}: TableContainerProps) => (\n  <>\n    <div className={`${styles['unit-table-container']} `}>\n      <Spin\n        spinning={loading}\n        wrapperClassName={styles.spin}\n        size=\"large\"\n        style={{ width: '100%', height: '100%' }}\n      >\n        {tableData.length ? (\n          <TableView\n            className={`${styles['unit-table-view']} `}\n            dataSource={tableData}\n            columns={columns}\n            rowOperation\n            editProps={{\n              onDelete: handleDel,\n              onEdit: handleEdit,\n            }}\n          />\n        ) : (\n          <div className={styles['unit-table-empty']}></div>\n        )}\n      </Spin>\n    </div>\n    <div className={`${styles['footer-toolbar']} `}>\n      <Button\n        data-testid={KnowledgeE2e.IncrementTableUploadStructureAddBtn}\n        className={styles['structure-bar-button']}\n        type=\"tertiary\"\n        onClick={() => {\n          handleAdd();\n        }}\n        icon={<IconCozPlus />}\n      >\n        {I18n.t('knowledge_custom_add_content')}\n      </Button>\n    </div>\n  </>\n);\nexport const TableUpload = <\n  T extends UploadTableState<number> & UploadTableAction<number>,\n>({\n  useStore,\n  footer,\n}: ContentProps<T>) => {\n  const params = useKnowledgeParams();\n  const { docID, spaceID, datasetID } = params;\n  const setStatus = useStore(state => state.setStatus);\n  const tableStatus = useStore(state => state.status);\n\n  const [columns, setColumns] = useState<TableViewColumns[]>([]);\n  const [docInfo, setDocInfo] = useState<DocumentInfo>({});\n  const tableContainerRef = useRef<HTMLDivElement | null>(null);\n  const tableMetaRef = useRef<DocTableColumn[]>([]);\n\n  const docTitle = useMemo(() => docInfo?.name || '', [docInfo]);\n  const { node: TableSegmentModalNode, edit: editTableSegment } =\n    useTableSegmentModal({\n      title: I18n.t('knowledg_table_segments_content'),\n      meta: tableMetaRef.current || [],\n      onFinish: (actionType, data) => {\n        const curTableItem = transformTableData<TableDataItem>(\n          data,\n          'column_name',\n          'value',\n        );\n        const hasEdit = actionType === ModalActionType.Edit;\n        if (hasEdit) {\n          handleCellUpdate(curTableItem[0], editItemIndex);\n        } else {\n          const newTableData = [...tableData, ...curTableItem];\n          setTableData(newTableData);\n        }\n      },\n    });\n  const {\n    editItemIndex,\n    tableData,\n    setTableData,\n    sheetStructureRef,\n    handleCellUpdate,\n    handleDel,\n    handleEdit,\n    handleAdd,\n  } = useTableOperations({\n    editTableSegment,\n  });\n\n  const fetchTableInfo = useFetchTableInfoReq(\n    res => {\n      const {\n        tableColumns,\n        tableData: sTableData,\n        sheetStructure: tableSchema,\n      } = tableDataCleaning({\n        data: res,\n        tableContainerRef,\n        handleCellUpdate,\n        handleEdit,\n        handleDel,\n      });\n      if (tableColumns.length > 0) {\n        setColumns(tableColumns);\n      }\n      if (sTableData.length > 0) {\n        setTableData(sTableData);\n      }\n\n      if (tableSchema.length > 0) {\n        tableMetaRef.current = tableSchema;\n        sheetStructureRef.current = tableSchema;\n      }\n      setStatus(TableStatus.NORMAL);\n    },\n    () => {\n      setStatus(TableStatus.NORMAL);\n    },\n  );\n\n  const resourceNavigate = useDataNavigate();\n  const { fetchAddSegment, addSegmentLoading } = useFetchAddSegmentReq(res => {\n    resourceNavigate.toResource?.('knowledge', datasetID);\n  });\n\n  const fetchDocumentInfo = useFetchListDocumentReq(setDocInfo);\n  useEffect(() => {\n    if (docID) {\n      setStatus(TableStatus.LOADING);\n      fetchDocumentInfo();\n      fetchTableInfo({\n        document_id: docID,\n      });\n    }\n  }, [docID]);\n\n  function handleSaveTableData() {\n    if (!spaceID || !datasetID || !docID) {\n      return;\n    }\n    const imageKeys: string[] = [];\n    columns.forEach(col => {\n      if (col.columnType === ColumnType.Image) {\n        imageKeys.push(col.id as string);\n      }\n    });\n    const formatData = tableData.map(data =>\n      Object.fromEntries(\n        Object.entries(data).map(([key, value]) => {\n          if (imageKeys.includes(key)) {\n            return [key, transSliceContentOutput(value as string)];\n          }\n          return [key, value];\n        }),\n      ),\n    );\n    const documentInfo = [\n      {\n        source_info: {\n          document_source: DocumentSource.Custom,\n          custom_content: JSON.stringify(formatData),\n        },\n        table_sheet: {\n          sheet_id: '0',\n          header_line_idx: '0',\n          start_line_idx: '0',\n        },\n      },\n    ];\n\n    const payload = getAddSegmentParams({\n      spaceId: spaceID,\n      docId: docID,\n      datasetId: datasetID,\n      documentInfo,\n    });\n    fetchAddSegment(payload);\n  }\n\n  return (\n    <div\n      ref={tableContainerRef}\n      className={classNames(\n        'custom-table-container',\n        styles['custom-table-container'],\n      )}\n    >\n      <StructureBar docTitle={docTitle} />\n      <TableContainer\n        loading={tableStatus === TableStatus.LOADING}\n        columns={columns}\n        tableData={tableData}\n        handleAdd={handleAdd}\n        handleDel={handleDel}\n        handleEdit={handleEdit}\n      />\n      {TableSegmentModalNode}\n\n      {footer\n        ? footer({\n            prefix: (\n              <span className={styles['footer-sub-tip']}>\n                {I18n.t('knowledge_table_custom_submit_tips')}\n              </span>\n            ),\n            btns: [\n              {\n                e2e: KnowledgeE2e.CreateUnitConfirmBtn,\n                type: 'hgltplus',\n                theme: 'solid',\n                text: I18n.t('variable_reset_yes'),\n                onClick: () => {\n                  handleSaveTableData();\n                },\n                status: getSubmitBtnStatus(\n                  sheetStructureRef.current,\n                  tableData,\n                  addSegmentLoading,\n                ),\n              },\n            ],\n          })\n        : null}\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type UploadConfig,\n  type FooterControlsProps,\n  type ContentProps,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { I18n } from '@coze-arch/i18n';\n\nimport { UploadFooter } from '@/components';\n\nimport {\n  type UploadTableAction,\n  type UploadTableState,\n} from '../../../interface';\nimport { createTableCustomIncrementalStore } from './store';\nimport { TableUpload } from './steps';\nimport { TableCustomIncrementalStep } from './constants';\n\ntype TableCustomContentProps = ContentProps<\n  UploadTableAction<TableCustomIncrementalStep> &\n    UploadTableState<TableCustomIncrementalStep>\n>;\n\nexport const TableCustomIncrementalConfig: UploadConfig<\n  TableCustomIncrementalStep,\n  UploadTableAction<TableCustomIncrementalStep> &\n    UploadTableState<TableCustomIncrementalStep>\n> = {\n  steps: [\n    {\n      content: (props: TableCustomContentProps) => (\n        <TableUpload\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('datasets_createFileModel_step2'),\n      step: TableCustomIncrementalStep.UPLOAD,\n    },\n  ],\n  createStore: createTableCustomIncrementalStore,\n  className: 'table-custom-increment-wrapper',\n  showStep: false,\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\n\nimport { createTableSlice } from '../../../slice';\nimport {\n  type UploadTableAction,\n  type UploadTableState,\n} from '../../../interface';\nimport { type TableCustomIncrementalStep } from './constants';\n\nexport const createTableCustomIncrementalStore = () =>\n  create<\n    UploadTableState<TableCustomIncrementalStep> &\n      UploadTableAction<TableCustomIncrementalStep>\n  >()(\n    devtools((set, get, store) => ({\n      ...createTableSlice(set, get, store),\n    })),\n  );\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type StateCreator } from 'zustand';\n\nimport {\n  createTableSlice,\n  getDefaultState,\n} from '@/features/knowledge-type/table/slice';\nimport type {\n  UploadTableAction,\n  UploadTableState,\n} from '@/features/knowledge-type/table/interface';\nimport { DEFAULT_TABLE_SETTINGS_FROM_ZERO } from '@/constants';\n\nexport const createTableCustomSlice: StateCreator<\n  UploadTableState<number> & UploadTableAction<number>\n> = (set, get, store) => ({\n  ...createTableSlice(set, get, store),\n  tableSettings: DEFAULT_TABLE_SETTINGS_FROM_ZERO,\n  reset: () => {\n    set({\n      ...getDefaultState(),\n      tableSettings: DEFAULT_TABLE_SETTINGS_FROM_ZERO,\n    });\n  },\n});\n","\n      import API from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./create-v2.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./create-v2.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React, { useEffect, useState } from 'react';\n\nimport { nanoid } from 'nanoid';\nimport {\n  useDataNavigate,\n  useKnowledgeParams,\n} from '@coze-data/knowledge-stores';\nimport {\n  FooterBtnStatus,\n  type ContentProps,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport { Tooltip } from '@coze-arch/bot-semi';\nimport { type DocTableColumn } from '@coze-arch/bot-api/memory';\nimport { DocumentSource, FormatType } from '@coze-arch/bot-api/knowledge';\nimport { IconCozPlus } from '@coze-arch/coze-design/icons';\nimport { Button } from '@coze-arch/coze-design';\n\nimport { type AddCustomTableMeta } from '@/types';\nimport { useCreateDocumentReq } from '@/services';\nimport { getCustomStatus } from '@/features/knowledge-type/table/utils';\nimport type {\n  UploadTableState,\n  UploadTableAction,\n} from '@/features/knowledge-type/table/interface';\nimport { MAX_TABLE_META_COLUMN_LEN } from '@/constants';\nimport { TableStructure, TableStructureTitle } from '@/components';\n\nimport styles from './create-v2.module.less';\n\nfunction getCreateDocumentParams(\n  metaData: AddCustomTableMeta & { key?: string; id?: string },\n  isAppend: boolean,\n) {\n  return {\n    document_bases: [\n      {\n        name: '', // Table custom control\n        source_info: {\n          document_source: DocumentSource.Custom,\n        },\n        table_meta: metaData.map((meta, index) => ({\n          column_name: meta.column_name,\n          is_semantic: meta.is_semantic,\n          column_type: meta.column_type,\n          desc: meta.desc,\n          sequence: index.toString(),\n        })),\n      },\n    ],\n    format_type: FormatType.Table,\n    is_append: isAppend,\n  };\n}\nexport const TableCustomCreate = <\n  T extends UploadTableState<number> & UploadTableAction<number>,\n>(\n  props: ContentProps<T>,\n) => {\n  const { footer, useStore } = props;\n  const params = useKnowledgeParams();\n\n  const resourceNavigate = useDataNavigate();\n\n  const { datasetID: knowledgeId } = params;\n  const [footerStatus, setFooterStatus] = useState(FooterBtnStatus.ENABLE);\n  const currentUuid = nanoid();\n  const [metaData, setMetaData] = useState<AddCustomTableMeta>([\n    {\n      id: currentUuid,\n      key: currentUuid,\n      column_name: '',\n      is_semantic: false,\n    },\n  ]);\n  const documentList = useStore(state => state.documentList) ?? [];\n  const isAppend = documentList.length !== 0;\n\n  const createDocument = useCreateDocumentReq({\n    onSuccess: () => {\n      setFooterStatus(FooterBtnStatus.ENABLE);\n      resourceNavigate.toResource?.('knowledge', knowledgeId);\n    },\n    onFail: () => {\n      setFooterStatus(FooterBtnStatus.DISABLE);\n    },\n  });\n\n  useEffect(() => {\n    if (footerStatus !== FooterBtnStatus.LOADING) {\n      setFooterStatus(getCustomStatus(metaData, 'toBeDelete')); // toBeDelete to be deleted\n    }\n  }, [metaData]);\n\n  const TooltipWrapper = ({ children }: { children: JSX.Element }) => {\n    if (metaData.length >= MAX_TABLE_META_COLUMN_LEN) {\n      return (\n        <Tooltip trigger=\"hover\" content={I18n.t('knowledge_1222_01')}>\n          {children}\n        </Tooltip>\n      );\n    }\n    return <>{children}</>;\n  };\n  return (\n    <div className={styles['create-table-wrapper']}>\n      <TableStructureTitle />\n      <TableStructure\n        initValid\n        isDragTable\n        data={metaData}\n        setData={setMetaData as (v: Array<DocTableColumn>) => void}\n      />\n      <TooltipWrapper>\n        <Button\n          data-testid={KnowledgeE2e.TableCustomUAddFieldBtn}\n          className={styles['add-column-button']}\n          type=\"tertiary\"\n          disabled={metaData.length >= MAX_TABLE_META_COLUMN_LEN}\n          onClick={() => {\n            const curUuid = nanoid();\n            setMetaData(\n              metaData.concat({\n                id: curUuid,\n                key: curUuid,\n                column_name: '',\n                is_semantic: false,\n              }),\n            );\n          }}\n          block={false}\n          icon={<IconCozPlus />}\n        >\n          {I18n.t('datasets_segment_tableStructure_add_field')}\n        </Button>\n      </TooltipWrapper>\n      {footer\n        ? footer([\n            {\n              e2e: KnowledgeE2e.CreateUnitConfirmBtn,\n              type: 'hgltplus',\n              theme: 'solid',\n              text: I18n.t('variable_reset_yes'),\n              onClick: () => {\n                setFooterStatus(FooterBtnStatus.LOADING);\n                createDocument(getCreateDocumentParams(metaData, isAppend));\n              },\n              status: footerStatus,\n            },\n          ])\n        : null}\n    </div>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { type TableLocalContentProps } from '../../types';\nimport { TableCustomCreate as TableCustomCreateV2 } from './create-v2';\n\n/** Delete TableCustomCreateV1 at that time.*/\nexport const TableCustomCreate = (props: TableLocalContentProps) => (\n  <TableCustomCreateV2 {...props} />\n);\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type UploadConfig,\n  type FooterControlsProps,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { I18n } from '@coze-arch/i18n';\n\nimport { UploadFooter } from '@/components';\n\nimport { useTableCheck } from '../../hooks';\nimport {\n  type UploadTableAction,\n  type UploadTableState,\n} from '../../../interface';\nimport { type TableLocalContentProps } from './types';\nimport { createTableCustomAddStore } from './store';\nimport { TableCustomCreate } from './steps';\nimport { TableCustomStep, TABLE_CUSTOM_WRAPPER_CLASS_NAME } from './constant';\n\nexport const TableCustomAddConfig: UploadConfig<\n  TableCustomStep,\n  UploadTableAction<TableCustomStep> & UploadTableState<TableCustomStep>\n> = {\n  steps: [\n    {\n      content: (props: TableLocalContentProps) => (\n        <TableCustomCreate\n          useStore={props.useStore}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n          checkStatus={undefined}\n        />\n      ),\n      title: I18n.t('datasets_createFileModel_step2'),\n      step: TableCustomStep.CREATE,\n    },\n  ],\n  createStore: createTableCustomAddStore,\n  showStep: false,\n  className: TABLE_CUSTOM_WRAPPER_CLASS_NAME,\n  useUploadMount: store => useTableCheck(store),\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\n\nimport {\n  type UploadTableAction,\n  type UploadTableState,\n} from '@/features/knowledge-type/table/interface';\n\nimport { type TableCustomStep } from '../constant';\nimport { createTableCustomSlice } from './slice';\n\nexport const createTableCustomAddStore = () =>\n  create<\n    UploadTableState<TableCustomStep> & UploadTableAction<TableCustomStep>\n  >()(\n    devtools((set, get, store) => ({\n      ...createTableCustomSlice(set, get, store),\n    })),\n  );\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { devtools } from 'zustand/middleware';\nimport { create } from 'zustand';\nimport {\n  CreateUnitStatus,\n  type UploadBaseAction,\n  type UploadBaseState,\n  type ProgressItem,\n  type UnitItem,\n} from '@coze-data/knowledge-resource-processor-core';\n\nimport { ImageAnnotationType, ImageFileAddStep } from '../types';\n\nexport type ImageFileAddStore = UploadBaseState<ImageFileAddStep> &\n  UploadBaseAction<ImageFileAddStep> & {\n    annotationType: ImageAnnotationType;\n    setAnnotationType: (annotationType: ImageAnnotationType) => void;\n  };\n\nconst storeStaticValues: Pick<\n  ImageFileAddStore,\n  | 'unitList'\n  | 'currentStep'\n  | 'annotationType'\n  | 'createStatus'\n  | 'progressList'\n> = {\n  currentStep: ImageFileAddStep.Upload,\n  unitList: [],\n  annotationType: ImageAnnotationType.Auto,\n  createStatus: CreateUnitStatus.UPLOAD_UNIT,\n  progressList: [],\n};\n\nexport const createImageFileAddStore = () =>\n  create<ImageFileAddStore>()(\n    devtools((set, get, store) => ({\n      ...storeStaticValues,\n      setCurrentStep: (currentStep: ImageFileAddStep) => {\n        set({ currentStep });\n      },\n      setUnitList: (unitList: UnitItem[]) => {\n        set({ unitList });\n      },\n      setAnnotationType: (annotationType: ImageAnnotationType) => {\n        set({ annotationType });\n      },\n      setCreateStatus: (createStatus: CreateUnitStatus) => {\n        set({ createStatus });\n      },\n      setProgressList: (progressList: ProgressItem[]) => {\n        set({ progressList });\n      },\n      reset: () => {\n        set(storeStaticValues);\n      },\n    })),\n  );\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { DataNamespace, dataReporter } from '@coze-data/reporter';\nimport { type UnitItem } from '@coze-data/knowledge-resource-processor-core';\nimport { REPORT_EVENTS } from '@coze-arch/report-events';\nimport { FileBizType } from '@coze-arch/bot-api/developer_api';\nimport { DeveloperApi } from '@coze-arch/bot-api';\n\nimport { transformUnitList, getFileExtension, getBase64 } from '@/utils';\n\nexport const useRetry = (params: {\n  unitList: UnitItem[];\n  setUnitList: (unitList: UnitItem[]) => void;\n}) => {\n  const { unitList, setUnitList } = params;\n\n  const onRetry = async (record: UnitItem, index: number) => {\n    try {\n      const { fileInstance } = record;\n      if (fileInstance) {\n        const { name } = fileInstance;\n        const extension = getFileExtension(name);\n        const base64 = await getBase64(fileInstance);\n        const result = await DeveloperApi.UploadFile({\n          file_head: {\n            file_type: extension,\n            biz_type: FileBizType.BIZ_BOT_DATASET,\n          },\n          data: base64,\n        });\n\n        setUnitList(\n          transformUnitList({\n            unitList,\n            data: result?.data,\n            fileInstance,\n            index,\n          }),\n        );\n      }\n    } catch (e) {\n      const error = e as Error;\n      dataReporter.errorEvent(DataNamespace.KNOWLEDGE, {\n        eventName: REPORT_EVENTS.KnowledgeUploadFile,\n        error,\n      });\n    }\n  };\n  return onRetry;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useMemo, type FC } from 'react';\n\nimport {\n  type ContentProps,\n  FooterBtnStatus,\n  UploadStatus,\n  type UnitItem,\n  UnitType,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport { Toast } from '@coze-arch/coze-design';\n\nimport { UploadUnitFile, UploadUnitTable } from '@/components';\n\nimport { ImageFileAddStep } from '../../types';\nimport { type ImageFileAddStore } from '../../store';\nimport { useRetry } from './use-retry';\n\nexport const ImageUpload: FC<ContentProps<ImageFileAddStore>> = props => {\n  const { useStore, footer } = props;\n  const setCurrentStep = useStore(state => state.setCurrentStep);\n  const unitList = useStore(state => state.unitList);\n  const setUnitList = useStore(state => state.setUnitList);\n\n  const onRetry = useRetry({ unitList, setUnitList });\n\n  const buttonStatus = useMemo(() => {\n    if (\n      unitList.length === 0 ||\n      unitList.some(\n        unitItem =>\n          unitItem.name.length === 0 ||\n          unitItem.status !== UploadStatus.SUCCESS,\n      )\n    ) {\n      return FooterBtnStatus.DISABLE;\n    }\n    return FooterBtnStatus.ENABLE;\n  }, [unitList]);\n\n  const hideUploadFile = false;\n  const AddUnitMaxLimit = 300;\n\n  const handleClickNext = () => {\n    setCurrentStep(ImageFileAddStep.Annotation);\n  };\n\n  const handleUnitListUpdate = (data: UnitItem[]) => {\n    const result = data;\n    setUnitList(result);\n  };\n\n  return (\n    <>\n      <UploadUnitFile\n        action=\"\"\n        accept={'.png,.jpg,.jpeg,.webp'}\n        dragMainText={I18n.t('knowledge_photo_004')}\n        dragSubText={I18n.t('knowledge_photo_005')}\n        limit={AddUnitMaxLimit}\n        unitList={unitList}\n        multiple={AddUnitMaxLimit > 1}\n        style={hideUploadFile ? { visibility: 'hidden', height: 0 } : undefined}\n        setUnitList={handleUnitListUpdate}\n        onFinish={handleUnitListUpdate}\n        maxSizeMB={20}\n        onSizeError={file =>\n          Toast.error(\n            I18n.t('photo-size-limit', {\n              fileName: file.name,\n            }),\n          )\n        }\n      />\n      {unitList.length > 0 ? (\n        <div className=\"mt-[25px] mb-[25px] overflow-y-auto\">\n          <UploadUnitTable\n            type={UnitType.IMAGE_FILE}\n            edit={true}\n            unitList={unitList}\n            onChange={setUnitList}\n            onRetry={onRetry}\n          />\n        </div>\n      ) : null}\n      {footer?.([\n        {\n          e2e: KnowledgeE2e.UploadUnitNextBtn,\n          type: 'hgltplus',\n          theme: 'solid',\n          text: I18n.t('datasets_createFileModel_NextBtn'),\n          status: buttonStatus,\n          onClick: handleClickNext,\n        },\n      ])}\n    </>\n  );\n};\n","\n      import API from \"!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, type FC } from 'react';\n\nimport {\n  useDataNavigate,\n  useKnowledgeParams,\n} from '@coze-data/knowledge-stores';\nimport { type ContentProps } from '@coze-data/knowledge-resource-processor-core';\nimport { getKnowledgeIDEQuery } from '@coze-data/knowledge-common-services';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { REPORT_EVENTS } from '@coze-arch/report-events';\nimport { I18n } from '@coze-arch/i18n';\nimport {\n  CaptionType,\n  DocumentSource,\n  FormatType,\n} from '@coze-arch/bot-api/knowledge';\n\nimport { reportProcessDocumentFail } from '@/utils/common';\nimport { getProcessingDescMsg } from '@/utils';\nimport { useCreateDocument } from '@/hooks';\nimport { UnitProgress } from '@/components';\n\nimport { ImageAnnotationType } from '../../types';\nimport { type ImageFileAddStore } from '../../store';\n\nimport styles from './index.module.less';\n\nexport const ImageProcess: FC<ContentProps<ImageFileAddStore>> = props => {\n  const { useStore, footer } = props;\n\n  const resourceNavigate = useDataNavigate();\n\n  const params = useKnowledgeParams();\n\n  const unitList = useStore(state => state.unitList);\n  const annotationType = useStore(state => state.annotationType);\n  const progressList = useStore(state => state.progressList);\n  const createStatus = useStore(state => state.createStatus);\n\n  const createDocument = useCreateDocument(useStore, {\n    onSuccess: docRes => {\n      const documentInfos = docRes.document_infos ?? [];\n      reportProcessDocumentFail(\n        documentInfos,\n        REPORT_EVENTS.KnowledgeProcessDocument,\n      );\n    },\n  });\n\n  useEffect(() => {\n    createDocument({\n      format_type: FormatType.Image,\n      chunk_strategy: {\n        caption_type:\n          annotationType === ImageAnnotationType.Manual\n            ? CaptionType.Manual\n            : CaptionType.Auto,\n      },\n      document_bases: unitList.map(item => ({\n        name: item.name,\n        source_info: {\n          tos_uri: item.uri,\n          document_source: DocumentSource.Document,\n        },\n      })),\n    });\n  }, []);\n  return (\n    <>\n      <UnitProgress progressList={progressList} createStatus={createStatus} />\n      {footer?.({\n        btns: [\n          {\n            e2e: KnowledgeE2e.CreateUnitConfirmBtn,\n            type: 'hgltplus',\n            theme: 'solid',\n            text: I18n.t('variable_reset_yes'),\n            onClick: () => {\n              const query = getKnowledgeIDEQuery() as Record<string, string>;\n              resourceNavigate.toResource?.(\n                'knowledge',\n                params.datasetID,\n                query,\n              );\n            },\n          },\n        ],\n        prefix: (\n          <span className={styles['footer-sub-tip']}>\n            {getProcessingDescMsg(createStatus)}\n          </span>\n        ),\n      })}\n    </>\n  );\n};\n","\n      import API from \"!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useMemo, type FC } from 'react';\n\nimport {\n  type ContentProps,\n  FooterBtnStatus,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { KnowledgeE2e } from '@coze-data/e2e';\nimport { I18n } from '@coze-arch/i18n';\nimport { Radio, RadioGroup } from '@coze-arch/coze-design';\n\nimport { ImageAnnotationType, ImageFileAddStep } from '../../types';\nimport { type ImageFileAddStore } from '../../store';\n\nimport styles from './index.module.less';\n\nexport const ImageAnnotation: FC<ContentProps<ImageFileAddStore>> = props => {\n  const { useStore, footer } = props;\n  const setCurrentStep = useStore(state => state.setCurrentStep);\n  const annotationType = useStore(state => state.annotationType);\n  const setAnnotationType = useStore(state => state.setAnnotationType);\n\n  const buttonStatus = useMemo(() => {\n    if (!annotationType) {\n      return FooterBtnStatus.DISABLE;\n    }\n    return FooterBtnStatus.ENABLE;\n  }, [annotationType]);\n\n  return (\n    <>\n      <div className={styles['segment-radio-wrapper']}>\n        <RadioGroup\n          type=\"pureCard\"\n          onChange={e => {\n            setAnnotationType(e.target.value as ImageAnnotationType);\n          }}\n          direction=\"vertical\"\n          value={annotationType}\n        >\n          <Radio\n            data-testid={KnowledgeE2e.ImageAnnotationAiRadio}\n            value={ImageAnnotationType.Auto}\n            extra={I18n.t('knowledge_photo_009')}\n          >\n            {I18n.t('knowledge_photo_008')}\n          </Radio>\n          <Radio\n            data-testid={KnowledgeE2e.ImageAnnotationManualRadio}\n            value={ImageAnnotationType.Manual}\n            extra={I18n.t('knowledge_photo_011')}\n          >\n            {I18n.t('knowledge_photo_010')}\n          </Radio>\n        </RadioGroup>\n      </div>\n\n      {footer?.([\n        {\n          e2e: KnowledgeE2e.UploadUnitUpBtn,\n          type: 'primary',\n          theme: 'light',\n          text: I18n.t('datasets_createFileModel_previousBtn'),\n          onClick: () => setCurrentStep(ImageFileAddStep.Upload),\n        },\n        {\n          e2e: KnowledgeE2e.UploadUnitNextBtn,\n          type: 'hgltplus',\n          theme: 'solid',\n          text: I18n.t('datasets_createFileModel_NextBtn'),\n          status: buttonStatus,\n          onClick: () => {\n            setCurrentStep(ImageFileAddStep.Process);\n          },\n        },\n      ])}\n    </>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  type FooterControlsProps,\n  type UploadConfig,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { I18n } from '@coze-arch/i18n';\n\nimport { useImageDisplayAnnotationStepCheck } from '@/hooks/common';\nimport { UploadFooter } from '@/components';\n\nimport { ImageFileAddStep } from './types';\nimport { createImageFileAddStore, type ImageFileAddStore } from './store';\nimport { ImageUpload } from './steps/upload';\nimport { ImageProcess } from './steps/process';\nimport { ImageAnnotation } from './steps/annotation';\n\nexport const ImageFileAddConfig: UploadConfig<\n  ImageFileAddStep,\n  ImageFileAddStore\n> = {\n  steps: [\n    {\n      title: I18n.t('knowledge_photo_006'),\n      step: ImageFileAddStep.Upload,\n      content: props => (\n        <ImageUpload\n          {...props}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n        />\n      ),\n    },\n    {\n      title: I18n.t('knowledge_photo_007'),\n      step: ImageFileAddStep.Annotation,\n      content: props => (\n        <ImageAnnotation\n          {...props}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n        />\n      ),\n    },\n    {\n      title: I18n.t('db_table_0126_015'),\n      step: ImageFileAddStep.Process,\n      content: props => (\n        <ImageProcess\n          {...props}\n          footer={(controls: FooterControlsProps) => (\n            <UploadFooter controls={controls} />\n          )}\n        />\n      ),\n    },\n  ],\n  createStore: createImageFileAddStore,\n  useUploadMount: store => useImageDisplayAnnotationStepCheck(),\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { get } from 'lodash-es';\nimport {\n  type GetUploadConfig,\n  UnitType,\n  OptType,\n  type UploadBaseState,\n  type UploadBaseAction,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { TextResegmentConfig } from '@coze-data/knowledge-resource-processor-base/features/resegment/text';\nimport { TableResegmentConfig } from '@coze-data/knowledge-resource-processor-base/features/resegment/table';\nimport { TextLocalResegmentConfig } from '@coze-data/knowledge-resource-processor-base/features/knowledge-type/text/first-party/local/resegment';\nimport { TextLocalAddUpdateConfig } from '@coze-data/knowledge-resource-processor-base/features/knowledge-type/text/first-party/local/add';\nimport { TextCustomAddUpdateConfig } from '@coze-data/knowledge-resource-processor-base/features/knowledge-type/text/first-party/custom/add';\nimport { TableLocalIncrementalConfig } from '@coze-data/knowledge-resource-processor-base/features/knowledge-type/table/first-party/local/incremental';\nimport { TableLocalAddConfig } from '@coze-data/knowledge-resource-processor-base/features/knowledge-type/table/first-party/local/add';\nimport { TableCustomIncrementalConfig } from '@coze-data/knowledge-resource-processor-base/features/knowledge-type/table/first-party/custom/incremental';\nimport { TableCustomAddConfig } from '@coze-data/knowledge-resource-processor-base/features/knowledge-type/table/first-party/custom/add';\nimport { ImageFileAddConfig } from '@coze-data/knowledge-resource-processor-base/features/knowledge-type/image/file';\n\nconst getConfigV2 = () => ({\n  [UnitType.TEXT]: {\n    [OptType.RESEGMENT]: TextResegmentConfig,\n  },\n  [UnitType.TABLE]: {\n    [OptType.RESEGMENT]: TableResegmentConfig,\n  },\n  [UnitType.TEXT_DOC]: {\n    [OptType.ADD]: TextLocalAddUpdateConfig,\n    [OptType.RESEGMENT]: TextLocalResegmentConfig,\n  },\n  [UnitType.TEXT_CUSTOM]: {\n    [OptType.ADD]: TextCustomAddUpdateConfig,\n  },\n  [UnitType.TABLE_DOC]: {\n    [OptType.ADD]: TableLocalAddConfig,\n    [OptType.INCREMENTAL]: TableLocalIncrementalConfig,\n  },\n  [UnitType.TABLE_CUSTOM]: {\n    [OptType.ADD]: TableCustomAddConfig,\n    [OptType.INCREMENTAL]: TableCustomIncrementalConfig,\n  },\n  [UnitType.IMAGE_FILE]: {\n    [OptType.ADD]: ImageFileAddConfig,\n  },\n});\n\n/**\n * Knowledge information architecture reconstruction changes are not small, so split into two configs. Change points:\n * 1. Remove the update operation from all links\n * 2. The resegment of the text shares one, because the interaction is already the same\n * 3. There are some detailed UI changes\n * 4. All interfaces have been migrated to KnowledgeAPI.\n */\nexport const getUploadConfig: GetUploadConfig<\n  number,\n  UploadBaseState<number> & UploadBaseAction<number>\n> = (type, opt) => {\n  const optKey = opt || OptType.ADD; // When opt === '' , the default is ADD.\n  const config = getConfigV2();\n\n  return get(config, `${type}.${optKey}`, null);\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport classNames from 'classnames';\nimport { getKnowledgeIDEQuery } from '@coze-data/knowledge-common-services';\nimport {\n  useDataNavigate,\n  useKnowledgeParams,\n} from '@coze-data/knowledge-stores';\nimport { IconCozArrowLeft } from '@coze-arch/coze-design/icons';\nimport { IconButton, Typography } from '@coze-arch/coze-design';\n\ninterface UploadActionNavbarProps {\n  title: string;\n}\n\n// Upload page navigation bar\nexport const UploadActionNavbar = ({ title }: UploadActionNavbarProps) => {\n  const params = useKnowledgeParams();\n  const resourceNavigate = useDataNavigate();\n\n  // TODO: Scene layer maintenance of hzf biz differentiation\n  const fromProject = params.biz === 'project';\n  const handleBack = () => {\n    const query = getKnowledgeIDEQuery() as Record<string, string>;\n    resourceNavigate.toResource?.('knowledge', params.datasetID, query);\n  };\n\n  return (\n    <div\n      className={classNames(\n        'flex items-center justify-between shrink-0 h-[56px] coz-fg-primary',\n        fromProject ? 'px-[12px]' : '',\n      )}\n    >\n      <div className=\"flex items-center\">\n        <IconButton\n          color=\"secondary\"\n          icon={<IconCozArrowLeft className=\"text-[16px]\" />}\n          iconPosition=\"left\"\n          className=\"!p-[8px]\"\n          onClick={handleBack}\n        ></IconButton>\n        <Typography.Text fontSize=\"16px\" weight={500} className=\"ml-[8px]\">\n          {title}\n        </Typography.Text>\n      </div>\n    </div>\n  );\n};\n","\n      import API from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/style-loader/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/index.js??ruleSet[1].rules[10].use[1]!builtin:lightningcss-loader??ruleSet[1].rules[10].use[2]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/postcss-loader/index.js??ruleSet[1].rules[10].use[3]!../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+plugin-less@1.1.1_@rsbuild+core@1.1.13/node_modules/@rsbuild/plugin-less/compiled/less-loader/index.js??ruleSet[1].rules[10].use[4]!./index.module.less\";\n       export default content && content.locals ? content.locals : undefined;\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useEffect, useMemo } from 'react';\n\nimport classNames from 'classnames';\nimport {\n  useDataCallbacks,\n  useKnowledgeParams,\n} from '@coze-data/knowledge-stores';\nimport {\n  DataErrorBoundary,\n  DataNamespace,\n  ErrorFallbackComponent,\n} from '@coze-data/reporter';\nimport {\n  Upload,\n  OptType,\n  KnowledgeUploadStoreProvider,\n  type UploadBaseState,\n  type UploadConfig,\n  type UploadBaseAction,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { useGetKnowledgeListInfo } from '@coze-data/knowledge-common-hooks/use-case';\nimport { useReportTti } from '@coze-arch/report-tti';\nimport { I18n } from '@coze-arch/i18n';\nimport { renderHtmlTitle } from '@coze-arch/bot-utils';\nimport { Layout } from '@coze-arch/coze-design';\n\nimport { UploadActionNavbar } from '@/components/upload-navbar';\n\nimport styles from './index.module.less';\n\nexport interface KnowledgeResourceProcessorLayoutProps {\n  keepDocTitle?: boolean;\n  uploadConfig: UploadConfig<\n    number,\n    UploadBaseState<number> & UploadBaseAction<number>\n  >;\n  children?: React.ReactNode;\n}\n\nexport const KnowledgeResourceProcessorLayout = ({\n  keepDocTitle,\n  uploadConfig,\n  children,\n}: KnowledgeResourceProcessorLayoutProps) => {\n  const { onUpdateDisplayName, onStatusChange } = useDataCallbacks();\n\n  const { datasetID, opt, docID, biz } = useKnowledgeParams();\n\n  // Get Knowledge Base Details\n  const { data: dataSetInfo, loading } = useGetKnowledgeListInfo({\n    datasetID: datasetID || '',\n  });\n\n  const hasCreateAction = useMemo(() => !docID, [docID]);\n  const headerTiTle = useMemo(() => {\n    let title = I18n.t('knowledge_upload_create_title');\n    if (opt === OptType.RESEGMENT) {\n      return I18n.t('datasets_unit_config_title1');\n    }\n\n    if (opt === OptType.INCREMENTAL || dataSetInfo?.file_list?.length) {\n      title = I18n.t('knowledg_unit_add_segments');\n    } else if (!hasCreateAction) {\n      title = I18n.t('datasets_unit_config_title1');\n    } else {\n      title = I18n.t('knowledge_upload_create_title');\n    }\n    return title;\n  }, [hasCreateAction, opt, dataSetInfo]);\n\n  useReportTti({\n    isLive: !!dataSetInfo && !loading,\n  });\n\n  useEffect(() => {\n    onUpdateDisplayName?.(headerTiTle);\n    onStatusChange?.('normal');\n  }, [headerTiTle]);\n\n  // TODO: hzf differentiation split into scenes\n  const fromProject = biz === 'project';\n\n  return (\n    <DataErrorBoundary namespace={DataNamespace.KNOWLEDGE}>\n      <Layout\n        className={classNames(\n          'flex flex-col gap-[16px]',\n          fromProject\n            ? 'coz-bg-max border border-solid coz-stroke-primary'\n            : 'p-[24px] pt-[16px]',\n        )}\n        title={renderHtmlTitle(\n          I18n.t('tab_dataset_detail', {\n            dataset_name: dataSetInfo?.name ?? '',\n          }),\n        )}\n        keepDocTitle={keepDocTitle}\n      >\n        <UploadActionNavbar title={headerTiTle} />\n        <Layout.Content className={classNames('!px-[76px] h-full')} scrollY>\n          {children}\n          <div className={styles['upload-unit-wrap']}>\n            {uploadConfig ? (\n              <KnowledgeUploadStoreProvider\n                createStore={uploadConfig.createStore}\n              >\n                <Upload config={uploadConfig} />\n              </KnowledgeUploadStoreProvider>\n            ) : (\n              <ErrorFallbackComponent namespace={DataNamespace.KNOWLEDGE} />\n            )}\n          </div>\n        </Layout.Content>\n      </Layout>\n    </DataErrorBoundary>\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useKnowledgeParams } from '@coze-data/knowledge-stores';\nimport {\n  OptType,\n  UnitType,\n} from '@coze-data/knowledge-resource-processor-core';\nimport {\n  KnowledgeResourceProcessorLayout,\n  type KnowledgeResourceProcessorLayoutProps,\n} from '@coze-data/knowledge-resource-processor-base/layout/base';\n\nimport { getUploadConfig } from './config';\n\nexport type KnowledgeResourceProcessorProps =\n  KnowledgeResourceProcessorLayoutProps;\n\nexport const KnowledgeResourceProcessor = (\n  props: KnowledgeResourceProcessorProps,\n) => {\n  const { type, opt } = useKnowledgeParams();\n  const uploadConfig = getUploadConfig(\n    type ?? UnitType.TEXT,\n    opt ?? OptType.ADD,\n  );\n  if (!uploadConfig) {\n    return <></>;\n  }\n  return (\n    <KnowledgeResourceProcessorLayout {...props} uploadConfig={uploadConfig} />\n  );\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport qs from 'qs';\nimport {\n  useTitle,\n  useCurrentWidgetContext,\n  useIDEParams,\n  useIDENavigate,\n  useProjectId,\n  useSpaceId,\n  useCommitVersion,\n} from '@coze-project-ide/framework';\nimport { usePrimarySidebarStore } from '@coze-project-ide/biz-components';\nimport { KnowledgeParamsStoreProvider } from '@coze-data/knowledge-stores';\nimport {\n  UnitType,\n  OptType,\n} from '@coze-data/knowledge-resource-processor-core';\nimport {\n  getUploadConfig,\n  KnowledgeResourceProcessor,\n} from '@coze-data/knowledge-resource-processor-adapter';\nimport { type ActionType } from '@coze-data/knowledge-ide-base/types';\nimport { BizProjectKnowledgeIDE } from '@coze-data/knowledge-ide-adapter';\n\nconst Main = () => {\n  const spaceID = useSpaceId();\n  const { uri, widget } = useCurrentWidgetContext();\n  const IDENav = useIDENavigate();\n  const title = useTitle();\n  const { version } = useCommitVersion();\n\n  const projectID = useProjectId();\n\n  const refetch = usePrimarySidebarStore(state => state.refetch);\n\n  const queryObject = useIDEParams();\n\n  const {\n    type,\n    opt,\n    doc_id,\n    page_mode,\n    biz,\n    bot_id,\n    workflow_id,\n    agent_id,\n    module,\n    action_type,\n    first_auto_open_edit_document_id,\n    create,\n  } = queryObject;\n\n  const uploadConfig = getUploadConfig(\n    (type as UnitType) ?? UnitType.TEXT,\n    (opt as OptType) ?? OptType.ADD,\n  );\n\n  const datasetID = uri?.path.name ?? '';\n\n  return (\n    <KnowledgeParamsStoreProvider\n      params={{\n        version,\n        projectID,\n        datasetID,\n        spaceID,\n        type: type as UnitType,\n        opt: opt as OptType,\n        docID: doc_id,\n        pageMode: page_mode as 'modal' | 'normal',\n        biz:\n          (biz as 'agentIDE' | 'workflow' | 'project' | undefined) ?? 'project',\n        botID: bot_id,\n        workflowID: workflow_id,\n        agentID: agent_id,\n        actionType: action_type as ActionType,\n        first_auto_open_edit_document_id,\n        create,\n      }}\n      onUpdateDisplayName={displayName => {\n        widget.setTitle(displayName); // Set tab title\n        if (displayName && displayName !== title) {\n          refetch(); // Update sidebar name\n        }\n      }}\n      onStatusChange={status => {\n        widget.setUIState(status);\n      }}\n      resourceNavigate={{\n        // eslint-disable-next-line max-params\n        toResource: (resource, resourceID, query, opts) =>\n          IDENav(`/${resource}/${resourceID}?${qs.stringify(query)}`, opts),\n        upload: (query, opts) => {\n          IDENav(\n            `/knowledge/${datasetID}?module=upload&${qs.stringify(query)}`,\n            opts,\n          );\n        },\n      }}\n    >\n      {module === 'upload' ? (\n        uploadConfig ? (\n          <KnowledgeResourceProcessor\n            keepDocTitle\n            uploadConfig={uploadConfig}\n          />\n        ) : null\n      ) : (\n        <BizProjectKnowledgeIDE layoutProps={{ keepDocTitle: true }} />\n      )}\n    </KnowledgeParamsStoreProvider>\n  );\n};\n\nexport default Main;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.browse-detail-modal-G7py31{padding-bottom:40px}.browse-detail-modal-main-OiglzK{color:#1c1f23;align-items:center;margin-bottom:16px;font-size:14px;font-weight:600;line-height:20px;display:flex}.browse-detail-modal-main-image-Q8aVNY{background-color:#98cdfd;border-radius:2px;flex-shrink:0;justify-content:center;align-items:center;width:18px;height:18px;margin-right:7px;display:flex}.browse-detail-modal-main-title-EEkSF8{max-width:40%}.browse-detail-modal-main-url-Kbqole{color:rgba(28,31,35,.35);max-width:40%;margin-left:7px;font-size:12px;font-weight:400;line-height:16px}.browse-detail-modal-collapse-T8YH3_{background-color:#f5f5f5;border-radius:4px;max-height:400px;overflow-y:auto}.browse-detail-modal-collapse-T8YH3_ .semi-collapse-item{border-color:#efefef!important}.browse-detail-modal-collapse-T8YH3_ .semi-input-textarea-wrapper{background-color:transparent!important;border:none!important}.browse-modal-header-U4nuzC{flex-wrap:nowrap;align-items:center;padding:24px 0;display:flex}.browse-modal-header-left-AI0E76{align-items:center;display:flex}.browse-modal-header-left-icon-cYcFqE{margin-right:8px}.modal-i1yfPQ.upgrade-level-uuygZh .semi-modal-body{height:0;padding-bottom:0}.modal-i1yfPQ.upgrade-level-uuygZh .semi-modal-content{background-color:var(--semi-color-tertiary-light-default)}.browse-detail-tooltip-ZTxCjJ{word-wrap:break-word;width:200px}.browse-source-url-_vmPyT{color:rgba(29,28,36,.35);margin-top:12px;font-size:12px;font-style:normal;font-weight:400;line-height:16px}`, \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"browse-detail-modal\": `browse-detail-modal-G7py31`,\n\t\"browseDetailModal\": `browse-detail-modal-G7py31`,\n\t\"browse-detail-modal-main\": `browse-detail-modal-main-OiglzK`,\n\t\"browseDetailModalMain\": `browse-detail-modal-main-OiglzK`,\n\t\"browse-detail-modal-main-image\": `browse-detail-modal-main-image-Q8aVNY`,\n\t\"browseDetailModalMainImage\": `browse-detail-modal-main-image-Q8aVNY`,\n\t\"browse-detail-modal-main-title\": `browse-detail-modal-main-title-EEkSF8`,\n\t\"browseDetailModalMainTitle\": `browse-detail-modal-main-title-EEkSF8`,\n\t\"browse-detail-modal-main-url\": `browse-detail-modal-main-url-Kbqole`,\n\t\"browseDetailModalMainUrl\": `browse-detail-modal-main-url-Kbqole`,\n\t\"browse-detail-modal-collapse\": `browse-detail-modal-collapse-T8YH3_`,\n\t\"browseDetailModalCollapse\": `browse-detail-modal-collapse-T8YH3_`,\n\t\"browse-modal-header\": `browse-modal-header-U4nuzC`,\n\t\"browseModalHeader\": `browse-modal-header-U4nuzC`,\n\t\"browse-modal-header-left\": `browse-modal-header-left-AI0E76`,\n\t\"browseModalHeaderLeft\": `browse-modal-header-left-AI0E76`,\n\t\"browse-modal-header-left-icon\": `browse-modal-header-left-icon-cYcFqE`,\n\t\"browseModalHeaderLeftIcon\": `browse-modal-header-left-icon-cYcFqE`,\n\t\"modal\": `modal-i1yfPQ`,\n\t\"upgrade-level\": `upgrade-level-uuygZh`,\n\t\"upgradeLevel\": `upgrade-level-uuygZh`,\n\t\"browse-detail-tooltip\": `browse-detail-tooltip-ZTxCjJ`,\n\t\"browseDetailTooltip\": `browse-detail-tooltip-ZTxCjJ`,\n\t\"browse-source-url\": `browse-source-url-_vmPyT`,\n\t\"browseSourceUrl\": `browse-source-url-_vmPyT`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.card-radio-group-wzfiJX{gap:4px}.card-radio-group-wzfiJX .semi-radio{border-radius:8px;padding:12px}.card-radio-group-wzfiJX .semi-radio:hover{background-color:var(--coz-mg-secondary-hovered)}.card-radio-group-wzfiJX .semi-radio:active{background-color:var(--coz-mg-secondary-pressed)}.card-radio-group-wzfiJX .semi-radio.semi-radio-checked{background-color:var(--coz-mg-card);border-width:1.5px;padding:11.5px}.card-radio-group-wzfiJX .semi-radio-content{flex-grow:1}.card-radio-group-wzfiJX .semi-radio-content .semi-radio-addon{font-weight:500}.card-radio-group-wzfiJX .semi-radio-content .semi-radio-extra{font-size:12px;line-height:16px}`, \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"card-radio-group\": `card-radio-group-wzfiJX`,\n\t\"cardRadioGroup\": `card-radio-group-wzfiJX`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.load-failure-cflv8K{min-height:400px}.loading-gWseuj{justify-content:center;align-items:center;width:100%;min-height:400px;display:flex}.loading-content-mQodwK{color:rgba(29,28,35,.35);margin-left:8px;font-family:SF Pro Display;font-size:14px;font-style:normal;font-weight:400;line-height:20px}`, \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"load-failure\": `load-failure-cflv8K`,\n\t\"loadFailure\": `load-failure-cflv8K`,\n\t\"loading\": `loading-gWseuj`,\n\t\"loading-content\": `loading-content-mQodwK`,\n\t\"loadingContent\": `loading-content-mQodwK`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.auth-empty-wrapper-fr6klo{justify-content:center;align-items:center;height:calc(100% - 112px);display:flex}.auth-empty-wrapper-fr6klo .auth-empty-Xjao95{flex-direction:column;align-items:center;display:flex}.auth-empty-wrapper-fr6klo .auth-empty-image-VDpxNW{justify-content:center;align-items:center;width:140px;height:140px;display:flex}.auth-empty-wrapper-fr6klo .auth-empty-description-nlZRXc{color:var(--coz-fg-primary);margin-top:16px;font-size:16px;font-weight:600;line-height:22px}.auth-empty-wrapper-fr6klo .auth-empty-second-desc-VD10hC{color:var(--coz-fg-secondary);margin-top:4px;font-size:14px;line-height:20px}.auth-empty-wrapper-fr6klo .auth-empty-button-ugpRLF{margin-top:21px}`, \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"auth-empty-wrapper\": `auth-empty-wrapper-fr6klo`,\n\t\"authEmptyWrapper\": `auth-empty-wrapper-fr6klo`,\n\t\"auth-empty\": `auth-empty-Xjao95`,\n\t\"authEmpty\": `auth-empty-Xjao95`,\n\t\"auth-empty-image\": `auth-empty-image-VDpxNW`,\n\t\"authEmptyImage\": `auth-empty-image-VDpxNW`,\n\t\"auth-empty-description\": `auth-empty-description-nlZRXc`,\n\t\"authEmptyDescription\": `auth-empty-description-nlZRXc`,\n\t\"auth-empty-second-desc\": `auth-empty-second-desc-VD10hC`,\n\t\"authEmptySecondDesc\": `auth-empty-second-desc-VD10hC`,\n\t\"auth-empty-button\": `auth-empty-button-ugpRLF`,\n\t\"authEmptyButton\": `auth-empty-button-ugpRLF`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.auth-empty-wrapper-RhjsLq{justify-content:center;align-items:center;height:calc(100% - 112px);display:flex}.auth-empty-wrapper-RhjsLq .auth-empty-Sl0qKt{flex-direction:column;align-items:center;display:flex}.auth-empty-wrapper-RhjsLq .auth-empty-image-UXdNZu{justify-content:center;align-items:center;width:140px;height:140px;display:flex}.auth-empty-wrapper-RhjsLq .auth-empty-description-PkOJj9{color:var(--Light-usage-text---color-text-0,#1d1c23);margin-top:16px;font-size:16px;font-weight:600;line-height:22px}.auth-empty-wrapper-RhjsLq .auth-empty-second-desc-Nuf4Nr{color:var(--Light-usage-text---color-text-2,rgba(29,28,35,.6));margin-top:4px;font-size:14px;line-height:20px}.auth-empty-wrapper-RhjsLq .auth-empty-button-X6asn5{margin-top:21px}`, \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"auth-empty-wrapper\": `auth-empty-wrapper-RhjsLq`,\n\t\"authEmptyWrapper\": `auth-empty-wrapper-RhjsLq`,\n\t\"auth-empty\": `auth-empty-Sl0qKt`,\n\t\"authEmpty\": `auth-empty-Sl0qKt`,\n\t\"auth-empty-image\": `auth-empty-image-UXdNZu`,\n\t\"authEmptyImage\": `auth-empty-image-UXdNZu`,\n\t\"auth-empty-description\": `auth-empty-description-PkOJj9`,\n\t\"authEmptyDescription\": `auth-empty-description-PkOJj9`,\n\t\"auth-empty-second-desc\": `auth-empty-second-desc-Nuf4Nr`,\n\t\"authEmptySecondDesc\": `auth-empty-second-desc-Nuf4Nr`,\n\t\"auth-empty-button\": `auth-empty-button-X6asn5`,\n\t\"authEmptyButton\": `auth-empty-button-X6asn5`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.frequency-form-item-SghTVA .title-AvpUA4{box-sizing:border-box;color:var(--coz-fg-secondary);flex-shrink:0;margin-bottom:8px;font-size:12px;line-height:16px;display:block}.frequency-form-item-SghTVA .content-pU2lYR{flex:1}`, \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"frequency-form-item\": `frequency-form-item-SghTVA`,\n\t\"frequencyFormItem\": `frequency-form-item-SghTVA`,\n\t\"title\": `title-AvpUA4`,\n\t\"content\": `content-pU2lYR`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.embed-progress-rIEMwe{flex:1}.embed-progress-rIEMwe .progress-info-hfP0J8{width:100%}.embed-progress-rIEMwe .progress-info-hfP0J8 .text-g0239m{height:32px;color:var(--coz-fg-primary);align-items:center;margin-bottom:8px;font-size:14px;font-style:normal;font-weight:500;line-height:20px;display:flex}.embed-progress-rIEMwe .progress-info-hfP0J8 .progress-list-GBBk7a{max-height:532px;overflow-y:auto}.embed-progress-rIEMwe .banner-ydKIT1{width:100%}.embed-progress-rIEMwe .progress-success-icon-VoWH3W>svg{width:16px;height:16px}.embed-progress-rIEMwe .progress-success-icon-VoWH3W>svg>path{fill:var(--semi-color-primary)}.data-processing-S9ldN3 .finish-text-YYzx_J{color:var(--coz-fg-primary);text-align:right;text-overflow:ellipsis;font-size:14px;font-style:normal;font-weight:400;line-height:20px;overflow:hidden}.data-processing-S9ldN3 .process-progress-item-actions{display:block!important}`, \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"embed-progress\": `embed-progress-rIEMwe`,\n\t\"embedProgress\": `embed-progress-rIEMwe`,\n\t\"progress-info\": `progress-info-hfP0J8`,\n\t\"progressInfo\": `progress-info-hfP0J8`,\n\t\"text\": `text-g0239m`,\n\t\"progress-list\": `progress-list-GBBk7a`,\n\t\"progressList\": `progress-list-GBBk7a`,\n\t\"banner\": `banner-ydKIT1`,\n\t\"progress-success-icon\": `progress-success-icon-VoWH3W`,\n\t\"progressSuccessIcon\": `progress-success-icon-VoWH3W`,\n\t\"data-processing\": `data-processing-S9ldN3`,\n\t\"dataProcessing\": `data-processing-S9ldN3`,\n\t\"finish-text\": `finish-text-YYzx_J`,\n\t\"finishText\": `finish-text-YYzx_J`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.upload-footer-HwRnxg{justify-content:flex-end;margin-top:auto;margin-bottom:18px;padding-top:24px;padding-bottom:24px;line-height:32px;display:flex}.upload-footer-HwRnxg .semi-button{margin-left:10px}`, \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"upload-footer\": `upload-footer-HwRnxg`,\n\t\"uploadFooter\": `upload-footer-HwRnxg`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.segment-radio-wrapper-TKAZbc .displayNone-dkIssP{display:none}.segment-radio-wrapper-TKAZbc .custom-wrapper-mHiLQ2{width:100%;position:relative}.segment-radio-wrapper-TKAZbc .custom-wrapper-mHiLQ2 .form-segment-_4or5l{margin-top:33px;margin-bottom:15px}.segment-radio-wrapper-TKAZbc .custom-wrapper-mHiLQ2 .form-segment-_4or5l .item-yNLwbz{margin-bottom:20px}.segment-radio-wrapper-TKAZbc .custom-wrapper-mHiLQ2 .form-segment-_4or5l .item-yNLwbz .label-B8cOJV{color:var(--coz-fg-primary);margin-bottom:8px;font-size:14px;font-weight:600;line-height:22px;display:block}.segment-radio-wrapper-TKAZbc .custom-wrapper-mHiLQ2 .form-segment-_4or5l .item-yNLwbz .label-red-ynWrpC:after{content:\"*\";color:var(--coz-fg-hglt-red);margin-left:4px;font-weight:600}.segment-radio-wrapper-TKAZbc .custom-wrapper-mHiLQ2 .form-segment-_4or5l .item-yNLwbz .custom-input-XsgTSG{margin-top:8px}.segment-radio-wrapper-TKAZbc .line-LbCaPK:before{content:\"\";background:var(--light-usage-border-color-border,rgba(28,31,35,.08));width:100%;height:1px;margin-top:26px;display:inline-block;position:absolute;top:10px}.segment-radio-wrapper-TKAZbc .semi-radioGroup.semi-radioGroup-vertical{row-gap:16px}.segment-radio-wrapper-TKAZbc .semi-radioGroup .semi-radio-content{flex-grow:1}.segment-radio-wrapper-TKAZbc .semi-radioGroup .custom-wrapper{padding-bottom:0}.segment-radio-wrapper-TKAZbc .semi-radioGroup .custom-wrapper .semi-input-default{border-radius:8px}.segment-radio-wrapper-TKAZbc .semi-radioGroup .custom-wrapper .semi-input-wrapper-focus{border-radius:8px}.segment-radio-wrapper-TKAZbc .semi-radio-cardRadioGroup{border:1px solid var(--coz-stroke-plus);border-radius:8px;padding:16px 16px 16px 19px}.segment-radio-wrapper-TKAZbc .semi-radio-cardRadioGroup:hover{background:var(--coz-mg-secondary-hovered)}.segment-radio-wrapper-TKAZbc .semi-radio-cardRadioGroup:active{background:var(--coz-mg-secondary-pressed)}.segment-radio-wrapper-TKAZbc .semi-radio-cardRadioGroup .semi-radio-extra{margin-top:4px}.segment-radio-wrapper-TKAZbc .semi-radio-cardRadioGroup_checked{background:var(--coz-mg-hglt);border:1px solid var(--coz-stroke-hglt)}.segment-radio-wrapper-TKAZbc .semi-radio-cardRadioGroup_checked:hover{background:var(--coz-mg-hglt-hovered)}.segment-radio-wrapper-TKAZbc .semi-radio-cardRadioGroup_checked:active{background:var(--coz-mg-hglt-pressed)}.segment-radio-wrapper-TKAZbc .semi-radio-addon{margin-bottom:2px}.segment-radio-wrapper-TKAZbc .semi-form-field-label{margin-bottom:8px}.segment-radio-wrapper-TKAZbc .semi-checkboxGroup-vertical{row-gap:8px}`, \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"segment-radio-wrapper\": `segment-radio-wrapper-TKAZbc`,\n\t\"segmentRadioWrapper\": `segment-radio-wrapper-TKAZbc`,\n\t\"displayNone\": `displayNone-dkIssP`,\n\t\"custom-wrapper\": `custom-wrapper-mHiLQ2`,\n\t\"customWrapper\": `custom-wrapper-mHiLQ2`,\n\t\"form-segment\": `form-segment-_4or5l`,\n\t\"formSegment\": `form-segment-_4or5l`,\n\t\"item\": `item-yNLwbz`,\n\t\"label\": `label-B8cOJV`,\n\t\"label-red\": `label-red-ynWrpC`,\n\t\"labelRed\": `label-red-ynWrpC`,\n\t\"custom-input\": `custom-input-XsgTSG`,\n\t\"customInput\": `custom-input-XsgTSG`,\n\t\"line\": `line-LbCaPK`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.footer-sub-tip-Ao5RTt{color:var(--light-usage-text-color-text-2,rgba(28,31,35,.6));font-size:12px}`, \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"footer-sub-tip\": `footer-sub-tip-Ao5RTt`,\n\t\"footerSubTip\": `footer-sub-tip-Ao5RTt`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.create-table-wrapper-Rmcxg9{flex-direction:column;justify-content:center;height:100%;display:flex}.add-column-button-JCssGI{width:114px;margin-top:16px}`, \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"create-table-wrapper\": `create-table-wrapper-Rmcxg9`,\n\t\"createTableWrapper\": `create-table-wrapper-Rmcxg9`,\n\t\"add-column-button\": `add-column-button-JCssGI`,\n\t\"addColumnButton\": `add-column-button-JCssGI`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.structure-bar-YhAhlN{flex-direction:row;justify-content:space-between;align-items:center;margin-bottom:10px;display:flex}.structure-bar-title-yFsfz3{color:var(--coz-fg-primary);font-size:14px;font-style:normal;font-weight:600;line-height:20px}.custom-table-container-rKmfoR{flex-direction:column;height:100%;display:flex}.unit-table-container-jC7mC5{border:1px solid var(--coz-stroke-primary);border-radius:8px}.unit-table-container-jC7mC5 .unit-table-view-JZykq7{min-height:90px;max-height:540px}.unit-table-container-jC7mC5 .unit-table-view-JZykq7 .semi-table-wrapper{margin-top:0}.unit-table-container-jC7mC5 .unit-table-view-JZykq7 .coz-tag.coz-tag-primary{font-weight:400}.unit-table-container-jC7mC5 .unit-table-view-JZykq7 .semi-table-thead>.semi-table-row>.semi-table-row-head{border-bottom:1px solid var(--coz-stroke-primary)}.unit-table-container-jC7mC5 .unit-table-view-JZykq7 .semi-table-header{border-top-left-radius:8px;border-top-right-radius:8px}.unit-table-container-jC7mC5 .unit-table-view-JZykq7 .semi-table-row:last-child .semi-table-row-cell{border-bottom:1px solid transparent}.unit-table-container-jC7mC5 .unit-table-view-JZykq7 .semi-table-row:hover>.semi-table-row-cell:first-child{border-top-left-radius:0!important;border-bottom-left-radius:0!important}.unit-table-container-jC7mC5 .unit-table-view-JZykq7 .semi-table-row:hover>.semi-table-row-cell:last-child{border-top-right-radius:0!important;border-bottom-right-radius:0!important}.unit-table-container-jC7mC5 .unit-table-view-JZykq7 .semi-table-body{border-bottom-right-radius:8px;border-bottom-left-radius:8px;max-height:499px!important}.unit-table-container-jC7mC5 .table-view-title-R5PkXj{flex-direction:row;align-items:center;display:flex}.unit-table-container-jC7mC5 .table-view-title-R5PkXj .semantic-tag-KqZfNg{margin-left:8px}.unit-table-container-jC7mC5 .unit-table-empty-wR5NGZ{height:64px}.footer-toolbar-zOANOz{margin-top:10px}.spin-MXg6cV .semi-spin-wrapper{position:absolute}.spin-MXg6cV .semi-tabs-content{padding:0}.spin-MXg6cV .semi-spin-children{height:100%}.footer-sub-tip-ZYIj1y{color:var(--coz-fg-primary);font-size:12px}.column-type-K9Rv9d{margin-left:6px}`, \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"structure-bar\": `structure-bar-YhAhlN`,\n\t\"structureBar\": `structure-bar-YhAhlN`,\n\t\"structure-bar-title\": `structure-bar-title-yFsfz3`,\n\t\"structureBarTitle\": `structure-bar-title-yFsfz3`,\n\t\"custom-table-container\": `custom-table-container-rKmfoR`,\n\t\"customTableContainer\": `custom-table-container-rKmfoR`,\n\t\"unit-table-container\": `unit-table-container-jC7mC5`,\n\t\"unitTableContainer\": `unit-table-container-jC7mC5`,\n\t\"unit-table-view\": `unit-table-view-JZykq7`,\n\t\"unitTableView\": `unit-table-view-JZykq7`,\n\t\"table-view-title\": `table-view-title-R5PkXj`,\n\t\"tableViewTitle\": `table-view-title-R5PkXj`,\n\t\"semantic-tag\": `semantic-tag-KqZfNg`,\n\t\"semanticTag\": `semantic-tag-KqZfNg`,\n\t\"unit-table-empty\": `unit-table-empty-wR5NGZ`,\n\t\"unitTableEmpty\": `unit-table-empty-wR5NGZ`,\n\t\"footer-toolbar\": `footer-toolbar-zOANOz`,\n\t\"footerToolbar\": `footer-toolbar-zOANOz`,\n\t\"spin\": `spin-MXg6cV`,\n\t\"footer-sub-tip\": `footer-sub-tip-ZYIj1y`,\n\t\"footerSubTip\": `footer-sub-tip-ZYIj1y`,\n\t\"column-type\": `column-type-K9Rv9d`,\n\t\"columnType\": `column-type-K9Rv9d`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.table-structure-title-VenJKC{color:var(--coz-fg-primary);margin:12px 0 6px;font-family:PingFang SC;font-size:14px;font-style:normal;font-weight:600;line-height:20px}.no-result-BoLElK{flex-direction:column;justify-content:center;align-items:center;width:100%;height:448px;display:flex}.no-result-tips-fQ2rIO{color:var(--coz-fg-primary);margin-top:16px;font-family:SF Pro Display;font-size:16px;font-style:normal;font-weight:600;line-height:22px}.table-local-wrapper .semi-banner-full .semi-banner-content-wrapper .semi-banner-content{justify-content:flex-start}.table-local-wrapper .select-page-content .semi-tree-option-expand-icon{justify-content:center;align-items:center;width:20px!important;height:20px!important;line-height:20px!important}.table-local-wrapper .select-page-content .expand-placeholder{width:0!important;height:0!important;line-height:0!important}.table-local-wrapper .select-page-content .file-selector{justify-content:center;align-items:center;width:20px;height:20px;margin:0 8px}.table-local-wrapper .select-page-content .no-real-expand{margin:0 8px 0 0!important}.table-local-wrapper .select-page-content .file-icon{justify-content:center;align-self:center;align-items:center;width:20px;height:20px;margin-right:4px;line-height:20px;display:flex}.table-local-wrapper .select-page-content .file-selector{justify-content:center;width:20px;height:20px;margin:0 8px;padding:2px 0;display:flex}.table-local-wrapper .select-page-content .semi-tree-option-list{padding:0}.table-local-wrapper .select-page-content .file-node-row-content .action-placeholder{width:0;margin:0 0 0 8px}.footer-sub-tip-jRLlUx{color:var(--light-usage-text-color-text-2,rgba(28,31,35,.6));font-size:12px}.table-doc-footer-NLEYKz{float:right;margin-top:40px}.table-doc-footer-NLEYKz .semi-button{margin-left:10px}.table-setting-bar-container-B1lgTN{margin-bottom:0}.table-setting-bar-container-B1lgTN.is-error-A5YgGJ [x-field-id=header_line_idx] .semi-select{border:1px solid var(--coz-stroke-hglt-red)}.validation-results-Z91Ydh{flex-wrap:wrap;margin-top:4px;margin-bottom:6px;display:flex}.validation-results-Z91Ydh .validation-item-F7yUwf{flex:1;padding:0 8px}.validation-results-Z91Ydh .validation-item-F7yUwf .tips-YaFegc{color:var(--coz-fg-secondary);font-size:12px;line-height:16px}.validation-results-Z91Ydh .validation-item-F7yUwf .error-msg-xHwlV0{color:var(--coz-stroke-hglt-red);font-size:12px;line-height:16px}`, \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"table-structure-title\": `table-structure-title-VenJKC`,\n\t\"tableStructureTitle\": `table-structure-title-VenJKC`,\n\t\"no-result\": `no-result-BoLElK`,\n\t\"noResult\": `no-result-BoLElK`,\n\t\"no-result-tips\": `no-result-tips-fQ2rIO`,\n\t\"noResultTips\": `no-result-tips-fQ2rIO`,\n\t\"footer-sub-tip\": `footer-sub-tip-jRLlUx`,\n\t\"footerSubTip\": `footer-sub-tip-jRLlUx`,\n\t\"table-doc-footer\": `table-doc-footer-NLEYKz`,\n\t\"tableDocFooter\": `table-doc-footer-NLEYKz`,\n\t\"table-setting-bar-container\": `table-setting-bar-container-B1lgTN`,\n\t\"tableSettingBarContainer\": `table-setting-bar-container-B1lgTN`,\n\t\"is-error\": `is-error-A5YgGJ`,\n\t\"isError\": `is-error-A5YgGJ`,\n\t\"validation-results\": `validation-results-Z91Ydh`,\n\t\"validationResults\": `validation-results-Z91Ydh`,\n\t\"validation-item\": `validation-item-F7yUwf`,\n\t\"validationItem\": `validation-item-F7yUwf`,\n\t\"tips\": `tips-YaFegc`,\n\t\"error-msg\": `error-msg-xHwlV0`,\n\t\"errorMsg\": `error-msg-xHwlV0`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.footer-sub-tip-MIX2OZ{color:var(--light-usage-text-color-text-2,rgba(28,31,35,.6));font-size:12px}`, \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"footer-sub-tip\": `footer-sub-tip-MIX2OZ`,\n\t\"footerSubTip\": `footer-sub-tip-MIX2OZ`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.custom-text-form-vUVDqG .semi-form-field-error-message{color:var(--coz-fg-hglt-red)}.custom-text-form-vUVDqG .semi-form-field-label-required .semi-form-field-label-text:after{color:var(--coz-fg-hglt-red)}`, \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"custom-text-form\": `custom-text-form-vUVDqG`,\n\t\"customTextForm\": `custom-text-form-vUVDqG`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.footer-sub-tip-XECZc4{color:var(--light-usage-text-color-text-2,rgba(28,31,35,.6));font-size:12px}`, \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"footer-sub-tip\": `footer-sub-tip-XECZc4`,\n\t\"footerSubTip\": `footer-sub-tip-XECZc4`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.footer-sub-tip-syrvzP{color:var(--light-usage-text-color-text-2,rgba(28,31,35,.6));font-size:12px}`, \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"footer-sub-tip\": `footer-sub-tip-syrvzP`,\n\t\"footerSubTip\": `footer-sub-tip-syrvzP`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.add-btn-ZzEFmI{margin-top:10px;margin-right:auto}.table-resegment-v6zXg3{flex-direction:column;flex:1;padding-bottom:8px;display:flex;overflow:hidden}`, \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"add-btn\": `add-btn-ZzEFmI`,\n\t\"addBtn\": `add-btn-ZzEFmI`,\n\t\"table-resegment\": `table-resegment-v6zXg3`,\n\t\"tableResegment\": `table-resegment-v6zXg3`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.footer-sub-tip-Y7M9KW{color:var(--light-usage-text-color-text-2,rgba(28,31,35,.6));font-size:12px}`, \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"footer-sub-tip\": `footer-sub-tip-Y7M9KW`,\n\t\"footerSubTip\": `footer-sub-tip-Y7M9KW`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.filter-modal-X99FWX .semi-modal{width:1280px!important;height:800px!important}`, \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"filter-modal\": `filter-modal-X99FWX`,\n\t\"filterModal\": `filter-modal-X99FWX`\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___ from \"../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/noSourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../../common/temp/default/node_modules/.pnpm/@rsbuild+core@1.1.13/node_modules/@rsbuild/core/compiled/css-loader/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, `.upload-unit-wrap-LRpAVk{width:100%;min-width:1008px;height:100%;margin:0 auto}.upload-unit-wrap-LRpAVk .upload-unit-steps{width:100%;margin:0 auto 54px}.upload-ui-content-rC0xye{background-color:rgba(var(--coze-bg-3),var(--coze-bg-3-alpha));height:100%;padding-top:40px;padding-bottom:30px}.breadcrumb-voCP4f{align-items:center;display:flex}`, \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"upload-unit-wrap\": `upload-unit-wrap-LRpAVk`,\n\t\"uploadUnitWrap\": `upload-unit-wrap-LRpAVk`,\n\t\"upload-ui-content\": `upload-ui-content-rC0xye`,\n\t\"uploadUiContent\": `upload-ui-content-rC0xye`,\n\t\"breadcrumb\": `breadcrumb-voCP4f`\n};\nexport default ___CSS_LOADER_EXPORT___;\n"],"names":["TextResegmentStep","FormatType","TableLocalResegmentStep","TextLocalResegmentStep","TextLocalAddUpdateStep","TextCustomAddUpdateStep","editorToolbarActionFeatureRegistry","editorContextActionFeatureRegistry","TableLocalStep","TableCustomIncrementalStep","TableCustomStep","ImageFileAddStep","ImageAnnotationType","undefined","UploadFooter","props","controls","prefix","btns","isArray","isObject","get","styles","btnItem","isShowHoverContent","FooterBtnStatus","buttonNode","Button","Tooltip","createEditorActionFeatureRegistry","UploadImageButton","UploadImageMenu","renderSubText","status","item","hasURLImport","statusDesc","I18n","ProcessStatus","KnowledgeE2e","subDesc","hours","curHours","updateInterval","isNaN","parseInt","getFrequencyMap","formatBytes","UnitProgress","progressList","createStatus","params","useKnowledgeParams","headerTitle","useMemo","msg","CreateUnitStatus","DocumentStatus","unitType","formatType","getFormatTypeFromUnitType","UnitType","percentFormat","percent","remainingTime","remainingSeconds","minutes","seconds","Math","remainingTimeText","Number","curStatus","ProcessProgressItem","getTypeIcon","ConfigurationError","fetchTableInfo","UIEmpty","IllustrationNoResult","ConfigurationLoading","Spin","ConfigurationBanner","Banner","CollapsePanel","param","header","keepDOM","children","open","setOpen","useState","classNames","IconCozArrowRight","Typography","Collapsible","CardRadioGroup","value","onChange","className","RadioGroup","e","getDefaultTextState","defaultCustomSegmentRule","SegmentMode","StorageLocation","createTextSlice","set","currentStep","unitList","rule","mode","enableStorageStrategy","storageLocation","openSearchConfig","testConnectionSuccess","getDefaultTextResegmentState","ParsingType","useListDocumentReq","onSuccess","onError","listDocument","useRequest","res","KnowledgeApi","error","dataReporter","DataNamespace","REPORT_EVENTS","useCreateDocumentReq","options","createDocument","req","CustomSegmentContent","segmentRule","separator","maxTokens","preProcessRules","overlap","Form","Select","getSeperatorOptionList","SeperatorType","Input","v","CozInputNumber","CheckboxGroup","Checkbox","PreProcessRule","CustomSegment","segmentMode","Radio","newSegmentRule","AutomaticCleaning","SegmentConfig","TextSegment","pdfList","setPDFList","useStore","footer","parseFormApi","useRef","setCurrentStep","parsingStrategy","filterStrategy","useShallow","state","setSegmentMode","setParsingStrategyByMerge","setSegmentRule","setFilterStrategy","listDocumentReq","resDocumentInfo","_res_document_infos","docSegmentParams","getSegmentCleanerParams","docInfo","restParams","_docInfo_parsing_strategy","_parseFormApi_current","_docInfo_parsing_strategy1","isPDF","_docInfo_type","_docInfo_filter_strategy_filter_page_map","_parseFormApi_current1","_docInfo_filter_strategy_filter_box_position","_docInfo_tos_uri","_docInfo_tos_uri1","_docInfo_web_url","_docInfo_name","topPercent","rightPercent","bottomPercent","leftPercent","filterData","pageIndex","useEffect","api","inputParsingStrategy","inputFilterStrategy","isUndefined","validateCommonDocResegmentStep","isLocalTextDocument","document","DocumentSource","mapPDFFilterConfig","list","config","page","convertFilterStrategyToParams","filterValue","usePollingTaskProgress","pollingId","clearPolling","pollingTaskProgressInternal","documentList","data","isString","updatedProgressList","_item_progress","_item_document_name","_item_status","_item_status_descript","_item_remaining_time","documentId","uri","d","reportFailGetProgress","isStopPolling","window","POLLING_TIME","useCreateDocument","setCreateStatus","setProgressList","pollingTaskProgress","reqParams","_reqParams_document_bases","document_infos","fakeProgressList","useTextDisplaySegmentStepCheck","checkStatus","CheckedStatus","useImageDisplayAnnotationStepCheck","getCustomValues","levelChunkStrategy","_segmentRule_preProcessRules","_segmentRule_preProcessRules1","ChunkType","useResegment","_useDocIdFromQuery","docId","handleProcessText","Toast","CustomError","documentInfo","isLocalText","merge","Object","reportProcessDocumentFail","TextProcessing","resourceNavigate","useDataNavigate","handleResegment","query","getKnowledgeIDEQuery","getProcessingDescMsg","TextResegmentConfig","create","devtools","arg","indexStrategy","key","IS_DEV_MODE","getDefaultState","TableStatus","DEFAULT_TABLE_SETTINGS_FROM_ONE","createTableSlice","semanticValidate","tableData","originTableData","tableSettings","createTableLocalResegmentSlice","store","DEFAULT_TABLE_SETTINGS_FROM_ZERO","useUploadFetchTableParams","useRetry","setUnitList","record","index","fileInstance","name","extension","getFileExtension","base64","getBase64","result","DeveloperApi","FileBizType","transformUnitList","console","semanticValidator","startRow","table_meta","preview_data","sheetId","curTableMeta","Array","meta","column_type","sequence","dataMap","ColumnType","useResegmentFetchTableParams","useDocIdFromQuery","TableDataType","isConfigurationLoading","isConfigurationError","isConfigurationShowBanner","opt","TableSettingFormFields","MAX_TABLE_META_COLUMN_LEN","getConfigurationMeta","_meta","_meta_column_name","MAX_TABLE_META_STR_LEN","getConfigurationNextStatus","hasEmptyMeta","_v_column_name","hasEmptyType","_v_column_type","hasSystemField","_validateField","hasSemantic","hasDuplicateColumnName","i","getDocIdFromProgressList","getCustomStatus","metaData","unitName","isDisabled","getAddSegmentParams","spaceId","datasetId","useFetchTableInfoReq","MemoryApi","useFetchTableSchemaInfoReq","_useRequest","_params_table_sheet","_params_table_sheet1","_params_table_sheet2","_ref","rest","updateParams","useFetchTableSchemaInfo","setSemanticValidate","setOriginTableData","setTableData","setStatus","isOnlyPreview","newData","useChangeTableSettingsNl2ql","_fileIdsMap_Object_keys___source_file_id","_Object_keys","type","docID","setTableSettings","fileIdsMap","_state_fileIdsMap","tosUrlRef","sourceFileId","isThirdResegment","isThirdResegmentFunc","OptType","isIncremental","isIncrementalFunc","debounce","sourceFile","String","useTableSchemaValid","tableSchemaValid","validResult","validResultKeys","useFetchAddSegmentReq","fetchAddSegment","addSegmentLoading","useAddSegment","docIdFromQuery","useFetchListDocumentReq","fetchListDocument","_listDocumentRes_document_infos","listDocumentRes","useAcceptFiles","FLAGS","useFlags","TABLE_ACCEPT_LOCAL_FILE","TableConfiguration","useOptFromQuery","isLoading","isLoadingFunc","isError","isErrorFunc","isShowBanner","isShowBannerFunc","resegmentParams","TableStructureInternal","isEmpty","curSheet","TooltipWrapper","IconAdd","_tableData_table_meta_curSheet","curUuid","nanoid","_originTableData_table_meta","_tableData_table_meta","TablePreview","TablePreviewInternal","useUpdateDocument","handleUpdateDocument","TableProcessing","TableResegmentConfig","getDefaultDocReviewState","createDocReviewSlice","id","ids","getDefaultTextLocalResegmentState","getDefaultLevelSegmentsState","QuickParsing","getSortedFilterPages","filterPagesConfig","prev","after","getFilterPagesString","pages","renderDocumentFilterValue","pdf","filterPages","filterPagesString","filterString","Boolean","DocumentItem","onClick","title","selected","addonAfter","cls","DocumentList","isFiltered","Tag","fixPrecision","parseFloat","convertCropDataToPercentSize","naturalHeight","naturalWidth","topPixel","bottomPixel","leftPixel","rightPixel","convertPercentSizeToCropData","x","y","width","height","pdfjs","PDFDocument","_filterPagesConfig_find","url","initPageCropperSizePercent","enableCropper","defaultTotalPages","defaultCurrentPage","defaultPercentZoomRatio","loading","setLoading","totalPages","setTotalPages","currentPage","setCurrentPage","percentZoomRatio","setPercentZoomRation","pageCanvasRef","cropperRef","initCropper","pdfSize","Cropper","event","getChangedPercentZoomRatio","currentPercentRatio","option","percentRatioStep","ZOOM_RATIO_STEP","changeZoomRatio","_cropperRef_current","reset","_currentPage","_totalPages","_percentZoomRatio","produce","draft","target","Loading","Document","numPages","Page","IconButton","p","IconCozArrowLeft","Divider","IconCozMinus","IconCozPlus","FilterModal","_pdfList_at_uri","_pdfList_find","_currentDocValue_filterPagesConfig","_currentDocValue_cropperSizePercent","inputOnCancel","modalProps","currentUri","setCurrentUri","currentFileUrl","currentDocValue","filterValueCache","recordFilterValue","resetFilterValue","Modal","_value_find_filterPagesConfig","_item_uri","f","changedValue","targetIndex","PDFFilter","withField","filterModalVisible","setFilterModalVisible","canFilter","closeFilterModal","TextArea","DocumentParseForm","formProps","IconCozInfoCircle","PrecisionParsingContent","getParseFormApi","omit","formFilterValues","parseValues","PrecisionParsing","setLevelChunkStrategy","setDocumentInfo","datasetID","_resDocumentInfo_parsing_strategy","_resDocumentInfo_parsing_strategy1","_chunkStrategy_max_level","chunkStrategy","segmentParams","_params_docID","docReviewList","SegmentPreview","_currentReview_preview_tos_url","_currentReview_tos_url","_currentReview_doc_tree_tos_url","setDocReviewList","currentReviewID","setCurrentReviewID","levelSegments","setLevelSegments","selectionIDs","setSelectionIDs","segmentInfo","isMenuPanelVisible","setIsMenuPanelVisible","currentReview","review","fileType","fileUrl","segmentTosUrl","saveLoading","saveDocumentReview","JSON","getNewDocReview","_res_reviews","_item_review_id","pdfNode","onNext","onBack","scale","increaseScale","decreaseScale","usePreviewPdf","content","tosLoading","useTosContent","ReviewStatus","_content_chunks","withTitle","getDocumentTag","IconCozSideExpand","SegmentMenu","_item_doc_tree_tos_url","PreviewMd","PreviewTxt","LevelTextKnowledgeEditor","_item_slice_sequence","SegmentPreviewStep","_getSeperatorOptionList_find","docReviewCreated","createDocReview","_res_reviews__review_id","pollDocReviewStatus","cancelPollDocReviewStatus","docReviewProcessFinished","TextLocalResegmentConfig","args","createLevelSegmentsSlice","doc","getDefaultTextLocalAddUpdateState","isEqual","inputUnitList","TextLocalTaskList","getTextLocalInfo","getProcessStatus","getFileSizeInfo","ActionRenderByRetry","ActionRenderByEditName","ActionRenderByDelete","UploadUnitTable","TextUpload","_useContext","isDouyin","KnowledgeParamsStoreContext","s","_s_params","onRetry","textUploadChannelConfig","getTextUploadChannelConfig","AddUnitMaxLimit","buttonStatus","unitItem","UploadStatus","isUpdateMode","uploadLimit","hideUploadFile","handleUnitListUpdate","accept","UploadUnitFile","UNIT_MAX_MB","PDF_MAX_PAGES","setEnableStorageStrategy","segment","_res_dataset_details","dataset","getStorageStrategyEnabled","segmentValid","u","docRes","_docRes_document_infos","documentInfos","getCreateDocumentParams","pdfFilterValueList","_docReviewList_index","base","TextLocalAddUpdateConfig","createStorageStrategySlice","getDefaultTextCustomAddState","createTextCustomAddUpdateSlice","editorToolbarActionRegistry","editorContextActionRegistry","docName","docContent","setDocName","setDocContent","initChunk","editor","useInitEditor","_v_content","CozeInputWithCountField","DocumentEditor","EditorToolbar","validateSegmentRules","isCustomSeperatorEmpty","TextCustomAddUpdateConfig","TableUpload","tableSettingsToString","TableHeader","isTableStructureError","tableColumn","validate","setValidate","setIsTableStructureError","validResultRef","newItem","onChangeTableSettings","uploadParams","err","isApiError","TableSettingBar","docIdByQuery","spaceID","handleAddSegment","TableLocalIncrementalConfig","useTableCheck","setDocumentList","_params_datasetID","currentMeta","fetchTableParams","isAppend","sourceType","updateRule","documentSource","getSourceFileId","unit","getUpdateRule","isFeishuOrLarkDocumentSource","TableLocalAddConfig","transformTableData","tableColumns","indexName","valueName","tableDataItem","column","ColumnTypeComp","getDataTypeText","initialData","editTableSegment","tableDataRef","sheetStructureRef","editItemIndex","setEditItemIndex","handleCellUpdate","useCallback","_record","prevData","handleDel","indexList","newTableData","handleEdit","currentTableData","curTableItem","editTableData","curTableItemKeys","sItem","handleAdd","StructureBar","docTitle","TableContainer","columns","TableView","tableStatus","setColumns","setDocInfo","tableContainerRef","tableMetaRef","TableSegmentModalNode","useTableSegmentModal","actionType","ModalActionType","useTableOperations","sTableData","tableSchema","tableDataCleaning","_curSubSheet_id","defaultData","sheet_list","curSubSheet","curSheetStructure","dom","maxWidth","dataWidth","text","srcList","getSrcFromImg","ImageRender","src","tosKey","val","TextRender","_text","updateRecord","ActionsRender","fetchDocumentInfo","handleSaveTableData","imageKeys","col","formatData","transSliceContentOutput","getSubmitBtnStatus","sheetStructure","semanticItem","semanticItemName","TableCustomIncrementalConfig","createTableCustomSlice","TableCustomCreate","_useStore","knowledgeId","footerStatus","setFooterStatus","currentUuid","setMetaData","TableStructureTitle","TableStructure","TableCustomCreateV2","TableCustomAddConfig","storeStaticValues","ImageUpload","file","ImageProcess","annotationType","CaptionType","ImageAnnotation","setAnnotationType","ImageFileAddConfig","getConfigV2","getUploadConfig","optKey","UploadActionNavbar","fromProject","KnowledgeResourceProcessorLayout","_dataSetInfo_name","keepDocTitle","uploadConfig","onUpdateDisplayName","onStatusChange","useDataCallbacks","biz","dataSetInfo","useGetKnowledgeListInfo","hasCreateAction","headerTiTle","_dataSetInfo_file_list","useReportTti","DataErrorBoundary","Layout","renderHtmlTitle","KnowledgeUploadStoreProvider","Upload","ErrorFallbackComponent","KnowledgeResourceProcessor","_uri_path_name","useSpaceId","widget","useCurrentWidgetContext","IDENav","useIDENavigate","useTitle","version","useCommitVersion","projectID","useProjectId","refetch","usePrimarySidebarStore","doc_id","page_mode","bot_id","workflow_id","agent_id","module","action_type","first_auto_open_edit_document_id","useIDEParams","KnowledgeParamsStoreProvider","displayName","resource","resourceID","opts","qs","BizProjectKnowledgeIDE","___CSS_LOADER_EXPORT___"],"mappings":"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"}