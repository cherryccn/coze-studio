{"version":3,"file":"static/js/async/7841.8f3290c8.js","sources":["webpack://@coze-studio/app/../../packages/arch/pdfjs-shadow/src/generate-assets.ts","webpack://@coze-studio/app/../../packages/arch/pdfjs-shadow/src/init-pdfjs-dist.ts","webpack://@coze-studio/app/../../../common/temp/default/node_modules/.pnpm/pdfjs-dist@4.3.136/node_modules/pdfjs-dist/build/pdf.mjs"],"sourcesContent":["/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport pkg from '../package.json';\n\ntype AssetsType = 'cmaps' | 'pdf.worker';\n\n// Here you need to write the version that bnpm has released.\n//\nconst DEFAULT_VERSION = '0.1.0-alpha.x6e892414ec';\n\n/**\n * This method is used to produce the worker & cmaps link of the unpkg environment. Note that it is not a native method of pdfjs\n */\nexport const generatePdfAssetsUrl = (assets: AssetsType) => {\n  const { name } = pkg;\n  let assetsUrl;\n  switch (assets) {\n    case 'cmaps': {\n      assetsUrl = 'lib/cmaps/';\n      break;\n    }\n    case 'pdf.worker': {\n      assetsUrl = 'lib/worker.js';\n      break;\n    }\n    default: {\n      throw new Error(\n        '目前只支持引用 cmaps 与 pdf.worker 文件，如需引用其他文件请联系 @fanwenjie.fe',\n      );\n    }\n  }\n  const onlinePkgName = name.replace(/^@/, '');\n\n  const domain =\n    REGION === 'cn'\n      ? 'lf-cdn.coze.cn/obj/unpkg'\n      : 'sf-cdn.coze.com/obj/unpkg-va';\n\n  // cp-disable-next-line\n  return `//${domain}/${onlinePkgName}/${DEFAULT_VERSION}/${assetsUrl}`;\n};\n","/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { GlobalWorkerOptions } from 'pdfjs-dist';\n\nimport { generatePdfAssetsUrl } from './generate-assets';\n\n/**\n * This method is used to initialize the workerSrc parameter of pdfjs-dist, which can be called repeatedly\n */\nexport const initPdfJsWorker = () => {\n  if (!GlobalWorkerOptions.workerSrc) {\n    GlobalWorkerOptions.workerSrc = generatePdfAssetsUrl('pdf.worker');\n  }\n};\n","/**\n * @licstart The following is the entire license notice for the\n * JavaScript code in this page\n *\n * Copyright 2023 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * JavaScript code in this page\n */\n\n/******/ // The require scope\n/******/ var __webpack_require__ = {};\n/******/ \n/************************************************************************/\n/******/ /* webpack/runtime/define property getters */\n/******/ (() => {\n/******/ \t// define getter functions for harmony exports\n/******/ \t__webpack_require__.d = (exports, definition) => {\n/******/ \t\tfor(var key in definition) {\n/******/ \t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t}\n/******/ \t\t}\n/******/ \t};\n/******/ })();\n/******/ \n/******/ /* webpack/runtime/hasOwnProperty shorthand */\n/******/ (() => {\n/******/ \t__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ })();\n/******/ \n/************************************************************************/\nvar __webpack_exports__ = globalThis.pdfjsLib = {};\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  AbortException: () => (/* reexport */ AbortException),\n  AnnotationEditorLayer: () => (/* reexport */ AnnotationEditorLayer),\n  AnnotationEditorParamsType: () => (/* reexport */ AnnotationEditorParamsType),\n  AnnotationEditorType: () => (/* reexport */ AnnotationEditorType),\n  AnnotationEditorUIManager: () => (/* reexport */ AnnotationEditorUIManager),\n  AnnotationLayer: () => (/* reexport */ AnnotationLayer),\n  AnnotationMode: () => (/* reexport */ AnnotationMode),\n  CMapCompressionType: () => (/* reexport */ CMapCompressionType),\n  ColorPicker: () => (/* reexport */ ColorPicker),\n  DOMSVGFactory: () => (/* reexport */ DOMSVGFactory),\n  DrawLayer: () => (/* reexport */ DrawLayer),\n  FeatureTest: () => (/* reexport */ util_FeatureTest),\n  GlobalWorkerOptions: () => (/* reexport */ GlobalWorkerOptions),\n  ImageKind: () => (/* reexport */ util_ImageKind),\n  InvalidPDFException: () => (/* reexport */ InvalidPDFException),\n  MissingPDFException: () => (/* reexport */ MissingPDFException),\n  OPS: () => (/* reexport */ OPS),\n  Outliner: () => (/* reexport */ Outliner),\n  PDFDataRangeTransport: () => (/* reexport */ PDFDataRangeTransport),\n  PDFDateString: () => (/* reexport */ PDFDateString),\n  PDFWorker: () => (/* reexport */ PDFWorker),\n  PasswordResponses: () => (/* reexport */ PasswordResponses),\n  PermissionFlag: () => (/* reexport */ PermissionFlag),\n  PixelsPerInch: () => (/* reexport */ PixelsPerInch),\n  RenderingCancelledException: () => (/* reexport */ RenderingCancelledException),\n  TextLayer: () => (/* reexport */ TextLayer),\n  UnexpectedResponseException: () => (/* reexport */ UnexpectedResponseException),\n  Util: () => (/* reexport */ Util),\n  VerbosityLevel: () => (/* reexport */ VerbosityLevel),\n  XfaLayer: () => (/* reexport */ XfaLayer),\n  build: () => (/* reexport */ build),\n  createValidAbsoluteUrl: () => (/* reexport */ createValidAbsoluteUrl),\n  fetchData: () => (/* reexport */ fetchData),\n  getDocument: () => (/* reexport */ getDocument),\n  getFilenameFromUrl: () => (/* reexport */ getFilenameFromUrl),\n  getPdfFilenameFromUrl: () => (/* reexport */ getPdfFilenameFromUrl),\n  getXfaPageViewport: () => (/* reexport */ getXfaPageViewport),\n  isDataScheme: () => (/* reexport */ isDataScheme),\n  isPdfFile: () => (/* reexport */ isPdfFile),\n  noContextMenu: () => (/* reexport */ noContextMenu),\n  normalizeUnicode: () => (/* reexport */ normalizeUnicode),\n  renderTextLayer: () => (/* reexport */ renderTextLayer),\n  setLayerDimensions: () => (/* reexport */ setLayerDimensions),\n  shadow: () => (/* reexport */ shadow),\n  updateTextLayer: () => (/* reexport */ updateTextLayer),\n  version: () => (/* reexport */ version)\n});\n\n;// CONCATENATED MODULE: ./src/shared/util.js\nconst isNodeJS = typeof process === \"object\" && process + \"\" === \"[object process]\" && !process.versions.nw && !(process.versions.electron && process.type && process.type !== \"browser\");\nconst IDENTITY_MATRIX = [1, 0, 0, 1, 0, 0];\nconst FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\nconst MAX_IMAGE_SIZE_TO_CACHE = 10e6;\nconst LINE_FACTOR = 1.35;\nconst LINE_DESCENT_FACTOR = 0.35;\nconst BASELINE_FACTOR = LINE_DESCENT_FACTOR / LINE_FACTOR;\nconst RenderingIntentFlag = {\n  ANY: 0x01,\n  DISPLAY: 0x02,\n  PRINT: 0x04,\n  SAVE: 0x08,\n  ANNOTATIONS_FORMS: 0x10,\n  ANNOTATIONS_STORAGE: 0x20,\n  ANNOTATIONS_DISABLE: 0x40,\n  OPLIST: 0x100\n};\nconst AnnotationMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_FORMS: 2,\n  ENABLE_STORAGE: 3\n};\nconst AnnotationEditorPrefix = \"pdfjs_internal_editor_\";\nconst AnnotationEditorType = {\n  DISABLE: -1,\n  NONE: 0,\n  FREETEXT: 3,\n  HIGHLIGHT: 9,\n  STAMP: 13,\n  INK: 15\n};\nconst AnnotationEditorParamsType = {\n  RESIZE: 1,\n  CREATE: 2,\n  FREETEXT_SIZE: 11,\n  FREETEXT_COLOR: 12,\n  FREETEXT_OPACITY: 13,\n  INK_COLOR: 21,\n  INK_THICKNESS: 22,\n  INK_OPACITY: 23,\n  HIGHLIGHT_COLOR: 31,\n  HIGHLIGHT_DEFAULT_COLOR: 32,\n  HIGHLIGHT_THICKNESS: 33,\n  HIGHLIGHT_FREE: 34,\n  HIGHLIGHT_SHOW_ALL: 35\n};\nconst PermissionFlag = {\n  PRINT: 0x04,\n  MODIFY_CONTENTS: 0x08,\n  COPY: 0x10,\n  MODIFY_ANNOTATIONS: 0x20,\n  FILL_INTERACTIVE_FORMS: 0x100,\n  COPY_FOR_ACCESSIBILITY: 0x200,\n  ASSEMBLE: 0x400,\n  PRINT_HIGH_QUALITY: 0x800\n};\nconst TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4\n};\nconst util_ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3\n};\nconst AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26\n};\nconst AnnotationReplyType = {\n  GROUP: \"Group\",\n  REPLY: \"R\"\n};\nconst AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200\n};\nconst AnnotationFieldFlag = {\n  READONLY: 0x0000001,\n  REQUIRED: 0x0000002,\n  NOEXPORT: 0x0000004,\n  MULTILINE: 0x0001000,\n  PASSWORD: 0x0002000,\n  NOTOGGLETOOFF: 0x0004000,\n  RADIO: 0x0008000,\n  PUSHBUTTON: 0x0010000,\n  COMBO: 0x0020000,\n  EDIT: 0x0040000,\n  SORT: 0x0080000,\n  FILESELECT: 0x0100000,\n  MULTISELECT: 0x0200000,\n  DONOTSPELLCHECK: 0x0400000,\n  DONOTSCROLL: 0x0800000,\n  COMB: 0x1000000,\n  RICHTEXT: 0x2000000,\n  RADIOSINUNISON: 0x2000000,\n  COMMITONSELCHANGE: 0x4000000\n};\nconst AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5\n};\nconst AnnotationActionEventType = {\n  E: \"Mouse Enter\",\n  X: \"Mouse Exit\",\n  D: \"Mouse Down\",\n  U: \"Mouse Up\",\n  Fo: \"Focus\",\n  Bl: \"Blur\",\n  PO: \"PageOpen\",\n  PC: \"PageClose\",\n  PV: \"PageVisible\",\n  PI: \"PageInvisible\",\n  K: \"Keystroke\",\n  F: \"Format\",\n  V: \"Validate\",\n  C: \"Calculate\"\n};\nconst DocumentActionEventType = {\n  WC: \"WillClose\",\n  WS: \"WillSave\",\n  DS: \"DidSave\",\n  WP: \"WillPrint\",\n  DP: \"DidPrint\"\n};\nconst PageActionEventType = {\n  O: \"PageOpen\",\n  C: \"PageClose\"\n};\nconst VerbosityLevel = {\n  ERRORS: 0,\n  WARNINGS: 1,\n  INFOS: 5\n};\nconst CMapCompressionType = {\n  NONE: 0,\n  BINARY: 1\n};\nconst OPS = {\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91\n};\nconst PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2\n};\nlet verbosity = VerbosityLevel.WARNINGS;\nfunction setVerbosityLevel(level) {\n  if (Number.isInteger(level)) {\n    verbosity = level;\n  }\n}\nfunction getVerbosityLevel() {\n  return verbosity;\n}\nfunction info(msg) {\n  if (verbosity >= VerbosityLevel.INFOS) {\n    console.log(`Info: ${msg}`);\n  }\n}\nfunction warn(msg) {\n  if (verbosity >= VerbosityLevel.WARNINGS) {\n    console.log(`Warning: ${msg}`);\n  }\n}\nfunction unreachable(msg) {\n  throw new Error(msg);\n}\nfunction assert(cond, msg) {\n  if (!cond) {\n    unreachable(msg);\n  }\n}\nfunction _isValidProtocol(url) {\n  switch (url?.protocol) {\n    case \"http:\":\n    case \"https:\":\n    case \"ftp:\":\n    case \"mailto:\":\n    case \"tel:\":\n      return true;\n    default:\n      return false;\n  }\n}\nfunction createValidAbsoluteUrl(url, baseUrl = null, options = null) {\n  if (!url) {\n    return null;\n  }\n  try {\n    if (options && typeof url === \"string\") {\n      if (options.addDefaultProtocol && url.startsWith(\"www.\")) {\n        const dots = url.match(/\\./g);\n        if (dots?.length >= 2) {\n          url = `http://${url}`;\n        }\n      }\n      if (options.tryConvertEncoding) {\n        try {\n          url = stringToUTF8String(url);\n        } catch {}\n      }\n    }\n    const absoluteUrl = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    if (_isValidProtocol(absoluteUrl)) {\n      return absoluteUrl;\n    }\n  } catch {}\n  return null;\n}\nfunction shadow(obj, prop, value, nonSerializable = false) {\n  Object.defineProperty(obj, prop, {\n    value,\n    enumerable: !nonSerializable,\n    configurable: true,\n    writable: false\n  });\n  return value;\n}\nconst BaseException = function BaseExceptionClosure() {\n  function BaseException(message, name) {\n    if (this.constructor === BaseException) {\n      unreachable(\"Cannot initialize BaseException.\");\n    }\n    this.message = message;\n    this.name = name;\n  }\n  BaseException.prototype = new Error();\n  BaseException.constructor = BaseException;\n  return BaseException;\n}();\nclass PasswordException extends BaseException {\n  constructor(msg, code) {\n    super(msg, \"PasswordException\");\n    this.code = code;\n  }\n}\nclass UnknownErrorException extends BaseException {\n  constructor(msg, details) {\n    super(msg, \"UnknownErrorException\");\n    this.details = details;\n  }\n}\nclass InvalidPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"InvalidPDFException\");\n  }\n}\nclass MissingPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"MissingPDFException\");\n  }\n}\nclass UnexpectedResponseException extends BaseException {\n  constructor(msg, status) {\n    super(msg, \"UnexpectedResponseException\");\n    this.status = status;\n  }\n}\nclass FormatError extends BaseException {\n  constructor(msg) {\n    super(msg, \"FormatError\");\n  }\n}\nclass AbortException extends BaseException {\n  constructor(msg) {\n    super(msg, \"AbortException\");\n  }\n}\nfunction bytesToString(bytes) {\n  if (typeof bytes !== \"object\" || bytes?.length === undefined) {\n    unreachable(\"Invalid argument for bytesToString\");\n  }\n  const length = bytes.length;\n  const MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  const strBuf = [];\n  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    const chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join(\"\");\n}\nfunction stringToBytes(str) {\n  if (typeof str !== \"string\") {\n    unreachable(\"Invalid argument for stringToBytes\");\n  }\n  const length = str.length;\n  const bytes = new Uint8Array(length);\n  for (let i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xff;\n  }\n  return bytes;\n}\nfunction string32(value) {\n  return String.fromCharCode(value >> 24 & 0xff, value >> 16 & 0xff, value >> 8 & 0xff, value & 0xff);\n}\nfunction objectSize(obj) {\n  return Object.keys(obj).length;\n}\nfunction objectFromMap(map) {\n  const obj = Object.create(null);\n  for (const [key, value] of map) {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction isLittleEndian() {\n  const buffer8 = new Uint8Array(4);\n  buffer8[0] = 1;\n  const view32 = new Uint32Array(buffer8.buffer, 0, 1);\n  return view32[0] === 1;\n}\nfunction isEvalSupported() {\n  try {\n    new Function(\"\");\n    return true;\n  } catch {\n    return false;\n  }\n}\nclass util_FeatureTest {\n  static get isLittleEndian() {\n    return shadow(this, \"isLittleEndian\", isLittleEndian());\n  }\n  static get isEvalSupported() {\n    return shadow(this, \"isEvalSupported\", isEvalSupported());\n  }\n  static get isOffscreenCanvasSupported() {\n    return shadow(this, \"isOffscreenCanvasSupported\", typeof OffscreenCanvas !== \"undefined\");\n  }\n  static get platform() {\n    if (typeof navigator !== \"undefined\" && typeof navigator?.platform === \"string\") {\n      return shadow(this, \"platform\", {\n        isMac: navigator.platform.includes(\"Mac\")\n      });\n    }\n    return shadow(this, \"platform\", {\n      isMac: false\n    });\n  }\n  static get isCSSRoundSupported() {\n    return shadow(this, \"isCSSRoundSupported\", globalThis.CSS?.supports?.(\"width: round(1.5px, 1px)\"));\n  }\n}\nconst hexNumbers = Array.from(Array(256).keys(), n => n.toString(16).padStart(2, \"0\"));\nclass Util {\n  static makeHexColor(r, g, b) {\n    return `#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;\n  }\n  static scaleMinMax(transform, minMax) {\n    let temp;\n    if (transform[0]) {\n      if (transform[0] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[0];\n      minMax[2] *= transform[0];\n      if (transform[3] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[3];\n      minMax[3] *= transform[3];\n    } else {\n      temp = minMax[0];\n      minMax[0] = minMax[1];\n      minMax[1] = temp;\n      temp = minMax[2];\n      minMax[2] = minMax[3];\n      minMax[3] = temp;\n      if (transform[1] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[1];\n      minMax[3] *= transform[1];\n      if (transform[2] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[2];\n      minMax[2] *= transform[2];\n    }\n    minMax[0] += transform[4];\n    minMax[1] += transform[5];\n    minMax[2] += transform[4];\n    minMax[3] += transform[5];\n  }\n  static transform(m1, m2) {\n    return [m1[0] * m2[0] + m1[2] * m2[1], m1[1] * m2[0] + m1[3] * m2[1], m1[0] * m2[2] + m1[2] * m2[3], m1[1] * m2[2] + m1[3] * m2[3], m1[0] * m2[4] + m1[2] * m2[5] + m1[4], m1[1] * m2[4] + m1[3] * m2[5] + m1[5]];\n  }\n  static applyTransform(p, m) {\n    const xt = p[0] * m[0] + p[1] * m[2] + m[4];\n    const yt = p[0] * m[1] + p[1] * m[3] + m[5];\n    return [xt, yt];\n  }\n  static applyInverseTransform(p, m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    const xt = (p[0] * m[3] - p[1] * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    const yt = (-p[0] * m[1] + p[1] * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n    return [xt, yt];\n  }\n  static getAxialAlignedBoundingBox(r, m) {\n    const p1 = this.applyTransform(r, m);\n    const p2 = this.applyTransform(r.slice(2, 4), m);\n    const p3 = this.applyTransform([r[0], r[3]], m);\n    const p4 = this.applyTransform([r[2], r[1]], m);\n    return [Math.min(p1[0], p2[0], p3[0], p4[0]), Math.min(p1[1], p2[1], p3[1], p4[1]), Math.max(p1[0], p2[0], p3[0], p4[0]), Math.max(p1[1], p2[1], p3[1], p4[1])];\n  }\n  static inverseTransform(m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d, (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];\n  }\n  static singularValueDecompose2dScale(m) {\n    const transpose = [m[0], m[2], m[1], m[3]];\n    const a = m[0] * transpose[0] + m[1] * transpose[2];\n    const b = m[0] * transpose[1] + m[1] * transpose[3];\n    const c = m[2] * transpose[0] + m[3] * transpose[2];\n    const d = m[2] * transpose[1] + m[3] * transpose[3];\n    const first = (a + d) / 2;\n    const second = Math.sqrt((a + d) ** 2 - 4 * (a * d - c * b)) / 2;\n    const sx = first + second || 1;\n    const sy = first - second || 1;\n    return [Math.sqrt(sx), Math.sqrt(sy)];\n  }\n  static normalizeRect(rect) {\n    const r = rect.slice(0);\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  }\n  static intersect(rect1, rect2) {\n    const xLow = Math.max(Math.min(rect1[0], rect1[2]), Math.min(rect2[0], rect2[2]));\n    const xHigh = Math.min(Math.max(rect1[0], rect1[2]), Math.max(rect2[0], rect2[2]));\n    if (xLow > xHigh) {\n      return null;\n    }\n    const yLow = Math.max(Math.min(rect1[1], rect1[3]), Math.min(rect2[1], rect2[3]));\n    const yHigh = Math.min(Math.max(rect1[1], rect1[3]), Math.max(rect2[1], rect2[3]));\n    if (yLow > yHigh) {\n      return null;\n    }\n    return [xLow, yLow, xHigh, yHigh];\n  }\n  static #getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, t, minMax) {\n    if (t <= 0 || t >= 1) {\n      return;\n    }\n    const mt = 1 - t;\n    const tt = t * t;\n    const ttt = tt * t;\n    const x = mt * (mt * (mt * x0 + 3 * t * x1) + 3 * tt * x2) + ttt * x3;\n    const y = mt * (mt * (mt * y0 + 3 * t * y1) + 3 * tt * y2) + ttt * y3;\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n  static #getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, a, b, c, minMax) {\n    if (Math.abs(a) < 1e-12) {\n      if (Math.abs(b) >= 1e-12) {\n        this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, -c / b, minMax);\n      }\n      return;\n    }\n    const delta = b ** 2 - 4 * c * a;\n    if (delta < 0) {\n      return;\n    }\n    const sqrtDelta = Math.sqrt(delta);\n    const a2 = 2 * a;\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b + sqrtDelta) / a2, minMax);\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b - sqrtDelta) / a2, minMax);\n  }\n  static bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    if (minMax) {\n      minMax[0] = Math.min(minMax[0], x0, x3);\n      minMax[1] = Math.min(minMax[1], y0, y3);\n      minMax[2] = Math.max(minMax[2], x0, x3);\n      minMax[3] = Math.max(minMax[3], y0, y3);\n    } else {\n      minMax = [Math.min(x0, x3), Math.min(y0, y3), Math.max(x0, x3), Math.max(y0, y3)];\n    }\n    this.#getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, 3 * (-x0 + 3 * (x1 - x2) + x3), 6 * (x0 - 2 * x1 + x2), 3 * (x1 - x0), minMax);\n    this.#getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, 3 * (-y0 + 3 * (y1 - y2) + y3), 6 * (y0 - 2 * y1 + y2), 3 * (y1 - y0), minMax);\n    return minMax;\n  }\n}\nconst PDFStringTranslateTable = (/* unused pure expression or super */ null && ([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2d8, 0x2c7, 0x2c6, 0x2d9, 0x2dd, 0x2db, 0x2da, 0x2dc, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014, 0x2013, 0x192, 0x2044, 0x2039, 0x203a, 0x2212, 0x2030, 0x201e, 0x201c, 0x201d, 0x2018, 0x2019, 0x201a, 0x2122, 0xfb01, 0xfb02, 0x141, 0x152, 0x160, 0x178, 0x17d, 0x131, 0x142, 0x153, 0x161, 0x17e, 0, 0x20ac]));\nfunction stringToPDFString(str) {\n  if (str[0] >= \"\\xEF\") {\n    let encoding;\n    if (str[0] === \"\\xFE\" && str[1] === \"\\xFF\") {\n      encoding = \"utf-16be\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xFF\" && str[1] === \"\\xFE\") {\n      encoding = \"utf-16le\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xEF\" && str[1] === \"\\xBB\" && str[2] === \"\\xBF\") {\n      encoding = \"utf-8\";\n    }\n    if (encoding) {\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true\n        });\n        const buffer = stringToBytes(str);\n        const decoded = decoder.decode(buffer);\n        if (!decoded.includes(\"\\x1b\")) {\n          return decoded;\n        }\n        return decoded.replaceAll(/\\x1b[^\\x1b]*(?:\\x1b|$)/g, \"\");\n      } catch (ex) {\n        warn(`stringToPDFString: \"${ex}\".`);\n      }\n    }\n  }\n  const strBuf = [];\n  for (let i = 0, ii = str.length; i < ii; i++) {\n    const charCode = str.charCodeAt(i);\n    if (charCode === 0x1b) {\n      while (++i < ii && str.charCodeAt(i) !== 0x1b) {}\n      continue;\n    }\n    const code = PDFStringTranslateTable[charCode];\n    strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n  }\n  return strBuf.join(\"\");\n}\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\nfunction isArrayEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  for (let i = 0, ii = arr1.length; i < ii; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction getModificationDate(date = new Date()) {\n  const buffer = [date.getUTCFullYear().toString(), (date.getUTCMonth() + 1).toString().padStart(2, \"0\"), date.getUTCDate().toString().padStart(2, \"0\"), date.getUTCHours().toString().padStart(2, \"0\"), date.getUTCMinutes().toString().padStart(2, \"0\"), date.getUTCSeconds().toString().padStart(2, \"0\")];\n  return buffer.join(\"\");\n}\nlet NormalizeRegex = null;\nlet NormalizationMap = null;\nfunction normalizeUnicode(str) {\n  if (!NormalizeRegex) {\n    NormalizeRegex = /([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;\n    NormalizationMap = new Map([[\"ﬅ\", \"ſt\"]]);\n  }\n  return str.replaceAll(NormalizeRegex, (_, p1, p2) => p1 ? p1.normalize(\"NFKC\") : NormalizationMap.get(p2));\n}\nfunction getUuid() {\n  if (typeof crypto !== \"undefined\" && typeof crypto?.randomUUID === \"function\") {\n    return crypto.randomUUID();\n  }\n  const buf = new Uint8Array(32);\n  if (typeof crypto !== \"undefined\" && typeof crypto?.getRandomValues === \"function\") {\n    crypto.getRandomValues(buf);\n  } else {\n    for (let i = 0; i < 32; i++) {\n      buf[i] = Math.floor(Math.random() * 255);\n    }\n  }\n  return bytesToString(buf);\n}\nconst AnnotationPrefix = \"pdfjs_internal_id_\";\nconst FontRenderOps = {\n  BEZIER_CURVE_TO: 0,\n  MOVE_TO: 1,\n  LINE_TO: 2,\n  QUADRATIC_CURVE_TO: 3,\n  RESTORE: 4,\n  SAVE: 5,\n  SCALE: 6,\n  TRANSFORM: 7,\n  TRANSLATE: 8\n};\n\n;// CONCATENATED MODULE: ./src/display/base_factory.js\n\nclass BaseFilterFactory {\n  constructor() {\n    if (this.constructor === BaseFilterFactory) {\n      unreachable(\"Cannot initialize BaseFilterFactory.\");\n    }\n  }\n  addFilter(maps) {\n    return \"none\";\n  }\n  addHCMFilter(fgColor, bgColor) {\n    return \"none\";\n  }\n  addAlphaFilter(map) {\n    return \"none\";\n  }\n  addLuminosityFilter(map) {\n    return \"none\";\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    return \"none\";\n  }\n  destroy(keepHCM = false) {}\n}\nclass BaseCanvasFactory {\n  constructor() {\n    if (this.constructor === BaseCanvasFactory) {\n      unreachable(\"Cannot initialize BaseCanvasFactory.\");\n    }\n  }\n  create(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    const canvas = this._createCanvas(width, height);\n    return {\n      canvas,\n      context: canvas.getContext(\"2d\")\n    };\n  }\n  reset(canvasAndContext, width, height) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    canvasAndContext.canvas.width = width;\n    canvasAndContext.canvas.height = height;\n  }\n  destroy(canvasAndContext) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    canvasAndContext.canvas.width = 0;\n    canvasAndContext.canvas.height = 0;\n    canvasAndContext.canvas = null;\n    canvasAndContext.context = null;\n  }\n  _createCanvas(width, height) {\n    unreachable(\"Abstract method `_createCanvas` called.\");\n  }\n}\nclass BaseCMapReaderFactory {\n  constructor({\n    baseUrl = null,\n    isCompressed = true\n  }) {\n    if (this.constructor === BaseCMapReaderFactory) {\n      unreachable(\"Cannot initialize BaseCMapReaderFactory.\");\n    }\n    this.baseUrl = baseUrl;\n    this.isCompressed = isCompressed;\n  }\n  async fetch({\n    name\n  }) {\n    if (!this.baseUrl) {\n      throw new Error('The CMap \"baseUrl\" parameter must be specified, ensure that ' + 'the \"cMapUrl\" and \"cMapPacked\" API parameters are provided.');\n    }\n    if (!name) {\n      throw new Error(\"CMap name must be specified.\");\n    }\n    const url = this.baseUrl + name + (this.isCompressed ? \".bcmap\" : \"\");\n    const compressionType = this.isCompressed ? CMapCompressionType.BINARY : CMapCompressionType.NONE;\n    return this._fetchData(url, compressionType).catch(reason => {\n      throw new Error(`Unable to load ${this.isCompressed ? \"binary \" : \"\"}CMap at: ${url}`);\n    });\n  }\n  _fetchData(url, compressionType) {\n    unreachable(\"Abstract method `_fetchData` called.\");\n  }\n}\nclass BaseStandardFontDataFactory {\n  constructor({\n    baseUrl = null\n  }) {\n    if (this.constructor === BaseStandardFontDataFactory) {\n      unreachable(\"Cannot initialize BaseStandardFontDataFactory.\");\n    }\n    this.baseUrl = baseUrl;\n  }\n  async fetch({\n    filename\n  }) {\n    if (!this.baseUrl) {\n      throw new Error('The standard font \"baseUrl\" parameter must be specified, ensure that ' + 'the \"standardFontDataUrl\" API parameter is provided.');\n    }\n    if (!filename) {\n      throw new Error(\"Font filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n    return this._fetchData(url).catch(reason => {\n      throw new Error(`Unable to load font data at: ${url}`);\n    });\n  }\n  _fetchData(url) {\n    unreachable(\"Abstract method `_fetchData` called.\");\n  }\n}\nclass BaseSVGFactory {\n  constructor() {\n    if (this.constructor === BaseSVGFactory) {\n      unreachable(\"Cannot initialize BaseSVGFactory.\");\n    }\n  }\n  create(width, height, skipDimensions = false) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid SVG dimensions\");\n    }\n    const svg = this._createSVG(\"svg:svg\");\n    svg.setAttribute(\"version\", \"1.1\");\n    if (!skipDimensions) {\n      svg.setAttribute(\"width\", `${width}px`);\n      svg.setAttribute(\"height\", `${height}px`);\n    }\n    svg.setAttribute(\"preserveAspectRatio\", \"none\");\n    svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n    return svg;\n  }\n  createElement(type) {\n    if (typeof type !== \"string\") {\n      throw new Error(\"Invalid SVG element type\");\n    }\n    return this._createSVG(type);\n  }\n  _createSVG(type) {\n    unreachable(\"Abstract method `_createSVG` called.\");\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/display_utils.js\n\n\nconst SVG_NS = \"http://www.w3.org/2000/svg\";\nclass PixelsPerInch {\n  static CSS = 96.0;\n  static PDF = 72.0;\n  static PDF_TO_CSS_UNITS = this.CSS / this.PDF;\n}\nclass DOMFilterFactory extends BaseFilterFactory {\n  #_cache;\n  #_defs;\n  #docId;\n  #document;\n  #_hcmCache;\n  #id = 0;\n  constructor({\n    docId,\n    ownerDocument = globalThis.document\n  } = {}) {\n    super();\n    this.#docId = docId;\n    this.#document = ownerDocument;\n  }\n  get #cache() {\n    return this.#_cache ||= new Map();\n  }\n  get #hcmCache() {\n    return this.#_hcmCache ||= new Map();\n  }\n  get #defs() {\n    if (!this.#_defs) {\n      const div = this.#document.createElement(\"div\");\n      const {\n        style\n      } = div;\n      style.visibility = \"hidden\";\n      style.contain = \"strict\";\n      style.width = style.height = 0;\n      style.position = \"absolute\";\n      style.top = style.left = 0;\n      style.zIndex = -1;\n      const svg = this.#document.createElementNS(SVG_NS, \"svg\");\n      svg.setAttribute(\"width\", 0);\n      svg.setAttribute(\"height\", 0);\n      this.#_defs = this.#document.createElementNS(SVG_NS, \"defs\");\n      div.append(svg);\n      svg.append(this.#_defs);\n      this.#document.body.append(div);\n    }\n    return this.#_defs;\n  }\n  #createTables(maps) {\n    if (maps.length === 1) {\n      const mapR = maps[0];\n      const buffer = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        buffer[i] = mapR[i] / 255;\n      }\n      const table = buffer.join(\",\");\n      return [table, table, table];\n    }\n    const [mapR, mapG, mapB] = maps;\n    const bufferR = new Array(256);\n    const bufferG = new Array(256);\n    const bufferB = new Array(256);\n    for (let i = 0; i < 256; i++) {\n      bufferR[i] = mapR[i] / 255;\n      bufferG[i] = mapG[i] / 255;\n      bufferB[i] = mapB[i] / 255;\n    }\n    return [bufferR.join(\",\"), bufferG.join(\",\"), bufferB.join(\",\")];\n  }\n  addFilter(maps) {\n    if (!maps) {\n      return \"none\";\n    }\n    let value = this.#cache.get(maps);\n    if (value) {\n      return value;\n    }\n    const [tableR, tableG, tableB] = this.#createTables(maps);\n    const key = maps.length === 1 ? tableR : `${tableR}${tableG}${tableB}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(maps, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_transfer_map_${this.#id++}`;\n    const url = `url(#${id})`;\n    this.#cache.set(maps, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapConversion(tableR, tableG, tableB, filter);\n    return url;\n  }\n  addHCMFilter(fgColor, bgColor) {\n    const key = `${fgColor}-${bgColor}`;\n    const filterName = \"base\";\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const fgRGB = this.#getRGB(fgColor);\n    fgColor = Util.makeHexColor(...fgRGB);\n    const bgRGB = this.#getRGB(bgColor);\n    bgColor = Util.makeHexColor(...bgRGB);\n    this.#defs.style.color = \"\";\n    if (fgColor === \"#000000\" && bgColor === \"#ffffff\" || fgColor === bgColor) {\n      return info.url;\n    }\n    const map = new Array(256);\n    for (let i = 0; i <= 255; i++) {\n      const x = i / 255;\n      map[i] = x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;\n    }\n    const table = map.join(\",\");\n    const id = `g_${this.#docId}_hcm_filter`;\n    const filter = info.filter = this.#createFilter(id);\n    this.#addTransferMapConversion(table, table, table, filter);\n    this.#addGrayConversion(filter);\n    const getSteps = (c, n) => {\n      const start = fgRGB[c] / 255;\n      const end = bgRGB[c] / 255;\n      const arr = new Array(n + 1);\n      for (let i = 0; i <= n; i++) {\n        arr[i] = start + i / n * (end - start);\n      }\n      return arr.join(\",\");\n    };\n    this.#addTransferMapConversion(getSteps(0, 5), getSteps(1, 5), getSteps(2, 5), filter);\n    info.url = `url(#${id})`;\n    return info.url;\n  }\n  addAlphaFilter(map) {\n    let value = this.#cache.get(map);\n    if (value) {\n      return value;\n    }\n    const [tableA] = this.#createTables([map]);\n    const key = `alpha_${tableA}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_alpha_map_${this.#id++}`;\n    const url = `url(#${id})`;\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapAlphaConversion(tableA, filter);\n    return url;\n  }\n  addLuminosityFilter(map) {\n    let value = this.#cache.get(map || \"luminosity\");\n    if (value) {\n      return value;\n    }\n    let tableA, key;\n    if (map) {\n      [tableA] = this.#createTables([map]);\n      key = `luminosity_${tableA}`;\n    } else {\n      key = \"luminosity\";\n    }\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_luminosity_map_${this.#id++}`;\n    const url = `url(#${id})`;\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addLuminosityConversion(filter);\n    if (map) {\n      this.#addTransferMapAlphaConversion(tableA, filter);\n    }\n    return url;\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    const key = `${fgColor}-${bgColor}-${newFgColor}-${newBgColor}`;\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const [fgRGB, bgRGB] = [fgColor, bgColor].map(this.#getRGB.bind(this));\n    let fgGray = Math.round(0.2126 * fgRGB[0] + 0.7152 * fgRGB[1] + 0.0722 * fgRGB[2]);\n    let bgGray = Math.round(0.2126 * bgRGB[0] + 0.7152 * bgRGB[1] + 0.0722 * bgRGB[2]);\n    let [newFgRGB, newBgRGB] = [newFgColor, newBgColor].map(this.#getRGB.bind(this));\n    if (bgGray < fgGray) {\n      [fgGray, bgGray, newFgRGB, newBgRGB] = [bgGray, fgGray, newBgRGB, newFgRGB];\n    }\n    this.#defs.style.color = \"\";\n    const getSteps = (fg, bg, n) => {\n      const arr = new Array(256);\n      const step = (bgGray - fgGray) / n;\n      const newStart = fg / 255;\n      const newStep = (bg - fg) / (255 * n);\n      let prev = 0;\n      for (let i = 0; i <= n; i++) {\n        const k = Math.round(fgGray + i * step);\n        const value = newStart + i * newStep;\n        for (let j = prev; j <= k; j++) {\n          arr[j] = value;\n        }\n        prev = k + 1;\n      }\n      for (let i = prev; i < 256; i++) {\n        arr[i] = arr[prev - 1];\n      }\n      return arr.join(\",\");\n    };\n    const id = `g_${this.#docId}_hcm_${filterName}_filter`;\n    const filter = info.filter = this.#createFilter(id);\n    this.#addGrayConversion(filter);\n    this.#addTransferMapConversion(getSteps(newFgRGB[0], newBgRGB[0], 5), getSteps(newFgRGB[1], newBgRGB[1], 5), getSteps(newFgRGB[2], newBgRGB[2], 5), filter);\n    info.url = `url(#${id})`;\n    return info.url;\n  }\n  destroy(keepHCM = false) {\n    if (keepHCM && this.#hcmCache.size !== 0) {\n      return;\n    }\n    if (this.#_defs) {\n      this.#_defs.parentNode.parentNode.remove();\n      this.#_defs = null;\n    }\n    if (this.#_cache) {\n      this.#_cache.clear();\n      this.#_cache = null;\n    }\n    this.#id = 0;\n  }\n  #addLuminosityConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, \"feColorMatrix\");\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\"values\", \"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0\");\n    filter.append(feColorMatrix);\n  }\n  #addGrayConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, \"feColorMatrix\");\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\"values\", \"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0\");\n    filter.append(feColorMatrix);\n  }\n  #createFilter(id) {\n    const filter = this.#document.createElementNS(SVG_NS, \"filter\");\n    filter.setAttribute(\"color-interpolation-filters\", \"sRGB\");\n    filter.setAttribute(\"id\", id);\n    this.#defs.append(filter);\n    return filter;\n  }\n  #appendFeFunc(feComponentTransfer, func, table) {\n    const feFunc = this.#document.createElementNS(SVG_NS, func);\n    feFunc.setAttribute(\"type\", \"discrete\");\n    feFunc.setAttribute(\"tableValues\", table);\n    feComponentTransfer.append(feFunc);\n  }\n  #addTransferMapConversion(rTable, gTable, bTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, \"feComponentTransfer\");\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncR\", rTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncG\", gTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncB\", bTable);\n  }\n  #addTransferMapAlphaConversion(aTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, \"feComponentTransfer\");\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncA\", aTable);\n  }\n  #getRGB(color) {\n    this.#defs.style.color = color;\n    return getRGB(getComputedStyle(this.#defs).getPropertyValue(\"color\"));\n  }\n}\nclass DOMCanvasFactory extends BaseCanvasFactory {\n  constructor({\n    ownerDocument = globalThis.document\n  } = {}) {\n    super();\n    this._document = ownerDocument;\n  }\n  _createCanvas(width, height) {\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  }\n}\nasync function fetchData(url, type = \"text\") {\n  if (isValidFetchUrl(url, document.baseURI)) {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    switch (type) {\n      case \"arraybuffer\":\n        return response.arrayBuffer();\n      case \"blob\":\n        return response.blob();\n      case \"json\":\n        return response.json();\n    }\n    return response.text();\n  }\n  return new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest();\n    request.open(\"GET\", url, true);\n    request.responseType = type;\n    request.onreadystatechange = () => {\n      if (request.readyState !== XMLHttpRequest.DONE) {\n        return;\n      }\n      if (request.status === 200 || request.status === 0) {\n        switch (type) {\n          case \"arraybuffer\":\n          case \"blob\":\n          case \"json\":\n            resolve(request.response);\n            return;\n        }\n        resolve(request.responseText);\n        return;\n      }\n      reject(new Error(request.statusText));\n    };\n    request.send(null);\n  });\n}\nclass DOMCMapReaderFactory extends BaseCMapReaderFactory {\n  _fetchData(url, compressionType) {\n    return fetchData(url, this.isCompressed ? \"arraybuffer\" : \"text\").then(data => ({\n      cMapData: data instanceof ArrayBuffer ? new Uint8Array(data) : stringToBytes(data),\n      compressionType\n    }));\n  }\n}\nclass DOMStandardFontDataFactory extends BaseStandardFontDataFactory {\n  _fetchData(url) {\n    return fetchData(url, \"arraybuffer\").then(data => new Uint8Array(data));\n  }\n}\nclass DOMSVGFactory extends BaseSVGFactory {\n  _createSVG(type) {\n    return document.createElementNS(SVG_NS, type);\n  }\n}\nclass PageViewport {\n  constructor({\n    viewBox,\n    scale,\n    rotation,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false\n  }) {\n    this.viewBox = viewBox;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n    const centerX = (viewBox[2] + viewBox[0]) / 2;\n    const centerY = (viewBox[3] + viewBox[1]) / 2;\n    let rotateA, rotateB, rotateC, rotateD;\n    rotation %= 360;\n    if (rotation < 0) {\n      rotation += 360;\n    }\n    switch (rotation) {\n      case 180:\n        rotateA = -1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0;\n        rotateB = 1;\n        rotateC = 1;\n        rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0;\n        rotateB = -1;\n        rotateC = -1;\n        rotateD = 0;\n        break;\n      case 0:\n        rotateA = 1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = -1;\n        break;\n      default:\n        throw new Error(\"PageViewport: Invalid rotation, must be a multiple of 90 degrees.\");\n    }\n    if (dontFlip) {\n      rotateC = -rotateC;\n      rotateD = -rotateD;\n    }\n    let offsetCanvasX, offsetCanvasY;\n    let width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = (viewBox[3] - viewBox[1]) * scale;\n      height = (viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = (viewBox[2] - viewBox[0]) * scale;\n      height = (viewBox[3] - viewBox[1]) * scale;\n    }\n    this.transform = [rotateA * scale, rotateB * scale, rotateC * scale, rotateD * scale, offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY, offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY];\n    this.width = width;\n    this.height = height;\n  }\n  get rawDims() {\n    const {\n      viewBox\n    } = this;\n    return shadow(this, \"rawDims\", {\n      pageWidth: viewBox[2] - viewBox[0],\n      pageHeight: viewBox[3] - viewBox[1],\n      pageX: viewBox[0],\n      pageY: viewBox[1]\n    });\n  }\n  clone({\n    scale = this.scale,\n    rotation = this.rotation,\n    offsetX = this.offsetX,\n    offsetY = this.offsetY,\n    dontFlip = false\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.viewBox.slice(),\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip\n    });\n  }\n  convertToViewportPoint(x, y) {\n    return Util.applyTransform([x, y], this.transform);\n  }\n  convertToViewportRectangle(rect) {\n    const topLeft = Util.applyTransform([rect[0], rect[1]], this.transform);\n    const bottomRight = Util.applyTransform([rect[2], rect[3]], this.transform);\n    return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];\n  }\n  convertToPdfPoint(x, y) {\n    return Util.applyInverseTransform([x, y], this.transform);\n  }\n}\nclass RenderingCancelledException extends BaseException {\n  constructor(msg, extraDelay = 0) {\n    super(msg, \"RenderingCancelledException\");\n    this.extraDelay = extraDelay;\n  }\n}\nfunction isDataScheme(url) {\n  const ii = url.length;\n  let i = 0;\n  while (i < ii && url[i].trim() === \"\") {\n    i++;\n  }\n  return url.substring(i, i + 5).toLowerCase() === \"data:\";\n}\nfunction isPdfFile(filename) {\n  return typeof filename === \"string\" && /\\.pdf$/i.test(filename);\n}\nfunction getFilenameFromUrl(url) {\n  [url] = url.split(/[#?]/, 1);\n  return url.substring(url.lastIndexOf(\"/\") + 1);\n}\nfunction getPdfFilenameFromUrl(url, defaultFilename = \"document.pdf\") {\n  if (typeof url !== \"string\") {\n    return defaultFilename;\n  }\n  if (isDataScheme(url)) {\n    warn('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');\n    return defaultFilename;\n  }\n  const reURI = /^(?:(?:[^:]+:)?\\/\\/[^/]+)?([^?#]*)(\\?[^#]*)?(#.*)?$/;\n  const reFilename = /[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n  const splitURI = reURI.exec(url);\n  let suggestedFilename = reFilename.exec(splitURI[1]) || reFilename.exec(splitURI[2]) || reFilename.exec(splitURI[3]);\n  if (suggestedFilename) {\n    suggestedFilename = suggestedFilename[0];\n    if (suggestedFilename.includes(\"%\")) {\n      try {\n        suggestedFilename = reFilename.exec(decodeURIComponent(suggestedFilename))[0];\n      } catch {}\n    }\n  }\n  return suggestedFilename || defaultFilename;\n}\nclass StatTimer {\n  started = Object.create(null);\n  times = [];\n  time(name) {\n    if (name in this.started) {\n      warn(`Timer is already running for ${name}`);\n    }\n    this.started[name] = Date.now();\n  }\n  timeEnd(name) {\n    if (!(name in this.started)) {\n      warn(`Timer has not been started for ${name}`);\n    }\n    this.times.push({\n      name,\n      start: this.started[name],\n      end: Date.now()\n    });\n    delete this.started[name];\n  }\n  toString() {\n    const outBuf = [];\n    let longest = 0;\n    for (const {\n      name\n    } of this.times) {\n      longest = Math.max(name.length, longest);\n    }\n    for (const {\n      name,\n      start,\n      end\n    } of this.times) {\n      outBuf.push(`${name.padEnd(longest)} ${end - start}ms\\n`);\n    }\n    return outBuf.join(\"\");\n  }\n}\nfunction isValidFetchUrl(url, baseUrl) {\n  try {\n    const {\n      protocol\n    } = baseUrl ? new URL(url, baseUrl) : new URL(url);\n    return protocol === \"http:\" || protocol === \"https:\";\n  } catch {\n    return false;\n  }\n}\nfunction noContextMenu(e) {\n  e.preventDefault();\n}\nfunction deprecated(details) {\n  console.log(\"Deprecated API usage: \" + details);\n}\nlet pdfDateStringRegex;\nclass PDFDateString {\n  static toDateObject(input) {\n    if (!input || typeof input !== \"string\") {\n      return null;\n    }\n    pdfDateStringRegex ||= new RegExp(\"^D:\" + \"(\\\\d{4})\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"([Z|+|-])?\" + \"(\\\\d{2})?\" + \"'?\" + \"(\\\\d{2})?\" + \"'?\");\n    const matches = pdfDateStringRegex.exec(input);\n    if (!matches) {\n      return null;\n    }\n    const year = parseInt(matches[1], 10);\n    let month = parseInt(matches[2], 10);\n    month = month >= 1 && month <= 12 ? month - 1 : 0;\n    let day = parseInt(matches[3], 10);\n    day = day >= 1 && day <= 31 ? day : 1;\n    let hour = parseInt(matches[4], 10);\n    hour = hour >= 0 && hour <= 23 ? hour : 0;\n    let minute = parseInt(matches[5], 10);\n    minute = minute >= 0 && minute <= 59 ? minute : 0;\n    let second = parseInt(matches[6], 10);\n    second = second >= 0 && second <= 59 ? second : 0;\n    const universalTimeRelation = matches[7] || \"Z\";\n    let offsetHour = parseInt(matches[8], 10);\n    offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;\n    let offsetMinute = parseInt(matches[9], 10) || 0;\n    offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;\n    if (universalTimeRelation === \"-\") {\n      hour += offsetHour;\n      minute += offsetMinute;\n    } else if (universalTimeRelation === \"+\") {\n      hour -= offsetHour;\n      minute -= offsetMinute;\n    }\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n  }\n}\nfunction getXfaPageViewport(xfaPage, {\n  scale = 1,\n  rotation = 0\n}) {\n  const {\n    width,\n    height\n  } = xfaPage.attributes.style;\n  const viewBox = [0, 0, parseInt(width), parseInt(height)];\n  return new PageViewport({\n    viewBox,\n    scale,\n    rotation\n  });\n}\nfunction getRGB(color) {\n  if (color.startsWith(\"#\")) {\n    const colorRGB = parseInt(color.slice(1), 16);\n    return [(colorRGB & 0xff0000) >> 16, (colorRGB & 0x00ff00) >> 8, colorRGB & 0x0000ff];\n  }\n  if (color.startsWith(\"rgb(\")) {\n    return color.slice(4, -1).split(\",\").map(x => parseInt(x));\n  }\n  if (color.startsWith(\"rgba(\")) {\n    return color.slice(5, -1).split(\",\").map(x => parseInt(x)).slice(0, 3);\n  }\n  warn(`Not a valid color format: \"${color}\"`);\n  return [0, 0, 0];\n}\nfunction getColorValues(colors) {\n  const span = document.createElement(\"span\");\n  span.style.visibility = \"hidden\";\n  document.body.append(span);\n  for (const name of colors.keys()) {\n    span.style.color = name;\n    const computedColor = window.getComputedStyle(span).color;\n    colors.set(name, getRGB(computedColor));\n  }\n  span.remove();\n}\nfunction getCurrentTransform(ctx) {\n  const {\n    a,\n    b,\n    c,\n    d,\n    e,\n    f\n  } = ctx.getTransform();\n  return [a, b, c, d, e, f];\n}\nfunction getCurrentTransformInverse(ctx) {\n  const {\n    a,\n    b,\n    c,\n    d,\n    e,\n    f\n  } = ctx.getTransform().invertSelf();\n  return [a, b, c, d, e, f];\n}\nfunction setLayerDimensions(div, viewport, mustFlip = false, mustRotate = true) {\n  if (viewport instanceof PageViewport) {\n    const {\n      pageWidth,\n      pageHeight\n    } = viewport.rawDims;\n    const {\n      style\n    } = div;\n    const useRound = util_FeatureTest.isCSSRoundSupported;\n    const w = `var(--scale-factor) * ${pageWidth}px`,\n      h = `var(--scale-factor) * ${pageHeight}px`;\n    const widthStr = useRound ? `round(${w}, 1px)` : `calc(${w})`,\n      heightStr = useRound ? `round(${h}, 1px)` : `calc(${h})`;\n    if (!mustFlip || viewport.rotation % 180 === 0) {\n      style.width = widthStr;\n      style.height = heightStr;\n    } else {\n      style.width = heightStr;\n      style.height = widthStr;\n    }\n  }\n  if (mustRotate) {\n    div.setAttribute(\"data-main-rotation\", viewport.rotation);\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/editor/toolbar.js\n\nclass EditorToolbar {\n  #toolbar = null;\n  #colorPicker = null;\n  #editor;\n  #buttons = null;\n  constructor(editor) {\n    this.#editor = editor;\n  }\n  render() {\n    const editToolbar = this.#toolbar = document.createElement(\"div\");\n    editToolbar.className = \"editToolbar\";\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu);\n    editToolbar.addEventListener(\"pointerdown\", EditorToolbar.#pointerDown);\n    const buttons = this.#buttons = document.createElement(\"div\");\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n    const position = this.#editor.toolbarPosition;\n    if (position) {\n      const {\n        style\n      } = editToolbar;\n      const x = this.#editor._uiManager.direction === \"ltr\" ? 1 - position[0] : position[0];\n      style.insetInlineEnd = `${100 * x}%`;\n      style.top = `calc(${100 * position[1]}% + var(--editor-toolbar-vert-offset))`;\n    }\n    this.#addDeleteButton();\n    return editToolbar;\n  }\n  static #pointerDown(e) {\n    e.stopPropagation();\n  }\n  #focusIn(e) {\n    this.#editor._focusEventsAllowed = false;\n    e.preventDefault();\n    e.stopPropagation();\n  }\n  #focusOut(e) {\n    this.#editor._focusEventsAllowed = true;\n    e.preventDefault();\n    e.stopPropagation();\n  }\n  #addListenersToElement(element) {\n    element.addEventListener(\"focusin\", this.#focusIn.bind(this), {\n      capture: true\n    });\n    element.addEventListener(\"focusout\", this.#focusOut.bind(this), {\n      capture: true\n    });\n    element.addEventListener(\"contextmenu\", noContextMenu);\n  }\n  hide() {\n    this.#toolbar.classList.add(\"hidden\");\n    this.#colorPicker?.hideDropdown();\n  }\n  show() {\n    this.#toolbar.classList.remove(\"hidden\");\n  }\n  #addDeleteButton() {\n    const button = document.createElement(\"button\");\n    button.className = \"delete\";\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", `pdfjs-editor-remove-${this.#editor.editorType}-button`);\n    this.#addListenersToElement(button);\n    button.addEventListener(\"click\", e => {\n      this.#editor._uiManager.delete();\n    });\n    this.#buttons.append(button);\n  }\n  get #divider() {\n    const divider = document.createElement(\"div\");\n    divider.className = \"divider\";\n    return divider;\n  }\n  addAltTextButton(button) {\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n  addColorPicker(colorPicker) {\n    this.#colorPicker = colorPicker;\n    const button = colorPicker.renderButton();\n    this.#addListenersToElement(button);\n    this.#buttons.prepend(button, this.#divider);\n  }\n  remove() {\n    this.#toolbar.remove();\n    this.#colorPicker?.destroy();\n    this.#colorPicker = null;\n  }\n}\nclass HighlightToolbar {\n  #buttons = null;\n  #toolbar = null;\n  #uiManager;\n  constructor(uiManager) {\n    this.#uiManager = uiManager;\n  }\n  #render() {\n    const editToolbar = this.#toolbar = document.createElement(\"div\");\n    editToolbar.className = \"editToolbar\";\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu);\n    const buttons = this.#buttons = document.createElement(\"div\");\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n    this.#addHighlightButton();\n    return editToolbar;\n  }\n  #getLastPoint(boxes, isLTR) {\n    let lastY = 0;\n    let lastX = 0;\n    for (const box of boxes) {\n      const y = box.y + box.height;\n      if (y < lastY) {\n        continue;\n      }\n      const x = box.x + (isLTR ? box.width : 0);\n      if (y > lastY) {\n        lastX = x;\n        lastY = y;\n        continue;\n      }\n      if (isLTR) {\n        if (x > lastX) {\n          lastX = x;\n        }\n      } else if (x < lastX) {\n        lastX = x;\n      }\n    }\n    return [isLTR ? 1 - lastX : lastX, lastY];\n  }\n  show(parent, boxes, isLTR) {\n    const [x, y] = this.#getLastPoint(boxes, isLTR);\n    const {\n      style\n    } = this.#toolbar ||= this.#render();\n    parent.append(this.#toolbar);\n    style.insetInlineEnd = `${100 * x}%`;\n    style.top = `calc(${100 * y}% + var(--editor-toolbar-vert-offset))`;\n  }\n  hide() {\n    this.#toolbar.remove();\n  }\n  #addHighlightButton() {\n    const button = document.createElement(\"button\");\n    button.className = \"highlightButton\";\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", `pdfjs-highlight-floating-button1`);\n    const span = document.createElement(\"span\");\n    button.append(span);\n    span.className = \"visuallyHidden\";\n    span.setAttribute(\"data-l10n-id\", \"pdfjs-highlight-floating-button-label\");\n    button.addEventListener(\"contextmenu\", noContextMenu);\n    button.addEventListener(\"click\", () => {\n      this.#uiManager.highlightSelection(\"floating_button\");\n    });\n    this.#buttons.append(button);\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/editor/tools.js\n\n\n\nfunction bindEvents(obj, element, names) {\n  for (const name of names) {\n    element.addEventListener(name, obj[name].bind(obj));\n  }\n}\nfunction opacityToHex(opacity) {\n  return Math.round(Math.min(255, Math.max(1, 255 * opacity))).toString(16).padStart(2, \"0\");\n}\nclass IdManager {\n  #id = 0;\n  get id() {\n    return `${AnnotationEditorPrefix}${this.#id++}`;\n  }\n}\nclass ImageManager {\n  #baseId = getUuid();\n  #id = 0;\n  #cache = null;\n  static get _isSVGFittingCanvas() {\n    const svg = `data:image/svg+xml;charset=UTF-8,<svg viewBox=\"0 0 1 1\" width=\"1\" height=\"1\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"1\" height=\"1\" style=\"fill:red;\"/></svg>`;\n    const canvas = new OffscreenCanvas(1, 3);\n    const ctx = canvas.getContext(\"2d\");\n    const image = new Image();\n    image.src = svg;\n    const promise = image.decode().then(() => {\n      ctx.drawImage(image, 0, 0, 1, 1, 0, 0, 1, 3);\n      return new Uint32Array(ctx.getImageData(0, 0, 1, 1).data.buffer)[0] === 0;\n    });\n    return shadow(this, \"_isSVGFittingCanvas\", promise);\n  }\n  async #get(key, rawData) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(key);\n    if (data === null) {\n      return null;\n    }\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    try {\n      data ||= {\n        bitmap: null,\n        id: `image_${this.#baseId}_${this.#id++}`,\n        refCounter: 0,\n        isSvg: false\n      };\n      let image;\n      if (typeof rawData === \"string\") {\n        data.url = rawData;\n        image = await fetchData(rawData, \"blob\");\n      } else {\n        image = data.file = rawData;\n      }\n      if (image.type === \"image/svg+xml\") {\n        const mustRemoveAspectRatioPromise = ImageManager._isSVGFittingCanvas;\n        const fileReader = new FileReader();\n        const imageElement = new Image();\n        const imagePromise = new Promise((resolve, reject) => {\n          imageElement.onload = () => {\n            data.bitmap = imageElement;\n            data.isSvg = true;\n            resolve();\n          };\n          fileReader.onload = async () => {\n            const url = data.svgUrl = fileReader.result;\n            imageElement.src = (await mustRemoveAspectRatioPromise) ? `${url}#svgView(preserveAspectRatio(none))` : url;\n          };\n          imageElement.onerror = fileReader.onerror = reject;\n        });\n        fileReader.readAsDataURL(image);\n        await imagePromise;\n      } else {\n        data.bitmap = await createImageBitmap(image);\n      }\n      data.refCounter = 1;\n    } catch (e) {\n      console.error(e);\n      data = null;\n    }\n    this.#cache.set(key, data);\n    if (data) {\n      this.#cache.set(data.id, data);\n    }\n    return data;\n  }\n  async getFromFile(file) {\n    const {\n      lastModified,\n      name,\n      size,\n      type\n    } = file;\n    return this.#get(`${lastModified}_${name}_${size}_${type}`, file);\n  }\n  async getFromUrl(url) {\n    return this.#get(url, url);\n  }\n  async getFromId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return null;\n    }\n    if (data.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    if (data.file) {\n      return this.getFromFile(data.file);\n    }\n    return this.getFromUrl(data.url);\n  }\n  getSvgUrl(id) {\n    const data = this.#cache.get(id);\n    if (!data?.isSvg) {\n      return null;\n    }\n    return data.svgUrl;\n  }\n  deleteId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return;\n    }\n    data.refCounter -= 1;\n    if (data.refCounter !== 0) {\n      return;\n    }\n    data.bitmap = null;\n  }\n  isValidId(id) {\n    return id.startsWith(`image_${this.#baseId}_`);\n  }\n}\nclass CommandManager {\n  #commands = [];\n  #locked = false;\n  #maxSize;\n  #position = -1;\n  constructor(maxSize = 128) {\n    this.#maxSize = maxSize;\n  }\n  add({\n    cmd,\n    undo,\n    post,\n    mustExec,\n    type = NaN,\n    overwriteIfSameType = false,\n    keepUndo = false\n  }) {\n    if (mustExec) {\n      cmd();\n    }\n    if (this.#locked) {\n      return;\n    }\n    const save = {\n      cmd,\n      undo,\n      post,\n      type\n    };\n    if (this.#position === -1) {\n      if (this.#commands.length > 0) {\n        this.#commands.length = 0;\n      }\n      this.#position = 0;\n      this.#commands.push(save);\n      return;\n    }\n    if (overwriteIfSameType && this.#commands[this.#position].type === type) {\n      if (keepUndo) {\n        save.undo = this.#commands[this.#position].undo;\n      }\n      this.#commands[this.#position] = save;\n      return;\n    }\n    const next = this.#position + 1;\n    if (next === this.#maxSize) {\n      this.#commands.splice(0, 1);\n    } else {\n      this.#position = next;\n      if (next < this.#commands.length) {\n        this.#commands.splice(next);\n      }\n    }\n    this.#commands.push(save);\n  }\n  undo() {\n    if (this.#position === -1) {\n      return;\n    }\n    this.#locked = true;\n    const {\n      undo,\n      post\n    } = this.#commands[this.#position];\n    undo();\n    post?.();\n    this.#locked = false;\n    this.#position -= 1;\n  }\n  redo() {\n    if (this.#position < this.#commands.length - 1) {\n      this.#position += 1;\n      this.#locked = true;\n      const {\n        cmd,\n        post\n      } = this.#commands[this.#position];\n      cmd();\n      post?.();\n      this.#locked = false;\n    }\n  }\n  hasSomethingToUndo() {\n    return this.#position !== -1;\n  }\n  hasSomethingToRedo() {\n    return this.#position < this.#commands.length - 1;\n  }\n  destroy() {\n    this.#commands = null;\n  }\n}\nclass KeyboardManager {\n  constructor(callbacks) {\n    this.buffer = [];\n    this.callbacks = new Map();\n    this.allKeys = new Set();\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    for (const [keys, callback, options = {}] of callbacks) {\n      for (const key of keys) {\n        const isMacKey = key.startsWith(\"mac+\");\n        if (isMac && isMacKey) {\n          this.callbacks.set(key.slice(4), {\n            callback,\n            options\n          });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        } else if (!isMac && !isMacKey) {\n          this.callbacks.set(key, {\n            callback,\n            options\n          });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        }\n      }\n    }\n  }\n  #serialize(event) {\n    if (event.altKey) {\n      this.buffer.push(\"alt\");\n    }\n    if (event.ctrlKey) {\n      this.buffer.push(\"ctrl\");\n    }\n    if (event.metaKey) {\n      this.buffer.push(\"meta\");\n    }\n    if (event.shiftKey) {\n      this.buffer.push(\"shift\");\n    }\n    this.buffer.push(event.key);\n    const str = this.buffer.join(\"+\");\n    this.buffer.length = 0;\n    return str;\n  }\n  exec(self, event) {\n    if (!this.allKeys.has(event.key)) {\n      return;\n    }\n    const info = this.callbacks.get(this.#serialize(event));\n    if (!info) {\n      return;\n    }\n    const {\n      callback,\n      options: {\n        bubbles = false,\n        args = [],\n        checker = null\n      }\n    } = info;\n    if (checker && !checker(self, event)) {\n      return;\n    }\n    callback.bind(self, ...args, event)();\n    if (!bubbles) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n  }\n}\nclass ColorManager {\n  static _colorsMapping = new Map([[\"CanvasText\", [0, 0, 0]], [\"Canvas\", [255, 255, 255]]]);\n  get _colors() {\n    const colors = new Map([[\"CanvasText\", null], [\"Canvas\", null]]);\n    getColorValues(colors);\n    return shadow(this, \"_colors\", colors);\n  }\n  convert(color) {\n    const rgb = getRGB(color);\n    if (!window.matchMedia(\"(forced-colors: active)\").matches) {\n      return rgb;\n    }\n    for (const [name, RGB] of this._colors) {\n      if (RGB.every((x, i) => x === rgb[i])) {\n        return ColorManager._colorsMapping.get(name);\n      }\n    }\n    return rgb;\n  }\n  getHexCode(name) {\n    const rgb = this._colors.get(name);\n    if (!rgb) {\n      return name;\n    }\n    return Util.makeHexColor(...rgb);\n  }\n}\nclass AnnotationEditorUIManager {\n  #activeEditor = null;\n  #allEditors = new Map();\n  #allLayers = new Map();\n  #altTextManager = null;\n  #annotationStorage = null;\n  #changedExistingAnnotations = null;\n  #commandManager = new CommandManager();\n  #currentPageIndex = 0;\n  #deletedAnnotationsElementIds = new Set();\n  #draggingEditors = null;\n  #editorTypes = null;\n  #editorsToRescale = new Set();\n  #enableHighlightFloatingButton = false;\n  #filterFactory = null;\n  #focusMainContainerTimeoutId = null;\n  #highlightColors = null;\n  #highlightWhenShiftUp = false;\n  #highlightToolbar = null;\n  #idManager = new IdManager();\n  #isEnabled = false;\n  #isWaiting = false;\n  #lastActiveElement = null;\n  #mainHighlightColorPicker = null;\n  #mlManager = null;\n  #mode = AnnotationEditorType.NONE;\n  #selectedEditors = new Set();\n  #selectedTextNode = null;\n  #pageColors = null;\n  #showAllStates = null;\n  #boundBlur = this.blur.bind(this);\n  #boundFocus = this.focus.bind(this);\n  #boundCopy = this.copy.bind(this);\n  #boundCut = this.cut.bind(this);\n  #boundPaste = this.paste.bind(this);\n  #boundKeydown = this.keydown.bind(this);\n  #boundKeyup = this.keyup.bind(this);\n  #boundOnEditingAction = this.onEditingAction.bind(this);\n  #boundOnPageChanging = this.onPageChanging.bind(this);\n  #boundOnScaleChanging = this.onScaleChanging.bind(this);\n  #boundSelectionChange = this.#selectionChange.bind(this);\n  #boundOnRotationChanging = this.onRotationChanging.bind(this);\n  #previousStates = {\n    isEditing: false,\n    isEmpty: true,\n    hasSomethingToUndo: false,\n    hasSomethingToRedo: false,\n    hasSelectedEditor: false,\n    hasSelectedText: false\n  };\n  #translation = [0, 0];\n  #translationTimeoutId = null;\n  #container = null;\n  #viewer = null;\n  static TRANSLATE_SMALL = 1;\n  static TRANSLATE_BIG = 10;\n  static get _keyboardManager() {\n    const proto = AnnotationEditorUIManager.prototype;\n    const arrowChecker = self => self.#container.contains(document.activeElement) && document.activeElement.tagName !== \"BUTTON\" && self.hasSomethingToControl();\n    const textInputChecker = (_self, {\n      target: el\n    }) => {\n      if (el instanceof HTMLInputElement) {\n        const {\n          type\n        } = el;\n        return type !== \"text\" && type !== \"number\";\n      }\n      return true;\n    };\n    const small = this.TRANSLATE_SMALL;\n    const big = this.TRANSLATE_BIG;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ctrl+a\", \"mac+meta+a\"], proto.selectAll, {\n      checker: textInputChecker\n    }], [[\"ctrl+z\", \"mac+meta+z\"], proto.undo, {\n      checker: textInputChecker\n    }], [[\"ctrl+y\", \"ctrl+shift+z\", \"mac+meta+shift+z\", \"ctrl+shift+Z\", \"mac+meta+shift+Z\"], proto.redo, {\n      checker: textInputChecker\n    }], [[\"Backspace\", \"alt+Backspace\", \"ctrl+Backspace\", \"shift+Backspace\", \"mac+Backspace\", \"mac+alt+Backspace\", \"mac+ctrl+Backspace\", \"Delete\", \"ctrl+Delete\", \"shift+Delete\", \"mac+Delete\"], proto.delete, {\n      checker: textInputChecker\n    }], [[\"Enter\", \"mac+Enter\"], proto.addNewEditorFromKeyboard, {\n      checker: (self, {\n        target: el\n      }) => !(el instanceof HTMLButtonElement) && self.#container.contains(el) && !self.isEnterHandled\n    }], [[\" \", \"mac+ \"], proto.addNewEditorFromKeyboard, {\n      checker: (self, {\n        target: el\n      }) => !(el instanceof HTMLButtonElement) && self.#container.contains(document.activeElement)\n    }], [[\"Escape\", \"mac+Escape\"], proto.unselectAll], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto.translateSelectedEditors, {\n      args: [-small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto.translateSelectedEditors, {\n      args: [-big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto.translateSelectedEditors, {\n      args: [small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto.translateSelectedEditors, {\n      args: [big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto.translateSelectedEditors, {\n      args: [0, -small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto.translateSelectedEditors, {\n      args: [0, -big],\n      checker: arrowChecker\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto.translateSelectedEditors, {\n      args: [0, small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto.translateSelectedEditors, {\n      args: [0, big],\n      checker: arrowChecker\n    }]]));\n  }\n  constructor(container, viewer, altTextManager, eventBus, pdfDocument, pageColors, highlightColors, enableHighlightFloatingButton, mlManager) {\n    this.#container = container;\n    this.#viewer = viewer;\n    this.#altTextManager = altTextManager;\n    this._eventBus = eventBus;\n    this._eventBus._on(\"editingaction\", this.#boundOnEditingAction);\n    this._eventBus._on(\"pagechanging\", this.#boundOnPageChanging);\n    this._eventBus._on(\"scalechanging\", this.#boundOnScaleChanging);\n    this._eventBus._on(\"rotationchanging\", this.#boundOnRotationChanging);\n    this.#addSelectionListener();\n    this.#addKeyboardManager();\n    this.#annotationStorage = pdfDocument.annotationStorage;\n    this.#filterFactory = pdfDocument.filterFactory;\n    this.#pageColors = pageColors;\n    this.#highlightColors = highlightColors || null;\n    this.#enableHighlightFloatingButton = enableHighlightFloatingButton;\n    this.#mlManager = mlManager || null;\n    this.viewParameters = {\n      realScale: PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: 0\n    };\n    this.isShiftKeyDown = false;\n  }\n  destroy() {\n    this.#removeKeyboardManager();\n    this.#removeFocusManager();\n    this._eventBus._off(\"editingaction\", this.#boundOnEditingAction);\n    this._eventBus._off(\"pagechanging\", this.#boundOnPageChanging);\n    this._eventBus._off(\"scalechanging\", this.#boundOnScaleChanging);\n    this._eventBus._off(\"rotationchanging\", this.#boundOnRotationChanging);\n    for (const layer of this.#allLayers.values()) {\n      layer.destroy();\n    }\n    this.#allLayers.clear();\n    this.#allEditors.clear();\n    this.#editorsToRescale.clear();\n    this.#activeEditor = null;\n    this.#selectedEditors.clear();\n    this.#commandManager.destroy();\n    this.#altTextManager?.destroy();\n    this.#highlightToolbar?.hide();\n    this.#highlightToolbar = null;\n    if (this.#focusMainContainerTimeoutId) {\n      clearTimeout(this.#focusMainContainerTimeoutId);\n      this.#focusMainContainerTimeoutId = null;\n    }\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n      this.#translationTimeoutId = null;\n    }\n    this.#removeSelectionListener();\n  }\n  async mlGuess(data) {\n    return this.#mlManager?.guess(data) || null;\n  }\n  get hasMLManager() {\n    return !!this.#mlManager;\n  }\n  get hcmFilter() {\n    return shadow(this, \"hcmFilter\", this.#pageColors ? this.#filterFactory.addHCMFilter(this.#pageColors.foreground, this.#pageColors.background) : \"none\");\n  }\n  get direction() {\n    return shadow(this, \"direction\", getComputedStyle(this.#container).direction);\n  }\n  get highlightColors() {\n    return shadow(this, \"highlightColors\", this.#highlightColors ? new Map(this.#highlightColors.split(\",\").map(pair => pair.split(\"=\").map(x => x.trim()))) : null);\n  }\n  get highlightColorNames() {\n    return shadow(this, \"highlightColorNames\", this.highlightColors ? new Map(Array.from(this.highlightColors, e => e.reverse())) : null);\n  }\n  setMainHighlightColorPicker(colorPicker) {\n    this.#mainHighlightColorPicker = colorPicker;\n  }\n  editAltText(editor) {\n    this.#altTextManager?.editAltText(this, editor);\n  }\n  onPageChanging({\n    pageNumber\n  }) {\n    this.#currentPageIndex = pageNumber - 1;\n  }\n  focusMainContainer() {\n    this.#container.focus();\n  }\n  findParent(x, y) {\n    for (const layer of this.#allLayers.values()) {\n      const {\n        x: layerX,\n        y: layerY,\n        width,\n        height\n      } = layer.div.getBoundingClientRect();\n      if (x >= layerX && x <= layerX + width && y >= layerY && y <= layerY + height) {\n        return layer;\n      }\n    }\n    return null;\n  }\n  disableUserSelect(value = false) {\n    this.#viewer.classList.toggle(\"noUserSelect\", value);\n  }\n  addShouldRescale(editor) {\n    this.#editorsToRescale.add(editor);\n  }\n  removeShouldRescale(editor) {\n    this.#editorsToRescale.delete(editor);\n  }\n  onScaleChanging({\n    scale\n  }) {\n    this.commitOrRemove();\n    this.viewParameters.realScale = scale * PixelsPerInch.PDF_TO_CSS_UNITS;\n    for (const editor of this.#editorsToRescale) {\n      editor.onScaleChanging();\n    }\n  }\n  onRotationChanging({\n    pagesRotation\n  }) {\n    this.commitOrRemove();\n    this.viewParameters.rotation = pagesRotation;\n  }\n  #getAnchorElementForSelection({\n    anchorNode\n  }) {\n    return anchorNode.nodeType === Node.TEXT_NODE ? anchorNode.parentElement : anchorNode;\n  }\n  highlightSelection(methodOfCreation = \"\") {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const {\n      anchorNode,\n      anchorOffset,\n      focusNode,\n      focusOffset\n    } = selection;\n    const text = selection.toString();\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    selection.empty();\n    if (this.#mode === AnnotationEditorType.NONE) {\n      this._eventBus.dispatch(\"showannotationeditorui\", {\n        source: this,\n        mode: AnnotationEditorType.HIGHLIGHT\n      });\n      this.showAllEditors(\"highlight\", true, true);\n    }\n    for (const layer of this.#allLayers.values()) {\n      if (layer.hasTextLayer(textLayer)) {\n        layer.createAndAddNewEditor({\n          x: 0,\n          y: 0\n        }, false, {\n          methodOfCreation,\n          boxes,\n          anchorNode,\n          anchorOffset,\n          focusNode,\n          focusOffset,\n          text\n        });\n        break;\n      }\n    }\n  }\n  #displayHighlightToolbar() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    this.#highlightToolbar ||= new HighlightToolbar(this);\n    this.#highlightToolbar.show(textLayer, boxes, this.direction === \"ltr\");\n  }\n  addToAnnotationStorage(editor) {\n    if (!editor.isEmpty() && this.#annotationStorage && !this.#annotationStorage.has(editor.id)) {\n      this.#annotationStorage.setValue(editor.id, editor);\n    }\n  }\n  #selectionChange() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false\n        });\n      }\n      return;\n    }\n    const {\n      anchorNode\n    } = selection;\n    if (anchorNode === this.#selectedTextNode) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    if (!textLayer) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false\n        });\n      }\n      return;\n    }\n    this.#highlightToolbar?.hide();\n    this.#selectedTextNode = anchorNode;\n    this.#dispatchUpdateStates({\n      hasSelectedText: true\n    });\n    if (this.#mode !== AnnotationEditorType.HIGHLIGHT && this.#mode !== AnnotationEditorType.NONE) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.showAllEditors(\"highlight\", true, true);\n    }\n    this.#highlightWhenShiftUp = this.isShiftKeyDown;\n    if (!this.isShiftKeyDown) {\n      const pointerup = e => {\n        if (e.type === \"pointerup\" && e.button !== 0) {\n          return;\n        }\n        window.removeEventListener(\"pointerup\", pointerup);\n        window.removeEventListener(\"blur\", pointerup);\n        if (e.type === \"pointerup\") {\n          this.#onSelectEnd(\"main_toolbar\");\n        }\n      };\n      window.addEventListener(\"pointerup\", pointerup);\n      window.addEventListener(\"blur\", pointerup);\n    }\n  }\n  #onSelectEnd(methodOfCreation = \"\") {\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.highlightSelection(methodOfCreation);\n    } else if (this.#enableHighlightFloatingButton) {\n      this.#displayHighlightToolbar();\n    }\n  }\n  #addSelectionListener() {\n    document.addEventListener(\"selectionchange\", this.#boundSelectionChange);\n  }\n  #removeSelectionListener() {\n    document.removeEventListener(\"selectionchange\", this.#boundSelectionChange);\n  }\n  #addFocusManager() {\n    window.addEventListener(\"focus\", this.#boundFocus);\n    window.addEventListener(\"blur\", this.#boundBlur);\n  }\n  #removeFocusManager() {\n    window.removeEventListener(\"focus\", this.#boundFocus);\n    window.removeEventListener(\"blur\", this.#boundBlur);\n  }\n  blur() {\n    this.isShiftKeyDown = false;\n    if (this.#highlightWhenShiftUp) {\n      this.#highlightWhenShiftUp = false;\n      this.#onSelectEnd(\"main_toolbar\");\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    const {\n      activeElement\n    } = document;\n    for (const editor of this.#selectedEditors) {\n      if (editor.div.contains(activeElement)) {\n        this.#lastActiveElement = [editor, activeElement];\n        editor._focusEventsAllowed = false;\n        break;\n      }\n    }\n  }\n  focus() {\n    if (!this.#lastActiveElement) {\n      return;\n    }\n    const [lastEditor, lastActiveElement] = this.#lastActiveElement;\n    this.#lastActiveElement = null;\n    lastActiveElement.addEventListener(\"focusin\", () => {\n      lastEditor._focusEventsAllowed = true;\n    }, {\n      once: true\n    });\n    lastActiveElement.focus();\n  }\n  #addKeyboardManager() {\n    window.addEventListener(\"keydown\", this.#boundKeydown);\n    window.addEventListener(\"keyup\", this.#boundKeyup);\n  }\n  #removeKeyboardManager() {\n    window.removeEventListener(\"keydown\", this.#boundKeydown);\n    window.removeEventListener(\"keyup\", this.#boundKeyup);\n  }\n  #addCopyPasteListeners() {\n    document.addEventListener(\"copy\", this.#boundCopy);\n    document.addEventListener(\"cut\", this.#boundCut);\n    document.addEventListener(\"paste\", this.#boundPaste);\n  }\n  #removeCopyPasteListeners() {\n    document.removeEventListener(\"copy\", this.#boundCopy);\n    document.removeEventListener(\"cut\", this.#boundCut);\n    document.removeEventListener(\"paste\", this.#boundPaste);\n  }\n  addEditListeners() {\n    this.#addKeyboardManager();\n    this.#addCopyPasteListeners();\n  }\n  removeEditListeners() {\n    this.#removeKeyboardManager();\n    this.#removeCopyPasteListeners();\n  }\n  copy(event) {\n    event.preventDefault();\n    this.#activeEditor?.commitOrRemove();\n    if (!this.hasSelection) {\n      return;\n    }\n    const editors = [];\n    for (const editor of this.#selectedEditors) {\n      const serialized = editor.serialize(true);\n      if (serialized) {\n        editors.push(serialized);\n      }\n    }\n    if (editors.length === 0) {\n      return;\n    }\n    event.clipboardData.setData(\"application/pdfjs\", JSON.stringify(editors));\n  }\n  cut(event) {\n    this.copy(event);\n    this.delete();\n  }\n  paste(event) {\n    event.preventDefault();\n    const {\n      clipboardData\n    } = event;\n    for (const item of clipboardData.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          return;\n        }\n      }\n    }\n    let data = clipboardData.getData(\"application/pdfjs\");\n    if (!data) {\n      return;\n    }\n    try {\n      data = JSON.parse(data);\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n      return;\n    }\n    if (!Array.isArray(data)) {\n      return;\n    }\n    this.unselectAll();\n    const layer = this.currentLayer;\n    try {\n      const newEditors = [];\n      for (const editor of data) {\n        const deserializedEditor = layer.deserialize(editor);\n        if (!deserializedEditor) {\n          return;\n        }\n        newEditors.push(deserializedEditor);\n      }\n      const cmd = () => {\n        for (const editor of newEditors) {\n          this.#addEditorToLayer(editor);\n        }\n        this.#selectEditors(newEditors);\n      };\n      const undo = () => {\n        for (const editor of newEditors) {\n          editor.remove();\n        }\n      };\n      this.addCommands({\n        cmd,\n        undo,\n        mustExec: true\n      });\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n    }\n  }\n  keydown(event) {\n    if (!this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = true;\n    }\n    if (this.#mode !== AnnotationEditorType.NONE && !this.isEditorHandlingKeyboard) {\n      AnnotationEditorUIManager._keyboardManager.exec(this, event);\n    }\n  }\n  keyup(event) {\n    if (this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = false;\n      if (this.#highlightWhenShiftUp) {\n        this.#highlightWhenShiftUp = false;\n        this.#onSelectEnd(\"main_toolbar\");\n      }\n    }\n  }\n  onEditingAction({\n    name\n  }) {\n    switch (name) {\n      case \"undo\":\n      case \"redo\":\n      case \"delete\":\n      case \"selectAll\":\n        this[name]();\n        break;\n      case \"highlightSelection\":\n        this.highlightSelection(\"context_menu\");\n        break;\n    }\n  }\n  #dispatchUpdateStates(details) {\n    const hasChanged = Object.entries(details).some(([key, value]) => this.#previousStates[key] !== value);\n    if (hasChanged) {\n      this._eventBus.dispatch(\"annotationeditorstateschanged\", {\n        source: this,\n        details: Object.assign(this.#previousStates, details)\n      });\n      if (this.#mode === AnnotationEditorType.HIGHLIGHT && details.hasSelectedEditor === false) {\n        this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_FREE, true]]);\n      }\n    }\n  }\n  #dispatchUpdateUI(details) {\n    this._eventBus.dispatch(\"annotationeditorparamschanged\", {\n      source: this,\n      details\n    });\n  }\n  setEditingState(isEditing) {\n    if (isEditing) {\n      this.#addFocusManager();\n      this.#addCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: this.#mode !== AnnotationEditorType.NONE,\n        isEmpty: this.#isEmpty(),\n        hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n        hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n        hasSelectedEditor: false\n      });\n    } else {\n      this.#removeFocusManager();\n      this.#removeCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: false\n      });\n      this.disableUserSelect(false);\n    }\n  }\n  registerEditorTypes(types) {\n    if (this.#editorTypes) {\n      return;\n    }\n    this.#editorTypes = types;\n    for (const editorType of this.#editorTypes) {\n      this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n    }\n  }\n  getId() {\n    return this.#idManager.id;\n  }\n  get currentLayer() {\n    return this.#allLayers.get(this.#currentPageIndex);\n  }\n  getLayer(pageIndex) {\n    return this.#allLayers.get(pageIndex);\n  }\n  get currentPageIndex() {\n    return this.#currentPageIndex;\n  }\n  addLayer(layer) {\n    this.#allLayers.set(layer.pageIndex, layer);\n    if (this.#isEnabled) {\n      layer.enable();\n    } else {\n      layer.disable();\n    }\n  }\n  removeLayer(layer) {\n    this.#allLayers.delete(layer.pageIndex);\n  }\n  updateMode(mode, editId = null, isFromKeyboard = false) {\n    if (this.#mode === mode) {\n      return;\n    }\n    this.#mode = mode;\n    if (mode === AnnotationEditorType.NONE) {\n      this.setEditingState(false);\n      this.#disableAll();\n      return;\n    }\n    this.setEditingState(true);\n    this.#enableAll();\n    this.unselectAll();\n    for (const layer of this.#allLayers.values()) {\n      layer.updateMode(mode);\n    }\n    if (!editId && isFromKeyboard) {\n      this.addNewEditorFromKeyboard();\n      return;\n    }\n    if (!editId) {\n      return;\n    }\n    for (const editor of this.#allEditors.values()) {\n      if (editor.annotationElementId === editId) {\n        this.setSelected(editor);\n        editor.enterInEditMode();\n        break;\n      }\n    }\n  }\n  addNewEditorFromKeyboard() {\n    if (this.currentLayer.canCreateNewEmptyEditor()) {\n      this.currentLayer.addNewEditor();\n    }\n  }\n  updateToolbar(mode) {\n    if (mode === this.#mode) {\n      return;\n    }\n    this._eventBus.dispatch(\"switchannotationeditormode\", {\n      source: this,\n      mode\n    });\n  }\n  updateParams(type, value) {\n    if (!this.#editorTypes) {\n      return;\n    }\n    switch (type) {\n      case AnnotationEditorParamsType.CREATE:\n        this.currentLayer.addNewEditor();\n        return;\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        this.#mainHighlightColorPicker?.updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:\n        this._eventBus.dispatch(\"reporttelemetry\", {\n          source: this,\n          details: {\n            type: \"editing\",\n            data: {\n              type: \"highlight\",\n              action: \"toggle_visibility\"\n            }\n          }\n        });\n        (this.#showAllStates ||= new Map()).set(type, value);\n        this.showAllEditors(\"highlight\", value);\n        break;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.updateParams(type, value);\n    }\n    for (const editorType of this.#editorTypes) {\n      editorType.updateDefaultParams(type, value);\n    }\n  }\n  showAllEditors(type, visible, updateButton = false) {\n    for (const editor of this.#allEditors.values()) {\n      if (editor.editorType === type) {\n        editor.show(visible);\n      }\n    }\n    const state = this.#showAllStates?.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL) ?? true;\n    if (state !== visible) {\n      this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL, visible]]);\n    }\n  }\n  enableWaiting(mustWait = false) {\n    if (this.#isWaiting === mustWait) {\n      return;\n    }\n    this.#isWaiting = mustWait;\n    for (const layer of this.#allLayers.values()) {\n      if (mustWait) {\n        layer.disableClick();\n      } else {\n        layer.enableClick();\n      }\n      layer.div.classList.toggle(\"waiting\", mustWait);\n    }\n  }\n  #enableAll() {\n    if (!this.#isEnabled) {\n      this.#isEnabled = true;\n      for (const layer of this.#allLayers.values()) {\n        layer.enable();\n      }\n      for (const editor of this.#allEditors.values()) {\n        editor.enable();\n      }\n    }\n  }\n  #disableAll() {\n    this.unselectAll();\n    if (this.#isEnabled) {\n      this.#isEnabled = false;\n      for (const layer of this.#allLayers.values()) {\n        layer.disable();\n      }\n      for (const editor of this.#allEditors.values()) {\n        editor.disable();\n      }\n    }\n  }\n  getEditors(pageIndex) {\n    const editors = [];\n    for (const editor of this.#allEditors.values()) {\n      if (editor.pageIndex === pageIndex) {\n        editors.push(editor);\n      }\n    }\n    return editors;\n  }\n  getEditor(id) {\n    return this.#allEditors.get(id);\n  }\n  addEditor(editor) {\n    this.#allEditors.set(editor.id, editor);\n  }\n  removeEditor(editor) {\n    if (editor.div.contains(document.activeElement)) {\n      if (this.#focusMainContainerTimeoutId) {\n        clearTimeout(this.#focusMainContainerTimeoutId);\n      }\n      this.#focusMainContainerTimeoutId = setTimeout(() => {\n        this.focusMainContainer();\n        this.#focusMainContainerTimeoutId = null;\n      }, 0);\n    }\n    this.#allEditors.delete(editor.id);\n    this.unselect(editor);\n    if (!editor.annotationElementId || !this.#deletedAnnotationsElementIds.has(editor.annotationElementId)) {\n      this.#annotationStorage?.remove(editor.id);\n    }\n  }\n  addDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.add(editor.annotationElementId);\n    this.addChangedExistingAnnotation(editor);\n    editor.deleted = true;\n  }\n  isDeletedAnnotationElement(annotationElementId) {\n    return this.#deletedAnnotationsElementIds.has(annotationElementId);\n  }\n  removeDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.delete(editor.annotationElementId);\n    this.removeChangedExistingAnnotation(editor);\n    editor.deleted = false;\n  }\n  #addEditorToLayer(editor) {\n    const layer = this.#allLayers.get(editor.pageIndex);\n    if (layer) {\n      layer.addOrRebuild(editor);\n    } else {\n      this.addEditor(editor);\n      this.addToAnnotationStorage(editor);\n    }\n  }\n  setActiveEditor(editor) {\n    if (this.#activeEditor === editor) {\n      return;\n    }\n    this.#activeEditor = editor;\n    if (editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  get #lastSelectedEditor() {\n    let ed = null;\n    for (ed of this.#selectedEditors) {}\n    return ed;\n  }\n  updateUI(editor) {\n    if (this.#lastSelectedEditor === editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  toggleSelected(editor) {\n    if (this.#selectedEditors.has(editor)) {\n      this.#selectedEditors.delete(editor);\n      editor.unselect();\n      this.#dispatchUpdateStates({\n        hasSelectedEditor: this.hasSelection\n      });\n      return;\n    }\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  setSelected(editor) {\n    for (const ed of this.#selectedEditors) {\n      if (ed !== editor) {\n        ed.unselect();\n      }\n    }\n    this.#selectedEditors.clear();\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  isSelected(editor) {\n    return this.#selectedEditors.has(editor);\n  }\n  get firstSelectedEditor() {\n    return this.#selectedEditors.values().next().value;\n  }\n  unselect(editor) {\n    editor.unselect();\n    this.#selectedEditors.delete(editor);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection\n    });\n  }\n  get hasSelection() {\n    return this.#selectedEditors.size !== 0;\n  }\n  get isEnterHandled() {\n    return this.#selectedEditors.size === 1 && this.firstSelectedEditor.isEnterHandled;\n  }\n  undo() {\n    this.#commandManager.undo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n      hasSomethingToRedo: true,\n      isEmpty: this.#isEmpty()\n    });\n  }\n  redo() {\n    this.#commandManager.redo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n      isEmpty: this.#isEmpty()\n    });\n  }\n  addCommands(params) {\n    this.#commandManager.add(params);\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: false,\n      isEmpty: this.#isEmpty()\n    });\n  }\n  #isEmpty() {\n    if (this.#allEditors.size === 0) {\n      return true;\n    }\n    if (this.#allEditors.size === 1) {\n      for (const editor of this.#allEditors.values()) {\n        return editor.isEmpty();\n      }\n    }\n    return false;\n  }\n  delete() {\n    this.commitOrRemove();\n    if (!this.hasSelection) {\n      return;\n    }\n    const editors = [...this.#selectedEditors];\n    const cmd = () => {\n      for (const editor of editors) {\n        editor.remove();\n      }\n    };\n    const undo = () => {\n      for (const editor of editors) {\n        this.#addEditorToLayer(editor);\n      }\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: true\n    });\n  }\n  commitOrRemove() {\n    this.#activeEditor?.commitOrRemove();\n  }\n  hasSomethingToControl() {\n    return this.#activeEditor || this.hasSelection;\n  }\n  #selectEditors(editors) {\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    for (const editor of editors) {\n      if (editor.isEmpty()) {\n        continue;\n      }\n      this.#selectedEditors.add(editor);\n      editor.select();\n    }\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection\n    });\n  }\n  selectAll() {\n    for (const editor of this.#selectedEditors) {\n      editor.commit();\n    }\n    this.#selectEditors(this.#allEditors.values());\n  }\n  unselectAll() {\n    if (this.#activeEditor) {\n      this.#activeEditor.commitOrRemove();\n      if (this.#mode !== AnnotationEditorType.NONE) {\n        return;\n      }\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: false\n    });\n  }\n  translateSelectedEditors(x, y, noCommit = false) {\n    if (!noCommit) {\n      this.commitOrRemove();\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    this.#translation[0] += x;\n    this.#translation[1] += y;\n    const [totalX, totalY] = this.#translation;\n    const editors = [...this.#selectedEditors];\n    const TIME_TO_WAIT = 1000;\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n    }\n    this.#translationTimeoutId = setTimeout(() => {\n      this.#translationTimeoutId = null;\n      this.#translation[0] = this.#translation[1] = 0;\n      this.addCommands({\n        cmd: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(totalX, totalY);\n            }\n          }\n        },\n        undo: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(-totalX, -totalY);\n            }\n          }\n        },\n        mustExec: false\n      });\n    }, TIME_TO_WAIT);\n    for (const editor of editors) {\n      editor.translateInPage(x, y);\n    }\n  }\n  setUpDragSession() {\n    if (!this.hasSelection) {\n      return;\n    }\n    this.disableUserSelect(true);\n    this.#draggingEditors = new Map();\n    for (const editor of this.#selectedEditors) {\n      this.#draggingEditors.set(editor, {\n        savedX: editor.x,\n        savedY: editor.y,\n        savedPageIndex: editor.pageIndex,\n        newX: 0,\n        newY: 0,\n        newPageIndex: -1\n      });\n    }\n  }\n  endDragSession() {\n    if (!this.#draggingEditors) {\n      return false;\n    }\n    this.disableUserSelect(false);\n    const map = this.#draggingEditors;\n    this.#draggingEditors = null;\n    let mustBeAddedInUndoStack = false;\n    for (const [{\n      x,\n      y,\n      pageIndex\n    }, value] of map) {\n      value.newX = x;\n      value.newY = y;\n      value.newPageIndex = pageIndex;\n      mustBeAddedInUndoStack ||= x !== value.savedX || y !== value.savedY || pageIndex !== value.savedPageIndex;\n    }\n    if (!mustBeAddedInUndoStack) {\n      return false;\n    }\n    const move = (editor, x, y, pageIndex) => {\n      if (this.#allEditors.has(editor.id)) {\n        const parent = this.#allLayers.get(pageIndex);\n        if (parent) {\n          editor._setParentAndPosition(parent, x, y);\n        } else {\n          editor.pageIndex = pageIndex;\n          editor.x = x;\n          editor.y = y;\n        }\n      }\n    };\n    this.addCommands({\n      cmd: () => {\n        for (const [editor, {\n          newX,\n          newY,\n          newPageIndex\n        }] of map) {\n          move(editor, newX, newY, newPageIndex);\n        }\n      },\n      undo: () => {\n        for (const [editor, {\n          savedX,\n          savedY,\n          savedPageIndex\n        }] of map) {\n          move(editor, savedX, savedY, savedPageIndex);\n        }\n      },\n      mustExec: true\n    });\n    return true;\n  }\n  dragSelectedEditors(tx, ty) {\n    if (!this.#draggingEditors) {\n      return;\n    }\n    for (const editor of this.#draggingEditors.keys()) {\n      editor.drag(tx, ty);\n    }\n  }\n  rebuild(editor) {\n    if (editor.parent === null) {\n      const parent = this.getLayer(editor.pageIndex);\n      if (parent) {\n        parent.changeParent(editor);\n        parent.addOrRebuild(editor);\n      } else {\n        this.addEditor(editor);\n        this.addToAnnotationStorage(editor);\n        editor.rebuild();\n      }\n    } else {\n      editor.parent.addOrRebuild(editor);\n    }\n  }\n  get isEditorHandlingKeyboard() {\n    return this.getActive()?.shouldGetKeyboardEvents() || this.#selectedEditors.size === 1 && this.firstSelectedEditor.shouldGetKeyboardEvents();\n  }\n  isActive(editor) {\n    return this.#activeEditor === editor;\n  }\n  getActive() {\n    return this.#activeEditor;\n  }\n  getMode() {\n    return this.#mode;\n  }\n  get imageManager() {\n    return shadow(this, \"imageManager\", new ImageManager());\n  }\n  getSelectionBoxes(textLayer) {\n    if (!textLayer) {\n      return null;\n    }\n    const selection = document.getSelection();\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      if (!textLayer.contains(selection.getRangeAt(i).commonAncestorContainer)) {\n        return null;\n      }\n    }\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight\n    } = textLayer.getBoundingClientRect();\n    let rotator;\n    switch (textLayer.getAttribute(\"data-main-rotation\")) {\n      case \"90\":\n        rotator = (x, y, w, h) => ({\n          x: (y - layerY) / parentHeight,\n          y: 1 - (x + w - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth\n        });\n        break;\n      case \"180\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (x + w - layerX) / parentWidth,\n          y: 1 - (y + h - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight\n        });\n        break;\n      case \"270\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (y + h - layerY) / parentHeight,\n          y: (x - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth\n        });\n        break;\n      default:\n        rotator = (x, y, w, h) => ({\n          x: (x - layerX) / parentWidth,\n          y: (y - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight\n        });\n        break;\n    }\n    const boxes = [];\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      const range = selection.getRangeAt(i);\n      if (range.collapsed) {\n        continue;\n      }\n      for (const {\n        x,\n        y,\n        width,\n        height\n      } of range.getClientRects()) {\n        if (width === 0 || height === 0) {\n          continue;\n        }\n        boxes.push(rotator(x, y, width, height));\n      }\n    }\n    return boxes.length === 0 ? null : boxes;\n  }\n  addChangedExistingAnnotation({\n    annotationElementId,\n    id\n  }) {\n    (this.#changedExistingAnnotations ||= new Map()).set(annotationElementId, id);\n  }\n  removeChangedExistingAnnotation({\n    annotationElementId\n  }) {\n    this.#changedExistingAnnotations?.delete(annotationElementId);\n  }\n  renderAnnotationElement(annotation) {\n    const editorId = this.#changedExistingAnnotations?.get(annotation.data.id);\n    if (!editorId) {\n      return;\n    }\n    const editor = this.#annotationStorage.getRawValue(editorId);\n    if (!editor) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.NONE && !editor.hasBeenModified) {\n      return;\n    }\n    editor.renderAnnotationElement(annotation);\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/editor/alt_text.js\n\nclass AltText {\n  #altText = \"\";\n  #altTextDecorative = false;\n  #altTextButton = null;\n  #altTextTooltip = null;\n  #altTextTooltipTimeout = null;\n  #altTextWasFromKeyBoard = false;\n  #editor = null;\n  static _l10nPromise = null;\n  constructor(editor) {\n    this.#editor = editor;\n  }\n  static initialize(l10nPromise) {\n    AltText._l10nPromise ||= l10nPromise;\n  }\n  async render() {\n    const altText = this.#altTextButton = document.createElement(\"button\");\n    altText.className = \"altText\";\n    const msg = await AltText._l10nPromise.get(\"pdfjs-editor-alt-text-button-label\");\n    altText.textContent = msg;\n    altText.setAttribute(\"aria-label\", msg);\n    altText.tabIndex = \"0\";\n    altText.addEventListener(\"contextmenu\", noContextMenu);\n    altText.addEventListener(\"pointerdown\", event => event.stopPropagation());\n    const onClick = event => {\n      event.preventDefault();\n      this.#editor._uiManager.editAltText(this.#editor);\n    };\n    altText.addEventListener(\"click\", onClick, {\n      capture: true\n    });\n    altText.addEventListener(\"keydown\", event => {\n      if (event.target === altText && event.key === \"Enter\") {\n        this.#altTextWasFromKeyBoard = true;\n        onClick(event);\n      }\n    });\n    await this.#setState();\n    return altText;\n  }\n  finish() {\n    if (!this.#altTextButton) {\n      return;\n    }\n    this.#altTextButton.focus({\n      focusVisible: this.#altTextWasFromKeyBoard\n    });\n    this.#altTextWasFromKeyBoard = false;\n  }\n  isEmpty() {\n    return !this.#altText && !this.#altTextDecorative;\n  }\n  get data() {\n    return {\n      altText: this.#altText,\n      decorative: this.#altTextDecorative\n    };\n  }\n  set data({\n    altText,\n    decorative\n  }) {\n    if (this.#altText === altText && this.#altTextDecorative === decorative) {\n      return;\n    }\n    this.#altText = altText;\n    this.#altTextDecorative = decorative;\n    this.#setState();\n  }\n  toggle(enabled = false) {\n    if (!this.#altTextButton) {\n      return;\n    }\n    if (!enabled && this.#altTextTooltipTimeout) {\n      clearTimeout(this.#altTextTooltipTimeout);\n      this.#altTextTooltipTimeout = null;\n    }\n    this.#altTextButton.disabled = !enabled;\n  }\n  destroy() {\n    this.#altTextButton?.remove();\n    this.#altTextButton = null;\n    this.#altTextTooltip = null;\n  }\n  async #setState() {\n    const button = this.#altTextButton;\n    if (!button) {\n      return;\n    }\n    if (!this.#altText && !this.#altTextDecorative) {\n      button.classList.remove(\"done\");\n      this.#altTextTooltip?.remove();\n      return;\n    }\n    button.classList.add(\"done\");\n    AltText._l10nPromise.get(\"pdfjs-editor-alt-text-edit-button-label\").then(msg => {\n      button.setAttribute(\"aria-label\", msg);\n    });\n    let tooltip = this.#altTextTooltip;\n    if (!tooltip) {\n      this.#altTextTooltip = tooltip = document.createElement(\"span\");\n      tooltip.className = \"tooltip\";\n      tooltip.setAttribute(\"role\", \"tooltip\");\n      const id = tooltip.id = `alt-text-tooltip-${this.#editor.id}`;\n      button.setAttribute(\"aria-describedby\", id);\n      const DELAY_TO_SHOW_TOOLTIP = 100;\n      button.addEventListener(\"mouseenter\", () => {\n        this.#altTextTooltipTimeout = setTimeout(() => {\n          this.#altTextTooltipTimeout = null;\n          this.#altTextTooltip.classList.add(\"show\");\n          this.#editor._reportTelemetry({\n            action: \"alt_text_tooltip\"\n          });\n        }, DELAY_TO_SHOW_TOOLTIP);\n      });\n      button.addEventListener(\"mouseleave\", () => {\n        if (this.#altTextTooltipTimeout) {\n          clearTimeout(this.#altTextTooltipTimeout);\n          this.#altTextTooltipTimeout = null;\n        }\n        this.#altTextTooltip?.classList.remove(\"show\");\n      });\n    }\n    tooltip.innerText = this.#altTextDecorative ? await AltText._l10nPromise.get(\"pdfjs-editor-alt-text-decorative-tooltip\") : this.#altText;\n    if (!tooltip.parentNode) {\n      button.append(tooltip);\n    }\n    const element = this.#editor.getImageForAltText();\n    element?.setAttribute(\"aria-describedby\", tooltip.id);\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/editor/editor.js\n\n\n\n\n\nclass AnnotationEditor {\n  #allResizerDivs = null;\n  #altText = null;\n  #disabled = false;\n  #keepAspectRatio = false;\n  #resizersDiv = null;\n  #savedDimensions = null;\n  #boundFocusin = this.focusin.bind(this);\n  #boundFocusout = this.focusout.bind(this);\n  #editToolbar = null;\n  #focusedResizerName = \"\";\n  #hasBeenClicked = false;\n  #initialPosition = null;\n  #isEditing = false;\n  #isInEditMode = false;\n  #isResizerEnabledForKeyboard = false;\n  #moveInDOMTimeout = null;\n  #prevDragX = 0;\n  #prevDragY = 0;\n  #telemetryTimeouts = null;\n  _initialOptions = Object.create(null);\n  _isVisible = true;\n  _uiManager = null;\n  _focusEventsAllowed = true;\n  _l10nPromise = null;\n  #isDraggable = false;\n  #zIndex = AnnotationEditor._zIndex++;\n  static _borderLineWidth = -1;\n  static _colorManager = new ColorManager();\n  static _zIndex = 1;\n  static _telemetryTimeout = 1000;\n  static get _resizerKeyboardManager() {\n    const resize = AnnotationEditor.prototype._resizeWithKeyboard;\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(this, \"_resizerKeyboardManager\", new KeyboardManager([[[\"ArrowLeft\", \"mac+ArrowLeft\"], resize, {\n      args: [-small, 0]\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], resize, {\n      args: [-big, 0]\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], resize, {\n      args: [small, 0]\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], resize, {\n      args: [big, 0]\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], resize, {\n      args: [0, -small]\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], resize, {\n      args: [0, -big]\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], resize, {\n      args: [0, small]\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], resize, {\n      args: [0, big]\n    }], [[\"Escape\", \"mac+Escape\"], AnnotationEditor.prototype._stopResizingWithKeyboard]]));\n  }\n  constructor(parameters) {\n    if (this.constructor === AnnotationEditor) {\n      unreachable(\"Cannot initialize AnnotationEditor.\");\n    }\n    this.parent = parameters.parent;\n    this.id = parameters.id;\n    this.width = this.height = null;\n    this.pageIndex = parameters.parent.pageIndex;\n    this.name = parameters.name;\n    this.div = null;\n    this._uiManager = parameters.uiManager;\n    this.annotationElementId = null;\n    this._willKeepAspectRatio = false;\n    this._initialOptions.isCentered = parameters.isCentered;\n    this._structTreeParentId = null;\n    const {\n      rotation,\n      rawDims: {\n        pageWidth,\n        pageHeight,\n        pageX,\n        pageY\n      }\n    } = this.parent.viewport;\n    this.rotation = rotation;\n    this.pageRotation = (360 + rotation - this._uiManager.viewParameters.rotation) % 360;\n    this.pageDimensions = [pageWidth, pageHeight];\n    this.pageTranslation = [pageX, pageY];\n    const [width, height] = this.parentDimensions;\n    this.x = parameters.x / width;\n    this.y = parameters.y / height;\n    this.isAttachedToDOM = false;\n    this.deleted = false;\n  }\n  get editorType() {\n    return Object.getPrototypeOf(this).constructor._type;\n  }\n  static get _defaultLineColor() {\n    return shadow(this, \"_defaultLineColor\", this._colorManager.getHexCode(\"CanvasText\"));\n  }\n  static deleteAnnotationElement(editor) {\n    const fakeEditor = new FakeEditor({\n      id: editor.parent.getNextId(),\n      parent: editor.parent,\n      uiManager: editor._uiManager\n    });\n    fakeEditor.annotationElementId = editor.annotationElementId;\n    fakeEditor.deleted = true;\n    fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);\n  }\n  static initialize(l10n, _uiManager, options) {\n    AnnotationEditor._l10nPromise ||= new Map([\"pdfjs-editor-alt-text-button-label\", \"pdfjs-editor-alt-text-edit-button-label\", \"pdfjs-editor-alt-text-decorative-tooltip\", \"pdfjs-editor-resizer-label-topLeft\", \"pdfjs-editor-resizer-label-topMiddle\", \"pdfjs-editor-resizer-label-topRight\", \"pdfjs-editor-resizer-label-middleRight\", \"pdfjs-editor-resizer-label-bottomRight\", \"pdfjs-editor-resizer-label-bottomMiddle\", \"pdfjs-editor-resizer-label-bottomLeft\", \"pdfjs-editor-resizer-label-middleLeft\"].map(str => [str, l10n.get(str.replaceAll(/([A-Z])/g, c => `-${c.toLowerCase()}`))]));\n    if (options?.strings) {\n      for (const str of options.strings) {\n        AnnotationEditor._l10nPromise.set(str, l10n.get(str));\n      }\n    }\n    if (AnnotationEditor._borderLineWidth !== -1) {\n      return;\n    }\n    const style = getComputedStyle(document.documentElement);\n    AnnotationEditor._borderLineWidth = parseFloat(style.getPropertyValue(\"--outline-width\")) || 0;\n  }\n  static updateDefaultParams(_type, _value) {}\n  static get defaultPropertiesToUpdate() {\n    return [];\n  }\n  static isHandlingMimeForPasting(mime) {\n    return false;\n  }\n  static paste(item, parent) {\n    unreachable(\"Not implemented\");\n  }\n  get propertiesToUpdate() {\n    return [];\n  }\n  get _isDraggable() {\n    return this.#isDraggable;\n  }\n  set _isDraggable(value) {\n    this.#isDraggable = value;\n    this.div?.classList.toggle(\"draggable\", value);\n  }\n  get isEnterHandled() {\n    return true;\n  }\n  center() {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    switch (this.parentRotation) {\n      case 90:\n        this.x -= this.height * pageHeight / (pageWidth * 2);\n        this.y += this.width * pageWidth / (pageHeight * 2);\n        break;\n      case 180:\n        this.x += this.width / 2;\n        this.y += this.height / 2;\n        break;\n      case 270:\n        this.x += this.height * pageHeight / (pageWidth * 2);\n        this.y -= this.width * pageWidth / (pageHeight * 2);\n        break;\n      default:\n        this.x -= this.width / 2;\n        this.y -= this.height / 2;\n        break;\n    }\n    this.fixAndSetPosition();\n  }\n  addCommands(params) {\n    this._uiManager.addCommands(params);\n  }\n  get currentLayer() {\n    return this._uiManager.currentLayer;\n  }\n  setInBackground() {\n    this.div.style.zIndex = 0;\n  }\n  setInForeground() {\n    this.div.style.zIndex = this.#zIndex;\n  }\n  setParent(parent) {\n    if (parent !== null) {\n      this.pageIndex = parent.pageIndex;\n      this.pageDimensions = parent.pageDimensions;\n    } else {\n      this.#stopResizing();\n    }\n    this.parent = parent;\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.#hasBeenClicked) {\n      this.parent.setSelected(this);\n    } else {\n      this.#hasBeenClicked = false;\n    }\n  }\n  focusout(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      return;\n    }\n    const target = event.relatedTarget;\n    if (target?.closest(`#${this.id}`)) {\n      return;\n    }\n    event.preventDefault();\n    if (!this.parent?.isMultipleSelection) {\n      this.commitOrRemove();\n    }\n  }\n  commitOrRemove() {\n    if (this.isEmpty()) {\n      this.remove();\n    } else {\n      this.commit();\n    }\n  }\n  commit() {\n    this.addToAnnotationStorage();\n  }\n  addToAnnotationStorage() {\n    this._uiManager.addToAnnotationStorage(this);\n  }\n  setAt(x, y, tx, ty) {\n    const [width, height] = this.parentDimensions;\n    [tx, ty] = this.screenToPageTranslation(tx, ty);\n    this.x = (x + tx) / width;\n    this.y = (y + ty) / height;\n    this.fixAndSetPosition();\n  }\n  #translate([width, height], x, y) {\n    [x, y] = this.screenToPageTranslation(x, y);\n    this.x += x / width;\n    this.y += y / height;\n    this.fixAndSetPosition();\n  }\n  translate(x, y) {\n    this.#translate(this.parentDimensions, x, y);\n  }\n  translateInPage(x, y) {\n    this.#initialPosition ||= [this.x, this.y];\n    this.#translate(this.pageDimensions, x, y);\n    this.div.scrollIntoView({\n      block: \"nearest\"\n    });\n  }\n  drag(tx, ty) {\n    this.#initialPosition ||= [this.x, this.y];\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.x += tx / parentWidth;\n    this.y += ty / parentHeight;\n    if (this.parent && (this.x < 0 || this.x > 1 || this.y < 0 || this.y > 1)) {\n      const {\n        x,\n        y\n      } = this.div.getBoundingClientRect();\n      if (this.parent.findNewParent(this, x, y)) {\n        this.x -= Math.floor(this.x);\n        this.y -= Math.floor(this.y);\n      }\n    }\n    let {\n      x,\n      y\n    } = this;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    this.div.style.left = `${(100 * x).toFixed(2)}%`;\n    this.div.style.top = `${(100 * y).toFixed(2)}%`;\n    this.div.scrollIntoView({\n      block: \"nearest\"\n    });\n  }\n  get _hasBeenMoved() {\n    return !!this.#initialPosition && (this.#initialPosition[0] !== this.x || this.#initialPosition[1] !== this.y);\n  }\n  getBaseTranslation() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      _borderLineWidth\n    } = AnnotationEditor;\n    const x = _borderLineWidth / parentWidth;\n    const y = _borderLineWidth / parentHeight;\n    switch (this.rotation) {\n      case 90:\n        return [-x, y];\n      case 180:\n        return [x, y];\n      case 270:\n        return [x, -y];\n      default:\n        return [-x, -y];\n    }\n  }\n  get _mustFixPosition() {\n    return true;\n  }\n  fixAndSetPosition(rotation = this.rotation) {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    let {\n      x,\n      y,\n      width,\n      height\n    } = this;\n    width *= pageWidth;\n    height *= pageHeight;\n    x *= pageWidth;\n    y *= pageHeight;\n    if (this._mustFixPosition) {\n      switch (rotation) {\n        case 0:\n          x = Math.max(0, Math.min(pageWidth - width, x));\n          y = Math.max(0, Math.min(pageHeight - height, y));\n          break;\n        case 90:\n          x = Math.max(0, Math.min(pageWidth - height, x));\n          y = Math.min(pageHeight, Math.max(width, y));\n          break;\n        case 180:\n          x = Math.min(pageWidth, Math.max(width, x));\n          y = Math.min(pageHeight, Math.max(height, y));\n          break;\n        case 270:\n          x = Math.min(pageWidth, Math.max(height, x));\n          y = Math.max(0, Math.min(pageHeight - width, y));\n          break;\n      }\n    }\n    this.x = x /= pageWidth;\n    this.y = y /= pageHeight;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    const {\n      style\n    } = this.div;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n    this.moveInDOM();\n  }\n  static #rotatePoint(x, y, angle) {\n    switch (angle) {\n      case 90:\n        return [y, -x];\n      case 180:\n        return [-x, -y];\n      case 270:\n        return [-y, x];\n      default:\n        return [x, y];\n    }\n  }\n  screenToPageTranslation(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, this.parentRotation);\n  }\n  pageTranslationToScreen(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, 360 - this.parentRotation);\n  }\n  #getRotationMatrix(rotation) {\n    switch (rotation) {\n      case 90:\n        {\n          const [pageWidth, pageHeight] = this.pageDimensions;\n          return [0, -pageWidth / pageHeight, pageHeight / pageWidth, 0];\n        }\n      case 180:\n        return [-1, 0, 0, -1];\n      case 270:\n        {\n          const [pageWidth, pageHeight] = this.pageDimensions;\n          return [0, pageWidth / pageHeight, -pageHeight / pageWidth, 0];\n        }\n      default:\n        return [1, 0, 0, 1];\n    }\n  }\n  get parentScale() {\n    return this._uiManager.viewParameters.realScale;\n  }\n  get parentRotation() {\n    return (this._uiManager.viewParameters.rotation + this.pageRotation) % 360;\n  }\n  get parentDimensions() {\n    const {\n      parentScale,\n      pageDimensions: [pageWidth, pageHeight]\n    } = this;\n    const scaledWidth = pageWidth * parentScale;\n    const scaledHeight = pageHeight * parentScale;\n    return util_FeatureTest.isCSSRoundSupported ? [Math.round(scaledWidth), Math.round(scaledHeight)] : [scaledWidth, scaledHeight];\n  }\n  setDims(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.div.style.width = `${(100 * width / parentWidth).toFixed(2)}%`;\n    if (!this.#keepAspectRatio) {\n      this.div.style.height = `${(100 * height / parentHeight).toFixed(2)}%`;\n    }\n  }\n  fixDims() {\n    const {\n      style\n    } = this.div;\n    const {\n      height,\n      width\n    } = style;\n    const widthPercent = width.endsWith(\"%\");\n    const heightPercent = !this.#keepAspectRatio && height.endsWith(\"%\");\n    if (widthPercent && heightPercent) {\n      return;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (!widthPercent) {\n      style.width = `${(100 * parseFloat(width) / parentWidth).toFixed(2)}%`;\n    }\n    if (!this.#keepAspectRatio && !heightPercent) {\n      style.height = `${(100 * parseFloat(height) / parentHeight).toFixed(2)}%`;\n    }\n  }\n  getInitialTranslation() {\n    return [0, 0];\n  }\n  #createResizers() {\n    if (this.#resizersDiv) {\n      return;\n    }\n    this.#resizersDiv = document.createElement(\"div\");\n    this.#resizersDiv.classList.add(\"resizers\");\n    const classes = this._willKeepAspectRatio ? [\"topLeft\", \"topRight\", \"bottomRight\", \"bottomLeft\"] : [\"topLeft\", \"topMiddle\", \"topRight\", \"middleRight\", \"bottomRight\", \"bottomMiddle\", \"bottomLeft\", \"middleLeft\"];\n    for (const name of classes) {\n      const div = document.createElement(\"div\");\n      this.#resizersDiv.append(div);\n      div.classList.add(\"resizer\", name);\n      div.setAttribute(\"data-resizer-name\", name);\n      div.addEventListener(\"pointerdown\", this.#resizerPointerdown.bind(this, name));\n      div.addEventListener(\"contextmenu\", noContextMenu);\n      div.tabIndex = -1;\n    }\n    this.div.prepend(this.#resizersDiv);\n  }\n  #resizerPointerdown(name, event) {\n    event.preventDefault();\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    this.#altText?.toggle(false);\n    const boundResizerPointermove = this.#resizerPointermove.bind(this, name);\n    const savedDraggable = this._isDraggable;\n    this._isDraggable = false;\n    const pointerMoveOptions = {\n      passive: true,\n      capture: true\n    };\n    this.parent.togglePointerEvents(false);\n    window.addEventListener(\"pointermove\", boundResizerPointermove, pointerMoveOptions);\n    window.addEventListener(\"contextmenu\", noContextMenu);\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const savedParentCursor = this.parent.div.style.cursor;\n    const savedCursor = this.div.style.cursor;\n    this.div.style.cursor = this.parent.div.style.cursor = window.getComputedStyle(event.target).cursor;\n    const pointerUpCallback = () => {\n      this.parent.togglePointerEvents(true);\n      this.#altText?.toggle(true);\n      this._isDraggable = savedDraggable;\n      window.removeEventListener(\"pointerup\", pointerUpCallback);\n      window.removeEventListener(\"blur\", pointerUpCallback);\n      window.removeEventListener(\"pointermove\", boundResizerPointermove, pointerMoveOptions);\n      window.removeEventListener(\"contextmenu\", noContextMenu);\n      this.parent.div.style.cursor = savedParentCursor;\n      this.div.style.cursor = savedCursor;\n      this.#addResizeToUndoStack(savedX, savedY, savedWidth, savedHeight);\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback);\n    window.addEventListener(\"blur\", pointerUpCallback);\n  }\n  #addResizeToUndoStack(savedX, savedY, savedWidth, savedHeight) {\n    const newX = this.x;\n    const newY = this.y;\n    const newWidth = this.width;\n    const newHeight = this.height;\n    if (newX === savedX && newY === savedY && newWidth === savedWidth && newHeight === savedHeight) {\n      return;\n    }\n    this.addCommands({\n      cmd: () => {\n        this.width = newWidth;\n        this.height = newHeight;\n        this.x = newX;\n        this.y = newY;\n        const [parentWidth, parentHeight] = this.parentDimensions;\n        this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n        this.fixAndSetPosition();\n      },\n      undo: () => {\n        this.width = savedWidth;\n        this.height = savedHeight;\n        this.x = savedX;\n        this.y = savedY;\n        const [parentWidth, parentHeight] = this.parentDimensions;\n        this.setDims(parentWidth * savedWidth, parentHeight * savedHeight);\n        this.fixAndSetPosition();\n      },\n      mustExec: true\n    });\n  }\n  #resizerPointermove(name, event) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n    const round = x => Math.round(x * 10000) / 10000;\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [rotationMatrix[0] * x + rotationMatrix[2] * y, rotationMatrix[1] * x + rotationMatrix[3] * y];\n    const invRotationMatrix = this.#getRotationMatrix(360 - this.rotation);\n    const invTransf = (x, y) => [invRotationMatrix[0] * x + invRotationMatrix[2] * y, invRotationMatrix[1] * x + invRotationMatrix[3] * y];\n    let getPoint;\n    let getOpposite;\n    let isDiagonal = false;\n    let isHorizontal = false;\n    switch (name) {\n      case \"topLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, 0];\n        getOpposite = (w, h) => [w, h];\n        break;\n      case \"topMiddle\":\n        getPoint = (w, h) => [w / 2, 0];\n        getOpposite = (w, h) => [w / 2, h];\n        break;\n      case \"topRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, 0];\n        getOpposite = (w, h) => [0, h];\n        break;\n      case \"middleRight\":\n        isHorizontal = true;\n        getPoint = (w, h) => [w, h / 2];\n        getOpposite = (w, h) => [0, h / 2];\n        break;\n      case \"bottomRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, h];\n        getOpposite = (w, h) => [0, 0];\n        break;\n      case \"bottomMiddle\":\n        getPoint = (w, h) => [w / 2, h];\n        getOpposite = (w, h) => [w / 2, 0];\n        break;\n      case \"bottomLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, h];\n        getOpposite = (w, h) => [w, 0];\n        break;\n      case \"middleLeft\":\n        isHorizontal = true;\n        getPoint = (w, h) => [0, h / 2];\n        getOpposite = (w, h) => [w, h / 2];\n        break;\n    }\n    const point = getPoint(savedWidth, savedHeight);\n    const oppositePoint = getOpposite(savedWidth, savedHeight);\n    let transfOppositePoint = transf(...oppositePoint);\n    const oppositeX = round(savedX + transfOppositePoint[0]);\n    const oppositeY = round(savedY + transfOppositePoint[1]);\n    let ratioX = 1;\n    let ratioY = 1;\n    let [deltaX, deltaY] = this.screenToPageTranslation(event.movementX, event.movementY);\n    [deltaX, deltaY] = invTransf(deltaX / parentWidth, deltaY / parentHeight);\n    if (isDiagonal) {\n      const oldDiag = Math.hypot(savedWidth, savedHeight);\n      ratioX = ratioY = Math.max(Math.min(Math.hypot(oppositePoint[0] - point[0] - deltaX, oppositePoint[1] - point[1] - deltaY) / oldDiag, 1 / savedWidth, 1 / savedHeight), minWidth / savedWidth, minHeight / savedHeight);\n    } else if (isHorizontal) {\n      ratioX = Math.max(minWidth, Math.min(1, Math.abs(oppositePoint[0] - point[0] - deltaX))) / savedWidth;\n    } else {\n      ratioY = Math.max(minHeight, Math.min(1, Math.abs(oppositePoint[1] - point[1] - deltaY))) / savedHeight;\n    }\n    const newWidth = round(savedWidth * ratioX);\n    const newHeight = round(savedHeight * ratioY);\n    transfOppositePoint = transf(...getOpposite(newWidth, newHeight));\n    const newX = oppositeX - transfOppositePoint[0];\n    const newY = oppositeY - transfOppositePoint[1];\n    this.width = newWidth;\n    this.height = newHeight;\n    this.x = newX;\n    this.y = newY;\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n  }\n  altTextFinish() {\n    this.#altText?.finish();\n  }\n  async addEditToolbar() {\n    if (this.#editToolbar || this.#isInEditMode) {\n      return this.#editToolbar;\n    }\n    this.#editToolbar = new EditorToolbar(this);\n    this.div.append(this.#editToolbar.render());\n    if (this.#altText) {\n      this.#editToolbar.addAltTextButton(await this.#altText.render());\n    }\n    return this.#editToolbar;\n  }\n  removeEditToolbar() {\n    if (!this.#editToolbar) {\n      return;\n    }\n    this.#editToolbar.remove();\n    this.#editToolbar = null;\n    this.#altText?.destroy();\n  }\n  getClientDimensions() {\n    return this.div.getBoundingClientRect();\n  }\n  async addAltTextButton() {\n    if (this.#altText) {\n      return;\n    }\n    AltText.initialize(AnnotationEditor._l10nPromise);\n    this.#altText = new AltText(this);\n    await this.addEditToolbar();\n  }\n  get altTextData() {\n    return this.#altText?.data;\n  }\n  set altTextData(data) {\n    if (!this.#altText) {\n      return;\n    }\n    this.#altText.data = data;\n  }\n  hasAltText() {\n    return !this.#altText?.isEmpty();\n  }\n  render() {\n    this.div = document.createElement(\"div\");\n    this.div.setAttribute(\"data-editor-rotation\", (360 - this.rotation) % 360);\n    this.div.className = this.name;\n    this.div.setAttribute(\"id\", this.id);\n    this.div.tabIndex = this.#disabled ? -1 : 0;\n    if (!this._isVisible) {\n      this.div.classList.add(\"hidden\");\n    }\n    this.setInForeground();\n    this.div.addEventListener(\"focusin\", this.#boundFocusin);\n    this.div.addEventListener(\"focusout\", this.#boundFocusout);\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (this.parentRotation % 180 !== 0) {\n      this.div.style.maxWidth = `${(100 * parentHeight / parentWidth).toFixed(2)}%`;\n      this.div.style.maxHeight = `${(100 * parentWidth / parentHeight).toFixed(2)}%`;\n    }\n    const [tx, ty] = this.getInitialTranslation();\n    this.translate(tx, ty);\n    bindEvents(this, this.div, [\"pointerdown\"]);\n    return this.div;\n  }\n  pointerdown(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      event.preventDefault();\n      return;\n    }\n    this.#hasBeenClicked = true;\n    if (this._isDraggable) {\n      this.#setUpDragSession(event);\n      return;\n    }\n    this.#selectOnPointerEvent(event);\n  }\n  #selectOnPointerEvent(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.ctrlKey && !isMac || event.shiftKey || event.metaKey && isMac) {\n      this.parent.toggleSelected(this);\n    } else {\n      this.parent.setSelected(this);\n    }\n  }\n  #setUpDragSession(event) {\n    const isSelected = this._uiManager.isSelected(this);\n    this._uiManager.setUpDragSession();\n    let pointerMoveOptions, pointerMoveCallback;\n    if (isSelected) {\n      this.div.classList.add(\"moving\");\n      pointerMoveOptions = {\n        passive: true,\n        capture: true\n      };\n      this.#prevDragX = event.clientX;\n      this.#prevDragY = event.clientY;\n      pointerMoveCallback = e => {\n        const {\n          clientX: x,\n          clientY: y\n        } = e;\n        const [tx, ty] = this.screenToPageTranslation(x - this.#prevDragX, y - this.#prevDragY);\n        this.#prevDragX = x;\n        this.#prevDragY = y;\n        this._uiManager.dragSelectedEditors(tx, ty);\n      };\n      window.addEventListener(\"pointermove\", pointerMoveCallback, pointerMoveOptions);\n    }\n    const pointerUpCallback = () => {\n      window.removeEventListener(\"pointerup\", pointerUpCallback);\n      window.removeEventListener(\"blur\", pointerUpCallback);\n      if (isSelected) {\n        this.div.classList.remove(\"moving\");\n        window.removeEventListener(\"pointermove\", pointerMoveCallback, pointerMoveOptions);\n      }\n      this.#hasBeenClicked = false;\n      if (!this._uiManager.endDragSession()) {\n        this.#selectOnPointerEvent(event);\n      }\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback);\n    window.addEventListener(\"blur\", pointerUpCallback);\n  }\n  moveInDOM() {\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n    }\n    this.#moveInDOMTimeout = setTimeout(() => {\n      this.#moveInDOMTimeout = null;\n      this.parent?.moveEditorInDOM(this);\n    }, 0);\n  }\n  _setParentAndPosition(parent, x, y) {\n    parent.changeParent(this);\n    this.x = x;\n    this.y = y;\n    this.fixAndSetPosition();\n  }\n  getRect(tx, ty, rotation = this.rotation) {\n    const scale = this.parentScale;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const shiftX = tx / scale;\n    const shiftY = ty / scale;\n    const x = this.x * pageWidth;\n    const y = this.y * pageHeight;\n    const width = this.width * pageWidth;\n    const height = this.height * pageHeight;\n    switch (rotation) {\n      case 0:\n        return [x + shiftX + pageX, pageHeight - y - shiftY - height + pageY, x + shiftX + width + pageX, pageHeight - y - shiftY + pageY];\n      case 90:\n        return [x + shiftY + pageX, pageHeight - y + shiftX + pageY, x + shiftY + height + pageX, pageHeight - y + shiftX + width + pageY];\n      case 180:\n        return [x - shiftX - width + pageX, pageHeight - y + shiftY + pageY, x - shiftX + pageX, pageHeight - y + shiftY + height + pageY];\n      case 270:\n        return [x - shiftY - height + pageX, pageHeight - y - shiftX - width + pageY, x - shiftY + pageX, pageHeight - y - shiftX + pageY];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n  getRectInCurrentCoords(rect, pageHeight) {\n    const [x1, y1, x2, y2] = rect;\n    const width = x2 - x1;\n    const height = y2 - y1;\n    switch (this.rotation) {\n      case 0:\n        return [x1, pageHeight - y2, width, height];\n      case 90:\n        return [x1, pageHeight - y1, height, width];\n      case 180:\n        return [x2, pageHeight - y1, width, height];\n      case 270:\n        return [x2, pageHeight - y2, height, width];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n  onceAdded() {}\n  isEmpty() {\n    return false;\n  }\n  enableEditMode() {\n    this.#isInEditMode = true;\n  }\n  disableEditMode() {\n    this.#isInEditMode = false;\n  }\n  isInEditMode() {\n    return this.#isInEditMode;\n  }\n  shouldGetKeyboardEvents() {\n    return this.#isResizerEnabledForKeyboard;\n  }\n  needsToBeRebuilt() {\n    return this.div && !this.isAttachedToDOM;\n  }\n  rebuild() {\n    this.div?.addEventListener(\"focusin\", this.#boundFocusin);\n    this.div?.addEventListener(\"focusout\", this.#boundFocusout);\n  }\n  rotate(_angle) {}\n  serialize(isForCopying = false, context = null) {\n    unreachable(\"An editor must be serializable\");\n  }\n  static deserialize(data, parent, uiManager) {\n    const editor = new this.prototype.constructor({\n      parent,\n      id: parent.getNextId(),\n      uiManager\n    });\n    editor.rotation = data.rotation;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [x, y, width, height] = editor.getRectInCurrentCoords(data.rect, pageHeight);\n    editor.x = x / pageWidth;\n    editor.y = y / pageHeight;\n    editor.width = width / pageWidth;\n    editor.height = height / pageHeight;\n    return editor;\n  }\n  get hasBeenModified() {\n    return !!this.annotationElementId && (this.deleted || this.serialize() !== null);\n  }\n  remove() {\n    this.div.removeEventListener(\"focusin\", this.#boundFocusin);\n    this.div.removeEventListener(\"focusout\", this.#boundFocusout);\n    if (!this.isEmpty()) {\n      this.commit();\n    }\n    if (this.parent) {\n      this.parent.remove(this);\n    } else {\n      this._uiManager.removeEditor(this);\n    }\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n      this.#moveInDOMTimeout = null;\n    }\n    this.#stopResizing();\n    this.removeEditToolbar();\n    if (this.#telemetryTimeouts) {\n      for (const timeout of this.#telemetryTimeouts.values()) {\n        clearTimeout(timeout);\n      }\n      this.#telemetryTimeouts = null;\n    }\n    this.parent = null;\n  }\n  get isResizable() {\n    return false;\n  }\n  makeResizable() {\n    if (this.isResizable) {\n      this.#createResizers();\n      this.#resizersDiv.classList.remove(\"hidden\");\n      bindEvents(this, this.div, [\"keydown\"]);\n    }\n  }\n  get toolbarPosition() {\n    return null;\n  }\n  keydown(event) {\n    if (!this.isResizable || event.target !== this.div || event.key !== \"Enter\") {\n      return;\n    }\n    this._uiManager.setSelected(this);\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    const children = this.#resizersDiv.children;\n    if (!this.#allResizerDivs) {\n      this.#allResizerDivs = Array.from(children);\n      const boundResizerKeydown = this.#resizerKeydown.bind(this);\n      const boundResizerBlur = this.#resizerBlur.bind(this);\n      for (const div of this.#allResizerDivs) {\n        const name = div.getAttribute(\"data-resizer-name\");\n        div.setAttribute(\"role\", \"spinbutton\");\n        div.addEventListener(\"keydown\", boundResizerKeydown);\n        div.addEventListener(\"blur\", boundResizerBlur);\n        div.addEventListener(\"focus\", this.#resizerFocus.bind(this, name));\n        AnnotationEditor._l10nPromise.get(`pdfjs-editor-resizer-label-${name}`).then(msg => div.setAttribute(\"aria-label\", msg));\n      }\n    }\n    const first = this.#allResizerDivs[0];\n    let firstPosition = 0;\n    for (const div of children) {\n      if (div === first) {\n        break;\n      }\n      firstPosition++;\n    }\n    const nextFirstPosition = (360 - this.rotation + this.parentRotation) % 360 / 90 * (this.#allResizerDivs.length / 4);\n    if (nextFirstPosition !== firstPosition) {\n      if (nextFirstPosition < firstPosition) {\n        for (let i = 0; i < firstPosition - nextFirstPosition; i++) {\n          this.#resizersDiv.append(this.#resizersDiv.firstChild);\n        }\n      } else if (nextFirstPosition > firstPosition) {\n        for (let i = 0; i < nextFirstPosition - firstPosition; i++) {\n          this.#resizersDiv.firstChild.before(this.#resizersDiv.lastChild);\n        }\n      }\n      let i = 0;\n      for (const child of children) {\n        const div = this.#allResizerDivs[i++];\n        const name = div.getAttribute(\"data-resizer-name\");\n        AnnotationEditor._l10nPromise.get(`pdfjs-editor-resizer-label-${name}`).then(msg => child.setAttribute(\"aria-label\", msg));\n      }\n    }\n    this.#setResizerTabIndex(0);\n    this.#isResizerEnabledForKeyboard = true;\n    this.#resizersDiv.firstChild.focus({\n      focusVisible: true\n    });\n    event.preventDefault();\n    event.stopImmediatePropagation();\n  }\n  #resizerKeydown(event) {\n    AnnotationEditor._resizerKeyboardManager.exec(this, event);\n  }\n  #resizerBlur(event) {\n    if (this.#isResizerEnabledForKeyboard && event.relatedTarget?.parentNode !== this.#resizersDiv) {\n      this.#stopResizing();\n    }\n  }\n  #resizerFocus(name) {\n    this.#focusedResizerName = this.#isResizerEnabledForKeyboard ? name : \"\";\n  }\n  #setResizerTabIndex(value) {\n    if (!this.#allResizerDivs) {\n      return;\n    }\n    for (const div of this.#allResizerDivs) {\n      div.tabIndex = value;\n    }\n  }\n  _resizeWithKeyboard(x, y) {\n    if (!this.#isResizerEnabledForKeyboard) {\n      return;\n    }\n    this.#resizerPointermove(this.#focusedResizerName, {\n      movementX: x,\n      movementY: y\n    });\n  }\n  #stopResizing() {\n    this.#isResizerEnabledForKeyboard = false;\n    this.#setResizerTabIndex(-1);\n    if (this.#savedDimensions) {\n      const {\n        savedX,\n        savedY,\n        savedWidth,\n        savedHeight\n      } = this.#savedDimensions;\n      this.#addResizeToUndoStack(savedX, savedY, savedWidth, savedHeight);\n      this.#savedDimensions = null;\n    }\n  }\n  _stopResizingWithKeyboard() {\n    this.#stopResizing();\n    this.div.focus();\n  }\n  select() {\n    this.makeResizable();\n    this.div?.classList.add(\"selectedEditor\");\n    if (!this.#editToolbar) {\n      this.addEditToolbar().then(() => {\n        if (this.div?.classList.contains(\"selectedEditor\")) {\n          this.#editToolbar?.show();\n        }\n      });\n      return;\n    }\n    this.#editToolbar?.show();\n  }\n  unselect() {\n    this.#resizersDiv?.classList.add(\"hidden\");\n    this.div?.classList.remove(\"selectedEditor\");\n    if (this.div?.contains(document.activeElement)) {\n      this._uiManager.currentLayer.div.focus({\n        preventScroll: true\n      });\n    }\n    this.#editToolbar?.hide();\n  }\n  updateParams(type, value) {}\n  disableEditing() {}\n  enableEditing() {}\n  enterInEditMode() {}\n  getImageForAltText() {\n    return null;\n  }\n  get contentDiv() {\n    return this.div;\n  }\n  get isEditing() {\n    return this.#isEditing;\n  }\n  set isEditing(value) {\n    this.#isEditing = value;\n    if (!this.parent) {\n      return;\n    }\n    if (value) {\n      this.parent.setSelected(this);\n      this.parent.setActiveEditor(this);\n    } else {\n      this.parent.setActiveEditor(null);\n    }\n  }\n  setAspectRatio(width, height) {\n    this.#keepAspectRatio = true;\n    const aspectRatio = width / height;\n    const {\n      style\n    } = this.div;\n    style.aspectRatio = aspectRatio;\n    style.height = \"auto\";\n  }\n  static get MIN_SIZE() {\n    return 16;\n  }\n  static canCreateNewEmptyEditor() {\n    return true;\n  }\n  get telemetryInitialData() {\n    return {\n      action: \"added\"\n    };\n  }\n  get telemetryFinalData() {\n    return null;\n  }\n  _reportTelemetry(data, mustWait = false) {\n    if (mustWait) {\n      this.#telemetryTimeouts ||= new Map();\n      const {\n        action\n      } = data;\n      let timeout = this.#telemetryTimeouts.get(action);\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n      timeout = setTimeout(() => {\n        this._reportTelemetry(data);\n        this.#telemetryTimeouts.delete(action);\n        if (this.#telemetryTimeouts.size === 0) {\n          this.#telemetryTimeouts = null;\n        }\n      }, AnnotationEditor._telemetryTimeout);\n      this.#telemetryTimeouts.set(action, timeout);\n      return;\n    }\n    data.type ||= this.editorType;\n    this._uiManager._eventBus.dispatch(\"reporttelemetry\", {\n      source: this,\n      details: {\n        type: \"editing\",\n        data\n      }\n    });\n  }\n  show(visible = this._isVisible) {\n    this.div.classList.toggle(\"hidden\", !visible);\n    this._isVisible = visible;\n  }\n  enable() {\n    if (this.div) {\n      this.div.tabIndex = 0;\n    }\n    this.#disabled = false;\n  }\n  disable() {\n    if (this.div) {\n      this.div.tabIndex = -1;\n    }\n    this.#disabled = true;\n  }\n  renderAnnotationElement(annotation) {\n    let content = annotation.container.querySelector(\".annotationContent\");\n    if (!content) {\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      annotation.container.prepend(content);\n    } else if (content.nodeName === \"CANVAS\") {\n      const canvas = content;\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      canvas.before(content);\n    }\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    const {\n      firstChild\n    } = annotation.container;\n    if (firstChild.nodeName === \"DIV\" && firstChild.classList.contains(\"annotationContent\")) {\n      firstChild.remove();\n    }\n  }\n}\nclass FakeEditor extends AnnotationEditor {\n  constructor(params) {\n    super(params);\n    this.annotationElementId = params.annotationElementId;\n    this.deleted = true;\n  }\n  serialize() {\n    return {\n      id: this.annotationElementId,\n      deleted: true,\n      pageIndex: this.pageIndex\n    };\n  }\n}\n\n;// CONCATENATED MODULE: ./src/shared/murmurhash3.js\nconst SEED = 0xc3d2e1f0;\nconst MASK_HIGH = 0xffff0000;\nconst MASK_LOW = 0xffff;\nclass MurmurHash3_64 {\n  constructor(seed) {\n    this.h1 = seed ? seed & 0xffffffff : SEED;\n    this.h2 = seed ? seed & 0xffffffff : SEED;\n  }\n  update(input) {\n    let data, length;\n    if (typeof input === \"string\") {\n      data = new Uint8Array(input.length * 2);\n      length = 0;\n      for (let i = 0, ii = input.length; i < ii; i++) {\n        const code = input.charCodeAt(i);\n        if (code <= 0xff) {\n          data[length++] = code;\n        } else {\n          data[length++] = code >>> 8;\n          data[length++] = code & 0xff;\n        }\n      }\n    } else if (ArrayBuffer.isView(input)) {\n      data = input.slice();\n      length = data.byteLength;\n    } else {\n      throw new Error(\"Invalid data format, must be a string or TypedArray.\");\n    }\n    const blockCounts = length >> 2;\n    const tailLength = length - blockCounts * 4;\n    const dataUint32 = new Uint32Array(data.buffer, 0, blockCounts);\n    let k1 = 0,\n      k2 = 0;\n    let h1 = this.h1,\n      h2 = this.h2;\n    const C1 = 0xcc9e2d51,\n      C2 = 0x1b873593;\n    const C1_LOW = C1 & MASK_LOW,\n      C2_LOW = C2 & MASK_LOW;\n    for (let i = 0; i < blockCounts; i++) {\n      if (i & 1) {\n        k1 = dataUint32[i];\n        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n        h1 ^= k1;\n        h1 = h1 << 13 | h1 >>> 19;\n        h1 = h1 * 5 + 0xe6546b64;\n      } else {\n        k2 = dataUint32[i];\n        k2 = k2 * C1 & MASK_HIGH | k2 * C1_LOW & MASK_LOW;\n        k2 = k2 << 15 | k2 >>> 17;\n        k2 = k2 * C2 & MASK_HIGH | k2 * C2_LOW & MASK_LOW;\n        h2 ^= k2;\n        h2 = h2 << 13 | h2 >>> 19;\n        h2 = h2 * 5 + 0xe6546b64;\n      }\n    }\n    k1 = 0;\n    switch (tailLength) {\n      case 3:\n        k1 ^= data[blockCounts * 4 + 2] << 16;\n      case 2:\n        k1 ^= data[blockCounts * 4 + 1] << 8;\n      case 1:\n        k1 ^= data[blockCounts * 4];\n        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n        if (blockCounts & 1) {\n          h1 ^= k1;\n        } else {\n          h2 ^= k1;\n        }\n    }\n    this.h1 = h1;\n    this.h2 = h2;\n  }\n  hexdigest() {\n    let h1 = this.h1,\n      h2 = this.h2;\n    h1 ^= h2 >>> 1;\n    h1 = h1 * 0xed558ccd & MASK_HIGH | h1 * 0x8ccd & MASK_LOW;\n    h2 = h2 * 0xff51afd7 & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xafd7ed55 & MASK_HIGH) >>> 16;\n    h1 ^= h2 >>> 1;\n    h1 = h1 * 0x1a85ec53 & MASK_HIGH | h1 * 0xec53 & MASK_LOW;\n    h2 = h2 * 0xc4ceb9fe & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xb9fe1a85 & MASK_HIGH) >>> 16;\n    h1 ^= h2 >>> 1;\n    return (h1 >>> 0).toString(16).padStart(8, \"0\") + (h2 >>> 0).toString(16).padStart(8, \"0\");\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/annotation_storage.js\n\n\n\nconst SerializableEmpty = Object.freeze({\n  map: null,\n  hash: \"\",\n  transfer: undefined\n});\nclass AnnotationStorage {\n  #modified = false;\n  #storage = new Map();\n  constructor() {\n    this.onSetModified = null;\n    this.onResetModified = null;\n    this.onAnnotationEditor = null;\n  }\n  getValue(key, defaultValue) {\n    const value = this.#storage.get(key);\n    if (value === undefined) {\n      return defaultValue;\n    }\n    return Object.assign(defaultValue, value);\n  }\n  getRawValue(key) {\n    return this.#storage.get(key);\n  }\n  remove(key) {\n    this.#storage.delete(key);\n    if (this.#storage.size === 0) {\n      this.resetModified();\n    }\n    if (typeof this.onAnnotationEditor === \"function\") {\n      for (const value of this.#storage.values()) {\n        if (value instanceof AnnotationEditor) {\n          return;\n        }\n      }\n      this.onAnnotationEditor(null);\n    }\n  }\n  setValue(key, value) {\n    const obj = this.#storage.get(key);\n    let modified = false;\n    if (obj !== undefined) {\n      for (const [entry, val] of Object.entries(value)) {\n        if (obj[entry] !== val) {\n          modified = true;\n          obj[entry] = val;\n        }\n      }\n    } else {\n      modified = true;\n      this.#storage.set(key, value);\n    }\n    if (modified) {\n      this.#setModified();\n    }\n    if (value instanceof AnnotationEditor && typeof this.onAnnotationEditor === \"function\") {\n      this.onAnnotationEditor(value.constructor._type);\n    }\n  }\n  has(key) {\n    return this.#storage.has(key);\n  }\n  getAll() {\n    return this.#storage.size > 0 ? objectFromMap(this.#storage) : null;\n  }\n  setAll(obj) {\n    for (const [key, val] of Object.entries(obj)) {\n      this.setValue(key, val);\n    }\n  }\n  get size() {\n    return this.#storage.size;\n  }\n  #setModified() {\n    if (!this.#modified) {\n      this.#modified = true;\n      if (typeof this.onSetModified === \"function\") {\n        this.onSetModified();\n      }\n    }\n  }\n  resetModified() {\n    if (this.#modified) {\n      this.#modified = false;\n      if (typeof this.onResetModified === \"function\") {\n        this.onResetModified();\n      }\n    }\n  }\n  get print() {\n    return new PrintAnnotationStorage(this);\n  }\n  get serializable() {\n    if (this.#storage.size === 0) {\n      return SerializableEmpty;\n    }\n    const map = new Map(),\n      hash = new MurmurHash3_64(),\n      transfer = [];\n    const context = Object.create(null);\n    let hasBitmap = false;\n    for (const [key, val] of this.#storage) {\n      const serialized = val instanceof AnnotationEditor ? val.serialize(false, context) : val;\n      if (serialized) {\n        map.set(key, serialized);\n        hash.update(`${key}:${JSON.stringify(serialized)}`);\n        hasBitmap ||= !!serialized.bitmap;\n      }\n    }\n    if (hasBitmap) {\n      for (const value of map.values()) {\n        if (value.bitmap) {\n          transfer.push(value.bitmap);\n        }\n      }\n    }\n    return map.size > 0 ? {\n      map,\n      hash: hash.hexdigest(),\n      transfer\n    } : SerializableEmpty;\n  }\n  get editorStats() {\n    let stats = null;\n    const typeToEditor = new Map();\n    for (const value of this.#storage.values()) {\n      if (!(value instanceof AnnotationEditor)) {\n        continue;\n      }\n      const editorStats = value.telemetryFinalData;\n      if (!editorStats) {\n        continue;\n      }\n      const {\n        type\n      } = editorStats;\n      if (!typeToEditor.has(type)) {\n        typeToEditor.set(type, Object.getPrototypeOf(value).constructor);\n      }\n      stats ||= Object.create(null);\n      const map = stats[type] ||= new Map();\n      for (const [key, val] of Object.entries(editorStats)) {\n        if (key === \"type\") {\n          continue;\n        }\n        let counters = map.get(key);\n        if (!counters) {\n          counters = new Map();\n          map.set(key, counters);\n        }\n        const count = counters.get(val) ?? 0;\n        counters.set(val, count + 1);\n      }\n    }\n    for (const [type, editor] of typeToEditor) {\n      stats[type] = editor.computeTelemetryFinalData(stats[type]);\n    }\n    return stats;\n  }\n}\nclass PrintAnnotationStorage extends AnnotationStorage {\n  #serializable;\n  constructor(parent) {\n    super();\n    const {\n      map,\n      hash,\n      transfer\n    } = parent.serializable;\n    const clone = structuredClone(map, transfer ? {\n      transfer\n    } : null);\n    this.#serializable = {\n      map: clone,\n      hash,\n      transfer\n    };\n  }\n  get print() {\n    unreachable(\"Should not call PrintAnnotationStorage.print\");\n  }\n  get serializable() {\n    return this.#serializable;\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/font_loader.js\n\nclass FontLoader {\n  #systemFonts = new Set();\n  constructor({\n    ownerDocument = globalThis.document,\n    styleElement = null\n  }) {\n    this._document = ownerDocument;\n    this.nativeFontFaces = new Set();\n    this.styleElement = null;\n    this.loadingRequests = [];\n    this.loadTestFontId = 0;\n  }\n  addNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.add(nativeFontFace);\n    this._document.fonts.add(nativeFontFace);\n  }\n  removeNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.delete(nativeFontFace);\n    this._document.fonts.delete(nativeFontFace);\n  }\n  insertRule(rule) {\n    if (!this.styleElement) {\n      this.styleElement = this._document.createElement(\"style\");\n      this._document.documentElement.getElementsByTagName(\"head\")[0].append(this.styleElement);\n    }\n    const styleSheet = this.styleElement.sheet;\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  }\n  clear() {\n    for (const nativeFontFace of this.nativeFontFaces) {\n      this._document.fonts.delete(nativeFontFace);\n    }\n    this.nativeFontFaces.clear();\n    this.#systemFonts.clear();\n    if (this.styleElement) {\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n  }\n  async loadSystemFont({\n    systemFontInfo: info,\n    _inspectFont\n  }) {\n    if (!info || this.#systemFonts.has(info.loadedName)) {\n      return;\n    }\n    assert(!this.disableFontFace, \"loadSystemFont shouldn't be called when `disableFontFace` is set.\");\n    if (this.isFontLoadingAPISupported) {\n      const {\n        loadedName,\n        src,\n        style\n      } = info;\n      const fontFace = new FontFace(loadedName, src, style);\n      this.addNativeFontFace(fontFace);\n      try {\n        await fontFace.load();\n        this.#systemFonts.add(loadedName);\n        _inspectFont?.(info);\n      } catch {\n        warn(`Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`);\n        this.removeNativeFontFace(fontFace);\n      }\n      return;\n    }\n    unreachable(\"Not implemented: loadSystemFont without the Font Loading API.\");\n  }\n  async bind(font) {\n    if (font.attached || font.missingFile && !font.systemFontInfo) {\n      return;\n    }\n    font.attached = true;\n    if (font.systemFontInfo) {\n      await this.loadSystemFont(font);\n      return;\n    }\n    if (this.isFontLoadingAPISupported) {\n      const nativeFontFace = font.createNativeFontFace();\n      if (nativeFontFace) {\n        this.addNativeFontFace(nativeFontFace);\n        try {\n          await nativeFontFace.loaded;\n        } catch (ex) {\n          warn(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);\n          font.disableFontFace = true;\n          throw ex;\n        }\n      }\n      return;\n    }\n    const rule = font.createFontFaceRule();\n    if (rule) {\n      this.insertRule(rule);\n      if (this.isSyncFontLoadingSupported) {\n        return;\n      }\n      await new Promise(resolve => {\n        const request = this._queueLoadingCallback(resolve);\n        this._prepareFontLoadEvent(font, request);\n      });\n    }\n  }\n  get isFontLoadingAPISupported() {\n    const hasFonts = !!this._document?.fonts;\n    return shadow(this, \"isFontLoadingAPISupported\", hasFonts);\n  }\n  get isSyncFontLoadingSupported() {\n    let supported = false;\n    if (isNodeJS) {\n      supported = true;\n    } else if (typeof navigator !== \"undefined\" && typeof navigator?.userAgent === \"string\" && /Mozilla\\/5.0.*?rv:\\d+.*? Gecko/.test(navigator.userAgent)) {\n      supported = true;\n    }\n    return shadow(this, \"isSyncFontLoadingSupported\", supported);\n  }\n  _queueLoadingCallback(callback) {\n    function completeRequest() {\n      assert(!request.done, \"completeRequest() cannot be called twice.\");\n      request.done = true;\n      while (loadingRequests.length > 0 && loadingRequests[0].done) {\n        const otherRequest = loadingRequests.shift();\n        setTimeout(otherRequest.callback, 0);\n      }\n    }\n    const {\n      loadingRequests\n    } = this;\n    const request = {\n      done: false,\n      complete: completeRequest,\n      callback\n    };\n    loadingRequests.push(request);\n    return request;\n  }\n  get _loadTestFont() {\n    const testFont = atob(\"T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA\" + \"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA\" + \"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA\" + \"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1\" + \"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD\" + \"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM\" + \"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D\" + \"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA\" + \"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA\" + \"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB\" + \"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY\" + \"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA\" + \"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA\" + \"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC\" + \"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3\" + \"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj\" + \"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==\");\n    return shadow(this, \"_loadTestFont\", testFont);\n  }\n  _prepareFontLoadEvent(font, request) {\n    function int32(data, offset) {\n      return data.charCodeAt(offset) << 24 | data.charCodeAt(offset + 1) << 16 | data.charCodeAt(offset + 2) << 8 | data.charCodeAt(offset + 3) & 0xff;\n    }\n    function spliceString(s, offset, remove, insert) {\n      const chunk1 = s.substring(0, offset);\n      const chunk2 = s.substring(offset + remove);\n      return chunk1 + insert + chunk2;\n    }\n    let i, ii;\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext(\"2d\");\n    let called = 0;\n    function isFontReady(name, callback) {\n      if (++called > 30) {\n        warn(\"Load test font never loaded.\");\n        callback();\n        return;\n      }\n      ctx.font = \"30px \" + name;\n      ctx.fillText(\".\", 0, 20);\n      const imageData = ctx.getImageData(0, 0, 1, 1);\n      if (imageData.data[3] > 0) {\n        callback();\n        return;\n      }\n      setTimeout(isFontReady.bind(null, name, callback));\n    }\n    const loadTestFontId = `lt${Date.now()}${this.loadTestFontId++}`;\n    let data = this._loadTestFont;\n    const COMMENT_OFFSET = 976;\n    data = spliceString(data, COMMENT_OFFSET, loadTestFontId.length, loadTestFontId);\n    const CFF_CHECKSUM_OFFSET = 16;\n    const XXXX_VALUE = 0x58585858;\n    let checksum = int32(data, CFF_CHECKSUM_OFFSET);\n    for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n      checksum = checksum - XXXX_VALUE + int32(loadTestFontId, i) | 0;\n    }\n    if (i < loadTestFontId.length) {\n      checksum = checksum - XXXX_VALUE + int32(loadTestFontId + \"XXX\", i) | 0;\n    }\n    data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, string32(checksum));\n    const url = `url(data:font/opentype;base64,${btoa(data)});`;\n    const rule = `@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;\n    this.insertRule(rule);\n    const div = this._document.createElement(\"div\");\n    div.style.visibility = \"hidden\";\n    div.style.width = div.style.height = \"10px\";\n    div.style.position = \"absolute\";\n    div.style.top = div.style.left = \"0px\";\n    for (const name of [font.loadedName, loadTestFontId]) {\n      const span = this._document.createElement(\"span\");\n      span.textContent = \"Hi\";\n      span.style.fontFamily = name;\n      div.append(span);\n    }\n    this._document.body.append(div);\n    isFontReady(loadTestFontId, () => {\n      div.remove();\n      request.complete();\n    });\n  }\n}\nclass FontFaceObject {\n  constructor(translatedData, {\n    disableFontFace = false,\n    inspectFont = null\n  }) {\n    this.compiledGlyphs = Object.create(null);\n    for (const i in translatedData) {\n      this[i] = translatedData[i];\n    }\n    this.disableFontFace = disableFontFace === true;\n    this._inspectFont = inspectFont;\n  }\n  createNativeFontFace() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    let nativeFontFace;\n    if (!this.cssFontInfo) {\n      nativeFontFace = new FontFace(this.loadedName, this.data, {});\n    } else {\n      const css = {\n        weight: this.cssFontInfo.fontWeight\n      };\n      if (this.cssFontInfo.italicAngle) {\n        css.style = `oblique ${this.cssFontInfo.italicAngle}deg`;\n      }\n      nativeFontFace = new FontFace(this.cssFontInfo.fontFamily, this.data, css);\n    }\n    this._inspectFont?.(this);\n    return nativeFontFace;\n  }\n  createFontFaceRule() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    const data = bytesToString(this.data);\n    const url = `url(data:${this.mimetype};base64,${btoa(data)});`;\n    let rule;\n    if (!this.cssFontInfo) {\n      rule = `@font-face {font-family:\"${this.loadedName}\";src:${url}}`;\n    } else {\n      let css = `font-weight: ${this.cssFontInfo.fontWeight};`;\n      if (this.cssFontInfo.italicAngle) {\n        css += `font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;\n      }\n      rule = `@font-face {font-family:\"${this.cssFontInfo.fontFamily}\";${css}src:${url}}`;\n    }\n    this._inspectFont?.(this, url);\n    return rule;\n  }\n  getPathGenerator(objs, character) {\n    if (this.compiledGlyphs[character] !== undefined) {\n      return this.compiledGlyphs[character];\n    }\n    let cmds;\n    try {\n      cmds = objs.get(this.loadedName + \"_path_\" + character);\n    } catch (ex) {\n      warn(`getPathGenerator - ignoring character: \"${ex}\".`);\n    }\n    if (!Array.isArray(cmds) || cmds.length === 0) {\n      return this.compiledGlyphs[character] = function (c, size) {};\n    }\n    const commands = [];\n    for (let i = 0, ii = cmds.length; i < ii;) {\n      switch (cmds[i++]) {\n        case FontRenderOps.BEZIER_CURVE_TO:\n          {\n            const [a, b, c, d, e, f] = cmds.slice(i, i + 6);\n            commands.push(ctx => ctx.bezierCurveTo(a, b, c, d, e, f));\n            i += 6;\n          }\n          break;\n        case FontRenderOps.MOVE_TO:\n          {\n            const [a, b] = cmds.slice(i, i + 2);\n            commands.push(ctx => ctx.moveTo(a, b));\n            i += 2;\n          }\n          break;\n        case FontRenderOps.LINE_TO:\n          {\n            const [a, b] = cmds.slice(i, i + 2);\n            commands.push(ctx => ctx.lineTo(a, b));\n            i += 2;\n          }\n          break;\n        case FontRenderOps.QUADRATIC_CURVE_TO:\n          {\n            const [a, b, c, d] = cmds.slice(i, i + 4);\n            commands.push(ctx => ctx.quadraticCurveTo(a, b, c, d));\n            i += 4;\n          }\n          break;\n        case FontRenderOps.RESTORE:\n          commands.push(ctx => ctx.restore());\n          break;\n        case FontRenderOps.SAVE:\n          commands.push(ctx => ctx.save());\n          break;\n        case FontRenderOps.SCALE:\n          assert(commands.length === 2, \"Scale command is only valid at the third position.\");\n          break;\n        case FontRenderOps.TRANSFORM:\n          {\n            const [a, b, c, d, e, f] = cmds.slice(i, i + 6);\n            commands.push(ctx => ctx.transform(a, b, c, d, e, f));\n            i += 6;\n          }\n          break;\n        case FontRenderOps.TRANSLATE:\n          {\n            const [a, b] = cmds.slice(i, i + 2);\n            commands.push(ctx => ctx.translate(a, b));\n            i += 2;\n          }\n          break;\n      }\n    }\n    return this.compiledGlyphs[character] = function glyphDrawer(ctx, size) {\n      commands[0](ctx);\n      commands[1](ctx);\n      ctx.scale(size, -size);\n      for (let i = 2, ii = commands.length; i < ii; i++) {\n        commands[i](ctx);\n      }\n    };\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/node_utils.js\n\n\nif (isNodeJS) {\n  var packageCapability = Promise.withResolvers();\n  var packageMap = null;\n  const loadPackages = async () => {\n    const fs = await import( /*webpackIgnore: true*/\"fs\"),\n      http = await import( /*webpackIgnore: true*/\"http\"),\n      https = await import( /*webpackIgnore: true*/\"https\"),\n      url = await import( /*webpackIgnore: true*/\"url\");\n    let canvas, path2d;\n    return new Map(Object.entries({\n      fs,\n      http,\n      https,\n      url,\n      canvas,\n      path2d\n    }));\n  };\n  loadPackages().then(map => {\n    packageMap = map;\n    packageCapability.resolve();\n  }, reason => {\n    warn(`loadPackages: ${reason}`);\n    packageMap = new Map();\n    packageCapability.resolve();\n  });\n}\nclass NodePackages {\n  static get promise() {\n    return packageCapability.promise;\n  }\n  static get(name) {\n    return packageMap?.get(name);\n  }\n}\nconst node_utils_fetchData = function (url) {\n  const fs = NodePackages.get(\"fs\");\n  return fs.promises.readFile(url).then(data => new Uint8Array(data));\n};\nclass NodeFilterFactory extends BaseFilterFactory {}\nclass NodeCanvasFactory extends BaseCanvasFactory {\n  _createCanvas(width, height) {\n    const canvas = NodePackages.get(\"canvas\");\n    return canvas.createCanvas(width, height);\n  }\n}\nclass NodeCMapReaderFactory extends BaseCMapReaderFactory {\n  _fetchData(url, compressionType) {\n    return node_utils_fetchData(url).then(data => ({\n      cMapData: data,\n      compressionType\n    }));\n  }\n}\nclass NodeStandardFontDataFactory extends BaseStandardFontDataFactory {\n  _fetchData(url) {\n    return node_utils_fetchData(url);\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/pattern_helper.js\n\n\nconst PathType = {\n  FILL: \"Fill\",\n  STROKE: \"Stroke\",\n  SHADING: \"Shading\"\n};\nfunction applyBoundingBox(ctx, bbox) {\n  if (!bbox) {\n    return;\n  }\n  const width = bbox[2] - bbox[0];\n  const height = bbox[3] - bbox[1];\n  const region = new Path2D();\n  region.rect(bbox[0], bbox[1], width, height);\n  ctx.clip(region);\n}\nclass BaseShadingPattern {\n  constructor() {\n    if (this.constructor === BaseShadingPattern) {\n      unreachable(\"Cannot initialize BaseShadingPattern.\");\n    }\n  }\n  getPattern() {\n    unreachable(\"Abstract method `getPattern` called.\");\n  }\n}\nclass RadialAxialShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._type = IR[1];\n    this._bbox = IR[2];\n    this._colorStops = IR[3];\n    this._p0 = IR[4];\n    this._p1 = IR[5];\n    this._r0 = IR[6];\n    this._r1 = IR[7];\n    this.matrix = null;\n  }\n  _createGradient(ctx) {\n    let grad;\n    if (this._type === \"axial\") {\n      grad = ctx.createLinearGradient(this._p0[0], this._p0[1], this._p1[0], this._p1[1]);\n    } else if (this._type === \"radial\") {\n      grad = ctx.createRadialGradient(this._p0[0], this._p0[1], this._r0, this._p1[0], this._p1[1], this._r1);\n    }\n    for (const colorStop of this._colorStops) {\n      grad.addColorStop(colorStop[0], colorStop[1]);\n    }\n    return grad;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let pattern;\n    if (pathType === PathType.STROKE || pathType === PathType.FILL) {\n      const ownerBBox = owner.current.getClippedPathBoundingBox(pathType, getCurrentTransform(ctx)) || [0, 0, 0, 0];\n      const width = Math.ceil(ownerBBox[2] - ownerBBox[0]) || 1;\n      const height = Math.ceil(ownerBBox[3] - ownerBBox[1]) || 1;\n      const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", width, height, true);\n      const tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.beginPath();\n      tmpCtx.rect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.translate(-ownerBBox[0], -ownerBBox[1]);\n      inverse = Util.transform(inverse, [1, 0, 0, 1, ownerBBox[0], ownerBBox[1]]);\n      tmpCtx.transform(...owner.baseTransform);\n      if (this.matrix) {\n        tmpCtx.transform(...this.matrix);\n      }\n      applyBoundingBox(tmpCtx, this._bbox);\n      tmpCtx.fillStyle = this._createGradient(tmpCtx);\n      tmpCtx.fill();\n      pattern = ctx.createPattern(tmpCanvas.canvas, \"no-repeat\");\n      const domMatrix = new DOMMatrix(inverse);\n      pattern.setTransform(domMatrix);\n    } else {\n      applyBoundingBox(ctx, this._bbox);\n      pattern = this._createGradient(ctx);\n    }\n    return pattern;\n  }\n}\nfunction drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n  const coords = context.coords,\n    colors = context.colors;\n  const bytes = data.data,\n    rowSize = data.width * 4;\n  let tmp;\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  if (coords[p2 + 1] > coords[p3 + 1]) {\n    tmp = p2;\n    p2 = p3;\n    p3 = tmp;\n    tmp = c2;\n    c2 = c3;\n    c3 = tmp;\n  }\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  const x1 = (coords[p1] + context.offsetX) * context.scaleX;\n  const y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n  const x2 = (coords[p2] + context.offsetX) * context.scaleX;\n  const y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n  const x3 = (coords[p3] + context.offsetX) * context.scaleX;\n  const y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n  if (y1 >= y3) {\n    return;\n  }\n  const c1r = colors[c1],\n    c1g = colors[c1 + 1],\n    c1b = colors[c1 + 2];\n  const c2r = colors[c2],\n    c2g = colors[c2 + 1],\n    c2b = colors[c2 + 2];\n  const c3r = colors[c3],\n    c3g = colors[c3 + 1],\n    c3b = colors[c3 + 2];\n  const minY = Math.round(y1),\n    maxY = Math.round(y3);\n  let xa, car, cag, cab;\n  let xb, cbr, cbg, cbb;\n  for (let y = minY; y <= maxY; y++) {\n    if (y < y2) {\n      const k = y < y1 ? 0 : (y1 - y) / (y1 - y2);\n      xa = x1 - (x1 - x2) * k;\n      car = c1r - (c1r - c2r) * k;\n      cag = c1g - (c1g - c2g) * k;\n      cab = c1b - (c1b - c2b) * k;\n    } else {\n      let k;\n      if (y > y3) {\n        k = 1;\n      } else if (y2 === y3) {\n        k = 0;\n      } else {\n        k = (y2 - y) / (y2 - y3);\n      }\n      xa = x2 - (x2 - x3) * k;\n      car = c2r - (c2r - c3r) * k;\n      cag = c2g - (c2g - c3g) * k;\n      cab = c2b - (c2b - c3b) * k;\n    }\n    let k;\n    if (y < y1) {\n      k = 0;\n    } else if (y > y3) {\n      k = 1;\n    } else {\n      k = (y1 - y) / (y1 - y3);\n    }\n    xb = x1 - (x1 - x3) * k;\n    cbr = c1r - (c1r - c3r) * k;\n    cbg = c1g - (c1g - c3g) * k;\n    cbb = c1b - (c1b - c3b) * k;\n    const x1_ = Math.round(Math.min(xa, xb));\n    const x2_ = Math.round(Math.max(xa, xb));\n    let j = rowSize * y + x1_ * 4;\n    for (let x = x1_; x <= x2_; x++) {\n      k = (xa - x) / (xa - xb);\n      if (k < 0) {\n        k = 0;\n      } else if (k > 1) {\n        k = 1;\n      }\n      bytes[j++] = car - (car - cbr) * k | 0;\n      bytes[j++] = cag - (cag - cbg) * k | 0;\n      bytes[j++] = cab - (cab - cbb) * k | 0;\n      bytes[j++] = 255;\n    }\n  }\n}\nfunction drawFigure(data, figure, context) {\n  const ps = figure.coords;\n  const cs = figure.colors;\n  let i, ii;\n  switch (figure.type) {\n    case \"lattice\":\n      const verticesPerRow = figure.verticesPerRow;\n      const rows = Math.floor(ps.length / verticesPerRow) - 1;\n      const cols = verticesPerRow - 1;\n      for (i = 0; i < rows; i++) {\n        let q = i * verticesPerRow;\n        for (let j = 0; j < cols; j++, q++) {\n          drawTriangle(data, context, ps[q], ps[q + 1], ps[q + verticesPerRow], cs[q], cs[q + 1], cs[q + verticesPerRow]);\n          drawTriangle(data, context, ps[q + verticesPerRow + 1], ps[q + 1], ps[q + verticesPerRow], cs[q + verticesPerRow + 1], cs[q + 1], cs[q + verticesPerRow]);\n        }\n      }\n      break;\n    case \"triangles\":\n      for (i = 0, ii = ps.length; i < ii; i += 3) {\n        drawTriangle(data, context, ps[i], ps[i + 1], ps[i + 2], cs[i], cs[i + 1], cs[i + 2]);\n      }\n      break;\n    default:\n      throw new Error(\"illegal figure\");\n  }\n}\nclass MeshShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._coords = IR[2];\n    this._colors = IR[3];\n    this._figures = IR[4];\n    this._bounds = IR[5];\n    this._bbox = IR[7];\n    this._background = IR[8];\n    this.matrix = null;\n  }\n  _createMeshCanvas(combinedScale, backgroundColor, cachedCanvases) {\n    const EXPECTED_SCALE = 1.1;\n    const MAX_PATTERN_SIZE = 3000;\n    const BORDER_SIZE = 2;\n    const offsetX = Math.floor(this._bounds[0]);\n    const offsetY = Math.floor(this._bounds[1]);\n    const boundsWidth = Math.ceil(this._bounds[2]) - offsetX;\n    const boundsHeight = Math.ceil(this._bounds[3]) - offsetY;\n    const width = Math.min(Math.ceil(Math.abs(boundsWidth * combinedScale[0] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    const height = Math.min(Math.ceil(Math.abs(boundsHeight * combinedScale[1] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    const scaleX = boundsWidth / width;\n    const scaleY = boundsHeight / height;\n    const context = {\n      coords: this._coords,\n      colors: this._colors,\n      offsetX: -offsetX,\n      offsetY: -offsetY,\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY\n    };\n    const paddedWidth = width + BORDER_SIZE * 2;\n    const paddedHeight = height + BORDER_SIZE * 2;\n    const tmpCanvas = cachedCanvases.getCanvas(\"mesh\", paddedWidth, paddedHeight, false);\n    const tmpCtx = tmpCanvas.context;\n    const data = tmpCtx.createImageData(width, height);\n    if (backgroundColor) {\n      const bytes = data.data;\n      for (let i = 0, ii = bytes.length; i < ii; i += 4) {\n        bytes[i] = backgroundColor[0];\n        bytes[i + 1] = backgroundColor[1];\n        bytes[i + 2] = backgroundColor[2];\n        bytes[i + 3] = 255;\n      }\n    }\n    for (const figure of this._figures) {\n      drawFigure(data, figure, context);\n    }\n    tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n    const canvas = tmpCanvas.canvas;\n    return {\n      canvas,\n      offsetX: offsetX - BORDER_SIZE * scaleX,\n      offsetY: offsetY - BORDER_SIZE * scaleY,\n      scaleX,\n      scaleY\n    };\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    applyBoundingBox(ctx, this._bbox);\n    let scale;\n    if (pathType === PathType.SHADING) {\n      scale = Util.singularValueDecompose2dScale(getCurrentTransform(ctx));\n    } else {\n      scale = Util.singularValueDecompose2dScale(owner.baseTransform);\n      if (this.matrix) {\n        const matrixScale = Util.singularValueDecompose2dScale(this.matrix);\n        scale = [scale[0] * matrixScale[0], scale[1] * matrixScale[1]];\n      }\n    }\n    const temporaryPatternCanvas = this._createMeshCanvas(scale, pathType === PathType.SHADING ? null : this._background, owner.cachedCanvases);\n    if (pathType !== PathType.SHADING) {\n      ctx.setTransform(...owner.baseTransform);\n      if (this.matrix) {\n        ctx.transform(...this.matrix);\n      }\n    }\n    ctx.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);\n    return ctx.createPattern(temporaryPatternCanvas.canvas, \"no-repeat\");\n  }\n}\nclass DummyShadingPattern extends BaseShadingPattern {\n  getPattern() {\n    return \"hotpink\";\n  }\n}\nfunction getShadingPattern(IR) {\n  switch (IR[0]) {\n    case \"RadialAxial\":\n      return new RadialAxialShadingPattern(IR);\n    case \"Mesh\":\n      return new MeshShadingPattern(IR);\n    case \"Dummy\":\n      return new DummyShadingPattern();\n  }\n  throw new Error(`Unknown IR type: ${IR[0]}`);\n}\nconst PaintType = {\n  COLORED: 1,\n  UNCOLORED: 2\n};\nclass TilingPattern {\n  static MAX_PATTERN_SIZE = 3000;\n  constructor(IR, color, ctx, canvasGraphicsFactory, baseTransform) {\n    this.operatorList = IR[2];\n    this.matrix = IR[3];\n    this.bbox = IR[4];\n    this.xstep = IR[5];\n    this.ystep = IR[6];\n    this.paintType = IR[7];\n    this.tilingType = IR[8];\n    this.color = color;\n    this.ctx = ctx;\n    this.canvasGraphicsFactory = canvasGraphicsFactory;\n    this.baseTransform = baseTransform;\n  }\n  createPatternCanvas(owner) {\n    const operatorList = this.operatorList;\n    const bbox = this.bbox;\n    const xstep = this.xstep;\n    const ystep = this.ystep;\n    const paintType = this.paintType;\n    const tilingType = this.tilingType;\n    const color = this.color;\n    const canvasGraphicsFactory = this.canvasGraphicsFactory;\n    info(\"TilingType: \" + tilingType);\n    const x0 = bbox[0],\n      y0 = bbox[1],\n      x1 = bbox[2],\n      y1 = bbox[3];\n    const matrixScale = Util.singularValueDecompose2dScale(this.matrix);\n    const curMatrixScale = Util.singularValueDecompose2dScale(this.baseTransform);\n    const combinedScale = [matrixScale[0] * curMatrixScale[0], matrixScale[1] * curMatrixScale[1]];\n    const dimx = this.getSizeAndScale(xstep, this.ctx.canvas.width, combinedScale[0]);\n    const dimy = this.getSizeAndScale(ystep, this.ctx.canvas.height, combinedScale[1]);\n    const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", dimx.size, dimy.size, true);\n    const tmpCtx = tmpCanvas.context;\n    const graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n    graphics.groupLevel = owner.groupLevel;\n    this.setFillAndStrokeStyleToContext(graphics, paintType, color);\n    let adjustedX0 = x0;\n    let adjustedY0 = y0;\n    let adjustedX1 = x1;\n    let adjustedY1 = y1;\n    if (x0 < 0) {\n      adjustedX0 = 0;\n      adjustedX1 += Math.abs(x0);\n    }\n    if (y0 < 0) {\n      adjustedY0 = 0;\n      adjustedY1 += Math.abs(y0);\n    }\n    tmpCtx.translate(-(dimx.scale * adjustedX0), -(dimy.scale * adjustedY0));\n    graphics.transform(dimx.scale, 0, 0, dimy.scale, 0, 0);\n    tmpCtx.save();\n    this.clipBbox(graphics, adjustedX0, adjustedY0, adjustedX1, adjustedY1);\n    graphics.baseTransform = getCurrentTransform(graphics.ctx);\n    graphics.executeOperatorList(operatorList);\n    graphics.endDrawing();\n    return {\n      canvas: tmpCanvas.canvas,\n      scaleX: dimx.scale,\n      scaleY: dimy.scale,\n      offsetX: adjustedX0,\n      offsetY: adjustedY0\n    };\n  }\n  getSizeAndScale(step, realOutputSize, scale) {\n    step = Math.abs(step);\n    const maxSize = Math.max(TilingPattern.MAX_PATTERN_SIZE, realOutputSize);\n    let size = Math.ceil(step * scale);\n    if (size >= maxSize) {\n      size = maxSize;\n    } else {\n      scale = size / step;\n    }\n    return {\n      scale,\n      size\n    };\n  }\n  clipBbox(graphics, x0, y0, x1, y1) {\n    const bboxWidth = x1 - x0;\n    const bboxHeight = y1 - y0;\n    graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n    graphics.current.updateRectMinMax(getCurrentTransform(graphics.ctx), [x0, y0, x1, y1]);\n    graphics.clip();\n    graphics.endPath();\n  }\n  setFillAndStrokeStyleToContext(graphics, paintType, color) {\n    const context = graphics.ctx,\n      current = graphics.current;\n    switch (paintType) {\n      case PaintType.COLORED:\n        const ctx = this.ctx;\n        context.fillStyle = ctx.fillStyle;\n        context.strokeStyle = ctx.strokeStyle;\n        current.fillColor = ctx.fillStyle;\n        current.strokeColor = ctx.strokeStyle;\n        break;\n      case PaintType.UNCOLORED:\n        const cssColor = Util.makeHexColor(color[0], color[1], color[2]);\n        context.fillStyle = cssColor;\n        context.strokeStyle = cssColor;\n        current.fillColor = cssColor;\n        current.strokeColor = cssColor;\n        break;\n      default:\n        throw new FormatError(`Unsupported paint type: ${paintType}`);\n    }\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let matrix = inverse;\n    if (pathType !== PathType.SHADING) {\n      matrix = Util.transform(matrix, owner.baseTransform);\n      if (this.matrix) {\n        matrix = Util.transform(matrix, this.matrix);\n      }\n    }\n    const temporaryPatternCanvas = this.createPatternCanvas(owner);\n    let domMatrix = new DOMMatrix(matrix);\n    domMatrix = domMatrix.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    domMatrix = domMatrix.scale(1 / temporaryPatternCanvas.scaleX, 1 / temporaryPatternCanvas.scaleY);\n    const pattern = ctx.createPattern(temporaryPatternCanvas.canvas, \"repeat\");\n    pattern.setTransform(domMatrix);\n    return pattern;\n  }\n}\n\n;// CONCATENATED MODULE: ./src/shared/image_utils.js\n\nfunction convertToRGBA(params) {\n  switch (params.kind) {\n    case ImageKind.GRAYSCALE_1BPP:\n      return convertBlackAndWhiteToRGBA(params);\n    case ImageKind.RGB_24BPP:\n      return convertRGBToRGBA(params);\n  }\n  return null;\n}\nfunction convertBlackAndWhiteToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  width,\n  height,\n  nonBlackColor = 0xffffffff,\n  inverseDecode = false\n}) {\n  const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n  const [zeroMapping, oneMapping] = inverseDecode ? [nonBlackColor, black] : [black, nonBlackColor];\n  const widthInSource = width >> 3;\n  const widthRemainder = width & 7;\n  const srcLength = src.length;\n  dest = new Uint32Array(dest.buffer);\n  let destPos = 0;\n  for (let i = 0; i < height; i++) {\n    for (const max = srcPos + widthInSource; srcPos < max; srcPos++) {\n      const elem = srcPos < srcLength ? src[srcPos] : 255;\n      dest[destPos++] = elem & 0b10000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1 ? oneMapping : zeroMapping;\n    }\n    if (widthRemainder === 0) {\n      continue;\n    }\n    const elem = srcPos < srcLength ? src[srcPos++] : 255;\n    for (let j = 0; j < widthRemainder; j++) {\n      dest[destPos++] = elem & 1 << 7 - j ? oneMapping : zeroMapping;\n    }\n  }\n  return {\n    srcPos,\n    destPos\n  };\n}\nfunction convertRGBToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  destPos = 0,\n  width,\n  height\n}) {\n  let i = 0;\n  const len32 = src.length >> 2;\n  const src32 = new Uint32Array(src.buffer, srcPos, len32);\n  if (FeatureTest.isLittleEndian) {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff000000;\n      dest[destPos + 1] = s1 >>> 24 | s2 << 8 | 0xff000000;\n      dest[destPos + 2] = s2 >>> 16 | s3 << 16 | 0xff000000;\n      dest[destPos + 3] = s3 >>> 8 | 0xff000000;\n    }\n    for (let j = i * 4, jj = src.length; j < jj; j += 3) {\n      dest[destPos++] = src[j] | src[j + 1] << 8 | src[j + 2] << 16 | 0xff000000;\n    }\n  } else {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff;\n      dest[destPos + 1] = s1 << 24 | s2 >>> 8 | 0xff;\n      dest[destPos + 2] = s2 << 16 | s3 >>> 16 | 0xff;\n      dest[destPos + 3] = s3 << 8 | 0xff;\n    }\n    for (let j = i * 4, jj = src.length; j < jj; j += 3) {\n      dest[destPos++] = src[j] << 24 | src[j + 1] << 16 | src[j + 2] << 8 | 0xff;\n    }\n  }\n  return {\n    srcPos,\n    destPos\n  };\n}\nfunction grayToRGBA(src, dest) {\n  if (FeatureTest.isLittleEndian) {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = src[i] * 0x10101 | 0xff000000;\n    }\n  } else {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = src[i] * 0x1010100 | 0x000000ff;\n    }\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/canvas.js\n\n\n\n\nconst MIN_FONT_SIZE = 16;\nconst MAX_FONT_SIZE = 100;\nconst EXECUTION_TIME = 15;\nconst EXECUTION_STEPS = 10;\nconst MAX_SIZE_TO_COMPILE = 1000;\nconst FULL_CHUNK_HEIGHT = 16;\nfunction mirrorContextOperations(ctx, destCtx) {\n  if (ctx._removeMirroring) {\n    throw new Error(\"Context is already forwarding operations.\");\n  }\n  ctx.__originalSave = ctx.save;\n  ctx.__originalRestore = ctx.restore;\n  ctx.__originalRotate = ctx.rotate;\n  ctx.__originalScale = ctx.scale;\n  ctx.__originalTranslate = ctx.translate;\n  ctx.__originalTransform = ctx.transform;\n  ctx.__originalSetTransform = ctx.setTransform;\n  ctx.__originalResetTransform = ctx.resetTransform;\n  ctx.__originalClip = ctx.clip;\n  ctx.__originalMoveTo = ctx.moveTo;\n  ctx.__originalLineTo = ctx.lineTo;\n  ctx.__originalBezierCurveTo = ctx.bezierCurveTo;\n  ctx.__originalRect = ctx.rect;\n  ctx.__originalClosePath = ctx.closePath;\n  ctx.__originalBeginPath = ctx.beginPath;\n  ctx._removeMirroring = () => {\n    ctx.save = ctx.__originalSave;\n    ctx.restore = ctx.__originalRestore;\n    ctx.rotate = ctx.__originalRotate;\n    ctx.scale = ctx.__originalScale;\n    ctx.translate = ctx.__originalTranslate;\n    ctx.transform = ctx.__originalTransform;\n    ctx.setTransform = ctx.__originalSetTransform;\n    ctx.resetTransform = ctx.__originalResetTransform;\n    ctx.clip = ctx.__originalClip;\n    ctx.moveTo = ctx.__originalMoveTo;\n    ctx.lineTo = ctx.__originalLineTo;\n    ctx.bezierCurveTo = ctx.__originalBezierCurveTo;\n    ctx.rect = ctx.__originalRect;\n    ctx.closePath = ctx.__originalClosePath;\n    ctx.beginPath = ctx.__originalBeginPath;\n    delete ctx._removeMirroring;\n  };\n  ctx.save = function ctxSave() {\n    destCtx.save();\n    this.__originalSave();\n  };\n  ctx.restore = function ctxRestore() {\n    destCtx.restore();\n    this.__originalRestore();\n  };\n  ctx.translate = function ctxTranslate(x, y) {\n    destCtx.translate(x, y);\n    this.__originalTranslate(x, y);\n  };\n  ctx.scale = function ctxScale(x, y) {\n    destCtx.scale(x, y);\n    this.__originalScale(x, y);\n  };\n  ctx.transform = function ctxTransform(a, b, c, d, e, f) {\n    destCtx.transform(a, b, c, d, e, f);\n    this.__originalTransform(a, b, c, d, e, f);\n  };\n  ctx.setTransform = function ctxSetTransform(a, b, c, d, e, f) {\n    destCtx.setTransform(a, b, c, d, e, f);\n    this.__originalSetTransform(a, b, c, d, e, f);\n  };\n  ctx.resetTransform = function ctxResetTransform() {\n    destCtx.resetTransform();\n    this.__originalResetTransform();\n  };\n  ctx.rotate = function ctxRotate(angle) {\n    destCtx.rotate(angle);\n    this.__originalRotate(angle);\n  };\n  ctx.clip = function ctxRotate(rule) {\n    destCtx.clip(rule);\n    this.__originalClip(rule);\n  };\n  ctx.moveTo = function (x, y) {\n    destCtx.moveTo(x, y);\n    this.__originalMoveTo(x, y);\n  };\n  ctx.lineTo = function (x, y) {\n    destCtx.lineTo(x, y);\n    this.__originalLineTo(x, y);\n  };\n  ctx.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n    destCtx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n    this.__originalBezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n  };\n  ctx.rect = function (x, y, width, height) {\n    destCtx.rect(x, y, width, height);\n    this.__originalRect(x, y, width, height);\n  };\n  ctx.closePath = function () {\n    destCtx.closePath();\n    this.__originalClosePath();\n  };\n  ctx.beginPath = function () {\n    destCtx.beginPath();\n    this.__originalBeginPath();\n  };\n}\nclass CachedCanvases {\n  constructor(canvasFactory) {\n    this.canvasFactory = canvasFactory;\n    this.cache = Object.create(null);\n  }\n  getCanvas(id, width, height) {\n    let canvasEntry;\n    if (this.cache[id] !== undefined) {\n      canvasEntry = this.cache[id];\n      this.canvasFactory.reset(canvasEntry, width, height);\n    } else {\n      canvasEntry = this.canvasFactory.create(width, height);\n      this.cache[id] = canvasEntry;\n    }\n    return canvasEntry;\n  }\n  delete(id) {\n    delete this.cache[id];\n  }\n  clear() {\n    for (const id in this.cache) {\n      const canvasEntry = this.cache[id];\n      this.canvasFactory.destroy(canvasEntry);\n      delete this.cache[id];\n    }\n  }\n}\nfunction drawImageAtIntegerCoords(ctx, srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH) {\n  const [a, b, c, d, tx, ty] = getCurrentTransform(ctx);\n  if (b === 0 && c === 0) {\n    const tlX = destX * a + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destY * d + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destX + destW) * a + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destY + destH) * d + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(Math.sign(a), 0, 0, Math.sign(d), rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rWidth, rHeight);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rWidth, rHeight];\n  }\n  if (a === 0 && d === 0) {\n    const tlX = destY * c + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destX * b + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destY + destH) * c + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destX + destW) * b + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(0, Math.sign(b), Math.sign(c), 0, rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rHeight, rWidth);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rHeight, rWidth];\n  }\n  ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);\n  const scaleX = Math.hypot(a, b);\n  const scaleY = Math.hypot(c, d);\n  return [scaleX * destW, scaleY * destH];\n}\nfunction compileType3Glyph(imgData) {\n  const {\n    width,\n    height\n  } = imgData;\n  if (width > MAX_SIZE_TO_COMPILE || height > MAX_SIZE_TO_COMPILE) {\n    return null;\n  }\n  const POINT_TO_PROCESS_LIMIT = 1000;\n  const POINT_TYPES = new Uint8Array([0, 2, 4, 0, 1, 0, 5, 4, 8, 10, 0, 8, 0, 2, 1, 0]);\n  const width1 = width + 1;\n  let points = new Uint8Array(width1 * (height + 1));\n  let i, j, j0;\n  const lineSize = width + 7 & ~7;\n  let data = new Uint8Array(lineSize * height),\n    pos = 0;\n  for (const elem of imgData.data) {\n    let mask = 128;\n    while (mask > 0) {\n      data[pos++] = elem & mask ? 0 : 255;\n      mask >>= 1;\n    }\n  }\n  let count = 0;\n  pos = 0;\n  if (data[pos] !== 0) {\n    points[0] = 1;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j] = data[pos] ? 2 : 1;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j] = 2;\n    ++count;\n  }\n  for (i = 1; i < height; i++) {\n    pos = i * lineSize;\n    j0 = i * width1;\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0] = data[pos] ? 1 : 8;\n      ++count;\n    }\n    let sum = (data[pos] ? 4 : 0) + (data[pos - lineSize] ? 8 : 0);\n    for (j = 1; j < width; j++) {\n      sum = (sum >> 2) + (data[pos + 1] ? 4 : 0) + (data[pos - lineSize + 1] ? 8 : 0);\n      if (POINT_TYPES[sum]) {\n        points[j0 + j] = POINT_TYPES[sum];\n        ++count;\n      }\n      pos++;\n    }\n    if (data[pos - lineSize] !== data[pos]) {\n      points[j0 + j] = data[pos] ? 2 : 4;\n      ++count;\n    }\n    if (count > POINT_TO_PROCESS_LIMIT) {\n      return null;\n    }\n  }\n  pos = lineSize * (height - 1);\n  j0 = i * width1;\n  if (data[pos] !== 0) {\n    points[j0] = 8;\n    ++count;\n  }\n  for (j = 1; j < width; j++) {\n    if (data[pos] !== data[pos + 1]) {\n      points[j0 + j] = data[pos] ? 4 : 8;\n      ++count;\n    }\n    pos++;\n  }\n  if (data[pos] !== 0) {\n    points[j0 + j] = 4;\n    ++count;\n  }\n  if (count > POINT_TO_PROCESS_LIMIT) {\n    return null;\n  }\n  const steps = new Int32Array([0, width1, -1, 0, -width1, 0, 0, 0, 1]);\n  const path = new Path2D();\n  for (i = 0; count && i <= height; i++) {\n    let p = i * width1;\n    const end = p + width;\n    while (p < end && !points[p]) {\n      p++;\n    }\n    if (p === end) {\n      continue;\n    }\n    path.moveTo(p % width1, i);\n    const p0 = p;\n    let type = points[p];\n    do {\n      const step = steps[type];\n      do {\n        p += step;\n      } while (!points[p]);\n      const pp = points[p];\n      if (pp !== 5 && pp !== 10) {\n        type = pp;\n        points[p] = 0;\n      } else {\n        type = pp & 0x33 * type >> 4;\n        points[p] &= type >> 2 | type << 2;\n      }\n      path.lineTo(p % width1, p / width1 | 0);\n      if (!points[p]) {\n        --count;\n      }\n    } while (p0 !== p);\n    --i;\n  }\n  data = null;\n  points = null;\n  const drawOutline = function (c) {\n    c.save();\n    c.scale(1 / width, -1 / height);\n    c.translate(0, -height);\n    c.fill(path);\n    c.beginPath();\n    c.restore();\n  };\n  return drawOutline;\n}\nclass CanvasExtraState {\n  constructor(width, height) {\n    this.alphaIsShape = false;\n    this.fontSize = 0;\n    this.fontSizeScale = 1;\n    this.textMatrix = IDENTITY_MATRIX;\n    this.textMatrixScale = 1;\n    this.fontMatrix = FONT_IDENTITY_MATRIX;\n    this.leading = 0;\n    this.x = 0;\n    this.y = 0;\n    this.lineX = 0;\n    this.lineY = 0;\n    this.charSpacing = 0;\n    this.wordSpacing = 0;\n    this.textHScale = 1;\n    this.textRenderingMode = TextRenderingMode.FILL;\n    this.textRise = 0;\n    this.fillColor = \"#000000\";\n    this.strokeColor = \"#000000\";\n    this.patternFill = false;\n    this.fillAlpha = 1;\n    this.strokeAlpha = 1;\n    this.lineWidth = 1;\n    this.activeSMask = null;\n    this.transferMaps = \"none\";\n    this.startNewPathAndClipBox([0, 0, width, height]);\n  }\n  clone() {\n    const clone = Object.create(this);\n    clone.clipBox = this.clipBox.slice();\n    return clone;\n  }\n  setCurrentPoint(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n  updatePathMinMax(transform, x, y) {\n    [x, y] = Util.applyTransform([x, y], transform);\n    this.minX = Math.min(this.minX, x);\n    this.minY = Math.min(this.minY, y);\n    this.maxX = Math.max(this.maxX, x);\n    this.maxY = Math.max(this.maxY, y);\n  }\n  updateRectMinMax(transform, rect) {\n    const p1 = Util.applyTransform(rect, transform);\n    const p2 = Util.applyTransform(rect.slice(2), transform);\n    const p3 = Util.applyTransform([rect[0], rect[3]], transform);\n    const p4 = Util.applyTransform([rect[2], rect[1]], transform);\n    this.minX = Math.min(this.minX, p1[0], p2[0], p3[0], p4[0]);\n    this.minY = Math.min(this.minY, p1[1], p2[1], p3[1], p4[1]);\n    this.maxX = Math.max(this.maxX, p1[0], p2[0], p3[0], p4[0]);\n    this.maxY = Math.max(this.maxY, p1[1], p2[1], p3[1], p4[1]);\n  }\n  updateScalingPathMinMax(transform, minMax) {\n    Util.scaleMinMax(transform, minMax);\n    this.minX = Math.min(this.minX, minMax[0]);\n    this.minY = Math.min(this.minY, minMax[1]);\n    this.maxX = Math.max(this.maxX, minMax[2]);\n    this.maxY = Math.max(this.maxY, minMax[3]);\n  }\n  updateCurvePathMinMax(transform, x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    const box = Util.bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3, minMax);\n    if (minMax) {\n      return;\n    }\n    this.updateRectMinMax(transform, box);\n  }\n  getPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    const box = [this.minX, this.minY, this.maxX, this.maxY];\n    if (pathType === PathType.STROKE) {\n      if (!transform) {\n        unreachable(\"Stroke bounding box must include transform.\");\n      }\n      const scale = Util.singularValueDecompose2dScale(transform);\n      const xStrokePad = scale[0] * this.lineWidth / 2;\n      const yStrokePad = scale[1] * this.lineWidth / 2;\n      box[0] -= xStrokePad;\n      box[1] -= yStrokePad;\n      box[2] += xStrokePad;\n      box[3] += yStrokePad;\n    }\n    return box;\n  }\n  updateClipFromPath() {\n    const intersect = Util.intersect(this.clipBox, this.getPathBoundingBox());\n    this.startNewPathAndClipBox(intersect || [0, 0, 0, 0]);\n  }\n  isEmptyClip() {\n    return this.minX === Infinity;\n  }\n  startNewPathAndClipBox(box) {\n    this.clipBox = box;\n    this.minX = Infinity;\n    this.minY = Infinity;\n    this.maxX = 0;\n    this.maxY = 0;\n  }\n  getClippedPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    return Util.intersect(this.clipBox, this.getPathBoundingBox(pathType, transform));\n  }\n}\nfunction putBinaryImageData(ctx, imgData) {\n  if (typeof ImageData !== \"undefined\" && imgData instanceof ImageData) {\n    ctx.putImageData(imgData, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0,\n    destPos;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  let i, j, thisChunkHeight, elemsInThisChunk;\n  if (imgData.kind === util_ImageKind.GRAYSCALE_1BPP) {\n    const srcLength = src.byteLength;\n    const dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n    const dest32DataLength = dest32.length;\n    const fullSrcDiff = width + 7 >> 3;\n    const white = 0xffffffff;\n    const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n    for (i = 0; i < totalChunks; i++) {\n      thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n      destPos = 0;\n      for (j = 0; j < thisChunkHeight; j++) {\n        const srcDiff = srcLength - srcPos;\n        let k = 0;\n        const kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;\n        const kEndUnrolled = kEnd & ~7;\n        let mask = 0;\n        let srcByte = 0;\n        for (; k < kEndUnrolled; k += 8) {\n          srcByte = src[srcPos++];\n          dest32[destPos++] = srcByte & 128 ? white : black;\n          dest32[destPos++] = srcByte & 64 ? white : black;\n          dest32[destPos++] = srcByte & 32 ? white : black;\n          dest32[destPos++] = srcByte & 16 ? white : black;\n          dest32[destPos++] = srcByte & 8 ? white : black;\n          dest32[destPos++] = srcByte & 4 ? white : black;\n          dest32[destPos++] = srcByte & 2 ? white : black;\n          dest32[destPos++] = srcByte & 1 ? white : black;\n        }\n        for (; k < kEnd; k++) {\n          if (mask === 0) {\n            srcByte = src[srcPos++];\n            mask = 128;\n          }\n          dest32[destPos++] = srcByte & mask ? white : black;\n          mask >>= 1;\n        }\n      }\n      while (destPos < dest32DataLength) {\n        dest32[destPos++] = 0;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else if (imgData.kind === util_ImageKind.RGBA_32BPP) {\n    j = 0;\n    elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n    for (i = 0; i < fullChunks; i++) {\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      srcPos += elemsInThisChunk;\n      ctx.putImageData(chunkImgData, 0, j);\n      j += FULL_CHUNK_HEIGHT;\n    }\n    if (i < totalChunks) {\n      elemsInThisChunk = width * partialChunkHeight * 4;\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      ctx.putImageData(chunkImgData, 0, j);\n    }\n  } else if (imgData.kind === util_ImageKind.RGB_24BPP) {\n    thisChunkHeight = FULL_CHUNK_HEIGHT;\n    elemsInThisChunk = width * thisChunkHeight;\n    for (i = 0; i < totalChunks; i++) {\n      if (i >= fullChunks) {\n        thisChunkHeight = partialChunkHeight;\n        elemsInThisChunk = width * thisChunkHeight;\n      }\n      destPos = 0;\n      for (j = elemsInThisChunk; j--;) {\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = 255;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else {\n    throw new Error(`bad image kind: ${imgData.kind}`);\n  }\n}\nfunction putBinaryImageMask(ctx, imgData) {\n  if (imgData.bitmap) {\n    ctx.drawImage(imgData.bitmap, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  for (let i = 0; i < totalChunks; i++) {\n    const thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n    ({\n      srcPos\n    } = convertBlackAndWhiteToRGBA({\n      src,\n      srcPos,\n      dest,\n      width,\n      height: thisChunkHeight,\n      nonBlackColor: 0\n    }));\n    ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n  }\n}\nfunction copyCtxState(sourceCtx, destCtx) {\n  const properties = [\"strokeStyle\", \"fillStyle\", \"fillRule\", \"globalAlpha\", \"lineWidth\", \"lineCap\", \"lineJoin\", \"miterLimit\", \"globalCompositeOperation\", \"font\", \"filter\"];\n  for (const property of properties) {\n    if (sourceCtx[property] !== undefined) {\n      destCtx[property] = sourceCtx[property];\n    }\n  }\n  if (sourceCtx.setLineDash !== undefined) {\n    destCtx.setLineDash(sourceCtx.getLineDash());\n    destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n  }\n}\nfunction resetCtxToDefault(ctx) {\n  ctx.strokeStyle = ctx.fillStyle = \"#000000\";\n  ctx.fillRule = \"nonzero\";\n  ctx.globalAlpha = 1;\n  ctx.lineWidth = 1;\n  ctx.lineCap = \"butt\";\n  ctx.lineJoin = \"miter\";\n  ctx.miterLimit = 10;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.font = \"10px sans-serif\";\n  if (ctx.setLineDash !== undefined) {\n    ctx.setLineDash([]);\n    ctx.lineDashOffset = 0;\n  }\n  if (!isNodeJS) {\n    const {\n      filter\n    } = ctx;\n    if (filter !== \"none\" && filter !== \"\") {\n      ctx.filter = \"none\";\n    }\n  }\n}\nfunction getImageSmoothingEnabled(transform, interpolate) {\n  if (interpolate) {\n    return true;\n  }\n  const scale = Util.singularValueDecompose2dScale(transform);\n  scale[0] = Math.fround(scale[0]);\n  scale[1] = Math.fround(scale[1]);\n  const actualScale = Math.fround((globalThis.devicePixelRatio || 1) * PixelsPerInch.PDF_TO_CSS_UNITS);\n  return scale[0] <= actualScale && scale[1] <= actualScale;\n}\nconst LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\nconst LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\nconst NORMAL_CLIP = {};\nconst EO_CLIP = {};\nclass CanvasGraphics {\n  constructor(canvasCtx, commonObjs, objs, canvasFactory, filterFactory, {\n    optionalContentConfig,\n    markedContentStack = null\n  }, annotationCanvasMap, pageColors) {\n    this.ctx = canvasCtx;\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.stateStack = [];\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.res = null;\n    this.xobjs = null;\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this.groupStack = [];\n    this.processingType3 = null;\n    this.baseTransform = null;\n    this.baseTransformStack = [];\n    this.groupLevel = 0;\n    this.smaskStack = [];\n    this.smaskCounter = 0;\n    this.tempSMask = null;\n    this.suspendedCtx = null;\n    this.contentVisible = true;\n    this.markedContentStack = markedContentStack || [];\n    this.optionalContentConfig = optionalContentConfig;\n    this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n    this.cachedPatterns = new Map();\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.viewportScale = 1;\n    this.outputScaleX = 1;\n    this.outputScaleY = 1;\n    this.pageColors = pageColors;\n    this._cachedScaleForStroking = [-1, 0];\n    this._cachedGetSinglePixelWidth = null;\n    this._cachedBitmapsMap = new Map();\n  }\n  getObject(data, fallback = null) {\n    if (typeof data === \"string\") {\n      return data.startsWith(\"g_\") ? this.commonObjs.get(data) : this.objs.get(data);\n    }\n    return fallback;\n  }\n  beginDrawing({\n    transform,\n    viewport,\n    transparency = false,\n    background = null\n  }) {\n    const width = this.ctx.canvas.width;\n    const height = this.ctx.canvas.height;\n    const savedFillStyle = this.ctx.fillStyle;\n    this.ctx.fillStyle = background || \"#ffffff\";\n    this.ctx.fillRect(0, 0, width, height);\n    this.ctx.fillStyle = savedFillStyle;\n    if (transparency) {\n      const transparentCanvas = this.cachedCanvases.getCanvas(\"transparent\", width, height);\n      this.compositeCtx = this.ctx;\n      this.transparentCanvas = transparentCanvas.canvas;\n      this.ctx = transparentCanvas.context;\n      this.ctx.save();\n      this.ctx.transform(...getCurrentTransform(this.compositeCtx));\n    }\n    this.ctx.save();\n    resetCtxToDefault(this.ctx);\n    if (transform) {\n      this.ctx.transform(...transform);\n      this.outputScaleX = transform[0];\n      this.outputScaleY = transform[0];\n    }\n    this.ctx.transform(...viewport.transform);\n    this.viewportScale = viewport.scale;\n    this.baseTransform = getCurrentTransform(this.ctx);\n  }\n  executeOperatorList(operatorList, executionStartIdx, continueCallback, stepper) {\n    const argsArray = operatorList.argsArray;\n    const fnArray = operatorList.fnArray;\n    let i = executionStartIdx || 0;\n    const argsArrayLen = argsArray.length;\n    if (argsArrayLen === i) {\n      return i;\n    }\n    const chunkOperations = argsArrayLen - i > EXECUTION_STEPS && typeof continueCallback === \"function\";\n    const endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n    let steps = 0;\n    const commonObjs = this.commonObjs;\n    const objs = this.objs;\n    let fnId;\n    while (true) {\n      if (stepper !== undefined && i === stepper.nextBreakPoint) {\n        stepper.breakIt(i, continueCallback);\n        return i;\n      }\n      fnId = fnArray[i];\n      if (fnId !== OPS.dependency) {\n        this[fnId].apply(this, argsArray[i]);\n      } else {\n        for (const depObjId of argsArray[i]) {\n          const objsPool = depObjId.startsWith(\"g_\") ? commonObjs : objs;\n          if (!objsPool.has(depObjId)) {\n            objsPool.get(depObjId, continueCallback);\n            return i;\n          }\n        }\n      }\n      i++;\n      if (i === argsArrayLen) {\n        return i;\n      }\n      if (chunkOperations && ++steps > EXECUTION_STEPS) {\n        if (Date.now() > endTime) {\n          continueCallback();\n          return i;\n        }\n        steps = 0;\n      }\n    }\n  }\n  #restoreInitialState() {\n    while (this.stateStack.length || this.inSMaskMode) {\n      this.restore();\n    }\n    this.ctx.restore();\n    if (this.transparentCanvas) {\n      this.ctx = this.compositeCtx;\n      this.ctx.save();\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n      this.ctx.drawImage(this.transparentCanvas, 0, 0);\n      this.ctx.restore();\n      this.transparentCanvas = null;\n    }\n  }\n  endDrawing() {\n    this.#restoreInitialState();\n    this.cachedCanvases.clear();\n    this.cachedPatterns.clear();\n    for (const cache of this._cachedBitmapsMap.values()) {\n      for (const canvas of cache.values()) {\n        if (typeof HTMLCanvasElement !== \"undefined\" && canvas instanceof HTMLCanvasElement) {\n          canvas.width = canvas.height = 0;\n        }\n      }\n      cache.clear();\n    }\n    this._cachedBitmapsMap.clear();\n    this.#drawFilter();\n  }\n  #drawFilter() {\n    if (this.pageColors) {\n      const hcmFilterId = this.filterFactory.addHCMFilter(this.pageColors.foreground, this.pageColors.background);\n      if (hcmFilterId !== \"none\") {\n        const savedFilter = this.ctx.filter;\n        this.ctx.filter = hcmFilterId;\n        this.ctx.drawImage(this.ctx.canvas, 0, 0);\n        this.ctx.filter = savedFilter;\n      }\n    }\n  }\n  _scaleImage(img, inverseTransform) {\n    const width = img.width;\n    const height = img.height;\n    let widthScale = Math.max(Math.hypot(inverseTransform[0], inverseTransform[1]), 1);\n    let heightScale = Math.max(Math.hypot(inverseTransform[2], inverseTransform[3]), 1);\n    let paintWidth = width,\n      paintHeight = height;\n    let tmpCanvasId = \"prescale1\";\n    let tmpCanvas, tmpCtx;\n    while (widthScale > 2 && paintWidth > 1 || heightScale > 2 && paintHeight > 1) {\n      let newWidth = paintWidth,\n        newHeight = paintHeight;\n      if (widthScale > 2 && paintWidth > 1) {\n        newWidth = paintWidth >= 16384 ? Math.floor(paintWidth / 2) - 1 || 1 : Math.ceil(paintWidth / 2);\n        widthScale /= paintWidth / newWidth;\n      }\n      if (heightScale > 2 && paintHeight > 1) {\n        newHeight = paintHeight >= 16384 ? Math.floor(paintHeight / 2) - 1 || 1 : Math.ceil(paintHeight) / 2;\n        heightScale /= paintHeight / newHeight;\n      }\n      tmpCanvas = this.cachedCanvases.getCanvas(tmpCanvasId, newWidth, newHeight);\n      tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, newWidth, newHeight);\n      tmpCtx.drawImage(img, 0, 0, paintWidth, paintHeight, 0, 0, newWidth, newHeight);\n      img = tmpCanvas.canvas;\n      paintWidth = newWidth;\n      paintHeight = newHeight;\n      tmpCanvasId = tmpCanvasId === \"prescale1\" ? \"prescale2\" : \"prescale1\";\n    }\n    return {\n      img,\n      paintWidth,\n      paintHeight\n    };\n  }\n  _createMaskCanvas(img) {\n    const ctx = this.ctx;\n    const {\n      width,\n      height\n    } = img;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    const currentTransform = getCurrentTransform(ctx);\n    let cache, cacheKey, scaled, maskCanvas;\n    if ((img.bitmap || img.data) && img.count > 1) {\n      const mainKey = img.bitmap || img.data.buffer;\n      cacheKey = JSON.stringify(isPatternFill ? currentTransform : [currentTransform.slice(0, 4), fillColor]);\n      cache = this._cachedBitmapsMap.get(mainKey);\n      if (!cache) {\n        cache = new Map();\n        this._cachedBitmapsMap.set(mainKey, cache);\n      }\n      const cachedImage = cache.get(cacheKey);\n      if (cachedImage && !isPatternFill) {\n        const offsetX = Math.round(Math.min(currentTransform[0], currentTransform[2]) + currentTransform[4]);\n        const offsetY = Math.round(Math.min(currentTransform[1], currentTransform[3]) + currentTransform[5]);\n        return {\n          canvas: cachedImage,\n          offsetX,\n          offsetY\n        };\n      }\n      scaled = cachedImage;\n    }\n    if (!scaled) {\n      maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      putBinaryImageMask(maskCanvas.context, img);\n    }\n    let maskToCanvas = Util.transform(currentTransform, [1 / width, 0, 0, -1 / height, 0, 0]);\n    maskToCanvas = Util.transform(maskToCanvas, [1, 0, 0, 1, 0, -height]);\n    const [minX, minY, maxX, maxY] = Util.getAxialAlignedBoundingBox([0, 0, width, height], maskToCanvas);\n    const drawnWidth = Math.round(maxX - minX) || 1;\n    const drawnHeight = Math.round(maxY - minY) || 1;\n    const fillCanvas = this.cachedCanvases.getCanvas(\"fillCanvas\", drawnWidth, drawnHeight);\n    const fillCtx = fillCanvas.context;\n    const offsetX = minX;\n    const offsetY = minY;\n    fillCtx.translate(-offsetX, -offsetY);\n    fillCtx.transform(...maskToCanvas);\n    if (!scaled) {\n      scaled = this._scaleImage(maskCanvas.canvas, getCurrentTransformInverse(fillCtx));\n      scaled = scaled.img;\n      if (cache && isPatternFill) {\n        cache.set(cacheKey, scaled);\n      }\n    }\n    fillCtx.imageSmoothingEnabled = getImageSmoothingEnabled(getCurrentTransform(fillCtx), img.interpolate);\n    drawImageAtIntegerCoords(fillCtx, scaled, 0, 0, scaled.width, scaled.height, 0, 0, width, height);\n    fillCtx.globalCompositeOperation = \"source-in\";\n    const inverse = Util.transform(getCurrentTransformInverse(fillCtx), [1, 0, 0, 1, -offsetX, -offsetY]);\n    fillCtx.fillStyle = isPatternFill ? fillColor.getPattern(ctx, this, inverse, PathType.FILL) : fillColor;\n    fillCtx.fillRect(0, 0, width, height);\n    if (cache && !isPatternFill) {\n      this.cachedCanvases.delete(\"fillCanvas\");\n      cache.set(cacheKey, fillCanvas.canvas);\n    }\n    return {\n      canvas: fillCanvas.canvas,\n      offsetX: Math.round(offsetX),\n      offsetY: Math.round(offsetY)\n    };\n  }\n  setLineWidth(width) {\n    if (width !== this.current.lineWidth) {\n      this._cachedScaleForStroking[0] = -1;\n    }\n    this.current.lineWidth = width;\n    this.ctx.lineWidth = width;\n  }\n  setLineCap(style) {\n    this.ctx.lineCap = LINE_CAP_STYLES[style];\n  }\n  setLineJoin(style) {\n    this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n  }\n  setMiterLimit(limit) {\n    this.ctx.miterLimit = limit;\n  }\n  setDash(dashArray, dashPhase) {\n    const ctx = this.ctx;\n    if (ctx.setLineDash !== undefined) {\n      ctx.setLineDash(dashArray);\n      ctx.lineDashOffset = dashPhase;\n    }\n  }\n  setRenderingIntent(intent) {}\n  setFlatness(flatness) {}\n  setGState(states) {\n    for (const [key, value] of states) {\n      switch (key) {\n        case \"LW\":\n          this.setLineWidth(value);\n          break;\n        case \"LC\":\n          this.setLineCap(value);\n          break;\n        case \"LJ\":\n          this.setLineJoin(value);\n          break;\n        case \"ML\":\n          this.setMiterLimit(value);\n          break;\n        case \"D\":\n          this.setDash(value[0], value[1]);\n          break;\n        case \"RI\":\n          this.setRenderingIntent(value);\n          break;\n        case \"FL\":\n          this.setFlatness(value);\n          break;\n        case \"Font\":\n          this.setFont(value[0], value[1]);\n          break;\n        case \"CA\":\n          this.current.strokeAlpha = value;\n          break;\n        case \"ca\":\n          this.current.fillAlpha = value;\n          this.ctx.globalAlpha = value;\n          break;\n        case \"BM\":\n          this.ctx.globalCompositeOperation = value;\n          break;\n        case \"SMask\":\n          this.current.activeSMask = value ? this.tempSMask : null;\n          this.tempSMask = null;\n          this.checkSMaskState();\n          break;\n        case \"TR\":\n          this.ctx.filter = this.current.transferMaps = this.filterFactory.addFilter(value);\n          break;\n      }\n    }\n  }\n  get inSMaskMode() {\n    return !!this.suspendedCtx;\n  }\n  checkSMaskState() {\n    const inSMaskMode = this.inSMaskMode;\n    if (this.current.activeSMask && !inSMaskMode) {\n      this.beginSMaskMode();\n    } else if (!this.current.activeSMask && inSMaskMode) {\n      this.endSMaskMode();\n    }\n  }\n  beginSMaskMode() {\n    if (this.inSMaskMode) {\n      throw new Error(\"beginSMaskMode called while already in smask mode\");\n    }\n    const drawnWidth = this.ctx.canvas.width;\n    const drawnHeight = this.ctx.canvas.height;\n    const cacheId = \"smaskGroupAt\" + this.groupLevel;\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    this.suspendedCtx = this.ctx;\n    this.ctx = scratchCanvas.context;\n    const ctx = this.ctx;\n    ctx.setTransform(...getCurrentTransform(this.suspendedCtx));\n    copyCtxState(this.suspendedCtx, ctx);\n    mirrorContextOperations(ctx, this.suspendedCtx);\n    this.setGState([[\"BM\", \"source-over\"], [\"ca\", 1], [\"CA\", 1]]);\n  }\n  endSMaskMode() {\n    if (!this.inSMaskMode) {\n      throw new Error(\"endSMaskMode called while not in smask mode\");\n    }\n    this.ctx._removeMirroring();\n    copyCtxState(this.ctx, this.suspendedCtx);\n    this.ctx = this.suspendedCtx;\n    this.suspendedCtx = null;\n  }\n  compose(dirtyBox) {\n    if (!this.current.activeSMask) {\n      return;\n    }\n    if (!dirtyBox) {\n      dirtyBox = [0, 0, this.ctx.canvas.width, this.ctx.canvas.height];\n    } else {\n      dirtyBox[0] = Math.floor(dirtyBox[0]);\n      dirtyBox[1] = Math.floor(dirtyBox[1]);\n      dirtyBox[2] = Math.ceil(dirtyBox[2]);\n      dirtyBox[3] = Math.ceil(dirtyBox[3]);\n    }\n    const smask = this.current.activeSMask;\n    const suspendedCtx = this.suspendedCtx;\n    this.composeSMask(suspendedCtx, smask, this.ctx, dirtyBox);\n    this.ctx.save();\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.ctx.restore();\n  }\n  composeSMask(ctx, smask, layerCtx, layerBox) {\n    const layerOffsetX = layerBox[0];\n    const layerOffsetY = layerBox[1];\n    const layerWidth = layerBox[2] - layerOffsetX;\n    const layerHeight = layerBox[3] - layerOffsetY;\n    if (layerWidth === 0 || layerHeight === 0) {\n      return;\n    }\n    this.genericComposeSMask(smask.context, layerCtx, layerWidth, layerHeight, smask.subtype, smask.backdrop, smask.transferMap, layerOffsetX, layerOffsetY, smask.offsetX, smask.offsetY);\n    ctx.save();\n    ctx.globalAlpha = 1;\n    ctx.globalCompositeOperation = \"source-over\";\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(layerCtx.canvas, 0, 0);\n    ctx.restore();\n  }\n  genericComposeSMask(maskCtx, layerCtx, width, height, subtype, backdrop, transferMap, layerOffsetX, layerOffsetY, maskOffsetX, maskOffsetY) {\n    let maskCanvas = maskCtx.canvas;\n    let maskX = layerOffsetX - maskOffsetX;\n    let maskY = layerOffsetY - maskOffsetY;\n    if (backdrop) {\n      if (maskX < 0 || maskY < 0 || maskX + width > maskCanvas.width || maskY + height > maskCanvas.height) {\n        const canvas = this.cachedCanvases.getCanvas(\"maskExtension\", width, height);\n        const ctx = canvas.context;\n        ctx.drawImage(maskCanvas, -maskX, -maskY);\n        if (backdrop.some(c => c !== 0)) {\n          ctx.globalCompositeOperation = \"destination-atop\";\n          ctx.fillStyle = Util.makeHexColor(...backdrop);\n          ctx.fillRect(0, 0, width, height);\n          ctx.globalCompositeOperation = \"source-over\";\n        }\n        maskCanvas = canvas.canvas;\n        maskX = maskY = 0;\n      } else if (backdrop.some(c => c !== 0)) {\n        maskCtx.save();\n        maskCtx.globalAlpha = 1;\n        maskCtx.setTransform(1, 0, 0, 1, 0, 0);\n        const clip = new Path2D();\n        clip.rect(maskX, maskY, width, height);\n        maskCtx.clip(clip);\n        maskCtx.globalCompositeOperation = \"destination-atop\";\n        maskCtx.fillStyle = Util.makeHexColor(...backdrop);\n        maskCtx.fillRect(maskX, maskY, width, height);\n        maskCtx.restore();\n      }\n    }\n    layerCtx.save();\n    layerCtx.globalAlpha = 1;\n    layerCtx.setTransform(1, 0, 0, 1, 0, 0);\n    if (subtype === \"Alpha\" && transferMap) {\n      layerCtx.filter = this.filterFactory.addAlphaFilter(transferMap);\n    } else if (subtype === \"Luminosity\") {\n      layerCtx.filter = this.filterFactory.addLuminosityFilter(transferMap);\n    }\n    const clip = new Path2D();\n    clip.rect(layerOffsetX, layerOffsetY, width, height);\n    layerCtx.clip(clip);\n    layerCtx.globalCompositeOperation = \"destination-in\";\n    layerCtx.drawImage(maskCanvas, maskX, maskY, width, height, layerOffsetX, layerOffsetY, width, height);\n    layerCtx.restore();\n  }\n  save() {\n    if (this.inSMaskMode) {\n      copyCtxState(this.ctx, this.suspendedCtx);\n      this.suspendedCtx.save();\n    } else {\n      this.ctx.save();\n    }\n    const old = this.current;\n    this.stateStack.push(old);\n    this.current = old.clone();\n  }\n  restore() {\n    if (this.stateStack.length === 0 && this.inSMaskMode) {\n      this.endSMaskMode();\n    }\n    if (this.stateStack.length !== 0) {\n      this.current = this.stateStack.pop();\n      if (this.inSMaskMode) {\n        this.suspendedCtx.restore();\n        copyCtxState(this.suspendedCtx, this.ctx);\n      } else {\n        this.ctx.restore();\n      }\n      this.checkSMaskState();\n      this.pendingClip = null;\n      this._cachedScaleForStroking[0] = -1;\n      this._cachedGetSinglePixelWidth = null;\n    }\n  }\n  transform(a, b, c, d, e, f) {\n    this.ctx.transform(a, b, c, d, e, f);\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n  constructPath(ops, args, minMax) {\n    const ctx = this.ctx;\n    const current = this.current;\n    let x = current.x,\n      y = current.y;\n    let startX, startY;\n    const currentTransform = getCurrentTransform(ctx);\n    const isScalingMatrix = currentTransform[0] === 0 && currentTransform[3] === 0 || currentTransform[1] === 0 && currentTransform[2] === 0;\n    const minMaxForBezier = isScalingMatrix ? minMax.slice(0) : null;\n    for (let i = 0, j = 0, ii = ops.length; i < ii; i++) {\n      switch (ops[i] | 0) {\n        case OPS.rectangle:\n          x = args[j++];\n          y = args[j++];\n          const width = args[j++];\n          const height = args[j++];\n          const xw = x + width;\n          const yh = y + height;\n          ctx.moveTo(x, y);\n          if (width === 0 || height === 0) {\n            ctx.lineTo(xw, yh);\n          } else {\n            ctx.lineTo(xw, y);\n            ctx.lineTo(xw, yh);\n            ctx.lineTo(x, yh);\n          }\n          if (!isScalingMatrix) {\n            current.updateRectMinMax(currentTransform, [x, y, xw, yh]);\n          }\n          ctx.closePath();\n          break;\n        case OPS.moveTo:\n          x = args[j++];\n          y = args[j++];\n          ctx.moveTo(x, y);\n          if (!isScalingMatrix) {\n            current.updatePathMinMax(currentTransform, x, y);\n          }\n          break;\n        case OPS.lineTo:\n          x = args[j++];\n          y = args[j++];\n          ctx.lineTo(x, y);\n          if (!isScalingMatrix) {\n            current.updatePathMinMax(currentTransform, x, y);\n          }\n          break;\n        case OPS.curveTo:\n          startX = x;\n          startY = y;\n          x = args[j + 4];\n          y = args[j + 5];\n          ctx.bezierCurveTo(args[j], args[j + 1], args[j + 2], args[j + 3], x, y);\n          current.updateCurvePathMinMax(currentTransform, startX, startY, args[j], args[j + 1], args[j + 2], args[j + 3], x, y, minMaxForBezier);\n          j += 6;\n          break;\n        case OPS.curveTo2:\n          startX = x;\n          startY = y;\n          ctx.bezierCurveTo(x, y, args[j], args[j + 1], args[j + 2], args[j + 3]);\n          current.updateCurvePathMinMax(currentTransform, startX, startY, x, y, args[j], args[j + 1], args[j + 2], args[j + 3], minMaxForBezier);\n          x = args[j + 2];\n          y = args[j + 3];\n          j += 4;\n          break;\n        case OPS.curveTo3:\n          startX = x;\n          startY = y;\n          x = args[j + 2];\n          y = args[j + 3];\n          ctx.bezierCurveTo(args[j], args[j + 1], x, y, x, y);\n          current.updateCurvePathMinMax(currentTransform, startX, startY, args[j], args[j + 1], x, y, x, y, minMaxForBezier);\n          j += 4;\n          break;\n        case OPS.closePath:\n          ctx.closePath();\n          break;\n      }\n    }\n    if (isScalingMatrix) {\n      current.updateScalingPathMinMax(currentTransform, minMaxForBezier);\n    }\n    current.setCurrentPoint(x, y);\n  }\n  closePath() {\n    this.ctx.closePath();\n  }\n  stroke(consumePath = true) {\n    const ctx = this.ctx;\n    const strokeColor = this.current.strokeColor;\n    ctx.globalAlpha = this.current.strokeAlpha;\n    if (this.contentVisible) {\n      if (typeof strokeColor === \"object\" && strokeColor?.getPattern) {\n        ctx.save();\n        ctx.strokeStyle = strokeColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.STROKE);\n        this.rescaleAndStroke(false);\n        ctx.restore();\n      } else {\n        this.rescaleAndStroke(true);\n      }\n    }\n    if (consumePath) {\n      this.consumePath(this.current.getClippedPathBoundingBox());\n    }\n    ctx.globalAlpha = this.current.fillAlpha;\n  }\n  closeStroke() {\n    this.closePath();\n    this.stroke();\n  }\n  fill(consumePath = true) {\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    let needRestore = false;\n    if (isPatternFill) {\n      ctx.save();\n      ctx.fillStyle = fillColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.FILL);\n      needRestore = true;\n    }\n    const intersect = this.current.getClippedPathBoundingBox();\n    if (this.contentVisible && intersect !== null) {\n      if (this.pendingEOFill) {\n        ctx.fill(\"evenodd\");\n        this.pendingEOFill = false;\n      } else {\n        ctx.fill();\n      }\n    }\n    if (needRestore) {\n      ctx.restore();\n    }\n    if (consumePath) {\n      this.consumePath(intersect);\n    }\n  }\n  eoFill() {\n    this.pendingEOFill = true;\n    this.fill();\n  }\n  fillStroke() {\n    this.fill(false);\n    this.stroke(false);\n    this.consumePath();\n  }\n  eoFillStroke() {\n    this.pendingEOFill = true;\n    this.fillStroke();\n  }\n  closeFillStroke() {\n    this.closePath();\n    this.fillStroke();\n  }\n  closeEOFillStroke() {\n    this.pendingEOFill = true;\n    this.closePath();\n    this.fillStroke();\n  }\n  endPath() {\n    this.consumePath();\n  }\n  clip() {\n    this.pendingClip = NORMAL_CLIP;\n  }\n  eoClip() {\n    this.pendingClip = EO_CLIP;\n  }\n  beginText() {\n    this.current.textMatrix = IDENTITY_MATRIX;\n    this.current.textMatrixScale = 1;\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n  endText() {\n    const paths = this.pendingTextPaths;\n    const ctx = this.ctx;\n    if (paths === undefined) {\n      ctx.beginPath();\n      return;\n    }\n    ctx.save();\n    ctx.beginPath();\n    for (const path of paths) {\n      ctx.setTransform(...path.transform);\n      ctx.translate(path.x, path.y);\n      path.addToPath(ctx, path.fontSize);\n    }\n    ctx.restore();\n    ctx.clip();\n    ctx.beginPath();\n    delete this.pendingTextPaths;\n  }\n  setCharSpacing(spacing) {\n    this.current.charSpacing = spacing;\n  }\n  setWordSpacing(spacing) {\n    this.current.wordSpacing = spacing;\n  }\n  setHScale(scale) {\n    this.current.textHScale = scale / 100;\n  }\n  setLeading(leading) {\n    this.current.leading = -leading;\n  }\n  setFont(fontRefName, size) {\n    const fontObj = this.commonObjs.get(fontRefName);\n    const current = this.current;\n    if (!fontObj) {\n      throw new Error(`Can't find font for ${fontRefName}`);\n    }\n    current.fontMatrix = fontObj.fontMatrix || FONT_IDENTITY_MATRIX;\n    if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {\n      warn(\"Invalid font matrix for font \" + fontRefName);\n    }\n    if (size < 0) {\n      size = -size;\n      current.fontDirection = -1;\n    } else {\n      current.fontDirection = 1;\n    }\n    this.current.font = fontObj;\n    this.current.fontSize = size;\n    if (fontObj.isType3Font) {\n      return;\n    }\n    const name = fontObj.loadedName || \"sans-serif\";\n    const typeface = fontObj.systemFontInfo?.css || `\"${name}\", ${fontObj.fallbackName}`;\n    let bold = \"normal\";\n    if (fontObj.black) {\n      bold = \"900\";\n    } else if (fontObj.bold) {\n      bold = \"bold\";\n    }\n    const italic = fontObj.italic ? \"italic\" : \"normal\";\n    let browserFontSize = size;\n    if (size < MIN_FONT_SIZE) {\n      browserFontSize = MIN_FONT_SIZE;\n    } else if (size > MAX_FONT_SIZE) {\n      browserFontSize = MAX_FONT_SIZE;\n    }\n    this.current.fontSizeScale = size / browserFontSize;\n    this.ctx.font = `${italic} ${bold} ${browserFontSize}px ${typeface}`;\n  }\n  setTextRenderingMode(mode) {\n    this.current.textRenderingMode = mode;\n  }\n  setTextRise(rise) {\n    this.current.textRise = rise;\n  }\n  moveText(x, y) {\n    this.current.x = this.current.lineX += x;\n    this.current.y = this.current.lineY += y;\n  }\n  setLeadingMoveText(x, y) {\n    this.setLeading(-y);\n    this.moveText(x, y);\n  }\n  setTextMatrix(a, b, c, d, e, f) {\n    this.current.textMatrix = [a, b, c, d, e, f];\n    this.current.textMatrixScale = Math.hypot(a, b);\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n  nextLine() {\n    this.moveText(0, this.current.leading);\n  }\n  paintChar(character, x, y, patternTransform) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const textRenderingMode = current.textRenderingMode;\n    const fontSize = current.fontSize / current.fontSizeScale;\n    const fillStrokeMode = textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n    const isAddToPathSet = !!(textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG);\n    const patternFill = current.patternFill && !font.missingFile;\n    let addToPath;\n    if (font.disableFontFace || isAddToPathSet || patternFill) {\n      addToPath = font.getPathGenerator(this.commonObjs, character);\n    }\n    if (font.disableFontFace || patternFill) {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.beginPath();\n      addToPath(ctx, fontSize);\n      if (patternTransform) {\n        ctx.setTransform(...patternTransform);\n      }\n      if (fillStrokeMode === TextRenderingMode.FILL || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.fill();\n      }\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.stroke();\n      }\n      ctx.restore();\n    } else {\n      if (fillStrokeMode === TextRenderingMode.FILL || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.fillText(character, x, y);\n      }\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.strokeText(character, x, y);\n      }\n    }\n    if (isAddToPathSet) {\n      const paths = this.pendingTextPaths ||= [];\n      paths.push({\n        transform: getCurrentTransform(ctx),\n        x,\n        y,\n        fontSize,\n        addToPath\n      });\n    }\n  }\n  get isFontSubpixelAAEnabled() {\n    const {\n      context: ctx\n    } = this.cachedCanvases.getCanvas(\"isFontSubpixelAAEnabled\", 10, 10);\n    ctx.scale(1.5, 1);\n    ctx.fillText(\"I\", 0, 10);\n    const data = ctx.getImageData(0, 0, 10, 10).data;\n    let enabled = false;\n    for (let i = 3; i < data.length; i += 4) {\n      if (data[i] > 0 && data[i] < 255) {\n        enabled = true;\n        break;\n      }\n    }\n    return shadow(this, \"isFontSubpixelAAEnabled\", enabled);\n  }\n  showText(glyphs) {\n    const current = this.current;\n    const font = current.font;\n    if (font.isType3Font) {\n      return this.showType3Text(glyphs);\n    }\n    const fontSize = current.fontSize;\n    if (fontSize === 0) {\n      return undefined;\n    }\n    const ctx = this.ctx;\n    const fontSizeScale = current.fontSizeScale;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const fontDirection = current.fontDirection;\n    const textHScale = current.textHScale * fontDirection;\n    const glyphsLength = glyphs.length;\n    const vertical = font.vertical;\n    const spacingDir = vertical ? 1 : -1;\n    const defaultVMetrics = font.defaultVMetrics;\n    const widthAdvanceScale = fontSize * current.fontMatrix[0];\n    const simpleFillText = current.textRenderingMode === TextRenderingMode.FILL && !font.disableFontFace && !current.patternFill;\n    ctx.save();\n    ctx.transform(...current.textMatrix);\n    ctx.translate(current.x, current.y + current.textRise);\n    if (fontDirection > 0) {\n      ctx.scale(textHScale, -1);\n    } else {\n      ctx.scale(textHScale, 1);\n    }\n    let patternTransform;\n    if (current.patternFill) {\n      ctx.save();\n      const pattern = current.fillColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.FILL);\n      patternTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.fillStyle = pattern;\n    }\n    let lineWidth = current.lineWidth;\n    const scale = current.textMatrixScale;\n    if (scale === 0 || lineWidth === 0) {\n      const fillStrokeMode = current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        lineWidth = this.getSinglePixelWidth();\n      }\n    } else {\n      lineWidth /= scale;\n    }\n    if (fontSizeScale !== 1.0) {\n      ctx.scale(fontSizeScale, fontSizeScale);\n      lineWidth /= fontSizeScale;\n    }\n    ctx.lineWidth = lineWidth;\n    if (font.isInvalidPDFjsFont) {\n      const chars = [];\n      let width = 0;\n      for (const glyph of glyphs) {\n        chars.push(glyph.unicode);\n        width += glyph.width;\n      }\n      ctx.fillText(chars.join(\"\"), 0, 0);\n      current.x += width * widthAdvanceScale * textHScale;\n      ctx.restore();\n      this.compose();\n      return undefined;\n    }\n    let x = 0,\n      i;\n    for (i = 0; i < glyphsLength; ++i) {\n      const glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        x += spacingDir * glyph * fontSize / 1000;\n        continue;\n      }\n      let restoreNeeded = false;\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const character = glyph.fontChar;\n      const accent = glyph.accent;\n      let scaledX, scaledY;\n      let width = glyph.width;\n      if (vertical) {\n        const vmetric = glyph.vmetric || defaultVMetrics;\n        const vx = -(glyph.vmetric ? vmetric[1] : width * 0.5) * widthAdvanceScale;\n        const vy = vmetric[2] * widthAdvanceScale;\n        width = vmetric ? -vmetric[0] : width;\n        scaledX = vx / fontSizeScale;\n        scaledY = (x + vy) / fontSizeScale;\n      } else {\n        scaledX = x / fontSizeScale;\n        scaledY = 0;\n      }\n      if (font.remeasure && width > 0) {\n        const measuredWidth = ctx.measureText(character).width * 1000 / fontSize * fontSizeScale;\n        if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n          const characterScaleX = width / measuredWidth;\n          restoreNeeded = true;\n          ctx.save();\n          ctx.scale(characterScaleX, 1);\n          scaledX /= characterScaleX;\n        } else if (width !== measuredWidth) {\n          scaledX += (width - measuredWidth) / 2000 * fontSize / fontSizeScale;\n        }\n      }\n      if (this.contentVisible && (glyph.isInFont || font.missingFile)) {\n        if (simpleFillText && !accent) {\n          ctx.fillText(character, scaledX, scaledY);\n        } else {\n          this.paintChar(character, scaledX, scaledY, patternTransform);\n          if (accent) {\n            const scaledAccentX = scaledX + fontSize * accent.offset.x / fontSizeScale;\n            const scaledAccentY = scaledY - fontSize * accent.offset.y / fontSizeScale;\n            this.paintChar(accent.fontChar, scaledAccentX, scaledAccentY, patternTransform);\n          }\n        }\n      }\n      const charWidth = vertical ? width * widthAdvanceScale - spacing * fontDirection : width * widthAdvanceScale + spacing * fontDirection;\n      x += charWidth;\n      if (restoreNeeded) {\n        ctx.restore();\n      }\n    }\n    if (vertical) {\n      current.y -= x;\n    } else {\n      current.x += x * textHScale;\n    }\n    ctx.restore();\n    this.compose();\n    return undefined;\n  }\n  showType3Text(glyphs) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const fontSize = current.fontSize;\n    const fontDirection = current.fontDirection;\n    const spacingDir = font.vertical ? 1 : -1;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const textHScale = current.textHScale * fontDirection;\n    const fontMatrix = current.fontMatrix || FONT_IDENTITY_MATRIX;\n    const glyphsLength = glyphs.length;\n    const isTextInvisible = current.textRenderingMode === TextRenderingMode.INVISIBLE;\n    let i, glyph, width, spacingLength;\n    if (isTextInvisible || fontSize === 0) {\n      return;\n    }\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n    ctx.save();\n    ctx.transform(...current.textMatrix);\n    ctx.translate(current.x, current.y);\n    ctx.scale(textHScale, fontDirection);\n    for (i = 0; i < glyphsLength; ++i) {\n      glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        spacingLength = spacingDir * glyph * fontSize / 1000;\n        this.ctx.translate(spacingLength, 0);\n        current.x += spacingLength * textHScale;\n        continue;\n      }\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const operatorList = font.charProcOperatorList[glyph.operatorListId];\n      if (!operatorList) {\n        warn(`Type3 character \"${glyph.operatorListId}\" is not available.`);\n        continue;\n      }\n      if (this.contentVisible) {\n        this.processingType3 = glyph;\n        this.save();\n        ctx.scale(fontSize, fontSize);\n        ctx.transform(...fontMatrix);\n        this.executeOperatorList(operatorList);\n        this.restore();\n      }\n      const transformed = Util.applyTransform([glyph.width, 0], fontMatrix);\n      width = transformed[0] * fontSize + spacing;\n      ctx.translate(width, 0);\n      current.x += width * textHScale;\n    }\n    ctx.restore();\n    this.processingType3 = null;\n  }\n  setCharWidth(xWidth, yWidth) {}\n  setCharWidthAndBounds(xWidth, yWidth, llx, lly, urx, ury) {\n    this.ctx.rect(llx, lly, urx - llx, ury - lly);\n    this.ctx.clip();\n    this.endPath();\n  }\n  getColorN_Pattern(IR) {\n    let pattern;\n    if (IR[0] === \"TilingPattern\") {\n      const color = IR[1];\n      const baseTransform = this.baseTransform || getCurrentTransform(this.ctx);\n      const canvasGraphicsFactory = {\n        createCanvasGraphics: ctx => new CanvasGraphics(ctx, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n          optionalContentConfig: this.optionalContentConfig,\n          markedContentStack: this.markedContentStack\n        })\n      };\n      pattern = new TilingPattern(IR, color, this.ctx, canvasGraphicsFactory, baseTransform);\n    } else {\n      pattern = this._getPattern(IR[1], IR[2]);\n    }\n    return pattern;\n  }\n  setStrokeColorN() {\n    this.current.strokeColor = this.getColorN_Pattern(arguments);\n  }\n  setFillColorN() {\n    this.current.fillColor = this.getColorN_Pattern(arguments);\n    this.current.patternFill = true;\n  }\n  setStrokeRGBColor(r, g, b) {\n    const color = Util.makeHexColor(r, g, b);\n    this.ctx.strokeStyle = color;\n    this.current.strokeColor = color;\n  }\n  setFillRGBColor(r, g, b) {\n    const color = Util.makeHexColor(r, g, b);\n    this.ctx.fillStyle = color;\n    this.current.fillColor = color;\n    this.current.patternFill = false;\n  }\n  _getPattern(objId, matrix = null) {\n    let pattern;\n    if (this.cachedPatterns.has(objId)) {\n      pattern = this.cachedPatterns.get(objId);\n    } else {\n      pattern = getShadingPattern(this.getObject(objId));\n      this.cachedPatterns.set(objId, pattern);\n    }\n    if (matrix) {\n      pattern.matrix = matrix;\n    }\n    return pattern;\n  }\n  shadingFill(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    this.save();\n    const pattern = this._getPattern(objId);\n    ctx.fillStyle = pattern.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.SHADING);\n    const inv = getCurrentTransformInverse(ctx);\n    if (inv) {\n      const {\n        width,\n        height\n      } = ctx.canvas;\n      const [x0, y0, x1, y1] = Util.getAxialAlignedBoundingBox([0, 0, width, height], inv);\n      this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n    } else {\n      this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n    }\n    this.compose(this.current.getClippedPathBoundingBox());\n    this.restore();\n  }\n  beginInlineImage() {\n    unreachable(\"Should not call beginInlineImage\");\n  }\n  beginImageData() {\n    unreachable(\"Should not call beginImageData\");\n  }\n  paintFormXObjectBegin(matrix, bbox) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    this.baseTransformStack.push(this.baseTransform);\n    if (matrix) {\n      this.transform(...matrix);\n    }\n    this.baseTransform = getCurrentTransform(this.ctx);\n    if (bbox) {\n      const width = bbox[2] - bbox[0];\n      const height = bbox[3] - bbox[1];\n      this.ctx.rect(bbox[0], bbox[1], width, height);\n      this.current.updateRectMinMax(getCurrentTransform(this.ctx), bbox);\n      this.clip();\n      this.endPath();\n    }\n  }\n  paintFormXObjectEnd() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.restore();\n    this.baseTransform = this.baseTransformStack.pop();\n  }\n  beginGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    if (this.inSMaskMode) {\n      this.endSMaskMode();\n      this.current.activeSMask = null;\n    }\n    const currentCtx = this.ctx;\n    if (!group.isolated) {\n      info(\"TODO: Support non-isolated groups.\");\n    }\n    if (group.knockout) {\n      warn(\"Knockout groups not supported.\");\n    }\n    const currentTransform = getCurrentTransform(currentCtx);\n    if (group.matrix) {\n      currentCtx.transform(...group.matrix);\n    }\n    if (!group.bbox) {\n      throw new Error(\"Bounding box is required.\");\n    }\n    let bounds = Util.getAxialAlignedBoundingBox(group.bbox, getCurrentTransform(currentCtx));\n    const canvasBounds = [0, 0, currentCtx.canvas.width, currentCtx.canvas.height];\n    bounds = Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n    const offsetX = Math.floor(bounds[0]);\n    const offsetY = Math.floor(bounds[1]);\n    const drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n    const drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n    this.current.startNewPathAndClipBox([0, 0, drawnWidth, drawnHeight]);\n    let cacheId = \"groupAt\" + this.groupLevel;\n    if (group.smask) {\n      cacheId += \"_smask_\" + this.smaskCounter++ % 2;\n    }\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    const groupCtx = scratchCanvas.context;\n    groupCtx.translate(-offsetX, -offsetY);\n    groupCtx.transform(...currentTransform);\n    if (group.smask) {\n      this.smaskStack.push({\n        canvas: scratchCanvas.canvas,\n        context: groupCtx,\n        offsetX,\n        offsetY,\n        subtype: group.smask.subtype,\n        backdrop: group.smask.backdrop,\n        transferMap: group.smask.transferMap || null,\n        startTransformInverse: null\n      });\n    } else {\n      currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n      currentCtx.translate(offsetX, offsetY);\n      currentCtx.save();\n    }\n    copyCtxState(currentCtx, groupCtx);\n    this.ctx = groupCtx;\n    this.setGState([[\"BM\", \"source-over\"], [\"ca\", 1], [\"CA\", 1]]);\n    this.groupStack.push(currentCtx);\n    this.groupLevel++;\n  }\n  endGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.groupLevel--;\n    const groupCtx = this.ctx;\n    const ctx = this.groupStack.pop();\n    this.ctx = ctx;\n    this.ctx.imageSmoothingEnabled = false;\n    if (group.smask) {\n      this.tempSMask = this.smaskStack.pop();\n      this.restore();\n    } else {\n      this.ctx.restore();\n      const currentMtx = getCurrentTransform(this.ctx);\n      this.restore();\n      this.ctx.save();\n      this.ctx.setTransform(...currentMtx);\n      const dirtyBox = Util.getAxialAlignedBoundingBox([0, 0, groupCtx.canvas.width, groupCtx.canvas.height], currentMtx);\n      this.ctx.drawImage(groupCtx.canvas, 0, 0);\n      this.ctx.restore();\n      this.compose(dirtyBox);\n    }\n  }\n  beginAnnotation(id, rect, transform, matrix, hasOwnCanvas) {\n    this.#restoreInitialState();\n    resetCtxToDefault(this.ctx);\n    this.ctx.save();\n    this.save();\n    if (this.baseTransform) {\n      this.ctx.setTransform(...this.baseTransform);\n    }\n    if (rect) {\n      const width = rect[2] - rect[0];\n      const height = rect[3] - rect[1];\n      if (hasOwnCanvas && this.annotationCanvasMap) {\n        transform = transform.slice();\n        transform[4] -= rect[0];\n        transform[5] -= rect[1];\n        rect = rect.slice();\n        rect[0] = rect[1] = 0;\n        rect[2] = width;\n        rect[3] = height;\n        const [scaleX, scaleY] = Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx));\n        const {\n          viewportScale\n        } = this;\n        const canvasWidth = Math.ceil(width * this.outputScaleX * viewportScale);\n        const canvasHeight = Math.ceil(height * this.outputScaleY * viewportScale);\n        this.annotationCanvas = this.canvasFactory.create(canvasWidth, canvasHeight);\n        const {\n          canvas,\n          context\n        } = this.annotationCanvas;\n        this.annotationCanvasMap.set(id, canvas);\n        this.annotationCanvas.savedCtx = this.ctx;\n        this.ctx = context;\n        this.ctx.save();\n        this.ctx.setTransform(scaleX, 0, 0, -scaleY, 0, height * scaleY);\n        resetCtxToDefault(this.ctx);\n      } else {\n        resetCtxToDefault(this.ctx);\n        this.ctx.rect(rect[0], rect[1], width, height);\n        this.ctx.clip();\n        this.endPath();\n      }\n    }\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.transform(...transform);\n    this.transform(...matrix);\n  }\n  endAnnotation() {\n    if (this.annotationCanvas) {\n      this.ctx.restore();\n      this.#drawFilter();\n      this.ctx = this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas;\n    }\n  }\n  paintImageMaskXObject(img) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const count = img.count;\n    img = this.getObject(img.data, img);\n    img.count = count;\n    const ctx = this.ctx;\n    const glyph = this.processingType3;\n    if (glyph) {\n      if (glyph.compiled === undefined) {\n        glyph.compiled = compileType3Glyph(img);\n      }\n      if (glyph.compiled) {\n        glyph.compiled(ctx);\n        return;\n      }\n    }\n    const mask = this._createMaskCanvas(img);\n    const maskCanvas = mask.canvas;\n    ctx.save();\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(maskCanvas, mask.offsetX, mask.offsetY);\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectRepeat(img, scaleX, skewX = 0, skewY = 0, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    img = this.getObject(img.data, img);\n    const ctx = this.ctx;\n    ctx.save();\n    const currentTransform = getCurrentTransform(ctx);\n    ctx.transform(scaleX, skewX, skewY, scaleY, 0, 0);\n    const mask = this._createMaskCanvas(img);\n    ctx.setTransform(1, 0, 0, 1, mask.offsetX - currentTransform[4], mask.offsetY - currentTransform[5]);\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      const trans = Util.transform(currentTransform, [scaleX, skewX, skewY, scaleY, positions[i], positions[i + 1]]);\n      const [x, y] = Util.applyTransform([0, 0], trans);\n      ctx.drawImage(mask.canvas, x, y);\n    }\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectGroup(images) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    for (const image of images) {\n      const {\n        data,\n        width,\n        height,\n        transform\n      } = image;\n      const maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      const maskCtx = maskCanvas.context;\n      maskCtx.save();\n      const img = this.getObject(data, image);\n      putBinaryImageMask(maskCtx, img);\n      maskCtx.globalCompositeOperation = \"source-in\";\n      maskCtx.fillStyle = isPatternFill ? fillColor.getPattern(maskCtx, this, getCurrentTransformInverse(ctx), PathType.FILL) : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n      maskCtx.restore();\n      ctx.save();\n      ctx.transform(...transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, maskCanvas.canvas, 0, 0, width, height, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintImageXObject(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    this.paintInlineImageXObject(imgData);\n  }\n  paintImageXObjectRepeat(objId, scaleX, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const map = [];\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      map.push({\n        transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],\n        x: 0,\n        y: 0,\n        w: width,\n        h: height\n      });\n    }\n    this.paintInlineImageXObjectGroup(imgData, map);\n  }\n  applyTransferMapsToCanvas(ctx) {\n    if (this.current.transferMaps !== \"none\") {\n      ctx.filter = this.current.transferMaps;\n      ctx.drawImage(ctx.canvas, 0, 0);\n      ctx.filter = \"none\";\n    }\n    return ctx.canvas;\n  }\n  applyTransferMapsToBitmap(imgData) {\n    if (this.current.transferMaps === \"none\") {\n      return imgData.bitmap;\n    }\n    const {\n      bitmap,\n      width,\n      height\n    } = imgData;\n    const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n    const tmpCtx = tmpCanvas.context;\n    tmpCtx.filter = this.current.transferMaps;\n    tmpCtx.drawImage(bitmap, 0, 0);\n    tmpCtx.filter = \"none\";\n    return tmpCanvas.canvas;\n  }\n  paintInlineImageXObject(imgData) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const ctx = this.ctx;\n    this.save();\n    if (!isNodeJS) {\n      const {\n        filter\n      } = ctx;\n      if (filter !== \"none\" && filter !== \"\") {\n        ctx.filter = \"none\";\n      }\n    }\n    ctx.scale(1 / width, -1 / height);\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = this.applyTransferMapsToBitmap(imgData);\n    } else if (typeof HTMLElement === \"function\" && imgData instanceof HTMLElement || !imgData.data) {\n      imgToPaint = imgData;\n    } else {\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    const scaled = this._scaleImage(imgToPaint, getCurrentTransformInverse(ctx));\n    ctx.imageSmoothingEnabled = getImageSmoothingEnabled(getCurrentTransform(ctx), imgData.interpolate);\n    drawImageAtIntegerCoords(ctx, scaled.img, 0, 0, scaled.paintWidth, scaled.paintHeight, 0, -height, width, height);\n    this.compose();\n    this.restore();\n  }\n  paintInlineImageXObjectGroup(imgData, map) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = imgData.bitmap;\n    } else {\n      const w = imgData.width;\n      const h = imgData.height;\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", w, h);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    for (const entry of map) {\n      ctx.save();\n      ctx.transform(...entry.transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, imgToPaint, entry.x, entry.y, entry.w, entry.h, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintSolidColorImageMask() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.ctx.fillRect(0, 0, 1, 1);\n    this.compose();\n  }\n  markPoint(tag) {}\n  markPointProps(tag, properties) {}\n  beginMarkedContent(tag) {\n    this.markedContentStack.push({\n      visible: true\n    });\n  }\n  beginMarkedContentProps(tag, properties) {\n    if (tag === \"OC\") {\n      this.markedContentStack.push({\n        visible: this.optionalContentConfig.isVisible(properties)\n      });\n    } else {\n      this.markedContentStack.push({\n        visible: true\n      });\n    }\n    this.contentVisible = this.isContentVisible();\n  }\n  endMarkedContent() {\n    this.markedContentStack.pop();\n    this.contentVisible = this.isContentVisible();\n  }\n  beginCompat() {}\n  endCompat() {}\n  consumePath(clipBox) {\n    const isEmpty = this.current.isEmptyClip();\n    if (this.pendingClip) {\n      this.current.updateClipFromPath();\n    }\n    if (!this.pendingClip) {\n      this.compose(clipBox);\n    }\n    const ctx = this.ctx;\n    if (this.pendingClip) {\n      if (!isEmpty) {\n        if (this.pendingClip === EO_CLIP) {\n          ctx.clip(\"evenodd\");\n        } else {\n          ctx.clip();\n        }\n      }\n      this.pendingClip = null;\n    }\n    this.current.startNewPathAndClipBox(this.current.clipBox);\n    ctx.beginPath();\n  }\n  getSinglePixelWidth() {\n    if (!this._cachedGetSinglePixelWidth) {\n      const m = getCurrentTransform(this.ctx);\n      if (m[1] === 0 && m[2] === 0) {\n        this._cachedGetSinglePixelWidth = 1 / Math.min(Math.abs(m[0]), Math.abs(m[3]));\n      } else {\n        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);\n        const normX = Math.hypot(m[0], m[2]);\n        const normY = Math.hypot(m[1], m[3]);\n        this._cachedGetSinglePixelWidth = Math.max(normX, normY) / absDet;\n      }\n    }\n    return this._cachedGetSinglePixelWidth;\n  }\n  getScaleForStroking() {\n    if (this._cachedScaleForStroking[0] === -1) {\n      const {\n        lineWidth\n      } = this.current;\n      const {\n        a,\n        b,\n        c,\n        d\n      } = this.ctx.getTransform();\n      let scaleX, scaleY;\n      if (b === 0 && c === 0) {\n        const normX = Math.abs(a);\n        const normY = Math.abs(d);\n        if (normX === normY) {\n          if (lineWidth === 0) {\n            scaleX = scaleY = 1 / normX;\n          } else {\n            const scaledLineWidth = normX * lineWidth;\n            scaleX = scaleY = scaledLineWidth < 1 ? 1 / scaledLineWidth : 1;\n          }\n        } else if (lineWidth === 0) {\n          scaleX = 1 / normX;\n          scaleY = 1 / normY;\n        } else {\n          const scaledXLineWidth = normX * lineWidth;\n          const scaledYLineWidth = normY * lineWidth;\n          scaleX = scaledXLineWidth < 1 ? 1 / scaledXLineWidth : 1;\n          scaleY = scaledYLineWidth < 1 ? 1 / scaledYLineWidth : 1;\n        }\n      } else {\n        const absDet = Math.abs(a * d - b * c);\n        const normX = Math.hypot(a, b);\n        const normY = Math.hypot(c, d);\n        if (lineWidth === 0) {\n          scaleX = normY / absDet;\n          scaleY = normX / absDet;\n        } else {\n          const baseArea = lineWidth * absDet;\n          scaleX = normY > baseArea ? normY / baseArea : 1;\n          scaleY = normX > baseArea ? normX / baseArea : 1;\n        }\n      }\n      this._cachedScaleForStroking[0] = scaleX;\n      this._cachedScaleForStroking[1] = scaleY;\n    }\n    return this._cachedScaleForStroking;\n  }\n  rescaleAndStroke(saveRestore) {\n    const {\n      ctx\n    } = this;\n    const {\n      lineWidth\n    } = this.current;\n    const [scaleX, scaleY] = this.getScaleForStroking();\n    ctx.lineWidth = lineWidth || 1;\n    if (scaleX === 1 && scaleY === 1) {\n      ctx.stroke();\n      return;\n    }\n    const dashes = ctx.getLineDash();\n    if (saveRestore) {\n      ctx.save();\n    }\n    ctx.scale(scaleX, scaleY);\n    if (dashes.length > 0) {\n      const scale = Math.max(scaleX, scaleY);\n      ctx.setLineDash(dashes.map(x => x / scale));\n      ctx.lineDashOffset /= scale;\n    }\n    ctx.stroke();\n    if (saveRestore) {\n      ctx.restore();\n    }\n  }\n  isContentVisible() {\n    for (let i = this.markedContentStack.length - 1; i >= 0; i--) {\n      if (!this.markedContentStack[i].visible) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\nfor (const op in OPS) {\n  if (CanvasGraphics.prototype[op] !== undefined) {\n    CanvasGraphics.prototype[OPS[op]] = CanvasGraphics.prototype[op];\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/worker_options.js\nclass GlobalWorkerOptions {\n  static #port = null;\n  static #src = \"\";\n  static get workerPort() {\n    return this.#port;\n  }\n  static set workerPort(val) {\n    if (!(typeof Worker !== \"undefined\" && val instanceof Worker) && val !== null) {\n      throw new Error(\"Invalid `workerPort` type.\");\n    }\n    this.#port = val;\n  }\n  static get workerSrc() {\n    return this.#src;\n  }\n  static set workerSrc(val) {\n    if (typeof val !== \"string\") {\n      throw new Error(\"Invalid `workerSrc` type.\");\n    }\n    this.#src = val;\n  }\n}\n\n;// CONCATENATED MODULE: ./src/shared/message_handler.js\n\nconst CallbackKind = {\n  UNKNOWN: 0,\n  DATA: 1,\n  ERROR: 2\n};\nconst StreamKind = {\n  UNKNOWN: 0,\n  CANCEL: 1,\n  CANCEL_COMPLETE: 2,\n  CLOSE: 3,\n  ENQUEUE: 4,\n  ERROR: 5,\n  PULL: 6,\n  PULL_COMPLETE: 7,\n  START_COMPLETE: 8\n};\nfunction wrapReason(reason) {\n  if (!(reason instanceof Error || typeof reason === \"object\" && reason !== null)) {\n    unreachable('wrapReason: Expected \"reason\" to be a (possibly cloned) Error.');\n  }\n  switch (reason.name) {\n    case \"AbortException\":\n      return new AbortException(reason.message);\n    case \"MissingPDFException\":\n      return new MissingPDFException(reason.message);\n    case \"PasswordException\":\n      return new PasswordException(reason.message, reason.code);\n    case \"UnexpectedResponseException\":\n      return new UnexpectedResponseException(reason.message, reason.status);\n    case \"UnknownErrorException\":\n      return new UnknownErrorException(reason.message, reason.details);\n    default:\n      return new UnknownErrorException(reason.message, reason.toString());\n  }\n}\nclass MessageHandler {\n  constructor(sourceName, targetName, comObj) {\n    this.sourceName = sourceName;\n    this.targetName = targetName;\n    this.comObj = comObj;\n    this.callbackId = 1;\n    this.streamId = 1;\n    this.streamSinks = Object.create(null);\n    this.streamControllers = Object.create(null);\n    this.callbackCapabilities = Object.create(null);\n    this.actionHandler = Object.create(null);\n    this._onComObjOnMessage = event => {\n      const data = event.data;\n      if (data.targetName !== this.sourceName) {\n        return;\n      }\n      if (data.stream) {\n        this.#processStreamMessage(data);\n        return;\n      }\n      if (data.callback) {\n        const callbackId = data.callbackId;\n        const capability = this.callbackCapabilities[callbackId];\n        if (!capability) {\n          throw new Error(`Cannot resolve callback ${callbackId}`);\n        }\n        delete this.callbackCapabilities[callbackId];\n        if (data.callback === CallbackKind.DATA) {\n          capability.resolve(data.data);\n        } else if (data.callback === CallbackKind.ERROR) {\n          capability.reject(wrapReason(data.reason));\n        } else {\n          throw new Error(\"Unexpected callback case\");\n        }\n        return;\n      }\n      const action = this.actionHandler[data.action];\n      if (!action) {\n        throw new Error(`Unknown action from worker: ${data.action}`);\n      }\n      if (data.callbackId) {\n        const cbSourceName = this.sourceName;\n        const cbTargetName = data.sourceName;\n        new Promise(function (resolve) {\n          resolve(action(data.data));\n        }).then(function (result) {\n          comObj.postMessage({\n            sourceName: cbSourceName,\n            targetName: cbTargetName,\n            callback: CallbackKind.DATA,\n            callbackId: data.callbackId,\n            data: result\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName: cbSourceName,\n            targetName: cbTargetName,\n            callback: CallbackKind.ERROR,\n            callbackId: data.callbackId,\n            reason: wrapReason(reason)\n          });\n        });\n        return;\n      }\n      if (data.streamId) {\n        this.#createStreamSink(data);\n        return;\n      }\n      action(data.data);\n    };\n    comObj.addEventListener(\"message\", this._onComObjOnMessage);\n  }\n  on(actionName, handler) {\n    const ah = this.actionHandler;\n    if (ah[actionName]) {\n      throw new Error(`There is already an actionName called \"${actionName}\"`);\n    }\n    ah[actionName] = handler;\n  }\n  send(actionName, data, transfers) {\n    this.comObj.postMessage({\n      sourceName: this.sourceName,\n      targetName: this.targetName,\n      action: actionName,\n      data\n    }, transfers);\n  }\n  sendWithPromise(actionName, data, transfers) {\n    const callbackId = this.callbackId++;\n    const capability = Promise.withResolvers();\n    this.callbackCapabilities[callbackId] = capability;\n    try {\n      this.comObj.postMessage({\n        sourceName: this.sourceName,\n        targetName: this.targetName,\n        action: actionName,\n        callbackId,\n        data\n      }, transfers);\n    } catch (ex) {\n      capability.reject(ex);\n    }\n    return capability.promise;\n  }\n  sendWithStream(actionName, data, queueingStrategy, transfers) {\n    const streamId = this.streamId++,\n      sourceName = this.sourceName,\n      targetName = this.targetName,\n      comObj = this.comObj;\n    return new ReadableStream({\n      start: controller => {\n        const startCapability = Promise.withResolvers();\n        this.streamControllers[streamId] = {\n          controller,\n          startCall: startCapability,\n          pullCall: null,\n          cancelCall: null,\n          isClosed: false\n        };\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          action: actionName,\n          streamId,\n          data,\n          desiredSize: controller.desiredSize\n        }, transfers);\n        return startCapability.promise;\n      },\n      pull: controller => {\n        const pullCapability = Promise.withResolvers();\n        this.streamControllers[streamId].pullCall = pullCapability;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.PULL,\n          streamId,\n          desiredSize: controller.desiredSize\n        });\n        return pullCapability.promise;\n      },\n      cancel: reason => {\n        assert(reason instanceof Error, \"cancel must have a valid reason\");\n        const cancelCapability = Promise.withResolvers();\n        this.streamControllers[streamId].cancelCall = cancelCapability;\n        this.streamControllers[streamId].isClosed = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CANCEL,\n          streamId,\n          reason: wrapReason(reason)\n        });\n        return cancelCapability.promise;\n      }\n    }, queueingStrategy);\n  }\n  #createStreamSink(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const self = this,\n      action = this.actionHandler[data.action];\n    const streamSink = {\n      enqueue(chunk, size = 1, transfers) {\n        if (this.isCancelled) {\n          return;\n        }\n        const lastDesiredSize = this.desiredSize;\n        this.desiredSize -= size;\n        if (lastDesiredSize > 0 && this.desiredSize <= 0) {\n          this.sinkCapability = Promise.withResolvers();\n          this.ready = this.sinkCapability.promise;\n        }\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ENQUEUE,\n          streamId,\n          chunk\n        }, transfers);\n      },\n      close() {\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CLOSE,\n          streamId\n        });\n        delete self.streamSinks[streamId];\n      },\n      error(reason) {\n        assert(reason instanceof Error, \"error must have a valid reason\");\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ERROR,\n          streamId,\n          reason: wrapReason(reason)\n        });\n      },\n      sinkCapability: Promise.withResolvers(),\n      onPull: null,\n      onCancel: null,\n      isCancelled: false,\n      desiredSize: data.desiredSize,\n      ready: null\n    };\n    streamSink.sinkCapability.resolve();\n    streamSink.ready = streamSink.sinkCapability.promise;\n    this.streamSinks[streamId] = streamSink;\n    new Promise(function (resolve) {\n      resolve(action(data.data, streamSink));\n    }).then(function () {\n      comObj.postMessage({\n        sourceName,\n        targetName,\n        stream: StreamKind.START_COMPLETE,\n        streamId,\n        success: true\n      });\n    }, function (reason) {\n      comObj.postMessage({\n        sourceName,\n        targetName,\n        stream: StreamKind.START_COMPLETE,\n        streamId,\n        reason: wrapReason(reason)\n      });\n    });\n  }\n  #processStreamMessage(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const streamController = this.streamControllers[streamId],\n      streamSink = this.streamSinks[streamId];\n    switch (data.stream) {\n      case StreamKind.START_COMPLETE:\n        if (data.success) {\n          streamController.startCall.resolve();\n        } else {\n          streamController.startCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL_COMPLETE:\n        if (data.success) {\n          streamController.pullCall.resolve();\n        } else {\n          streamController.pullCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL:\n        if (!streamSink) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true\n          });\n          break;\n        }\n        if (streamSink.desiredSize <= 0 && data.desiredSize > 0) {\n          streamSink.sinkCapability.resolve();\n        }\n        streamSink.desiredSize = data.desiredSize;\n        new Promise(function (resolve) {\n          resolve(streamSink.onPull?.());\n        }).then(function () {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        });\n        break;\n      case StreamKind.ENQUEUE:\n        assert(streamController, \"enqueue should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.controller.enqueue(data.chunk);\n        break;\n      case StreamKind.CLOSE:\n        assert(streamController, \"close should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.isClosed = true;\n        streamController.controller.close();\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.ERROR:\n        assert(streamController, \"error should have stream controller\");\n        streamController.controller.error(wrapReason(data.reason));\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL_COMPLETE:\n        if (data.success) {\n          streamController.cancelCall.resolve();\n        } else {\n          streamController.cancelCall.reject(wrapReason(data.reason));\n        }\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL:\n        if (!streamSink) {\n          break;\n        }\n        new Promise(function (resolve) {\n          resolve(streamSink.onCancel?.(wrapReason(data.reason)));\n        }).then(function () {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL_COMPLETE,\n            streamId,\n            success: true\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL_COMPLETE,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        });\n        streamSink.sinkCapability.reject(wrapReason(data.reason));\n        streamSink.isCancelled = true;\n        delete this.streamSinks[streamId];\n        break;\n      default:\n        throw new Error(\"Unexpected stream case\");\n    }\n  }\n  async #deleteStreamController(streamController, streamId) {\n    await Promise.allSettled([streamController.startCall?.promise, streamController.pullCall?.promise, streamController.cancelCall?.promise]);\n    delete this.streamControllers[streamId];\n  }\n  destroy() {\n    this.comObj.removeEventListener(\"message\", this._onComObjOnMessage);\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/metadata.js\n\nclass Metadata {\n  #metadataMap;\n  #data;\n  constructor({\n    parsedData,\n    rawData\n  }) {\n    this.#metadataMap = parsedData;\n    this.#data = rawData;\n  }\n  getRaw() {\n    return this.#data;\n  }\n  get(name) {\n    return this.#metadataMap.get(name) ?? null;\n  }\n  getAll() {\n    return objectFromMap(this.#metadataMap);\n  }\n  has(name) {\n    return this.#metadataMap.has(name);\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/optional_content_config.js\n\n\nconst INTERNAL = Symbol(\"INTERNAL\");\nclass OptionalContentGroup {\n  #isDisplay = false;\n  #isPrint = false;\n  #userSet = false;\n  #visible = true;\n  constructor(renderingIntent, {\n    name,\n    intent,\n    usage\n  }) {\n    this.#isDisplay = !!(renderingIntent & RenderingIntentFlag.DISPLAY);\n    this.#isPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    this.name = name;\n    this.intent = intent;\n    this.usage = usage;\n  }\n  get visible() {\n    if (this.#userSet) {\n      return this.#visible;\n    }\n    if (!this.#visible) {\n      return false;\n    }\n    const {\n      print,\n      view\n    } = this.usage;\n    if (this.#isDisplay) {\n      return view?.viewState !== \"OFF\";\n    } else if (this.#isPrint) {\n      return print?.printState !== \"OFF\";\n    }\n    return true;\n  }\n  _setVisible(internal, visible, userSet = false) {\n    if (internal !== INTERNAL) {\n      unreachable(\"Internal method `_setVisible` called.\");\n    }\n    this.#userSet = userSet;\n    this.#visible = visible;\n  }\n}\nclass OptionalContentConfig {\n  #cachedGetHash = null;\n  #groups = new Map();\n  #initialHash = null;\n  #order = null;\n  constructor(data, renderingIntent = RenderingIntentFlag.DISPLAY) {\n    this.renderingIntent = renderingIntent;\n    this.name = null;\n    this.creator = null;\n    if (data === null) {\n      return;\n    }\n    this.name = data.name;\n    this.creator = data.creator;\n    this.#order = data.order;\n    for (const group of data.groups) {\n      this.#groups.set(group.id, new OptionalContentGroup(renderingIntent, group));\n    }\n    if (data.baseState === \"OFF\") {\n      for (const group of this.#groups.values()) {\n        group._setVisible(INTERNAL, false);\n      }\n    }\n    for (const on of data.on) {\n      this.#groups.get(on)._setVisible(INTERNAL, true);\n    }\n    for (const off of data.off) {\n      this.#groups.get(off)._setVisible(INTERNAL, false);\n    }\n    this.#initialHash = this.getHash();\n  }\n  #evaluateVisibilityExpression(array) {\n    const length = array.length;\n    if (length < 2) {\n      return true;\n    }\n    const operator = array[0];\n    for (let i = 1; i < length; i++) {\n      const element = array[i];\n      let state;\n      if (Array.isArray(element)) {\n        state = this.#evaluateVisibilityExpression(element);\n      } else if (this.#groups.has(element)) {\n        state = this.#groups.get(element).visible;\n      } else {\n        warn(`Optional content group not found: ${element}`);\n        return true;\n      }\n      switch (operator) {\n        case \"And\":\n          if (!state) {\n            return false;\n          }\n          break;\n        case \"Or\":\n          if (state) {\n            return true;\n          }\n          break;\n        case \"Not\":\n          return !state;\n        default:\n          return true;\n      }\n    }\n    return operator === \"And\";\n  }\n  isVisible(group) {\n    if (this.#groups.size === 0) {\n      return true;\n    }\n    if (!group) {\n      info(\"Optional content group not defined.\");\n      return true;\n    }\n    if (group.type === \"OCG\") {\n      if (!this.#groups.has(group.id)) {\n        warn(`Optional content group not found: ${group.id}`);\n        return true;\n      }\n      return this.#groups.get(group.id).visible;\n    } else if (group.type === \"OCMD\") {\n      if (group.expression) {\n        return this.#evaluateVisibilityExpression(group.expression);\n      }\n      if (!group.policy || group.policy === \"AnyOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      } else if (group.policy === \"AnyOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      }\n      warn(`Unknown optional content policy ${group.policy}.`);\n      return true;\n    }\n    warn(`Unknown group type ${group.type}.`);\n    return true;\n  }\n  setVisibility(id, visible = true) {\n    const group = this.#groups.get(id);\n    if (!group) {\n      warn(`Optional content group not found: ${id}`);\n      return;\n    }\n    group._setVisible(INTERNAL, !!visible, true);\n    this.#cachedGetHash = null;\n  }\n  setOCGState({\n    state,\n    preserveRB\n  }) {\n    let operator;\n    for (const elem of state) {\n      switch (elem) {\n        case \"ON\":\n        case \"OFF\":\n        case \"Toggle\":\n          operator = elem;\n          continue;\n      }\n      const group = this.#groups.get(elem);\n      if (!group) {\n        continue;\n      }\n      switch (operator) {\n        case \"ON\":\n          group._setVisible(INTERNAL, true);\n          break;\n        case \"OFF\":\n          group._setVisible(INTERNAL, false);\n          break;\n        case \"Toggle\":\n          group._setVisible(INTERNAL, !group.visible);\n          break;\n      }\n    }\n    this.#cachedGetHash = null;\n  }\n  get hasInitialVisibility() {\n    return this.#initialHash === null || this.getHash() === this.#initialHash;\n  }\n  getOrder() {\n    if (!this.#groups.size) {\n      return null;\n    }\n    if (this.#order) {\n      return this.#order.slice();\n    }\n    return [...this.#groups.keys()];\n  }\n  getGroups() {\n    return this.#groups.size > 0 ? objectFromMap(this.#groups) : null;\n  }\n  getGroup(id) {\n    return this.#groups.get(id) || null;\n  }\n  getHash() {\n    if (this.#cachedGetHash !== null) {\n      return this.#cachedGetHash;\n    }\n    const hash = new MurmurHash3_64();\n    for (const [id, group] of this.#groups) {\n      hash.update(`${id}:${group.visible}`);\n    }\n    return this.#cachedGetHash = hash.hexdigest();\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/transport_stream.js\n\n\nclass PDFDataTransportStream {\n  constructor(pdfDataRangeTransport, {\n    disableRange = false,\n    disableStream = false\n  }) {\n    assert(pdfDataRangeTransport, 'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.');\n    const {\n      length,\n      initialData,\n      progressiveDone,\n      contentDispositionFilename\n    } = pdfDataRangeTransport;\n    this._queuedChunks = [];\n    this._progressiveDone = progressiveDone;\n    this._contentDispositionFilename = contentDispositionFilename;\n    if (initialData?.length > 0) {\n      const buffer = initialData instanceof Uint8Array && initialData.byteLength === initialData.buffer.byteLength ? initialData.buffer : new Uint8Array(initialData).buffer;\n      this._queuedChunks.push(buffer);\n    }\n    this._pdfDataRangeTransport = pdfDataRangeTransport;\n    this._isStreamingSupported = !disableStream;\n    this._isRangeSupported = !disableRange;\n    this._contentLength = length;\n    this._fullRequestReader = null;\n    this._rangeReaders = [];\n    pdfDataRangeTransport.addRangeListener((begin, chunk) => {\n      this._onReceiveData({\n        begin,\n        chunk\n      });\n    });\n    pdfDataRangeTransport.addProgressListener((loaded, total) => {\n      this._onProgress({\n        loaded,\n        total\n      });\n    });\n    pdfDataRangeTransport.addProgressiveReadListener(chunk => {\n      this._onReceiveData({\n        chunk\n      });\n    });\n    pdfDataRangeTransport.addProgressiveDoneListener(() => {\n      this._onProgressiveDone();\n    });\n    pdfDataRangeTransport.transportReady();\n  }\n  _onReceiveData({\n    begin,\n    chunk\n  }) {\n    const buffer = chunk instanceof Uint8Array && chunk.byteLength === chunk.buffer.byteLength ? chunk.buffer : new Uint8Array(chunk).buffer;\n    if (begin === undefined) {\n      if (this._fullRequestReader) {\n        this._fullRequestReader._enqueue(buffer);\n      } else {\n        this._queuedChunks.push(buffer);\n      }\n    } else {\n      const found = this._rangeReaders.some(function (rangeReader) {\n        if (rangeReader._begin !== begin) {\n          return false;\n        }\n        rangeReader._enqueue(buffer);\n        return true;\n      });\n      assert(found, \"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.\");\n    }\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  _onProgress(evt) {\n    if (evt.total === undefined) {\n      this._rangeReaders[0]?.onProgress?.({\n        loaded: evt.loaded\n      });\n    } else {\n      this._fullRequestReader?.onProgress?.({\n        loaded: evt.loaded,\n        total: evt.total\n      });\n    }\n  }\n  _onProgressiveDone() {\n    this._fullRequestReader?.progressiveDone();\n    this._progressiveDone = true;\n  }\n  _removeRangeReader(reader) {\n    const i = this._rangeReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFDataTransportStream.getFullReader can only be called once.\");\n    const queuedChunks = this._queuedChunks;\n    this._queuedChunks = null;\n    return new PDFDataTransportStreamReader(this, queuedChunks, this._progressiveDone, this._contentDispositionFilename);\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFDataTransportStreamRangeReader(this, begin, end);\n    this._pdfDataRangeTransport.requestDataRange(begin, end);\n    this._rangeReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n    this._pdfDataRangeTransport.abort();\n  }\n}\nclass PDFDataTransportStreamReader {\n  constructor(stream, queuedChunks, progressiveDone = false, contentDispositionFilename = null) {\n    this._stream = stream;\n    this._done = progressiveDone || false;\n    this._filename = isPdfFile(contentDispositionFilename) ? contentDispositionFilename : null;\n    this._queuedChunks = queuedChunks || [];\n    this._loaded = 0;\n    for (const chunk of this._queuedChunks) {\n      this._loaded += chunk.byteLength;\n    }\n    this._requests = [];\n    this._headersReady = Promise.resolve();\n    stream._fullRequestReader = this;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false\n      });\n    } else {\n      this._queuedChunks.push(chunk);\n    }\n    this._loaded += chunk.byteLength;\n  }\n  get headersReady() {\n    return this._headersReady;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._stream._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._stream._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._stream._contentLength;\n  }\n  async read() {\n    if (this._queuedChunks.length > 0) {\n      const chunk = this._queuedChunks.shift();\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n  }\n  progressiveDone() {\n    if (this._done) {\n      return;\n    }\n    this._done = true;\n  }\n}\nclass PDFDataTransportStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._begin = begin;\n    this._end = end;\n    this._queuedChunk = null;\n    this._requests = [];\n    this._done = false;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length === 0) {\n      this._queuedChunk = chunk;\n    } else {\n      const requestsCapability = this._requests.shift();\n      requestsCapability.resolve({\n        value: chunk,\n        done: false\n      });\n      for (const requestCapability of this._requests) {\n        requestCapability.resolve({\n          value: undefined,\n          done: true\n        });\n      }\n      this._requests.length = 0;\n    }\n    this._done = true;\n    this._stream._removeRangeReader(this);\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._queuedChunk) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    this._stream._removeRangeReader(this);\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/content_disposition.js\n\nfunction getFilenameFromContentDispositionHeader(contentDisposition) {\n  let needsEncodingFixup = true;\n  let tmp = toParamRegExp(\"filename\\\\*\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = unescape(filename);\n    filename = rfc5987decode(filename);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  tmp = rfc2231getparam(contentDisposition);\n  if (tmp) {\n    const filename = rfc2047decode(tmp);\n    return fixupEncoding(filename);\n  }\n  tmp = toParamRegExp(\"filename\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  function toParamRegExp(attributePattern, flags) {\n    return new RegExp(\"(?:^|;)\\\\s*\" + attributePattern + \"\\\\s*=\\\\s*\" + \"(\" + '[^\";\\\\s][^;\\\\s]*' + \"|\" + '\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?' + \")\", flags);\n  }\n  function textdecode(encoding, value) {\n    if (encoding) {\n      if (!/^[\\x00-\\xFF]+$/.test(value)) {\n        return value;\n      }\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true\n        });\n        const buffer = stringToBytes(value);\n        value = decoder.decode(buffer);\n        needsEncodingFixup = false;\n      } catch {}\n    }\n    return value;\n  }\n  function fixupEncoding(value) {\n    if (needsEncodingFixup && /[\\x80-\\xff]/.test(value)) {\n      value = textdecode(\"utf-8\", value);\n      if (needsEncodingFixup) {\n        value = textdecode(\"iso-8859-1\", value);\n      }\n    }\n    return value;\n  }\n  function rfc2231getparam(contentDispositionStr) {\n    const matches = [];\n    let match;\n    const iter = toParamRegExp(\"filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)\", \"ig\");\n    while ((match = iter.exec(contentDispositionStr)) !== null) {\n      let [, n, quot, part] = match;\n      n = parseInt(n, 10);\n      if (n in matches) {\n        if (n === 0) {\n          break;\n        }\n        continue;\n      }\n      matches[n] = [quot, part];\n    }\n    const parts = [];\n    for (let n = 0; n < matches.length; ++n) {\n      if (!(n in matches)) {\n        break;\n      }\n      let [quot, part] = matches[n];\n      part = rfc2616unquote(part);\n      if (quot) {\n        part = unescape(part);\n        if (n === 0) {\n          part = rfc5987decode(part);\n        }\n      }\n      parts.push(part);\n    }\n    return parts.join(\"\");\n  }\n  function rfc2616unquote(value) {\n    if (value.startsWith('\"')) {\n      const parts = value.slice(1).split('\\\\\"');\n      for (let i = 0; i < parts.length; ++i) {\n        const quotindex = parts[i].indexOf('\"');\n        if (quotindex !== -1) {\n          parts[i] = parts[i].slice(0, quotindex);\n          parts.length = i + 1;\n        }\n        parts[i] = parts[i].replaceAll(/\\\\(.)/g, \"$1\");\n      }\n      value = parts.join('\"');\n    }\n    return value;\n  }\n  function rfc5987decode(extvalue) {\n    const encodingend = extvalue.indexOf(\"'\");\n    if (encodingend === -1) {\n      return extvalue;\n    }\n    const encoding = extvalue.slice(0, encodingend);\n    const langvalue = extvalue.slice(encodingend + 1);\n    const value = langvalue.replace(/^[^']*'/, \"\");\n    return textdecode(encoding, value);\n  }\n  function rfc2047decode(value) {\n    if (!value.startsWith(\"=?\") || /[\\x00-\\x19\\x80-\\xff]/.test(value)) {\n      return value;\n    }\n    return value.replaceAll(/=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g, function (matches, charset, encoding, text) {\n      if (encoding === \"q\" || encoding === \"Q\") {\n        text = text.replaceAll(\"_\", \" \");\n        text = text.replaceAll(/=([0-9a-fA-F]{2})/g, function (match, hex) {\n          return String.fromCharCode(parseInt(hex, 16));\n        });\n        return textdecode(charset, text);\n      }\n      try {\n        text = atob(text);\n      } catch {}\n      return textdecode(charset, text);\n    });\n  }\n  return \"\";\n}\n\n;// CONCATENATED MODULE: ./src/display/network_utils.js\n\n\n\nfunction validateRangeRequestCapabilities({\n  getResponseHeader,\n  isHttp,\n  rangeChunkSize,\n  disableRange\n}) {\n  const returnValues = {\n    allowRangeRequests: false,\n    suggestedLength: undefined\n  };\n  const length = parseInt(getResponseHeader(\"Content-Length\"), 10);\n  if (!Number.isInteger(length)) {\n    return returnValues;\n  }\n  returnValues.suggestedLength = length;\n  if (length <= 2 * rangeChunkSize) {\n    return returnValues;\n  }\n  if (disableRange || !isHttp) {\n    return returnValues;\n  }\n  if (getResponseHeader(\"Accept-Ranges\") !== \"bytes\") {\n    return returnValues;\n  }\n  const contentEncoding = getResponseHeader(\"Content-Encoding\") || \"identity\";\n  if (contentEncoding !== \"identity\") {\n    return returnValues;\n  }\n  returnValues.allowRangeRequests = true;\n  return returnValues;\n}\nfunction extractFilenameFromHeader(getResponseHeader) {\n  const contentDisposition = getResponseHeader(\"Content-Disposition\");\n  if (contentDisposition) {\n    let filename = getFilenameFromContentDispositionHeader(contentDisposition);\n    if (filename.includes(\"%\")) {\n      try {\n        filename = decodeURIComponent(filename);\n      } catch {}\n    }\n    if (isPdfFile(filename)) {\n      return filename;\n    }\n  }\n  return null;\n}\nfunction createResponseStatusError(status, url) {\n  if (status === 404 || status === 0 && url.startsWith(\"file:\")) {\n    return new MissingPDFException('Missing PDF \"' + url + '\".');\n  }\n  return new UnexpectedResponseException(`Unexpected server response (${status}) while retrieving PDF \"${url}\".`, status);\n}\nfunction validateResponseStatus(status) {\n  return status === 200 || status === 206;\n}\n\n;// CONCATENATED MODULE: ./src/display/fetch_stream.js\n\n\nfunction createFetchOptions(headers, withCredentials, abortController) {\n  return {\n    method: \"GET\",\n    headers,\n    signal: abortController.signal,\n    mode: \"cors\",\n    credentials: withCredentials ? \"include\" : \"same-origin\",\n    redirect: \"follow\"\n  };\n}\nfunction createHeaders(httpHeaders) {\n  const headers = new Headers();\n  for (const property in httpHeaders) {\n    const value = httpHeaders[property];\n    if (value === undefined) {\n      continue;\n    }\n    headers.append(property, value);\n  }\n  return headers;\n}\nfunction getArrayBuffer(val) {\n  if (val instanceof Uint8Array) {\n    return val.buffer;\n  }\n  if (val instanceof ArrayBuffer) {\n    return val;\n  }\n  warn(`getArrayBuffer - unexpected data format: ${val}`);\n  return new Uint8Array(val).buffer;\n}\nclass PDFFetchStream {\n  constructor(source) {\n    this.source = source;\n    this.isHttp = /^https?:/i.test(source.url);\n    this.httpHeaders = this.isHttp && source.httpHeaders || {};\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFFetchStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFFetchStreamReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFFetchStreamRangeReader(this, begin, end);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFFetchStreamReader {\n  constructor(stream) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    this._filename = null;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._contentLength = source.length;\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._abortController = new AbortController();\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    this._headers = createHeaders(this._stream.httpHeaders);\n    const url = source.url;\n    fetch(url, createFetchOptions(this._headers, this._withCredentials, this._abortController)).then(response => {\n      if (!validateResponseStatus(response.status)) {\n        throw createResponseStatusError(response.status, url);\n      }\n      this._reader = response.body.getReader();\n      this._headersCapability.resolve();\n      const getResponseHeader = name => response.headers.get(name);\n      const {\n        allowRangeRequests,\n        suggestedLength\n      } = validateRangeRequestCapabilities({\n        getResponseHeader,\n        isHttp: this._stream.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange\n      });\n      this._isRangeSupported = allowRangeRequests;\n      this._contentLength = suggestedLength || this._contentLength;\n      this._filename = extractFilenameFromHeader(getResponseHeader);\n      if (!this._isStreamingSupported && this._isRangeSupported) {\n        this.cancel(new AbortException(\"Streaming is disabled.\"));\n      }\n    }).catch(this._headersCapability.reject);\n    this.onProgress = null;\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._headersCapability.promise;\n    const {\n      value,\n      done\n    } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\nclass PDFFetchStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._readCapability = Promise.withResolvers();\n    this._isStreamingSupported = !source.disableStream;\n    this._abortController = new AbortController();\n    this._headers = createHeaders(this._stream.httpHeaders);\n    this._headers.append(\"Range\", `bytes=${begin}-${end - 1}`);\n    const url = source.url;\n    fetch(url, createFetchOptions(this._headers, this._withCredentials, this._abortController)).then(response => {\n      if (!validateResponseStatus(response.status)) {\n        throw createResponseStatusError(response.status, url);\n      }\n      this._readCapability.resolve();\n      this._reader = response.body.getReader();\n    }).catch(this._readCapability.reject);\n    this.onProgress = null;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    const {\n      value,\n      done\n    } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/network.js\n\n\nconst OK_RESPONSE = 200;\nconst PARTIAL_CONTENT_RESPONSE = 206;\nfunction network_getArrayBuffer(xhr) {\n  const data = xhr.response;\n  if (typeof data !== \"string\") {\n    return data;\n  }\n  return stringToBytes(data).buffer;\n}\nclass NetworkManager {\n  constructor(url, args = {}) {\n    this.url = url;\n    this.isHttp = /^https?:/i.test(url);\n    this.httpHeaders = this.isHttp && args.httpHeaders || Object.create(null);\n    this.withCredentials = args.withCredentials || false;\n    this.currXhrId = 0;\n    this.pendingRequests = Object.create(null);\n  }\n  requestRange(begin, end, listeners) {\n    const args = {\n      begin,\n      end\n    };\n    for (const prop in listeners) {\n      args[prop] = listeners[prop];\n    }\n    return this.request(args);\n  }\n  requestFull(listeners) {\n    return this.request(listeners);\n  }\n  request(args) {\n    const xhr = new XMLHttpRequest();\n    const xhrId = this.currXhrId++;\n    const pendingRequest = this.pendingRequests[xhrId] = {\n      xhr\n    };\n    xhr.open(\"GET\", this.url);\n    xhr.withCredentials = this.withCredentials;\n    for (const property in this.httpHeaders) {\n      const value = this.httpHeaders[property];\n      if (value === undefined) {\n        continue;\n      }\n      xhr.setRequestHeader(property, value);\n    }\n    if (this.isHttp && \"begin\" in args && \"end\" in args) {\n      xhr.setRequestHeader(\"Range\", `bytes=${args.begin}-${args.end - 1}`);\n      pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;\n    } else {\n      pendingRequest.expectedStatus = OK_RESPONSE;\n    }\n    xhr.responseType = \"arraybuffer\";\n    if (args.onError) {\n      xhr.onerror = function (evt) {\n        args.onError(xhr.status);\n      };\n    }\n    xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);\n    xhr.onprogress = this.onProgress.bind(this, xhrId);\n    pendingRequest.onHeadersReceived = args.onHeadersReceived;\n    pendingRequest.onDone = args.onDone;\n    pendingRequest.onError = args.onError;\n    pendingRequest.onProgress = args.onProgress;\n    xhr.send(null);\n    return xhrId;\n  }\n  onProgress(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    pendingRequest.onProgress?.(evt);\n  }\n  onStateChange(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    const xhr = pendingRequest.xhr;\n    if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {\n      pendingRequest.onHeadersReceived();\n      delete pendingRequest.onHeadersReceived;\n    }\n    if (xhr.readyState !== 4) {\n      return;\n    }\n    if (!(xhrId in this.pendingRequests)) {\n      return;\n    }\n    delete this.pendingRequests[xhrId];\n    if (xhr.status === 0 && this.isHttp) {\n      pendingRequest.onError?.(xhr.status);\n      return;\n    }\n    const xhrStatus = xhr.status || OK_RESPONSE;\n    const ok_response_on_range_request = xhrStatus === OK_RESPONSE && pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;\n    if (!ok_response_on_range_request && xhrStatus !== pendingRequest.expectedStatus) {\n      pendingRequest.onError?.(xhr.status);\n      return;\n    }\n    const chunk = network_getArrayBuffer(xhr);\n    if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {\n      const rangeHeader = xhr.getResponseHeader(\"Content-Range\");\n      const matches = /bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);\n      pendingRequest.onDone({\n        begin: parseInt(matches[1], 10),\n        chunk\n      });\n    } else if (chunk) {\n      pendingRequest.onDone({\n        begin: 0,\n        chunk\n      });\n    } else {\n      pendingRequest.onError?.(xhr.status);\n    }\n  }\n  getRequestXhr(xhrId) {\n    return this.pendingRequests[xhrId].xhr;\n  }\n  isPendingRequest(xhrId) {\n    return xhrId in this.pendingRequests;\n  }\n  abortRequest(xhrId) {\n    const xhr = this.pendingRequests[xhrId].xhr;\n    delete this.pendingRequests[xhrId];\n    xhr.abort();\n  }\n}\nclass PDFNetworkStream {\n  constructor(source) {\n    this._source = source;\n    this._manager = new NetworkManager(source.url, {\n      httpHeaders: source.httpHeaders,\n      withCredentials: source.withCredentials\n    });\n    this._rangeChunkSize = source.rangeChunkSize;\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  _onRangeRequestReaderClosed(reader) {\n    const i = this._rangeRequestReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeRequestReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFNetworkStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFNetworkStreamFullRequestReader(this._manager, this._source);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    const reader = new PDFNetworkStreamRangeRequestReader(this._manager, begin, end);\n    reader.onClosed = this._onRangeRequestReaderClosed.bind(this);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFNetworkStreamFullRequestReader {\n  constructor(manager, source) {\n    this._manager = manager;\n    const args = {\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this)\n    };\n    this._url = source.url;\n    this._fullRequestId = manager.requestFull(args);\n    this._headersReceivedCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._contentLength = source.length;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = false;\n    this._isRangeSupported = false;\n    this._cachedChunks = [];\n    this._requests = [];\n    this._done = false;\n    this._storedError = undefined;\n    this._filename = null;\n    this.onProgress = null;\n  }\n  _onHeadersReceived() {\n    const fullRequestXhrId = this._fullRequestId;\n    const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);\n    const getResponseHeader = name => fullRequestXhr.getResponseHeader(name);\n    const {\n      allowRangeRequests,\n      suggestedLength\n    } = validateRangeRequestCapabilities({\n      getResponseHeader,\n      isHttp: this._manager.isHttp,\n      rangeChunkSize: this._rangeChunkSize,\n      disableRange: this._disableRange\n    });\n    if (allowRangeRequests) {\n      this._isRangeSupported = true;\n    }\n    this._contentLength = suggestedLength || this._contentLength;\n    this._filename = extractFilenameFromHeader(getResponseHeader);\n    if (this._isRangeSupported) {\n      this._manager.abortRequest(fullRequestXhrId);\n    }\n    this._headersReceivedCapability.resolve();\n  }\n  _onDone(data) {\n    if (data) {\n      if (this._requests.length > 0) {\n        const requestCapability = this._requests.shift();\n        requestCapability.resolve({\n          value: data.chunk,\n          done: false\n        });\n      } else {\n        this._cachedChunks.push(data.chunk);\n      }\n    }\n    this._done = true;\n    if (this._cachedChunks.length > 0) {\n      return;\n    }\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n  }\n  _onError(status) {\n    this._storedError = createResponseStatusError(status, this._url);\n    this._headersReceivedCapability.reject(this._storedError);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._cachedChunks.length = 0;\n  }\n  _onProgress(evt) {\n    this.onProgress?.({\n      loaded: evt.loaded,\n      total: evt.lengthComputable ? evt.total : this._contentLength\n    });\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get headersReady() {\n    return this._headersReceivedCapability.promise;\n  }\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._cachedChunks.length > 0) {\n      const chunk = this._cachedChunks.shift();\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    this._headersReceivedCapability.reject(reason);\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._fullRequestId)) {\n      this._manager.abortRequest(this._fullRequestId);\n    }\n    this._fullRequestReader = null;\n  }\n}\nclass PDFNetworkStreamRangeRequestReader {\n  constructor(manager, begin, end) {\n    this._manager = manager;\n    const args = {\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this)\n    };\n    this._url = manager.url;\n    this._requestId = manager.requestRange(begin, end, args);\n    this._requests = [];\n    this._queuedChunk = null;\n    this._done = false;\n    this._storedError = undefined;\n    this.onProgress = null;\n    this.onClosed = null;\n  }\n  _close() {\n    this.onClosed?.(this);\n  }\n  _onDone(data) {\n    const chunk = data.chunk;\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false\n      });\n    } else {\n      this._queuedChunk = chunk;\n    }\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    this._close();\n  }\n  _onError(status) {\n    this._storedError = createResponseStatusError(status, this._url);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._queuedChunk = null;\n  }\n  _onProgress(evt) {\n    if (!this.isStreamingSupported) {\n      this.onProgress?.({\n        loaded: evt.loaded\n      });\n    }\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._queuedChunk !== null) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._requestId)) {\n      this._manager.abortRequest(this._requestId);\n    }\n    this._close();\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/node_stream.js\n\n\n\nconst fileUriRegex = /^file:\\/\\/\\/[a-zA-Z]:\\//;\nfunction parseUrl(sourceUrl) {\n  const url = NodePackages.get(\"url\");\n  const parsedUrl = url.parse(sourceUrl);\n  if (parsedUrl.protocol === \"file:\" || parsedUrl.host) {\n    return parsedUrl;\n  }\n  if (/^[a-z]:[/\\\\]/i.test(sourceUrl)) {\n    return url.parse(`file:///${sourceUrl}`);\n  }\n  if (!parsedUrl.host) {\n    parsedUrl.protocol = \"file:\";\n  }\n  return parsedUrl;\n}\nclass PDFNodeStream {\n  constructor(source) {\n    this.source = source;\n    this.url = parseUrl(source.url);\n    this.isHttp = this.url.protocol === \"http:\" || this.url.protocol === \"https:\";\n    this.isFsUrl = this.url.protocol === \"file:\";\n    this.httpHeaders = this.isHttp && source.httpHeaders || {};\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFNodeStream.getFullReader can only be called once.\");\n    this._fullRequestReader = this.isFsUrl ? new PDFNodeStreamFsFullReader(this) : new PDFNodeStreamFullReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(start, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const rangeReader = this.isFsUrl ? new PDFNodeStreamFsRangeReader(this, start, end) : new PDFNodeStreamRangeReader(this, start, end);\n    this._rangeRequestReaders.push(rangeReader);\n    return rangeReader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass BaseFullReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    const source = stream.source;\n    this._contentLength = source.length;\n    this._loaded = 0;\n    this._filename = null;\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    this._headersCapability = Promise.withResolvers();\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"end\", () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n    if (!this._isStreamingSupported && this._isRangeSupported) {\n      this._error(new AbortException(\"streaming is disabled\"));\n    }\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\nclass BaseRangeReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    this._loaded = 0;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    const source = stream.source;\n    this._isStreamingSupported = !source.disableStream;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"end\", () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\nfunction createRequestOptions(parsedUrl, headers) {\n  return {\n    protocol: parsedUrl.protocol,\n    auth: parsedUrl.auth,\n    host: parsedUrl.hostname,\n    port: parsedUrl.port,\n    path: parsedUrl.path,\n    method: \"GET\",\n    headers\n  };\n}\nclass PDFNodeStreamFullReader extends BaseFullReader {\n  constructor(stream) {\n    super(stream);\n    const handleResponse = response => {\n      if (response.statusCode === 404) {\n        const error = new MissingPDFException(`Missing PDF \"${this._url}\".`);\n        this._storedError = error;\n        this._headersCapability.reject(error);\n        return;\n      }\n      this._headersCapability.resolve();\n      this._setReadableStream(response);\n      const getResponseHeader = name => this._readableStream.headers[name.toLowerCase()];\n      const {\n        allowRangeRequests,\n        suggestedLength\n      } = validateRangeRequestCapabilities({\n        getResponseHeader,\n        isHttp: stream.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange\n      });\n      this._isRangeSupported = allowRangeRequests;\n      this._contentLength = suggestedLength || this._contentLength;\n      this._filename = extractFilenameFromHeader(getResponseHeader);\n    };\n    this._request = null;\n    if (this._url.protocol === \"http:\") {\n      const http = NodePackages.get(\"http\");\n      this._request = http.request(createRequestOptions(this._url, stream.httpHeaders), handleResponse);\n    } else {\n      const https = NodePackages.get(\"https\");\n      this._request = https.request(createRequestOptions(this._url, stream.httpHeaders), handleResponse);\n    }\n    this._request.on(\"error\", reason => {\n      this._storedError = reason;\n      this._headersCapability.reject(reason);\n    });\n    this._request.end();\n  }\n}\nclass PDFNodeStreamRangeReader extends BaseRangeReader {\n  constructor(stream, start, end) {\n    super(stream);\n    this._httpHeaders = {};\n    for (const property in stream.httpHeaders) {\n      const value = stream.httpHeaders[property];\n      if (value === undefined) {\n        continue;\n      }\n      this._httpHeaders[property] = value;\n    }\n    this._httpHeaders.Range = `bytes=${start}-${end - 1}`;\n    const handleResponse = response => {\n      if (response.statusCode === 404) {\n        const error = new MissingPDFException(`Missing PDF \"${this._url}\".`);\n        this._storedError = error;\n        return;\n      }\n      this._setReadableStream(response);\n    };\n    this._request = null;\n    if (this._url.protocol === \"http:\") {\n      const http = NodePackages.get(\"http\");\n      this._request = http.request(createRequestOptions(this._url, this._httpHeaders), handleResponse);\n    } else {\n      const https = NodePackages.get(\"https\");\n      this._request = https.request(createRequestOptions(this._url, this._httpHeaders), handleResponse);\n    }\n    this._request.on(\"error\", reason => {\n      this._storedError = reason;\n    });\n    this._request.end();\n  }\n}\nclass PDFNodeStreamFsFullReader extends BaseFullReader {\n  constructor(stream) {\n    super(stream);\n    let path = decodeURIComponent(this._url.path);\n    if (fileUriRegex.test(this._url.href)) {\n      path = path.replace(/^\\//, \"\");\n    }\n    const fs = NodePackages.get(\"fs\");\n    fs.promises.lstat(path).then(stat => {\n      this._contentLength = stat.size;\n      this._setReadableStream(fs.createReadStream(path));\n      this._headersCapability.resolve();\n    }, error => {\n      if (error.code === \"ENOENT\") {\n        error = new MissingPDFException(`Missing PDF \"${path}\".`);\n      }\n      this._storedError = error;\n      this._headersCapability.reject(error);\n    });\n  }\n}\nclass PDFNodeStreamFsRangeReader extends BaseRangeReader {\n  constructor(stream, start, end) {\n    super(stream);\n    let path = decodeURIComponent(this._url.path);\n    if (fileUriRegex.test(this._url.href)) {\n      path = path.replace(/^\\//, \"\");\n    }\n    const fs = NodePackages.get(\"fs\");\n    this._setReadableStream(fs.createReadStream(path, {\n      start,\n      end: end - 1\n    }));\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/text_layer.js\n\n\nconst MAX_TEXT_DIVS_TO_RENDER = 100000;\nconst DEFAULT_FONT_SIZE = 30;\nconst DEFAULT_FONT_ASCENT = 0.8;\nclass TextLayer {\n  #capability = Promise.withResolvers();\n  #container = null;\n  #disableProcessItems = false;\n  #fontInspectorEnabled = !!globalThis.FontInspector?.enabled;\n  #lang = null;\n  #layoutTextParams = null;\n  #pageHeight = 0;\n  #pageWidth = 0;\n  #reader = null;\n  #rootContainer = null;\n  #rotation = 0;\n  #scale = 0;\n  #styleCache = Object.create(null);\n  #textContentItemsStr = [];\n  #textContentSource = null;\n  #textDivs = [];\n  #textDivProperties = new WeakMap();\n  #transform = null;\n  static #ascentCache = new Map();\n  static #canvasContexts = new Map();\n  static #pendingTextLayers = new Set();\n  constructor({\n    textContentSource,\n    container,\n    viewport\n  }) {\n    if (textContentSource instanceof ReadableStream) {\n      this.#textContentSource = textContentSource;\n    } else if (typeof textContentSource === \"object\") {\n      this.#textContentSource = new ReadableStream({\n        start(controller) {\n          controller.enqueue(textContentSource);\n          controller.close();\n        }\n      });\n    } else {\n      throw new Error('No \"textContentSource\" parameter specified.');\n    }\n    this.#container = this.#rootContainer = container;\n    this.#scale = viewport.scale * (globalThis.devicePixelRatio || 1);\n    this.#rotation = viewport.rotation;\n    this.#layoutTextParams = {\n      prevFontSize: null,\n      prevFontFamily: null,\n      div: null,\n      properties: null,\n      ctx: null\n    };\n    const {\n      pageWidth,\n      pageHeight,\n      pageX,\n      pageY\n    } = viewport.rawDims;\n    this.#transform = [1, 0, 0, -1, -pageX, pageY + pageHeight];\n    this.#pageWidth = pageWidth;\n    this.#pageHeight = pageHeight;\n    setLayerDimensions(container, viewport);\n    this.#capability.promise.catch(() => {}).then(() => {\n      TextLayer.#pendingTextLayers.delete(this);\n      this.#layoutTextParams = null;\n      this.#styleCache = null;\n    });\n  }\n  render() {\n    const pump = () => {\n      this.#reader.read().then(({\n        value,\n        done\n      }) => {\n        if (done) {\n          this.#capability.resolve();\n          return;\n        }\n        this.#lang ??= value.lang;\n        Object.assign(this.#styleCache, value.styles);\n        this.#processItems(value.items);\n        pump();\n      }, this.#capability.reject);\n    };\n    this.#reader = this.#textContentSource.getReader();\n    TextLayer.#pendingTextLayers.add(this);\n    pump();\n    return this.#capability.promise;\n  }\n  update({\n    viewport,\n    onBefore = null\n  }) {\n    const scale = viewport.scale * (globalThis.devicePixelRatio || 1);\n    const rotation = viewport.rotation;\n    if (rotation !== this.#rotation) {\n      onBefore?.();\n      this.#rotation = rotation;\n      setLayerDimensions(this.#rootContainer, {\n        rotation\n      });\n    }\n    if (scale !== this.#scale) {\n      onBefore?.();\n      this.#scale = scale;\n      const params = {\n        prevFontSize: null,\n        prevFontFamily: null,\n        div: null,\n        properties: null,\n        ctx: TextLayer.#getCtx(this.#lang)\n      };\n      for (const div of this.#textDivs) {\n        params.properties = this.#textDivProperties.get(div);\n        params.div = div;\n        this.#layout(params);\n      }\n    }\n  }\n  cancel() {\n    const abortEx = new AbortException(\"TextLayer task cancelled.\");\n    this.#reader?.cancel(abortEx).catch(() => {});\n    this.#reader = null;\n    this.#capability.reject(abortEx);\n  }\n  get textDivs() {\n    return this.#textDivs;\n  }\n  get textContentItemsStr() {\n    return this.#textContentItemsStr;\n  }\n  #processItems(items) {\n    if (this.#disableProcessItems) {\n      return;\n    }\n    this.#layoutTextParams.ctx ||= TextLayer.#getCtx(this.#lang);\n    const textDivs = this.#textDivs,\n      textContentItemsStr = this.#textContentItemsStr;\n    for (const item of items) {\n      if (textDivs.length > MAX_TEXT_DIVS_TO_RENDER) {\n        warn(\"Ignoring additional textDivs for performance reasons.\");\n        this.#disableProcessItems = true;\n        return;\n      }\n      if (item.str === undefined) {\n        if (item.type === \"beginMarkedContentProps\" || item.type === \"beginMarkedContent\") {\n          const parent = this.#container;\n          this.#container = document.createElement(\"span\");\n          this.#container.classList.add(\"markedContent\");\n          if (item.id !== null) {\n            this.#container.setAttribute(\"id\", `${item.id}`);\n          }\n          parent.append(this.#container);\n        } else if (item.type === \"endMarkedContent\") {\n          this.#container = this.#container.parentNode;\n        }\n        continue;\n      }\n      textContentItemsStr.push(item.str);\n      this.#appendText(item);\n    }\n  }\n  #appendText(geom) {\n    const textDiv = document.createElement(\"span\");\n    const textDivProperties = {\n      angle: 0,\n      canvasWidth: 0,\n      hasText: geom.str !== \"\",\n      hasEOL: geom.hasEOL,\n      fontSize: 0\n    };\n    this.#textDivs.push(textDiv);\n    const tx = Util.transform(this.#transform, geom.transform);\n    let angle = Math.atan2(tx[1], tx[0]);\n    const style = this.#styleCache[geom.fontName];\n    if (style.vertical) {\n      angle += Math.PI / 2;\n    }\n    const fontFamily = this.#fontInspectorEnabled && style.fontSubstitution || style.fontFamily;\n    const fontHeight = Math.hypot(tx[2], tx[3]);\n    const fontAscent = fontHeight * TextLayer.#getAscent(fontFamily, this.#lang);\n    let left, top;\n    if (angle === 0) {\n      left = tx[4];\n      top = tx[5] - fontAscent;\n    } else {\n      left = tx[4] + fontAscent * Math.sin(angle);\n      top = tx[5] - fontAscent * Math.cos(angle);\n    }\n    const scaleFactorStr = \"calc(var(--scale-factor)*\";\n    const divStyle = textDiv.style;\n    if (this.#container === this.#rootContainer) {\n      divStyle.left = `${(100 * left / this.#pageWidth).toFixed(2)}%`;\n      divStyle.top = `${(100 * top / this.#pageHeight).toFixed(2)}%`;\n    } else {\n      divStyle.left = `${scaleFactorStr}${left.toFixed(2)}px)`;\n      divStyle.top = `${scaleFactorStr}${top.toFixed(2)}px)`;\n    }\n    divStyle.fontSize = `${scaleFactorStr}${fontHeight.toFixed(2)}px)`;\n    divStyle.fontFamily = fontFamily;\n    textDivProperties.fontSize = fontHeight;\n    textDiv.setAttribute(\"role\", \"presentation\");\n    textDiv.textContent = geom.str;\n    textDiv.dir = geom.dir;\n    if (this.#fontInspectorEnabled) {\n      textDiv.dataset.fontName = style.fontSubstitutionLoadedName || geom.fontName;\n    }\n    if (angle !== 0) {\n      textDivProperties.angle = angle * (180 / Math.PI);\n    }\n    let shouldScaleText = false;\n    if (geom.str.length > 1) {\n      shouldScaleText = true;\n    } else if (geom.str !== \" \" && geom.transform[0] !== geom.transform[3]) {\n      const absScaleX = Math.abs(geom.transform[0]),\n        absScaleY = Math.abs(geom.transform[3]);\n      if (absScaleX !== absScaleY && Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5) {\n        shouldScaleText = true;\n      }\n    }\n    if (shouldScaleText) {\n      textDivProperties.canvasWidth = style.vertical ? geom.height : geom.width;\n    }\n    this.#textDivProperties.set(textDiv, textDivProperties);\n    this.#layoutTextParams.div = textDiv;\n    this.#layoutTextParams.properties = textDivProperties;\n    this.#layout(this.#layoutTextParams);\n    if (textDivProperties.hasText) {\n      this.#container.append(textDiv);\n    }\n    if (textDivProperties.hasEOL) {\n      const br = document.createElement(\"br\");\n      br.setAttribute(\"role\", \"presentation\");\n      this.#container.append(br);\n    }\n  }\n  #layout(params) {\n    const {\n      div,\n      properties,\n      ctx,\n      prevFontSize,\n      prevFontFamily\n    } = params;\n    const {\n      style\n    } = div;\n    let transform = \"\";\n    if (properties.canvasWidth !== 0 && properties.hasText) {\n      const {\n        fontFamily\n      } = style;\n      const {\n        canvasWidth,\n        fontSize\n      } = properties;\n      if (prevFontSize !== fontSize || prevFontFamily !== fontFamily) {\n        ctx.font = `${fontSize * this.#scale}px ${fontFamily}`;\n        params.prevFontSize = fontSize;\n        params.prevFontFamily = fontFamily;\n      }\n      const {\n        width\n      } = ctx.measureText(div.textContent);\n      if (width > 0) {\n        transform = `scaleX(${canvasWidth * this.#scale / width})`;\n      }\n    }\n    if (properties.angle !== 0) {\n      transform = `rotate(${properties.angle}deg) ${transform}`;\n    }\n    if (transform.length > 0) {\n      style.transform = transform;\n    }\n  }\n  static cleanup() {\n    if (this.#pendingTextLayers.size > 0) {\n      return;\n    }\n    this.#ascentCache.clear();\n    for (const {\n      canvas\n    } of this.#canvasContexts.values()) {\n      canvas.remove();\n    }\n    this.#canvasContexts.clear();\n  }\n  static #getCtx(lang = null) {\n    let canvasContext = this.#canvasContexts.get(lang ||= \"\");\n    if (!canvasContext) {\n      const canvas = document.createElement(\"canvas\");\n      canvas.className = \"hiddenCanvasElement\";\n      canvas.lang = lang;\n      document.body.append(canvas);\n      canvasContext = canvas.getContext(\"2d\", {\n        alpha: false\n      });\n      this.#canvasContexts.set(lang, canvasContext);\n    }\n    return canvasContext;\n  }\n  static #getAscent(fontFamily, lang) {\n    const cachedAscent = this.#ascentCache.get(fontFamily);\n    if (cachedAscent) {\n      return cachedAscent;\n    }\n    const ctx = this.#getCtx(lang);\n    const savedFont = ctx.font;\n    ctx.canvas.width = ctx.canvas.height = DEFAULT_FONT_SIZE;\n    ctx.font = `${DEFAULT_FONT_SIZE}px ${fontFamily}`;\n    const metrics = ctx.measureText(\"\");\n    let ascent = metrics.fontBoundingBoxAscent;\n    let descent = Math.abs(metrics.fontBoundingBoxDescent);\n    if (ascent) {\n      const ratio = ascent / (ascent + descent);\n      this.#ascentCache.set(fontFamily, ratio);\n      ctx.canvas.width = ctx.canvas.height = 0;\n      ctx.font = savedFont;\n      return ratio;\n    }\n    ctx.strokeStyle = \"red\";\n    ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);\n    ctx.strokeText(\"g\", 0, 0);\n    let pixels = ctx.getImageData(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE).data;\n    descent = 0;\n    for (let i = pixels.length - 1 - 3; i >= 0; i -= 4) {\n      if (pixels[i] > 0) {\n        descent = Math.ceil(i / 4 / DEFAULT_FONT_SIZE);\n        break;\n      }\n    }\n    ctx.clearRect(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE);\n    ctx.strokeText(\"A\", 0, DEFAULT_FONT_SIZE);\n    pixels = ctx.getImageData(0, 0, DEFAULT_FONT_SIZE, DEFAULT_FONT_SIZE).data;\n    ascent = 0;\n    for (let i = 0, ii = pixels.length; i < ii; i += 4) {\n      if (pixels[i] > 0) {\n        ascent = DEFAULT_FONT_SIZE - Math.floor(i / 4 / DEFAULT_FONT_SIZE);\n        break;\n      }\n    }\n    ctx.canvas.width = ctx.canvas.height = 0;\n    ctx.font = savedFont;\n    const ratio = ascent ? ascent / (ascent + descent) : DEFAULT_FONT_ASCENT;\n    this.#ascentCache.set(fontFamily, ratio);\n    return ratio;\n  }\n}\nfunction renderTextLayer() {\n  deprecated(\"`renderTextLayer`, please use `TextLayer` instead.\");\n  const {\n    textContentSource,\n    container,\n    viewport,\n    ...rest\n  } = arguments[0];\n  const restKeys = Object.keys(rest);\n  if (restKeys.length > 0) {\n    warn(\"Ignoring `renderTextLayer` parameters: \" + restKeys.join(\", \"));\n  }\n  const textLayer = new TextLayer({\n    textContentSource,\n    container,\n    viewport\n  });\n  const {\n    textDivs,\n    textContentItemsStr\n  } = textLayer;\n  const promise = textLayer.render();\n  return {\n    promise,\n    textDivs,\n    textContentItemsStr\n  };\n}\nfunction updateTextLayer() {\n  deprecated(\"`updateTextLayer`, please use `TextLayer` instead.\");\n}\n\n;// CONCATENATED MODULE: ./src/display/xfa_text.js\nclass XfaText {\n  static textContent(xfa) {\n    const items = [];\n    const output = {\n      items,\n      styles: Object.create(null)\n    };\n    function walk(node) {\n      if (!node) {\n        return;\n      }\n      let str = null;\n      const name = node.name;\n      if (name === \"#text\") {\n        str = node.value;\n      } else if (!XfaText.shouldBuildText(name)) {\n        return;\n      } else if (node?.attributes?.textContent) {\n        str = node.attributes.textContent;\n      } else if (node.value) {\n        str = node.value;\n      }\n      if (str !== null) {\n        items.push({\n          str\n        });\n      }\n      if (!node.children) {\n        return;\n      }\n      for (const child of node.children) {\n        walk(child);\n      }\n    }\n    walk(xfa);\n    return output;\n  }\n  static shouldBuildText(name) {\n    return !(name === \"textarea\" || name === \"input\" || name === \"option\" || name === \"select\");\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/api.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst DEFAULT_RANGE_CHUNK_SIZE = 65536;\nconst RENDERING_CANCELLED_TIMEOUT = 100;\nconst DELAYED_CLEANUP_TIMEOUT = 5000;\nconst DefaultCanvasFactory = isNodeJS ? NodeCanvasFactory : DOMCanvasFactory;\nconst DefaultCMapReaderFactory = isNodeJS ? NodeCMapReaderFactory : DOMCMapReaderFactory;\nconst DefaultFilterFactory = isNodeJS ? NodeFilterFactory : DOMFilterFactory;\nconst DefaultStandardFontDataFactory = isNodeJS ? NodeStandardFontDataFactory : DOMStandardFontDataFactory;\nfunction getDocument(src) {\n  if (typeof src === \"string\" || src instanceof URL) {\n    src = {\n      url: src\n    };\n  } else if (src instanceof ArrayBuffer || ArrayBuffer.isView(src)) {\n    src = {\n      data: src\n    };\n  }\n  if (typeof src !== \"object\") {\n    throw new Error(\"Invalid parameter in getDocument, need parameter object.\");\n  }\n  if (!src.url && !src.data && !src.range) {\n    throw new Error(\"Invalid parameter object: need either .data, .range or .url\");\n  }\n  const task = new PDFDocumentLoadingTask();\n  const {\n    docId\n  } = task;\n  const url = src.url ? getUrlProp(src.url) : null;\n  const data = src.data ? getDataProp(src.data) : null;\n  const httpHeaders = src.httpHeaders || null;\n  const withCredentials = src.withCredentials === true;\n  const password = src.password ?? null;\n  const rangeTransport = src.range instanceof PDFDataRangeTransport ? src.range : null;\n  const rangeChunkSize = Number.isInteger(src.rangeChunkSize) && src.rangeChunkSize > 0 ? src.rangeChunkSize : DEFAULT_RANGE_CHUNK_SIZE;\n  let worker = src.worker instanceof PDFWorker ? src.worker : null;\n  const verbosity = src.verbosity;\n  const docBaseUrl = typeof src.docBaseUrl === \"string\" && !isDataScheme(src.docBaseUrl) ? src.docBaseUrl : null;\n  const cMapUrl = typeof src.cMapUrl === \"string\" ? src.cMapUrl : null;\n  const cMapPacked = src.cMapPacked !== false;\n  const CMapReaderFactory = src.CMapReaderFactory || DefaultCMapReaderFactory;\n  const standardFontDataUrl = typeof src.standardFontDataUrl === \"string\" ? src.standardFontDataUrl : null;\n  const StandardFontDataFactory = src.StandardFontDataFactory || DefaultStandardFontDataFactory;\n  const ignoreErrors = src.stopAtErrors !== true;\n  const maxImageSize = Number.isInteger(src.maxImageSize) && src.maxImageSize > -1 ? src.maxImageSize : -1;\n  const isEvalSupported = src.isEvalSupported !== false;\n  const isOffscreenCanvasSupported = typeof src.isOffscreenCanvasSupported === \"boolean\" ? src.isOffscreenCanvasSupported : !isNodeJS;\n  const canvasMaxAreaInBytes = Number.isInteger(src.canvasMaxAreaInBytes) ? src.canvasMaxAreaInBytes : -1;\n  const disableFontFace = typeof src.disableFontFace === \"boolean\" ? src.disableFontFace : isNodeJS;\n  const fontExtraProperties = src.fontExtraProperties === true;\n  const enableXfa = src.enableXfa === true;\n  const ownerDocument = src.ownerDocument || globalThis.document;\n  const disableRange = src.disableRange === true;\n  const disableStream = src.disableStream === true;\n  const disableAutoFetch = src.disableAutoFetch === true;\n  const pdfBug = src.pdfBug === true;\n  const length = rangeTransport ? rangeTransport.length : src.length ?? NaN;\n  const useSystemFonts = typeof src.useSystemFonts === \"boolean\" ? src.useSystemFonts : !isNodeJS && !disableFontFace;\n  const useWorkerFetch = typeof src.useWorkerFetch === \"boolean\" ? src.useWorkerFetch : CMapReaderFactory === DOMCMapReaderFactory && StandardFontDataFactory === DOMStandardFontDataFactory && cMapUrl && standardFontDataUrl && isValidFetchUrl(cMapUrl, document.baseURI) && isValidFetchUrl(standardFontDataUrl, document.baseURI);\n  const canvasFactory = src.canvasFactory || new DefaultCanvasFactory({\n    ownerDocument\n  });\n  const filterFactory = src.filterFactory || new DefaultFilterFactory({\n    docId,\n    ownerDocument\n  });\n  const styleElement = null;\n  setVerbosityLevel(verbosity);\n  const transportFactory = {\n    canvasFactory,\n    filterFactory\n  };\n  if (!useWorkerFetch) {\n    transportFactory.cMapReaderFactory = new CMapReaderFactory({\n      baseUrl: cMapUrl,\n      isCompressed: cMapPacked\n    });\n    transportFactory.standardFontDataFactory = new StandardFontDataFactory({\n      baseUrl: standardFontDataUrl\n    });\n  }\n  if (!worker) {\n    const workerParams = {\n      verbosity,\n      port: GlobalWorkerOptions.workerPort\n    };\n    worker = workerParams.port ? PDFWorker.fromPort(workerParams) : new PDFWorker(workerParams);\n    task._worker = worker;\n  }\n  const docParams = {\n    docId,\n    apiVersion: \"4.3.136\",\n    data,\n    password,\n    disableAutoFetch,\n    rangeChunkSize,\n    length,\n    docBaseUrl,\n    enableXfa,\n    evaluatorOptions: {\n      maxImageSize,\n      disableFontFace,\n      ignoreErrors,\n      isEvalSupported,\n      isOffscreenCanvasSupported,\n      canvasMaxAreaInBytes,\n      fontExtraProperties,\n      useSystemFonts,\n      cMapUrl: useWorkerFetch ? cMapUrl : null,\n      standardFontDataUrl: useWorkerFetch ? standardFontDataUrl : null\n    }\n  };\n  const transportParams = {\n    disableFontFace,\n    fontExtraProperties,\n    ownerDocument,\n    pdfBug,\n    styleElement,\n    loadingParams: {\n      disableAutoFetch,\n      enableXfa\n    }\n  };\n  worker.promise.then(function () {\n    if (task.destroyed) {\n      throw new Error(\"Loading aborted\");\n    }\n    if (worker.destroyed) {\n      throw new Error(\"Worker was destroyed\");\n    }\n    const workerIdPromise = worker.messageHandler.sendWithPromise(\"GetDocRequest\", docParams, data ? [data.buffer] : null);\n    let networkStream;\n    if (rangeTransport) {\n      networkStream = new PDFDataTransportStream(rangeTransport, {\n        disableRange,\n        disableStream\n      });\n    } else if (!data) {\n      const createPDFNetworkStream = params => {\n        if (isNodeJS) {\n          const isFetchSupported = function () {\n            return typeof fetch !== \"undefined\" && typeof Response !== \"undefined\" && \"body\" in Response.prototype;\n          };\n          return isFetchSupported() && isValidFetchUrl(params.url) ? new PDFFetchStream(params) : new PDFNodeStream(params);\n        }\n        return isValidFetchUrl(params.url) ? new PDFFetchStream(params) : new PDFNetworkStream(params);\n      };\n      networkStream = createPDFNetworkStream({\n        url,\n        length,\n        httpHeaders,\n        withCredentials,\n        rangeChunkSize,\n        disableRange,\n        disableStream\n      });\n    }\n    return workerIdPromise.then(workerId => {\n      if (task.destroyed) {\n        throw new Error(\"Loading aborted\");\n      }\n      if (worker.destroyed) {\n        throw new Error(\"Worker was destroyed\");\n      }\n      const messageHandler = new MessageHandler(docId, workerId, worker.port);\n      const transport = new WorkerTransport(messageHandler, task, networkStream, transportParams, transportFactory);\n      task._transport = transport;\n      messageHandler.send(\"Ready\", null);\n    });\n  }).catch(task._capability.reject);\n  return task;\n}\nfunction getUrlProp(val) {\n  if (val instanceof URL) {\n    return val.href;\n  }\n  try {\n    return new URL(val, window.location).href;\n  } catch {\n    if (isNodeJS && typeof val === \"string\") {\n      return val;\n    }\n  }\n  throw new Error(\"Invalid PDF url data: \" + \"either string or URL-object is expected in the url property.\");\n}\nfunction getDataProp(val) {\n  if (isNodeJS && typeof Buffer !== \"undefined\" && val instanceof Buffer) {\n    throw new Error(\"Please provide binary data as `Uint8Array`, rather than `Buffer`.\");\n  }\n  if (val instanceof Uint8Array && val.byteLength === val.buffer.byteLength) {\n    return val;\n  }\n  if (typeof val === \"string\") {\n    return stringToBytes(val);\n  }\n  if (val instanceof ArrayBuffer || ArrayBuffer.isView(val) || typeof val === \"object\" && !isNaN(val?.length)) {\n    return new Uint8Array(val);\n  }\n  throw new Error(\"Invalid PDF binary data: either TypedArray, \" + \"string, or array-like object is expected in the data property.\");\n}\nfunction isRefProxy(ref) {\n  return typeof ref === \"object\" && Number.isInteger(ref?.num) && ref.num >= 0 && Number.isInteger(ref?.gen) && ref.gen >= 0;\n}\nclass PDFDocumentLoadingTask {\n  static #docId = 0;\n  constructor() {\n    this._capability = Promise.withResolvers();\n    this._transport = null;\n    this._worker = null;\n    this.docId = `d${PDFDocumentLoadingTask.#docId++}`;\n    this.destroyed = false;\n    this.onPassword = null;\n    this.onProgress = null;\n  }\n  get promise() {\n    return this._capability.promise;\n  }\n  async destroy() {\n    this.destroyed = true;\n    try {\n      if (this._worker?.port) {\n        this._worker._pendingDestroy = true;\n      }\n      await this._transport?.destroy();\n    } catch (ex) {\n      if (this._worker?.port) {\n        delete this._worker._pendingDestroy;\n      }\n      throw ex;\n    }\n    this._transport = null;\n    if (this._worker) {\n      this._worker.destroy();\n      this._worker = null;\n    }\n  }\n}\nclass PDFDataRangeTransport {\n  constructor(length, initialData, progressiveDone = false, contentDispositionFilename = null) {\n    this.length = length;\n    this.initialData = initialData;\n    this.progressiveDone = progressiveDone;\n    this.contentDispositionFilename = contentDispositionFilename;\n    this._rangeListeners = [];\n    this._progressListeners = [];\n    this._progressiveReadListeners = [];\n    this._progressiveDoneListeners = [];\n    this._readyCapability = Promise.withResolvers();\n  }\n  addRangeListener(listener) {\n    this._rangeListeners.push(listener);\n  }\n  addProgressListener(listener) {\n    this._progressListeners.push(listener);\n  }\n  addProgressiveReadListener(listener) {\n    this._progressiveReadListeners.push(listener);\n  }\n  addProgressiveDoneListener(listener) {\n    this._progressiveDoneListeners.push(listener);\n  }\n  onDataRange(begin, chunk) {\n    for (const listener of this._rangeListeners) {\n      listener(begin, chunk);\n    }\n  }\n  onDataProgress(loaded, total) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressListeners) {\n        listener(loaded, total);\n      }\n    });\n  }\n  onDataProgressiveRead(chunk) {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveReadListeners) {\n        listener(chunk);\n      }\n    });\n  }\n  onDataProgressiveDone() {\n    this._readyCapability.promise.then(() => {\n      for (const listener of this._progressiveDoneListeners) {\n        listener();\n      }\n    });\n  }\n  transportReady() {\n    this._readyCapability.resolve();\n  }\n  requestDataRange(begin, end) {\n    unreachable(\"Abstract method PDFDataRangeTransport.requestDataRange\");\n  }\n  abort() {}\n}\nclass PDFDocumentProxy {\n  constructor(pdfInfo, transport) {\n    this._pdfInfo = pdfInfo;\n    this._transport = transport;\n  }\n  get annotationStorage() {\n    return this._transport.annotationStorage;\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get numPages() {\n    return this._pdfInfo.numPages;\n  }\n  get fingerprints() {\n    return this._pdfInfo.fingerprints;\n  }\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n  get allXfaHtml() {\n    return this._transport._htmlForXfa;\n  }\n  getPage(pageNumber) {\n    return this._transport.getPage(pageNumber);\n  }\n  getPageIndex(ref) {\n    return this._transport.getPageIndex(ref);\n  }\n  getDestinations() {\n    return this._transport.getDestinations();\n  }\n  getDestination(id) {\n    return this._transport.getDestination(id);\n  }\n  getPageLabels() {\n    return this._transport.getPageLabels();\n  }\n  getPageLayout() {\n    return this._transport.getPageLayout();\n  }\n  getPageMode() {\n    return this._transport.getPageMode();\n  }\n  getViewerPreferences() {\n    return this._transport.getViewerPreferences();\n  }\n  getOpenAction() {\n    return this._transport.getOpenAction();\n  }\n  getAttachments() {\n    return this._transport.getAttachments();\n  }\n  getJSActions() {\n    return this._transport.getDocJSActions();\n  }\n  getOutline() {\n    return this._transport.getOutline();\n  }\n  getOptionalContentConfig({\n    intent = \"display\"\n  } = {}) {\n    const {\n      renderingIntent\n    } = this._transport.getRenderingIntent(intent);\n    return this._transport.getOptionalContentConfig(renderingIntent);\n  }\n  getPermissions() {\n    return this._transport.getPermissions();\n  }\n  getMetadata() {\n    return this._transport.getMetadata();\n  }\n  getMarkInfo() {\n    return this._transport.getMarkInfo();\n  }\n  getData() {\n    return this._transport.getData();\n  }\n  saveDocument() {\n    return this._transport.saveDocument();\n  }\n  getDownloadInfo() {\n    return this._transport.downloadInfoCapability.promise;\n  }\n  cleanup(keepLoadedFonts = false) {\n    return this._transport.startCleanup(keepLoadedFonts || this.isPureXfa);\n  }\n  destroy() {\n    return this.loadingTask.destroy();\n  }\n  cachedPageNumber(ref) {\n    return this._transport.cachedPageNumber(ref);\n  }\n  get loadingParams() {\n    return this._transport.loadingParams;\n  }\n  get loadingTask() {\n    return this._transport.loadingTask;\n  }\n  getFieldObjects() {\n    return this._transport.getFieldObjects();\n  }\n  hasJSActions() {\n    return this._transport.hasJSActions();\n  }\n  getCalculationOrderIds() {\n    return this._transport.getCalculationOrderIds();\n  }\n}\nclass PDFPageProxy {\n  #delayedCleanupTimeout = null;\n  #pendingCleanup = false;\n  constructor(pageIndex, pageInfo, transport, pdfBug = false) {\n    this._pageIndex = pageIndex;\n    this._pageInfo = pageInfo;\n    this._transport = transport;\n    this._stats = pdfBug ? new StatTimer() : null;\n    this._pdfBug = pdfBug;\n    this.commonObjs = transport.commonObjs;\n    this.objs = new PDFObjects();\n    this._maybeCleanupAfterRender = false;\n    this._intentStates = new Map();\n    this.destroyed = false;\n  }\n  get pageNumber() {\n    return this._pageIndex + 1;\n  }\n  get rotate() {\n    return this._pageInfo.rotate;\n  }\n  get ref() {\n    return this._pageInfo.ref;\n  }\n  get userUnit() {\n    return this._pageInfo.userUnit;\n  }\n  get view() {\n    return this._pageInfo.view;\n  }\n  getViewport({\n    scale,\n    rotation = this.rotate,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.view,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip\n    });\n  }\n  getAnnotations({\n    intent = \"display\"\n  } = {}) {\n    const {\n      renderingIntent\n    } = this._transport.getRenderingIntent(intent);\n    return this._transport.getAnnotations(this._pageIndex, renderingIntent);\n  }\n  getJSActions() {\n    return this._transport.getPageJSActions(this._pageIndex);\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n  async getXfa() {\n    return this._transport._htmlForXfa?.children[this._pageIndex] || null;\n  }\n  render({\n    canvasContext,\n    viewport,\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    transform = null,\n    background = null,\n    optionalContentConfigPromise = null,\n    annotationCanvasMap = null,\n    pageColors = null,\n    printAnnotationStorage = null\n  }) {\n    this._stats?.time(\"Overall\");\n    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage);\n    const {\n      renderingIntent,\n      cacheKey\n    } = intentArgs;\n    this.#pendingCleanup = false;\n    this.#abortDelayedCleanup();\n    optionalContentConfigPromise ||= this._transport.getOptionalContentConfig(renderingIntent);\n    let intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(cacheKey, intentState);\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    const intentPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    if (!intentState.displayReadyCapability) {\n      intentState.displayReadyCapability = Promise.withResolvers();\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null\n      };\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    const complete = error => {\n      intentState.renderTasks.delete(internalRenderTask);\n      if (this._maybeCleanupAfterRender || intentPrint) {\n        this.#pendingCleanup = true;\n      }\n      this.#tryCleanup(!intentPrint);\n      if (error) {\n        internalRenderTask.capability.reject(error);\n        this._abortOperatorList({\n          intentState,\n          reason: error instanceof Error ? error : new Error(error)\n        });\n      } else {\n        internalRenderTask.capability.resolve();\n      }\n      if (this._stats) {\n        this._stats.timeEnd(\"Rendering\");\n        this._stats.timeEnd(\"Overall\");\n        if (globalThis.Stats?.enabled) {\n          globalThis.Stats.add(this.pageNumber, this._stats);\n        }\n      }\n    };\n    const internalRenderTask = new InternalRenderTask({\n      callback: complete,\n      params: {\n        canvasContext,\n        viewport,\n        transform,\n        background\n      },\n      objs: this.objs,\n      commonObjs: this.commonObjs,\n      annotationCanvasMap,\n      operatorList: intentState.operatorList,\n      pageIndex: this._pageIndex,\n      canvasFactory: this._transport.canvasFactory,\n      filterFactory: this._transport.filterFactory,\n      useRequestAnimationFrame: !intentPrint,\n      pdfBug: this._pdfBug,\n      pageColors\n    });\n    (intentState.renderTasks ||= new Set()).add(internalRenderTask);\n    const renderTask = internalRenderTask.task;\n    Promise.all([intentState.displayReadyCapability.promise, optionalContentConfigPromise]).then(([transparency, optionalContentConfig]) => {\n      if (this.destroyed) {\n        complete();\n        return;\n      }\n      this._stats?.time(\"Rendering\");\n      if (!(optionalContentConfig.renderingIntent & renderingIntent)) {\n        throw new Error(\"Must use the same `intent`-argument when calling the `PDFPageProxy.render` \" + \"and `PDFDocumentProxy.getOptionalContentConfig` methods.\");\n      }\n      internalRenderTask.initializeGraphics({\n        transparency,\n        optionalContentConfig\n      });\n      internalRenderTask.operatorListChanged();\n    }).catch(complete);\n    return renderTask;\n  }\n  getOperatorList({\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null\n  } = {}) {\n    function operatorListChanged() {\n      if (intentState.operatorList.lastChunk) {\n        intentState.opListReadCapability.resolve(intentState.operatorList);\n        intentState.renderTasks.delete(opListTask);\n      }\n    }\n    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage, true);\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n    let opListTask;\n    if (!intentState.opListReadCapability) {\n      opListTask = Object.create(null);\n      opListTask.operatorListChanged = operatorListChanged;\n      intentState.opListReadCapability = Promise.withResolvers();\n      (intentState.renderTasks ||= new Set()).add(opListTask);\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null\n      };\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    return intentState.opListReadCapability.promise;\n  }\n  streamTextContent({\n    includeMarkedContent = false,\n    disableNormalization = false\n  } = {}) {\n    const TEXT_CONTENT_CHUNK_SIZE = 100;\n    return this._transport.messageHandler.sendWithStream(\"GetTextContent\", {\n      pageIndex: this._pageIndex,\n      includeMarkedContent: includeMarkedContent === true,\n      disableNormalization: disableNormalization === true\n    }, {\n      highWaterMark: TEXT_CONTENT_CHUNK_SIZE,\n      size(textContent) {\n        return textContent.items.length;\n      }\n    });\n  }\n  getTextContent(params = {}) {\n    if (this._transport._htmlForXfa) {\n      return this.getXfa().then(xfa => XfaText.textContent(xfa));\n    }\n    const readableStream = this.streamTextContent(params);\n    return new Promise(function (resolve, reject) {\n      function pump() {\n        reader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            resolve(textContent);\n            return;\n          }\n          textContent.lang ??= value.lang;\n          Object.assign(textContent.styles, value.styles);\n          textContent.items.push(...value.items);\n          pump();\n        }, reject);\n      }\n      const reader = readableStream.getReader();\n      const textContent = {\n        items: [],\n        styles: Object.create(null),\n        lang: null\n      };\n      pump();\n    });\n  }\n  getStructTree() {\n    return this._transport.getStructTree(this._pageIndex);\n  }\n  _destroy() {\n    this.destroyed = true;\n    const waitOn = [];\n    for (const intentState of this._intentStates.values()) {\n      this._abortOperatorList({\n        intentState,\n        reason: new Error(\"Page was destroyed.\"),\n        force: true\n      });\n      if (intentState.opListReadCapability) {\n        continue;\n      }\n      for (const internalRenderTask of intentState.renderTasks) {\n        waitOn.push(internalRenderTask.completed);\n        internalRenderTask.cancel();\n      }\n    }\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    this.#abortDelayedCleanup();\n    return Promise.all(waitOn);\n  }\n  cleanup(resetStats = false) {\n    this.#pendingCleanup = true;\n    const success = this.#tryCleanup(false);\n    if (resetStats && success) {\n      this._stats &&= new StatTimer();\n    }\n    return success;\n  }\n  #tryCleanup(delayed = false) {\n    this.#abortDelayedCleanup();\n    if (!this.#pendingCleanup || this.destroyed) {\n      return false;\n    }\n    if (delayed) {\n      this.#delayedCleanupTimeout = setTimeout(() => {\n        this.#delayedCleanupTimeout = null;\n        this.#tryCleanup(false);\n      }, DELAYED_CLEANUP_TIMEOUT);\n      return false;\n    }\n    for (const {\n      renderTasks,\n      operatorList\n    } of this._intentStates.values()) {\n      if (renderTasks.size > 0 || !operatorList.lastChunk) {\n        return false;\n      }\n    }\n    this._intentStates.clear();\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return true;\n  }\n  #abortDelayedCleanup() {\n    if (this.#delayedCleanupTimeout) {\n      clearTimeout(this.#delayedCleanupTimeout);\n      this.#delayedCleanupTimeout = null;\n    }\n  }\n  _startRenderPage(transparency, cacheKey) {\n    const intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      return;\n    }\n    this._stats?.timeEnd(\"Page Request\");\n    intentState.displayReadyCapability?.resolve(transparency);\n  }\n  _renderPageChunk(operatorListChunk, intentState) {\n    for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {\n      intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n      intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);\n    }\n    intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n    intentState.operatorList.separateAnnots = operatorListChunk.separateAnnots;\n    for (const internalRenderTask of intentState.renderTasks) {\n      internalRenderTask.operatorListChanged();\n    }\n    if (operatorListChunk.lastChunk) {\n      this.#tryCleanup(true);\n    }\n  }\n  _pumpOperatorList({\n    renderingIntent,\n    cacheKey,\n    annotationStorageSerializable\n  }) {\n    const {\n      map,\n      transfer\n    } = annotationStorageSerializable;\n    const readableStream = this._transport.messageHandler.sendWithStream(\"GetOperatorList\", {\n      pageIndex: this._pageIndex,\n      intent: renderingIntent,\n      cacheKey,\n      annotationStorage: map\n    }, transfer);\n    const reader = readableStream.getReader();\n    const intentState = this._intentStates.get(cacheKey);\n    intentState.streamReader = reader;\n    const pump = () => {\n      reader.read().then(({\n        value,\n        done\n      }) => {\n        if (done) {\n          intentState.streamReader = null;\n          return;\n        }\n        if (this._transport.destroyed) {\n          return;\n        }\n        this._renderPageChunk(value, intentState);\n        pump();\n      }, reason => {\n        intentState.streamReader = null;\n        if (this._transport.destroyed) {\n          return;\n        }\n        if (intentState.operatorList) {\n          intentState.operatorList.lastChunk = true;\n          for (const internalRenderTask of intentState.renderTasks) {\n            internalRenderTask.operatorListChanged();\n          }\n          this.#tryCleanup(true);\n        }\n        if (intentState.displayReadyCapability) {\n          intentState.displayReadyCapability.reject(reason);\n        } else if (intentState.opListReadCapability) {\n          intentState.opListReadCapability.reject(reason);\n        } else {\n          throw reason;\n        }\n      });\n    };\n    pump();\n  }\n  _abortOperatorList({\n    intentState,\n    reason,\n    force = false\n  }) {\n    if (!intentState.streamReader) {\n      return;\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    if (!force) {\n      if (intentState.renderTasks.size > 0) {\n        return;\n      }\n      if (reason instanceof RenderingCancelledException) {\n        let delay = RENDERING_CANCELLED_TIMEOUT;\n        if (reason.extraDelay > 0 && reason.extraDelay < 1000) {\n          delay += reason.extraDelay;\n        }\n        intentState.streamReaderCancelTimeout = setTimeout(() => {\n          intentState.streamReaderCancelTimeout = null;\n          this._abortOperatorList({\n            intentState,\n            reason,\n            force: true\n          });\n        }, delay);\n        return;\n      }\n    }\n    intentState.streamReader.cancel(new AbortException(reason.message)).catch(() => {});\n    intentState.streamReader = null;\n    if (this._transport.destroyed) {\n      return;\n    }\n    for (const [curCacheKey, curIntentState] of this._intentStates) {\n      if (curIntentState === intentState) {\n        this._intentStates.delete(curCacheKey);\n        break;\n      }\n    }\n    this.cleanup();\n  }\n  get stats() {\n    return this._stats;\n  }\n}\nclass LoopbackPort {\n  #listeners = new Set();\n  #deferred = Promise.resolve();\n  postMessage(obj, transfer) {\n    const event = {\n      data: structuredClone(obj, transfer ? {\n        transfer\n      } : null)\n    };\n    this.#deferred.then(() => {\n      for (const listener of this.#listeners) {\n        listener.call(this, event);\n      }\n    });\n  }\n  addEventListener(name, listener) {\n    this.#listeners.add(listener);\n  }\n  removeEventListener(name, listener) {\n    this.#listeners.delete(listener);\n  }\n  terminate() {\n    this.#listeners.clear();\n  }\n}\nconst PDFWorkerUtil = {\n  isWorkerDisabled: false,\n  fakeWorkerId: 0\n};\n{\n  if (isNodeJS) {\n    PDFWorkerUtil.isWorkerDisabled = true;\n    GlobalWorkerOptions.workerSrc ||= \"./pdf.worker.mjs\";\n  }\n  PDFWorkerUtil.isSameOrigin = function (baseUrl, otherUrl) {\n    let base;\n    try {\n      base = new URL(baseUrl);\n      if (!base.origin || base.origin === \"null\") {\n        return false;\n      }\n    } catch {\n      return false;\n    }\n    const other = new URL(otherUrl, base);\n    return base.origin === other.origin;\n  };\n  PDFWorkerUtil.createCDNWrapper = function (url) {\n    const wrapper = `await import(\"${url}\");`;\n    return URL.createObjectURL(new Blob([wrapper], {\n      type: \"text/javascript\"\n    }));\n  };\n}\nclass PDFWorker {\n  static #workerPorts;\n  constructor({\n    name = null,\n    port = null,\n    verbosity = getVerbosityLevel()\n  } = {}) {\n    this.name = name;\n    this.destroyed = false;\n    this.verbosity = verbosity;\n    this._readyCapability = Promise.withResolvers();\n    this._port = null;\n    this._webWorker = null;\n    this._messageHandler = null;\n    if (port) {\n      if (PDFWorker.#workerPorts?.has(port)) {\n        throw new Error(\"Cannot use more than one PDFWorker per port.\");\n      }\n      (PDFWorker.#workerPorts ||= new WeakMap()).set(port, this);\n      this._initializeFromPort(port);\n      return;\n    }\n    this._initialize();\n  }\n  get promise() {\n    if (isNodeJS) {\n      return Promise.all([NodePackages.promise, this._readyCapability.promise]);\n    }\n    return this._readyCapability.promise;\n  }\n  get port() {\n    return this._port;\n  }\n  get messageHandler() {\n    return this._messageHandler;\n  }\n  _initializeFromPort(port) {\n    this._port = port;\n    this._messageHandler = new MessageHandler(\"main\", \"worker\", port);\n    this._messageHandler.on(\"ready\", function () {});\n    this._readyCapability.resolve();\n    this._messageHandler.send(\"configure\", {\n      verbosity: this.verbosity\n    });\n  }\n  _initialize() {\n    if (!PDFWorkerUtil.isWorkerDisabled && !PDFWorker.#mainThreadWorkerMessageHandler) {\n      let {\n        workerSrc\n      } = PDFWorker;\n      try {\n        if (!PDFWorkerUtil.isSameOrigin(window.location.href, workerSrc)) {\n          workerSrc = PDFWorkerUtil.createCDNWrapper(new URL(workerSrc, window.location).href);\n        }\n        const worker = new Worker(workerSrc, {\n          type: \"module\"\n        });\n        const messageHandler = new MessageHandler(\"main\", \"worker\", worker);\n        const terminateEarly = () => {\n          worker.removeEventListener(\"error\", onWorkerError);\n          messageHandler.destroy();\n          worker.terminate();\n          if (this.destroyed) {\n            this._readyCapability.reject(new Error(\"Worker was destroyed\"));\n          } else {\n            this._setupFakeWorker();\n          }\n        };\n        const onWorkerError = () => {\n          if (!this._webWorker) {\n            terminateEarly();\n          }\n        };\n        worker.addEventListener(\"error\", onWorkerError);\n        messageHandler.on(\"test\", data => {\n          worker.removeEventListener(\"error\", onWorkerError);\n          if (this.destroyed) {\n            terminateEarly();\n            return;\n          }\n          if (data) {\n            this._messageHandler = messageHandler;\n            this._port = worker;\n            this._webWorker = worker;\n            this._readyCapability.resolve();\n            messageHandler.send(\"configure\", {\n              verbosity: this.verbosity\n            });\n          } else {\n            this._setupFakeWorker();\n            messageHandler.destroy();\n            worker.terminate();\n          }\n        });\n        messageHandler.on(\"ready\", data => {\n          worker.removeEventListener(\"error\", onWorkerError);\n          if (this.destroyed) {\n            terminateEarly();\n            return;\n          }\n          try {\n            sendTest();\n          } catch {\n            this._setupFakeWorker();\n          }\n        });\n        const sendTest = () => {\n          const testObj = new Uint8Array();\n          messageHandler.send(\"test\", testObj, [testObj.buffer]);\n        };\n        sendTest();\n        return;\n      } catch {\n        info(\"The worker has been disabled.\");\n      }\n    }\n    this._setupFakeWorker();\n  }\n  _setupFakeWorker() {\n    if (!PDFWorkerUtil.isWorkerDisabled) {\n      warn(\"Setting up fake worker.\");\n      PDFWorkerUtil.isWorkerDisabled = true;\n    }\n    PDFWorker._setupFakeWorkerGlobal.then(WorkerMessageHandler => {\n      if (this.destroyed) {\n        this._readyCapability.reject(new Error(\"Worker was destroyed\"));\n        return;\n      }\n      const port = new LoopbackPort();\n      this._port = port;\n      const id = `fake${PDFWorkerUtil.fakeWorkerId++}`;\n      const workerHandler = new MessageHandler(id + \"_worker\", id, port);\n      WorkerMessageHandler.setup(workerHandler, port);\n      const messageHandler = new MessageHandler(id, id + \"_worker\", port);\n      this._messageHandler = messageHandler;\n      this._readyCapability.resolve();\n      messageHandler.send(\"configure\", {\n        verbosity: this.verbosity\n      });\n    }).catch(reason => {\n      this._readyCapability.reject(new Error(`Setting up fake worker failed: \"${reason.message}\".`));\n    });\n  }\n  destroy() {\n    this.destroyed = true;\n    if (this._webWorker) {\n      this._webWorker.terminate();\n      this._webWorker = null;\n    }\n    PDFWorker.#workerPorts?.delete(this._port);\n    this._port = null;\n    if (this._messageHandler) {\n      this._messageHandler.destroy();\n      this._messageHandler = null;\n    }\n  }\n  static fromPort(params) {\n    if (!params?.port) {\n      throw new Error(\"PDFWorker.fromPort - invalid method signature.\");\n    }\n    const cachedPort = this.#workerPorts?.get(params.port);\n    if (cachedPort) {\n      if (cachedPort._pendingDestroy) {\n        throw new Error(\"PDFWorker.fromPort - the worker is being destroyed.\\n\" + \"Please remember to await `PDFDocumentLoadingTask.destroy()`-calls.\");\n      }\n      return cachedPort;\n    }\n    return new PDFWorker(params);\n  }\n  static get workerSrc() {\n    if (GlobalWorkerOptions.workerSrc) {\n      return GlobalWorkerOptions.workerSrc;\n    }\n    throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');\n  }\n  static get #mainThreadWorkerMessageHandler() {\n    try {\n      return globalThis.pdfjsWorker?.WorkerMessageHandler || null;\n    } catch {\n      return null;\n    }\n  }\n  static get _setupFakeWorkerGlobal() {\n    const loader = async () => {\n      if (this.#mainThreadWorkerMessageHandler) {\n        return this.#mainThreadWorkerMessageHandler;\n      }\n      const worker = await import( /*webpackIgnore: true*/this.workerSrc);\n      return worker.WorkerMessageHandler;\n    };\n    return shadow(this, \"_setupFakeWorkerGlobal\", loader());\n  }\n}\nclass WorkerTransport {\n  #methodPromises = new Map();\n  #pageCache = new Map();\n  #pagePromises = new Map();\n  #pageRefCache = new Map();\n  #passwordCapability = null;\n  constructor(messageHandler, loadingTask, networkStream, params, factory) {\n    this.messageHandler = messageHandler;\n    this.loadingTask = loadingTask;\n    this.commonObjs = new PDFObjects();\n    this.fontLoader = new FontLoader({\n      ownerDocument: params.ownerDocument,\n      styleElement: params.styleElement\n    });\n    this.loadingParams = params.loadingParams;\n    this._params = params;\n    this.canvasFactory = factory.canvasFactory;\n    this.filterFactory = factory.filterFactory;\n    this.cMapReaderFactory = factory.cMapReaderFactory;\n    this.standardFontDataFactory = factory.standardFontDataFactory;\n    this.destroyed = false;\n    this.destroyCapability = null;\n    this._networkStream = networkStream;\n    this._fullReader = null;\n    this._lastProgress = null;\n    this.downloadInfoCapability = Promise.withResolvers();\n    this.setupMessageHandler();\n  }\n  #cacheSimpleMethod(name, data = null) {\n    const cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, data);\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  get annotationStorage() {\n    return shadow(this, \"annotationStorage\", new AnnotationStorage());\n  }\n  getRenderingIntent(intent, annotationMode = AnnotationMode.ENABLE, printAnnotationStorage = null, isOpList = false) {\n    let renderingIntent = RenderingIntentFlag.DISPLAY;\n    let annotationStorageSerializable = SerializableEmpty;\n    switch (intent) {\n      case \"any\":\n        renderingIntent = RenderingIntentFlag.ANY;\n        break;\n      case \"display\":\n        break;\n      case \"print\":\n        renderingIntent = RenderingIntentFlag.PRINT;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid intent: ${intent}`);\n    }\n    switch (annotationMode) {\n      case AnnotationMode.DISABLE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_DISABLE;\n        break;\n      case AnnotationMode.ENABLE:\n        break;\n      case AnnotationMode.ENABLE_FORMS:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_FORMS;\n        break;\n      case AnnotationMode.ENABLE_STORAGE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_STORAGE;\n        const annotationStorage = renderingIntent & RenderingIntentFlag.PRINT && printAnnotationStorage instanceof PrintAnnotationStorage ? printAnnotationStorage : this.annotationStorage;\n        annotationStorageSerializable = annotationStorage.serializable;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);\n    }\n    if (isOpList) {\n      renderingIntent += RenderingIntentFlag.OPLIST;\n    }\n    return {\n      renderingIntent,\n      cacheKey: `${renderingIntent}_${annotationStorageSerializable.hash}`,\n      annotationStorageSerializable\n    };\n  }\n  destroy() {\n    if (this.destroyCapability) {\n      return this.destroyCapability.promise;\n    }\n    this.destroyed = true;\n    this.destroyCapability = Promise.withResolvers();\n    this.#passwordCapability?.reject(new Error(\"Worker was destroyed during onPassword callback\"));\n    const waitOn = [];\n    for (const page of this.#pageCache.values()) {\n      waitOn.push(page._destroy());\n    }\n    this.#pageCache.clear();\n    this.#pagePromises.clear();\n    this.#pageRefCache.clear();\n    if (this.hasOwnProperty(\"annotationStorage\")) {\n      this.annotationStorage.resetModified();\n    }\n    const terminated = this.messageHandler.sendWithPromise(\"Terminate\", null);\n    waitOn.push(terminated);\n    Promise.all(waitOn).then(() => {\n      this.commonObjs.clear();\n      this.fontLoader.clear();\n      this.#methodPromises.clear();\n      this.filterFactory.destroy();\n      TextLayer.cleanup();\n      this._networkStream?.cancelAllRequests(new AbortException(\"Worker was terminated.\"));\n      if (this.messageHandler) {\n        this.messageHandler.destroy();\n        this.messageHandler = null;\n      }\n      this.destroyCapability.resolve();\n    }, this.destroyCapability.reject);\n    return this.destroyCapability.promise;\n  }\n  setupMessageHandler() {\n    const {\n      messageHandler,\n      loadingTask\n    } = this;\n    messageHandler.on(\"GetReader\", (data, sink) => {\n      assert(this._networkStream, \"GetReader - no `IPDFStream` instance available.\");\n      this._fullReader = this._networkStream.getFullReader();\n      this._fullReader.onProgress = evt => {\n        this._lastProgress = {\n          loaded: evt.loaded,\n          total: evt.total\n        };\n      };\n      sink.onPull = () => {\n        this._fullReader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            sink.close();\n            return;\n          }\n          assert(value instanceof ArrayBuffer, \"GetReader - expected an ArrayBuffer.\");\n          sink.enqueue(new Uint8Array(value), 1, [value]);\n        }).catch(reason => {\n          sink.error(reason);\n        });\n      };\n      sink.onCancel = reason => {\n        this._fullReader.cancel(reason);\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on(\"ReaderHeadersReady\", data => {\n      const headersCapability = Promise.withResolvers();\n      const fullReader = this._fullReader;\n      fullReader.headersReady.then(() => {\n        if (!fullReader.isStreamingSupported || !fullReader.isRangeSupported) {\n          if (this._lastProgress) {\n            loadingTask.onProgress?.(this._lastProgress);\n          }\n          fullReader.onProgress = evt => {\n            loadingTask.onProgress?.({\n              loaded: evt.loaded,\n              total: evt.total\n            });\n          };\n        }\n        headersCapability.resolve({\n          isStreamingSupported: fullReader.isStreamingSupported,\n          isRangeSupported: fullReader.isRangeSupported,\n          contentLength: fullReader.contentLength\n        });\n      }, headersCapability.reject);\n      return headersCapability.promise;\n    });\n    messageHandler.on(\"GetRangeReader\", (data, sink) => {\n      assert(this._networkStream, \"GetRangeReader - no `IPDFStream` instance available.\");\n      const rangeReader = this._networkStream.getRangeReader(data.begin, data.end);\n      if (!rangeReader) {\n        sink.close();\n        return;\n      }\n      sink.onPull = () => {\n        rangeReader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            sink.close();\n            return;\n          }\n          assert(value instanceof ArrayBuffer, \"GetRangeReader - expected an ArrayBuffer.\");\n          sink.enqueue(new Uint8Array(value), 1, [value]);\n        }).catch(reason => {\n          sink.error(reason);\n        });\n      };\n      sink.onCancel = reason => {\n        rangeReader.cancel(reason);\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on(\"GetDoc\", ({\n      pdfInfo\n    }) => {\n      this._numPages = pdfInfo.numPages;\n      this._htmlForXfa = pdfInfo.htmlForXfa;\n      delete pdfInfo.htmlForXfa;\n      loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));\n    });\n    messageHandler.on(\"DocException\", function (ex) {\n      let reason;\n      switch (ex.name) {\n        case \"PasswordException\":\n          reason = new PasswordException(ex.message, ex.code);\n          break;\n        case \"InvalidPDFException\":\n          reason = new InvalidPDFException(ex.message);\n          break;\n        case \"MissingPDFException\":\n          reason = new MissingPDFException(ex.message);\n          break;\n        case \"UnexpectedResponseException\":\n          reason = new UnexpectedResponseException(ex.message, ex.status);\n          break;\n        case \"UnknownErrorException\":\n          reason = new UnknownErrorException(ex.message, ex.details);\n          break;\n        default:\n          unreachable(\"DocException - expected a valid Error.\");\n      }\n      loadingTask._capability.reject(reason);\n    });\n    messageHandler.on(\"PasswordRequest\", exception => {\n      this.#passwordCapability = Promise.withResolvers();\n      if (loadingTask.onPassword) {\n        const updatePassword = password => {\n          if (password instanceof Error) {\n            this.#passwordCapability.reject(password);\n          } else {\n            this.#passwordCapability.resolve({\n              password\n            });\n          }\n        };\n        try {\n          loadingTask.onPassword(updatePassword, exception.code);\n        } catch (ex) {\n          this.#passwordCapability.reject(ex);\n        }\n      } else {\n        this.#passwordCapability.reject(new PasswordException(exception.message, exception.code));\n      }\n      return this.#passwordCapability.promise;\n    });\n    messageHandler.on(\"DataLoaded\", data => {\n      loadingTask.onProgress?.({\n        loaded: data.length,\n        total: data.length\n      });\n      this.downloadInfoCapability.resolve(data);\n    });\n    messageHandler.on(\"StartRenderPage\", data => {\n      if (this.destroyed) {\n        return;\n      }\n      const page = this.#pageCache.get(data.pageIndex);\n      page._startRenderPage(data.transparency, data.cacheKey);\n    });\n    messageHandler.on(\"commonobj\", ([id, type, exportedData]) => {\n      if (this.destroyed) {\n        return null;\n      }\n      if (this.commonObjs.has(id)) {\n        return null;\n      }\n      switch (type) {\n        case \"Font\":\n          const {\n            disableFontFace,\n            fontExtraProperties,\n            pdfBug\n          } = this._params;\n          if (\"error\" in exportedData) {\n            const exportedError = exportedData.error;\n            warn(`Error during font loading: ${exportedError}`);\n            this.commonObjs.resolve(id, exportedError);\n            break;\n          }\n          const inspectFont = pdfBug && globalThis.FontInspector?.enabled ? (font, url) => globalThis.FontInspector.fontAdded(font, url) : null;\n          const font = new FontFaceObject(exportedData, {\n            disableFontFace,\n            inspectFont\n          });\n          this.fontLoader.bind(font).catch(() => messageHandler.sendWithPromise(\"FontFallback\", {\n            id\n          })).finally(() => {\n            if (!fontExtraProperties && font.data) {\n              font.data = null;\n            }\n            this.commonObjs.resolve(id, font);\n          });\n          break;\n        case \"CopyLocalImage\":\n          const {\n            imageRef\n          } = exportedData;\n          assert(imageRef, \"The imageRef must be defined.\");\n          for (const pageProxy of this.#pageCache.values()) {\n            for (const [, data] of pageProxy.objs) {\n              if (data?.ref !== imageRef) {\n                continue;\n              }\n              if (!data.dataLen) {\n                return null;\n              }\n              this.commonObjs.resolve(id, structuredClone(data));\n              return data.dataLen;\n            }\n          }\n          break;\n        case \"FontPath\":\n        case \"Image\":\n        case \"Pattern\":\n          this.commonObjs.resolve(id, exportedData);\n          break;\n        default:\n          throw new Error(`Got unknown common object type ${type}`);\n      }\n      return null;\n    });\n    messageHandler.on(\"obj\", ([id, pageIndex, type, imageData]) => {\n      if (this.destroyed) {\n        return;\n      }\n      const pageProxy = this.#pageCache.get(pageIndex);\n      if (pageProxy.objs.has(id)) {\n        return;\n      }\n      if (pageProxy._intentStates.size === 0) {\n        imageData?.bitmap?.close();\n        return;\n      }\n      switch (type) {\n        case \"Image\":\n          pageProxy.objs.resolve(id, imageData);\n          if (imageData?.dataLen > MAX_IMAGE_SIZE_TO_CACHE) {\n            pageProxy._maybeCleanupAfterRender = true;\n          }\n          break;\n        case \"Pattern\":\n          pageProxy.objs.resolve(id, imageData);\n          break;\n        default:\n          throw new Error(`Got unknown object type ${type}`);\n      }\n    });\n    messageHandler.on(\"DocProgress\", data => {\n      if (this.destroyed) {\n        return;\n      }\n      loadingTask.onProgress?.({\n        loaded: data.loaded,\n        total: data.total\n      });\n    });\n    messageHandler.on(\"FetchBuiltInCMap\", data => {\n      if (this.destroyed) {\n        return Promise.reject(new Error(\"Worker was destroyed.\"));\n      }\n      if (!this.cMapReaderFactory) {\n        return Promise.reject(new Error(\"CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.\"));\n      }\n      return this.cMapReaderFactory.fetch(data);\n    });\n    messageHandler.on(\"FetchStandardFontData\", data => {\n      if (this.destroyed) {\n        return Promise.reject(new Error(\"Worker was destroyed.\"));\n      }\n      if (!this.standardFontDataFactory) {\n        return Promise.reject(new Error(\"StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.\"));\n      }\n      return this.standardFontDataFactory.fetch(data);\n    });\n  }\n  getData() {\n    return this.messageHandler.sendWithPromise(\"GetData\", null);\n  }\n  saveDocument() {\n    if (this.annotationStorage.size <= 0) {\n      warn(\"saveDocument called while `annotationStorage` is empty, \" + \"please use the getData-method instead.\");\n    }\n    const {\n      map,\n      transfer\n    } = this.annotationStorage.serializable;\n    return this.messageHandler.sendWithPromise(\"SaveDocument\", {\n      isPureXfa: !!this._htmlForXfa,\n      numPages: this._numPages,\n      annotationStorage: map,\n      filename: this._fullReader?.filename ?? null\n    }, transfer).finally(() => {\n      this.annotationStorage.resetModified();\n    });\n  }\n  getPage(pageNumber) {\n    if (!Number.isInteger(pageNumber) || pageNumber <= 0 || pageNumber > this._numPages) {\n      return Promise.reject(new Error(\"Invalid page request.\"));\n    }\n    const pageIndex = pageNumber - 1,\n      cachedPromise = this.#pagePromises.get(pageIndex);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(\"GetPage\", {\n      pageIndex\n    }).then(pageInfo => {\n      if (this.destroyed) {\n        throw new Error(\"Transport destroyed\");\n      }\n      if (pageInfo.refStr) {\n        this.#pageRefCache.set(pageInfo.refStr, pageNumber);\n      }\n      const page = new PDFPageProxy(pageIndex, pageInfo, this, this._params.pdfBug);\n      this.#pageCache.set(pageIndex, page);\n      return page;\n    });\n    this.#pagePromises.set(pageIndex, promise);\n    return promise;\n  }\n  getPageIndex(ref) {\n    if (!isRefProxy(ref)) {\n      return Promise.reject(new Error(\"Invalid pageIndex request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetPageIndex\", {\n      num: ref.num,\n      gen: ref.gen\n    });\n  }\n  getAnnotations(pageIndex, intent) {\n    return this.messageHandler.sendWithPromise(\"GetAnnotations\", {\n      pageIndex,\n      intent\n    });\n  }\n  getFieldObjects() {\n    return this.#cacheSimpleMethod(\"GetFieldObjects\");\n  }\n  hasJSActions() {\n    return this.#cacheSimpleMethod(\"HasJSActions\");\n  }\n  getCalculationOrderIds() {\n    return this.messageHandler.sendWithPromise(\"GetCalculationOrderIds\", null);\n  }\n  getDestinations() {\n    return this.messageHandler.sendWithPromise(\"GetDestinations\", null);\n  }\n  getDestination(id) {\n    if (typeof id !== \"string\") {\n      return Promise.reject(new Error(\"Invalid destination request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetDestination\", {\n      id\n    });\n  }\n  getPageLabels() {\n    return this.messageHandler.sendWithPromise(\"GetPageLabels\", null);\n  }\n  getPageLayout() {\n    return this.messageHandler.sendWithPromise(\"GetPageLayout\", null);\n  }\n  getPageMode() {\n    return this.messageHandler.sendWithPromise(\"GetPageMode\", null);\n  }\n  getViewerPreferences() {\n    return this.messageHandler.sendWithPromise(\"GetViewerPreferences\", null);\n  }\n  getOpenAction() {\n    return this.messageHandler.sendWithPromise(\"GetOpenAction\", null);\n  }\n  getAttachments() {\n    return this.messageHandler.sendWithPromise(\"GetAttachments\", null);\n  }\n  getDocJSActions() {\n    return this.#cacheSimpleMethod(\"GetDocJSActions\");\n  }\n  getPageJSActions(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetPageJSActions\", {\n      pageIndex\n    });\n  }\n  getStructTree(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetStructTree\", {\n      pageIndex\n    });\n  }\n  getOutline() {\n    return this.messageHandler.sendWithPromise(\"GetOutline\", null);\n  }\n  getOptionalContentConfig(renderingIntent) {\n    return this.#cacheSimpleMethod(\"GetOptionalContentConfig\").then(data => new OptionalContentConfig(data, renderingIntent));\n  }\n  getPermissions() {\n    return this.messageHandler.sendWithPromise(\"GetPermissions\", null);\n  }\n  getMetadata() {\n    const name = \"GetMetadata\",\n      cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, null).then(results => ({\n      info: results[0],\n      metadata: results[1] ? new Metadata(results[1]) : null,\n      contentDispositionFilename: this._fullReader?.filename ?? null,\n      contentLength: this._fullReader?.contentLength ?? null\n    }));\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  getMarkInfo() {\n    return this.messageHandler.sendWithPromise(\"GetMarkInfo\", null);\n  }\n  async startCleanup(keepLoadedFonts = false) {\n    if (this.destroyed) {\n      return;\n    }\n    await this.messageHandler.sendWithPromise(\"Cleanup\", null);\n    for (const page of this.#pageCache.values()) {\n      const cleanupSuccessful = page.cleanup();\n      if (!cleanupSuccessful) {\n        throw new Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`);\n      }\n    }\n    this.commonObjs.clear();\n    if (!keepLoadedFonts) {\n      this.fontLoader.clear();\n    }\n    this.#methodPromises.clear();\n    this.filterFactory.destroy(true);\n    TextLayer.cleanup();\n  }\n  cachedPageNumber(ref) {\n    if (!isRefProxy(ref)) {\n      return null;\n    }\n    const refStr = ref.gen === 0 ? `${ref.num}R` : `${ref.num}R${ref.gen}`;\n    return this.#pageRefCache.get(refStr) ?? null;\n  }\n}\nconst INITIAL_DATA = Symbol(\"INITIAL_DATA\");\nclass PDFObjects {\n  #objs = Object.create(null);\n  #ensureObj(objId) {\n    return this.#objs[objId] ||= {\n      ...Promise.withResolvers(),\n      data: INITIAL_DATA\n    };\n  }\n  get(objId, callback = null) {\n    if (callback) {\n      const obj = this.#ensureObj(objId);\n      obj.promise.then(() => callback(obj.data));\n      return null;\n    }\n    const obj = this.#objs[objId];\n    if (!obj || obj.data === INITIAL_DATA) {\n      throw new Error(`Requesting object that isn't resolved yet ${objId}.`);\n    }\n    return obj.data;\n  }\n  has(objId) {\n    const obj = this.#objs[objId];\n    return !!obj && obj.data !== INITIAL_DATA;\n  }\n  resolve(objId, data = null) {\n    const obj = this.#ensureObj(objId);\n    obj.data = data;\n    obj.resolve();\n  }\n  clear() {\n    for (const objId in this.#objs) {\n      const {\n        data\n      } = this.#objs[objId];\n      data?.bitmap?.close();\n    }\n    this.#objs = Object.create(null);\n  }\n  *[Symbol.iterator]() {\n    for (const objId in this.#objs) {\n      const {\n        data\n      } = this.#objs[objId];\n      if (data === INITIAL_DATA) {\n        continue;\n      }\n      yield [objId, data];\n    }\n  }\n}\nclass RenderTask {\n  #internalRenderTask = null;\n  constructor(internalRenderTask) {\n    this.#internalRenderTask = internalRenderTask;\n    this.onContinue = null;\n  }\n  get promise() {\n    return this.#internalRenderTask.capability.promise;\n  }\n  cancel(extraDelay = 0) {\n    this.#internalRenderTask.cancel(null, extraDelay);\n  }\n  get separateAnnots() {\n    const {\n      separateAnnots\n    } = this.#internalRenderTask.operatorList;\n    if (!separateAnnots) {\n      return false;\n    }\n    const {\n      annotationCanvasMap\n    } = this.#internalRenderTask;\n    return separateAnnots.form || separateAnnots.canvas && annotationCanvasMap?.size > 0;\n  }\n}\nclass InternalRenderTask {\n  static #canvasInUse = new WeakSet();\n  constructor({\n    callback,\n    params,\n    objs,\n    commonObjs,\n    annotationCanvasMap,\n    operatorList,\n    pageIndex,\n    canvasFactory,\n    filterFactory,\n    useRequestAnimationFrame = false,\n    pdfBug = false,\n    pageColors = null\n  }) {\n    this.callback = callback;\n    this.params = params;\n    this.objs = objs;\n    this.commonObjs = commonObjs;\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.operatorListIdx = null;\n    this.operatorList = operatorList;\n    this._pageIndex = pageIndex;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this._pdfBug = pdfBug;\n    this.pageColors = pageColors;\n    this.running = false;\n    this.graphicsReadyCallback = null;\n    this.graphicsReady = false;\n    this._useRequestAnimationFrame = useRequestAnimationFrame === true && typeof window !== \"undefined\";\n    this.cancelled = false;\n    this.capability = Promise.withResolvers();\n    this.task = new RenderTask(this);\n    this._cancelBound = this.cancel.bind(this);\n    this._continueBound = this._continue.bind(this);\n    this._scheduleNextBound = this._scheduleNext.bind(this);\n    this._nextBound = this._next.bind(this);\n    this._canvas = params.canvasContext.canvas;\n  }\n  get completed() {\n    return this.capability.promise.catch(function () {});\n  }\n  initializeGraphics({\n    transparency = false,\n    optionalContentConfig\n  }) {\n    if (this.cancelled) {\n      return;\n    }\n    if (this._canvas) {\n      if (InternalRenderTask.#canvasInUse.has(this._canvas)) {\n        throw new Error(\"Cannot use the same canvas during multiple render() operations. \" + \"Use different canvas or ensure previous operations were \" + \"cancelled or completed.\");\n      }\n      InternalRenderTask.#canvasInUse.add(this._canvas);\n    }\n    if (this._pdfBug && globalThis.StepperManager?.enabled) {\n      this.stepper = globalThis.StepperManager.create(this._pageIndex);\n      this.stepper.init(this.operatorList);\n      this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n    }\n    const {\n      canvasContext,\n      viewport,\n      transform,\n      background\n    } = this.params;\n    this.gfx = new CanvasGraphics(canvasContext, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n      optionalContentConfig\n    }, this.annotationCanvasMap, this.pageColors);\n    this.gfx.beginDrawing({\n      transform,\n      viewport,\n      transparency,\n      background\n    });\n    this.operatorListIdx = 0;\n    this.graphicsReady = true;\n    this.graphicsReadyCallback?.();\n  }\n  cancel(error = null, extraDelay = 0) {\n    this.running = false;\n    this.cancelled = true;\n    this.gfx?.endDrawing();\n    InternalRenderTask.#canvasInUse.delete(this._canvas);\n    this.callback(error || new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex + 1}`, extraDelay));\n  }\n  operatorListChanged() {\n    if (!this.graphicsReady) {\n      this.graphicsReadyCallback ||= this._continueBound;\n      return;\n    }\n    this.stepper?.updateOperatorList(this.operatorList);\n    if (this.running) {\n      return;\n    }\n    this._continue();\n  }\n  _continue() {\n    this.running = true;\n    if (this.cancelled) {\n      return;\n    }\n    if (this.task.onContinue) {\n      this.task.onContinue(this._scheduleNextBound);\n    } else {\n      this._scheduleNext();\n    }\n  }\n  _scheduleNext() {\n    if (this._useRequestAnimationFrame) {\n      window.requestAnimationFrame(() => {\n        this._nextBound().catch(this._cancelBound);\n      });\n    } else {\n      Promise.resolve().then(this._nextBound).catch(this._cancelBound);\n    }\n  }\n  async _next() {\n    if (this.cancelled) {\n      return;\n    }\n    this.operatorListIdx = this.gfx.executeOperatorList(this.operatorList, this.operatorListIdx, this._continueBound, this.stepper);\n    if (this.operatorListIdx === this.operatorList.argsArray.length) {\n      this.running = false;\n      if (this.operatorList.lastChunk) {\n        this.gfx.endDrawing();\n        InternalRenderTask.#canvasInUse.delete(this._canvas);\n        this.callback();\n      }\n    }\n  }\n}\nconst version = \"4.3.136\";\nconst build = \"0cec64437\";\n\n;// CONCATENATED MODULE: ./src/shared/scripting_utils.js\nfunction makeColorComp(n) {\n  return Math.floor(Math.max(0, Math.min(1, n)) * 255).toString(16).padStart(2, \"0\");\n}\nfunction scaleAndClamp(x) {\n  return Math.max(0, Math.min(255, 255 * x));\n}\nclass ColorConverters {\n  static CMYK_G([c, y, m, k]) {\n    return [\"G\", 1 - Math.min(1, 0.3 * c + 0.59 * m + 0.11 * y + k)];\n  }\n  static G_CMYK([g]) {\n    return [\"CMYK\", 0, 0, 0, 1 - g];\n  }\n  static G_RGB([g]) {\n    return [\"RGB\", g, g, g];\n  }\n  static G_rgb([g]) {\n    g = scaleAndClamp(g);\n    return [g, g, g];\n  }\n  static G_HTML([g]) {\n    const G = makeColorComp(g);\n    return `#${G}${G}${G}`;\n  }\n  static RGB_G([r, g, b]) {\n    return [\"G\", 0.3 * r + 0.59 * g + 0.11 * b];\n  }\n  static RGB_rgb(color) {\n    return color.map(scaleAndClamp);\n  }\n  static RGB_HTML(color) {\n    return `#${color.map(makeColorComp).join(\"\")}`;\n  }\n  static T_HTML() {\n    return \"#00000000\";\n  }\n  static T_rgb() {\n    return [null];\n  }\n  static CMYK_RGB([c, y, m, k]) {\n    return [\"RGB\", 1 - Math.min(1, c + k), 1 - Math.min(1, m + k), 1 - Math.min(1, y + k)];\n  }\n  static CMYK_rgb([c, y, m, k]) {\n    return [scaleAndClamp(1 - Math.min(1, c + k)), scaleAndClamp(1 - Math.min(1, m + k)), scaleAndClamp(1 - Math.min(1, y + k))];\n  }\n  static CMYK_HTML(components) {\n    const rgb = this.CMYK_RGB(components).slice(1);\n    return this.RGB_HTML(rgb);\n  }\n  static RGB_CMYK([r, g, b]) {\n    const c = 1 - r;\n    const m = 1 - g;\n    const y = 1 - b;\n    const k = Math.min(c, m, y);\n    return [\"CMYK\", c, m, y, k];\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/xfa_layer.js\n\nclass XfaLayer {\n  static setupStorage(html, id, element, storage, intent) {\n    const storedData = storage.getValue(id, {\n      value: null\n    });\n    switch (element.name) {\n      case \"textarea\":\n        if (storedData.value !== null) {\n          html.textContent = storedData.value;\n        }\n        if (intent === \"print\") {\n          break;\n        }\n        html.addEventListener(\"input\", event => {\n          storage.setValue(id, {\n            value: event.target.value\n          });\n        });\n        break;\n      case \"input\":\n        if (element.attributes.type === \"radio\" || element.attributes.type === \"checkbox\") {\n          if (storedData.value === element.attributes.xfaOn) {\n            html.setAttribute(\"checked\", true);\n          } else if (storedData.value === element.attributes.xfaOff) {\n            html.removeAttribute(\"checked\");\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"change\", event => {\n            storage.setValue(id, {\n              value: event.target.checked ? event.target.getAttribute(\"xfaOn\") : event.target.getAttribute(\"xfaOff\")\n            });\n          });\n        } else {\n          if (storedData.value !== null) {\n            html.setAttribute(\"value\", storedData.value);\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"input\", event => {\n            storage.setValue(id, {\n              value: event.target.value\n            });\n          });\n        }\n        break;\n      case \"select\":\n        if (storedData.value !== null) {\n          html.setAttribute(\"value\", storedData.value);\n          for (const option of element.children) {\n            if (option.attributes.value === storedData.value) {\n              option.attributes.selected = true;\n            } else if (option.attributes.hasOwnProperty(\"selected\")) {\n              delete option.attributes.selected;\n            }\n          }\n        }\n        html.addEventListener(\"input\", event => {\n          const options = event.target.options;\n          const value = options.selectedIndex === -1 ? \"\" : options[options.selectedIndex].value;\n          storage.setValue(id, {\n            value\n          });\n        });\n        break;\n    }\n  }\n  static setAttributes({\n    html,\n    element,\n    storage = null,\n    intent,\n    linkService\n  }) {\n    const {\n      attributes\n    } = element;\n    const isHTMLAnchorElement = html instanceof HTMLAnchorElement;\n    if (attributes.type === \"radio\") {\n      attributes.name = `${attributes.name}-${intent}`;\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n      if (value === null || value === undefined) {\n        continue;\n      }\n      switch (key) {\n        case \"class\":\n          if (value.length) {\n            html.setAttribute(key, value.join(\" \"));\n          }\n          break;\n        case \"dataId\":\n          break;\n        case \"id\":\n          html.setAttribute(\"data-element-id\", value);\n          break;\n        case \"style\":\n          Object.assign(html.style, value);\n          break;\n        case \"textContent\":\n          html.textContent = value;\n          break;\n        default:\n          if (!isHTMLAnchorElement || key !== \"href\" && key !== \"newWindow\") {\n            html.setAttribute(key, value);\n          }\n      }\n    }\n    if (isHTMLAnchorElement) {\n      linkService.addLinkAttributes(html, attributes.href, attributes.newWindow);\n    }\n    if (storage && attributes.dataId) {\n      this.setupStorage(html, attributes.dataId, element, storage);\n    }\n  }\n  static render(parameters) {\n    const storage = parameters.annotationStorage;\n    const linkService = parameters.linkService;\n    const root = parameters.xfaHtml;\n    const intent = parameters.intent || \"display\";\n    const rootHtml = document.createElement(root.name);\n    if (root.attributes) {\n      this.setAttributes({\n        html: rootHtml,\n        element: root,\n        intent,\n        linkService\n      });\n    }\n    const isNotForRichText = intent !== \"richText\";\n    const rootDiv = parameters.div;\n    rootDiv.append(rootHtml);\n    if (parameters.viewport) {\n      const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n      rootDiv.style.transform = transform;\n    }\n    if (isNotForRichText) {\n      rootDiv.setAttribute(\"class\", \"xfaLayer xfaFont\");\n    }\n    const textDivs = [];\n    if (root.children.length === 0) {\n      if (root.value) {\n        const node = document.createTextNode(root.value);\n        rootHtml.append(node);\n        if (isNotForRichText && XfaText.shouldBuildText(root.name)) {\n          textDivs.push(node);\n        }\n      }\n      return {\n        textDivs\n      };\n    }\n    const stack = [[root, -1, rootHtml]];\n    while (stack.length > 0) {\n      const [parent, i, html] = stack.at(-1);\n      if (i + 1 === parent.children.length) {\n        stack.pop();\n        continue;\n      }\n      const child = parent.children[++stack.at(-1)[1]];\n      if (child === null) {\n        continue;\n      }\n      const {\n        name\n      } = child;\n      if (name === \"#text\") {\n        const node = document.createTextNode(child.value);\n        textDivs.push(node);\n        html.append(node);\n        continue;\n      }\n      const childHtml = child?.attributes?.xmlns ? document.createElementNS(child.attributes.xmlns, name) : document.createElement(name);\n      html.append(childHtml);\n      if (child.attributes) {\n        this.setAttributes({\n          html: childHtml,\n          element: child,\n          storage,\n          intent,\n          linkService\n        });\n      }\n      if (child.children?.length > 0) {\n        stack.push([child, -1, childHtml]);\n      } else if (child.value) {\n        const node = document.createTextNode(child.value);\n        if (isNotForRichText && XfaText.shouldBuildText(name)) {\n          textDivs.push(node);\n        }\n        childHtml.append(node);\n      }\n    }\n    for (const el of rootDiv.querySelectorAll(\".xfaNonInteractive input, .xfaNonInteractive textarea\")) {\n      el.setAttribute(\"readOnly\", true);\n    }\n    return {\n      textDivs\n    };\n  }\n  static update(parameters) {\n    const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n    parameters.div.style.transform = transform;\n    parameters.div.hidden = false;\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/annotation_layer.js\n\n\n\n\n\nconst DEFAULT_TAB_INDEX = 1000;\nconst annotation_layer_DEFAULT_FONT_SIZE = 9;\nconst GetElementsByNameSet = new WeakSet();\nfunction getRectDims(rect) {\n  return {\n    width: rect[2] - rect[0],\n    height: rect[3] - rect[1]\n  };\n}\nclass AnnotationElementFactory {\n  static create(parameters) {\n    const subtype = parameters.data.annotationType;\n    switch (subtype) {\n      case AnnotationType.LINK:\n        return new LinkAnnotationElement(parameters);\n      case AnnotationType.TEXT:\n        return new TextAnnotationElement(parameters);\n      case AnnotationType.WIDGET:\n        const fieldType = parameters.data.fieldType;\n        switch (fieldType) {\n          case \"Tx\":\n            return new TextWidgetAnnotationElement(parameters);\n          case \"Btn\":\n            if (parameters.data.radioButton) {\n              return new RadioButtonWidgetAnnotationElement(parameters);\n            } else if (parameters.data.checkBox) {\n              return new CheckboxWidgetAnnotationElement(parameters);\n            }\n            return new PushButtonWidgetAnnotationElement(parameters);\n          case \"Ch\":\n            return new ChoiceWidgetAnnotationElement(parameters);\n          case \"Sig\":\n            return new SignatureWidgetAnnotationElement(parameters);\n        }\n        return new WidgetAnnotationElement(parameters);\n      case AnnotationType.POPUP:\n        return new PopupAnnotationElement(parameters);\n      case AnnotationType.FREETEXT:\n        return new FreeTextAnnotationElement(parameters);\n      case AnnotationType.LINE:\n        return new LineAnnotationElement(parameters);\n      case AnnotationType.SQUARE:\n        return new SquareAnnotationElement(parameters);\n      case AnnotationType.CIRCLE:\n        return new CircleAnnotationElement(parameters);\n      case AnnotationType.POLYLINE:\n        return new PolylineAnnotationElement(parameters);\n      case AnnotationType.CARET:\n        return new CaretAnnotationElement(parameters);\n      case AnnotationType.INK:\n        return new InkAnnotationElement(parameters);\n      case AnnotationType.POLYGON:\n        return new PolygonAnnotationElement(parameters);\n      case AnnotationType.HIGHLIGHT:\n        return new HighlightAnnotationElement(parameters);\n      case AnnotationType.UNDERLINE:\n        return new UnderlineAnnotationElement(parameters);\n      case AnnotationType.SQUIGGLY:\n        return new SquigglyAnnotationElement(parameters);\n      case AnnotationType.STRIKEOUT:\n        return new StrikeOutAnnotationElement(parameters);\n      case AnnotationType.STAMP:\n        return new StampAnnotationElement(parameters);\n      case AnnotationType.FILEATTACHMENT:\n        return new FileAttachmentAnnotationElement(parameters);\n      default:\n        return new AnnotationElement(parameters);\n    }\n  }\n}\nclass AnnotationElement {\n  #updates = null;\n  #hasBorder = false;\n  #popupElement = null;\n  constructor(parameters, {\n    isRenderable = false,\n    ignoreBorder = false,\n    createQuadrilaterals = false\n  } = {}) {\n    this.isRenderable = isRenderable;\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.linkService = parameters.linkService;\n    this.downloadManager = parameters.downloadManager;\n    this.imageResourcesPath = parameters.imageResourcesPath;\n    this.renderForms = parameters.renderForms;\n    this.svgFactory = parameters.svgFactory;\n    this.annotationStorage = parameters.annotationStorage;\n    this.enableScripting = parameters.enableScripting;\n    this.hasJSActions = parameters.hasJSActions;\n    this._fieldObjects = parameters.fieldObjects;\n    this.parent = parameters.parent;\n    if (isRenderable) {\n      this.container = this._createContainer(ignoreBorder);\n    }\n    if (createQuadrilaterals) {\n      this._createQuadrilaterals();\n    }\n  }\n  static _hasPopupData({\n    titleObj,\n    contentsObj,\n    richText\n  }) {\n    return !!(titleObj?.str || contentsObj?.str || richText?.str);\n  }\n  get hasPopupData() {\n    return AnnotationElement._hasPopupData(this.data);\n  }\n  updateEdited(params) {\n    if (!this.container) {\n      return;\n    }\n    this.#updates ||= {\n      rect: this.data.rect.slice(0)\n    };\n    const {\n      rect\n    } = params;\n    if (rect) {\n      this.#setRectEdited(rect);\n    }\n    this.#popupElement?.popup.updateEdited(params);\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    this.#setRectEdited(this.#updates.rect);\n    this.#popupElement?.popup.resetEdited();\n    this.#updates = null;\n  }\n  #setRectEdited(rect) {\n    const {\n      container: {\n        style\n      },\n      data: {\n        rect: currentRect,\n        rotation\n      },\n      parent: {\n        viewport: {\n          rawDims: {\n            pageWidth,\n            pageHeight,\n            pageX,\n            pageY\n          }\n        }\n      }\n    } = this;\n    currentRect?.splice(0, 4, ...rect);\n    const {\n      width,\n      height\n    } = getRectDims(rect);\n    style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;\n    style.top = `${100 * (pageHeight - rect[3] + pageY) / pageHeight}%`;\n    if (rotation === 0) {\n      style.width = `${100 * width / pageWidth}%`;\n      style.height = `${100 * height / pageHeight}%`;\n    } else {\n      this.setRotation(rotation);\n    }\n  }\n  _createContainer(ignoreBorder) {\n    const {\n      data,\n      parent: {\n        page,\n        viewport\n      }\n    } = this;\n    const container = document.createElement(\"section\");\n    container.setAttribute(\"data-annotation-id\", data.id);\n    if (!(this instanceof WidgetAnnotationElement)) {\n      container.tabIndex = DEFAULT_TAB_INDEX;\n    }\n    const {\n      style\n    } = container;\n    style.zIndex = this.parent.zIndex++;\n    if (data.popupRef) {\n      container.setAttribute(\"aria-haspopup\", \"dialog\");\n    }\n    if (data.alternativeText) {\n      container.title = data.alternativeText;\n    }\n    if (data.noRotate) {\n      container.classList.add(\"norotate\");\n    }\n    if (!data.rect || this instanceof PopupAnnotationElement) {\n      const {\n        rotation\n      } = data;\n      if (!data.hasOwnCanvas && rotation !== 0) {\n        this.setRotation(rotation, container);\n      }\n      return container;\n    }\n    const {\n      width,\n      height\n    } = getRectDims(data.rect);\n    if (!ignoreBorder && data.borderStyle.width > 0) {\n      style.borderWidth = `${data.borderStyle.width}px`;\n      const horizontalRadius = data.borderStyle.horizontalCornerRadius;\n      const verticalRadius = data.borderStyle.verticalCornerRadius;\n      if (horizontalRadius > 0 || verticalRadius > 0) {\n        const radius = `calc(${horizontalRadius}px * var(--scale-factor)) / calc(${verticalRadius}px * var(--scale-factor))`;\n        style.borderRadius = radius;\n      } else if (this instanceof RadioButtonWidgetAnnotationElement) {\n        const radius = `calc(${width}px * var(--scale-factor)) / calc(${height}px * var(--scale-factor))`;\n        style.borderRadius = radius;\n      }\n      switch (data.borderStyle.style) {\n        case AnnotationBorderStyleType.SOLID:\n          style.borderStyle = \"solid\";\n          break;\n        case AnnotationBorderStyleType.DASHED:\n          style.borderStyle = \"dashed\";\n          break;\n        case AnnotationBorderStyleType.BEVELED:\n          warn(\"Unimplemented border style: beveled\");\n          break;\n        case AnnotationBorderStyleType.INSET:\n          warn(\"Unimplemented border style: inset\");\n          break;\n        case AnnotationBorderStyleType.UNDERLINE:\n          style.borderBottomStyle = \"solid\";\n          break;\n        default:\n          break;\n      }\n      const borderColor = data.borderColor || null;\n      if (borderColor) {\n        this.#hasBorder = true;\n        style.borderColor = Util.makeHexColor(borderColor[0] | 0, borderColor[1] | 0, borderColor[2] | 0);\n      } else {\n        style.borderWidth = 0;\n      }\n    }\n    const rect = Util.normalizeRect([data.rect[0], page.view[3] - data.rect[1] + page.view[1], data.rect[2], page.view[3] - data.rect[3] + page.view[1]]);\n    const {\n      pageWidth,\n      pageHeight,\n      pageX,\n      pageY\n    } = viewport.rawDims;\n    style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;\n    style.top = `${100 * (rect[1] - pageY) / pageHeight}%`;\n    const {\n      rotation\n    } = data;\n    if (data.hasOwnCanvas || rotation === 0) {\n      style.width = `${100 * width / pageWidth}%`;\n      style.height = `${100 * height / pageHeight}%`;\n    } else {\n      this.setRotation(rotation, container);\n    }\n    return container;\n  }\n  setRotation(angle, container = this.container) {\n    if (!this.data.rect) {\n      return;\n    }\n    const {\n      pageWidth,\n      pageHeight\n    } = this.parent.viewport.rawDims;\n    const {\n      width,\n      height\n    } = getRectDims(this.data.rect);\n    let elementWidth, elementHeight;\n    if (angle % 180 === 0) {\n      elementWidth = 100 * width / pageWidth;\n      elementHeight = 100 * height / pageHeight;\n    } else {\n      elementWidth = 100 * height / pageWidth;\n      elementHeight = 100 * width / pageHeight;\n    }\n    container.style.width = `${elementWidth}%`;\n    container.style.height = `${elementHeight}%`;\n    container.setAttribute(\"data-main-rotation\", (360 - angle) % 360);\n  }\n  get _commonActions() {\n    const setColor = (jsName, styleName, event) => {\n      const color = event.detail[jsName];\n      const colorType = color[0];\n      const colorArray = color.slice(1);\n      event.target.style[styleName] = ColorConverters[`${colorType}_HTML`](colorArray);\n      this.annotationStorage.setValue(this.data.id, {\n        [styleName]: ColorConverters[`${colorType}_rgb`](colorArray)\n      });\n    };\n    return shadow(this, \"_commonActions\", {\n      display: event => {\n        const {\n          display\n        } = event.detail;\n        const hidden = display % 2 === 1;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noView: hidden,\n          noPrint: display === 1 || display === 2\n        });\n      },\n      print: event => {\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: !event.detail.print\n        });\n      },\n      hidden: event => {\n        const {\n          hidden\n        } = event.detail;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: hidden,\n          noView: hidden\n        });\n      },\n      focus: event => {\n        setTimeout(() => event.target.focus({\n          preventScroll: false\n        }), 0);\n      },\n      userName: event => {\n        event.target.title = event.detail.userName;\n      },\n      readonly: event => {\n        event.target.disabled = event.detail.readonly;\n      },\n      required: event => {\n        this._setRequired(event.target, event.detail.required);\n      },\n      bgColor: event => {\n        setColor(\"bgColor\", \"backgroundColor\", event);\n      },\n      fillColor: event => {\n        setColor(\"fillColor\", \"backgroundColor\", event);\n      },\n      fgColor: event => {\n        setColor(\"fgColor\", \"color\", event);\n      },\n      textColor: event => {\n        setColor(\"textColor\", \"color\", event);\n      },\n      borderColor: event => {\n        setColor(\"borderColor\", \"borderColor\", event);\n      },\n      strokeColor: event => {\n        setColor(\"strokeColor\", \"borderColor\", event);\n      },\n      rotation: event => {\n        const angle = event.detail.rotation;\n        this.setRotation(angle);\n        this.annotationStorage.setValue(this.data.id, {\n          rotation: angle\n        });\n      }\n    });\n  }\n  _dispatchEventFromSandbox(actions, jsEvent) {\n    const commonActions = this._commonActions;\n    for (const name of Object.keys(jsEvent.detail)) {\n      const action = actions[name] || commonActions[name];\n      action?.(jsEvent);\n    }\n  }\n  _setDefaultPropertiesFromJS(element) {\n    if (!this.enableScripting) {\n      return;\n    }\n    const storedData = this.annotationStorage.getRawValue(this.data.id);\n    if (!storedData) {\n      return;\n    }\n    const commonActions = this._commonActions;\n    for (const [actionName, detail] of Object.entries(storedData)) {\n      const action = commonActions[actionName];\n      if (action) {\n        const eventProxy = {\n          detail: {\n            [actionName]: detail\n          },\n          target: element\n        };\n        action(eventProxy);\n        delete storedData[actionName];\n      }\n    }\n  }\n  _createQuadrilaterals() {\n    if (!this.container) {\n      return;\n    }\n    const {\n      quadPoints\n    } = this.data;\n    if (!quadPoints) {\n      return;\n    }\n    const [rectBlX, rectBlY, rectTrX, rectTrY] = this.data.rect;\n    if (quadPoints.length === 1) {\n      const [, {\n        x: trX,\n        y: trY\n      }, {\n        x: blX,\n        y: blY\n      }] = quadPoints[0];\n      if (rectTrX === trX && rectTrY === trY && rectBlX === blX && rectBlY === blY) {\n        return;\n      }\n    }\n    const {\n      style\n    } = this.container;\n    let svgBuffer;\n    if (this.#hasBorder) {\n      const {\n        borderColor,\n        borderWidth\n      } = style;\n      style.borderWidth = 0;\n      svgBuffer = [\"url('data:image/svg+xml;utf8,\", `<svg xmlns=\"http://www.w3.org/2000/svg\"`, ` preserveAspectRatio=\"none\" viewBox=\"0 0 1 1\">`, `<g fill=\"transparent\" stroke=\"${borderColor}\" stroke-width=\"${borderWidth}\">`];\n      this.container.classList.add(\"hasBorder\");\n    }\n    const width = rectTrX - rectBlX;\n    const height = rectTrY - rectBlY;\n    const {\n      svgFactory\n    } = this;\n    const svg = svgFactory.createElement(\"svg\");\n    svg.classList.add(\"quadrilateralsContainer\");\n    svg.setAttribute(\"width\", 0);\n    svg.setAttribute(\"height\", 0);\n    const defs = svgFactory.createElement(\"defs\");\n    svg.append(defs);\n    const clipPath = svgFactory.createElement(\"clipPath\");\n    const id = `clippath_${this.data.id}`;\n    clipPath.setAttribute(\"id\", id);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    defs.append(clipPath);\n    for (const [, {\n      x: trX,\n      y: trY\n    }, {\n      x: blX,\n      y: blY\n    }] of quadPoints) {\n      const rect = svgFactory.createElement(\"rect\");\n      const x = (blX - rectBlX) / width;\n      const y = (rectTrY - trY) / height;\n      const rectWidth = (trX - blX) / width;\n      const rectHeight = (trY - blY) / height;\n      rect.setAttribute(\"x\", x);\n      rect.setAttribute(\"y\", y);\n      rect.setAttribute(\"width\", rectWidth);\n      rect.setAttribute(\"height\", rectHeight);\n      clipPath.append(rect);\n      svgBuffer?.push(`<rect vector-effect=\"non-scaling-stroke\" x=\"${x}\" y=\"${y}\" width=\"${rectWidth}\" height=\"${rectHeight}\"/>`);\n    }\n    if (this.#hasBorder) {\n      svgBuffer.push(`</g></svg>')`);\n      style.backgroundImage = svgBuffer.join(\"\");\n    }\n    this.container.append(svg);\n    this.container.style.clipPath = `url(#${id})`;\n  }\n  _createPopup() {\n    const {\n      container,\n      data\n    } = this;\n    container.setAttribute(\"aria-haspopup\", \"dialog\");\n    const popup = this.#popupElement = new PopupAnnotationElement({\n      data: {\n        color: data.color,\n        titleObj: data.titleObj,\n        modificationDate: data.modificationDate,\n        contentsObj: data.contentsObj,\n        richText: data.richText,\n        parentRect: data.rect,\n        borderStyle: 0,\n        id: `popup_${data.id}`,\n        rotation: data.rotation\n      },\n      parent: this.parent,\n      elements: [this]\n    });\n    this.parent.div.append(popup.render());\n  }\n  render() {\n    unreachable(\"Abstract method `AnnotationElement.render` called\");\n  }\n  _getElementsByName(name, skipId = null) {\n    const fields = [];\n    if (this._fieldObjects) {\n      const fieldObj = this._fieldObjects[name];\n      if (fieldObj) {\n        for (const {\n          page,\n          id,\n          exportValues\n        } of fieldObj) {\n          if (page === -1) {\n            continue;\n          }\n          if (id === skipId) {\n            continue;\n          }\n          const exportValue = typeof exportValues === \"string\" ? exportValues : null;\n          const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n          if (domElement && !GetElementsByNameSet.has(domElement)) {\n            warn(`_getElementsByName - element not allowed: ${id}`);\n            continue;\n          }\n          fields.push({\n            id,\n            exportValue,\n            domElement\n          });\n        }\n      }\n      return fields;\n    }\n    for (const domElement of document.getElementsByName(name)) {\n      const {\n        exportValue\n      } = domElement;\n      const id = domElement.getAttribute(\"data-element-id\");\n      if (id === skipId) {\n        continue;\n      }\n      if (!GetElementsByNameSet.has(domElement)) {\n        continue;\n      }\n      fields.push({\n        id,\n        exportValue,\n        domElement\n      });\n    }\n    return fields;\n  }\n  show() {\n    if (this.container) {\n      this.container.hidden = false;\n    }\n    this.popup?.maybeShow();\n  }\n  hide() {\n    if (this.container) {\n      this.container.hidden = true;\n    }\n    this.popup?.forceHide();\n  }\n  getElementsToTriggerPopup() {\n    return this.container;\n  }\n  addHighlightArea() {\n    const triggers = this.getElementsToTriggerPopup();\n    if (Array.isArray(triggers)) {\n      for (const element of triggers) {\n        element.classList.add(\"highlightArea\");\n      }\n    } else {\n      triggers.classList.add(\"highlightArea\");\n    }\n  }\n  get _isEditable() {\n    return false;\n  }\n  _editOnDoubleClick() {\n    if (!this._isEditable) {\n      return;\n    }\n    const {\n      annotationEditorType: mode,\n      data: {\n        id: editId\n      }\n    } = this;\n    this.container.addEventListener(\"dblclick\", () => {\n      this.linkService.eventBus?.dispatch(\"switchannotationeditormode\", {\n        source: this,\n        mode,\n        editId\n      });\n    });\n  }\n}\nclass LinkAnnotationElement extends AnnotationElement {\n  constructor(parameters, options = null) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: !!options?.ignoreBorder,\n      createQuadrilaterals: true\n    });\n    this.isTooltipOnly = parameters.data.isTooltipOnly;\n  }\n  render() {\n    const {\n      data,\n      linkService\n    } = this;\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"data-element-id\", data.id);\n    let isBound = false;\n    if (data.url) {\n      linkService.addLinkAttributes(link, data.url, data.newWindow);\n      isBound = true;\n    } else if (data.action) {\n      this._bindNamedAction(link, data.action);\n      isBound = true;\n    } else if (data.attachment) {\n      this.#bindAttachment(link, data.attachment, data.attachmentDest);\n      isBound = true;\n    } else if (data.setOCGState) {\n      this.#bindSetOCGState(link, data.setOCGState);\n      isBound = true;\n    } else if (data.dest) {\n      this._bindLink(link, data.dest);\n      isBound = true;\n    } else {\n      if (data.actions && (data.actions.Action || data.actions[\"Mouse Up\"] || data.actions[\"Mouse Down\"]) && this.enableScripting && this.hasJSActions) {\n        this._bindJSAction(link, data);\n        isBound = true;\n      }\n      if (data.resetForm) {\n        this._bindResetFormAction(link, data.resetForm);\n        isBound = true;\n      } else if (this.isTooltipOnly && !isBound) {\n        this._bindLink(link, \"\");\n        isBound = true;\n      }\n    }\n    this.container.classList.add(\"linkAnnotation\");\n    if (isBound) {\n      this.container.append(link);\n    }\n    return this.container;\n  }\n  #setInternalLink() {\n    this.container.setAttribute(\"data-internal-link\", \"\");\n  }\n  _bindLink(link, destination) {\n    link.href = this.linkService.getDestinationHash(destination);\n    link.onclick = () => {\n      if (destination) {\n        this.linkService.goToDestination(destination);\n      }\n      return false;\n    };\n    if (destination || destination === \"\") {\n      this.#setInternalLink();\n    }\n  }\n  _bindNamedAction(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeNamedAction(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindAttachment(link, attachment, dest = null) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    if (attachment.description) {\n      link.title = attachment.description;\n    }\n    link.onclick = () => {\n      this.downloadManager?.openOrDownloadData(attachment.content, attachment.filename, dest);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindSetOCGState(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeSetOCGState(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  _bindJSAction(link, data) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    const map = new Map([[\"Action\", \"onclick\"], [\"Mouse Up\", \"onmouseup\"], [\"Mouse Down\", \"onmousedown\"]]);\n    for (const name of Object.keys(data.actions)) {\n      const jsName = map.get(name);\n      if (!jsName) {\n        continue;\n      }\n      link[jsName] = () => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: data.id,\n            name\n          }\n        });\n        return false;\n      };\n    }\n    if (!link.onclick) {\n      link.onclick = () => false;\n    }\n    this.#setInternalLink();\n  }\n  _bindResetFormAction(link, resetForm) {\n    const otherClickAction = link.onclick;\n    if (!otherClickAction) {\n      link.href = this.linkService.getAnchorUrl(\"\");\n    }\n    this.#setInternalLink();\n    if (!this._fieldObjects) {\n      warn(`_bindResetFormAction - \"resetForm\" action not supported, ` + \"ensure that the `fieldObjects` parameter is provided.\");\n      if (!otherClickAction) {\n        link.onclick = () => false;\n      }\n      return;\n    }\n    link.onclick = () => {\n      otherClickAction?.();\n      const {\n        fields: resetFormFields,\n        refs: resetFormRefs,\n        include\n      } = resetForm;\n      const allFields = [];\n      if (resetFormFields.length !== 0 || resetFormRefs.length !== 0) {\n        const fieldIds = new Set(resetFormRefs);\n        for (const fieldName of resetFormFields) {\n          const fields = this._fieldObjects[fieldName] || [];\n          for (const {\n            id\n          } of fields) {\n            fieldIds.add(id);\n          }\n        }\n        for (const fields of Object.values(this._fieldObjects)) {\n          for (const field of fields) {\n            if (fieldIds.has(field.id) === include) {\n              allFields.push(field);\n            }\n          }\n        }\n      } else {\n        for (const fields of Object.values(this._fieldObjects)) {\n          allFields.push(...fields);\n        }\n      }\n      const storage = this.annotationStorage;\n      const allIds = [];\n      for (const field of allFields) {\n        const {\n          id\n        } = field;\n        allIds.push(id);\n        switch (field.type) {\n          case \"text\":\n            {\n              const value = field.defaultValue || \"\";\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          case \"checkbox\":\n          case \"radiobutton\":\n            {\n              const value = field.defaultValue === field.exportValues;\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          case \"combobox\":\n          case \"listbox\":\n            {\n              const value = field.defaultValue || \"\";\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          default:\n            continue;\n        }\n        const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n        if (!domElement) {\n          continue;\n        } else if (!GetElementsByNameSet.has(domElement)) {\n          warn(`_bindResetFormAction - element not allowed: ${id}`);\n          continue;\n        }\n        domElement.dispatchEvent(new Event(\"resetform\"));\n      }\n      if (this.enableScripting) {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: \"app\",\n            ids: allIds,\n            name: \"ResetForm\"\n          }\n        });\n      }\n      return false;\n    };\n  }\n}\nclass TextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"textAnnotation\");\n    const image = document.createElement(\"img\");\n    image.src = this.imageResourcesPath + \"annotation-\" + this.data.name.toLowerCase() + \".svg\";\n    image.setAttribute(\"data-l10n-id\", \"pdfjs-text-annotation-type\");\n    image.setAttribute(\"data-l10n-args\", JSON.stringify({\n      type: this.data.name\n    }));\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.append(image);\n    return this.container;\n  }\n}\nclass WidgetAnnotationElement extends AnnotationElement {\n  render() {\n    return this.container;\n  }\n  showElementAndHideCanvas(element) {\n    if (this.data.hasOwnCanvas) {\n      if (element.previousSibling?.nodeName === \"CANVAS\") {\n        element.previousSibling.hidden = true;\n      }\n      element.hidden = false;\n    }\n  }\n  _getKeyModifier(event) {\n    return util_FeatureTest.platform.isMac ? event.metaKey : event.ctrlKey;\n  }\n  _setEventListener(element, elementData, baseName, eventName, valueGetter) {\n    if (baseName.includes(\"mouse\")) {\n      element.addEventListener(baseName, event => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n            shift: event.shiftKey,\n            modifier: this._getKeyModifier(event)\n          }\n        });\n      });\n    } else {\n      element.addEventListener(baseName, event => {\n        if (baseName === \"blur\") {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          elementData.focused = false;\n        } else if (baseName === \"focus\") {\n          if (elementData.focused) {\n            return;\n          }\n          elementData.focused = true;\n        }\n        if (!valueGetter) {\n          return;\n        }\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event)\n          }\n        });\n      });\n    }\n  }\n  _setEventListeners(element, elementData, names, getter) {\n    for (const [baseName, eventName] of names) {\n      if (eventName === \"Action\" || this.data.actions?.[eventName]) {\n        if (eventName === \"Focus\" || eventName === \"Blur\") {\n          elementData ||= {\n            focused: false\n          };\n        }\n        this._setEventListener(element, elementData, baseName, eventName, getter);\n        if (eventName === \"Focus\" && !this.data.actions?.Blur) {\n          this._setEventListener(element, elementData, \"blur\", \"Blur\", null);\n        } else if (eventName === \"Blur\" && !this.data.actions?.Focus) {\n          this._setEventListener(element, elementData, \"focus\", \"Focus\", null);\n        }\n      }\n    }\n  }\n  _setBackgroundColor(element) {\n    const color = this.data.backgroundColor || null;\n    element.style.backgroundColor = color === null ? \"transparent\" : Util.makeHexColor(color[0], color[1], color[2]);\n  }\n  _setTextStyle(element) {\n    const TEXT_ALIGNMENT = [\"left\", \"center\", \"right\"];\n    const {\n      fontColor\n    } = this.data.defaultAppearanceData;\n    const fontSize = this.data.defaultAppearanceData.fontSize || annotation_layer_DEFAULT_FONT_SIZE;\n    const style = element.style;\n    let computedFontSize;\n    const BORDER_SIZE = 2;\n    const roundToOneDecimal = x => Math.round(10 * x) / 10;\n    if (this.data.multiLine) {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      const numberOfLines = Math.round(height / (LINE_FACTOR * fontSize)) || 1;\n      const lineHeight = height / numberOfLines;\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(lineHeight / LINE_FACTOR));\n    } else {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(height / LINE_FACTOR));\n    }\n    style.fontSize = `calc(${computedFontSize}px * var(--scale-factor))`;\n    style.color = Util.makeHexColor(fontColor[0], fontColor[1], fontColor[2]);\n    if (this.data.textAlignment !== null) {\n      style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n    }\n  }\n  _setRequired(element, isRequired) {\n    if (isRequired) {\n      element.setAttribute(\"required\", true);\n    } else {\n      element.removeAttribute(\"required\");\n    }\n    element.setAttribute(\"aria-required\", isRequired);\n  }\n}\nclass TextWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    const isRenderable = parameters.renderForms || parameters.data.hasOwnCanvas || !parameters.data.hasAppearance && !!parameters.data.fieldValue;\n    super(parameters, {\n      isRenderable\n    });\n  }\n  setPropertyOnSiblings(base, key, value, keyInStorage) {\n    const storage = this.annotationStorage;\n    for (const element of this._getElementsByName(base.name, base.id)) {\n      if (element.domElement) {\n        element.domElement[key] = value;\n      }\n      storage.setValue(element.id, {\n        [keyInStorage]: value\n      });\n    }\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    this.container.classList.add(\"textWidgetAnnotation\");\n    let element = null;\n    if (this.renderForms) {\n      const storedData = storage.getValue(id, {\n        value: this.data.fieldValue\n      });\n      let textContent = storedData.value || \"\";\n      const maxLen = storage.getValue(id, {\n        charLimit: this.data.maxLen\n      }).charLimit;\n      if (maxLen && textContent.length > maxLen) {\n        textContent = textContent.slice(0, maxLen);\n      }\n      let fieldFormattedValues = storedData.formattedValue || this.data.textContent?.join(\"\\n\") || null;\n      if (fieldFormattedValues && this.data.comb) {\n        fieldFormattedValues = fieldFormattedValues.replaceAll(/\\s+/g, \"\");\n      }\n      const elementData = {\n        userValue: textContent,\n        formattedValue: fieldFormattedValues,\n        lastCommittedValue: null,\n        commitKey: 1,\n        focused: false\n      };\n      if (this.data.multiLine) {\n        element = document.createElement(\"textarea\");\n        element.textContent = fieldFormattedValues ?? textContent;\n        if (this.data.doNotScroll) {\n          element.style.overflowY = \"hidden\";\n        }\n      } else {\n        element = document.createElement(\"input\");\n        element.type = \"text\";\n        element.setAttribute(\"value\", fieldFormattedValues ?? textContent);\n        if (this.data.doNotScroll) {\n          element.style.overflowX = \"hidden\";\n        }\n      }\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n      GetElementsByNameSet.add(element);\n      element.setAttribute(\"data-element-id\", id);\n      element.disabled = this.data.readOnly;\n      element.name = this.data.fieldName;\n      element.tabIndex = DEFAULT_TAB_INDEX;\n      this._setRequired(element, this.data.required);\n      if (maxLen) {\n        element.maxLength = maxLen;\n      }\n      element.addEventListener(\"input\", event => {\n        storage.setValue(id, {\n          value: event.target.value\n        });\n        this.setPropertyOnSiblings(element, \"value\", event.target.value, \"value\");\n        elementData.formattedValue = null;\n      });\n      element.addEventListener(\"resetform\", event => {\n        const defaultValue = this.data.defaultFieldValue ?? \"\";\n        element.value = elementData.userValue = defaultValue;\n        elementData.formattedValue = null;\n      });\n      let blurListener = event => {\n        const {\n          formattedValue\n        } = elementData;\n        if (formattedValue !== null && formattedValue !== undefined) {\n          event.target.value = formattedValue;\n        }\n        event.target.scrollLeft = 0;\n      };\n      if (this.enableScripting && this.hasJSActions) {\n        element.addEventListener(\"focus\", event => {\n          if (elementData.focused) {\n            return;\n          }\n          const {\n            target\n          } = event;\n          if (elementData.userValue) {\n            target.value = elementData.userValue;\n          }\n          elementData.lastCommittedValue = target.value;\n          elementData.commitKey = 1;\n          if (!this.data.actions?.Focus) {\n            elementData.focused = true;\n          }\n        });\n        element.addEventListener(\"updatefromsandbox\", jsEvent => {\n          this.showElementAndHideCanvas(jsEvent.target);\n          const actions = {\n            value(event) {\n              elementData.userValue = event.detail.value ?? \"\";\n              storage.setValue(id, {\n                value: elementData.userValue.toString()\n              });\n              event.target.value = elementData.userValue;\n            },\n            formattedValue(event) {\n              const {\n                formattedValue\n              } = event.detail;\n              elementData.formattedValue = formattedValue;\n              if (formattedValue !== null && formattedValue !== undefined && event.target !== document.activeElement) {\n                event.target.value = formattedValue;\n              }\n              storage.setValue(id, {\n                formattedValue\n              });\n            },\n            selRange(event) {\n              event.target.setSelectionRange(...event.detail.selRange);\n            },\n            charLimit: event => {\n              const {\n                charLimit\n              } = event.detail;\n              const {\n                target\n              } = event;\n              if (charLimit === 0) {\n                target.removeAttribute(\"maxLength\");\n                return;\n              }\n              target.setAttribute(\"maxLength\", charLimit);\n              let value = elementData.userValue;\n              if (!value || value.length <= charLimit) {\n                return;\n              }\n              value = value.slice(0, charLimit);\n              target.value = elementData.userValue = value;\n              storage.setValue(id, {\n                value\n              });\n              this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n                source: this,\n                detail: {\n                  id,\n                  name: \"Keystroke\",\n                  value,\n                  willCommit: true,\n                  commitKey: 1,\n                  selStart: target.selectionStart,\n                  selEnd: target.selectionEnd\n                }\n              });\n            }\n          };\n          this._dispatchEventFromSandbox(actions, jsEvent);\n        });\n        element.addEventListener(\"keydown\", event => {\n          elementData.commitKey = 1;\n          let commitKey = -1;\n          if (event.key === \"Escape\") {\n            commitKey = 0;\n          } else if (event.key === \"Enter\" && !this.data.multiLine) {\n            commitKey = 2;\n          } else if (event.key === \"Tab\") {\n            elementData.commitKey = 3;\n          }\n          if (commitKey === -1) {\n            return;\n          }\n          const {\n            value\n          } = event.target;\n          if (elementData.lastCommittedValue === value) {\n            return;\n          }\n          elementData.lastCommittedValue = value;\n          elementData.userValue = value;\n          this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n            source: this,\n            detail: {\n              id,\n              name: \"Keystroke\",\n              value,\n              willCommit: true,\n              commitKey,\n              selStart: event.target.selectionStart,\n              selEnd: event.target.selectionEnd\n            }\n          });\n        });\n        const _blurListener = blurListener;\n        blurListener = null;\n        element.addEventListener(\"blur\", event => {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          if (!this.data.actions?.Blur) {\n            elementData.focused = false;\n          }\n          const {\n            value\n          } = event.target;\n          elementData.userValue = value;\n          if (elementData.lastCommittedValue !== value) {\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                willCommit: true,\n                commitKey: elementData.commitKey,\n                selStart: event.target.selectionStart,\n                selEnd: event.target.selectionEnd\n              }\n            });\n          }\n          _blurListener(event);\n        });\n        if (this.data.actions?.Keystroke) {\n          element.addEventListener(\"beforeinput\", event => {\n            elementData.lastCommittedValue = null;\n            const {\n              data,\n              target\n            } = event;\n            const {\n              value,\n              selectionStart,\n              selectionEnd\n            } = target;\n            let selStart = selectionStart,\n              selEnd = selectionEnd;\n            switch (event.inputType) {\n              case \"deleteWordBackward\":\n                {\n                  const match = value.substring(0, selectionStart).match(/\\w*[^\\w]*$/);\n                  if (match) {\n                    selStart -= match[0].length;\n                  }\n                  break;\n                }\n              case \"deleteWordForward\":\n                {\n                  const match = value.substring(selectionStart).match(/^[^\\w]*\\w*/);\n                  if (match) {\n                    selEnd += match[0].length;\n                  }\n                  break;\n                }\n              case \"deleteContentBackward\":\n                if (selectionStart === selectionEnd) {\n                  selStart -= 1;\n                }\n                break;\n              case \"deleteContentForward\":\n                if (selectionStart === selectionEnd) {\n                  selEnd += 1;\n                }\n                break;\n            }\n            event.preventDefault();\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                change: data || \"\",\n                willCommit: false,\n                selStart,\n                selEnd\n              }\n            });\n          });\n        }\n        this._setEventListeners(element, elementData, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.value);\n      }\n      if (blurListener) {\n        element.addEventListener(\"blur\", blurListener);\n      }\n      if (this.data.comb) {\n        const fieldWidth = this.data.rect[2] - this.data.rect[0];\n        const combWidth = fieldWidth / maxLen;\n        element.classList.add(\"comb\");\n        element.style.letterSpacing = `calc(${combWidth}px * var(--scale-factor) - 1ch)`;\n      }\n    } else {\n      element = document.createElement(\"div\");\n      element.textContent = this.data.fieldValue;\n      element.style.verticalAlign = \"middle\";\n      element.style.display = \"table-cell\";\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n    }\n    this._setTextStyle(element);\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass SignatureWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: !!parameters.data.hasOwnCanvas\n    });\n  }\n}\nclass CheckboxWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.exportValue === data.fieldValue\n    }).value;\n    if (typeof value === \"string\") {\n      value = value !== \"Off\";\n      storage.setValue(id, {\n        value\n      });\n    }\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"checkBox\");\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"checkbox\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.setAttribute(\"exportValue\", data.exportValue);\n    element.tabIndex = DEFAULT_TAB_INDEX;\n    element.addEventListener(\"change\", event => {\n      const {\n        name,\n        checked\n      } = event.target;\n      for (const checkbox of this._getElementsByName(name, id)) {\n        const curChecked = checked && checkbox.exportValue === data.exportValue;\n        if (checkbox.domElement) {\n          checkbox.domElement.checked = curChecked;\n        }\n        storage.setValue(checkbox.id, {\n          value: curChecked\n        });\n      }\n      storage.setValue(id, {\n        value: checked\n      });\n    });\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue || \"Off\";\n      event.target.checked = defaultValue === data.exportValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            event.target.checked = event.detail.value !== \"Off\";\n            storage.setValue(id, {\n              value: event.target.checked\n            });\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"radioButton\");\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.fieldValue === data.buttonValue\n    }).value;\n    if (typeof value === \"string\") {\n      value = value !== data.buttonValue;\n      storage.setValue(id, {\n        value\n      });\n    }\n    if (value) {\n      for (const radio of this._getElementsByName(data.fieldName, id)) {\n        storage.setValue(radio.id, {\n          value: false\n        });\n      }\n    }\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"radio\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.tabIndex = DEFAULT_TAB_INDEX;\n    element.addEventListener(\"change\", event => {\n      const {\n        name,\n        checked\n      } = event.target;\n      for (const radio of this._getElementsByName(name, id)) {\n        storage.setValue(radio.id, {\n          value: false\n        });\n      }\n      storage.setValue(id, {\n        value: checked\n      });\n    });\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue;\n      event.target.checked = defaultValue !== null && defaultValue !== undefined && defaultValue === data.buttonValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      const pdfButtonValue = data.buttonValue;\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value: event => {\n            const checked = pdfButtonValue === event.detail.value;\n            for (const radio of this._getElementsByName(event.target.name)) {\n              const curChecked = checked && radio.id === id;\n              if (radio.domElement) {\n                radio.domElement.checked = curChecked;\n              }\n              storage.setValue(radio.id, {\n                value: curChecked\n              });\n            }\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass PushButtonWidgetAnnotationElement extends LinkAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      ignoreBorder: parameters.data.hasAppearance\n    });\n  }\n  render() {\n    const container = super.render();\n    container.classList.add(\"buttonWidgetAnnotation\", \"pushButton\");\n    const linkElement = container.lastChild;\n    if (this.enableScripting && this.hasJSActions && linkElement) {\n      this._setDefaultPropertiesFromJS(linkElement);\n      linkElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        this._dispatchEventFromSandbox({}, jsEvent);\n      });\n    }\n    return container;\n  }\n}\nclass ChoiceWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    this.container.classList.add(\"choiceWidgetAnnotation\");\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    const storedData = storage.getValue(id, {\n      value: this.data.fieldValue\n    });\n    const selectElement = document.createElement(\"select\");\n    GetElementsByNameSet.add(selectElement);\n    selectElement.setAttribute(\"data-element-id\", id);\n    selectElement.disabled = this.data.readOnly;\n    this._setRequired(selectElement, this.data.required);\n    selectElement.name = this.data.fieldName;\n    selectElement.tabIndex = DEFAULT_TAB_INDEX;\n    let addAnEmptyEntry = this.data.combo && this.data.options.length > 0;\n    if (!this.data.combo) {\n      selectElement.size = this.data.options.length;\n      if (this.data.multiSelect) {\n        selectElement.multiple = true;\n      }\n    }\n    selectElement.addEventListener(\"resetform\", event => {\n      const defaultValue = this.data.defaultFieldValue;\n      for (const option of selectElement.options) {\n        option.selected = option.value === defaultValue;\n      }\n    });\n    for (const option of this.data.options) {\n      const optionElement = document.createElement(\"option\");\n      optionElement.textContent = option.displayValue;\n      optionElement.value = option.exportValue;\n      if (storedData.value.includes(option.exportValue)) {\n        optionElement.setAttribute(\"selected\", true);\n        addAnEmptyEntry = false;\n      }\n      selectElement.append(optionElement);\n    }\n    let removeEmptyEntry = null;\n    if (addAnEmptyEntry) {\n      const noneOptionElement = document.createElement(\"option\");\n      noneOptionElement.value = \" \";\n      noneOptionElement.setAttribute(\"hidden\", true);\n      noneOptionElement.setAttribute(\"selected\", true);\n      selectElement.prepend(noneOptionElement);\n      removeEmptyEntry = () => {\n        noneOptionElement.remove();\n        selectElement.removeEventListener(\"input\", removeEmptyEntry);\n        removeEmptyEntry = null;\n      };\n      selectElement.addEventListener(\"input\", removeEmptyEntry);\n    }\n    const getValue = isExport => {\n      const name = isExport ? \"value\" : \"textContent\";\n      const {\n        options,\n        multiple\n      } = selectElement;\n      if (!multiple) {\n        return options.selectedIndex === -1 ? null : options[options.selectedIndex][name];\n      }\n      return Array.prototype.filter.call(options, option => option.selected).map(option => option[name]);\n    };\n    let selectedValues = getValue(false);\n    const getItems = event => {\n      const options = event.target.options;\n      return Array.prototype.map.call(options, option => ({\n        displayValue: option.textContent,\n        exportValue: option.value\n      }));\n    };\n    if (this.enableScripting && this.hasJSActions) {\n      selectElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            removeEmptyEntry?.();\n            const value = event.detail.value;\n            const values = new Set(Array.isArray(value) ? value : [value]);\n            for (const option of selectElement.options) {\n              option.selected = values.has(option.value);\n            }\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n            selectedValues = getValue(false);\n          },\n          multipleSelection(event) {\n            selectElement.multiple = true;\n          },\n          remove(event) {\n            const options = selectElement.options;\n            const index = event.detail.remove;\n            options[index].selected = false;\n            selectElement.remove(index);\n            if (options.length > 0) {\n              const i = Array.prototype.findIndex.call(options, option => option.selected);\n              if (i === -1) {\n                options[0].selected = true;\n              }\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          clear(event) {\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            storage.setValue(id, {\n              value: null,\n              items: []\n            });\n            selectedValues = getValue(false);\n          },\n          insert(event) {\n            const {\n              index,\n              displayValue,\n              exportValue\n            } = event.detail.insert;\n            const selectChild = selectElement.children[index];\n            const optionElement = document.createElement(\"option\");\n            optionElement.textContent = displayValue;\n            optionElement.value = exportValue;\n            if (selectChild) {\n              selectChild.before(optionElement);\n            } else {\n              selectElement.append(optionElement);\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          items(event) {\n            const {\n              items\n            } = event.detail;\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            for (const item of items) {\n              const {\n                displayValue,\n                exportValue\n              } = item;\n              const optionElement = document.createElement(\"option\");\n              optionElement.textContent = displayValue;\n              optionElement.value = exportValue;\n              selectElement.append(optionElement);\n            }\n            if (selectElement.options.length > 0) {\n              selectElement.options[0].selected = true;\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          indices(event) {\n            const indices = new Set(event.detail.indices);\n            for (const option of event.target.options) {\n              option.selected = indices.has(option.index);\n            }\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n            selectedValues = getValue(false);\n          },\n          editable(event) {\n            event.target.disabled = !event.detail.editable;\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      selectElement.addEventListener(\"input\", event => {\n        const exportValue = getValue(true);\n        const change = getValue(false);\n        storage.setValue(id, {\n          value: exportValue\n        });\n        event.preventDefault();\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id,\n            name: \"Keystroke\",\n            value: selectedValues,\n            change,\n            changeEx: exportValue,\n            willCommit: false,\n            commitKey: 1,\n            keyDown: false\n          }\n        });\n      });\n      this._setEventListeners(selectElement, null, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"], [\"input\", \"Action\"], [\"input\", \"Validate\"]], event => event.target.value);\n    } else {\n      selectElement.addEventListener(\"input\", function (event) {\n        storage.setValue(id, {\n          value: getValue(true)\n        });\n      });\n    }\n    if (this.data.combo) {\n      this._setTextStyle(selectElement);\n    } else {}\n    this._setBackgroundColor(selectElement);\n    this._setDefaultPropertiesFromJS(selectElement);\n    this.container.append(selectElement);\n    return this.container;\n  }\n}\nclass PopupAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const {\n      data,\n      elements\n    } = parameters;\n    super(parameters, {\n      isRenderable: AnnotationElement._hasPopupData(data)\n    });\n    this.elements = elements;\n    this.popup = null;\n  }\n  render() {\n    this.container.classList.add(\"popupAnnotation\");\n    const popup = this.popup = new PopupElement({\n      container: this.container,\n      color: this.data.color,\n      titleObj: this.data.titleObj,\n      modificationDate: this.data.modificationDate,\n      contentsObj: this.data.contentsObj,\n      richText: this.data.richText,\n      rect: this.data.rect,\n      parentRect: this.data.parentRect || null,\n      parent: this.parent,\n      elements: this.elements,\n      open: this.data.open\n    });\n    const elementIds = [];\n    for (const element of this.elements) {\n      element.popup = popup;\n      elementIds.push(element.data.id);\n      element.addHighlightArea();\n    }\n    this.container.setAttribute(\"aria-controls\", elementIds.map(id => `${AnnotationPrefix}${id}`).join(\",\"));\n    return this.container;\n  }\n}\nclass PopupElement {\n  #boundKeyDown = this.#keyDown.bind(this);\n  #boundHide = this.#hide.bind(this);\n  #boundShow = this.#show.bind(this);\n  #boundToggle = this.#toggle.bind(this);\n  #color = null;\n  #container = null;\n  #contentsObj = null;\n  #dateObj = null;\n  #elements = null;\n  #parent = null;\n  #parentRect = null;\n  #pinned = false;\n  #popup = null;\n  #position = null;\n  #rect = null;\n  #richText = null;\n  #titleObj = null;\n  #updates = null;\n  #wasVisible = false;\n  constructor({\n    container,\n    color,\n    elements,\n    titleObj,\n    modificationDate,\n    contentsObj,\n    richText,\n    parent,\n    rect,\n    parentRect,\n    open\n  }) {\n    this.#container = container;\n    this.#titleObj = titleObj;\n    this.#contentsObj = contentsObj;\n    this.#richText = richText;\n    this.#parent = parent;\n    this.#color = color;\n    this.#rect = rect;\n    this.#parentRect = parentRect;\n    this.#elements = elements;\n    this.#dateObj = PDFDateString.toDateObject(modificationDate);\n    this.trigger = elements.flatMap(e => e.getElementsToTriggerPopup());\n    for (const element of this.trigger) {\n      element.addEventListener(\"click\", this.#boundToggle);\n      element.addEventListener(\"mouseenter\", this.#boundShow);\n      element.addEventListener(\"mouseleave\", this.#boundHide);\n      element.classList.add(\"popupTriggerArea\");\n    }\n    for (const element of elements) {\n      element.container?.addEventListener(\"keydown\", this.#boundKeyDown);\n    }\n    this.#container.hidden = true;\n    if (open) {\n      this.#toggle();\n    }\n  }\n  render() {\n    if (this.#popup) {\n      return;\n    }\n    const popup = this.#popup = document.createElement(\"div\");\n    popup.className = \"popup\";\n    if (this.#color) {\n      const baseColor = popup.style.outlineColor = Util.makeHexColor(...this.#color);\n      if (CSS.supports(\"background-color\", \"color-mix(in srgb, red 30%, white)\")) {\n        popup.style.backgroundColor = `color-mix(in srgb, ${baseColor} 30%, white)`;\n      } else {\n        const BACKGROUND_ENLIGHT = 0.7;\n        popup.style.backgroundColor = Util.makeHexColor(...this.#color.map(c => Math.floor(BACKGROUND_ENLIGHT * (255 - c) + c)));\n      }\n    }\n    const header = document.createElement(\"span\");\n    header.className = \"header\";\n    const title = document.createElement(\"h1\");\n    header.append(title);\n    ({\n      dir: title.dir,\n      str: title.textContent\n    } = this.#titleObj);\n    popup.append(header);\n    if (this.#dateObj) {\n      const modificationDate = document.createElement(\"span\");\n      modificationDate.classList.add(\"popupDate\");\n      modificationDate.setAttribute(\"data-l10n-id\", \"pdfjs-annotation-date-string\");\n      modificationDate.setAttribute(\"data-l10n-args\", JSON.stringify({\n        date: this.#dateObj.toLocaleDateString(),\n        time: this.#dateObj.toLocaleTimeString()\n      }));\n      header.append(modificationDate);\n    }\n    const html = this.#html;\n    if (html) {\n      XfaLayer.render({\n        xfaHtml: html,\n        intent: \"richText\",\n        div: popup\n      });\n      popup.lastChild.classList.add(\"richText\", \"popupContent\");\n    } else {\n      const contents = this._formatContents(this.#contentsObj);\n      popup.append(contents);\n    }\n    this.#container.append(popup);\n  }\n  get #html() {\n    const richText = this.#richText;\n    const contentsObj = this.#contentsObj;\n    if (richText?.str && (!contentsObj?.str || contentsObj.str === richText.str)) {\n      return this.#richText.html || null;\n    }\n    return null;\n  }\n  get #fontSize() {\n    return this.#html?.attributes?.style?.fontSize || 0;\n  }\n  get #fontColor() {\n    return this.#html?.attributes?.style?.color || null;\n  }\n  #makePopupContent(text) {\n    const popupLines = [];\n    const popupContent = {\n      str: text,\n      html: {\n        name: \"div\",\n        attributes: {\n          dir: \"auto\"\n        },\n        children: [{\n          name: \"p\",\n          children: popupLines\n        }]\n      }\n    };\n    const lineAttributes = {\n      style: {\n        color: this.#fontColor,\n        fontSize: this.#fontSize ? `calc(${this.#fontSize}px * var(--scale-factor))` : \"\"\n      }\n    };\n    for (const line of text.split(\"\\n\")) {\n      popupLines.push({\n        name: \"span\",\n        value: line,\n        attributes: lineAttributes\n      });\n    }\n    return popupContent;\n  }\n  _formatContents({\n    str,\n    dir\n  }) {\n    const p = document.createElement(\"p\");\n    p.classList.add(\"popupContent\");\n    p.dir = dir;\n    const lines = str.split(/(?:\\r\\n?|\\n)/);\n    for (let i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      p.append(document.createTextNode(line));\n      if (i < ii - 1) {\n        p.append(document.createElement(\"br\"));\n      }\n    }\n    return p;\n  }\n  #keyDown(event) {\n    if (event.altKey || event.shiftKey || event.ctrlKey || event.metaKey) {\n      return;\n    }\n    if (event.key === \"Enter\" || event.key === \"Escape\" && this.#pinned) {\n      this.#toggle();\n    }\n  }\n  updateEdited({\n    rect,\n    popupContent\n  }) {\n    this.#updates ||= {\n      contentsObj: this.#contentsObj,\n      richText: this.#richText\n    };\n    if (rect) {\n      this.#position = null;\n    }\n    if (popupContent) {\n      this.#richText = this.#makePopupContent(popupContent);\n      this.#contentsObj = null;\n    }\n    this.#popup?.remove();\n    this.#popup = null;\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    ({\n      contentsObj: this.#contentsObj,\n      richText: this.#richText\n    } = this.#updates);\n    this.#updates = null;\n    this.#popup?.remove();\n    this.#popup = null;\n    this.#position = null;\n  }\n  #setPosition() {\n    if (this.#position !== null) {\n      return;\n    }\n    const {\n      page: {\n        view\n      },\n      viewport: {\n        rawDims: {\n          pageWidth,\n          pageHeight,\n          pageX,\n          pageY\n        }\n      }\n    } = this.#parent;\n    let useParentRect = !!this.#parentRect;\n    let rect = useParentRect ? this.#parentRect : this.#rect;\n    for (const element of this.#elements) {\n      if (!rect || Util.intersect(element.data.rect, rect) !== null) {\n        rect = element.data.rect;\n        useParentRect = true;\n        break;\n      }\n    }\n    const normalizedRect = Util.normalizeRect([rect[0], view[3] - rect[1] + view[1], rect[2], view[3] - rect[3] + view[1]]);\n    const HORIZONTAL_SPACE_AFTER_ANNOTATION = 5;\n    const parentWidth = useParentRect ? rect[2] - rect[0] + HORIZONTAL_SPACE_AFTER_ANNOTATION : 0;\n    const popupLeft = normalizedRect[0] + parentWidth;\n    const popupTop = normalizedRect[1];\n    this.#position = [100 * (popupLeft - pageX) / pageWidth, 100 * (popupTop - pageY) / pageHeight];\n    const {\n      style\n    } = this.#container;\n    style.left = `${this.#position[0]}%`;\n    style.top = `${this.#position[1]}%`;\n  }\n  #toggle() {\n    this.#pinned = !this.#pinned;\n    if (this.#pinned) {\n      this.#show();\n      this.#container.addEventListener(\"click\", this.#boundToggle);\n      this.#container.addEventListener(\"keydown\", this.#boundKeyDown);\n    } else {\n      this.#hide();\n      this.#container.removeEventListener(\"click\", this.#boundToggle);\n      this.#container.removeEventListener(\"keydown\", this.#boundKeyDown);\n    }\n  }\n  #show() {\n    if (!this.#popup) {\n      this.render();\n    }\n    if (!this.isVisible) {\n      this.#setPosition();\n      this.#container.hidden = false;\n      this.#container.style.zIndex = parseInt(this.#container.style.zIndex) + 1000;\n    } else if (this.#pinned) {\n      this.#container.classList.add(\"focused\");\n    }\n  }\n  #hide() {\n    this.#container.classList.remove(\"focused\");\n    if (this.#pinned || !this.isVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n    this.#container.style.zIndex = parseInt(this.#container.style.zIndex) - 1000;\n  }\n  forceHide() {\n    this.#wasVisible = this.isVisible;\n    if (!this.#wasVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n  }\n  maybeShow() {\n    if (!this.#wasVisible) {\n      return;\n    }\n    if (!this.#popup) {\n      this.#show();\n    }\n    this.#wasVisible = false;\n    this.#container.hidden = false;\n  }\n  get isVisible() {\n    return this.#container.hidden === false;\n  }\n}\nclass FreeTextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.textContent = parameters.data.textContent;\n    this.textPosition = parameters.data.textPosition;\n    this.annotationEditorType = AnnotationEditorType.FREETEXT;\n  }\n  render() {\n    this.container.classList.add(\"freeTextAnnotation\");\n    if (this.textContent) {\n      const content = document.createElement(\"div\");\n      content.classList.add(\"annotationTextContent\");\n      content.setAttribute(\"role\", \"comment\");\n      for (const line of this.textContent) {\n        const lineSpan = document.createElement(\"span\");\n        lineSpan.textContent = line;\n        content.append(lineSpan);\n      }\n      this.container.append(content);\n    }\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this._editOnDoubleClick();\n    return this.container;\n  }\n  get _isEditable() {\n    return this.data.hasOwnCanvas;\n  }\n}\nclass LineAnnotationElement extends AnnotationElement {\n  #line = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"lineAnnotation\");\n    const data = this.data;\n    const {\n      width,\n      height\n    } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const line = this.#line = this.svgFactory.createElement(\"svg:line\");\n    line.setAttribute(\"x1\", data.rect[2] - data.lineCoordinates[0]);\n    line.setAttribute(\"y1\", data.rect[3] - data.lineCoordinates[1]);\n    line.setAttribute(\"x2\", data.rect[2] - data.lineCoordinates[2]);\n    line.setAttribute(\"y2\", data.rect[3] - data.lineCoordinates[3]);\n    line.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    line.setAttribute(\"stroke\", \"transparent\");\n    line.setAttribute(\"fill\", \"transparent\");\n    svg.append(line);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#line;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass SquareAnnotationElement extends AnnotationElement {\n  #square = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"squareAnnotation\");\n    const data = this.data;\n    const {\n      width,\n      height\n    } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const square = this.#square = this.svgFactory.createElement(\"svg:rect\");\n    square.setAttribute(\"x\", borderWidth / 2);\n    square.setAttribute(\"y\", borderWidth / 2);\n    square.setAttribute(\"width\", width - borderWidth);\n    square.setAttribute(\"height\", height - borderWidth);\n    square.setAttribute(\"stroke-width\", borderWidth || 1);\n    square.setAttribute(\"stroke\", \"transparent\");\n    square.setAttribute(\"fill\", \"transparent\");\n    svg.append(square);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#square;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass CircleAnnotationElement extends AnnotationElement {\n  #circle = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"circleAnnotation\");\n    const data = this.data;\n    const {\n      width,\n      height\n    } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const circle = this.#circle = this.svgFactory.createElement(\"svg:ellipse\");\n    circle.setAttribute(\"cx\", width / 2);\n    circle.setAttribute(\"cy\", height / 2);\n    circle.setAttribute(\"rx\", width / 2 - borderWidth / 2);\n    circle.setAttribute(\"ry\", height / 2 - borderWidth / 2);\n    circle.setAttribute(\"stroke-width\", borderWidth || 1);\n    circle.setAttribute(\"stroke\", \"transparent\");\n    circle.setAttribute(\"fill\", \"transparent\");\n    svg.append(circle);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#circle;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass PolylineAnnotationElement extends AnnotationElement {\n  #polyline = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.containerClassName = \"polylineAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const data = this.data;\n    const {\n      width,\n      height\n    } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    let points = [];\n    for (const coordinate of data.vertices) {\n      const x = coordinate.x - data.rect[0];\n      const y = data.rect[3] - coordinate.y;\n      points.push(x + \",\" + y);\n    }\n    points = points.join(\" \");\n    const polyline = this.#polyline = this.svgFactory.createElement(this.svgElementName);\n    polyline.setAttribute(\"points\", points);\n    polyline.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    polyline.setAttribute(\"stroke\", \"transparent\");\n    polyline.setAttribute(\"fill\", \"transparent\");\n    svg.append(polyline);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#polyline;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass PolygonAnnotationElement extends PolylineAnnotationElement {\n  constructor(parameters) {\n    super(parameters);\n    this.containerClassName = \"polygonAnnotation\";\n    this.svgElementName = \"svg:polygon\";\n  }\n}\nclass CaretAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"caretAnnotation\");\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\nclass InkAnnotationElement extends AnnotationElement {\n  #polylines = [];\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.containerClassName = \"inkAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n    this.annotationEditorType = AnnotationEditorType.INK;\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const data = this.data;\n    const {\n      width,\n      height\n    } = getRectDims(data.rect);\n    const svg = this.svgFactory.create(width, height, true);\n    for (const inkList of data.inkLists) {\n      let points = [];\n      for (const coordinate of inkList) {\n        const x = coordinate.x - data.rect[0];\n        const y = data.rect[3] - coordinate.y;\n        points.push(`${x},${y}`);\n      }\n      points = points.join(\" \");\n      const polyline = this.svgFactory.createElement(this.svgElementName);\n      this.#polylines.push(polyline);\n      polyline.setAttribute(\"points\", points);\n      polyline.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n      polyline.setAttribute(\"stroke\", \"transparent\");\n      polyline.setAttribute(\"fill\", \"transparent\");\n      if (!data.popupRef && this.hasPopupData) {\n        this._createPopup();\n      }\n      svg.append(polyline);\n    }\n    this.container.append(svg);\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#polylines;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass HighlightAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"highlightAnnotation\");\n    return this.container;\n  }\n}\nclass UnderlineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"underlineAnnotation\");\n    return this.container;\n  }\n}\nclass SquigglyAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"squigglyAnnotation\");\n    return this.container;\n  }\n}\nclass StrikeOutAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"strikeoutAnnotation\");\n    return this.container;\n  }\n}\nclass StampAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"stampAnnotation\");\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\nclass FileAttachmentAnnotationElement extends AnnotationElement {\n  #trigger = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true\n    });\n    const {\n      file\n    } = this.data;\n    this.filename = file.filename;\n    this.content = file.content;\n    this.linkService.eventBus?.dispatch(\"fileattachmentannotation\", {\n      source: this,\n      ...file\n    });\n  }\n  render() {\n    this.container.classList.add(\"fileAttachmentAnnotation\");\n    const {\n      container,\n      data\n    } = this;\n    let trigger;\n    if (data.hasAppearance || data.fillAlpha === 0) {\n      trigger = document.createElement(\"div\");\n    } else {\n      trigger = document.createElement(\"img\");\n      trigger.src = `${this.imageResourcesPath}annotation-${/paperclip/i.test(data.name) ? \"paperclip\" : \"pushpin\"}.svg`;\n      if (data.fillAlpha && data.fillAlpha < 1) {\n        trigger.style = `filter: opacity(${Math.round(data.fillAlpha * 100)}%);`;\n      }\n    }\n    trigger.addEventListener(\"dblclick\", this.#download.bind(this));\n    this.#trigger = trigger;\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    container.addEventListener(\"keydown\", evt => {\n      if (evt.key === \"Enter\" && (isMac ? evt.metaKey : evt.ctrlKey)) {\n        this.#download();\n      }\n    });\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    } else {\n      trigger.classList.add(\"popupTriggerArea\");\n    }\n    container.append(trigger);\n    return container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#trigger;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n  #download() {\n    this.downloadManager?.openOrDownloadData(this.content, this.filename);\n  }\n}\nclass AnnotationLayer {\n  #accessibilityManager = null;\n  #annotationCanvasMap = null;\n  #editableAnnotations = new Map();\n  constructor({\n    div,\n    accessibilityManager,\n    annotationCanvasMap,\n    annotationEditorUIManager,\n    page,\n    viewport\n  }) {\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationCanvasMap = annotationCanvasMap;\n    this.page = page;\n    this.viewport = viewport;\n    this.zIndex = 0;\n    this._annotationEditorUIManager = annotationEditorUIManager;\n  }\n  #appendElement(element, id) {\n    const contentElement = element.firstChild || element;\n    contentElement.id = `${AnnotationPrefix}${id}`;\n    this.div.append(element);\n    this.#accessibilityManager?.moveElementInDOM(this.div, element, contentElement, false);\n  }\n  async render(params) {\n    const {\n      annotations\n    } = params;\n    const layer = this.div;\n    setLayerDimensions(layer, this.viewport);\n    const popupToElements = new Map();\n    const elementParams = {\n      data: null,\n      layer,\n      linkService: params.linkService,\n      downloadManager: params.downloadManager,\n      imageResourcesPath: params.imageResourcesPath || \"\",\n      renderForms: params.renderForms !== false,\n      svgFactory: new DOMSVGFactory(),\n      annotationStorage: params.annotationStorage || new AnnotationStorage(),\n      enableScripting: params.enableScripting === true,\n      hasJSActions: params.hasJSActions,\n      fieldObjects: params.fieldObjects,\n      parent: this,\n      elements: null\n    };\n    for (const data of annotations) {\n      if (data.noHTML) {\n        continue;\n      }\n      const isPopupAnnotation = data.annotationType === AnnotationType.POPUP;\n      if (!isPopupAnnotation) {\n        const {\n          width,\n          height\n        } = getRectDims(data.rect);\n        if (width <= 0 || height <= 0) {\n          continue;\n        }\n      } else {\n        const elements = popupToElements.get(data.id);\n        if (!elements) {\n          continue;\n        }\n        elementParams.elements = elements;\n      }\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n      if (!element.isRenderable) {\n        continue;\n      }\n      if (!isPopupAnnotation && data.popupRef) {\n        const elements = popupToElements.get(data.popupRef);\n        if (!elements) {\n          popupToElements.set(data.popupRef, [element]);\n        } else {\n          elements.push(element);\n        }\n      }\n      const rendered = element.render();\n      if (data.hidden) {\n        rendered.style.visibility = \"hidden\";\n      }\n      this.#appendElement(rendered, data.id);\n      if (element.annotationEditorType > 0) {\n        this.#editableAnnotations.set(element.data.id, element);\n        this._annotationEditorUIManager?.renderAnnotationElement(element);\n      }\n    }\n    this.#setAnnotationCanvasMap();\n  }\n  update({\n    viewport\n  }) {\n    const layer = this.div;\n    this.viewport = viewport;\n    setLayerDimensions(layer, {\n      rotation: viewport.rotation\n    });\n    this.#setAnnotationCanvasMap();\n    layer.hidden = false;\n  }\n  #setAnnotationCanvasMap() {\n    if (!this.#annotationCanvasMap) {\n      return;\n    }\n    const layer = this.div;\n    for (const [id, canvas] of this.#annotationCanvasMap) {\n      const element = layer.querySelector(`[data-annotation-id=\"${id}\"]`);\n      if (!element) {\n        continue;\n      }\n      canvas.className = \"annotationContent\";\n      const {\n        firstChild\n      } = element;\n      if (!firstChild) {\n        element.append(canvas);\n      } else if (firstChild.nodeName === \"CANVAS\") {\n        firstChild.replaceWith(canvas);\n      } else if (!firstChild.classList.contains(\"annotationContent\")) {\n        firstChild.before(canvas);\n      } else {\n        firstChild.after(canvas);\n      }\n    }\n    this.#annotationCanvasMap.clear();\n  }\n  getEditableAnnotations() {\n    return Array.from(this.#editableAnnotations.values());\n  }\n  getEditableAnnotation(id) {\n    return this.#editableAnnotations.get(id);\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/editor/freetext.js\n\n\n\n\nconst EOL_PATTERN = /\\r\\n?|\\n/g;\nclass FreeTextEditor extends AnnotationEditor {\n  #boundEditorDivBlur = this.editorDivBlur.bind(this);\n  #boundEditorDivFocus = this.editorDivFocus.bind(this);\n  #boundEditorDivInput = this.editorDivInput.bind(this);\n  #boundEditorDivKeydown = this.editorDivKeydown.bind(this);\n  #boundEditorDivPaste = this.editorDivPaste.bind(this);\n  #color;\n  #content = \"\";\n  #editorDivId = `${this.id}-editor`;\n  #fontSize;\n  #initialData = null;\n  static _freeTextDefaultContent = \"\";\n  static _internalPadding = 0;\n  static _defaultColor = null;\n  static _defaultFontSize = 10;\n  static get _keyboardManager() {\n    const proto = FreeTextEditor.prototype;\n    const arrowChecker = self => self.isEmpty();\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ctrl+s\", \"mac+meta+s\", \"ctrl+p\", \"mac+meta+p\"], proto.commitOrRemove, {\n      bubbles: true\n    }], [[\"ctrl+Enter\", \"mac+meta+Enter\", \"Escape\", \"mac+Escape\"], proto.commitOrRemove], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._translateEmpty, {\n      args: [-small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto._translateEmpty, {\n      args: [-big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto._translateEmpty, {\n      args: [small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto._translateEmpty, {\n      args: [big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto._translateEmpty, {\n      args: [0, -small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto._translateEmpty, {\n      args: [0, -big],\n      checker: arrowChecker\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto._translateEmpty, {\n      args: [0, small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto._translateEmpty, {\n      args: [0, big],\n      checker: arrowChecker\n    }]]));\n  }\n  static _type = \"freetext\";\n  static _editorType = AnnotationEditorType.FREETEXT;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"freeTextEditor\"\n    });\n    this.#color = params.color || FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor;\n    this.#fontSize = params.fontSize || FreeTextEditor._defaultFontSize;\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager, {\n      strings: [\"pdfjs-free-text-default-content\"]\n    });\n    const style = getComputedStyle(document.documentElement);\n    this._internalPadding = parseFloat(style.getPropertyValue(\"--freetext-padding\"));\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        FreeTextEditor._defaultFontSize = value;\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        FreeTextEditor._defaultColor = value;\n        break;\n    }\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        this.#updateFontSize(value);\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        this.#updateColor(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[AnnotationEditorParamsType.FREETEXT_SIZE, FreeTextEditor._defaultFontSize], [AnnotationEditorParamsType.FREETEXT_COLOR, FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor]];\n  }\n  get propertiesToUpdate() {\n    return [[AnnotationEditorParamsType.FREETEXT_SIZE, this.#fontSize], [AnnotationEditorParamsType.FREETEXT_COLOR, this.#color]];\n  }\n  #updateFontSize(fontSize) {\n    const setFontsize = size => {\n      this.editorDiv.style.fontSize = `calc(${size}px * var(--scale-factor))`;\n      this.translate(0, -(size - this.#fontSize) * this.parentScale);\n      this.#fontSize = size;\n      this.#setEditorDimensions();\n    };\n    const savedFontsize = this.#fontSize;\n    this.addCommands({\n      cmd: setFontsize.bind(this, fontSize),\n      undo: setFontsize.bind(this, savedFontsize),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_SIZE,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  #updateColor(color) {\n    const setColor = col => {\n      this.#color = this.editorDiv.style.color = col;\n    };\n    const savedColor = this.#color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  _translateEmpty(x, y) {\n    this._uiManager.translateSelectedEditors(x, y, true);\n  }\n  getInitialTranslation() {\n    const scale = this.parentScale;\n    return [-FreeTextEditor._internalPadding * scale, -(FreeTextEditor._internalPadding + this.#fontSize) * scale];\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  enableEditMode() {\n    if (this.isInEditMode()) {\n      return;\n    }\n    this.parent.setEditingState(false);\n    this.parent.updateToolbar(AnnotationEditorType.FREETEXT);\n    super.enableEditMode();\n    this.overlayDiv.classList.remove(\"enabled\");\n    this.editorDiv.contentEditable = true;\n    this._isDraggable = false;\n    this.div.removeAttribute(\"aria-activedescendant\");\n    this.editorDiv.addEventListener(\"keydown\", this.#boundEditorDivKeydown);\n    this.editorDiv.addEventListener(\"focus\", this.#boundEditorDivFocus);\n    this.editorDiv.addEventListener(\"blur\", this.#boundEditorDivBlur);\n    this.editorDiv.addEventListener(\"input\", this.#boundEditorDivInput);\n    this.editorDiv.addEventListener(\"paste\", this.#boundEditorDivPaste);\n  }\n  disableEditMode() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n    this.parent.setEditingState(true);\n    super.disableEditMode();\n    this.overlayDiv.classList.add(\"enabled\");\n    this.editorDiv.contentEditable = false;\n    this.div.setAttribute(\"aria-activedescendant\", this.#editorDivId);\n    this._isDraggable = true;\n    this.editorDiv.removeEventListener(\"keydown\", this.#boundEditorDivKeydown);\n    this.editorDiv.removeEventListener(\"focus\", this.#boundEditorDivFocus);\n    this.editorDiv.removeEventListener(\"blur\", this.#boundEditorDivBlur);\n    this.editorDiv.removeEventListener(\"input\", this.#boundEditorDivInput);\n    this.editorDiv.removeEventListener(\"paste\", this.#boundEditorDivPaste);\n    this.div.focus({\n      preventScroll: true\n    });\n    this.isEditing = false;\n    this.parent.div.classList.add(\"freetextEditing\");\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    if (event.target !== this.editorDiv) {\n      this.editorDiv.focus();\n    }\n  }\n  onceAdded() {\n    if (this.width) {\n      return;\n    }\n    this.enableEditMode();\n    this.editorDiv.focus();\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    }\n    this._initialOptions = null;\n  }\n  isEmpty() {\n    return !this.editorDiv || this.editorDiv.innerText.trim() === \"\";\n  }\n  remove() {\n    this.isEditing = false;\n    if (this.parent) {\n      this.parent.setEditingState(true);\n      this.parent.div.classList.add(\"freetextEditing\");\n    }\n    super.remove();\n  }\n  #extractText() {\n    const buffer = [];\n    this.editorDiv.normalize();\n    for (const child of this.editorDiv.childNodes) {\n      buffer.push(FreeTextEditor.#getNodeContent(child));\n    }\n    return buffer.join(\"\\n\");\n  }\n  #setEditorDimensions() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    let rect;\n    if (this.isAttachedToDOM) {\n      rect = this.div.getBoundingClientRect();\n    } else {\n      const {\n        currentLayer,\n        div\n      } = this;\n      const savedDisplay = div.style.display;\n      const savedVisibility = div.classList.contains(\"hidden\");\n      div.classList.remove(\"hidden\");\n      div.style.display = \"hidden\";\n      currentLayer.div.append(this.div);\n      rect = div.getBoundingClientRect();\n      div.remove();\n      div.style.display = savedDisplay;\n      div.classList.toggle(\"hidden\", savedVisibility);\n    }\n    if (this.rotation % 180 === this.parentRotation % 180) {\n      this.width = rect.width / parentWidth;\n      this.height = rect.height / parentHeight;\n    } else {\n      this.width = rect.height / parentWidth;\n      this.height = rect.width / parentHeight;\n    }\n    this.fixAndSetPosition();\n  }\n  commit() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n    super.commit();\n    this.disableEditMode();\n    const savedText = this.#content;\n    const newText = this.#content = this.#extractText().trimEnd();\n    if (savedText === newText) {\n      return;\n    }\n    const setText = text => {\n      this.#content = text;\n      if (!text) {\n        this.remove();\n        return;\n      }\n      this.#setContent();\n      this._uiManager.rebuild(this);\n      this.#setEditorDimensions();\n    };\n    this.addCommands({\n      cmd: () => {\n        setText(newText);\n      },\n      undo: () => {\n        setText(savedText);\n      },\n      mustExec: false\n    });\n    this.#setEditorDimensions();\n  }\n  shouldGetKeyboardEvents() {\n    return this.isInEditMode();\n  }\n  enterInEditMode() {\n    this.enableEditMode();\n    this.editorDiv.focus();\n  }\n  dblclick(event) {\n    this.enterInEditMode();\n  }\n  keydown(event) {\n    if (event.target === this.div && event.key === \"Enter\") {\n      this.enterInEditMode();\n      event.preventDefault();\n    }\n  }\n  editorDivKeydown(event) {\n    FreeTextEditor._keyboardManager.exec(this, event);\n  }\n  editorDivFocus(event) {\n    this.isEditing = true;\n  }\n  editorDivBlur(event) {\n    this.isEditing = false;\n  }\n  editorDivInput(event) {\n    this.parent.div.classList.toggle(\"freetextEditing\", this.isEmpty());\n  }\n  disableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"comment\");\n    this.editorDiv.removeAttribute(\"aria-multiline\");\n  }\n  enableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"textbox\");\n    this.editorDiv.setAttribute(\"aria-multiline\", true);\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.editorDiv = document.createElement(\"div\");\n    this.editorDiv.className = \"internal\";\n    this.editorDiv.setAttribute(\"id\", this.#editorDivId);\n    this.editorDiv.setAttribute(\"data-l10n-id\", \"pdfjs-free-text\");\n    this.enableEditing();\n    AnnotationEditor._l10nPromise.get(\"pdfjs-free-text-default-content\").then(msg => this.editorDiv?.setAttribute(\"default-content\", msg));\n    this.editorDiv.contentEditable = true;\n    const {\n      style\n    } = this.editorDiv;\n    style.fontSize = `calc(${this.#fontSize}px * var(--scale-factor))`;\n    style.color = this.#color;\n    this.div.append(this.editorDiv);\n    this.overlayDiv = document.createElement(\"div\");\n    this.overlayDiv.classList.add(\"overlay\", \"enabled\");\n    this.div.append(this.overlayDiv);\n    bindEvents(this, this.div, [\"dblclick\", \"keydown\"]);\n    if (this.width) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      if (this.annotationElementId) {\n        const {\n          position\n        } = this.#initialData;\n        let [tx, ty] = this.getInitialTranslation();\n        [tx, ty] = this.pageTranslationToScreen(tx, ty);\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        const [pageX, pageY] = this.pageTranslation;\n        let posX, posY;\n        switch (this.rotation) {\n          case 0:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY + this.height - (position[1] - pageY) / pageHeight;\n            break;\n          case 90:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [ty, -tx];\n            break;\n          case 180:\n            posX = baseX - this.width + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [-tx, -ty];\n            break;\n          case 270:\n            posX = baseX + (position[0] - pageX - this.height * pageHeight) / pageWidth;\n            posY = baseY + (position[1] - pageY - this.width * pageWidth) / pageHeight;\n            [tx, ty] = [-ty, tx];\n            break;\n        }\n        this.setAt(posX * parentWidth, posY * parentHeight, tx, ty);\n      } else {\n        this.setAt(baseX * parentWidth, baseY * parentHeight, this.width * parentWidth, this.height * parentHeight);\n      }\n      this.#setContent();\n      this._isDraggable = true;\n      this.editorDiv.contentEditable = false;\n    } else {\n      this._isDraggable = false;\n      this.editorDiv.contentEditable = true;\n    }\n    return this.div;\n  }\n  static #getNodeContent(node) {\n    return (node.nodeType === Node.TEXT_NODE ? node.nodeValue : node.innerText).replaceAll(EOL_PATTERN, \"\");\n  }\n  editorDivPaste(event) {\n    const clipboardData = event.clipboardData || window.clipboardData;\n    const {\n      types\n    } = clipboardData;\n    if (types.length === 1 && types[0] === \"text/plain\") {\n      return;\n    }\n    event.preventDefault();\n    const paste = FreeTextEditor.#deserializeContent(clipboardData.getData(\"text\") || \"\").replaceAll(EOL_PATTERN, \"\\n\");\n    if (!paste) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (!selection.rangeCount) {\n      return;\n    }\n    this.editorDiv.normalize();\n    selection.deleteFromDocument();\n    const range = selection.getRangeAt(0);\n    if (!paste.includes(\"\\n\")) {\n      range.insertNode(document.createTextNode(paste));\n      this.editorDiv.normalize();\n      selection.collapseToStart();\n      return;\n    }\n    const {\n      startContainer,\n      startOffset\n    } = range;\n    const bufferBefore = [];\n    const bufferAfter = [];\n    if (startContainer.nodeType === Node.TEXT_NODE) {\n      const parent = startContainer.parentElement;\n      bufferAfter.push(startContainer.nodeValue.slice(startOffset).replaceAll(EOL_PATTERN, \"\"));\n      if (parent !== this.editorDiv) {\n        let buffer = bufferBefore;\n        for (const child of this.editorDiv.childNodes) {\n          if (child === parent) {\n            buffer = bufferAfter;\n            continue;\n          }\n          buffer.push(FreeTextEditor.#getNodeContent(child));\n        }\n      }\n      bufferBefore.push(startContainer.nodeValue.slice(0, startOffset).replaceAll(EOL_PATTERN, \"\"));\n    } else if (startContainer === this.editorDiv) {\n      let buffer = bufferBefore;\n      let i = 0;\n      for (const child of this.editorDiv.childNodes) {\n        if (i++ === startOffset) {\n          buffer = bufferAfter;\n        }\n        buffer.push(FreeTextEditor.#getNodeContent(child));\n      }\n    }\n    this.#content = `${bufferBefore.join(\"\\n\")}${paste}${bufferAfter.join(\"\\n\")}`;\n    this.#setContent();\n    const newRange = new Range();\n    let beforeLength = bufferBefore.reduce((acc, line) => acc + line.length, 0);\n    for (const {\n      firstChild\n    } of this.editorDiv.childNodes) {\n      if (firstChild.nodeType === Node.TEXT_NODE) {\n        const length = firstChild.nodeValue.length;\n        if (beforeLength <= length) {\n          newRange.setStart(firstChild, beforeLength);\n          newRange.setEnd(firstChild, beforeLength);\n          break;\n        }\n        beforeLength -= length;\n      }\n    }\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n  #setContent() {\n    this.editorDiv.replaceChildren();\n    if (!this.#content) {\n      return;\n    }\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(line ? document.createTextNode(line) : document.createElement(\"br\"));\n      this.editorDiv.append(div);\n    }\n  }\n  #serializeContent() {\n    return this.#content.replaceAll(\"\\xa0\", \" \");\n  }\n  static #deserializeContent(content) {\n    return content.replaceAll(\" \", \"\\xa0\");\n  }\n  get contentDiv() {\n    return this.editorDiv;\n  }\n  static deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof FreeTextAnnotationElement) {\n      const {\n        data: {\n          defaultAppearanceData: {\n            fontSize,\n            fontColor\n          },\n          rect,\n          rotation,\n          id\n        },\n        textContent,\n        textPosition,\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      if (!textContent || textContent.length === 0) {\n        return null;\n      }\n      initialData = data = {\n        annotationType: AnnotationEditorType.FREETEXT,\n        color: Array.from(fontColor),\n        fontSize,\n        value: textContent.join(\"\\n\"),\n        position: textPosition,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        id,\n        deleted: false\n      };\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n    editor.#fontSize = data.fontSize;\n    editor.#color = Util.makeHexColor(...data.color);\n    editor.#content = FreeTextEditor.#deserializeContent(data.value);\n    editor.annotationElementId = data.id || null;\n    editor.#initialData = initialData;\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return {\n        pageIndex: this.pageIndex,\n        id: this.annotationElementId,\n        deleted: true\n      };\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    const rect = this.getRect(padding, padding);\n    const color = AnnotationEditor._colorManager.convert(this.isAttachedToDOM ? getComputedStyle(this.editorDiv).color : this.#color);\n    const serialized = {\n      annotationType: AnnotationEditorType.FREETEXT,\n      color,\n      fontSize: this.#fontSize,\n      value: this.#serializeContent(),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      return serialized;\n    }\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      value,\n      fontSize,\n      color,\n      pageIndex\n    } = this.#initialData;\n    return this._hasBeenMoved || serialized.value !== value || serialized.fontSize !== fontSize || serialized.color.some((c, i) => c !== color[i]) || serialized.pageIndex !== pageIndex;\n  }\n  renderAnnotationElement(annotation) {\n    const content = super.renderAnnotationElement(annotation);\n    if (this.deleted) {\n      return content;\n    }\n    const {\n      style\n    } = content;\n    style.fontSize = `calc(${this.#fontSize}px * var(--scale-factor))`;\n    style.color = this.#color;\n    content.replaceChildren();\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(line ? document.createTextNode(line) : document.createElement(\"br\"));\n      content.append(div);\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    annotation.updateEdited({\n      rect: this.getRect(padding, padding),\n      popupContent: this.#content\n    });\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    super.resetAnnotationElement(annotation);\n    annotation.resetEdited();\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/editor/outliner.js\n\nclass Outliner {\n  #box;\n  #verticalEdges = [];\n  #intervals = [];\n  constructor(boxes, borderWidth = 0, innerMargin = 0, isLTR = true) {\n    let minX = Infinity;\n    let maxX = -Infinity;\n    let minY = Infinity;\n    let maxY = -Infinity;\n    const NUMBER_OF_DIGITS = 4;\n    const EPSILON = 10 ** -NUMBER_OF_DIGITS;\n    for (const {\n      x,\n      y,\n      width,\n      height\n    } of boxes) {\n      const x1 = Math.floor((x - borderWidth) / EPSILON) * EPSILON;\n      const x2 = Math.ceil((x + width + borderWidth) / EPSILON) * EPSILON;\n      const y1 = Math.floor((y - borderWidth) / EPSILON) * EPSILON;\n      const y2 = Math.ceil((y + height + borderWidth) / EPSILON) * EPSILON;\n      const left = [x1, y1, y2, true];\n      const right = [x2, y1, y2, false];\n      this.#verticalEdges.push(left, right);\n      minX = Math.min(minX, x1);\n      maxX = Math.max(maxX, x2);\n      minY = Math.min(minY, y1);\n      maxY = Math.max(maxY, y2);\n    }\n    const bboxWidth = maxX - minX + 2 * innerMargin;\n    const bboxHeight = maxY - minY + 2 * innerMargin;\n    const shiftedMinX = minX - innerMargin;\n    const shiftedMinY = minY - innerMargin;\n    const lastEdge = this.#verticalEdges.at(isLTR ? -1 : -2);\n    const lastPoint = [lastEdge[0], lastEdge[2]];\n    for (const edge of this.#verticalEdges) {\n      const [x, y1, y2] = edge;\n      edge[0] = (x - shiftedMinX) / bboxWidth;\n      edge[1] = (y1 - shiftedMinY) / bboxHeight;\n      edge[2] = (y2 - shiftedMinY) / bboxHeight;\n    }\n    this.#box = {\n      x: shiftedMinX,\n      y: shiftedMinY,\n      width: bboxWidth,\n      height: bboxHeight,\n      lastPoint\n    };\n  }\n  getOutlines() {\n    this.#verticalEdges.sort((a, b) => a[0] - b[0] || a[1] - b[1] || a[2] - b[2]);\n    const outlineVerticalEdges = [];\n    for (const edge of this.#verticalEdges) {\n      if (edge[3]) {\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n        this.#insert(edge);\n      } else {\n        this.#remove(edge);\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n      }\n    }\n    return this.#getOutlines(outlineVerticalEdges);\n  }\n  #getOutlines(outlineVerticalEdges) {\n    const edges = [];\n    const allEdges = new Set();\n    for (const edge of outlineVerticalEdges) {\n      const [x, y1, y2] = edge;\n      edges.push([x, y1, edge], [x, y2, edge]);\n    }\n    edges.sort((a, b) => a[1] - b[1] || a[0] - b[0]);\n    for (let i = 0, ii = edges.length; i < ii; i += 2) {\n      const edge1 = edges[i][2];\n      const edge2 = edges[i + 1][2];\n      edge1.push(edge2);\n      edge2.push(edge1);\n      allEdges.add(edge1);\n      allEdges.add(edge2);\n    }\n    const outlines = [];\n    let outline;\n    while (allEdges.size > 0) {\n      const edge = allEdges.values().next().value;\n      let [x, y1, y2, edge1, edge2] = edge;\n      allEdges.delete(edge);\n      let lastPointX = x;\n      let lastPointY = y1;\n      outline = [x, y2];\n      outlines.push(outline);\n      while (true) {\n        let e;\n        if (allEdges.has(edge1)) {\n          e = edge1;\n        } else if (allEdges.has(edge2)) {\n          e = edge2;\n        } else {\n          break;\n        }\n        allEdges.delete(e);\n        [x, y1, y2, edge1, edge2] = e;\n        if (lastPointX !== x) {\n          outline.push(lastPointX, lastPointY, x, lastPointY === y1 ? y1 : y2);\n          lastPointX = x;\n        }\n        lastPointY = lastPointY === y1 ? y2 : y1;\n      }\n      outline.push(lastPointX, lastPointY);\n    }\n    return new HighlightOutline(outlines, this.#box);\n  }\n  #binarySearch(y) {\n    const array = this.#intervals;\n    let start = 0;\n    let end = array.length - 1;\n    while (start <= end) {\n      const middle = start + end >> 1;\n      const y1 = array[middle][0];\n      if (y1 === y) {\n        return middle;\n      }\n      if (y1 < y) {\n        start = middle + 1;\n      } else {\n        end = middle - 1;\n      }\n    }\n    return end + 1;\n  }\n  #insert([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    this.#intervals.splice(index, 0, [y1, y2]);\n  }\n  #remove([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    for (let i = index; i < this.#intervals.length; i++) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n    for (let i = index - 1; i >= 0; i--) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n  }\n  #breakEdge(edge) {\n    const [x, y1, y2] = edge;\n    const results = [[x, y1, y2]];\n    const index = this.#binarySearch(y2);\n    for (let i = 0; i < index; i++) {\n      const [start, end] = this.#intervals[i];\n      for (let j = 0, jj = results.length; j < jj; j++) {\n        const [, y3, y4] = results[j];\n        if (end <= y3 || y4 <= start) {\n          continue;\n        }\n        if (y3 >= start) {\n          if (y4 > end) {\n            results[j][1] = end;\n          } else {\n            if (jj === 1) {\n              return [];\n            }\n            results.splice(j, 1);\n            j--;\n            jj--;\n          }\n          continue;\n        }\n        results[j][2] = start;\n        if (y4 > end) {\n          results.push([x, end, y4]);\n        }\n      }\n    }\n    return results;\n  }\n}\nclass Outline {\n  toSVGPath() {\n    throw new Error(\"Abstract method `toSVGPath` must be implemented.\");\n  }\n  get box() {\n    throw new Error(\"Abstract getter `box` must be implemented.\");\n  }\n  serialize(_bbox, _rotation) {\n    throw new Error(\"Abstract method `serialize` must be implemented.\");\n  }\n  get free() {\n    return this instanceof FreeHighlightOutline;\n  }\n}\nclass HighlightOutline extends Outline {\n  #box;\n  #outlines;\n  constructor(outlines, box) {\n    super();\n    this.#outlines = outlines;\n    this.#box = box;\n  }\n  toSVGPath() {\n    const buffer = [];\n    for (const polygon of this.#outlines) {\n      let [prevX, prevY] = polygon;\n      buffer.push(`M${prevX} ${prevY}`);\n      for (let i = 2; i < polygon.length; i += 2) {\n        const x = polygon[i];\n        const y = polygon[i + 1];\n        if (x === prevX) {\n          buffer.push(`V${y}`);\n          prevY = y;\n        } else if (y === prevY) {\n          buffer.push(`H${x}`);\n          prevX = x;\n        }\n      }\n      buffer.push(\"Z\");\n    }\n    return buffer.join(\" \");\n  }\n  serialize([blX, blY, trX, trY], _rotation) {\n    const outlines = [];\n    const width = trX - blX;\n    const height = trY - blY;\n    for (const outline of this.#outlines) {\n      const points = new Array(outline.length);\n      for (let i = 0; i < outline.length; i += 2) {\n        points[i] = blX + outline[i] * width;\n        points[i + 1] = trY - outline[i + 1] * height;\n      }\n      outlines.push(points);\n    }\n    return outlines;\n  }\n  get box() {\n    return this.#box;\n  }\n}\nclass FreeOutliner {\n  #box;\n  #bottom = [];\n  #innerMargin;\n  #isLTR;\n  #top = [];\n  #last = new Float64Array(18);\n  #lastX;\n  #lastY;\n  #min;\n  #min_dist;\n  #scaleFactor;\n  #thickness;\n  #points = [];\n  static #MIN_DIST = 8;\n  static #MIN_DIFF = 2;\n  static #MIN = FreeOutliner.#MIN_DIST + FreeOutliner.#MIN_DIFF;\n  constructor({\n    x,\n    y\n  }, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    this.#box = box;\n    this.#thickness = thickness * scaleFactor;\n    this.#isLTR = isLTR;\n    this.#last.set([NaN, NaN, NaN, NaN, x, y], 6);\n    this.#innerMargin = innerMargin;\n    this.#min_dist = FreeOutliner.#MIN_DIST * scaleFactor;\n    this.#min = FreeOutliner.#MIN * scaleFactor;\n    this.#scaleFactor = scaleFactor;\n    this.#points.push(x, y);\n  }\n  get free() {\n    return true;\n  }\n  isEmpty() {\n    return isNaN(this.#last[8]);\n  }\n  #getLastCoords() {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [x, y, width, height] = this.#box;\n    return [(this.#lastX + (lastTop[0] - lastBottom[0]) / 2 - x) / width, (this.#lastY + (lastTop[1] - lastBottom[1]) / 2 - y) / height, (this.#lastX + (lastBottom[0] - lastTop[0]) / 2 - x) / width, (this.#lastY + (lastBottom[1] - lastTop[1]) / 2 - y) / height];\n  }\n  add({\n    x,\n    y\n  }) {\n    this.#lastX = x;\n    this.#lastY = y;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    let [x1, y1, x2, y2] = this.#last.subarray(8, 12);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(diffX, diffY);\n    if (d < this.#min) {\n      return false;\n    }\n    const diffD = d - this.#min_dist;\n    const K = diffD / d;\n    const shiftX = K * diffX;\n    const shiftY = K * diffY;\n    let x0 = x1;\n    let y0 = y1;\n    x1 = x2;\n    y1 = y2;\n    x2 += shiftX;\n    y2 += shiftY;\n    this.#points?.push(x, y);\n    const nX = -shiftY / diffD;\n    const nY = shiftX / diffD;\n    const thX = nX * this.#thickness;\n    const thY = nY * this.#thickness;\n    this.#last.set(this.#last.subarray(2, 8), 0);\n    this.#last.set([x2 + thX, y2 + thY], 4);\n    this.#last.set(this.#last.subarray(14, 18), 12);\n    this.#last.set([x2 - thX, y2 - thY], 16);\n    if (isNaN(this.#last[6])) {\n      if (this.#top.length === 0) {\n        this.#last.set([x1 + thX, y1 + thY], 2);\n        this.#top.push(NaN, NaN, NaN, NaN, (x1 + thX - layerX) / layerWidth, (y1 + thY - layerY) / layerHeight);\n        this.#last.set([x1 - thX, y1 - thY], 14);\n        this.#bottom.push(NaN, NaN, NaN, NaN, (x1 - thX - layerX) / layerWidth, (y1 - thY - layerY) / layerHeight);\n      }\n      this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n      return !this.isEmpty();\n    }\n    this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n    const angle = Math.abs(Math.atan2(y0 - y1, x0 - x1) - Math.atan2(shiftY, shiftX));\n    if (angle < Math.PI / 2) {\n      [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n      this.#top.push(NaN, NaN, NaN, NaN, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n      [x1, y1, x0, y0] = this.#last.subarray(14, 18);\n      this.#bottom.push(NaN, NaN, NaN, NaN, ((x0 + x1) / 2 - layerX) / layerWidth, ((y0 + y1) / 2 - layerY) / layerHeight);\n      return true;\n    }\n    [x0, y0, x1, y1, x2, y2] = this.#last.subarray(0, 6);\n    this.#top.push(((x0 + 5 * x1) / 6 - layerX) / layerWidth, ((y0 + 5 * y1) / 6 - layerY) / layerHeight, ((5 * x1 + x2) / 6 - layerX) / layerWidth, ((5 * y1 + y2) / 6 - layerY) / layerHeight, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n    [x2, y2, x1, y1, x0, y0] = this.#last.subarray(12, 18);\n    this.#bottom.push(((x0 + 5 * x1) / 6 - layerX) / layerWidth, ((y0 + 5 * y1) / 6 - layerY) / layerHeight, ((5 * x1 + x2) / 6 - layerX) / layerWidth, ((5 * y1 + y2) / 6 - layerY) / layerHeight, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n    return true;\n  }\n  toSVGPath() {\n    if (this.isEmpty()) {\n      return \"\";\n    }\n    const top = this.#top;\n    const bottom = this.#bottom;\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [x, y, width, height] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    if (isNaN(this.#last[6]) && !this.isEmpty()) {\n      return `M${(this.#last[2] - x) / width} ${(this.#last[3] - y) / height} L${(this.#last[4] - x) / width} ${(this.#last[5] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(this.#last[16] - x) / width} ${(this.#last[17] - y) / height} L${(this.#last[14] - x) / width} ${(this.#last[15] - y) / height} Z`;\n    }\n    const buffer = [];\n    buffer.push(`M${top[4]} ${top[5]}`);\n    for (let i = 6; i < top.length; i += 6) {\n      if (isNaN(top[i])) {\n        buffer.push(`L${top[i + 4]} ${top[i + 5]}`);\n      } else {\n        buffer.push(`C${top[i]} ${top[i + 1]} ${top[i + 2]} ${top[i + 3]} ${top[i + 4]} ${top[i + 5]}`);\n      }\n    }\n    buffer.push(`L${(lastTop[0] - x) / width} ${(lastTop[1] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(lastBottom[0] - x) / width} ${(lastBottom[1] - y) / height}`);\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      if (isNaN(bottom[i])) {\n        buffer.push(`L${bottom[i + 4]} ${bottom[i + 5]}`);\n      } else {\n        buffer.push(`C${bottom[i]} ${bottom[i + 1]} ${bottom[i + 2]} ${bottom[i + 3]} ${bottom[i + 4]} ${bottom[i + 5]}`);\n      }\n    }\n    buffer.push(`L${bottom[4]} ${bottom[5]} Z`);\n    return buffer.join(\" \");\n  }\n  getOutlines() {\n    const top = this.#top;\n    const bottom = this.#bottom;\n    const last = this.#last;\n    const lastTop = last.subarray(4, 6);\n    const lastBottom = last.subarray(16, 18);\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const points = new Float64Array((this.#points?.length ?? 0) + 2);\n    for (let i = 0, ii = points.length - 2; i < ii; i += 2) {\n      points[i] = (this.#points[i] - layerX) / layerWidth;\n      points[i + 1] = (this.#points[i + 1] - layerY) / layerHeight;\n    }\n    points[points.length - 2] = (this.#lastX - layerX) / layerWidth;\n    points[points.length - 1] = (this.#lastY - layerY) / layerHeight;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    if (isNaN(last[6]) && !this.isEmpty()) {\n      const outline = new Float64Array(36);\n      outline.set([NaN, NaN, NaN, NaN, (last[2] - layerX) / layerWidth, (last[3] - layerY) / layerHeight, NaN, NaN, NaN, NaN, (last[4] - layerX) / layerWidth, (last[5] - layerY) / layerHeight, NaN, NaN, NaN, NaN, lastTopX, lastTopY, NaN, NaN, NaN, NaN, lastBottomX, lastBottomY, NaN, NaN, NaN, NaN, (last[16] - layerX) / layerWidth, (last[17] - layerY) / layerHeight, NaN, NaN, NaN, NaN, (last[14] - layerX) / layerWidth, (last[15] - layerY) / layerHeight], 0);\n      return new FreeHighlightOutline(outline, points, this.#box, this.#scaleFactor, this.#innerMargin, this.#isLTR);\n    }\n    const outline = new Float64Array(this.#top.length + 24 + this.#bottom.length);\n    let N = top.length;\n    for (let i = 0; i < N; i += 2) {\n      if (isNaN(top[i])) {\n        outline[i] = outline[i + 1] = NaN;\n        continue;\n      }\n      outline[i] = top[i];\n      outline[i + 1] = top[i + 1];\n    }\n    outline.set([NaN, NaN, NaN, NaN, (lastTop[0] - layerX) / layerWidth, (lastTop[1] - layerY) / layerHeight, NaN, NaN, NaN, NaN, lastTopX, lastTopY, NaN, NaN, NaN, NaN, lastBottomX, lastBottomY, NaN, NaN, NaN, NaN, (lastBottom[0] - layerX) / layerWidth, (lastBottom[1] - layerY) / layerHeight], N);\n    N += 24;\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      for (let j = 0; j < 6; j += 2) {\n        if (isNaN(bottom[i + j])) {\n          outline[N] = outline[N + 1] = NaN;\n          N += 2;\n          continue;\n        }\n        outline[N] = bottom[i + j];\n        outline[N + 1] = bottom[i + j + 1];\n        N += 2;\n      }\n    }\n    outline.set([NaN, NaN, NaN, NaN, bottom[4], bottom[5]], N);\n    return new FreeHighlightOutline(outline, points, this.#box, this.#scaleFactor, this.#innerMargin, this.#isLTR);\n  }\n}\nclass FreeHighlightOutline extends Outline {\n  #box;\n  #bbox = null;\n  #innerMargin;\n  #isLTR;\n  #points;\n  #scaleFactor;\n  #outline;\n  constructor(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    super();\n    this.#outline = outline;\n    this.#points = points;\n    this.#box = box;\n    this.#scaleFactor = scaleFactor;\n    this.#innerMargin = innerMargin;\n    this.#isLTR = isLTR;\n    this.#computeMinMax(isLTR);\n    const {\n      x,\n      y,\n      width,\n      height\n    } = this.#bbox;\n    for (let i = 0, ii = outline.length; i < ii; i += 2) {\n      outline[i] = (outline[i] - x) / width;\n      outline[i + 1] = (outline[i + 1] - y) / height;\n    }\n    for (let i = 0, ii = points.length; i < ii; i += 2) {\n      points[i] = (points[i] - x) / width;\n      points[i + 1] = (points[i + 1] - y) / height;\n    }\n  }\n  toSVGPath() {\n    const buffer = [`M${this.#outline[4]} ${this.#outline[5]}`];\n    for (let i = 6, ii = this.#outline.length; i < ii; i += 6) {\n      if (isNaN(this.#outline[i])) {\n        buffer.push(`L${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n        continue;\n      }\n      buffer.push(`C${this.#outline[i]} ${this.#outline[i + 1]} ${this.#outline[i + 2]} ${this.#outline[i + 3]} ${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n    }\n    buffer.push(\"Z\");\n    return buffer.join(\" \");\n  }\n  serialize([blX, blY, trX, trY], rotation) {\n    const width = trX - blX;\n    const height = trY - blY;\n    let outline;\n    let points;\n    switch (rotation) {\n      case 0:\n        outline = this.#rescale(this.#outline, blX, trY, width, -height);\n        points = this.#rescale(this.#points, blX, trY, width, -height);\n        break;\n      case 90:\n        outline = this.#rescaleAndSwap(this.#outline, blX, blY, width, height);\n        points = this.#rescaleAndSwap(this.#points, blX, blY, width, height);\n        break;\n      case 180:\n        outline = this.#rescale(this.#outline, trX, blY, -width, height);\n        points = this.#rescale(this.#points, trX, blY, -width, height);\n        break;\n      case 270:\n        outline = this.#rescaleAndSwap(this.#outline, trX, trY, -width, -height);\n        points = this.#rescaleAndSwap(this.#points, trX, trY, -width, -height);\n        break;\n    }\n    return {\n      outline: Array.from(outline),\n      points: [Array.from(points)]\n    };\n  }\n  #rescale(src, tx, ty, sx, sy) {\n    const dest = new Float64Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i] * sx;\n      dest[i + 1] = ty + src[i + 1] * sy;\n    }\n    return dest;\n  }\n  #rescaleAndSwap(src, tx, ty, sx, sy) {\n    const dest = new Float64Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i + 1] * sx;\n      dest[i + 1] = ty + src[i] * sy;\n    }\n    return dest;\n  }\n  #computeMinMax(isLTR) {\n    const outline = this.#outline;\n    let lastX = outline[4];\n    let lastY = outline[5];\n    let minX = lastX;\n    let minY = lastY;\n    let maxX = lastX;\n    let maxY = lastY;\n    let lastPointX = lastX;\n    let lastPointY = lastY;\n    const ltrCallback = isLTR ? Math.max : Math.min;\n    for (let i = 6, ii = outline.length; i < ii; i += 6) {\n      if (isNaN(outline[i])) {\n        minX = Math.min(minX, outline[i + 4]);\n        minY = Math.min(minY, outline[i + 5]);\n        maxX = Math.max(maxX, outline[i + 4]);\n        maxY = Math.max(maxY, outline[i + 5]);\n        if (lastPointY < outline[i + 5]) {\n          lastPointX = outline[i + 4];\n          lastPointY = outline[i + 5];\n        } else if (lastPointY === outline[i + 5]) {\n          lastPointX = ltrCallback(lastPointX, outline[i + 4]);\n        }\n      } else {\n        const bbox = Util.bezierBoundingBox(lastX, lastY, ...outline.slice(i, i + 6));\n        minX = Math.min(minX, bbox[0]);\n        minY = Math.min(minY, bbox[1]);\n        maxX = Math.max(maxX, bbox[2]);\n        maxY = Math.max(maxY, bbox[3]);\n        if (lastPointY < bbox[3]) {\n          lastPointX = bbox[2];\n          lastPointY = bbox[3];\n        } else if (lastPointY === bbox[3]) {\n          lastPointX = ltrCallback(lastPointX, bbox[2]);\n        }\n      }\n      lastX = outline[i + 4];\n      lastY = outline[i + 5];\n    }\n    const x = minX - this.#innerMargin,\n      y = minY - this.#innerMargin,\n      width = maxX - minX + 2 * this.#innerMargin,\n      height = maxY - minY + 2 * this.#innerMargin;\n    this.#bbox = {\n      x,\n      y,\n      width,\n      height,\n      lastPoint: [lastPointX, lastPointY]\n    };\n  }\n  get box() {\n    return this.#bbox;\n  }\n  getNewOutline(thickness, innerMargin) {\n    const {\n      x,\n      y,\n      width,\n      height\n    } = this.#bbox;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const sx = width * layerWidth;\n    const sy = height * layerHeight;\n    const tx = x * layerWidth + layerX;\n    const ty = y * layerHeight + layerY;\n    const outliner = new FreeOutliner({\n      x: this.#points[0] * sx + tx,\n      y: this.#points[1] * sy + ty\n    }, this.#box, this.#scaleFactor, thickness, this.#isLTR, innerMargin ?? this.#innerMargin);\n    for (let i = 2; i < this.#points.length; i += 2) {\n      outliner.add({\n        x: this.#points[i] * sx + tx,\n        y: this.#points[i + 1] * sy + ty\n      });\n    }\n    return outliner.getOutlines();\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/editor/color_picker.js\n\n\n\nclass ColorPicker {\n  #boundKeyDown = this.#keyDown.bind(this);\n  #boundPointerDown = this.#pointerDown.bind(this);\n  #button = null;\n  #buttonSwatch = null;\n  #defaultColor;\n  #dropdown = null;\n  #dropdownWasFromKeyboard = false;\n  #isMainColorPicker = false;\n  #editor = null;\n  #eventBus;\n  #uiManager = null;\n  #type;\n  static get _keyboardManager() {\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"Escape\", \"mac+Escape\"], ColorPicker.prototype._hideDropdownFromKeyboard], [[\" \", \"mac+ \"], ColorPicker.prototype._colorSelectFromKeyboard], [[\"ArrowDown\", \"ArrowRight\", \"mac+ArrowDown\", \"mac+ArrowRight\"], ColorPicker.prototype._moveToNext], [[\"ArrowUp\", \"ArrowLeft\", \"mac+ArrowUp\", \"mac+ArrowLeft\"], ColorPicker.prototype._moveToPrevious], [[\"Home\", \"mac+Home\"], ColorPicker.prototype._moveToBeginning], [[\"End\", \"mac+End\"], ColorPicker.prototype._moveToEnd]]));\n  }\n  constructor({\n    editor = null,\n    uiManager = null\n  }) {\n    if (editor) {\n      this.#isMainColorPicker = false;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_COLOR;\n      this.#editor = editor;\n    } else {\n      this.#isMainColorPicker = true;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR;\n    }\n    this.#uiManager = editor?._uiManager || uiManager;\n    this.#eventBus = this.#uiManager._eventBus;\n    this.#defaultColor = editor?.color || this.#uiManager?.highlightColors.values().next().value || \"#FFFF98\";\n  }\n  renderButton() {\n    const button = this.#button = document.createElement(\"button\");\n    button.className = \"colorPicker\";\n    button.tabIndex = \"0\";\n    button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-button\");\n    button.setAttribute(\"aria-haspopup\", true);\n    button.addEventListener(\"click\", this.#openDropdown.bind(this));\n    button.addEventListener(\"keydown\", this.#boundKeyDown);\n    const swatch = this.#buttonSwatch = document.createElement(\"span\");\n    swatch.className = \"swatch\";\n    swatch.setAttribute(\"aria-hidden\", true);\n    swatch.style.backgroundColor = this.#defaultColor;\n    button.append(swatch);\n    return button;\n  }\n  renderMainDropdown() {\n    const dropdown = this.#dropdown = this.#getDropdownRoot();\n    dropdown.setAttribute(\"aria-orientation\", \"horizontal\");\n    dropdown.setAttribute(\"aria-labelledby\", \"highlightColorPickerLabel\");\n    return dropdown;\n  }\n  #getDropdownRoot() {\n    const div = document.createElement(\"div\");\n    div.addEventListener(\"contextmenu\", noContextMenu);\n    div.className = \"dropdown\";\n    div.role = \"listbox\";\n    div.setAttribute(\"aria-multiselectable\", false);\n    div.setAttribute(\"aria-orientation\", \"vertical\");\n    div.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-dropdown\");\n    for (const [name, color] of this.#uiManager.highlightColors) {\n      const button = document.createElement(\"button\");\n      button.tabIndex = \"0\";\n      button.role = \"option\";\n      button.setAttribute(\"data-color\", color);\n      button.title = name;\n      button.setAttribute(\"data-l10n-id\", `pdfjs-editor-colorpicker-${name}`);\n      const swatch = document.createElement(\"span\");\n      button.append(swatch);\n      swatch.className = \"swatch\";\n      swatch.style.backgroundColor = color;\n      button.setAttribute(\"aria-selected\", color === this.#defaultColor);\n      button.addEventListener(\"click\", this.#colorSelect.bind(this, color));\n      div.append(button);\n    }\n    div.addEventListener(\"keydown\", this.#boundKeyDown);\n    return div;\n  }\n  #colorSelect(color, event) {\n    event.stopPropagation();\n    this.#eventBus.dispatch(\"switchannotationeditorparams\", {\n      source: this,\n      type: this.#type,\n      value: color\n    });\n  }\n  _colorSelectFromKeyboard(event) {\n    if (event.target === this.#button) {\n      this.#openDropdown(event);\n      return;\n    }\n    const color = event.target.getAttribute(\"data-color\");\n    if (!color) {\n      return;\n    }\n    this.#colorSelect(color, event);\n  }\n  _moveToNext(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    if (event.target === this.#button) {\n      this.#dropdown.firstChild?.focus();\n      return;\n    }\n    event.target.nextSibling?.focus();\n  }\n  _moveToPrevious(event) {\n    if (event.target === this.#dropdown?.firstChild || event.target === this.#button) {\n      if (this.#isDropdownVisible) {\n        this._hideDropdownFromKeyboard();\n      }\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n    }\n    event.target.previousSibling?.focus();\n  }\n  _moveToBeginning(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.firstChild?.focus();\n  }\n  _moveToEnd(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.lastChild?.focus();\n  }\n  #keyDown(event) {\n    ColorPicker._keyboardManager.exec(this, event);\n  }\n  #openDropdown(event) {\n    if (this.#isDropdownVisible) {\n      this.hideDropdown();\n      return;\n    }\n    this.#dropdownWasFromKeyboard = event.detail === 0;\n    window.addEventListener(\"pointerdown\", this.#boundPointerDown);\n    if (this.#dropdown) {\n      this.#dropdown.classList.remove(\"hidden\");\n      return;\n    }\n    const root = this.#dropdown = this.#getDropdownRoot();\n    this.#button.append(root);\n  }\n  #pointerDown(event) {\n    if (this.#dropdown?.contains(event.target)) {\n      return;\n    }\n    this.hideDropdown();\n  }\n  hideDropdown() {\n    this.#dropdown?.classList.add(\"hidden\");\n    window.removeEventListener(\"pointerdown\", this.#boundPointerDown);\n  }\n  get #isDropdownVisible() {\n    return this.#dropdown && !this.#dropdown.classList.contains(\"hidden\");\n  }\n  _hideDropdownFromKeyboard() {\n    if (this.#isMainColorPicker) {\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#editor?.unselect();\n      return;\n    }\n    this.hideDropdown();\n    this.#button.focus({\n      preventScroll: true,\n      focusVisible: this.#dropdownWasFromKeyboard\n    });\n  }\n  updateColor(color) {\n    if (this.#buttonSwatch) {\n      this.#buttonSwatch.style.backgroundColor = color;\n    }\n    if (!this.#dropdown) {\n      return;\n    }\n    const i = this.#uiManager.highlightColors.values();\n    for (const child of this.#dropdown.children) {\n      child.setAttribute(\"aria-selected\", i.next().value === color);\n    }\n  }\n  destroy() {\n    this.#button?.remove();\n    this.#button = null;\n    this.#buttonSwatch = null;\n    this.#dropdown?.remove();\n    this.#dropdown = null;\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/editor/highlight.js\n\n\n\n\n\n\nclass HighlightEditor extends AnnotationEditor {\n  #anchorNode = null;\n  #anchorOffset = 0;\n  #boxes;\n  #clipPathId = null;\n  #colorPicker = null;\n  #focusOutlines = null;\n  #focusNode = null;\n  #focusOffset = 0;\n  #highlightDiv = null;\n  #highlightOutlines = null;\n  #id = null;\n  #isFreeHighlight = false;\n  #boundKeydown = this.#keydown.bind(this);\n  #lastPoint = null;\n  #opacity;\n  #outlineId = null;\n  #text = \"\";\n  #thickness;\n  #methodOfCreation = \"\";\n  static _defaultColor = null;\n  static _defaultOpacity = 1;\n  static _defaultThickness = 12;\n  static _l10nPromise;\n  static _type = \"highlight\";\n  static _editorType = AnnotationEditorType.HIGHLIGHT;\n  static _freeHighlightId = -1;\n  static _freeHighlight = null;\n  static _freeHighlightClipId = \"\";\n  static get _keyboardManager() {\n    const proto = HighlightEditor.prototype;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._moveCaret, {\n      args: [0]\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto._moveCaret, {\n      args: [1]\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto._moveCaret, {\n      args: [2]\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto._moveCaret, {\n      args: [3]\n    }]]));\n  }\n  constructor(params) {\n    super({\n      ...params,\n      name: \"highlightEditor\"\n    });\n    this.color = params.color || HighlightEditor._defaultColor;\n    this.#thickness = params.thickness || HighlightEditor._defaultThickness;\n    this.#opacity = params.opacity || HighlightEditor._defaultOpacity;\n    this.#boxes = params.boxes || null;\n    this.#methodOfCreation = params.methodOfCreation || \"\";\n    this.#text = params.text || \"\";\n    this._isDraggable = false;\n    if (params.highlightId > -1) {\n      this.#isFreeHighlight = true;\n      this.#createFreeOutlines(params);\n      this.#addToDrawLayer();\n    } else {\n      this.#anchorNode = params.anchorNode;\n      this.#anchorOffset = params.anchorOffset;\n      this.#focusNode = params.focusNode;\n      this.#focusOffset = params.focusOffset;\n      this.#createOutlines();\n      this.#addToDrawLayer();\n      this.rotate(this.rotation);\n    }\n  }\n  get telemetryInitialData() {\n    return {\n      action: \"added\",\n      type: this.#isFreeHighlight ? \"free_highlight\" : \"highlight\",\n      color: this._uiManager.highlightColorNames.get(this.color),\n      thickness: this.#thickness,\n      methodOfCreation: this.#methodOfCreation\n    };\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"highlight\",\n      color: this._uiManager.highlightColorNames.get(this.color)\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    return {\n      numberOfColors: data.get(\"color\").size\n    };\n  }\n  #createOutlines() {\n    const outliner = new Outliner(this.#boxes, 0.001);\n    this.#highlightOutlines = outliner.getOutlines();\n    ({\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height\n    } = this.#highlightOutlines.box);\n    const outlinerForOutline = new Outliner(this.#boxes, 0.0025, 0.001, this._uiManager.direction === \"ltr\");\n    this.#focusOutlines = outlinerForOutline.getOutlines();\n    const {\n      lastPoint\n    } = this.#focusOutlines.box;\n    this.#lastPoint = [(lastPoint[0] - this.x) / this.width, (lastPoint[1] - this.y) / this.height];\n  }\n  #createFreeOutlines({\n    highlightOutlines,\n    highlightId,\n    clipPathId\n  }) {\n    this.#highlightOutlines = highlightOutlines;\n    const extraThickness = 1.5;\n    this.#focusOutlines = highlightOutlines.getNewOutline(this.#thickness / 2 + extraThickness, 0.0025);\n    if (highlightId >= 0) {\n      this.#id = highlightId;\n      this.#clipPathId = clipPathId;\n      this.parent.drawLayer.finalizeLine(highlightId, highlightOutlines);\n      this.#outlineId = this.parent.drawLayer.highlightOutline(this.#focusOutlines);\n    } else if (this.parent) {\n      const angle = this.parent.viewport.rotation;\n      this.parent.drawLayer.updateLine(this.#id, highlightOutlines);\n      this.parent.drawLayer.updateBox(this.#id, HighlightEditor.#rotateBbox(this.#highlightOutlines.box, (angle - this.rotation + 360) % 360));\n      this.parent.drawLayer.updateLine(this.#outlineId, this.#focusOutlines);\n      this.parent.drawLayer.updateBox(this.#outlineId, HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle));\n    }\n    const {\n      x,\n      y,\n      width,\n      height\n    } = highlightOutlines.box;\n    switch (this.rotation) {\n      case 0:\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 90:\n        {\n          const [pageWidth, pageHeight] = this.parentDimensions;\n          this.x = y;\n          this.y = 1 - x;\n          this.width = width * pageHeight / pageWidth;\n          this.height = height * pageWidth / pageHeight;\n          break;\n        }\n      case 180:\n        this.x = 1 - x;\n        this.y = 1 - y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 270:\n        {\n          const [pageWidth, pageHeight] = this.parentDimensions;\n          this.x = 1 - y;\n          this.y = x;\n          this.width = width * pageHeight / pageWidth;\n          this.height = height * pageWidth / pageHeight;\n          break;\n        }\n    }\n    const {\n      lastPoint\n    } = this.#focusOutlines.box;\n    this.#lastPoint = [(lastPoint[0] - x) / width, (lastPoint[1] - y) / height];\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    HighlightEditor._defaultColor ||= uiManager.highlightColors?.values().next().value || \"#fff066\";\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        HighlightEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        HighlightEditor._defaultThickness = value;\n        break;\n    }\n  }\n  translateInPage(x, y) {}\n  get toolbarPosition() {\n    return this.#lastPoint;\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        this.#updateThickness(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR, HighlightEditor._defaultColor], [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, HighlightEditor._defaultThickness]];\n  }\n  get propertiesToUpdate() {\n    return [[AnnotationEditorParamsType.HIGHLIGHT_COLOR, this.color || HighlightEditor._defaultColor], [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, this.#thickness || HighlightEditor._defaultThickness], [AnnotationEditorParamsType.HIGHLIGHT_FREE, this.#isFreeHighlight]];\n  }\n  #updateColor(color) {\n    const setColor = col => {\n      this.color = col;\n      this.parent?.drawLayer.changeColor(this.#id, col);\n      this.#colorPicker?.updateColor(col);\n    };\n    const savedColor = this.color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n    this._reportTelemetry({\n      action: \"color_changed\",\n      color: this._uiManager.highlightColorNames.get(color)\n    }, true);\n  }\n  #updateThickness(thickness) {\n    const savedThickness = this.#thickness;\n    const setThickness = th => {\n      this.#thickness = th;\n      this.#changeThickness(th);\n    };\n    this.addCommands({\n      cmd: setThickness.bind(this, thickness),\n      undo: setThickness.bind(this, savedThickness),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n    this._reportTelemetry({\n      action: \"thickness_changed\",\n      thickness\n    }, true);\n  }\n  async addEditToolbar() {\n    const toolbar = await super.addEditToolbar();\n    if (!toolbar) {\n      return null;\n    }\n    if (this._uiManager.highlightColors) {\n      this.#colorPicker = new ColorPicker({\n        editor: this\n      });\n      toolbar.addColorPicker(this.#colorPicker);\n    }\n    return toolbar;\n  }\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n  fixAndSetPosition() {\n    return super.fixAndSetPosition(this.#getRotation());\n  }\n  getBaseTranslation() {\n    return [0, 0];\n  }\n  getRect(tx, ty) {\n    return super.getRect(tx, ty, this.#getRotation());\n  }\n  onceAdded() {\n    this.parent.addUndoableEditor(this);\n    this.div.focus();\n  }\n  remove() {\n    this.#cleanDrawLayer();\n    this._reportTelemetry({\n      action: \"deleted\"\n    });\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    this.#addToDrawLayer();\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this.#addToDrawLayer(parent);\n      mustBeSelected = !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    this.show(this._isVisible);\n    if (mustBeSelected) {\n      this.select();\n    }\n  }\n  #changeThickness(thickness) {\n    if (!this.#isFreeHighlight) {\n      return;\n    }\n    this.#createFreeOutlines({\n      highlightOutlines: this.#highlightOutlines.getNewOutline(thickness / 2)\n    });\n    this.fixAndSetPosition();\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n  }\n  #cleanDrawLayer() {\n    if (this.#id === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this.#id);\n    this.#id = null;\n    this.parent.drawLayer.remove(this.#outlineId);\n    this.#outlineId = null;\n  }\n  #addToDrawLayer(parent = this.parent) {\n    if (this.#id !== null) {\n      return;\n    }\n    ({\n      id: this.#id,\n      clipPathId: this.#clipPathId\n    } = parent.drawLayer.highlight(this.#highlightOutlines, this.color, this.#opacity));\n    this.#outlineId = parent.drawLayer.highlightOutline(this.#focusOutlines);\n    if (this.#highlightDiv) {\n      this.#highlightDiv.style.clipPath = this.#clipPathId;\n    }\n  }\n  static #rotateBbox({\n    x,\n    y,\n    width,\n    height\n  }, angle) {\n    switch (angle) {\n      case 90:\n        return {\n          x: 1 - y - height,\n          y: x,\n          width: height,\n          height: width\n        };\n      case 180:\n        return {\n          x: 1 - x - width,\n          y: 1 - y - height,\n          width,\n          height\n        };\n      case 270:\n        return {\n          x: y,\n          y: 1 - x - width,\n          width: height,\n          height: width\n        };\n    }\n    return {\n      x,\n      y,\n      width,\n      height\n    };\n  }\n  rotate(angle) {\n    const {\n      drawLayer\n    } = this.parent;\n    let box;\n    if (this.#isFreeHighlight) {\n      angle = (angle - this.rotation + 360) % 360;\n      box = HighlightEditor.#rotateBbox(this.#highlightOutlines.box, angle);\n    } else {\n      box = HighlightEditor.#rotateBbox(this, angle);\n    }\n    drawLayer.rotate(this.#id, angle);\n    drawLayer.rotate(this.#outlineId, angle);\n    drawLayer.updateBox(this.#id, box);\n    drawLayer.updateBox(this.#outlineId, HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle));\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    const div = super.render();\n    if (this.#text) {\n      div.setAttribute(\"aria-label\", this.#text);\n      div.setAttribute(\"role\", \"mark\");\n    }\n    if (this.#isFreeHighlight) {\n      div.classList.add(\"free\");\n    } else {\n      this.div.addEventListener(\"keydown\", this.#boundKeydown);\n    }\n    const highlightDiv = this.#highlightDiv = document.createElement(\"div\");\n    div.append(highlightDiv);\n    highlightDiv.setAttribute(\"aria-hidden\", \"true\");\n    highlightDiv.className = \"internal\";\n    highlightDiv.style.clipPath = this.#clipPathId;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n    bindEvents(this, this.#highlightDiv, [\"pointerover\", \"pointerleave\"]);\n    this.enableEditing();\n    return div;\n  }\n  pointerover() {\n    this.parent.drawLayer.addClass(this.#outlineId, \"hovered\");\n  }\n  pointerleave() {\n    this.parent.drawLayer.removeClass(this.#outlineId, \"hovered\");\n  }\n  #keydown(event) {\n    HighlightEditor._keyboardManager.exec(this, event);\n  }\n  _moveCaret(direction) {\n    this.parent.unselect(this);\n    switch (direction) {\n      case 0:\n      case 2:\n        this.#setCaret(true);\n        break;\n      case 1:\n      case 3:\n        this.#setCaret(false);\n        break;\n    }\n  }\n  #setCaret(start) {\n    if (!this.#anchorNode) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (start) {\n      selection.setPosition(this.#anchorNode, this.#anchorOffset);\n    } else {\n      selection.setPosition(this.#focusNode, this.#focusOffset);\n    }\n  }\n  select() {\n    super.select();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.removeClass(this.#outlineId, \"hovered\");\n    this.parent?.drawLayer.addClass(this.#outlineId, \"selected\");\n  }\n  unselect() {\n    super.unselect();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.removeClass(this.#outlineId, \"selected\");\n    if (!this.#isFreeHighlight) {\n      this.#setCaret(false);\n    }\n  }\n  get _mustFixPosition() {\n    return !this.#isFreeHighlight;\n  }\n  show(visible = this._isVisible) {\n    super.show(visible);\n    if (this.parent) {\n      this.parent.drawLayer.show(this.#id, visible);\n      this.parent.drawLayer.show(this.#outlineId, visible);\n    }\n  }\n  #getRotation() {\n    return this.#isFreeHighlight ? this.rotation : 0;\n  }\n  #serializeBoxes() {\n    if (this.#isFreeHighlight) {\n      return null;\n    }\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const boxes = this.#boxes;\n    const quadPoints = new Array(boxes.length * 8);\n    let i = 0;\n    for (const {\n      x,\n      y,\n      width,\n      height\n    } of boxes) {\n      const sx = x * pageWidth;\n      const sy = (1 - y - height) * pageHeight;\n      quadPoints[i] = quadPoints[i + 4] = sx;\n      quadPoints[i + 1] = quadPoints[i + 3] = sy;\n      quadPoints[i + 2] = quadPoints[i + 6] = sx + width * pageWidth;\n      quadPoints[i + 5] = quadPoints[i + 7] = sy + height * pageHeight;\n      i += 8;\n    }\n    return quadPoints;\n  }\n  #serializeOutlines(rect) {\n    return this.#highlightOutlines.serialize(rect, this.#getRotation());\n  }\n  static startHighlighting(parent, isLTR, {\n    target: textLayer,\n    x,\n    y\n  }) {\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight\n    } = textLayer.getBoundingClientRect();\n    const pointerMove = e => {\n      this.#highlightMove(parent, e);\n    };\n    const pointerDownOptions = {\n      capture: true,\n      passive: false\n    };\n    const pointerDown = e => {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n    const pointerUpCallback = e => {\n      textLayer.removeEventListener(\"pointermove\", pointerMove);\n      window.removeEventListener(\"blur\", pointerUpCallback);\n      window.removeEventListener(\"pointerup\", pointerUpCallback);\n      window.removeEventListener(\"pointerdown\", pointerDown, pointerDownOptions);\n      window.removeEventListener(\"contextmenu\", noContextMenu);\n      this.#endHighlight(parent, e);\n    };\n    window.addEventListener(\"blur\", pointerUpCallback);\n    window.addEventListener(\"pointerup\", pointerUpCallback);\n    window.addEventListener(\"pointerdown\", pointerDown, pointerDownOptions);\n    window.addEventListener(\"contextmenu\", noContextMenu);\n    textLayer.addEventListener(\"pointermove\", pointerMove);\n    this._freeHighlight = new FreeOutliner({\n      x,\n      y\n    }, [layerX, layerY, parentWidth, parentHeight], parent.scale, this._defaultThickness / 2, isLTR, 0.001);\n    ({\n      id: this._freeHighlightId,\n      clipPathId: this._freeHighlightClipId\n    } = parent.drawLayer.highlight(this._freeHighlight, this._defaultColor, this._defaultOpacity, true));\n  }\n  static #highlightMove(parent, event) {\n    if (this._freeHighlight.add(event)) {\n      parent.drawLayer.updatePath(this._freeHighlightId, this._freeHighlight);\n    }\n  }\n  static #endHighlight(parent, event) {\n    if (!this._freeHighlight.isEmpty()) {\n      parent.createAndAddNewEditor(event, false, {\n        highlightId: this._freeHighlightId,\n        highlightOutlines: this._freeHighlight.getOutlines(),\n        clipPathId: this._freeHighlightClipId,\n        methodOfCreation: \"main_toolbar\"\n      });\n    } else {\n      parent.drawLayer.removeFreeHighlight(this._freeHighlightId);\n    }\n    this._freeHighlightId = -1;\n    this._freeHighlight = null;\n    this._freeHighlightClipId = \"\";\n  }\n  static deserialize(data, parent, uiManager) {\n    const editor = super.deserialize(data, parent, uiManager);\n    const {\n      rect: [blX, blY, trX, trY],\n      color,\n      quadPoints\n    } = data;\n    editor.color = Util.makeHexColor(...color);\n    editor.#opacity = data.opacity;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    editor.width = (trX - blX) / pageWidth;\n    editor.height = (trY - blY) / pageHeight;\n    const boxes = editor.#boxes = [];\n    for (let i = 0; i < quadPoints.length; i += 8) {\n      boxes.push({\n        x: (quadPoints[4] - trX) / pageWidth,\n        y: (trY - (1 - quadPoints[i + 5])) / pageHeight,\n        width: (quadPoints[i + 2] - quadPoints[i]) / pageWidth,\n        height: (quadPoints[i + 5] - quadPoints[i + 1]) / pageHeight\n      });\n    }\n    editor.#createOutlines();\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty() || isForCopying) {\n      return null;\n    }\n    const rect = this.getRect(0, 0);\n    const color = AnnotationEditor._colorManager.convert(this.color);\n    return {\n      annotationType: AnnotationEditorType.HIGHLIGHT,\n      color,\n      opacity: this.#opacity,\n      thickness: this.#thickness,\n      quadPoints: this.#serializeBoxes(),\n      outlines: this.#serializeOutlines(rect),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.#getRotation(),\n      structTreeParentId: this._structTreeParentId\n    };\n  }\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/editor/ink.js\n\n\n\n\n\nclass InkEditor extends AnnotationEditor {\n  #baseHeight = 0;\n  #baseWidth = 0;\n  #boundCanvasPointermove = this.canvasPointermove.bind(this);\n  #boundCanvasPointerleave = this.canvasPointerleave.bind(this);\n  #boundCanvasPointerup = this.canvasPointerup.bind(this);\n  #boundCanvasPointerdown = this.canvasPointerdown.bind(this);\n  #canvasContextMenuTimeoutId = null;\n  #currentPath2D = new Path2D();\n  #disableEditing = false;\n  #hasSomethingToDraw = false;\n  #isCanvasInitialized = false;\n  #observer = null;\n  #realWidth = 0;\n  #realHeight = 0;\n  #requestFrameCallback = null;\n  static _defaultColor = null;\n  static _defaultOpacity = 1;\n  static _defaultThickness = 1;\n  static _type = \"ink\";\n  static _editorType = AnnotationEditorType.INK;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"inkEditor\"\n    });\n    this.color = params.color || null;\n    this.thickness = params.thickness || null;\n    this.opacity = params.opacity || null;\n    this.paths = [];\n    this.bezierPath2D = [];\n    this.allRawPaths = [];\n    this.currentPath = [];\n    this.scaleFactor = 1;\n    this.translationX = this.translationY = 0;\n    this.x = 0;\n    this.y = 0;\n    this._willKeepAspectRatio = true;\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.INK_THICKNESS:\n        InkEditor._defaultThickness = value;\n        break;\n      case AnnotationEditorParamsType.INK_COLOR:\n        InkEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.INK_OPACITY:\n        InkEditor._defaultOpacity = value / 100;\n        break;\n    }\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.INK_THICKNESS:\n        this.#updateThickness(value);\n        break;\n      case AnnotationEditorParamsType.INK_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.INK_OPACITY:\n        this.#updateOpacity(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[AnnotationEditorParamsType.INK_THICKNESS, InkEditor._defaultThickness], [AnnotationEditorParamsType.INK_COLOR, InkEditor._defaultColor || AnnotationEditor._defaultLineColor], [AnnotationEditorParamsType.INK_OPACITY, Math.round(InkEditor._defaultOpacity * 100)]];\n  }\n  get propertiesToUpdate() {\n    return [[AnnotationEditorParamsType.INK_THICKNESS, this.thickness || InkEditor._defaultThickness], [AnnotationEditorParamsType.INK_COLOR, this.color || InkEditor._defaultColor || AnnotationEditor._defaultLineColor], [AnnotationEditorParamsType.INK_OPACITY, Math.round(100 * (this.opacity ?? InkEditor._defaultOpacity))]];\n  }\n  #updateThickness(thickness) {\n    const setThickness = th => {\n      this.thickness = th;\n      this.#fitToContent();\n    };\n    const savedThickness = this.thickness;\n    this.addCommands({\n      cmd: setThickness.bind(this, thickness),\n      undo: setThickness.bind(this, savedThickness),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  #updateColor(color) {\n    const setColor = col => {\n      this.color = col;\n      this.#redraw();\n    };\n    const savedColor = this.color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  #updateOpacity(opacity) {\n    const setOpacity = op => {\n      this.opacity = op;\n      this.#redraw();\n    };\n    opacity /= 100;\n    const savedOpacity = this.opacity;\n    this.addCommands({\n      cmd: setOpacity.bind(this, opacity),\n      undo: setOpacity.bind(this, savedOpacity),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_OPACITY,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (!this.canvas) {\n      this.#createCanvas();\n      this.#createObserver();\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n      this.#setCanvasDims();\n    }\n    this.#fitToContent();\n  }\n  remove() {\n    if (this.canvas === null) {\n      return;\n    }\n    if (!this.isEmpty()) {\n      this.commit();\n    }\n    this.canvas.width = this.canvas.height = 0;\n    this.canvas.remove();\n    this.canvas = null;\n    if (this.#canvasContextMenuTimeoutId) {\n      clearTimeout(this.#canvasContextMenuTimeoutId);\n      this.#canvasContextMenuTimeoutId = null;\n    }\n    this.#observer.disconnect();\n    this.#observer = null;\n    super.remove();\n  }\n  setParent(parent) {\n    if (!this.parent && parent) {\n      this._uiManager.removeShouldRescale(this);\n    } else if (this.parent && parent === null) {\n      this._uiManager.addShouldRescale(this);\n    }\n    super.setParent(parent);\n  }\n  onScaleChanging() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const width = this.width * parentWidth;\n    const height = this.height * parentHeight;\n    this.setDimensions(width, height);\n  }\n  enableEditMode() {\n    if (this.#disableEditing || this.canvas === null) {\n      return;\n    }\n    super.enableEditMode();\n    this._isDraggable = false;\n    this.canvas.addEventListener(\"pointerdown\", this.#boundCanvasPointerdown);\n  }\n  disableEditMode() {\n    if (!this.isInEditMode() || this.canvas === null) {\n      return;\n    }\n    super.disableEditMode();\n    this._isDraggable = !this.isEmpty();\n    this.div.classList.remove(\"editing\");\n    this.canvas.removeEventListener(\"pointerdown\", this.#boundCanvasPointerdown);\n  }\n  onceAdded() {\n    this._isDraggable = !this.isEmpty();\n  }\n  isEmpty() {\n    return this.paths.length === 0 || this.paths.length === 1 && this.paths[0].length === 0;\n  }\n  #getInitialBBox() {\n    const {\n      parentRotation,\n      parentDimensions: [width, height]\n    } = this;\n    switch (parentRotation) {\n      case 90:\n        return [0, height, height, width];\n      case 180:\n        return [width, height, width, height];\n      case 270:\n        return [width, 0, height, width];\n      default:\n        return [0, 0, width, height];\n    }\n  }\n  #setStroke() {\n    const {\n      ctx,\n      color,\n      opacity,\n      thickness,\n      parentScale,\n      scaleFactor\n    } = this;\n    ctx.lineWidth = thickness * parentScale / scaleFactor;\n    ctx.lineCap = \"round\";\n    ctx.lineJoin = \"round\";\n    ctx.miterLimit = 10;\n    ctx.strokeStyle = `${color}${opacityToHex(opacity)}`;\n  }\n  #startDrawing(x, y) {\n    this.canvas.addEventListener(\"contextmenu\", noContextMenu);\n    this.canvas.addEventListener(\"pointerleave\", this.#boundCanvasPointerleave);\n    this.canvas.addEventListener(\"pointermove\", this.#boundCanvasPointermove);\n    this.canvas.addEventListener(\"pointerup\", this.#boundCanvasPointerup);\n    this.canvas.removeEventListener(\"pointerdown\", this.#boundCanvasPointerdown);\n    this.isEditing = true;\n    if (!this.#isCanvasInitialized) {\n      this.#isCanvasInitialized = true;\n      this.#setCanvasDims();\n      this.thickness ||= InkEditor._defaultThickness;\n      this.color ||= InkEditor._defaultColor || AnnotationEditor._defaultLineColor;\n      this.opacity ??= InkEditor._defaultOpacity;\n    }\n    this.currentPath.push([x, y]);\n    this.#hasSomethingToDraw = false;\n    this.#setStroke();\n    this.#requestFrameCallback = () => {\n      this.#drawPoints();\n      if (this.#requestFrameCallback) {\n        window.requestAnimationFrame(this.#requestFrameCallback);\n      }\n    };\n    window.requestAnimationFrame(this.#requestFrameCallback);\n  }\n  #draw(x, y) {\n    const [lastX, lastY] = this.currentPath.at(-1);\n    if (this.currentPath.length > 1 && x === lastX && y === lastY) {\n      return;\n    }\n    const currentPath = this.currentPath;\n    let path2D = this.#currentPath2D;\n    currentPath.push([x, y]);\n    this.#hasSomethingToDraw = true;\n    if (currentPath.length <= 2) {\n      path2D.moveTo(...currentPath[0]);\n      path2D.lineTo(x, y);\n      return;\n    }\n    if (currentPath.length === 3) {\n      this.#currentPath2D = path2D = new Path2D();\n      path2D.moveTo(...currentPath[0]);\n    }\n    this.#makeBezierCurve(path2D, ...currentPath.at(-3), ...currentPath.at(-2), x, y);\n  }\n  #endPath() {\n    if (this.currentPath.length === 0) {\n      return;\n    }\n    const lastPoint = this.currentPath.at(-1);\n    this.#currentPath2D.lineTo(...lastPoint);\n  }\n  #stopDrawing(x, y) {\n    this.#requestFrameCallback = null;\n    x = Math.min(Math.max(x, 0), this.canvas.width);\n    y = Math.min(Math.max(y, 0), this.canvas.height);\n    this.#draw(x, y);\n    this.#endPath();\n    let bezier;\n    if (this.currentPath.length !== 1) {\n      bezier = this.#generateBezierPoints();\n    } else {\n      const xy = [x, y];\n      bezier = [[xy, xy.slice(), xy.slice(), xy]];\n    }\n    const path2D = this.#currentPath2D;\n    const currentPath = this.currentPath;\n    this.currentPath = [];\n    this.#currentPath2D = new Path2D();\n    const cmd = () => {\n      this.allRawPaths.push(currentPath);\n      this.paths.push(bezier);\n      this.bezierPath2D.push(path2D);\n      this._uiManager.rebuild(this);\n    };\n    const undo = () => {\n      this.allRawPaths.pop();\n      this.paths.pop();\n      this.bezierPath2D.pop();\n      if (this.paths.length === 0) {\n        this.remove();\n      } else {\n        if (!this.canvas) {\n          this.#createCanvas();\n          this.#createObserver();\n        }\n        this.#fitToContent();\n      }\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: true\n    });\n  }\n  #drawPoints() {\n    if (!this.#hasSomethingToDraw) {\n      return;\n    }\n    this.#hasSomethingToDraw = false;\n    const thickness = Math.ceil(this.thickness * this.parentScale);\n    const lastPoints = this.currentPath.slice(-3);\n    const x = lastPoints.map(xy => xy[0]);\n    const y = lastPoints.map(xy => xy[1]);\n    const xMin = Math.min(...x) - thickness;\n    const xMax = Math.max(...x) + thickness;\n    const yMin = Math.min(...y) - thickness;\n    const yMax = Math.max(...y) + thickness;\n    const {\n      ctx\n    } = this;\n    ctx.save();\n    ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    for (const path of this.bezierPath2D) {\n      ctx.stroke(path);\n    }\n    ctx.stroke(this.#currentPath2D);\n    ctx.restore();\n  }\n  #makeBezierCurve(path2D, x0, y0, x1, y1, x2, y2) {\n    const prevX = (x0 + x1) / 2;\n    const prevY = (y0 + y1) / 2;\n    const x3 = (x1 + x2) / 2;\n    const y3 = (y1 + y2) / 2;\n    path2D.bezierCurveTo(prevX + 2 * (x1 - prevX) / 3, prevY + 2 * (y1 - prevY) / 3, x3 + 2 * (x1 - x3) / 3, y3 + 2 * (y1 - y3) / 3, x3, y3);\n  }\n  #generateBezierPoints() {\n    const path = this.currentPath;\n    if (path.length <= 2) {\n      return [[path[0], path[0], path.at(-1), path.at(-1)]];\n    }\n    const bezierPoints = [];\n    let i;\n    let [x0, y0] = path[0];\n    for (i = 1; i < path.length - 2; i++) {\n      const [x1, y1] = path[i];\n      const [x2, y2] = path[i + 1];\n      const x3 = (x1 + x2) / 2;\n      const y3 = (y1 + y2) / 2;\n      const control1 = [x0 + 2 * (x1 - x0) / 3, y0 + 2 * (y1 - y0) / 3];\n      const control2 = [x3 + 2 * (x1 - x3) / 3, y3 + 2 * (y1 - y3) / 3];\n      bezierPoints.push([[x0, y0], control1, control2, [x3, y3]]);\n      [x0, y0] = [x3, y3];\n    }\n    const [x1, y1] = path[i];\n    const [x2, y2] = path[i + 1];\n    const control1 = [x0 + 2 * (x1 - x0) / 3, y0 + 2 * (y1 - y0) / 3];\n    const control2 = [x2 + 2 * (x1 - x2) / 3, y2 + 2 * (y1 - y2) / 3];\n    bezierPoints.push([[x0, y0], control1, control2, [x2, y2]]);\n    return bezierPoints;\n  }\n  #redraw() {\n    if (this.isEmpty()) {\n      this.#updateTransform();\n      return;\n    }\n    this.#setStroke();\n    const {\n      canvas,\n      ctx\n    } = this;\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    this.#updateTransform();\n    for (const path of this.bezierPath2D) {\n      ctx.stroke(path);\n    }\n  }\n  commit() {\n    if (this.#disableEditing) {\n      return;\n    }\n    super.commit();\n    this.isEditing = false;\n    this.disableEditMode();\n    this.setInForeground();\n    this.#disableEditing = true;\n    this.div.classList.add(\"disabled\");\n    this.#fitToContent(true);\n    this.select();\n    this.parent.addInkEditorIfNeeded(true);\n    this.moveInDOM();\n    this.div.focus({\n      preventScroll: true\n    });\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    this.enableEditMode();\n  }\n  canvasPointerdown(event) {\n    if (event.button !== 0 || !this.isInEditMode() || this.#disableEditing) {\n      return;\n    }\n    this.setInForeground();\n    event.preventDefault();\n    if (!this.div.contains(document.activeElement)) {\n      this.div.focus({\n        preventScroll: true\n      });\n    }\n    this.#startDrawing(event.offsetX, event.offsetY);\n  }\n  canvasPointermove(event) {\n    event.preventDefault();\n    this.#draw(event.offsetX, event.offsetY);\n  }\n  canvasPointerup(event) {\n    event.preventDefault();\n    this.#endDrawing(event);\n  }\n  canvasPointerleave(event) {\n    this.#endDrawing(event);\n  }\n  #endDrawing(event) {\n    this.canvas.removeEventListener(\"pointerleave\", this.#boundCanvasPointerleave);\n    this.canvas.removeEventListener(\"pointermove\", this.#boundCanvasPointermove);\n    this.canvas.removeEventListener(\"pointerup\", this.#boundCanvasPointerup);\n    this.canvas.addEventListener(\"pointerdown\", this.#boundCanvasPointerdown);\n    if (this.#canvasContextMenuTimeoutId) {\n      clearTimeout(this.#canvasContextMenuTimeoutId);\n    }\n    this.#canvasContextMenuTimeoutId = setTimeout(() => {\n      this.#canvasContextMenuTimeoutId = null;\n      this.canvas.removeEventListener(\"contextmenu\", noContextMenu);\n    }, 10);\n    this.#stopDrawing(event.offsetX, event.offsetY);\n    this.addToAnnotationStorage();\n    this.setInBackground();\n  }\n  #createCanvas() {\n    this.canvas = document.createElement(\"canvas\");\n    this.canvas.width = this.canvas.height = 0;\n    this.canvas.className = \"inkEditorCanvas\";\n    this.canvas.setAttribute(\"data-l10n-id\", \"pdfjs-ink-canvas\");\n    this.div.append(this.canvas);\n    this.ctx = this.canvas.getContext(\"2d\");\n  }\n  #createObserver() {\n    this.#observer = new ResizeObserver(entries => {\n      const rect = entries[0].contentRect;\n      if (rect.width && rect.height) {\n        this.setDimensions(rect.width, rect.height);\n      }\n    });\n    this.#observer.observe(this.div);\n  }\n  get isResizable() {\n    return !this.isEmpty() && this.#disableEditing;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.div.setAttribute(\"data-l10n-id\", \"pdfjs-ink\");\n    const [x, y, w, h] = this.#getInitialBBox();\n    this.setAt(x, y, 0, 0);\n    this.setDims(w, h);\n    this.#createCanvas();\n    if (this.width) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setAspectRatio(this.width * parentWidth, this.height * parentHeight);\n      this.setAt(baseX * parentWidth, baseY * parentHeight, this.width * parentWidth, this.height * parentHeight);\n      this.#isCanvasInitialized = true;\n      this.#setCanvasDims();\n      this.setDims(this.width * parentWidth, this.height * parentHeight);\n      this.#redraw();\n      this.div.classList.add(\"disabled\");\n    } else {\n      this.div.classList.add(\"editing\");\n      this.enableEditMode();\n    }\n    this.#createObserver();\n    return this.div;\n  }\n  #setCanvasDims() {\n    if (!this.#isCanvasInitialized) {\n      return;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.canvas.width = Math.ceil(this.width * parentWidth);\n    this.canvas.height = Math.ceil(this.height * parentHeight);\n    this.#updateTransform();\n  }\n  setDimensions(width, height) {\n    const roundedWidth = Math.round(width);\n    const roundedHeight = Math.round(height);\n    if (this.#realWidth === roundedWidth && this.#realHeight === roundedHeight) {\n      return;\n    }\n    this.#realWidth = roundedWidth;\n    this.#realHeight = roundedHeight;\n    this.canvas.style.visibility = \"hidden\";\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n    this.fixAndSetPosition();\n    if (this.#disableEditing) {\n      this.#setScaleFactor(width, height);\n    }\n    this.#setCanvasDims();\n    this.#redraw();\n    this.canvas.style.visibility = \"visible\";\n    this.fixDims();\n  }\n  #setScaleFactor(width, height) {\n    const padding = this.#getPadding();\n    const scaleFactorW = (width - padding) / this.#baseWidth;\n    const scaleFactorH = (height - padding) / this.#baseHeight;\n    this.scaleFactor = Math.min(scaleFactorW, scaleFactorH);\n  }\n  #updateTransform() {\n    const padding = this.#getPadding() / 2;\n    this.ctx.setTransform(this.scaleFactor, 0, 0, this.scaleFactor, this.translationX * this.scaleFactor + padding, this.translationY * this.scaleFactor + padding);\n  }\n  static #buildPath2D(bezier) {\n    const path2D = new Path2D();\n    for (let i = 0, ii = bezier.length; i < ii; i++) {\n      const [first, control1, control2, second] = bezier[i];\n      if (i === 0) {\n        path2D.moveTo(...first);\n      }\n      path2D.bezierCurveTo(control1[0], control1[1], control2[0], control2[1], second[0], second[1]);\n    }\n    return path2D;\n  }\n  static #toPDFCoordinates(points, rect, rotation) {\n    const [blX, blY, trX, trY] = rect;\n    switch (rotation) {\n      case 0:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] += blX;\n          points[i + 1] = trY - points[i + 1];\n        }\n        break;\n      case 90:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = points[i + 1] + blX;\n          points[i + 1] = x + blY;\n        }\n        break;\n      case 180:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] = trX - points[i];\n          points[i + 1] += blY;\n        }\n        break;\n      case 270:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = trX - points[i + 1];\n          points[i + 1] = trY - x;\n        }\n        break;\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n    return points;\n  }\n  static #fromPDFCoordinates(points, rect, rotation) {\n    const [blX, blY, trX, trY] = rect;\n    switch (rotation) {\n      case 0:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] -= blX;\n          points[i + 1] = trY - points[i + 1];\n        }\n        break;\n      case 90:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = points[i + 1] - blY;\n          points[i + 1] = x - blX;\n        }\n        break;\n      case 180:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          points[i] = trX - points[i];\n          points[i + 1] -= blY;\n        }\n        break;\n      case 270:\n        for (let i = 0, ii = points.length; i < ii; i += 2) {\n          const x = points[i];\n          points[i] = trY - points[i + 1];\n          points[i + 1] = trX - x;\n        }\n        break;\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n    return points;\n  }\n  #serializePaths(s, tx, ty, rect) {\n    const paths = [];\n    const padding = this.thickness / 2;\n    const shiftX = s * tx + padding;\n    const shiftY = s * ty + padding;\n    for (const bezier of this.paths) {\n      const buffer = [];\n      const points = [];\n      for (let j = 0, jj = bezier.length; j < jj; j++) {\n        const [first, control1, control2, second] = bezier[j];\n        if (first[0] === second[0] && first[1] === second[1] && jj === 1) {\n          const p0 = s * first[0] + shiftX;\n          const p1 = s * first[1] + shiftY;\n          buffer.push(p0, p1);\n          points.push(p0, p1);\n          break;\n        }\n        const p10 = s * first[0] + shiftX;\n        const p11 = s * first[1] + shiftY;\n        const p20 = s * control1[0] + shiftX;\n        const p21 = s * control1[1] + shiftY;\n        const p30 = s * control2[0] + shiftX;\n        const p31 = s * control2[1] + shiftY;\n        const p40 = s * second[0] + shiftX;\n        const p41 = s * second[1] + shiftY;\n        if (j === 0) {\n          buffer.push(p10, p11);\n          points.push(p10, p11);\n        }\n        buffer.push(p20, p21, p30, p31, p40, p41);\n        points.push(p20, p21);\n        if (j === jj - 1) {\n          points.push(p40, p41);\n        }\n      }\n      paths.push({\n        bezier: InkEditor.#toPDFCoordinates(buffer, rect, this.rotation),\n        points: InkEditor.#toPDFCoordinates(points, rect, this.rotation)\n      });\n    }\n    return paths;\n  }\n  #getBbox() {\n    let xMin = Infinity;\n    let xMax = -Infinity;\n    let yMin = Infinity;\n    let yMax = -Infinity;\n    for (const path of this.paths) {\n      for (const [first, control1, control2, second] of path) {\n        const bbox = Util.bezierBoundingBox(...first, ...control1, ...control2, ...second);\n        xMin = Math.min(xMin, bbox[0]);\n        yMin = Math.min(yMin, bbox[1]);\n        xMax = Math.max(xMax, bbox[2]);\n        yMax = Math.max(yMax, bbox[3]);\n      }\n    }\n    return [xMin, yMin, xMax, yMax];\n  }\n  #getPadding() {\n    return this.#disableEditing ? Math.ceil(this.thickness * this.parentScale) : 0;\n  }\n  #fitToContent(firstTime = false) {\n    if (this.isEmpty()) {\n      return;\n    }\n    if (!this.#disableEditing) {\n      this.#redraw();\n      return;\n    }\n    const bbox = this.#getBbox();\n    const padding = this.#getPadding();\n    this.#baseWidth = Math.max(AnnotationEditor.MIN_SIZE, bbox[2] - bbox[0]);\n    this.#baseHeight = Math.max(AnnotationEditor.MIN_SIZE, bbox[3] - bbox[1]);\n    const width = Math.ceil(padding + this.#baseWidth * this.scaleFactor);\n    const height = Math.ceil(padding + this.#baseHeight * this.scaleFactor);\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n    this.setAspectRatio(width, height);\n    const prevTranslationX = this.translationX;\n    const prevTranslationY = this.translationY;\n    this.translationX = -bbox[0];\n    this.translationY = -bbox[1];\n    this.#setCanvasDims();\n    this.#redraw();\n    this.#realWidth = width;\n    this.#realHeight = height;\n    this.setDims(width, height);\n    const unscaledPadding = firstTime ? padding / this.scaleFactor / 2 : 0;\n    this.translate(prevTranslationX - this.translationX - unscaledPadding, prevTranslationY - this.translationY - unscaledPadding);\n  }\n  static deserialize(data, parent, uiManager) {\n    if (data instanceof InkAnnotationElement) {\n      return null;\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n    editor.thickness = data.thickness;\n    editor.color = Util.makeHexColor(...data.color);\n    editor.opacity = data.opacity;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const width = editor.width * pageWidth;\n    const height = editor.height * pageHeight;\n    const scaleFactor = editor.parentScale;\n    const padding = data.thickness / 2;\n    editor.#disableEditing = true;\n    editor.#realWidth = Math.round(width);\n    editor.#realHeight = Math.round(height);\n    const {\n      paths,\n      rect,\n      rotation\n    } = data;\n    for (let {\n      bezier\n    } of paths) {\n      bezier = InkEditor.#fromPDFCoordinates(bezier, rect, rotation);\n      const path = [];\n      editor.paths.push(path);\n      let p0 = scaleFactor * (bezier[0] - padding);\n      let p1 = scaleFactor * (bezier[1] - padding);\n      for (let i = 2, ii = bezier.length; i < ii; i += 6) {\n        const p10 = scaleFactor * (bezier[i] - padding);\n        const p11 = scaleFactor * (bezier[i + 1] - padding);\n        const p20 = scaleFactor * (bezier[i + 2] - padding);\n        const p21 = scaleFactor * (bezier[i + 3] - padding);\n        const p30 = scaleFactor * (bezier[i + 4] - padding);\n        const p31 = scaleFactor * (bezier[i + 5] - padding);\n        path.push([[p0, p1], [p10, p11], [p20, p21], [p30, p31]]);\n        p0 = p30;\n        p1 = p31;\n      }\n      const path2D = this.#buildPath2D(path);\n      editor.bezierPath2D.push(path2D);\n    }\n    const bbox = editor.#getBbox();\n    editor.#baseWidth = Math.max(AnnotationEditor.MIN_SIZE, bbox[2] - bbox[0]);\n    editor.#baseHeight = Math.max(AnnotationEditor.MIN_SIZE, bbox[3] - bbox[1]);\n    editor.#setScaleFactor(width, height);\n    return editor;\n  }\n  serialize() {\n    if (this.isEmpty()) {\n      return null;\n    }\n    const rect = this.getRect(0, 0);\n    const color = AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);\n    return {\n      annotationType: AnnotationEditorType.INK,\n      color,\n      thickness: this.thickness,\n      opacity: this.opacity,\n      paths: this.#serializePaths(this.scaleFactor / this.parentScale, this.translationX, this.translationY, rect),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/editor/stamp.js\n\n\n\n\nclass StampEditor extends AnnotationEditor {\n  #bitmap = null;\n  #bitmapId = null;\n  #bitmapPromise = null;\n  #bitmapUrl = null;\n  #bitmapFile = null;\n  #bitmapFileName = \"\";\n  #canvas = null;\n  #observer = null;\n  #resizeTimeoutId = null;\n  #isSvg = false;\n  #hasBeenAddedInUndoStack = false;\n  static _type = \"stamp\";\n  static _editorType = AnnotationEditorType.STAMP;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"stampEditor\"\n    });\n    this.#bitmapUrl = params.bitmapUrl;\n    this.#bitmapFile = params.bitmapFile;\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n  }\n  static get supportedTypes() {\n    const types = [\"apng\", \"avif\", \"bmp\", \"gif\", \"jpeg\", \"png\", \"svg+xml\", \"webp\", \"x-icon\"];\n    return shadow(this, \"supportedTypes\", types.map(type => `image/${type}`));\n  }\n  static get supportedTypesStr() {\n    return shadow(this, \"supportedTypesStr\", this.supportedTypes.join(\",\"));\n  }\n  static isHandlingMimeForPasting(mime) {\n    return this.supportedTypes.includes(mime);\n  }\n  static paste(item, parent) {\n    parent.pasteEditor(AnnotationEditorType.STAMP, {\n      bitmapFile: item.getAsFile()\n    });\n  }\n  #getBitmapFetched(data, fromId = false) {\n    if (!data) {\n      this.remove();\n      return;\n    }\n    this.#bitmap = data.bitmap;\n    if (!fromId) {\n      this.#bitmapId = data.id;\n      this.#isSvg = data.isSvg;\n    }\n    if (data.file) {\n      this.#bitmapFileName = data.file.name;\n    }\n    this.#createCanvas();\n  }\n  #getBitmapDone() {\n    this.#bitmapPromise = null;\n    this._uiManager.enableWaiting(false);\n    if (this.#canvas) {\n      this.div.focus();\n    }\n  }\n  #getBitmap() {\n    if (this.#bitmapId) {\n      this._uiManager.enableWaiting(true);\n      this._uiManager.imageManager.getFromId(this.#bitmapId).then(data => this.#getBitmapFetched(data, true)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapUrl) {\n      const url = this.#bitmapUrl;\n      this.#bitmapUrl = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager.getFromUrl(url).then(data => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapFile) {\n      const file = this.#bitmapFile;\n      this.#bitmapFile = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager.getFromFile(file).then(data => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = StampEditor.supportedTypesStr;\n    this.#bitmapPromise = new Promise(resolve => {\n      input.addEventListener(\"change\", async () => {\n        if (!input.files || input.files.length === 0) {\n          this.remove();\n        } else {\n          this._uiManager.enableWaiting(true);\n          const data = await this._uiManager.imageManager.getFromFile(input.files[0]);\n          this.#getBitmapFetched(data);\n        }\n        resolve();\n      });\n      input.addEventListener(\"cancel\", () => {\n        this.remove();\n        resolve();\n      });\n    }).finally(() => this.#getBitmapDone());\n    input.click();\n  }\n  remove() {\n    if (this.#bitmapId) {\n      this.#bitmap = null;\n      this._uiManager.imageManager.deleteId(this.#bitmapId);\n      this.#canvas?.remove();\n      this.#canvas = null;\n      this.#observer?.disconnect();\n      this.#observer = null;\n      if (this.#resizeTimeoutId) {\n        clearTimeout(this.#resizeTimeoutId);\n        this.#resizeTimeoutId = null;\n      }\n    }\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      if (this.#bitmapId) {\n        this.#getBitmap();\n      }\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (this.#bitmapId && this.#canvas === null) {\n      this.#getBitmap();\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  onceAdded() {\n    this._isDraggable = true;\n    this.div.focus();\n  }\n  isEmpty() {\n    return !(this.#bitmapPromise || this.#bitmap || this.#bitmapUrl || this.#bitmapFile || this.#bitmapId);\n  }\n  get isResizable() {\n    return true;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this.width) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.div.hidden = true;\n    this.addAltTextButton();\n    if (this.#bitmap) {\n      this.#createCanvas();\n    } else {\n      this.#getBitmap();\n    }\n    if (this.width) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setAt(baseX * parentWidth, baseY * parentHeight, this.width * parentWidth, this.height * parentHeight);\n    }\n    return this.div;\n  }\n  #createCanvas() {\n    const {\n      div\n    } = this;\n    let {\n      width,\n      height\n    } = this.#bitmap;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const MAX_RATIO = 0.75;\n    if (this.width) {\n      width = this.width * pageWidth;\n      height = this.height * pageHeight;\n    } else if (width > MAX_RATIO * pageWidth || height > MAX_RATIO * pageHeight) {\n      const factor = Math.min(MAX_RATIO * pageWidth / width, MAX_RATIO * pageHeight / height);\n      width *= factor;\n      height *= factor;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(width * parentWidth / pageWidth, height * parentHeight / pageHeight);\n    this._uiManager.enableWaiting(false);\n    const canvas = this.#canvas = document.createElement(\"canvas\");\n    div.append(canvas);\n    div.hidden = false;\n    this.#drawBitmap(width, height);\n    this.#createObserver();\n    if (!this.#hasBeenAddedInUndoStack) {\n      this.parent.addUndoableEditor(this);\n      this.#hasBeenAddedInUndoStack = true;\n    }\n    this._reportTelemetry({\n      action: \"inserted_image\"\n    });\n    if (this.#bitmapFileName) {\n      canvas.setAttribute(\"aria-label\", this.#bitmapFileName);\n    }\n  }\n  #setDimensions(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.width = width / parentWidth;\n    this.height = height / parentHeight;\n    this.setDims(width, height);\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    } else {\n      this.fixAndSetPosition();\n    }\n    this._initialOptions = null;\n    if (this.#resizeTimeoutId !== null) {\n      clearTimeout(this.#resizeTimeoutId);\n    }\n    const TIME_TO_WAIT = 200;\n    this.#resizeTimeoutId = setTimeout(() => {\n      this.#resizeTimeoutId = null;\n      this.#drawBitmap(width, height);\n    }, TIME_TO_WAIT);\n  }\n  #scaleBitmap(width, height) {\n    const {\n      width: bitmapWidth,\n      height: bitmapHeight\n    } = this.#bitmap;\n    let newWidth = bitmapWidth;\n    let newHeight = bitmapHeight;\n    let bitmap = this.#bitmap;\n    while (newWidth > 2 * width || newHeight > 2 * height) {\n      const prevWidth = newWidth;\n      const prevHeight = newHeight;\n      if (newWidth > 2 * width) {\n        newWidth = newWidth >= 16384 ? Math.floor(newWidth / 2) - 1 : Math.ceil(newWidth / 2);\n      }\n      if (newHeight > 2 * height) {\n        newHeight = newHeight >= 16384 ? Math.floor(newHeight / 2) - 1 : Math.ceil(newHeight / 2);\n      }\n      const offscreen = new OffscreenCanvas(newWidth, newHeight);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);\n      bitmap = offscreen.transferToImageBitmap();\n    }\n    return bitmap;\n  }\n  #drawBitmap(width, height) {\n    width = Math.ceil(width);\n    height = Math.ceil(height);\n    const canvas = this.#canvas;\n    if (!canvas || canvas.width === width && canvas.height === height) {\n      return;\n    }\n    canvas.width = width;\n    canvas.height = height;\n    const bitmap = this.#isSvg ? this.#bitmap : this.#scaleBitmap(width, height);\n    if (this._uiManager.hasMLManager && !this.hasAltText()) {\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, width, height);\n      this._uiManager.mlGuess({\n        service: \"image-to-text\",\n        request: {\n          data: ctx.getImageData(0, 0, width, height).data,\n          width,\n          height,\n          channels: 4\n        }\n      }).then(response => {\n        const altText = response?.output || \"\";\n        if (this.parent && altText && !this.hasAltText()) {\n          this.altTextData = {\n            altText,\n            decorative: false\n          };\n        }\n      });\n    }\n    const ctx = canvas.getContext(\"2d\");\n    ctx.filter = this._uiManager.hcmFilter;\n    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, width, height);\n  }\n  getImageForAltText() {\n    return this.#canvas;\n  }\n  #serializeBitmap(toUrl) {\n    if (toUrl) {\n      if (this.#isSvg) {\n        const url = this._uiManager.imageManager.getSvgUrl(this.#bitmapId);\n        if (url) {\n          return url;\n        }\n      }\n      const canvas = document.createElement(\"canvas\");\n      ({\n        width: canvas.width,\n        height: canvas.height\n      } = this.#bitmap);\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0);\n      return canvas.toDataURL();\n    }\n    if (this.#isSvg) {\n      const [pageWidth, pageHeight] = this.pageDimensions;\n      const width = Math.round(this.width * pageWidth * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const height = Math.round(this.height * pageHeight * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0, this.#bitmap.width, this.#bitmap.height, 0, 0, width, height);\n      return offscreen.transferToImageBitmap();\n    }\n    return structuredClone(this.#bitmap);\n  }\n  #createObserver() {\n    this.#observer = new ResizeObserver(entries => {\n      const rect = entries[0].contentRect;\n      if (rect.width && rect.height) {\n        this.#setDimensions(rect.width, rect.height);\n      }\n    });\n    this.#observer.observe(this.div);\n  }\n  static deserialize(data, parent, uiManager) {\n    if (data instanceof StampAnnotationElement) {\n      return null;\n    }\n    const editor = super.deserialize(data, parent, uiManager);\n    const {\n      rect,\n      bitmapUrl,\n      bitmapId,\n      isSvg,\n      accessibilityData\n    } = data;\n    if (bitmapId && uiManager.imageManager.isValidId(bitmapId)) {\n      editor.#bitmapId = bitmapId;\n    } else {\n      editor.#bitmapUrl = bitmapUrl;\n    }\n    editor.#isSvg = isSvg;\n    const [parentWidth, parentHeight] = editor.pageDimensions;\n    editor.width = (rect[2] - rect[0]) / parentWidth;\n    editor.height = (rect[3] - rect[1]) / parentHeight;\n    if (accessibilityData) {\n      editor.altTextData = accessibilityData;\n    }\n    return editor;\n  }\n  serialize(isForCopying = false, context = null) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    const serialized = {\n      annotationType: AnnotationEditorType.STAMP,\n      bitmapId: this.#bitmapId,\n      pageIndex: this.pageIndex,\n      rect: this.getRect(0, 0),\n      rotation: this.rotation,\n      isSvg: this.#isSvg,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.bitmapUrl = this.#serializeBitmap(true);\n      serialized.accessibilityData = this.altTextData;\n      return serialized;\n    }\n    const {\n      decorative,\n      altText\n    } = this.altTextData;\n    if (!decorative && altText) {\n      serialized.accessibilityData = {\n        type: \"Figure\",\n        alt: altText\n      };\n    }\n    if (context === null) {\n      return serialized;\n    }\n    context.stamps ||= new Map();\n    const area = this.#isSvg ? (serialized.rect[2] - serialized.rect[0]) * (serialized.rect[3] - serialized.rect[1]) : null;\n    if (!context.stamps.has(this.#bitmapId)) {\n      context.stamps.set(this.#bitmapId, {\n        area,\n        serialized\n      });\n      serialized.bitmap = this.#serializeBitmap(false);\n    } else if (this.#isSvg) {\n      const prevData = context.stamps.get(this.#bitmapId);\n      if (area > prevData.area) {\n        prevData.area = area;\n        prevData.serialized.bitmap.close();\n        prevData.serialized.bitmap = this.#serializeBitmap(false);\n      }\n    }\n    return serialized;\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/editor/annotation_editor_layer.js\n\n\n\n\n\n\n\nclass AnnotationEditorLayer {\n  #accessibilityManager;\n  #allowClick = false;\n  #annotationLayer = null;\n  #boundPointerup = null;\n  #boundPointerdown = null;\n  #boundTextLayerPointerDown = null;\n  #editorFocusTimeoutId = null;\n  #editors = new Map();\n  #hadPointerDown = false;\n  #isCleaningUp = false;\n  #isDisabling = false;\n  #textLayer = null;\n  #uiManager;\n  static _initialized = false;\n  static #editorTypes = new Map([FreeTextEditor, InkEditor, StampEditor, HighlightEditor].map(type => [type._editorType, type]));\n  constructor({\n    uiManager,\n    pageIndex,\n    div,\n    accessibilityManager,\n    annotationLayer,\n    drawLayer,\n    textLayer,\n    viewport,\n    l10n\n  }) {\n    const editorTypes = [...AnnotationEditorLayer.#editorTypes.values()];\n    if (!AnnotationEditorLayer._initialized) {\n      AnnotationEditorLayer._initialized = true;\n      for (const editorType of editorTypes) {\n        editorType.initialize(l10n, uiManager);\n      }\n    }\n    uiManager.registerEditorTypes(editorTypes);\n    this.#uiManager = uiManager;\n    this.pageIndex = pageIndex;\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationLayer = annotationLayer;\n    this.viewport = viewport;\n    this.#textLayer = textLayer;\n    this.drawLayer = drawLayer;\n    this.#uiManager.addLayer(this);\n  }\n  get isEmpty() {\n    return this.#editors.size === 0;\n  }\n  get isInvisible() {\n    return this.isEmpty && this.#uiManager.getMode() === AnnotationEditorType.NONE;\n  }\n  updateToolbar(mode) {\n    this.#uiManager.updateToolbar(mode);\n  }\n  updateMode(mode = this.#uiManager.getMode()) {\n    this.#cleanup();\n    switch (mode) {\n      case AnnotationEditorType.NONE:\n        this.disableTextSelection();\n        this.togglePointerEvents(false);\n        this.toggleAnnotationLayerPointerEvents(true);\n        this.disableClick();\n        return;\n      case AnnotationEditorType.INK:\n        this.addInkEditorIfNeeded(false);\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.disableClick();\n        break;\n      case AnnotationEditorType.HIGHLIGHT:\n        this.enableTextSelection();\n        this.togglePointerEvents(false);\n        this.disableClick();\n        break;\n      default:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n    }\n    this.toggleAnnotationLayerPointerEvents(false);\n    const {\n      classList\n    } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.toggle(`${editorType._type}Editing`, mode === editorType._editorType);\n    }\n    this.div.hidden = false;\n  }\n  hasTextLayer(textLayer) {\n    return textLayer === this.#textLayer?.div;\n  }\n  addInkEditorIfNeeded(isCommitting) {\n    if (this.#uiManager.getMode() !== AnnotationEditorType.INK) {\n      return;\n    }\n    if (!isCommitting) {\n      for (const editor of this.#editors.values()) {\n        if (editor.isEmpty()) {\n          editor.setInBackground();\n          return;\n        }\n      }\n    }\n    const editor = this.createAndAddNewEditor({\n      offsetX: 0,\n      offsetY: 0\n    }, false);\n    editor.setInBackground();\n  }\n  setEditingState(isEditing) {\n    this.#uiManager.setEditingState(isEditing);\n  }\n  addCommands(params) {\n    this.#uiManager.addCommands(params);\n  }\n  togglePointerEvents(enabled = false) {\n    this.div.classList.toggle(\"disabled\", !enabled);\n  }\n  toggleAnnotationLayerPointerEvents(enabled = false) {\n    this.#annotationLayer?.div.classList.toggle(\"disabled\", !enabled);\n  }\n  enable() {\n    this.div.tabIndex = 0;\n    this.togglePointerEvents(true);\n    const annotationElementIds = new Set();\n    for (const editor of this.#editors.values()) {\n      editor.enableEditing();\n      editor.show(true);\n      if (editor.annotationElementId) {\n        this.#uiManager.removeChangedExistingAnnotation(editor);\n        annotationElementIds.add(editor.annotationElementId);\n      }\n    }\n    if (!this.#annotationLayer) {\n      return;\n    }\n    const editables = this.#annotationLayer.getEditableAnnotations();\n    for (const editable of editables) {\n      editable.hide();\n      if (this.#uiManager.isDeletedAnnotationElement(editable.data.id)) {\n        continue;\n      }\n      if (annotationElementIds.has(editable.data.id)) {\n        continue;\n      }\n      const editor = this.deserialize(editable);\n      if (!editor) {\n        continue;\n      }\n      this.addOrRebuild(editor);\n      editor.enableEditing();\n    }\n  }\n  disable() {\n    this.#isDisabling = true;\n    this.div.tabIndex = -1;\n    this.togglePointerEvents(false);\n    const changedAnnotations = new Map();\n    const resetAnnotations = new Map();\n    for (const editor of this.#editors.values()) {\n      editor.disableEditing();\n      if (!editor.annotationElementId) {\n        continue;\n      }\n      if (editor.serialize() !== null) {\n        changedAnnotations.set(editor.annotationElementId, editor);\n        continue;\n      } else {\n        resetAnnotations.set(editor.annotationElementId, editor);\n      }\n      this.getEditableAnnotation(editor.annotationElementId)?.show();\n      editor.remove();\n    }\n    if (this.#annotationLayer) {\n      const editables = this.#annotationLayer.getEditableAnnotations();\n      for (const editable of editables) {\n        const {\n          id\n        } = editable.data;\n        if (this.#uiManager.isDeletedAnnotationElement(id)) {\n          continue;\n        }\n        let editor = resetAnnotations.get(id);\n        if (editor) {\n          editor.resetAnnotationElement(editable);\n          editor.show(false);\n          editable.show();\n          continue;\n        }\n        editor = changedAnnotations.get(id);\n        if (editor) {\n          this.#uiManager.addChangedExistingAnnotation(editor);\n          editor.renderAnnotationElement(editable);\n          editor.show(false);\n        }\n        editable.show();\n      }\n    }\n    this.#cleanup();\n    if (this.isEmpty) {\n      this.div.hidden = true;\n    }\n    const {\n      classList\n    } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.remove(`${editorType._type}Editing`);\n    }\n    this.disableTextSelection();\n    this.toggleAnnotationLayerPointerEvents(true);\n    this.#isDisabling = false;\n  }\n  getEditableAnnotation(id) {\n    return this.#annotationLayer?.getEditableAnnotation(id) || null;\n  }\n  setActiveEditor(editor) {\n    const currentActive = this.#uiManager.getActive();\n    if (currentActive === editor) {\n      return;\n    }\n    this.#uiManager.setActiveEditor(editor);\n  }\n  enableTextSelection() {\n    this.div.tabIndex = -1;\n    if (this.#textLayer?.div && !this.#boundTextLayerPointerDown) {\n      this.#boundTextLayerPointerDown = this.#textLayerPointerDown.bind(this);\n      this.#textLayer.div.addEventListener(\"pointerdown\", this.#boundTextLayerPointerDown);\n      this.#textLayer.div.classList.add(\"highlighting\");\n    }\n  }\n  disableTextSelection() {\n    this.div.tabIndex = 0;\n    if (this.#textLayer?.div && this.#boundTextLayerPointerDown) {\n      this.#textLayer.div.removeEventListener(\"pointerdown\", this.#boundTextLayerPointerDown);\n      this.#boundTextLayerPointerDown = null;\n      this.#textLayer.div.classList.remove(\"highlighting\");\n    }\n  }\n  #textLayerPointerDown(event) {\n    this.#uiManager.unselectAll();\n    if (event.target === this.#textLayer.div) {\n      const {\n        isMac\n      } = util_FeatureTest.platform;\n      if (event.button !== 0 || event.ctrlKey && isMac) {\n        return;\n      }\n      this.#uiManager.showAllEditors(\"highlight\", true, true);\n      this.#textLayer.div.classList.add(\"free\");\n      HighlightEditor.startHighlighting(this, this.#uiManager.direction === \"ltr\", event);\n      this.#textLayer.div.addEventListener(\"pointerup\", () => {\n        this.#textLayer.div.classList.remove(\"free\");\n      }, {\n        once: true\n      });\n      event.preventDefault();\n    }\n  }\n  enableClick() {\n    if (this.#boundPointerdown) {\n      return;\n    }\n    this.#boundPointerdown = this.pointerdown.bind(this);\n    this.#boundPointerup = this.pointerup.bind(this);\n    this.div.addEventListener(\"pointerdown\", this.#boundPointerdown);\n    this.div.addEventListener(\"pointerup\", this.#boundPointerup);\n  }\n  disableClick() {\n    if (!this.#boundPointerdown) {\n      return;\n    }\n    this.div.removeEventListener(\"pointerdown\", this.#boundPointerdown);\n    this.div.removeEventListener(\"pointerup\", this.#boundPointerup);\n    this.#boundPointerdown = null;\n    this.#boundPointerup = null;\n  }\n  attach(editor) {\n    this.#editors.set(editor.id, editor);\n    const {\n      annotationElementId\n    } = editor;\n    if (annotationElementId && this.#uiManager.isDeletedAnnotationElement(annotationElementId)) {\n      this.#uiManager.removeDeletedAnnotationElement(editor);\n    }\n  }\n  detach(editor) {\n    this.#editors.delete(editor.id);\n    this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n    if (!this.#isDisabling && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor);\n    }\n  }\n  remove(editor) {\n    this.detach(editor);\n    this.#uiManager.removeEditor(editor);\n    editor.div.remove();\n    editor.isAttachedToDOM = false;\n    if (!this.#isCleaningUp) {\n      this.addInkEditorIfNeeded(false);\n    }\n  }\n  changeParent(editor) {\n    if (editor.parent === this) {\n      return;\n    }\n    if (editor.parent && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor.annotationElementId);\n      AnnotationEditor.deleteAnnotationElement(editor);\n      editor.annotationElementId = null;\n    }\n    this.attach(editor);\n    editor.parent?.detach(editor);\n    editor.setParent(this);\n    if (editor.div && editor.isAttachedToDOM) {\n      editor.div.remove();\n      this.div.append(editor.div);\n    }\n  }\n  add(editor) {\n    if (editor.parent === this && editor.isAttachedToDOM) {\n      return;\n    }\n    this.changeParent(editor);\n    this.#uiManager.addEditor(editor);\n    this.attach(editor);\n    if (!editor.isAttachedToDOM) {\n      const div = editor.render();\n      this.div.append(div);\n      editor.isAttachedToDOM = true;\n    }\n    editor.fixAndSetPosition();\n    editor.onceAdded();\n    this.#uiManager.addToAnnotationStorage(editor);\n    editor._reportTelemetry(editor.telemetryInitialData);\n  }\n  moveEditorInDOM(editor) {\n    if (!editor.isAttachedToDOM) {\n      return;\n    }\n    const {\n      activeElement\n    } = document;\n    if (editor.div.contains(activeElement) && !this.#editorFocusTimeoutId) {\n      editor._focusEventsAllowed = false;\n      this.#editorFocusTimeoutId = setTimeout(() => {\n        this.#editorFocusTimeoutId = null;\n        if (!editor.div.contains(document.activeElement)) {\n          editor.div.addEventListener(\"focusin\", () => {\n            editor._focusEventsAllowed = true;\n          }, {\n            once: true\n          });\n          activeElement.focus();\n        } else {\n          editor._focusEventsAllowed = true;\n        }\n      }, 0);\n    }\n    editor._structTreeParentId = this.#accessibilityManager?.moveElementInDOM(this.div, editor.div, editor.contentDiv, true);\n  }\n  addOrRebuild(editor) {\n    if (editor.needsToBeRebuilt()) {\n      editor.parent ||= this;\n      editor.rebuild();\n      editor.show();\n    } else {\n      this.add(editor);\n    }\n  }\n  addUndoableEditor(editor) {\n    const cmd = () => editor._uiManager.rebuild(editor);\n    const undo = () => {\n      editor.remove();\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: false\n    });\n  }\n  getNextId() {\n    return this.#uiManager.getId();\n  }\n  get #currentEditorType() {\n    return AnnotationEditorLayer.#editorTypes.get(this.#uiManager.getMode());\n  }\n  #createNewEditor(params) {\n    const editorType = this.#currentEditorType;\n    return editorType ? new editorType.prototype.constructor(params) : null;\n  }\n  canCreateNewEmptyEditor() {\n    return this.#currentEditorType?.canCreateNewEmptyEditor();\n  }\n  pasteEditor(mode, params) {\n    this.#uiManager.updateToolbar(mode);\n    this.#uiManager.updateMode(mode);\n    const {\n      offsetX,\n      offsetY\n    } = this.#getCenterPoint();\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: offsetX,\n      y: offsetY,\n      uiManager: this.#uiManager,\n      isCentered: true,\n      ...params\n    });\n    if (editor) {\n      this.add(editor);\n    }\n  }\n  deserialize(data) {\n    return AnnotationEditorLayer.#editorTypes.get(data.annotationType ?? data.annotationEditorType)?.deserialize(data, this, this.#uiManager) || null;\n  }\n  createAndAddNewEditor(event, isCentered, data = {}) {\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: event.offsetX,\n      y: event.offsetY,\n      uiManager: this.#uiManager,\n      isCentered,\n      ...data\n    });\n    if (editor) {\n      this.add(editor);\n    }\n    return editor;\n  }\n  #getCenterPoint() {\n    const {\n      x,\n      y,\n      width,\n      height\n    } = this.div.getBoundingClientRect();\n    const tlX = Math.max(0, x);\n    const tlY = Math.max(0, y);\n    const brX = Math.min(window.innerWidth, x + width);\n    const brY = Math.min(window.innerHeight, y + height);\n    const centerX = (tlX + brX) / 2 - x;\n    const centerY = (tlY + brY) / 2 - y;\n    const [offsetX, offsetY] = this.viewport.rotation % 180 === 0 ? [centerX, centerY] : [centerY, centerX];\n    return {\n      offsetX,\n      offsetY\n    };\n  }\n  addNewEditor() {\n    this.createAndAddNewEditor(this.#getCenterPoint(), true);\n  }\n  setSelected(editor) {\n    this.#uiManager.setSelected(editor);\n  }\n  toggleSelected(editor) {\n    this.#uiManager.toggleSelected(editor);\n  }\n  isSelected(editor) {\n    return this.#uiManager.isSelected(editor);\n  }\n  unselect(editor) {\n    this.#uiManager.unselect(editor);\n  }\n  pointerup(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    if (!this.#hadPointerDown) {\n      return;\n    }\n    this.#hadPointerDown = false;\n    if (!this.#allowClick) {\n      this.#allowClick = true;\n      return;\n    }\n    if (this.#uiManager.getMode() === AnnotationEditorType.STAMP) {\n      this.#uiManager.unselectAll();\n      return;\n    }\n    this.createAndAddNewEditor(event, false);\n  }\n  pointerdown(event) {\n    if (this.#uiManager.getMode() === AnnotationEditorType.HIGHLIGHT) {\n      this.enableTextSelection();\n    }\n    if (this.#hadPointerDown) {\n      this.#hadPointerDown = false;\n      return;\n    }\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    this.#hadPointerDown = true;\n    const editor = this.#uiManager.getActive();\n    this.#allowClick = !editor || editor.isEmpty();\n  }\n  findNewParent(editor, x, y) {\n    const layer = this.#uiManager.findParent(x, y);\n    if (layer === null || layer === this) {\n      return false;\n    }\n    layer.changeParent(editor);\n    return true;\n  }\n  destroy() {\n    if (this.#uiManager.getActive()?.parent === this) {\n      this.#uiManager.commitOrRemove();\n      this.#uiManager.setActiveEditor(null);\n    }\n    if (this.#editorFocusTimeoutId) {\n      clearTimeout(this.#editorFocusTimeoutId);\n      this.#editorFocusTimeoutId = null;\n    }\n    for (const editor of this.#editors.values()) {\n      this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n      editor.setParent(null);\n      editor.isAttachedToDOM = false;\n      editor.div.remove();\n    }\n    this.div = null;\n    this.#editors.clear();\n    this.#uiManager.removeLayer(this);\n  }\n  #cleanup() {\n    this.#isCleaningUp = true;\n    for (const editor of this.#editors.values()) {\n      if (editor.isEmpty()) {\n        editor.remove();\n      }\n    }\n    this.#isCleaningUp = false;\n  }\n  render({\n    viewport\n  }) {\n    this.viewport = viewport;\n    setLayerDimensions(this.div, viewport);\n    for (const editor of this.#uiManager.getEditors(this.pageIndex)) {\n      this.add(editor);\n      editor.rebuild();\n    }\n    this.updateMode();\n  }\n  update({\n    viewport\n  }) {\n    this.#uiManager.commitOrRemove();\n    this.#cleanup();\n    const oldRotation = this.viewport.rotation;\n    const rotation = viewport.rotation;\n    this.viewport = viewport;\n    setLayerDimensions(this.div, {\n      rotation\n    });\n    if (oldRotation !== rotation) {\n      for (const editor of this.#editors.values()) {\n        editor.rotate(rotation);\n      }\n    }\n    this.addInkEditorIfNeeded(false);\n  }\n  get pageDimensions() {\n    const {\n      pageWidth,\n      pageHeight\n    } = this.viewport.rawDims;\n    return [pageWidth, pageHeight];\n  }\n  get scale() {\n    return this.#uiManager.viewParameters.realScale;\n  }\n}\n\n;// CONCATENATED MODULE: ./src/display/draw_layer.js\n\n\nclass DrawLayer {\n  #parent = null;\n  #id = 0;\n  #mapping = new Map();\n  #toUpdate = new Map();\n  constructor({\n    pageIndex\n  }) {\n    this.pageIndex = pageIndex;\n  }\n  setParent(parent) {\n    if (!this.#parent) {\n      this.#parent = parent;\n      return;\n    }\n    if (this.#parent !== parent) {\n      if (this.#mapping.size > 0) {\n        for (const root of this.#mapping.values()) {\n          root.remove();\n          parent.append(root);\n        }\n      }\n      this.#parent = parent;\n    }\n  }\n  static get _svgFactory() {\n    return shadow(this, \"_svgFactory\", new DOMSVGFactory());\n  }\n  static #setBox(element, {\n    x = 0,\n    y = 0,\n    width = 1,\n    height = 1\n  } = {}) {\n    const {\n      style\n    } = element;\n    style.top = `${100 * y}%`;\n    style.left = `${100 * x}%`;\n    style.width = `${100 * width}%`;\n    style.height = `${100 * height}%`;\n  }\n  #createSVG(box) {\n    const svg = DrawLayer._svgFactory.create(1, 1, true);\n    this.#parent.append(svg);\n    svg.setAttribute(\"aria-hidden\", true);\n    DrawLayer.#setBox(svg, box);\n    return svg;\n  }\n  #createClipPath(defs, pathId) {\n    const clipPath = DrawLayer._svgFactory.createElement(\"clipPath\");\n    defs.append(clipPath);\n    const clipPathId = `clip_${pathId}`;\n    clipPath.setAttribute(\"id\", clipPathId);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    const clipPathUse = DrawLayer._svgFactory.createElement(\"use\");\n    clipPath.append(clipPathUse);\n    clipPathUse.setAttribute(\"href\", `#${pathId}`);\n    clipPathUse.classList.add(\"clip\");\n    return clipPathId;\n  }\n  highlight(outlines, color, opacity, isPathUpdatable = false) {\n    const id = this.#id++;\n    const root = this.#createSVG(outlines.box);\n    root.classList.add(\"highlight\");\n    if (outlines.free) {\n      root.classList.add(\"free\");\n    }\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"d\", outlines.toSVGPath());\n    if (isPathUpdatable) {\n      this.#toUpdate.set(id, path);\n    }\n    const clipPathId = this.#createClipPath(defs, pathId);\n    const use = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use);\n    root.setAttribute(\"fill\", color);\n    root.setAttribute(\"fill-opacity\", opacity);\n    use.setAttribute(\"href\", `#${pathId}`);\n    this.#mapping.set(id, root);\n    return {\n      id,\n      clipPathId: `url(#${clipPathId})`\n    };\n  }\n  highlightOutline(outlines) {\n    const id = this.#id++;\n    const root = this.#createSVG(outlines.box);\n    root.classList.add(\"highlightOutline\");\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"d\", outlines.toSVGPath());\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n    let maskId;\n    if (outlines.free) {\n      root.classList.add(\"free\");\n      const mask = DrawLayer._svgFactory.createElement(\"mask\");\n      defs.append(mask);\n      maskId = `mask_p${this.pageIndex}_${id}`;\n      mask.setAttribute(\"id\", maskId);\n      mask.setAttribute(\"maskUnits\", \"objectBoundingBox\");\n      const rect = DrawLayer._svgFactory.createElement(\"rect\");\n      mask.append(rect);\n      rect.setAttribute(\"width\", \"1\");\n      rect.setAttribute(\"height\", \"1\");\n      rect.setAttribute(\"fill\", \"white\");\n      const use = DrawLayer._svgFactory.createElement(\"use\");\n      mask.append(use);\n      use.setAttribute(\"href\", `#${pathId}`);\n      use.setAttribute(\"stroke\", \"none\");\n      use.setAttribute(\"fill\", \"black\");\n      use.setAttribute(\"fill-rule\", \"nonzero\");\n      use.classList.add(\"mask\");\n    }\n    const use1 = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use1);\n    use1.setAttribute(\"href\", `#${pathId}`);\n    if (maskId) {\n      use1.setAttribute(\"mask\", `url(#${maskId})`);\n    }\n    const use2 = use1.cloneNode();\n    root.append(use2);\n    use1.classList.add(\"mainOutline\");\n    use2.classList.add(\"secondaryOutline\");\n    this.#mapping.set(id, root);\n    return id;\n  }\n  finalizeLine(id, line) {\n    const path = this.#toUpdate.get(id);\n    this.#toUpdate.delete(id);\n    this.updateBox(id, line.box);\n    path.setAttribute(\"d\", line.toSVGPath());\n  }\n  updateLine(id, line) {\n    const root = this.#mapping.get(id);\n    const defs = root.firstChild;\n    const path = defs.firstChild;\n    path.setAttribute(\"d\", line.toSVGPath());\n  }\n  removeFreeHighlight(id) {\n    this.remove(id);\n    this.#toUpdate.delete(id);\n  }\n  updatePath(id, line) {\n    this.#toUpdate.get(id).setAttribute(\"d\", line.toSVGPath());\n  }\n  updateBox(id, box) {\n    DrawLayer.#setBox(this.#mapping.get(id), box);\n  }\n  show(id, visible) {\n    this.#mapping.get(id).classList.toggle(\"hidden\", !visible);\n  }\n  rotate(id, angle) {\n    this.#mapping.get(id).setAttribute(\"data-main-rotation\", angle);\n  }\n  changeColor(id, color) {\n    this.#mapping.get(id).setAttribute(\"fill\", color);\n  }\n  changeOpacity(id, opacity) {\n    this.#mapping.get(id).setAttribute(\"fill-opacity\", opacity);\n  }\n  addClass(id, className) {\n    this.#mapping.get(id).classList.add(className);\n  }\n  removeClass(id, className) {\n    this.#mapping.get(id).classList.remove(className);\n  }\n  remove(id) {\n    if (this.#parent === null) {\n      return;\n    }\n    this.#mapping.get(id).remove();\n    this.#mapping.delete(id);\n  }\n  destroy() {\n    this.#parent = null;\n    for (const root of this.#mapping.values()) {\n      root.remove();\n    }\n    this.#mapping.clear();\n  }\n}\n\n;// CONCATENATED MODULE: ./src/pdf.js\n\n\n\n\n\n\n\n\n\n\n\n\nconst pdfjsVersion = \"4.3.136\";\nconst pdfjsBuild = \"0cec64437\";\n\nvar __webpack_exports__AbortException = __webpack_exports__.AbortException;\nvar __webpack_exports__AnnotationEditorLayer = __webpack_exports__.AnnotationEditorLayer;\nvar __webpack_exports__AnnotationEditorParamsType = __webpack_exports__.AnnotationEditorParamsType;\nvar __webpack_exports__AnnotationEditorType = __webpack_exports__.AnnotationEditorType;\nvar __webpack_exports__AnnotationEditorUIManager = __webpack_exports__.AnnotationEditorUIManager;\nvar __webpack_exports__AnnotationLayer = __webpack_exports__.AnnotationLayer;\nvar __webpack_exports__AnnotationMode = __webpack_exports__.AnnotationMode;\nvar __webpack_exports__CMapCompressionType = __webpack_exports__.CMapCompressionType;\nvar __webpack_exports__ColorPicker = __webpack_exports__.ColorPicker;\nvar __webpack_exports__DOMSVGFactory = __webpack_exports__.DOMSVGFactory;\nvar __webpack_exports__DrawLayer = __webpack_exports__.DrawLayer;\nvar __webpack_exports__FeatureTest = __webpack_exports__.FeatureTest;\nvar __webpack_exports__GlobalWorkerOptions = __webpack_exports__.GlobalWorkerOptions;\nvar __webpack_exports__ImageKind = __webpack_exports__.ImageKind;\nvar __webpack_exports__InvalidPDFException = __webpack_exports__.InvalidPDFException;\nvar __webpack_exports__MissingPDFException = __webpack_exports__.MissingPDFException;\nvar __webpack_exports__OPS = __webpack_exports__.OPS;\nvar __webpack_exports__Outliner = __webpack_exports__.Outliner;\nvar __webpack_exports__PDFDataRangeTransport = __webpack_exports__.PDFDataRangeTransport;\nvar __webpack_exports__PDFDateString = __webpack_exports__.PDFDateString;\nvar __webpack_exports__PDFWorker = __webpack_exports__.PDFWorker;\nvar __webpack_exports__PasswordResponses = __webpack_exports__.PasswordResponses;\nvar __webpack_exports__PermissionFlag = __webpack_exports__.PermissionFlag;\nvar __webpack_exports__PixelsPerInch = __webpack_exports__.PixelsPerInch;\nvar __webpack_exports__RenderingCancelledException = __webpack_exports__.RenderingCancelledException;\nvar __webpack_exports__TextLayer = __webpack_exports__.TextLayer;\nvar __webpack_exports__UnexpectedResponseException = __webpack_exports__.UnexpectedResponseException;\nvar __webpack_exports__Util = __webpack_exports__.Util;\nvar __webpack_exports__VerbosityLevel = __webpack_exports__.VerbosityLevel;\nvar __webpack_exports__XfaLayer = __webpack_exports__.XfaLayer;\nvar __webpack_exports__build = __webpack_exports__.build;\nvar __webpack_exports__createValidAbsoluteUrl = __webpack_exports__.createValidAbsoluteUrl;\nvar __webpack_exports__fetchData = __webpack_exports__.fetchData;\nvar __webpack_exports__getDocument = __webpack_exports__.getDocument;\nvar __webpack_exports__getFilenameFromUrl = __webpack_exports__.getFilenameFromUrl;\nvar __webpack_exports__getPdfFilenameFromUrl = __webpack_exports__.getPdfFilenameFromUrl;\nvar __webpack_exports__getXfaPageViewport = __webpack_exports__.getXfaPageViewport;\nvar __webpack_exports__isDataScheme = __webpack_exports__.isDataScheme;\nvar __webpack_exports__isPdfFile = __webpack_exports__.isPdfFile;\nvar __webpack_exports__noContextMenu = __webpack_exports__.noContextMenu;\nvar __webpack_exports__normalizeUnicode = __webpack_exports__.normalizeUnicode;\nvar __webpack_exports__renderTextLayer = __webpack_exports__.renderTextLayer;\nvar __webpack_exports__setLayerDimensions = __webpack_exports__.setLayerDimensions;\nvar __webpack_exports__shadow = __webpack_exports__.shadow;\nvar __webpack_exports__updateTextLayer = __webpack_exports__.updateTextLayer;\nvar __webpack_exports__version = __webpack_exports__.version;\nexport { __webpack_exports__AbortException as AbortException, __webpack_exports__AnnotationEditorLayer as AnnotationEditorLayer, __webpack_exports__AnnotationEditorParamsType as AnnotationEditorParamsType, __webpack_exports__AnnotationEditorType as AnnotationEditorType, __webpack_exports__AnnotationEditorUIManager as AnnotationEditorUIManager, __webpack_exports__AnnotationLayer as AnnotationLayer, __webpack_exports__AnnotationMode as AnnotationMode, __webpack_exports__CMapCompressionType as CMapCompressionType, __webpack_exports__ColorPicker as ColorPicker, __webpack_exports__DOMSVGFactory as DOMSVGFactory, __webpack_exports__DrawLayer as DrawLayer, __webpack_exports__FeatureTest as FeatureTest, __webpack_exports__GlobalWorkerOptions as GlobalWorkerOptions, __webpack_exports__ImageKind as ImageKind, __webpack_exports__InvalidPDFException as InvalidPDFException, __webpack_exports__MissingPDFException as MissingPDFException, __webpack_exports__OPS as OPS, __webpack_exports__Outliner as Outliner, __webpack_exports__PDFDataRangeTransport as PDFDataRangeTransport, __webpack_exports__PDFDateString as PDFDateString, __webpack_exports__PDFWorker as PDFWorker, __webpack_exports__PasswordResponses as PasswordResponses, __webpack_exports__PermissionFlag as PermissionFlag, __webpack_exports__PixelsPerInch as PixelsPerInch, __webpack_exports__RenderingCancelledException as RenderingCancelledException, __webpack_exports__TextLayer as TextLayer, __webpack_exports__UnexpectedResponseException as UnexpectedResponseException, __webpack_exports__Util as Util, __webpack_exports__VerbosityLevel as VerbosityLevel, __webpack_exports__XfaLayer as XfaLayer, __webpack_exports__build as build, __webpack_exports__createValidAbsoluteUrl as createValidAbsoluteUrl, __webpack_exports__fetchData as fetchData, __webpack_exports__getDocument as getDocument, __webpack_exports__getFilenameFromUrl as getFilenameFromUrl, __webpack_exports__getPdfFilenameFromUrl as getPdfFilenameFromUrl, __webpack_exports__getXfaPageViewport as getXfaPageViewport, __webpack_exports__isDataScheme as isDataScheme, __webpack_exports__isPdfFile as isPdfFile, __webpack_exports__noContextMenu as noContextMenu, __webpack_exports__normalizeUnicode as normalizeUnicode, __webpack_exports__renderTextLayer as renderTextLayer, __webpack_exports__setLayerDimensions as setLayerDimensions, __webpack_exports__shadow as shadow, __webpack_exports__updateTextLayer as updateTextLayer, __webpack_exports__version as version };\n\n//# sourceMappingURL=pdf.mjs.map"],"names":["generatePdfAssetsUrl","assets","assetsUrl","name","pkg","Error","onlinePkgName","DEFAULT_VERSION","initPdfJsWorker","GlobalWorkerOptions","pdfDateStringRegex","exports","definition","key","Object","obj","prop","globalThis","AbortException","AnnotationEditorLayer","AnnotationEditorParamsType","AnnotationEditorType","AnnotationEditorUIManager","AnnotationLayer","AnnotationMode","CMapCompressionType","ColorPicker","DOMSVGFactory","DrawLayer","util_FeatureTest","util_ImageKind","InvalidPDFException","MissingPDFException","OPS","Outliner","PDFDataRangeTransport","PDFDateString","PDFWorker","PasswordResponses","PermissionFlag","PixelsPerInch","RenderingCancelledException","TextLayer","UnexpectedResponseException","Util","VerbosityLevel","XfaLayer","build","createValidAbsoluteUrl","fetchData","getDocument","getFilenameFromUrl","getPdfFilenameFromUrl","getXfaPageViewport","isDataScheme","isPdfFile","noContextMenu","normalizeUnicode","renderTextLayer","setLayerDimensions","shadow","updateTextLayer","version","isNodeJS","process","IDENTITY_MATRIX","FONT_IDENTITY_MATRIX","RenderingIntentFlag","TextRenderingMode","AnnotationType","AnnotationBorderStyleType","verbosity","info","msg","console","warn","unreachable","assert","cond","url","baseUrl","options","dots","stringToUTF8String","str","decodeURIComponent","escape","absoluteUrl","URL","_isValidProtocol","value","nonSerializable","BaseException","message","PasswordException","code","UnknownErrorException","details","status","FormatError","bytesToString","bytes","undefined","length","String","strBuf","i","chunkEnd","Math","chunk","stringToBytes","Uint8Array","objectFromMap","map","isLittleEndian","buffer8","view32","Uint32Array","isEvalSupported","Function","OffscreenCanvas","navigator","hexNumbers","Array","n","r","g","b","transform","minMax","temp","m1","m2","p","m","xt","d","p1","p2","p3","p4","transpose","a","c","first","second","rect","rect1","rect2","xLow","xHigh","yLow","yHigh","x0","x1","x2","x3","y0","y1","y2","y3","t","mt","tt","ttt","x","y","delta","sqrtDelta","a2","NormalizeRegex","NormalizationMap","Map","_","AnnotationPrefix","FontRenderOps","BaseFilterFactory","maps","fgColor","bgColor","filterName","newFgColor","newBgColor","keepHCM","BaseCanvasFactory","width","height","canvas","canvasAndContext","BaseCMapReaderFactory","isCompressed","compressionType","reason","BaseStandardFontDataFactory","filename","BaseSVGFactory","skipDimensions","svg","type","SVG_NS","isValidFetchUrl","document","response","fetch","Promise","resolve","reject","request","XMLHttpRequest","DOMCMapReaderFactory","data","ArrayBuffer","DOMStandardFontDataFactory","PageViewport","viewBox","scale","rotation","offsetX","offsetY","dontFlip","rotateA","rotateB","rotateC","rotateD","offsetCanvasX","offsetCanvasY","centerX","centerY","topLeft","bottomRight","extraDelay","ii","defaultFilename","reFilename","splitURI","reURI","suggestedFilename","StatTimer","Date","outBuf","longest","start","end","protocol","e","deprecated","input","matches","RegExp","year","parseInt","month","day","hour","minute","universalTimeRelation","offsetHour","offsetMinute","xfaPage","getRGB","color","colorRGB","getCurrentTransform","ctx","f","getCurrentTransformInverse","div","viewport","mustFlip","mustRotate","pageWidth","pageHeight","style","useRound","w","h","widthStr","heightStr","EditorToolbar","editor","editToolbar","buttons","position","element","button","divider","colorPicker","HighlightToolbar","uiManager","boxes","isLTR","lastY","lastX","box","parent","span","bindEvents","names","IdManager","ImageManager","getUuid","crypto","buf","image","Image","rawData","mustRemoveAspectRatioPromise","fileReader","FileReader","imageElement","imagePromise","createImageBitmap","file","lastModified","size","id","CommandManager","maxSize","cmd","undo","post","mustExec","NaN","overwriteIfSameType","keepUndo","save","next","KeyboardManager","callbacks","Set","isMac","keys","callback","isMacKey","event","self","bubbles","args","checker","ColorManager","colors","getColorValues","computedColor","window","rgb","RGB","proto","arrowChecker","textInputChecker","_self","el","HTMLInputElement","small","big","HTMLButtonElement","container","viewer","altTextManager","eventBus","pdfDocument","pageColors","highlightColors","enableHighlightFloatingButton","mlManager","layer","clearTimeout","getComputedStyle","pair","pageNumber","layerX","layerY","pagesRotation","anchorNode","Node","methodOfCreation","selection","anchorOffset","focusNode","focusOffset","text","textLayer","anchorElement","pointerup","activeElement","lastEditor","lastActiveElement","editors","serialized","JSON","clipboardData","item","editorType","ex","newEditors","deserializedEditor","isEditing","types","pageIndex","mode","editId","isFromKeyboard","visible","updateButton","mustWait","setTimeout","annotationElementId","ed","params","noCommit","totalX","totalY","mustBeAddedInUndoStack","move","newX","newY","newPageIndex","savedX","savedY","savedPageIndex","tx","ty","rotator","parentWidth","parentHeight","range","annotation","editorId","AltText","l10nPromise","altText","onClick","decorative","enabled","tooltip","AnnotationEditor","resize","parameters","pageX","pageY","fakeEditor","FakeEditor","l10n","_uiManager","parseFloat","_type","_value","mime","target","bx","by","_borderLineWidth","angle","parentScale","scaledWidth","scaledHeight","widthPercent","heightPercent","boundResizerPointermove","savedDraggable","pointerMoveOptions","savedWidth","savedHeight","savedParentCursor","savedCursor","pointerUpCallback","newWidth","newHeight","getPoint","getOpposite","minWidth","minHeight","round","rotationMatrix","transf","invRotationMatrix","isDiagonal","isHorizontal","point","oppositePoint","transfOppositePoint","oppositeX","oppositeY","ratioX","ratioY","deltaX","deltaY","oldDiag","pointerMoveCallback","isSelected","shiftX","shiftY","_angle","isForCopying","context","timeout","children","boundResizerKeydown","boundResizerBlur","firstPosition","nextFirstPosition","child","action","content","firstChild","MurmurHash3_64","seed","blockCounts","tailLength","dataUint32","k1","k2","h1","h2","C1_LOW","C1","C2_LOW","C2","SerializableEmpty","AnnotationStorage","defaultValue","modified","entry","val","PrintAnnotationStorage","hash","transfer","hasBitmap","stats","typeToEditor","editorStats","counters","count","clone","structuredClone","FontLoader","ownerDocument","styleElement","nativeFontFace","rule","styleSheet","_inspectFont","loadedName","src","fontFace","FontFace","font","supported","loadingRequests","otherRequest","atob","int32","offset","spliceString","s","remove","insert","chunk1","called","loadTestFontId","checksum","btoa","isFontReady","imageData","FontFaceObject","translatedData","disableFontFace","inspectFont","css","objs","character","cmds","commands","packageCapability","packageMap","loadPackages","path2d","fs","http","https","NodePackages","node_utils_fetchData","PathType","applyBoundingBox","bbox","region","Path2D","BaseShadingPattern","RadialAxialShadingPattern","IR","grad","colorStop","owner","inverse","pathType","pattern","ownerBBox","tmpCanvas","tmpCtx","domMatrix","DOMMatrix","drawTriangle","c1","c2","c3","tmp","xa","car","cag","cab","xb","cbr","cbg","cbb","coords","rowSize","c1r","c1g","c1b","c2r","c2g","c2b","c3r","c3g","c3b","minY","maxY","k","x1_","x2_","j","MeshShadingPattern","combinedScale","backgroundColor","cachedCanvases","boundsWidth","boundsHeight","scaleX","scaleY","paddedWidth","BORDER_SIZE","paddedHeight","figure","drawFigure","ps","cs","verticesPerRow","rows","cols","q","matrixScale","temporaryPatternCanvas","DummyShadingPattern","PaintType","TilingPattern","canvasGraphicsFactory","baseTransform","operatorList","xstep","ystep","paintType","tilingType","curMatrixScale","dimx","dimy","graphics","adjustedX0","adjustedY0","adjustedX1","adjustedY1","step","realOutputSize","bboxWidth","bboxHeight","current","cssColor","matrix","CachedCanvases","canvasFactory","canvasEntry","drawImageAtIntegerCoords","srcImg","srcX","srcY","srcW","srcH","destX","destY","destW","destH","rTlX","rTlY","rWidth","rHeight","CanvasExtraState","xStrokePad","yStrokePad","intersect","Infinity","putBinaryImageData","imgData","thisChunkHeight","elemsInThisChunk","ImageData","partialChunkHeight","fullChunks","totalChunks","chunkImgData","srcPos","destPos","dest","srcLength","dest32","dest32DataLength","fullSrcDiff","black","srcDiff","kEnd","kEndUnrolled","mask","srcByte","putBinaryImageMask","convertBlackAndWhiteToRGBA","nonBlackColor","inverseDecode","zeroMapping","oneMapping","widthInSource","widthRemainder","max","elem","copyCtxState","sourceCtx","destCtx","property","resetCtxToDefault","filter","getImageSmoothingEnabled","interpolate","actualScale","LINE_CAP_STYLES","LINE_JOIN_STYLES","NORMAL_CLIP","EO_CLIP","CanvasGraphics","canvasCtx","commonObjs","filterFactory","optionalContentConfig","markedContentStack","annotationCanvasMap","fallback","transparency","background","savedFillStyle","transparentCanvas","executionStartIdx","continueCallback","stepper","fnId","argsArray","fnArray","argsArrayLen","chunkOperations","endTime","steps","depObjId","objsPool","cache","HTMLCanvasElement","hcmFilterId","savedFilter","img","inverseTransform","widthScale","heightScale","paintWidth","paintHeight","tmpCanvasId","cacheKey","scaled","maskCanvas","fillColor","isPatternFill","currentTransform","mainKey","cachedImage","maskToCanvas","minX","maxX","drawnWidth","drawnHeight","fillCanvas","fillCtx","limit","dashArray","dashPhase","intent","flatness","states","inSMaskMode","cacheId","scratchCanvas","mirrorContextOperations","cp1x","cp1y","cp2x","cp2y","dirtyBox","smask","suspendedCtx","layerCtx","layerBox","layerOffsetX","layerOffsetY","layerWidth","layerHeight","maskCtx","subtype","backdrop","transferMap","maskOffsetX","maskOffsetY","maskX","maskY","clip","old","ops","startX","startY","isScalingMatrix","minMaxForBezier","xw","yh","consumePath","strokeColor","needRestore","paths","path","spacing","leading","fontRefName","fontObj","typeface","bold","italic","browserFontSize","rise","patternTransform","addToPath","textRenderingMode","fontSize","fillStrokeMode","isAddToPathSet","patternFill","glyphs","fontSizeScale","charSpacing","wordSpacing","fontDirection","textHScale","glyphsLength","vertical","spacingDir","defaultVMetrics","widthAdvanceScale","simpleFillText","lineWidth","chars","glyph","scaledX","scaledY","restoreNeeded","accent","vmetric","vx","vy","measuredWidth","characterScaleX","scaledAccentX","scaledAccentY","spacingLength","fontMatrix","isTextInvisible","transformed","xWidth","yWidth","llx","lly","urx","ury","arguments","objId","getShadingPattern","inv","group","currentCtx","bounds","canvasBounds","groupCtx","currentMtx","hasOwnCanvas","viewportScale","canvasWidth","canvasHeight","compileType3Glyph","j0","POINT_TYPES","width1","points","lineSize","pos","sum","Int32Array","p0","pp","skewX","skewY","positions","trans","images","bitmap","imgToPaint","HTMLElement","tag","properties","clipBox","isEmpty","absDet","normX","normY","scaledLineWidth","scaledXLineWidth","scaledYLineWidth","baseArea","saveRestore","dashes","op","Worker","CallbackKind","StreamKind","wrapReason","MessageHandler","sourceName","targetName","comObj","callbackId","capability","cbSourceName","cbTargetName","result","actionName","handler","ah","transfers","queueingStrategy","streamId","ReadableStream","controller","startCapability","pullCapability","cancelCapability","streamSink","lastDesiredSize","streamController","Metadata","parsedData","INTERNAL","Symbol","OptionalContentGroup","renderingIntent","usage","print","view","internal","userSet","OptionalContentConfig","on","off","array","operator","state","preserveRB","PDFDataTransportStream","pdfDataRangeTransport","disableRange","disableStream","initialData","progressiveDone","contentDispositionFilename","buffer","begin","loaded","total","rangeReader","evt","reader","queuedChunks","PDFDataTransportStreamReader","PDFDataTransportStreamRangeReader","stream","requestCapability","requestsCapability","validateRangeRequestCapabilities","getResponseHeader","isHttp","rangeChunkSize","returnValues","Number","contentEncoding","extractFilenameFromHeader","contentDisposition","getFilenameFromContentDispositionHeader","needsEncodingFixup","toParamRegExp","rfc2616unquote","fixupEncoding","rfc2047decode","rfc5987decode","unescape","rfc2231getparam","contentDispositionStr","match","iter","quot","part","parts","attributePattern","flags","textdecode","encoding","decoder","TextDecoder","quotindex","extvalue","encodingend","langvalue","charset","hex","createResponseStatusError","validateResponseStatus","createFetchOptions","headers","withCredentials","abortController","createHeaders","httpHeaders","Headers","getArrayBuffer","PDFFetchStream","source","PDFFetchStreamReader","PDFFetchStreamRangeReader","AbortController","allowRangeRequests","suggestedLength","done","NetworkManager","listeners","xhr","xhrId","pendingRequest","xhrStatus","network_getArrayBuffer","rangeHeader","PDFNetworkStream","PDFNetworkStreamFullRequestReader","PDFNetworkStreamRangeRequestReader","manager","fullRequestXhrId","fullRequestXhr","fileUriRegex","PDFNodeStream","parseUrl","sourceUrl","parsedUrl","PDFNodeStreamFsFullReader","PDFNodeStreamFullReader","PDFNodeStreamFsRangeReader","PDFNodeStreamRangeReader","BaseFullReader","readableStream","BaseRangeReader","createRequestOptions","handleResponse","error","stat","WeakMap","textContentSource","pump","onBefore","abortEx","items","textDivs","textContentItemsStr","geom","left","top","textDiv","textDivProperties","fontFamily","fontHeight","fontAscent","scaleFactorStr","divStyle","shouldScaleText","absScaleX","absScaleY","br","prevFontSize","prevFontFamily","lang","canvasContext","cachedAscent","savedFont","metrics","ascent","descent","ratio","pixels","DEFAULT_FONT_SIZE","rest","restKeys","promise","XfaText","xfa","output","walk","node","DefaultCanvasFactory","NodeCanvasFactory","DOMCanvasFactory","DefaultCMapReaderFactory","NodeCMapReaderFactory","DefaultFilterFactory","NodeFilterFactory","DOMFilterFactory","docId","mapR","table","mapG","mapB","bufferR","bufferG","bufferB","tableR","tableG","tableB","fgRGB","bgRGB","getSteps","arr","tableA","fgGray","bgGray","newFgRGB","newBgRGB","fg","bg","newStart","newStep","prev","feColorMatrix","feComponentTransfer","func","feFunc","rTable","gTable","bTable","aTable","DefaultStandardFontDataFactory","NodeStandardFontDataFactory","level","task","PDFDocumentLoadingTask","getUrlProp","getDataProp","Buffer","isNaN","password","rangeTransport","worker","docBaseUrl","cMapUrl","cMapPacked","CMapReaderFactory","standardFontDataUrl","StandardFontDataFactory","ignoreErrors","maxImageSize","isOffscreenCanvasSupported","canvasMaxAreaInBytes","fontExtraProperties","enableXfa","disableAutoFetch","pdfBug","useSystemFonts","useWorkerFetch","transportFactory","workerParams","docParams","transportParams","networkStream","workerIdPromise","isFetchSupported","Response","workerId","messageHandler","transport","WorkerTransport","isRefProxy","ref","listener","PDFDocumentProxy","pdfInfo","keepLoadedFonts","PDFPageProxy","pageInfo","PDFObjects","annotationMode","optionalContentConfigPromise","printAnnotationStorage","intentArgs","intentState","intentPrint","complete","internalRenderTask","InternalRenderTask","renderTask","opListTask","includeMarkedContent","disableNormalization","textContent","waitOn","resetStats","success","delayed","renderTasks","operatorListChunk","annotationStorageSerializable","force","delay","curCacheKey","curIntentState","LoopbackPort","PDFWorkerUtil","otherUrl","base","other","wrapper","Blob","port","workerSrc","terminateEarly","onWorkerError","sendTest","testObj","WorkerMessageHandler","workerHandler","cachedPort","loader","loadingTask","factory","cachedPromise","isOpList","annotationStorage","page","terminated","sink","readyReason","headersCapability","fullReader","exception","exportedData","exportedError","imageRef","pageProxy","results","refStr","INITIAL_DATA","RenderTask","separateAnnots","WeakSet","useRequestAnimationFrame","makeColorComp","scaleAndClamp","ColorConverters","G","components","html","storage","storedData","option","linkService","attributes","isHTMLAnchorElement","HTMLAnchorElement","root","rootHtml","isNotForRichText","rootDiv","stack","childHtml","GetElementsByNameSet","getRectDims","AnnotationElementFactory","LinkAnnotationElement","TextAnnotationElement","TextWidgetAnnotationElement","RadioButtonWidgetAnnotationElement","CheckboxWidgetAnnotationElement","PushButtonWidgetAnnotationElement","ChoiceWidgetAnnotationElement","SignatureWidgetAnnotationElement","WidgetAnnotationElement","PopupAnnotationElement","FreeTextAnnotationElement","LineAnnotationElement","SquareAnnotationElement","CircleAnnotationElement","PolylineAnnotationElement","CaretAnnotationElement","InkAnnotationElement","PolygonAnnotationElement","HighlightAnnotationElement","UnderlineAnnotationElement","SquigglyAnnotationElement","StrikeOutAnnotationElement","StampAnnotationElement","FileAttachmentAnnotationElement","AnnotationElement","isRenderable","ignoreBorder","createQuadrilaterals","titleObj","contentsObj","richText","currentRect","horizontalRadius","verticalRadius","radius","borderColor","elementWidth","elementHeight","setColor","jsName","styleName","colorType","colorArray","display","hidden","actions","jsEvent","commonActions","detail","svgBuffer","quadPoints","rectBlX","rectBlY","rectTrX","rectTrY","trX","trY","blX","blY","borderWidth","svgFactory","defs","clipPath","rectWidth","rectHeight","popup","skipId","fields","fieldObj","exportValues","exportValue","domElement","triggers","link","isBound","destination","attachment","resetForm","otherClickAction","resetFormFields","resetFormRefs","include","allFields","fieldIds","fieldName","field","allIds","Event","elementData","baseName","eventName","valueGetter","getter","computedFontSize","fontColor","roundToOneDecimal","numberOfLines","LINE_FACTOR","lineHeight","TEXT_ALIGNMENT","isRequired","keyInStorage","maxLen","fieldFormattedValues","blurListener","formattedValue","charLimit","commitKey","_blurListener","selectionStart","selectionEnd","selStart","selEnd","combWidth","fieldWidth","checked","checkbox","curChecked","radio","pdfButtonValue","linkElement","selectElement","addAnEmptyEntry","optionElement","removeEmptyEntry","noneOptionElement","getValue","isExport","multiple","selectedValues","getItems","values","index","displayValue","selectChild","indices","change","elements","PopupElement","elementIds","modificationDate","parentRect","open","baseColor","CSS","BACKGROUND_ENLIGHT","header","title","contents","popupLines","lineAttributes","line","dir","lines","popupContent","useParentRect","normalizedRect","popupLeft","popupTop","lineSpan","square","circle","coordinate","polyline","inkList","trigger","accessibilityManager","annotationEditorUIManager","contentElement","annotations","popupToElements","elementParams","isPopupAnnotation","rendered","EOL_PATTERN","FreeTextEditor","setFontsize","savedFontsize","col","savedColor","currentLayer","savedDisplay","savedVisibility","savedText","newText","setText","baseX","baseY","posX","posY","paste","startContainer","startOffset","bufferBefore","bufferAfter","newRange","Range","beforeLength","acc","textPosition","padding","innerMargin","right","shiftedMinX","shiftedMinY","lastEdge","lastPoint","edge","outlineVerticalEdges","outline","edges","allEdges","edge1","edge2","outlines","lastPointX","lastPointY","HighlightOutline","middle","jj","y4","Outline","_bbox","_rotation","FreeHighlightOutline","polygon","prevX","prevY","FreeOutliner","Float64Array","scaleFactor","thickness","lastTop","lastBottom","diffX","diffY","diffD","K","thX","nX","thY","nY","bottom","lastTopX","lastTopY","lastBottomX","lastBottomY","last","N","sx","sy","ltrCallback","outliner","swatch","dropdown","HighlightEditor","outlinerForOutline","highlightOutlines","highlightId","clipPathId","savedThickness","setThickness","th","toolbar","mustBeSelected","drawLayer","highlightDiv","direction","pointerMove","pointerDownOptions","pointerDown","InkEditor","opacity","setOpacity","savedOpacity","parentRotation","currentPath","path2D","bezier","xy","lastPoints","bezierPoints","control1","control2","ResizeObserver","entries","roundedWidth","roundedHeight","scaleFactorW","scaleFactorH","p10","p11","p20","p21","p30","p31","p40","p41","xMin","xMax","yMin","yMax","firstTime","prevTranslationX","prevTranslationY","unscaledPadding","StampEditor","fromId","MAX_RATIO","factor","bitmapWidth","bitmapHeight","prevWidth","prevHeight","offscreen","toUrl","bitmapUrl","bitmapId","isSvg","accessibilityData","area","prevData","annotationLayer","editorTypes","classList","isCommitting","annotationElementIds","editable","changedAnnotations","resetAnnotations","currentActive","isCentered","tlX","tlY","brX","brY","oldRotation","pathId","clipPathUse","isPathUpdatable","use","maskId","use1","use2","className","__webpack_exports__GlobalWorkerOptions","__webpack_exports__getDocument"],"mappings":"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"}