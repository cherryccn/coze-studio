/*
 * Copyright 2025 coze-dev Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";(self.webpackChunk_coze_studio_app=self.webpackChunk_coze_studio_app||[]).push([["1546"],{331362:function(e,t,a){a.d(t,{z:()=>ni,g:()=>ne});var r,n,s,o,l,i,d,c,u,m,p,g,_,x=a("962289"),v=a("537714"),h=a("151064"),f=a("336205"),b=a("222363"),y=a("64605"),S=a("674343"),w=a("407821"),E=a.n(w),j=a("472772"),N=a.n(j),C=a("395245"),T=a.n(C),D=a("297998"),L=a.n(D),k=a("646576"),I=a.n(k),R=a("606121"),A=a.n(R),Z=a("135987"),M={};M.styleTagTransform=A(),M.setAttributes=L(),M.insert=T().bind(null,"head"),M.domAPI=N(),M.insertStyleElement=I(),E()(Z.Z,M);var F=Z.Z&&Z.Z.locals?Z.Z.locals:void 0,O=e=>{var t,a,r,{controls:n}=e,s=[];if((t=n)&&(0,b.Z)(t))s=n;if((a=n)&&(0,y.Z)(a)&&(0,x.Z)(a,"btns")&&(0,x.Z)(a,"prefix"))({btns:s,prefix:r}=n);return(0,h.jsxs)("div",{className:F["upload-footer"],children:[r,s.map(e=>{var t=e.disableHoverContent&&e.status===v.xZ.DISABLE,a=(0,h.jsx)(S.zx,{"data-testid":e.e2e,disabled:e.status===v.xZ.DISABLE,loading:e.status===v.xZ.LOADING,color:e.type||"hgltplus",onClick:e.onClick,children:e.text},e.text);return t?(0,h.jsx)(S.u,{content:e.disableHoverContent,children:a}):a})]})},U=a("455069"),P=a("695673"),z=a("523652"),B=a("382534"),G=a("836511"),V=a("272661");(0,V.L)("editor-toolbar-actions").registerSome([{type:"upload-image",module:{Component:G.IF}}]),(0,V.L)("editor-context-actions").registerSome([{type:"upload-image",module:{Component:G.E1}}]);var K=a("637667"),W={};W.styleTagTransform=A(),W.setAttributes=L(),W.insert=T().bind(null,"head"),W.domAPI=N(),W.insertStyleElement=I(),E()(K.Z,W),K.Z&&K.Z.locals&&K.Z.locals;var X=a("392902"),J=a("263825"),q=a("22916"),Y=a("385038"),H=a("280053"),Q=a("298203"),$=a("237365"),ee=a("936731"),et=a("274971"),ea=a("561119"),er=a("14909"),en={};en.styleTagTransform=A(),en.setAttributes=L(),en.insert=T().bind(null,"head"),en.domAPI=N(),en.insertStyleElement=I(),E()(er.Z,en);var es=er.Z&&er.Z.locals?er.Z.locals:void 0,eo=(e,t,a)=>{var r=(null==t?void 0:t.statusDesc)||f.o.t("datasets_unit_upload_fail");if(e===ea.N.Failed)return(0,h.jsx)("div",{"data-dtestid":"".concat(Y.w.CreateUnitListProgressName,".","subText"),className:"text-12px",children:r});var n="";if(a){var s,o,l=isNaN(o="string"==typeof(s=(null==t?void 0:t.update_interval)||0)?parseInt(s):s)?0:o/24;n=(0,et.hd)(l)}else n=(0,Q.td)((null==t?void 0:t.size)||0);return(0,h.jsx)("div",{"data-dtestid":"".concat(Y.w.CreateUnitListProgressName,".").concat(null==t?void 0:t.name),className:"coz-fg-secondary text-12px",children:n})},el=e=>{var{progressList:t,createStatus:a}=e,r=(0,q.kF)(),n=(0,U.useMemo)(()=>{var e=f.o.t("datasets_createFileModel_step4_processing");return a===v.uy.TASK_FINISH&&(e=t.every(e=>e.status===H._m.Failed)?f.o.t("datasets_createFileModel_step4_failed"):f.o.t("datasets_createFileModel_step4_Finish")),e},[a,t]),s=r.type,o=(0,J.HA)(s),l=[v.Cm.TABLE_API,v.Cm.TABLE_FEISHU,v.Cm.TABLE_GOOGLE_DRIVE,v.Cm.TABLE_LARK,v.Cm.TEXT_FEISHU,v.Cm.TEXT_LARK,v.Cm.TEXT_NOTION,v.Cm.TEXT_URL,v.Cm.TEXT_GOOGLE_DRIVE].includes(s),i=(e,t)=>{var a,{minutes:r,seconds:n}={minutes:Math.floor((a=t)/60),seconds:a%60},s=f.o.t("knowledge_upload_remaining_time_text",{minutes:r,seconds:n});return e<100?"".concat(e,"% ").concat(Number(t)>0?"(".concat(s,")"):""):null};return(0,h.jsx)("div",{className:es["embed-progress"],children:(0,h.jsxs)("div",{className:es["progress-info"],children:[(0,h.jsx)("div",{className:es.text,"data-testid":Y.w.CreateUnitProgressTitle,children:n}),(0,h.jsx)("div",{className:es["progress-list"],children:t.map(e=>{var{status:t}=e,a=[H._m.Failed,H._m.AuditFailed].includes(t)?ea.N.Failed:[H._m.Processing,H._m.Resegment,H._m.Refreshing].includes(t)?ea.N.Processing:[H._m.Enable,H._m.Disable].includes(t)?ea.N.Complete:ea.N.Processing,r=(null==e?void 0:e.progress)||10;return(0,h.jsx)(ee.v,{className:es["data-processing"],mainText:null==e?void 0:e.name,subText:eo(a,e,l),tipText:eo(a,e,l),status:a,avatar:(0,$.a)({type:null==e?void 0:e.type,url:null==e?void 0:e.url,formatType:o}),percent:r,percentFormat:i(r,null==e?void 0:e.remaining_time),actions:[ea.N.Complete?(0,h.jsx)("div",{className:es["finish-text"],"data-testid":"".concat(Y.w.CreateUnitListProgressSuccessIcon,".").concat((null==e?void 0:e.name)||""),children:f.o.t("datasets_unit_process_success")}):null]},null==e?void 0:e.documentId)})})]})})},ei=a("270917"),ed=a("47522"),ec=a("763055"),eu=a("775699"),em=a("343155"),ep={};ep.styleTagTransform=A(),ep.setAttributes=L(),ep.insert=T().bind(null,"head"),ep.domAPI=N(),ep.insertStyleElement=I(),E()(em.Z,ep);var eg=em.Z&&em.Z.locals?em.Z.locals:void 0,e_=e=>{var{fetchTableInfo:t}=e;return(0,h.jsx)(eu.YZ,{className:eg["load-failure"],empty:{title:"Read failure",description:"",icon:(0,h.jsx)(ec.xs,{}),btnText:"Retry",btnOnClick:t}})},ex=()=>(0,h.jsxs)("div",{className:eg.loading,children:[(0,h.jsx)(S.yC,{spinning:!0}),(0,h.jsx)("div",{className:eg["loading-content"],children:f.o.t("knowledge_1221_03")})]}),ev=()=>(0,h.jsx)(S.jL,{style:{marginTop:"10px"},type:"warning",description:f.o.t("knowledge_limit_20")}),eh=a("252237"),ef=a.n(eh),eb=a("893121"),ey={};ey.styleTagTransform=A(),ey.setAttributes=L(),ey.insert=T().bind(null,"head"),ey.domAPI=N(),ey.insertStyleElement=I(),E()(eb.Z,ey),eb.Z&&eb.Z.locals&&eb.Z.locals;var eS=a("49630"),ew={};ew.styleTagTransform=A(),ew.setAttributes=L(),ew.insert=T().bind(null,"head"),ew.domAPI=N(),ew.insertStyleElement=I(),E()(eS.Z,ew),eS.Z&&eS.Z.locals&&eS.Z.locals;var eE=a("528751"),ej=a("417478"),eN={};eN.styleTagTransform=A(),eN.setAttributes=L(),eN.insert=T().bind(null,"head"),eN.domAPI=N(),eN.insertStyleElement=I(),E()(ej.Z,eN),ej.Z&&ej.Z.locals&&ej.Z.locals;var eC=a("915757");function eT(e){var{header:t,keepDOM:a,children:r}=e,[n,s]=(0,U.useState)(!0);return(0,h.jsxs)("div",{className:"mb-[4px]",children:[(0,h.jsxs)("div",{className:ef()("h-[40px] flex items-center gap-[4px] shrink-0 rounded","cursor-pointer hover:coz-mg-secondary-hovered active:coz-mg-secondary-pressed"),onClick:()=>s(!n),children:[(0,h.jsx)(eC.x5d,{className:ef()("coz-fg-secondary text-[14px] m-[4px]",{"rotate-90":n})}),(0,h.jsx)(S.ZT.Text,{fontSize:"14px",weight:400,children:t})]}),(0,h.jsx)(S.zF,{className:"ml-[26px] [&>div]:pt-[4px]",isOpen:n,keepDOM:a,children:r})]})}var eD=a("848001"),eL={};eL.styleTagTransform=A(),eL.setAttributes=L(),eL.insert=T().bind(null,"head"),eL.domAPI=N(),eL.insertStyleElement=I(),E()(eD.Z,eL);var ek=eD.Z&&eD.Z.locals?eD.Z.locals:void 0;function eI(e){var{value:t,onChange:a,className:r,children:n}=e;return(0,h.jsx)(S.FX,{type:"pureCard",direction:"vertical",value:t,onChange:e=>{null==a||a(e.target.value)},className:ef()(ek["card-radio-group"],r),children:n})}var eR=a("808549"),eA=a("120454"),eZ=a("479910"),eM=a("598208"),eF=a("871873"),eO=a("288391"),eU=()=>({createStatus:v.uy.UPLOAD_UNIT,progressList:[],unitList:[],currentStep:0,segmentRule:eE.v1,segmentMode:eO.OX.AUTO,enableStorageStrategy:!1,storageLocation:H.Ac.Default,openSearchConfig:{},testConnectionSuccess:!1}),eP=e=>(0,eA._)((0,eR._)({},eU()),{setCurrentStep:t=>{e({currentStep:t})},setCreateStatus:t=>{e({createStatus:t})},setProgressList:t=>{e({progressList:t})},setUnitList:t=>{e({unitList:t})},setSegmentRule:t=>e({segmentRule:t}),setSegmentMode:t=>e({segmentMode:t}),setEnableStorageStrategy:t=>{e({enableStorageStrategy:t})},setStorageLocation:t=>{e({storageLocation:t})},setOpenSearchConfig:t=>{e({openSearchConfig:t})},setTestConnectionSuccess:t=>{e({testConnectionSuccess:t})},reset:()=>{e(eU())}});var ez=((r={})[r.SEGMENT_CLEANER=0]="SEGMENT_CLEANER",r[r.EMBED_PROGRESS=1]="EMBED_PROGRESS",r),eB=()=>(0,eA._)((0,eR._)({},eU()),{currentStep:ez.SEGMENT_CLEANER,parsingStrategy:{parsing_type:H.lC.AccurateParsing,image_extraction:!0,image_ocr:!1,table_extraction:!0},filterStrategy:[],indexStrategy:{},documentInfo:null,levelChunkStrategy:{maxLevel:3}}),eG=a("473980"),eV=a("664319"),eK=a("346707"),eW=a("888711"),eX=a("825955"),eJ=a("735114"),eq=a("745474"),eY=a("458620"),eH=(e,t)=>{var a,{run:r}=(0,eJ.Z)((a=(0,eX._)(function*(t){var a=yield B.MJ.ListDocument(t);e&&e(a)}),function(e){return a.apply(this,arguments)}),{onError:e=>{eq.s5.errorEvent(eq.xW.KNOWLEDGE,{eventName:eY.b.KnowledgeGetTableInfo,error:e}),t&&t()},manual:!0});return r},eQ=e=>{var t,a=(0,q.kF)();var{run:r}=(0,eJ.Z)((t=(0,eX._)(function*(t){var r=yield B.MJ.CreateDocument((0,eR._)({dataset_id:a.datasetID},t));(null==e?void 0:e.onSuccess)&&e.onSuccess(r)}),function(e){return t.apply(this,arguments)}),{onError:t=>{eq.s5.errorEvent(eq.xW.KNOWLEDGE,{eventName:eY.b.KnowledgeCreateDocument,error:t}),(null==e?void 0:e.onFail)&&e.onFail(t)},manual:!0});return r},e$=e=>{var{segmentRule:t,onChange:a}=e,{separator:r,maxTokens:n,preProcessRules:s,overlap:o}=t;return(0,h.jsxs)("div",{className:"flex flex-col gap-[12px] mt-12px",children:[(0,h.jsxs)("div",{"data-testid":Y.w.ResegmentCustomIdentifierSelect,children:[(0,h.jsx)(S.l0.Label,{required:!0,children:f.o.t("datasets_Custom_segmentID")}),(0,h.jsx)(S.Ph,{placeholder:f.o.t("datasets_custom_segmentID_placeholder"),optionList:(0,eE.Px)(),className:"w-full",value:r.type,onChange:e=>{"string"==typeof e&&a((0,eA._)((0,eR._)({},t),{separator:{type:e,customValue:r.customValue}}))}}),r.type===eO.IB.CUSTOM?(0,h.jsx)(S.II,{className:"w-full mt-[4px]",value:r.customValue,onChange:e=>{a((0,eA._)((0,eR._)({},t),{separator:{type:r.type,customValue:e}}))},placeholder:f.o.t("datasets_custom_segmentID_placeholder")}):null]}),(0,h.jsxs)("div",{"data-testid":Y.w.ResegmentCustomMaxLenInput,children:[(0,h.jsx)(S.l0.Label,{required:!0,children:f.o.t("datasets_Custom_maxLength")}),(0,h.jsx)(S.k7,{value:n,onChange:e=>{var r;a((0,eA._)((0,eR._)({},t),{maxTokens:(r=Number(e))<100?100:r>5e3?5e3:r}))},className:"w-full",min:100,max:5e3})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)(S.l0.Label,{required:!0,children:f.o.t("kl_write_014")}),(0,h.jsx)(S.k7,{value:o,onChange:e=>{a((0,eA._)((0,eR._)({},t),{overlap:Number(e)}))},className:"w-full",max:90,min:0})]}),(0,h.jsxs)("div",{"data-testid":Y.w.ResegmentCustomRuleText,children:[(0,h.jsx)(S.l0.Label,{children:f.o.t("datasets_Custom_rule")}),(0,h.jsxs)(S.cO,{value:s,className:"w-full gap-[4px]","aria-label":f.o.t("datasets_Custom_rule"),onChange:e=>{a((0,eA._)((0,eR._)({},t),{preProcessRules:e}))},children:[(0,h.jsx)(S.XZ,{value:eO.dV.REMOVE_SPACES,children:f.o.t("datasets_Custom_rule_replace")}),(0,h.jsx)(S.XZ,{value:eO.dV.REMOVE_EMAILS,children:f.o.t("datasets_Custom_rule_delete")})]})]})]})},e0=e=>{var{segmentMode:t,segmentRule:a,onChange:r}=e;return(0,h.jsx)(S.Y8,{"data-testid":Y.w.CreateUnitResegmentCustomRadio,className:ef()(t===eO.OX.CUSTOM?"custom-wrapper":""),value:eO.OX.CUSTOM,extra:(0,h.jsxs)(h.Fragment,{children:[f.o.t("datasets_createFileModel_step3_customDescription"),t===eO.OX.CUSTOM&&(0,h.jsx)(e$,{segmentRule:a,onChange:e=>{r({segmentRule:e})}})]}),children:f.o.t("datasets_createFileModel_step3_custom")})},e1=()=>(0,h.jsx)(S.Y8,{"data-testid":Y.w.CreateUnitResegmentAutoRadio,value:eO.OX.AUTO,extra:f.o.t("datasets_createFileModel_step3_autoDescription"),children:f.o.t("datasets_createFileModel_step3_auto")}),e2=e=>{var{segmentMode:t,segmentRule:a=eE.v1,onChange:r}=e;return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(eT,{header:f.o.t("kl_write_011"),children:(0,h.jsxs)(eI,{value:t,onChange:e=>{r({segmentMode:e,segmentRule:a})},children:[(0,h.jsx)(e1,{}),(0,h.jsx)(e0,{segmentMode:t,segmentRule:a,onChange:r})]})})})},e4=e=>{var[t,a]=(0,U.useState)([]),{useStore:r,footer:n}=e,s=(0,U.useRef)(),{setCurrentStep:o,segmentRule:l,segmentMode:i,parsingStrategy:d,filterStrategy:c}=r((0,eV.N)(e=>({setCurrentStep:e.setCurrentStep,segmentRule:e.segmentRule,segmentMode:e.segmentMode||eO.OX.AUTO,parsingStrategy:e.parsingStrategy,filterStrategy:e.filterStrategy}))),{setSegmentMode:u,setParsingStrategyByMerge:m,setSegmentRule:p,setFilterStrategy:g}=r.getState(),_=(0,q.kF)(),x=eH(e=>{var t=null===(i=e.document_infos)||void 0===i?void 0:i[0];if(!t)return;var r=(0,et.VR)(t);if(!!r){var{docInfo:n}=r,o=(0,eG._)(r,["docInfo"]);p(o.segmentRule),u(o.segmentMode),m(null!==(_=n.parsing_strategy)&&void 0!==_?_:{}),null===(d=s.current)||void 0===d||d.setValues(null!==(x=n.parsing_strategy)&&void 0!==x?x:{});var l=(null===(c=n.type)||void 0===c?void 0:c.toLocaleLowerCase())==="pdf";if(n.filter_strategy&&l){var i,d,c,_,x,v,h,f,b,y,S,w,E,j,[N=0,C=0,T=0,D=0]=null!==(b=n.filter_strategy.filter_box_position)&&void 0!==b?b:[],L=[{uri:null!==(y=n.tos_uri)&&void 0!==y?y:"",filterPagesConfig:null!==(S=null===(h=n.filter_strategy)||void 0===h?void 0:null===(v=h.filter_page)||void 0===v?void 0:v.map(e=>({pageIndex:e,isFilter:!0})))&&void 0!==S?S:[],cropperSizePercent:{topPercent:N,rightPercent:C,bottomPercent:T,leftPercent:D}}];g(L),null===(f=s.current)||void 0===f||f.setValue("filterStrategy",L),a([{uri:null!==(w=n.tos_uri)&&void 0!==w?w:"",url:null!==(E=n.web_url)&&void 0!==E?E:"",name:null!==(j=n.name)&&void 0!==j?j:""}])}}});return(0,U.useEffect)(()=>{x({dataset_id:(null==_?void 0:_.datasetID)||"",document_ids:[(null==_?void 0:_.docID)||""]})},[]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(e2,{pdfList:t,segmentRule:l,segmentMode:i,parsingStrategy:d,filterStrategy:c,getParseFormApi:e=>{s.current=e},onChange:e=>{var{segmentRule:t,segmentMode:a,parsingStrategy:r,filterStrategy:n}=e;void 0!==t&&p(t),void 0!==a&&u(a),!(0,eK.Z)(r)&&m(r),!(0,eK.Z)(n)&&g(n)}}),null==n?void 0:n([{e2e:Y.w.ResegmentUploadUnitNextBtn,type:"hgltplus",theme:"solid",onClick:()=>o(ez.EMBED_PROGRESS),text:f.o.t("datasets_createFileModel_NextBtn"),status:(0,eW.Y)(i,l)}])]})},e5=a("937393"),e3=a("727914"),e6=e=>e.format_type===H.a5.Text&&e.source_type===H.NZ.Document,e8=e=>e.map(e=>e.isFilter?e.pageIndex:null).filter(e=>"number"==typeof e),e7=e=>e?{filter_strategy:{filter_page:e8(e.filterPagesConfig)}}:{},e9=a("896335"),te=a("653598"),tt=()=>{var e,t=(0,U.useRef)();(0,U.useEffect)(()=>()=>{(0,et.uA)(t)},[]);var a=(e=(0,eX._)(function*(e,r){var{data:n=[]}=yield B.MJ.GetDocumentProgress({document_ids:e.map(e=>e.document_id).filter(e9.Z)}),s=e.map(e=>{var t,a,r,s,o,{document_id:l,uri:i}=e,d=n.find(e=>e.document_id===l);return(0,eA._)((0,eR._)({},d),{documentId:null!=l?l:"",progress:null!==(t=null==d?void 0:d.progress)&&void 0!==t?t:0,name:null!==(a=null==d?void 0:d.document_name)&&void 0!==a?a:"",uri:null!=i?i:"",status:null!==(r=null==d?void 0:d.status)&&void 0!==r?r:te._m.Processing,statusDesc:null!==(s=null==d?void 0:d.status_descript)&&void 0!==s?s:"",remainingTime:null!==(o=null==d?void 0:d.remaining_time)&&void 0!==o?o:0})});if((0,et.te)(n),r.onProgressing(s),(0,et.zP)(n)){r.onFinish();return}t.current=window.setTimeout(()=>a(e,r),eE.Yg)}),function(t,a){return e.apply(this,arguments)});return a},ta=(e,t)=>{var a,r=(0,q.kF)(),n=e(e=>e.setCreateStatus),s=e(e=>e.setProgressList),o=tt();var{run:l}=(0,eJ.Z)((a=(0,eX._)(function*(e){try{var a,l=yield B.MJ.CreateDocument((0,eR._)({dataset_id:r.datasetID},e)),{document_infos:i=[]}=l;i.length&&(yield o(i,{onProgressing:e=>{s(e)},onFinish:()=>{n(v.uy.TASK_FINISH)}})),(null==t?void 0:t.onSuccess)&&t.onSuccess(l)}catch(r){;s((null==e?void 0:null===(a=e.document_bases)||void 0===a?void 0:a.map(t=>(0,eA._)((0,eR._)({},t),{name:(null==t?void 0:t.name)||"unknown",documentId:"",uri:"",remainingTime:0,remaining_time:0,progress:100,status:te._m.Failed,statusDesc:null==r?void 0:r.message,format_type:null==e?void 0:e.format_type})))||[]),eq.s5.errorEvent(eq.xW.KNOWLEDGE,{eventName:eY.b.KnowledgeCreateDocument,error:r}),(null==t?void 0:t.onFail)&&t.onFail(r)}}),function(e){return a.apply(this,arguments)}),{onError:e=>{eq.s5.errorEvent(eq.xW.KNOWLEDGE,{eventName:eY.b.KnowledgeCreateDocument,error:e}),(null==t?void 0:t.onFail)&&t.onFail(e)},manual:!0});return l},tr=()=>{var e=(0,U.useRef)(v.zM.SIMPLE),t=eH(t=>{(null==t?void 0:t.total)===0&&(e.current=v.zM.HAD_SEGMENT_RULES)}),a=(0,q.kF)();return(0,U.useEffect)(()=>{a.datasetID&&t({dataset_id:a.datasetID})},[a.datasetID]),[void 0,e.current]},tn=()=>{var e=(0,U.useRef)(v.zM.SIMPLE),t=eH(t=>{(null==t?void 0:t.total)===0&&(e.current=v.zM.HAD_SEGMENT_RULES)}),a=(0,q.kF)();return(0,U.useEffect)(()=>{a.datasetID&&t({dataset_id:a.datasetID})},[a.datasetID]),[void 0,e.current]},ts=(e,t,a)=>{var r,n;if(e===eO.OX.AUTO)return{chunk_type:H.x2.DefaultChunk};if(e===eO.OX.LEVEL)return{chunk_type:H.x2.LevelChunk,max_level:null==a?void 0:a.maxLevel,save_title:null==a?void 0:a.isSaveTitle};return{separator:t.separator.type===eO.IB.CUSTOM?t.separator.customValue:t.separator.type,max_tokens:t.maxTokens,remove_extra_spaces:null==t?void 0:null===(r=t.preProcessRules)||void 0===r?void 0:r.includes(eO.dV.REMOVE_SPACES),remove_urls_emails:null==t?void 0:null===(n=t.preProcessRules)||void 0===n?void 0:n.includes(eO.dV.REMOVE_EMAILS),chunk_type:H.x2.CustomChunk,overlap:t.overlap}},to=e=>{var t,a=(0,q.kF)(),{segmentMode:r,segmentRule:n,setCreateStatus:s,setProgressList:o}=e((0,eV.N)(e=>({segmentMode:e.segmentMode,segmentRule:e.segmentRule,setCreateStatus:e.setCreateStatus,setProgressList:e.setProgressList}))),l=tt(),i=null!==(t=(0,et.td)())&&void 0!==t?t:"",{run:d}=(0,eJ.Z)((0,eX._)(function*(){if(!a.datasetID)throw S.FN.warning({content:f.o.t("datasets_ID_miss"),showClose:!1}),new e3.sH(eY.b.KnowledgeResegment,"".concat(eY.b.KnowledgeResegment,": missing datasets_id"));var{parsingStrategy:t,filterStrategy:d,documentInfo:c}=e.getState(),u=c&&e6(c);try{var{document_infos:m=[]}=yield B.MJ.Resegment((0,eF.Z)({},{dataset_id:a.datasetID,document_ids:[i],chunk_strategy:ts(r,n),parsing_strategy:u?t:void 0},e7(d.at(0))));Object.keys(m).length&&(s(v.uy.GET_TASK_PROGRESS),yield l(m,{onProgressing:e=>{o(e)},onFinish:()=>{s(v.uy.TASK_FINISH)}}),(0,et.As)(m,eY.b.KnowledgeProcessDocument))}catch(e){eq.s5.errorEvent(eq.xW.KNOWLEDGE,{eventName:eY.b.KnowledgeProcessDocument,error:e})}}),{manual:!0});return d},tl=a("707140"),ti={};ti.styleTagTransform=A(),ti.setAttributes=L(),ti.insert=T().bind(null,"head"),ti.domAPI=N(),ti.insertStyleElement=I(),E()(tl.Z,ti);var td=tl.Z&&tl.Z.locals?tl.Z.locals:void 0,tc=e=>{var{useStore:t,footer:a}=e,r=(0,q.EV)(),n=t(e=>e.progressList),s=t(e=>e.createStatus),o=(0,q.kF)(),l=to(t);return(0,U.useEffect)(()=>{l()},[]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(el,{progressList:n,createStatus:s}),null==a?void 0:a({btns:[{e2e:Y.w.ResegmentUnitConfirmBtn,type:"hgltplus",theme:"solid",text:f.o.t("variable_reset_yes"),onClick:()=>{var e,t=(0,e5.S)();null===(e=r.toResource)||void 0===e||e.call(r,"knowledge",o.datasetID,t)}}],prefix:(0,h.jsx)("span",{className:td["footer-sub-tip"],children:(0,et.mZ)(s)})})]})},tu={steps:[{content:e=>(0,h.jsx)(e4,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("datasets_createFileModel_step3"),step:ez.SEGMENT_CLEANER},{content:e=>(0,h.jsx)(tc,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("datasets_createFileModel_step4"),step:ez.EMBED_PROGRESS}],createStore:()=>(0,eM.Ue)()((0,eZ.mW)(function(e,t){for(var a=arguments.length,r=Array(a>2?a-2:0),n=2;n<a;n++)r[n-2]=arguments[n];return(0,eA._)((0,eR._)({},eP(e,t,...r),eB()),{reset:()=>{e(eB())},setFilterStrategy:t=>{e({filterStrategy:t},!1,"setFilterStrategy")},setIndexStrategyByMerge:a=>{e({indexStrategy:(0,eF.Z)({},t().indexStrategy,a)},!1,"setIndexStrategyByMerge")},setParsingStrategyByMerge:a=>{e({parsingStrategy:(0,eF.Z)({},t().parsingStrategy,a)},!1,"setParsingStrategyByMerge")},setDocumentInfo:t=>e({documentInfo:t},!1,"setDocumentInfo"),setLevelChunkStrategy:(t,a)=>{e(e=>(0,eA._)((0,eR._)({},e),{levelChunkStrategy:(0,eA._)((0,eR._)({},e.levelChunkStrategy),{[t]:a})}))}})},{enabled:!1,name:"Coz.Data.TextResegment"})),showStep:!0},tm=()=>({createStatus:v.uy.UPLOAD_UNIT,progressList:[],unitList:[],currentStep:0,status:eE.c3.NORMAL,semanticValidate:{},tableData:{},originTableData:{},tableSettings:eE.Q,documentList:[]}),tp=(e,t)=>(0,eA._)((0,eR._)({},tm()),{setCurrentStep:t=>{e({currentStep:t})},setCreateStatus:t=>{e({createStatus:t})},setProgressList:t=>{e({progressList:t})},setUnitList:t=>{e({unitList:t})},setStatus:t=>{e({status:t})},setSemanticValidate:t=>{e({semanticValidate:t})},setTableData:t=>{e({tableData:t})},setOriginTableData:t=>{e({originTableData:t})},setTableSettings:t=>{e({tableSettings:t})},setDocumentList:t=>{e({documentList:t})},reset:()=>{e(tm())}}),tg=(e,t,a)=>(0,eA._)((0,eR._)({},tp(e,t,a)),{tableSettings:eE.z2,reset:()=>{e((0,eA._)((0,eR._)({},tm()),{tableSettings:eE.z2}))}}),t_=a("801815"),tx=a("788637"),tv=a("44172"),th=a("672958"),tf=a("311807"),tb=a("189284"),ty=a("594022"),tS=a("861445"),tw=a("178385"),tE=e=>{var t=e(e=>e.unitList);return(0,U.useMemo)(()=>({tos_uri:(0,x.Z)(t,"0.uri",""),document_source:H.NZ.Document}),[t])},tj=e=>{var t,a=e(e=>e.setUnitList),r=e(e=>e.unitList);return t=(0,eX._)(function*(e,t){try{var{fileInstance:n}=e;if(n){var{name:s}=n,o=(0,et.mD)(s),l=yield(0,et.y3)(n),i=yield B.nA.UploadFile({file_head:{file_type:o,biz_type:tw.ym.BIZ_BOT_DATASET},data:l});a((0,et.wV)({unitList:r,data:null==i?void 0:i.data,fileInstance:n,index:t}))}}catch(e){console.log(e)}}),function(e,a){return t.apply(this,arguments)}};var tN=((n={})[n.Text=0]="Text",n[n.Table=1]="Table",n),tC=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return{};var{table_meta:a,preview_data:r}=e;if(!a||!r||!Object.keys(a).length||!Object.keys(r).length)return{};var n={};return Object.keys(a).forEach(e=>{n[e]={};var s=a[e];if(!Array.isArray(s))return{};s.forEach(a=>{var{column_type:s,sequence:o}=a;if(void 0!==o)n[e][o]={valid:!0,msg:""},r[e].slice(t).forEach(t=>{if(s===te.QD.Image){n[e][o]={valid:!1,msg:f.o.t("knowledge_insert_img_011")};return}})})}),n},tT=()=>({document_id:(0,et.td)(),table_data_type:ty.nZ.AllData});function tD(e){return e===eE.c3.LOADING}function tL(e){return e===eE.c3.ERROR}function tk(e,t,a){return e?((0,x.Z)(t,"table_meta.".concat(a[eE.hD.SHEET]))||[]).length>eE.pL:Object.keys((0,x.Z)(t,"preview_data.".concat(a[eE.hD.SHEET],".").concat(a[eE.hD.KEY_START_ROW]))||{}).length>eE.pL}function tI(e,t){return e?((e.table_meta||{})[t[eE.hD.SHEET]||0]||[]).map(e=>{var t;return(0,eA._)((0,eR._)({},e),{key:e.id,column_name:(null!==(t=e.column_name)&&void 0!==t?t:"").substring(0,eE.DU)})}):[]}function tR(e,t){if(!e)return v.xZ.DISABLE;var{table_meta:a}=e,r=(0,x.Z)(a,t[eE.hD.SHEET])||[],n=r.some(e=>{var t;return(null!==(t=e.column_name)&&void 0!==t?t:"")===""}),s=r.some(e=>{var t;return!(null!==(t=e.column_type)&&void 0!==t?t:"")}),o=r.some(e=>{var t,a;return(null===(t=(0,et.OP)(null!==(a=null==e?void 0:e.column_name)&&void 0!==a?a:""))||void 0===t?void 0:t.valid)===!1}),l=r.some(e=>!0===e.is_semantic),i=r.some(e=>r.filter(t=>t.column_name===e.column_name).length>=2);return!Object.keys(r).length||n||s||!l||o||r.length>eE.pL||i?v.xZ.DISABLE:v.xZ.ENABLE}function tA(e){return Array.isArray(e)&&e.length>0?(0,x.Z)(e,"0.documentId"):null}var tZ=(e,t)=>{var a;return e.some(e=>!e.column_type)||!(null===(a=(0,et.OP)(t))||void 0===a?void 0:a.valid)||!e.some(e=>!0===e.is_semantic)||e.some(e=>{var t,a;return(null===(t=(0,et.OP)(null!==(a=e.column_name)&&void 0!==a?a:""))||void 0===t?void 0:t.valid)===!1})?v.xZ.DISABLE:v.xZ.ENABLE};function tM(e){var{spaceId:t,docId:a,datasetId:r,documentInfo:n}=e;return{space_id:t,document_id:a,dataset_id:r,format_type:tN.Table,document_bases:n,is_append:!0}}var tF=(e,t)=>{var a,{run:r}=(0,eJ.Z)((a=(0,eX._)(function*(t){e((yield B.v6.GetDocumentTableInfo(t)))}),function(e){return a.apply(this,arguments)}),{onError:e=>{eq.s5.errorEvent(eq.xW.KNOWLEDGE,{eventName:eY.b.KnowledgeGetTableInfo,error:e}),t()},manual:!0});return r},tO=(e,t)=>{var a,{run:r}=(0,eJ.Z)((a=(0,eX._)(function*(a){try{var r,n,s,o=yield B.MJ.GetTableSchema(a),{table_meta:l,preview_data:i}=o,d=(0,eG._)(o,["table_meta","preview_data"]),c=(null==a?void 0:a.table_data_type)===ty.nZ.OnlyPreview?{preview_data:{["".concat((null===(r=a.table_sheet)||void 0===r?void 0:r.sheet_id)||"0")]:null!=i?i:[]}}:(0,eA._)((0,eR._)({},d),{table_meta:{["".concat((null===(n=a.table_sheet)||void 0===n?void 0:n.sheet_id)||"0")]:null!=l?l:[]},preview_data:{["".concat((null===(s=a.table_sheet)||void 0===s?void 0:s.sheet_id)||"0")]:null!=i?i:[]}});e(c)}catch(e){eq.s5.errorEvent(eq.xW.KNOWLEDGE,{eventName:eY.b.KnowledgeGetTableInfo,error:e}),t()}}),function(e){return a.apply(this,arguments)}),{onError:e=>{eq.s5.errorEvent(eq.xW.KNOWLEDGE,{eventName:eY.b.KnowledgeGetTableInfo,error:e}),t()},manual:!0});return r},tU=e=>{var t=e(e=>e.tableData),a=e(e=>e.setSemanticValidate),r=e(e=>e.setOriginTableData),n=e(e=>e.setTableData),s=e(e=>e.setStatus);return tO(e=>{var o=!(0,x.Z)(e,"table_meta"),l=o?(0,eA._)((0,eR._)({},t),{preview_data:(0,x.Z)(e,"preview_data")}):e;!o&&r(l),a(tC(l)),n(l),s(eE.c3.NORMAL)},()=>{console.log("setStatus(TableStatus.ERROR)"),s(eE.c3.ERROR)})},tP=e=>{var t,a,r,{type:n,docID:s,opt:o}=(0,q.kF)(),l=e(e=>e.setStatus),i=e(e=>e.setTableSettings),d=e(e=>{var t;return null!==(t=e.fileIdsMap)&&void 0!==t?t:{}}),c=e(e=>e.docInfo),u=e(e=>e.tosUrlRef),m=null!==(r=null===(t=d[null===(a=Object.keys(d))||void 0===a?void 0:a[0]])||void 0===t?void 0:t[0].source_file_id)&&void 0!==r?r:null==c?void 0:c.source_file_id,p=tU(e),g=tE(e),_=(0,et.V1)(null!=o?o:v.VP.ADD,n),h=(0,et.BD)(null!=o?o:v.VP.ADD);return(0,tf.Z)(e=>{l(eE.c3.LOADING);var t=n&&[v.Cm.TABLE_GOOGLE_DRIVE,v.Cm.TABLE_FEISHU].includes(n)?{tos_uri:n===v.Cm.TABLE_FEISHU?u:void 0,source_file_id:null!=m?m:void 0,document_source:n===v.Cm.TABLE_GOOGLE_DRIVE?H.NZ.GoogleDrive:H.NZ.FeishuWeb}:g;p({source_file:_?void 0:t,table_sheet:h||(0,x.Z)(t,"document_source")!==H.NZ.Web?{sheet_id:String(e.sheet_id),header_line_idx:String(e.header_line_idx),start_line_idx:String(e.start_line_idx)}:void 0,document_id:_||h?s:void 0,table_data_type:ty.nZ.AllData}),i(e)},500)},tz=(e,t)=>{var a,{run:r}=(0,eJ.Z)((a=(0,eX._)(function*(t){var a=yield B.MJ.ValidateTableSchema(t),r=(null==a?void 0:a.column_valid_result)||{};e(0===Object.keys(r).length&&(null==a?void 0:a.code)===0,r)}),function(e){return a.apply(this,arguments)}),{onError:e=>{eq.s5.errorEvent(eq.xW.KNOWLEDGE,{eventName:eY.b.KnowledgeTableSchemaValid,error:e}),null==t||t(e)},manual:!0});return r},tB=(e,t)=>{var a,{run:r,loading:n}=(0,eJ.Z)((a=(0,eX._)(function*(t){e((yield B.MJ.CreateDocument(t)))}),function(e){return a.apply(this,arguments)}),{onError:e=>{eq.s5.errorEvent(eq.xW.KNOWLEDGE,{eventName:eY.b.KnowledgeTableAddSegment,error:e}),null==t||t()},manual:!0});return{fetchAddSegment:r,addSegmentLoading:n}},tG=e=>{var t,a=e(e=>e.setStatus),r=e(e=>e.setCreateStatus),n=e(e=>e.setProgressList),s=tt(),{docID:o}=(0,q.kF)();var{fetchAddSegment:l}=tB((t=(0,eX._)(function*(e){yield s([{document_id:o}],{onProgressing:e=>{n(e)},onFinish:()=>{r(v.uy.TASK_FINISH)}}),a(eE.c3.NORMAL)}),function(e){return t.apply(this,arguments)}),()=>{a(eE.c3.ERROR)});return l},tV=(e,t)=>{var a=(0,q.kF)(),{run:r}=(0,eJ.Z)((0,eX._)(function*(){if(!a.datasetID)throw new e3.sH(eY.b.KnowledgeListDocument,"".concat(eY.b.KnowledgeListDocument,": no datasetID"));if(!a.docID)throw new e3.sH(eY.b.KnowledgeListDocument,"".concat(eY.b.KnowledgeListDocument,": no docId"));var t,r=yield B.MJ.ListDocument({dataset_id:a.datasetID,document_ids:[a.docID]});e((null==r?void 0:null===(t=r.document_infos)||void 0===t?void 0:t.find(e=>e.document_id===a.docID))||{})}),{onError:e=>{eq.s5.errorEvent(eq.xW.KNOWLEDGE,{eventName:eY.b.KnowledgeListDocument,error:e}),null==t||t()},manual:!0});return r},tK=()=>{var[e]=(0,tb.V)();return tS.xT.filter(t=>e["bot.data.knowledge_md_xls"]?!!t:".xls"!==t).join(",")};var tW=((s={})[s.CONFIGURATION=0]="CONFIGURATION",s[s.PREVIEW=1]="PREVIEW",s[s.PROCESSING=2]="PROCESSING",s),tX=a("451357"),tJ={};tJ.styleTagTransform=A(),tJ.setAttributes=L(),tJ.insert=T().bind(null,"head"),tJ.domAPI=N(),tJ.insertStyleElement=I(),E()(tX.Z,tJ);var tq=tX.Z&&tX.Z.locals?tX.Z.locals:void 0,tY=e=>{var{useStore:t,footer:a}=e,r=t(e=>e.setCurrentStep),n=t(e=>e.status),s=t(e=>e.tableData),o=t(e=>e.originTableData),l=t(e=>e.tableSettings),i=t(e=>e.semanticValidate),d=t(e=>e.setTableData),c=t(e=>e.setStatus),u=t(e=>e.setSemanticValidate),m=(0,et.l$)(),p=tD(n),g=tL(n),_=tk(m,s,l),x=tI(s,l),v=tU(t),b=tT();return((0,U.useEffect)(()=>{!s.table_meta&&(c(eE.c3.LOADING),v(b))},[s]),p)?(0,h.jsx)(ex,{}):g?(0,h.jsx)(e_,{fetchTableInfo:()=>{c(eE.c3.LOADING),v(b)}}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:tq["table-resegment"],children:[(0,h.jsx)(X.u3,{tipsNode:(0,h.jsxs)(h.Fragment,{children:[_?(0,h.jsx)(ev,{}):null,!x.length||(0,tx.Z)(o)?(0,h.jsx)(eu.YZ,{empty:{title:f.o.t("knowledge_1221_02"),icon:(0,h.jsx)(ec.xs,{})}}):null]}),showTitle:!0,initValid:!0,isDragTable:!0,baseKey:"".concat(l[eE.hD.SHEET],".").concat(l[eE.hD.KEY_START_ROW],"."),data:x,verifyMap:i[l[eE.hD.SHEET]]||{},setData:e=>{var t=l[eE.hD.SHEET],a=(0,eA._)((0,eR._)({},s),{table_meta:(0,eA._)((0,eR._)({},s.table_meta),{[t]:(e||[]).map((e,t)=>(0,eA._)((0,eR._)({},e),{sequence:t.toString()}))})});d(a),u(tC(a))},loading:p}),(0,h.jsx)(e=>{var{children:t}=e;return x.length>=eE.pL?(0,h.jsx)(S.u,{trigger:"hover",content:f.o.t("knowledge_1222_01"),children:t}):(0,h.jsx)(h.Fragment,{children:t})},{children:(0,h.jsx)(S.zx,{className:tq["add-btn"],color:"primary",disabled:x.length>=eE.pL,icon:(0,h.jsx)(tv.N_R,{}),onClick:()=>{var e,t,a=(0,t_.x0)(),r=l[eE.hD.SHEET];d((0,eA._)((0,eR._)({},s),{table_meta:(0,eA._)((0,eR._)({},s.table_meta),{[r]:null==s?void 0:null===(t=s.table_meta)||void 0===t?void 0:null===(e=t[r])||void 0===e?void 0:e.concat({id:a,key:a,column_name:"",is_semantic:!1,column_type:void 0,sequence:void 0,is_new_column:!0})})}))},children:f.o.t("datasets_segment_tableStructure_add_field")})})]}),a?a([{e2e:Y.w.UploadUnitNextBtn,type:"hgltplus",theme:"solid",text:f.o.t("datasets_createFileModel_NextBtn"),disableHoverContent:f.o.t("knowledge_multi_index_noti"),onClick:()=>{var e,t;r(tW.PREVIEW),v((0,eA._)((0,eR._)({},b),{table_data_type:th.n.OnlyPreview,origin_table_meta:null==o?void 0:null===(e=o.table_meta)||void 0===e?void 0:e[0],preview_table_meta:((null==s?void 0:null===(t=s.table_meta)||void 0===t?void 0:t[0])||[]).map(e=>({column_name:e.column_name,column_type:e.column_type,desc:e.desc,id:(null==e?void 0:e.is_new_column)?"0":e.id,is_semantic:e.is_semantic,sequence:e.sequence}))}))},status:tR(s,l)}]):null]})},tH=e=>{var{useStore:t,footer:a}=e,r=t(e=>e.tableData),n=t(e=>e.tableSettings),s=t(e=>e.setCurrentStep);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(X.IO,{data:r,settings:n}),a?a([{e2e:Y.w.UploadUnitUpBtn,type:"primary",theme:"light",text:f.o.t("datasets_createFileModel_previousBtn"),onClick:()=>{s(tW.CONFIGURATION)},status:v.xZ.ENABLE},{e2e:Y.w.UploadUnitNextBtn,type:"hgltplus",theme:"solid",text:f.o.t("datasets_createFileModel_NextBtn"),onClick:()=>{s(tW.PROCESSING)},status:v.xZ.ENABLE}]):null]})},tQ=e=>{var t=e(e=>e.tableData),a=e(e=>e.setStatus),r=e(e=>e.setCreateStatus),n=e(e=>e.setProgressList),s=tt(),o=(0,et.td)(),{run:l}=(0,eJ.Z)((0,eX._)(function*(){try{var e;a(eE.c3.LOADING),yield B.MJ.UpdateDocument({document_id:o,table_meta:((null==t?void 0:null===(e=t.table_meta)||void 0===e?void 0:e[0])||[]).map(e=>({column_name:e.column_name,column_type:e.column_type,desc:e.desc,id:(null==e?void 0:e.is_new_column)?"0":e.id,is_semantic:e.is_semantic,sequence:e.sequence}))}),yield s([{document_id:o}],{onProgressing:e=>{n(e)},onFinish:()=>{r(v.uy.TASK_FINISH)}})}catch(e){eq.s5.errorEvent(eq.xW.KNOWLEDGE,{eventName:eY.b.KnowledgeUpdateDocument,error:e})}finally{a(eE.c3.NORMAL)}}),{manual:!0});return l},t$=e=>{var{useStore:t,footer:a}=e,r=t(e=>e.progressList),n=t(e=>e.createStatus),s=(0,q.kF)(),o=(0,q.EV)(),l=(0,U.useMemo)(()=>tA(r),[r]),i=tQ(t);return(0,U.useEffect)(()=>{i()},[]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(el,{progressList:r,createStatus:n}),a?a([{e2e:Y.w.CreateUnitConfirmBtn,type:"hgltplus",theme:"solid",text:f.o.t("variable_reset_yes"),onClick:()=>{var e;null===(e=o.toResource)||void 0===e||e.call(o,"knowledge",s.datasetID)},status:l?v.xZ.ENABLE:v.xZ.DISABLE}]):null]})},t0={steps:[{content:e=>(0,h.jsx)(tY,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("datasets_createFileModel_tab_step2"),step:tW.CONFIGURATION},{content:e=>(0,h.jsx)(tH,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("datasets_createFileModel_tab_step3"),step:tW.PREVIEW},{content:e=>(0,h.jsx)(t$,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("datasets_createFileModel_step4"),step:tW.PROCESSING}],createStore:()=>(0,eM.Ue)()((0,eZ.mW)((e,t,a)=>(0,eR._)({},tg(e,t,a))))};var t1=((o={})[o.SEGMENT_CLEANER=0]="SEGMENT_CLEANER",o[o.SEGMENT_PREVIEW=1]="SEGMENT_PREVIEW",o[o.EMBED_PROGRESS=2]="EMBED_PROGRESS",o),t2=()=>({currentReviewID:void 0,selectionID:void 0,docReviewList:[]}),t4=e=>(0,eA._)((0,eR._)({},t2()),{setCurrentReviewID:t=>e(()=>({currentReviewID:t})),setSelectionIDs:t=>e(()=>({selectionIDs:t})),setDocReviewList:t=>e(()=>({docReviewList:t}))}),t5=()=>(0,eA._)((0,eR._)({},eU(),t2(),(0,q.G6)()),{currentStep:t1.SEGMENT_CLEANER,parsingStrategy:{parsing_type:H.lC.AccurateParsing,image_extraction:!0,table_extraction:!0,image_ocr:!1},indexStrategy:{},filterStrategy:[],levelChunkStrategy:{maxLevel:3,isSaveTitle:!0},documentInfo:null}),t3=a("417062"),t6=()=>(0,h.jsx)(S.Y8,{value:H.lC.FastParsing,extra:f.o.t("kl_write_005"),children:f.o.t("kl_write_004")}),t8=a("529801"),t7=e=>e.filter(e=>e.isFilter).map(e=>e.pageIndex).sort((e,t)=>e-t),t9=e=>e.join(" / "),ae=e=>{var{filterValue:t,pdfList:a}=e;return t.map(e=>{var t=a.find(t=>t.uri===e.uri);if(!t)return null;var r=t7(e.filterPagesConfig);if(!r.length)return null;var n=t9(r);return"".concat(t.name,": ").concat(f.o.t("data_filter_values",{filterPages:n}))}).filter(e=>!!e).join("\n")},at=a("61111"),aa=e=>{var{id:t,onClick:a,title:r,selected:n,addonAfter:s}=e;return(0,h.jsxs)("div",{className:ef()("w-full h-8 px-2 py-[6px] rounded-[8px] hover:coz-mg-primary cursor-pointer flex flex-nowrap",n&&"coz-mg-primary"),onClick:()=>a(t),children:[(0,h.jsx)(S.ZT.Text,{className:"w-full coz-fg-primary text-[14px] leading-[20px] grow truncate",ellipsis:!0,children:r}),s]})},ar=e=>(0,h.jsxs)("div",{className:ef()("flex flex-col gap-1 h-full",e.className),children:[(0,h.jsx)("div",{className:"w-full pl-2 h-6 items-center flex",children:(0,h.jsx)("div",{className:"coz-fg-secondary text-[12px] font-[400] leading-4 shrink-0",children:f.o.t("kl_write_105")})}),(0,h.jsx)("div",{className:"flex flex-col gap-1 h-[150px] !overflow-scroll shrink-0",children:e.documents.map(t=>{if(!t.id)return null;var a=t7(t.filterPageConfigList),r=!!a.length,n=t9(a);return(0,h.jsx)(aa,{id:t.id,selected:t.id===e.value,onClick:t=>{e.onChange(t)},title:t.title,addonAfter:r?(0,h.jsx)(S.u,{content:f.o.t("data_filter_values",{filterPages:n}),children:(0,h.jsx)(S.Vp,{color:"primary",className:"flex-shrink-0",children:f.o.t("knowledge_new_002")})}):null})})})]}),an=a("262941"),as=a("90265"),ao=a("876945"),al=a("828108"),ai=a.n(al);a("84094");var ad=e=>parseFloat(e.toFixed(2)),ac=e=>{var{data:t,pdfSize:{naturalHeight:a,naturalWidth:r}}=e,n=t.y,s=t.y+t.height,o=t.x,l=t.x+t.width;return{topPercent:ad(n/a),bottomPercent:ad((a-s)/a),leftPercent:ad(o/r),rightPercent:ad((r-l)/r)}},au=e=>{var{cropSizePercent:{topPercent:t,bottomPercent:a,rightPercent:r,leftPercent:n},pdfSize:{naturalHeight:s,naturalWidth:o}}=e,l=n*o,i=t*s;return{scaleX:1,scaleY:1,rotate:0,x:l,y:i,width:o-l-o*r,height:s-i-s*a}};an.GlobalWorkerOptions.workerSrc="//lf-cdn.coze.cn/obj/unpkg/pdfjs-dist/".concat(an.version,"/build/pdf.worker.min.mjs");var am=()=>({totalPages:0,currentPage:0,percentZoomRatio:100}),ap=e=>{var t,{uri:a,url:r,onChange:n,className:s,initPageCropperSizePercent:o,filterPagesConfig:l,enableCropper:i}=e,{totalPages:d,currentPage:c,percentZoomRatio:u}=am(),[m,p]=(0,U.useState)(!1),[g,_]=(0,U.useState)(d),[x,v]=(0,U.useState)(c),[b,y]=(0,U.useState)(u),w=(0,U.useRef)(null),E=(0,U.useRef)(),j=()=>{if(!!i&&!!w.current){var e={naturalHeight:w.current.height,naturalWidth:w.current.width};E.current=new(ai())(w.current,{dragMode:"crop",zoomable:!0,zoomOnWheel:!1,viewMode:2,modal:!1,background:!1,highlight:!0,crop:t=>{null==n||n({uri:a,filterPagesConfig:l,cropperSizePercent:ac({data:t.detail,pdfSize:e})})},data:o?au({cropSizePercent:o,pdfSize:e}):void 0})}},N=(e,t)=>{var a=10;return"decrease"===t?e-a:e+a},C=e=>{y(t=>{var a,r=N(t,e);return null===(a=E.current)||void 0===a||a.zoomTo(r/100),r})},T=()=>{var e,{currentPage:t,totalPages:a,percentZoomRatio:r}=am();v(t),_(a),y(r),null===(e=E.current)||void 0===e||e.destroy()};return(0,U.useEffect)(()=>(p(!0),()=>{var e;null===(e=E.current)||void 0===e||e.destroy()}),[x]),(0,U.useEffect)(()=>T,[a]),(0,h.jsxs)("div",{className:ef()("relative flex justify-center py-16px",s),children:[m?null:(0,h.jsx)("div",{className:"absolute left-8px top-8px",children:(0,h.jsx)(S.XZ,{checked:null===(t=l.find(e=>e.pageIndex===x))||void 0===t?void 0:t.isFilter,onChange:e=>{null==n||n((0,at.Uy)({uri:a,filterPagesConfig:l,cropperSizePercent:i&&E.current?ac({data:E.current.getData(),pdfSize:E.current.getCanvasData()}):null},t=>{var a=t.filterPagesConfig.find(e=>e.pageIndex===x);if(!a){t.filterPagesConfig.push({pageIndex:x,isFilter:!!e.target.checked});return}a.isFilter=!!e.target.checked}))},children:f.o.t("kl_write_106")})}),m?(0,h.jsx)("div",{className:"absolute w-full flex items-center justify-center",style:{height:624},children:(0,h.jsx)(S.gb,{loading:!0})}):null,(0,h.jsx)("div",{style:{height:624,width:484},children:(0,h.jsx)(as.Z,{className:"w-full",file:r,onLoadSuccess:e=>{var{numPages:t}=e;v(1),_(t)},loading:null,children:(0,h.jsx)(ao.Z,{loading:(0,h.jsx)(S.gb,{loading:!0}),className:"w-full",height:624,width:484,canvasRef:w,pageNumber:x,onRenderSuccess:()=>{p(!1),j()},renderTextLayer:!1,renderAnnotationLayer:!1})})}),m?null:(0,h.jsxs)("div",{className:"absolute right-8px top-8px flex items-center p-[4px] rounded-normal coz-shadow-default",children:[(0,h.jsx)(S.hU,{onClick:()=>{v(e=>Math.max(e-1,1))},disabled:x<=1,icon:(0,h.jsx)(eC.$1i,{})}),(0,h.jsxs)("div",{children:[x,"/",g]}),(0,h.jsx)(S.hU,{onClick:()=>{v(e=>Math.min(e+1,g))},disabled:x>=g,icon:(0,h.jsx)(eC.x5d,{})}),i?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(S.iz,{margin:3,layout:"vertical"}),(0,h.jsx)(S.hU,{disabled:b<=u,onClick:()=>{C("decrease")},icon:(0,h.jsx)(eC.ozt,{})}),(0,h.jsxs)("div",{children:[b,"%"]}),(0,h.jsx)(S.hU,{onClick:()=>{C("increase")},icon:(0,h.jsx)(eC.PwN,{})})]}):null]})]})},ag=a("836894"),a_={};a_.styleTagTransform=A(),a_.setAttributes=L(),a_.insert=T().bind(null,"head"),a_.domAPI=N(),a_.insertStyleElement=I(),E()(ag.Z,a_);var ax=ag.Z&&ag.Z.locals?ag.Z.locals:void 0,av=e=>{var t,a,r,n,s,{pdfList:o,value:l,onChange:i,onCancel:d}=e,c=(0,eG._)(e,["pdfList","value","onChange","onCancel"]),[u,m]=(0,U.useState)(null!==(r=null===(t=o.at(0))||void 0===t?void 0:t.uri)&&void 0!==r?r:""),p=null===(a=o.find(e=>e.uri===u))||void 0===a?void 0:a.url,g=null==l?void 0:l.find(e=>e.uri===u),_=(0,U.useRef)([]),x=e=>{_.current=e},v=()=>{null==i||i(_.current)};return(0,U.useEffect)(()=>{var e,t;if(!!c.visible)return m(null!==(t=null===(e=o.at(0))||void 0===e?void 0:e.uri)&&void 0!==t?t:""),x(null!=l?l:[]),()=>{_.current=[]}},[c.visible]),(0,h.jsx)(S.u_,(0,eA._)((0,eR._)({title:f.o.t("kl_write_103"),size:"xxl",maskClosable:!1,className:ax["filter-modal"],cancelText:f.o.t("Cancel"),okText:f.o.t("Confirm"),onCancel:e=>{v(),null==d||d(e)}},c),{children:(0,h.jsxs)("div",{className:ef()("flex h-full","border border-solid coz-stroke-primary rounded-[8px]","overflow-hidden"),children:[(0,h.jsx)(ar,{className:"w-240px p-[16px]",documents:o.map(e=>{var t,a,r;return{id:null!==(a=e.uri)&&void 0!==a?a:"",title:e.name,filterPageConfigList:null!==(r=null==l?void 0:null===(t=l.find(t=>t.uri===e.uri))||void 0===t?void 0:t.filterPagesConfig)&&void 0!==r?r:[]}}),value:u,onChange:m}),(0,h.jsx)("div",{className:"border-[0.5px] border-solid coz-stroke-primary h-full w-[1px]"}),u&&p?(0,h.jsx)(ap,{enableCropper:!1,className:"flex-[1]",uri:u,url:p,onChange:e=>{if(!l){null==i||i([e]);return}var t=(0,at.Uy)(l,t=>{var a=t.findIndex(t=>t.uri===e.uri);if(a<0){t.push(e);return}t[a]=e});null==i||i(t)},filterPagesConfig:null!==(n=null==g?void 0:g.filterPagesConfig)&&void 0!==n?n:[],initPageCropperSizePercent:null!==(s=null==g?void 0:g.cropperSizePercent)&&void 0!==s?s:null}):null]})}))},ah=(0,S.Q2)(e=>{var{value:t,onChange:a,pdfList:r}=e,[n,s]=(0,U.useState)(!1),o=r&&r.length>0,l=()=>{s(!1)};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("label",{className:"leading-[20px] mb-[4px] flex items-center gap-[4px]",children:[(0,h.jsx)(S.ZT.Text,{fontSize:"14px",weight:500,children:f.o.t("kl_write_102")}),(0,h.jsx)(S.ZT.Text,{fontSize:"12px",link:o,disabled:!o,onClick:()=>{o&&s(!0)},children:f.o.t("kl_write_103")})]}),(0,h.jsx)(S.Kx,{disabled:!0,className:"!coz-mg-primary",autosize:{minRows:3,maxRows:6},value:t&&r?ae({filterValue:t,pdfList:r}):"",placeholder:f.o.t("kl_write_104")}),(0,h.jsx)(av,{value:t,onChange:a,visible:n,onOk:l,onCancel:l,pdfList:null!=r?r:[]})]})}),af="filterStrategy",ab="image_extraction",ay="image_ocr",aS="table_extraction",aw=e=>{var{pdfList:t}=e,a=(0,eG._)(e,["pdfList"]);return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)(S.l0,(0,eA._)((0,eR._)({className:"flex flex-col gap-[4px] [&_.semi-form-field]:p-0"},a),{children:[(0,h.jsx)("div",{className:"h-[24px] leading-[24px]",children:(0,h.jsx)(S.ZT.Text,{fontSize:"14px",weight:500,children:f.o.t("kl_write_100")})}),(0,h.jsxs)(S.l0.Checkbox,{noLabel:!0,field:ab,children:[f.o.t("kl_write_008"),(0,h.jsx)(S.u,{content:f.o.t("pic_not_supported"),children:(0,h.jsx)(eC.L03,{className:"coz-fg-secondary w-[14px] ml-[4px]"})})]}),(0,h.jsx)(S.l0.Checkbox,{noLabel:!0,field:ay,children:f.o.t("kl_write_009")}),(0,h.jsx)(S.l0.Checkbox,{noLabel:!0,field:aS,children:f.o.t("kl_write_010")}),(0,h.jsx)(ah,{field:af,pdfList:t,noLabel:!0,fieldClassName:"!mt-[8px]"})]}))})},aE=e=>{var{parsingStrategy:t,filterStrategy:a,pdfList:r,getParseFormApi:n,onChange:s}=e;return(0,h.jsxs)(h.Fragment,{children:[f.o.t("kl_write_007"),(0,h.jsxs)("div",{className:ef()({hidden:(null==t?void 0:t.parsing_type)!==H.lC.AccurateParsing}),children:[(0,h.jsx)(S.iz,{margin:12}),(0,h.jsx)(aw,{getFormApi:n,pdfList:r,initValues:(0,eA._)((0,eR._)({},(0,t8.Z)(t,"parsing_type")),{filterStrategy:null!=a?a:[]}),onValueChange:e=>{var{filterStrategy:t}=e,a=(0,eG._)(e,["filterStrategy"]);s({parsingStrategy:(0,eF.Z)({},a),filterStrategy:t})}})]})]})},aj=e=>(0,h.jsx)(S.Y8,{value:H.lC.AccurateParsing,extra:(0,h.jsx)(aE,(0,eR._)({},e)),children:f.o.t("kl_write_006")}),aN=e=>{var{segmentMode:t,segmentRule:a=eE.v1,parsingStrategy:r,filterStrategy:n,onChange:s,pdfList:o,getParseFormApi:l}=e;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(eT,{keepDOM:!0,header:f.o.t("kl_write_032"),children:(0,h.jsxs)(eI,{value:null==r?void 0:r.parsing_type,onChange:e=>{s({parsingStrategy:{parsing_type:e}})},children:[(0,h.jsx)(aj,{parsingStrategy:r,filterStrategy:n,pdfList:o,getParseFormApi:l,onChange:s}),(0,h.jsx)(t6,{})]})}),(0,h.jsx)(eT,{header:f.o.t("kl_write_011"),children:(0,h.jsxs)(eI,{value:t,onChange:e=>{s({segmentMode:e,segmentRule:a})},children:[(0,h.jsx)(e1,{}),(0,h.jsx)(e0,{segmentMode:t,segmentRule:a,onChange:s})]})})]})},aC=e=>{var{useStore:t,footer:a}=e,r=(0,U.useRef)(),{setCurrentStep:n,segmentRule:s,segmentMode:o,parsingStrategy:l,filterStrategy:i}=t((0,eV.N)(e=>({setCurrentStep:e.setCurrentStep,segmentRule:e.segmentRule,segmentMode:e.segmentMode||eO.OX.AUTO,parsingStrategy:e.parsingStrategy,filterStrategy:e.filterStrategy}))),{setSegmentMode:d,setParsingStrategyByMerge:c,setSegmentRule:u,setFilterStrategy:m,setLevelChunkStrategy:p,setDocumentInfo:g}=t.getState(),{datasetID:_,docID:x}=(0,q.kF)(),v=eH(e=>{var t,a,n,s,o,l=null===(t=e.document_infos)||void 0===t?void 0:t[0];if(!l||!l.chunk_strategy)return;var i=l.chunk_strategy,m=(0,t3.VR)(l);if(!!m)d(m.segmentMode),u(m.segmentRule),c(null!==(n=l.parsing_strategy)&&void 0!==n?n:{}),null===(a=r.current)||void 0===a||a.setValues(null!==(s=l.parsing_strategy)&&void 0!==s?s:{}),p("maxLevel",null!==(o=i.max_level)&&void 0!==o?o:3),p("isSaveTitle",i.save_title),g(l)});return(0,U.useEffect)(()=>{x&&v({dataset_id:_||"",document_ids:x?[x]:[]})},[]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(aN,{segmentRule:s,segmentMode:o,parsingStrategy:l,filterStrategy:i,getParseFormApi:e=>{r.current=e},onChange:e=>{var{segmentRule:t,segmentMode:a,parsingStrategy:r,filterStrategy:n}=e;void 0!==t&&u(t),void 0!==a&&d(a),!(0,eK.Z)(r)&&c(r),!(0,eK.Z)(n)&&m(n)}}),null==a?void 0:a([{e2e:Y.w.ResegmentUploadUnitNextBtn,type:"hgltplus",theme:"solid",onClick:()=>n(t1.SEGMENT_PREVIEW),text:f.o.t("datasets_createFileModel_NextBtn"),status:(0,eW.Y)(o,s)}])]})},aT=e=>{var t,a=(0,q.kF)(),[r,n]=e(e=>[e.segmentMode,e.segmentRule]),[s,o]=e(e=>[e.setCreateStatus,e.setProgressList]),l=e(e=>e.docReviewList),i=tt(),d=null!==(t=a.docID)&&void 0!==t?t:"",{run:c}=(0,eJ.Z)((0,eX._)(function*(){if(!a.datasetID)throw S.FN.warning({content:f.o.t("datasets_ID_miss"),showClose:!1}),new e3.sH(eY.b.KnowledgeResegment,"".concat(eY.b.KnowledgeResegment,": missing datasets_id"));var{parsingStrategy:t,filterStrategy:c}=e.getState();try{var{document_infos:u=[]}=yield B.MJ.Resegment((0,eF.Z)({},{dataset_id:a.datasetID,document_ids:[d],review_ids:l.map(e=>e.review_id),chunk_strategy:ts(r,n),parsing_strategy:t},e7(c.at(0))));Object.keys(u).length&&(s(v.uy.GET_TASK_PROGRESS),yield i(u,{onProgressing:e=>{o(e)},onFinish:()=>{s(v.uy.TASK_FINISH)}}))}catch(e){eq.s5.errorEvent(eq.xW.KNOWLEDGE,{eventName:eY.b.KnowledgeProcessDocument,error:e})}}),{manual:!0});return c},aD=a("356696"),aL={};aL.styleTagTransform=A(),aL.setAttributes=L(),aL.insert=T().bind(null,"head"),aL.domAPI=N(),aL.insertStyleElement=I(),E()(aD.Z,aL);var ak=aD.Z&&aD.Z.locals?aD.Z.locals:void 0,aI=e=>{var{useStore:t,footer:a}=e,r=(0,q.EV)(),n=t(e=>e.progressList),s=t(e=>e.createStatus),o=(0,q.kF)(),l=aT(t);return(0,U.useEffect)(()=>{l()},[]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(el,{progressList:n,createStatus:s}),null==a?void 0:a({btns:[{e2e:Y.w.ResegmentUnitConfirmBtn,type:"hgltplus",theme:"solid",text:f.o.t("variable_reset_yes"),onClick:()=>{var e,t=(0,e5.S)();null===(e=r.toResource)||void 0===e||e.call(r,"knowledge",o.datasetID,t)}}],prefix:(0,h.jsx)("span",{className:ak["footer-sub-tip"],children:(0,et.mZ)(s)})})]})},aR=a("431282"),aA=a("347852"),aZ=a("420998"),aM=e=>{var t,a,r,n,{docReviewList:s,setDocReviewList:o,currentReviewID:l,setCurrentReviewID:i,levelSegments:d,setLevelSegments:c,selectionIDs:u,setSelectionIDs:m,segmentMode:p,datasetID:g,segmentInfo:_}=e,[x,v]=(0,U.useState)(!0),b=s.find(e=>e.review_id===l),y=null==b?void 0:b.document_type,w=["docx","doc"].includes(null!=y?y:"")?null!==(a=null==b?void 0:b.preview_tos_url)&&void 0!==a?a:"":null!==(r=null==b?void 0:b.tos_url)&&void 0!==r?r:"",E=null!==(n=null==b?void 0:b.doc_tree_tos_url)&&void 0!==n?n:"",{loading:j,runAsync:N}=(0,eJ.Z)((0,eX._)(function*(){return 0===(yield B.MJ.SaveDocumentReview({review_id:l,dataset_id:g,doc_tree_json:JSON.stringify({chunks:d})})).code}),{manual:!0}),{runAsync:C}=(0,eJ.Z)((0,eX._)(function*(){var e,t=yield B.MJ.MGetDocumentReview({dataset_id:g,review_ids:s.map(e=>{var t;return null!==(t=e.review_id)&&void 0!==t?t:""})});0===t.code&&(null==o||o(null!==(e=t.reviews)&&void 0!==e?e:[]))}),{manual:!0}),{pdfNode:T,numPages:D,currentPage:L,onNext:k,onBack:I,scale:R,increaseScale:A,decreaseScale:Z}=(0,aZ.Is)({fileUrl:w}),{content:M,loading:F}=(0,aR.zd)((null==b?void 0:b.status)===H.CT.Enable&&E?E:void 0);(0,U.useEffect)(()=>{if(M){var e;c((0,aA.D)(null!==(e=null==M?void 0:M.chunks)&&void 0!==e?e:[],null==b?void 0:b.document_name))}},[M]);var O=e=>{switch(e){case H.CT.Failed:return(0,h.jsx)(S.Vp,{size:"mini",color:"red",children:f.o.t("knowlege_qqq_003")});case H.CT.Processing:return(0,h.jsx)(S.Vp,{size:"mini",children:f.o.t("knowlege_qqq_002")});case H.CT.Enable:default:return null}};return(0,h.jsx)("div",{className:"w-full grow flex flex-col item-center justify-center",children:(0,h.jsx)("div",{className:"flex w-full h-full border border-solid coz-stroke-primary coz-bg-max rounded-[8px]",children:(0,h.jsxs)("div",{className:"w-full h-full flex",children:[(0,h.jsxs)("div",{className:ef()("w-[300px] h-full px-4 flex flex-col","transition-all duration-100 ease-in-out",!x&&"!w-[0px] !p-0 !invisible"),children:[(0,h.jsxs)("div",{className:"w-full flex justify-between h-[48px] pl-[8px] items-center shrink-0",children:[(0,h.jsxs)("div",{className:"text-[14px] font-[500] leading-[20px] coz-fg-plus shrink-0 flex items-center gap-[4px]",children:[p===eO.OX.CUSTOM?f.o.t("datasets_createFileModel_step3_custom"):null,p===eO.OX.AUTO?f.o.t("datasets_createFileModel_step3_auto"):null,p===eO.OX.LEVEL?f.o.t("knowledge_level_001"):null,_?(0,h.jsx)(S.u,{content:_,style:{maxWidth:500},children:(0,h.jsx)(eC.L03,{className:"coz-fg-secondary cursor-pointer"})}):null]}),(0,h.jsx)(S.hU,{icon:(0,h.jsx)(eC.m7o,{}),color:"secondary",onClick:()=>{v(!1)}})]}),(0,h.jsx)(S.yC,{wrapperClassName:"w-full h-[500px] grow flex flex-col",childStyle:{width:"100%",height:"100%"},spinning:j||F,children:(0,h.jsx)(aZ.yt,{list:s.map(e=>{var t,a,r,n;return{id:null!==(t=e.review_id)&&void 0!==t?t:"",title:null!==(a=e.document_name)&&void 0!==a?a:"",tosUrl:null!==(r=e.doc_tree_tos_url)&&void 0!==r?r:"",tag:O(null!==(n=e.status)&&void 0!==n?n:H.CT.Enable)}}),selectedID:l,onClick:(t=(0,eX._)(function*(e){e!==l&&(yield N(),yield C(),c([])),i(e)}),function(e){return t.apply(this,arguments)}),levelSegments:d,setLevelSegments:c,setSelectionIDs:m,treeVisible:p===eO.OX.LEVEL})})]}),(0,h.jsxs)("div",{className:"h-full w-[calc(100%-300px)] flex grow",children:[(0,h.jsxs)("div",{className:ef()("h-full w-1/2 flex-1",x&&"border border-r-0 border-y-0 border-solid coz-stroke-primary","flex flex-col"),children:[(0,h.jsx)("div",{className:ef()("w-full flex justify-between h-[48px] px-[16px] items-center coz-bg-max","border border-x-0 border-t-0 border-solid coz-stroke-primary",!x&&"rounded-tl-[8px]"),children:(0,h.jsxs)("div",{className:"flex w-full h-full items-center justify-between",children:[(0,h.jsxs)("div",{className:"flex h-full items-center",children:[x?null:(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(S.hU,{icon:(0,h.jsx)(eC.m7o,{className:"rotate-180"}),color:"secondary",className:"mr-[8px]",onClick:()=>{v(!0)}}),(0,h.jsx)("div",{className:"w-[1px] h-[12px] coz-mg-primary mr-[8px]"})]}),(0,h.jsx)("div",{className:"text-[14px] font-[500] leading-[20px] coz-fg-plus",children:f.o.t("knowledge_level_010")})]}),["pdf","docx","doc"].includes(null!=y?y:"")&&D>=1?(0,h.jsxs)("div",{className:"flex h-full items-center gap-[3px]",children:[(0,h.jsx)(S.hU,{icon:(0,h.jsx)(eC.$1i,{}),size:"small",color:"secondary",onClick:I}),(0,h.jsxs)("div",{className:"coz-fg-secondary text-[12px] font-[400] leading-[24px]",children:[L," / ",D]}),(0,h.jsx)(S.hU,{icon:(0,h.jsx)(eC.x5d,{}),size:"small",color:"secondary",onClick:k}),(0,h.jsx)("div",{className:"w-[1px] h-[12px] coz-mg-primary"}),(0,h.jsx)(S.hU,{icon:(0,h.jsx)(eC.ozt,{}),size:"small",color:"secondary",onClick:Z}),(0,h.jsxs)("div",{className:"coz-fg-secondary text-[12px] font-[400] leading-[16px]",children:[Math.round(100*R),"%"]}),(0,h.jsx)(S.hU,{icon:(0,h.jsx)(eC.PwN,{}),size:"small",color:"secondary",onClick:A})]}):null]})}),(0,h.jsxs)("div",{className:"grow w-full h-[650px] flex flex-col items-center overflow-auto",children:["md"===y?(0,h.jsx)(aZ.SA,{fileUrl:w}):null,"txt"===y?(0,h.jsx)(aZ.Tn,{fileUrl:w}):null,["docx","pdf","doc"].includes(null!=y?y:"")?(0,h.jsx)("div",{className:"grow w-full",children:T}):null]})]}),(0,h.jsxs)("div",{className:ef()("h-full w-1/2 flex-1 coz-bg-max","border border-r-0 border-y-0 border-solid coz-stroke-primary","rounded-r-[8px]","flex flex-col"),children:[(0,h.jsx)("div",{className:ef()("w-full flex justify-between h-[48px] px-[16px] items-center","border border-x-0 border-t-0 border-solid coz-stroke-primary"),children:(0,h.jsx)("div",{className:"text-[14px] font-[500] leading-[20px] coz-fg-plus",children:f.o.t("knowledge_level_011")})}),(0,h.jsx)("div",{className:ef()("w-full h-[650px] grow flex flex-col items-center overflow-auto","p-4 pb-0"),children:(0,h.jsx)(S.yC,{wrapperClassName:"!w-full min-h-[650px] grow",childStyle:{width:"100%",minHeight:"100%"},spinning:!M,children:(0,h.jsx)(z.pR,{readonly:!0,documentId:null!=l?l:"",selectionIDs:u,chunks:d.map(e=>{var t;return(0,eA._)((0,eR._)({},e),{text_knowledge_editor_chunk_uuid:(0,t_.x0)(),sequence:null===(t=e.slice_sequence)||void 0===t?void 0:t.toString(),content:e.text})})})})})]})]})]})})})},aF=e=>{var t,{useStore:a,footer:r}=e,n=(0,q.kF)(),s=a(e=>e.setCurrentStep),o=a(e=>e.segmentMode),l=a(e=>e.docReviewList),i=a(e=>e.setDocReviewList),d=a(e=>e.currentReviewID),c=a(e=>e.setCurrentReviewID),u=a(e=>e.selectionIDs),m=a(e=>e.setSelectionIDs),p=a(e=>e.levelSegments),g=a(e=>e.setLevelSegments),_=a(e=>e.parsingStrategy),x=a(e=>e.levelChunkStrategy),b=a(e=>e.segmentRule),y=a(e=>e.documentInfo),w=(0,U.useMemo)(()=>!!l.find(e=>e.document_name===(null==y?void 0:y.name)),[l,y]);(0,U.useEffect)(()=>{var e,t=(e=(0,eX._)(function*(){var e,t,a=yield B.MJ.CreateDocumentReview({dataset_id:n.datasetID,reviews:[{document_id:null==y?void 0:y.document_id}],parsing_strategy:_,chunk_strategy:ts(o,b,x)});0===a.code&&(null===(e=a.reviews)||void 0===e?void 0:e.length)&&(i(a.reviews),c(null!==(t=a.reviews[0].review_id)&&void 0!==t?t:""))}),function(){return e.apply(this,arguments)});!w&&t()},[w,_,o,b,x,y]);var{run:E,cancel:j}=(0,eJ.Z)((0,eX._)(function*(){var e,t=yield B.MJ.MGetDocumentReview({dataset_id:n.datasetID,review_ids:l.map(e=>{var t;return null!==(t=e.review_id)&&void 0!==t?t:""})});0===t.code&&i(null!==(e=t.reviews)&&void 0!==e?e:[])}),{manual:!0,pollingInterval:2e3});(0,U.useEffect)(()=>(w&&E(),()=>{j()}),[w]);var N=l.length>0&&l.every(e=>void 0!==e.status&&e.status!==H.CT.Processing);(0,U.useEffect)(()=>{N&&j()},[N]);var{loading:C,run:T}=(0,eJ.Z)((0,eX._)(function*(){return 0===(yield B.MJ.SaveDocumentReview({review_id:d,dataset_id:n.datasetID,doc_tree_json:JSON.stringify({chunks:p})})).code}),{manual:!0,onSuccess:e=>{e&&s(t1.EMBED_PROGRESS)},onError:()=>{S.FN.error("")}});return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(aM,{docReviewList:l,segmentMode:o,currentReviewID:d,setCurrentReviewID:c,selectionIDs:u,setSelectionIDs:m,levelSegments:p,setLevelSegments:g,datasetID:n.datasetID,segmentInfo:o!==eO.OX.AUTO?(0,h.jsxs)("div",{className:ef()("flex flex-col","text-[14px] font-[400] leading-[20px] coz-fg-primary"),children:[o===eO.OX.LEVEL?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("span",{children:[""," ",f.o.t("knowledge_level_004"),":",x.maxLevel]}),x.isSaveTitle?(0,h.jsxs)("span",{children:[""," ",f.o.t("knowledge_level_005")]}):null]}):null,o===eO.OX.CUSTOM?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("span",{children:[""," ",f.o.t("datasets_Custom_segmentID"),":",b.separator.type!==eO.IB.CUSTOM?null===(t=(0,eE.Px)().find(e=>e.value===b.separator.type))||void 0===t?void 0:t.label:b.separator.customValue]}),(0,h.jsxs)("span",{children:[""," ",f.o.t("datasets_Custom_maxLength"),":",b.maxTokens]}),(0,h.jsxs)("span",{children:[""," ",f.o.t("kl_write_014"),": ",b.overlap]}),b.preProcessRules.includes(eO.dV.REMOVE_SPACES)?(0,h.jsxs)("span",{children:[""," ",f.o.t("datasets_Custom_rule_replace")]}):null,b.preProcessRules.includes(eO.dV.REMOVE_EMAILS)?(0,h.jsxs)("span",{children:[""," ",f.o.t("datasets_Custom_rule_delete")]}):null]}):null]}):null}),null==r?void 0:r([{e2e:Y.w.UploadUnitUpBtn,type:"primary",theme:"light",onClick:()=>s(t1.SEGMENT_CLEANER),text:f.o.t("datasets_createFileModel_previousBtn")},{e2e:Y.w.UploadUnitNextBtn,type:"hgltplus",theme:"solid",status:C?v.xZ.LOADING:v.xZ.ENABLE,onClick:(0,eX._)(function*(){yield T()}),text:f.o.t("datasets_createFileModel_NextBtn")}])]})},aO={steps:[{content:e=>(0,h.jsx)(aC,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("kl_write_107"),step:t1.SEGMENT_CLEANER},{content:e=>(0,h.jsx)(aF,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("knowlege_qqq_001"),step:t1.SEGMENT_PREVIEW,showThisStep:()=>!0},{content:e=>(0,h.jsx)(aI,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("datasets_createFileModel_step4"),step:t1.EMBED_PROGRESS}],createStore:()=>(0,eM.Ue)()((0,eZ.mW)(function(e,t){for(var a=arguments.length,r=Array(a>2?a-2:0),n=2;n<a;n++)r[n-2]=arguments[n];return(0,eA._)((0,eR._)({},eP(e,t,...r),t4(e,t,...r),(0,q.Y8)(e,t,...r),t5()),{reset:()=>{e(t5())},setFilterStrategy:t=>{e({filterStrategy:t},!1,"setFilterStrategy")},setIndexStrategyByMerge:a=>{e({indexStrategy:(0,eF.Z)({},t().indexStrategy,a)},!1,"setIndexStrategyByMerge")},setParsingStrategyByMerge:a=>{e({parsingStrategy:(0,eF.Z)({},t().parsingStrategy,a)},!1,"setParsingStrategyByMerge")},setLevelChunkStrategy:(t,a)=>{e(e=>(0,eA._)((0,eR._)({},e),{levelChunkStrategy:(0,eA._)((0,eR._)({},e.levelChunkStrategy),{[t]:a})}))},setDocumentInfo:t=>{e({documentInfo:t})}})},{enabled:!1,name:"Coz.Data.TextLocalResegment"})),useUploadMount:e=>tr()};var aU=((l={})[l.UPLOAD_FILE=0]="UPLOAD_FILE",l[l.SEGMENT_CLEANER=1]="SEGMENT_CLEANER",l[l.SEGMENT_PREVIEW=2]="SEGMENT_PREVIEW",l[l.EMBED_PROGRESS=3]="EMBED_PROGRESS",l),aP=()=>({currentReviewID:void 0,selectionID:void 0,docReviewList:[]}),az=e=>(0,eA._)((0,eR._)({},aP()),{setCurrentReviewID:t=>e(()=>({currentReviewID:t})),setSelectionIDs:t=>e(()=>({selectionIDs:t})),setDocReviewList:t=>e(()=>({docReviewList:t}))}),aB=()=>(0,eA._)((0,eR._)({},eU(),aP(),(0,q.G6)()),{currentStep:aU.UPLOAD_FILE,parsingStrategy:{parsing_type:H.lC.AccurateParsing,image_extraction:!0,table_extraction:!0,image_ocr:!1},indexStrategy:{},filterStrategy:[],levelChunkStrategy:{maxLevel:3,isSaveTitle:!0}}),aG=a("615655"),aV=e=>{var t,{useStore:a,footer:r}=e,n=(0,q.kF)(),s=a(e=>e.setCurrentStep),o=a(e=>e.unitList),l=a(e=>e.segmentMode),i=a(e=>e.docReviewList),d=a(e=>e.setDocReviewList),c=a(e=>e.currentReviewID),u=a(e=>e.setCurrentReviewID),m=a(e=>e.selectionIDs),p=a(e=>e.setSelectionIDs),g=a(e=>e.levelSegments),_=a(e=>e.setLevelSegments),x=a(e=>e.parsingStrategy),b=a(e=>e.levelChunkStrategy),y=a(e=>e.segmentRule),w=(0,U.useMemo)(()=>(0,aG.Z)(i.map(e=>e.document_name),o.map(e=>e.name)),[i,o]);(0,U.useEffect)(()=>{var e,t=(e=(0,eX._)(function*(){var e,t,{unitList:r}=a.getState(),s=yield B.MJ.CreateDocumentReview({dataset_id:n.datasetID,reviews:r.map(e=>({tos_uri:e.uri,document_name:e.name,document_type:e.type})),parsing_strategy:x,chunk_strategy:ts(l,y,b)});0===s.code&&(null===(e=s.reviews)||void 0===e?void 0:e.length)&&(d(s.reviews),u(null!==(t=s.reviews[0].review_id)&&void 0!==t?t:""))}),function(){return e.apply(this,arguments)});!w&&t()},[w,x,l,y,b]);var{run:E,cancel:j}=(0,eJ.Z)((0,eX._)(function*(){var e,t=yield B.MJ.MGetDocumentReview({dataset_id:n.datasetID,review_ids:i.map(e=>{var t;return null!==(t=e.review_id)&&void 0!==t?t:""})});0===t.code&&d(null!==(e=t.reviews)&&void 0!==e?e:[])}),{manual:!0,pollingInterval:2e3});(0,U.useEffect)(()=>(w&&E(),()=>{j()}),[w]);var N=i.length>0&&i.every(e=>void 0!==e.status&&e.status!==H.CT.Processing);(0,U.useEffect)(()=>{N&&j()},[N]);var{loading:C,run:T}=(0,eJ.Z)((0,eX._)(function*(){return 0===(yield B.MJ.SaveDocumentReview({review_id:c,dataset_id:n.datasetID,doc_tree_json:JSON.stringify({chunks:g})})).code}),{manual:!0,onSuccess:e=>{e&&s(aU.EMBED_PROGRESS)},onError:()=>{S.FN.error("")}});return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(aM,{docReviewList:i,setDocReviewList:d,segmentMode:l,currentReviewID:c,setCurrentReviewID:u,selectionIDs:m,setSelectionIDs:p,levelSegments:g,setLevelSegments:_,datasetID:n.datasetID,segmentInfo:l!==eO.OX.AUTO?(0,h.jsxs)("div",{className:ef()("flex flex-col","text-[14px] font-[400] leading-[20px] coz-fg-primary"),children:[l===eO.OX.LEVEL?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("span",{children:[""," ",f.o.t("knowledge_level_004"),":",b.maxLevel]}),b.isSaveTitle?(0,h.jsxs)("span",{children:[""," ",f.o.t("knowledge_level_005")]}):null]}):null,l===eO.OX.CUSTOM?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("span",{children:[""," ",f.o.t("datasets_Custom_segmentID"),":",y.separator.type!==eO.IB.CUSTOM?null===(t=(0,eE.Px)().find(e=>e.value===y.separator.type))||void 0===t?void 0:t.label:y.separator.customValue]}),(0,h.jsxs)("span",{children:[""," ",f.o.t("datasets_Custom_maxLength"),":",y.maxTokens]}),(0,h.jsxs)("span",{children:[""," ",f.o.t("kl_write_014"),": ",y.overlap]}),y.preProcessRules.includes(eO.dV.REMOVE_SPACES)?(0,h.jsxs)("span",{children:[""," ",f.o.t("datasets_Custom_rule_replace")]}):null,y.preProcessRules.includes(eO.dV.REMOVE_EMAILS)?(0,h.jsxs)("span",{children:[""," ",f.o.t("datasets_Custom_rule_delete")]}):null]}):null]}):null}),null==r?void 0:r([{e2e:Y.w.UploadUnitUpBtn,type:"primary",theme:"light",onClick:()=>{d([]),s(aU.SEGMENT_CLEANER)},text:f.o.t("datasets_createFileModel_previousBtn")},{e2e:Y.w.UploadUnitNextBtn,type:"hgltplus",theme:"solid",status:C?v.xZ.LOADING:v.xZ.ENABLE,onClick:(0,eX._)(function*(){yield T()}),text:f.o.t("datasets_createFileModel_NextBtn")}])]})},aK=a("975083"),aW=a("735997"),aX=e=>{var{unitList:t=[]}=e;if(0===t.length)return null;var a=e=>{var{record:t}=e,a=(0,$.Z)(null==t?void 0:t.status);return{formatType:te.a5.Text,subText:(0,ed.G8)(t),actions:[a===ea.N.Failed?(0,h.jsx)(ed.vL,(0,eR._)({},e)):null,a===ea.N.Complete?(0,h.jsx)(ed.k1,(0,eR._)({},e)):null,(0,h.jsx)(ed.Zq,(0,eR._)({},e))]}};return(0,h.jsx)(aW.n,(0,eA._)((0,eR._)({},e),{type:v.Cm.TEXT_DOC,getColumns:(t,r)=>a({record:t,index:r,params:(0,eA._)((0,eR._)({},e),{type:v.Cm.TEXT_DOC})})}))},aJ=a("116497"),aq=e=>{var t,{unitList:a,setUnitList:r}=e;return t=(0,eX._)(function*(e,t){try{var{fileInstance:n}=e;if(n){var{name:s}=n,o=(0,et.mD)(s),l=yield(0,et.y3)(n),i=yield B.nA.UploadFile({file_head:{file_type:o,biz_type:tw.ym.BIZ_BOT_DATASET},data:l});r((0,et.wV)({unitList:a,data:null==i?void 0:i.data,fileInstance:n,index:t}))}}catch(e){eq.s5.errorEvent(eq.xW.KNOWLEDGE,{eventName:eY.b.KnowledgeUploadFile,error:e})}}),function(e,a){return t.apply(this,arguments)}},aY=e=>{var t,a,{useStore:r,footer:n}=e,s=null===(a=(0,U.useContext)(aK.J))||void 0===a?void 0:null===(t=a.paramsStore)||void 0===t?void 0:t.call(a,e=>{var t;return null===(t=e.params)||void 0===t?void 0:t.isDouyinBot}),o=r(e=>e.unitList),l=r(e=>e.setUnitList),i=r(e=>e.setCurrentStep),d=aq({unitList:o,setUnitList:l}),c=(0,et.td)(),u=(0,tS.WT)(s?"DOUYIN":"DEFAULT"),m=u.addUnitMaxLimit,p=(0,U.useMemo)(()=>0===o.length||o.some(e=>0===e.name.length||e.status!==v.Dm.SUCCESS)?v.xZ.DISABLE:v.xZ.ENABLE,[o]),g=(0,U.useMemo)(()=>!!c,[c]),_=(0,U.useMemo)(()=>g?1:m,[g,m]),x=(0,U.useMemo)(()=>g&&(null==o?void 0:o.length)===1,[o,g]),b=e=>{var t=e;c&&(t=e.map(e=>(0,eA._)((0,eR._)({},e),{docId:c}))),l(t)},y=u.acceptFileTypes.join(",");return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(ei.p,{action:"",accept:y,dragMainText:f.o.t("datasets_createFileModel_step2_UploadDoc"),dragSubText:f.o.t("datasets_createFileModel_step2_UploadDoc_description",{fileFormat:u.fileFormatString,maxDocNum:_,filesize:"".concat(eE.G2,"MB"),pdfPageNum:aJ.XC}),limit:_,unitList:o,multiple:_>1,style:x?{visibility:"hidden",height:0}:void 0,setUnitList:b,onFinish:b}),o.length>0?(0,h.jsx)("div",{className:"overflow-y-auto mt-[16px]",children:(0,h.jsx)(aX,{edit:!g,unitList:o,onChange:l,onRetry:d})}):null,null==n?void 0:n([{type:"hgltplus",theme:"solid",text:f.o.t("datasets_createFileModel_NextBtn"),status:p,onClick:()=>{i(aU.SEGMENT_CLEANER)},e2e:Y.w.UploadUnitNextBtn}])]})},aH=e=>{var{useStore:t,footer:a}=e,{unitList:r,setCurrentStep:n,segmentRule:s,segmentMode:o,parsingStrategy:l,filterStrategy:i}=t((0,eV.N)(e=>({unitList:e.unitList,setCurrentStep:e.setCurrentStep,segmentRule:e.segmentRule,segmentMode:e.segmentMode||eO.OX.AUTO,parsingStrategy:e.parsingStrategy,filterStrategy:e.filterStrategy}))),{setSegmentMode:d,setParsingStrategyByMerge:c,setSegmentRule:u,setFilterStrategy:m,setEnableStorageStrategy:p}=t.getState(),{datasetID:g,docID:_}=(0,q.kF)(),v=eH(e=>{var t=(0,et.VR)((0,x.Z)(e,"document_infos[0]",{}));t&&(u(t.segmentRule),d(t.segmentMode))});(0,U.useEffect)(()=>{_&&v({dataset_id:g||"",document_ids:[_||""]})},[]),(0,U.useEffect)(()=>{g&&B.MJ.DatasetDetail({dataset_ids:[g]}).then(e=>{var t,a=null===(t=e.dataset_details)||void 0===t?void 0:t[g];p((0,et.UQ)(a))})},[g]);var b=(0,eW.Y)(o,s);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(aN,{pdfList:r.filter(e=>"pdf"===e.type.toLocaleLowerCase()),segmentRule:s,segmentMode:o,parsingStrategy:l,filterStrategy:i,onChange:e=>{var{segmentRule:t,segmentMode:a,parsingStrategy:r,filterStrategy:n}=e;void 0!==t&&u(t),void 0!==a&&d(a),!(0,eK.Z)(r)&&c(r),!(0,eK.Z)(n)&&m(n)}}),null==a?void 0:a([{e2e:Y.w.UploadUnitUpBtn,type:"primary",theme:"light",onClick:()=>n(aU.UPLOAD_FILE),text:f.o.t("datasets_createFileModel_previousBtn")},{e2e:Y.w.UploadUnitNextBtn,type:"hgltplus",theme:"solid",onClick:()=>n(aU.SEGMENT_PREVIEW),text:f.o.t("datasets_createFileModel_NextBtn"),status:b}])]})},aQ=a("846954"),a$={};a$.styleTagTransform=A(),a$.setAttributes=L(),a$.insert=T().bind(null,"head"),a$.domAPI=N(),a$.insertStyleElement=I(),E()(aQ.Z,a$);var a0=aQ.Z&&aQ.Z.locals?aQ.Z.locals:void 0,a1=e=>{var{useStore:t,footer:a}=e,r=(0,q.EV)(),n=(0,q.kF)(),{unitList:s,progressList:o,createStatus:l,segmentMode:i,segmentRule:d,enableStorageStrategy:c,storageLocation:u,openSearchConfig:m,docReviewList:p}=t((0,eV.N)(e=>({unitList:e.unitList,progressList:e.progressList,createStatus:e.createStatus,segmentMode:e.segmentMode,segmentRule:e.segmentRule,enableStorageStrategy:e.enableStorageStrategy,storageLocation:e.storageLocation,openSearchConfig:e.openSearchConfig,docReviewList:e.docReviewList}))),g=ta(t,{onSuccess:e=>{var t,a=null!==(t=e.document_infos)&&void 0!==t?t:[];(0,et.As)(a,eY.b.KnowledgeProcessDocument)}});return(0,U.useEffect)(()=>{var{parsingStrategy:e,filterStrategy:a,levelChunkStrategy:r}=t.getState();g((0,eA._)((0,eR._)({},function(e){var t,a,r,{unitList:n,segmentMode:s,segmentRule:o,pdfFilterValueList:l,levelChunkStrategy:i,enableStorageStrategy:d,storageLocation:c,openSearchConfig:u,docReviewList:m}=e;var p={format_type:H.a5.Text,document_bases:(t=n,a=l,r=m,t.map((e,t)=>{var n,s=a.find(t=>t.uri===e.uri),o={name:e.name,source_info:{tos_uri:e.uri,document_source:H.NZ.Document,review_id:null===(n=r[t])||void 0===n?void 0:n.review_id}};return(0,eF.Z)({},o,e7(s))})),chunk_strategy:ts(s,o,i)};return p}({unitList:s,segmentMode:i,segmentRule:d,pdfFilterValueList:a,levelChunkStrategy:r,docReviewList:p,enableStorageStrategy:c,storageLocation:u,openSearchConfig:m})),{parsing_strategy:e}))},[]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(el,{progressList:o,createStatus:l}),null==a?void 0:a({btns:[{e2e:Y.w.CreateUnitConfirmBtn,type:"hgltplus",theme:"solid",text:f.o.t("variable_reset_yes"),onClick:()=>{var e,t=(0,e5.S)();null===(e=r.toResource)||void 0===e||e.call(r,"knowledge",n.datasetID,t)}}],prefix:(0,h.jsx)("span",{className:a0["footer-sub-tip"],children:(0,et.mZ)(l)})})]})},a2={steps:[{content:e=>(0,h.jsx)(aY,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:e.checkStatus}),title:f.o.t("datasets_createFileModel_step2"),step:aU.UPLOAD_FILE},{content:e=>(0,h.jsx)(aH,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("kl_write_107"),step:aU.SEGMENT_CLEANER},{content:e=>(0,h.jsx)(aV,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("knowlege_qqq_001"),step:aU.SEGMENT_PREVIEW,showThisStep:()=>!0},{content:e=>(0,h.jsx)(a1,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("datasets_createFileModel_step4"),step:aU.EMBED_PROGRESS}],createStore:()=>(0,eM.Ue)()((0,eZ.mW)(function(e,t){for(var a=arguments.length,r=Array(a>2?a-2:0),n=2;n<a;n++)r[n-2]=arguments[n];return(0,eA._)((0,eR._)({},eP(e,t,...r),az(e,t,...r),(0,q.Y8)(e,t,...r),(0,q.j_)(e,t,...r),aB()),{reset:()=>{e(aB())},setFilterStrategy:t=>{e({filterStrategy:t},!1,"setFilterStrategy")},setIndexStrategyByMerge:a=>{e({indexStrategy:(0,eF.Z)({},t().indexStrategy,a)},!1,"setIndexStrategyByMerge")},setParsingStrategyByMerge:a=>{e({parsingStrategy:(0,eF.Z)({},t().parsingStrategy,a)},!1,"setParsingStrategyByMerge")},setLevelChunkStrategy:(t,a)=>{e(e=>(0,eA._)((0,eR._)({},e),{levelChunkStrategy:(0,eA._)((0,eR._)({},e.levelChunkStrategy),{[t]:a})}))}})},{enabled:!1,name:"Coz.Data.TextLocalAddUpdate"})),useUploadMount:e=>tr()};var a4=((i={})[i.UPLOAD_CONTENT=0]="UPLOAD_CONTENT",i[i.SEGMENT_CLEANER=1]="SEGMENT_CLEANER",i[i.EMBED_PROGRESS=2]="EMBED_PROGRESS",i),a5=()=>(0,eA._)((0,eR._)({},eU()),{currentStep:a4.UPLOAD_CONTENT,docName:"",docContent:""}),a3=function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return(0,eA._)((0,eR._)({},eP(e,...a),a5()),{reset:()=>{e(a5())},setDocContent:t=>{e({docContent:t})},setDocName:t=>{e({docName:t})}})};var a6=((d=(0,V.L)("editor-toolbar-actions")).registerSome([{type:"upload-image",module:{Component:G.IF}}]),d);var a8=((c=(0,V.L)("editor-context-actions")).registerSome([{type:"upload-image",module:{Component:G.E1}}]),c),a7=a("153745"),a9={};a9.styleTagTransform=A(),a9.setAttributes=L(),a9.insert=T().bind(null,"head"),a9.domAPI=N(),a9.insertStyleElement=I(),E()(a7.Z,a9);var re=a7.Z&&a7.Z.locals?a7.Z.locals:void 0,rt=e=>{var t,a,{useStore:r,footer:n}=e,s=r(e=>e.docName),o=r(e=>e.docContent),l=null===(a=(0,U.useContext)(q.JK))||void 0===a?void 0:null===(t=a.paramsStore)||void 0===t?void 0:t.call(a,e=>{var t;return null===(t=e.params)||void 0===t?void 0:t.isDouyinBot}),i=r(e=>e.setDocName),d=r(e=>e.setDocContent),c=r(e=>e.setCurrentStep),u=(0,U.useMemo)(()=>s&&o?v.xZ.ENABLE:v.xZ.DISABLE,[s,o]),m=(0,U.useMemo)(()=>({text_knowledge_editor_chunk_uuid:(0,t_.x0)(),content:""}),[]),{editor:p}=(0,z.nR)({chunk:m,editorProps:{attributes:{class:"h-[360px] overflow-y-auto"}},onChange:e=>{var t;d(null!==(t=e.content)&&void 0!==t?t:"")}});return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(eu.l0,{layout:"vertical",showValidateIcon:!1,className:re["custom-text-form"],children:[(0,h.jsx)(J.NB,{"data-testid":Y.w.CustomUploadNameInput,className:re["doc-name-input"],field:"docName",autoFocus:!0,trigger:"blur",onChange:e=>i(e),maxLength:100,placeholder:f.o.t("knowledge_upload_text_custom_doc_name_tips"),label:f.o.t("knowledge_upload_text_custom_doc_name"),rules:[{required:!0,message:f.o.t("knowledge_upload_text_custom_doc_name_tips")}]}),(0,h.jsx)(eu.l0.Slot,{className:re["form-segment-content"],label:{text:f.o.t("knowledge_upload_text_custom_doc_content")},children:(0,h.jsx)(z.R_,{editor:p,placeholder:f.o.t("knowledge_upload_text_custom_doc_content_tips"),editorContextMenuItemsRegistry:l?void 0:a8,editorBottomSlot:l?null:(0,h.jsx)(z.go,{editor:p,actionRegistry:a6})})})]}),null==n?void 0:n([{e2e:Y.w.UploadUnitNextBtn,type:"hgltplus",theme:"solid",text:f.o.t("datasets_createFileModel_NextBtn"),status:u,onClick:()=>{c(a4.SEGMENT_CLEANER)}}])]})},ra=e=>{var t,{useStore:a,footer:r}=e,{setCurrentStep:n,segmentRule:s,setSegmentRule:o,segmentMode:l,setSegmentMode:i,setEnableStorageStrategy:d,storageLocation:c,testConnectionSuccess:u}=a((0,eV.N)(e=>({setCurrentStep:e.setCurrentStep,segmentRule:e.segmentRule,setSegmentRule:e.setSegmentRule,segmentMode:e.segmentMode||eO.OX.AUTO,setSegmentMode:e.setSegmentMode,setEnableStorageStrategy:e.setEnableStorageStrategy,storageLocation:e.storageLocation,testConnectionSuccess:e.testConnectionSuccess}))),{datasetID:m,docID:p}=(0,q.kF)(),g=eH(e=>{var t=(0,et.VR)((0,x.Z)(e,"document_infos[0]",{}));t&&(o(t.segmentRule),i(t.segmentMode))});return(0,U.useEffect)(()=>{p&&g({dataset_id:m||"",document_ids:[p||""]})},[]),(0,U.useEffect)(()=>{m&&B.MJ.DatasetDetail({dataset_ids:[m]}).then(e=>{var t,a=null===(t=e.dataset_details)||void 0===t?void 0:t[m];d((0,et.UQ)(a))})},[m]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(e2,{segmentRule:s,segmentMode:l,onChange:e=>{var{segmentRule:t,segmentMode:a}=e;void 0!==t&&o(t),void 0!==a&&i(a)}}),null==r?void 0:r([{e2e:Y.w.UploadUnitUpBtn,type:"primary",theme:"light",onClick:()=>n(a4.UPLOAD_CONTENT),text:f.o.t("datasets_createFileModel_previousBtn")},{e2e:Y.w.UploadUnitNextBtn,type:"hgltplus",theme:"solid",onClick:()=>n(a4.EMBED_PROGRESS),text:f.o.t("datasets_createFileModel_NextBtn"),status:function(e,t){if(e===eO.OX.CUSTOM){var a=(null==t?void 0:t.maxTokens)||0,r=null==t?void 0:t.separator,n=(null==r?void 0:r.type)===eO.IB.CUSTOM&&!(null==r?void 0:r.customValue);0===a}return!0}((t={segmentMode:l,segmentRule:s,storageLocation:c,testConnectionSuccess:u}).segmentMode,t.segmentRule)?v.xZ.ENABLE:v.xZ.DISABLE}])]})},rr=a("45425"),rn={};rn.styleTagTransform=A(),rn.setAttributes=L(),rn.insert=T().bind(null,"head"),rn.domAPI=N(),rn.insertStyleElement=I(),E()(rr.Z,rn);var rs=rr.Z&&rr.Z.locals?rr.Z.locals:void 0,ro=e=>{var{useStore:t,footer:a}=e,r=(0,q.EV)(),n=(0,q.kF)(),{progressList:s,createStatus:o,docName:l,docContent:i,segmentMode:d,segmentRule:c,enableStorageStrategy:u,storageLocation:m,openSearchConfig:p}=t((0,eV.N)(e=>({progressList:e.progressList,createStatus:e.createStatus,docName:e.docName,docContent:e.docContent,segmentMode:e.segmentMode,segmentRule:e.segmentRule,enableStorageStrategy:e.enableStorageStrategy,storageLocation:e.storageLocation,openSearchConfig:e.openSearchConfig}))),g=ta(t);return(0,U.useEffect)(()=>{g({format_type:H.a5.Text,document_bases:[{name:l,source_info:{custom_content:i,document_source:H.NZ.Custom}}],chunk_strategy:ts(d,c),storage_strategy:void 0})},[]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(el,{progressList:s,createStatus:o}),null==a?void 0:a({btns:[{e2e:Y.w.UploadUnitNextBtn,type:"hgltplus",theme:"solid",text:f.o.t("variable_reset_yes"),onClick:()=>{var e,t=(0,e5.S)();null===(e=r.toResource)||void 0===e||e.call(r,"knowledge",n.datasetID,t)}}],prefix:(0,h.jsx)("span",{className:rs["footer-sub-tip"],children:(0,et.mZ)(o)})})]})},rl={steps:[{content:e=>(0,h.jsx)(rt,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("knowledge_upload_text_custom_add_title"),step:a4.UPLOAD_CONTENT},{content:e=>(0,h.jsx)(ra,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("kl_write_107"),step:a4.SEGMENT_CLEANER},{content:e=>(0,h.jsx)(ro,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("datasets_createFileModel_step4"),step:a4.EMBED_PROGRESS}],createStore:()=>(0,eM.Ue)()((0,eZ.mW)((e,t,a)=>(0,eR._)({},a3(e,t,a)))),useUploadMount:e=>tr()};var ri=((u={})[u.UPLOAD=0]="UPLOAD",u[u.CONFIGURATION=1]="CONFIGURATION",u[u.PREVIEW=2]="PREVIEW",u[u.PROCESSING=3]="PROCESSING",u),rd=e=>{var t=e(e=>e.unitList);return(0,U.useMemo)(()=>({tos_uri:(0,x.Z)(t,"0.uri",""),document_source:H.NZ.Document}),[t])},rc=e=>{var t,a=e(e=>e.setUnitList),r=e(e=>e.unitList);return t=(0,eX._)(function*(e,t){try{var{fileInstance:n}=e;if(n){var{name:s}=n,o=(0,et.mD)(s),l=yield(0,et.y3)(n),i=yield B.nA.UploadFile({file_head:{file_type:o,biz_type:tw.ym.BIZ_BOT_DATASET},data:l});a((0,et.wV)({unitList:r,data:null==i?void 0:i.data,fileInstance:n,index:t}))}}catch(e){console.log(e)}}),function(e,a){return t.apply(this,arguments)}},ru=e=>{var t,{useStore:a,footer:r}=e,n=(0,et.td)(),s=a(e=>e.unitList),o=a(e=>e.setUnitList),l=a(e=>e.setCurrentStep),i=a(e=>e.originTableData),d=a(e=>e.tableSettings),c=a(e=>e.setOriginTableData),u=a(e=>e.setTableData),m=a(e=>e.setTableSettings),p=a(e=>e.setStatus),g=rc(a),_=rd(a),x=tU(a);(0,U.useEffect)(()=>{!s.length&&(c({}),u({}),m(eE.Q))},[s.length]);var b=tK();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(ei.p,{setUnitList:o,unitList:s,onFinish:e=>{o(e)},limit:1,accept:b,dragMainText:f.o.t("datasets_createFileModel_step2_UploadDoc"),dragSubText:(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{children:f.o.t("datasets_unit_update_exception_tips3")}),(0,h.jsx)("p",{children:f.o.t("knowledg_table_increment_tips")})]}),action:"",style:s.length?{display:"none"}:{},showIllustration:!1}),(0,h.jsx)("div",{className:"upload-unit-table",children:(0,h.jsx)(ed.nC,{edit:!1,type:v.Cm.TABLE_DOC,unitList:s,onChange:e=>{o(e)},canValidator:!1,onRetry:g})}),r?r([{e2e:Y.w.UploadUnitNextBtn,type:"hgltplus",theme:"solid",text:f.o.t("datasets_createFileModel_NextBtn"),onClick:()=>{if(l(ri.CONFIGURATION),!!(0,tx.Z)(i))p(eE.c3.LOADING),x({source_file:_,document_id:n,table_sheet:(0,et.wO)(d),table_data_type:ty.nZ.AllData})},status:0===(t=s).length||t.some(e=>0===e.name.length||e.status!==v.Dm.SUCCESS)?v.xZ.DISABLE:v.xZ.ENABLE}]):null]})},rm=a("499283"),rp=a("344842"),rg={};rg.styleTagTransform=A(),rg.setAttributes=L(),rg.insert=T().bind(null,"head"),rg.domAPI=N(),rg.insertStyleElement=I(),E()(rp.Z,rg);var r_=rp.Z&&rp.Z.locals?rp.Z.locals:void 0,rx=e=>{var{isTableStructureError:t}=e;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:r_["validation-results"],children:[(0,h.jsx)("div",{className:r_["validation-item"]}),(0,h.jsxs)("div",{className:r_["validation-item"],children:[t?(0,h.jsx)("p",{className:r_["error-msg"],children:f.o.t("knowledg_table_structure_err_msg")}):null,(0,h.jsx)("p",{className:r_.tips,children:f.o.t("knowledg_table_structure_tips")})]}),(0,h.jsx)("div",{className:r_["validation-item"]})]}),(0,h.jsx)("div",{className:r_["table-structure-title"],"data-testid":Y.w.TableLocalTableStructureTitle,children:f.o.t("datasets_segment_tableStructure_title")})]})},rv=e=>{var t,a,r,n,s,{useStore:o,footer:l}=e,i=o(e=>e.setCurrentStep),d=o(e=>e.status),c=o(e=>e.tableData),u=o(e=>e.originTableData),m=o(e=>e.tableSettings),p=o(e=>e.semanticValidate),g=o(e=>e.setTableData),_=o(e=>e.setSemanticValidate),x=tD(d),[b,y]=(0,U.useState)(!1),S=tL(d),[w,E]=(0,U.useState)(!1),j=(0,U.useRef)({});var N=(t=c,a=m,r=j.current,n=tI(t,a),s=Object.keys(r),n.map(e=>{var t=(0,eR._)({},e);return s.includes((null==e?void 0:e.column_name)||"")&&(t.errMsg=r[(null==e?void 0:e.column_name)||""]),t})),C=tP(o),T=rd(o),D=(0,q.kF)(),L=tU(o),k=tz((e,t)=>{E(!e),y(e),j.current=t},e=>{(0,rm.k0)(e)&&(null==e?void 0:e.code)==="708024073"&&E(!0),y(!1),j.current={}});return((0,U.useEffect)(()=>{m&&(y(!1),k({space_id:D.spaceID||"",document_id:D.docID||"",source_file:{tos_uri:T.tos_uri||"",document_source:H.NZ.Document},table_sheet:{sheet_id:m.sheet_id.toString(),header_line_idx:m.header_line_idx.toString(),start_line_idx:m.start_line_idx.toString()}}))},[m]),x)?(0,h.jsx)(ex,{}):S?(0,h.jsx)(e_,{fetchTableInfo:()=>{L((0,eA._)((0,eR._)({},T),{document_id:D.docID,table_data_type:ty.nZ.AllData,table_sheet:(0,et.wO)(m)}))}}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(X.tM,{className:"".concat(r_["table-setting-bar-container"]," ").concat(w?r_["is-error"]:""),data:c,tableSettings:m,setTableSettings:C}),(0,h.jsx)(rx,{isTableStructureError:w}),!N.length||(0,tx.Z)(u)?(0,h.jsx)(eu.YZ,{empty:{title:f.o.t("knowledge_1221_02"),icon:(0,h.jsx)(ec.xs,{})}}):(0,h.jsx)(X.u3,{initValid:!1,baseKey:"".concat(m[eE.hD.SHEET],".").concat(m[eE.hD.KEY_START_ROW],"."),data:N,verifyMap:p[m[eE.hD.SHEET]]||{},setData:e=>{var t=m[eE.hD.SHEET],a=(0,eA._)((0,eR._)({},c),{table_meta:(0,eA._)((0,eR._)({},c.table_meta),{[t]:e})});g(a),_(tC(a))},loading:x,isPreview:!0}),l?l([{e2e:Y.w.UploadUnitUpBtn,type:"primary",theme:"light",text:f.o.t("datasets_createFileModel_previousBtn"),onClick:()=>{i(ri.UPLOAD)},status:v.xZ.ENABLE},{e2e:Y.w.UploadUnitNextBtn,type:"hgltplus",theme:"solid",text:f.o.t("datasets_createFileModel_NextBtn"),onClick:()=>{var e,t;i(ri.PREVIEW),L({table_data_type:ty.nZ.OnlyPreview,source_file:T,document_id:D.docID,origin_table_meta:null==u?void 0:null===(e=u.table_meta)||void 0===e?void 0:e[m.sheet_id],preview_table_meta:null==c?void 0:null===(t=c.table_meta)||void 0===t?void 0:t[m.sheet_id],table_sheet:(0,et.wO)(m)})},status:b?v.xZ.ENABLE:v.xZ.DISABLE}]):null]})},rh=e=>{var{useStore:t,footer:a}=e,r=t(e=>e.tableData),n=t(e=>e.tableSettings),s=t(e=>e.setCurrentStep);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(X.IO,{data:r,settings:n}),a?a([{e2e:Y.w.UploadUnitUpBtn,type:"primary",theme:"light",text:f.o.t("datasets_createFileModel_previousBtn"),onClick:()=>{s(ri.CONFIGURATION)},status:v.xZ.ENABLE},{e2e:Y.w.UploadUnitNextBtn,type:"hgltplus",theme:"solid",text:f.o.t("datasets_createFileModel_NextBtn"),onClick:()=>{s(ri.PROCESSING)},status:v.xZ.ENABLE}]):null]})},rf=e=>{var{useStore:t,footer:a}=e,r=t(e=>e.unitList),n=t(e=>e.progressList),s=t(e=>e.createStatus),o=t(e=>e.tableSettings),l=(0,q.kF)(),{docID:i,spaceID:d,datasetID:c}=l,u=(0,q.EV)(),m=(0,U.useMemo)(()=>tA(n),[n]),p=tG(t);return(0,U.useEffect)(()=>{if(!!i&&!!c&&!!d&&!!o&&!!r)p(tM({spaceId:d,docId:i,datasetId:c,documentInfo:r.map(e=>({name:"",source_info:{document_source:H.NZ.Document,tos_uri:e.uri},table_sheet:{sheet_id:o.sheet_id.toString(),header_line_idx:o.header_line_idx.toString(),start_line_idx:o.start_line_idx.toString()}}))}))},[o,r]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(el,{progressList:n,createStatus:s}),a?a([{e2e:Y.w.CreateUnitConfirmBtn,type:"hgltplus",theme:"solid",text:f.o.t("variable_reset_yes"),onClick:()=>{var e;null===(e=u.toResource)||void 0===e||e.call(u,"knowledge",l.datasetID)},status:m?v.xZ.ENABLE:v.xZ.DISABLE}]):null]})},rb={steps:[{content:e=>(0,h.jsx)(ru,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("datasets_createFileModel_step2"),step:ri.UPLOAD},{content:e=>(0,h.jsx)(rv,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("datasets_createFileModel_tab_step2"),step:ri.CONFIGURATION},{content:e=>(0,h.jsx)(rh,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("datasets_createFileModel_tab_step3"),step:ri.PREVIEW},{content:e=>(0,h.jsx)(rf,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("datasets_createFileModel_step4"),step:ri.PROCESSING}],createStore:()=>(0,eM.Ue)()((0,eZ.mW)((e,t,a)=>(0,eR._)({},tp(e,t,a)))),className:"table-local-wrapper"},ry=e=>{var t=(0,q.kF)(),a=e(e=>e.setDocumentList),r=eH(e=>{var{document_infos:t=[]}=e;a&&a(t)});return(0,U.useEffect)(()=>{var e;r({dataset_id:null!==(e=t.datasetID)&&void 0!==e?e:"",document_ids:t.docID?[t.docID]:void 0})},[]),null},rS=e=>{var t,{useStore:a,footer:r}=e,n=a(e=>e.unitList),s=a(e=>e.setUnitList),o=a(e=>e.setCurrentStep),l=a(e=>e.tableSettings),i=a(e=>e.setOriginTableData),d=a(e=>e.setTableData),c=a(e=>e.setTableSettings),u=a(e=>e.setStatus),m=tj(a),p=tE(a),g=tU(a);(0,U.useEffect)(()=>{!n.length&&(i({}),d({}),c(eE.Q))},[n.length]);var _=tK();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(ei.p,{setUnitList:s,unitList:n,onFinish:e=>{s(e)},limit:1,accept:_,dragMainText:f.o.t("datasets_createFileModel_step2_UploadDoc"),dragSubText:f.o.t("datasets_unit_update_exception_tips3"),action:"",style:n.length?{display:"none"}:{},showIllustration:!1}),(0,h.jsx)("div",{className:"upload-unit-table",children:(0,h.jsx)(ed.nC,{edit:!1,type:v.Cm.TABLE_DOC,unitList:n,onChange:e=>{s(e)},onRetry:m})}),r?r([{e2e:Y.w.UploadUnitNextBtn,type:"hgltplus",theme:"solid",text:f.o.t("datasets_createFileModel_NextBtn"),onClick:()=>{o(ri.CONFIGURATION),u(eE.c3.LOADING),g({source_file:p,table_data_type:ty.nZ.AllData,table_sheet:(0,et.wO)(l)})},status:0===(t=n).length||t.some(e=>0===e.name.length||e.status!==v.Dm.SUCCESS)?v.xZ.DISABLE:v.xZ.ENABLE}]):null]})},rw=e=>{var{useStore:t,footer:a}=e,r=t(e=>e.setCurrentStep),n=t(e=>e.status),s=t(e=>e.tableData),o=t(e=>e.originTableData),l=t(e=>e.tableSettings),i=t(e=>e.semanticValidate),d=t(e=>e.setTableData),c=t(e=>e.setSemanticValidate),u=(0,et.l$)(),m=tD(n),p=tL(n),g=tk(u,s,l),_=tI(s,l).map((e,t)=>(0,eA._)((0,eR._)({},e),{key:t+e.column_name})),x=tP(t),b=tE(t),y=tU(t);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(X.tM,{data:s,tableSettings:l,setTableSettings:x}),m?(0,h.jsx)(ex,{}):p?(0,h.jsx)(e_,{fetchTableInfo:()=>{y({source_file:b,table_data_type:ty.nZ.AllData,table_sheet:(0,et.wO)(l)})}}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(X.u3,{tipsNode:(0,h.jsxs)(h.Fragment,{children:[g?(0,h.jsx)(ev,{}):null,!_.length||(0,tx.Z)(o)?(0,h.jsx)(eu.YZ,{empty:{title:f.o.t("knowledge_1221_02"),icon:(0,h.jsx)(ec.xs,{})}}):null]}),showTitle:!0,initValid:!0,isDragTable:!0,baseKey:"".concat(l[eE.hD.SHEET],".").concat(l[eE.hD.KEY_START_ROW],"."),data:_,verifyMap:i[l[eE.hD.SHEET]]||{},setData:e=>{var t=l[eE.hD.SHEET],a=(0,eA._)((0,eR._)({},s),{table_meta:(0,eA._)((0,eR._)({},s.table_meta),{[t]:e})});d(a),c(tC(a))},loading:m}),a?a([{e2e:Y.w.UploadUnitUpBtn,type:"primary",theme:"light",text:f.o.t("datasets_createFileModel_previousBtn"),onClick:()=>{r(ri.UPLOAD)},status:v.xZ.ENABLE},{e2e:Y.w.UploadUnitNextBtn,type:"hgltplus",theme:"solid",text:f.o.t("datasets_createFileModel_NextBtn"),onClick:()=>{var e,t;r(ri.PREVIEW),y({table_sheet:(0,et.wO)(l),table_data_type:ty.nZ.OnlyPreview,source_file:b,origin_table_meta:null==o?void 0:null===(e=o.table_meta)||void 0===e?void 0:e[l.sheet_id],preview_table_meta:null==s?void 0:null===(t=s.table_meta)||void 0===t?void 0:t[l.sheet_id]})},status:tR(s,l)}]):null]})]})},rE=e=>{var{useStore:t,footer:a}=e,r=t(e=>e.tableData),n=t(e=>e.tableSettings),s=t(e=>e.setCurrentStep);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(X.IO,{data:r,settings:n}),a?a([{e2e:Y.w.UploadUnitUpBtn,type:"primary",theme:"light",text:f.o.t("datasets_createFileModel_previousBtn"),onClick:()=>{s(ri.CONFIGURATION)},status:v.xZ.ENABLE},{e2e:Y.w.UploadUnitNextBtn,type:"hgltplus",theme:"solid",text:f.o.t("datasets_createFileModel_NextBtn"),onClick:()=>{s(ri.PROCESSING)},status:v.xZ.ENABLE}]):null]})},rj=e=>{var{useStore:t,footer:a}=e,r=t(e=>e.progressList),n=t(e=>e.unitList),s=t(e=>e.createStatus),o=t(e=>e.tableData),l=t(e=>e.tableSettings),i=tI(o,l),d=(0,q.kF)(),c=(0,q.EV)(),u=(0,U.useMemo)(()=>tA(r),[r]),m=ta(t);return(0,U.useEffect)(()=>{m(function(e){var{isAppend:t,unitList:a,metaData:r,tableSettings:n,sourceType:s,updateRule:o}=e,l=null!=s?s:H.NZ.Document,i=e=>[H.NZ.GoogleDrive,H.NZ.Notion].includes(l)?e.file_id:e.entity_id,d=()=>o?o:!t&&(l===H.NZ.Web||(0,J.$6)(l))?{update_interval:(0,x.Z)(a,"0.updateInterval"),update_type:(0,x.Z)(a,"0.updateType")}:void 0;return{source_type:l,format_type:tN.Table,document_bases:a.map(e=>({name:"",source_info:{tos_uri:e.uri,document_source:l,source_file_id:i(e),web_id:e.webID},update_rule:d(),table_sheet:(0,et.wO)(n),table_meta:r.map(e=>({id:t?e.id:"0",column_name:e.column_name,is_semantic:e.is_semantic,column_type:e.column_type,desc:e.desc,sequence:e.sequence}))})),is_append:t}}({isAppend:!1,unitList:n,metaData:i,tableSettings:l}))},[]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(el,{progressList:r,createStatus:s}),a?a([{e2e:Y.w.CreateUnitConfirmBtn,type:"hgltplus",theme:"solid",text:f.o.t("variable_reset_yes"),onClick:()=>{var e;null===(e=c.toResource)||void 0===e||e.call(c,"knowledge",d.datasetID)},status:u?v.xZ.ENABLE:v.xZ.DISABLE}]):null]})},rN={steps:[{content:e=>(0,h.jsx)(rS,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("datasets_createFileModel_step2"),step:ri.UPLOAD},{content:e=>(0,h.jsx)(rw,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("datasets_createFileModel_tab_step2"),step:ri.CONFIGURATION},{content:e=>(0,h.jsx)(rE,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("datasets_createFileModel_tab_step3"),step:ri.PREVIEW},{content:e=>(0,h.jsx)(rj,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("datasets_createFileModel_step4"),step:ri.PROCESSING}],createStore:()=>(0,eM.Ue)()((0,eZ.mW)((e,t,a)=>(0,eR._)({},tp(e,t,a)))),className:"table-local-wrapper",useUploadMount:e=>ry(e)},rC=a("461190"),rT=a("690612"),rD=a("5718"),rL={};rL.styleTagTransform=A(),rL.setAttributes=L(),rL.insert=T().bind(null,"head"),rL.domAPI=N(),rL.insertStyleElement=I(),E()(rD.Z,rL);var rk=rD.Z&&rD.Z.locals?rD.Z.locals:void 0;function rI(e,t,a){var r={};return e.forEach(e=>{var n=e[t],s=a?e[a]:"";r[n]=s}),[r]}var rR=e=>(0,h.jsx)(S.Vp,{color:"primary",className:rk["column-type"],children:(0,J.y8)(e.columnType)}),rA=function(e){var{initialData:t=[],editTableSegment:a}=e,[r,n]=(0,U.useState)(t),s=(0,U.useRef)(t),o=(0,U.useRef)([]),[l,i]=(0,U.useState)(-1),d=(0,U.useCallback)((e,t)=>{n(a=>a.map((a,r)=>r===t?(0,eR._)({},a,e):a))},[r]),c=(0,U.useCallback)(e=>{var t=[...s.current];e.forEach(e=>{t.splice(Number(e),1)}),n(t)},[s.current]),u=(0,U.useCallback)((e,t)=>{var r=s.current;i(Number(t));var n=r[Number(t)],l=Object.keys(n).map(e=>{var t=o.current.find(t=>t.column_name===e);return{column_name:(null==t?void 0:t.column_name)||"",column_id:(null==t?void 0:t.id)||"",is_semantic:!!(null==t?void 0:t.is_semantic),value:n[e]}});null==a||a(l)},[o.current,s.current]),m=(0,U.useCallback)(()=>{var e=rI(o.current,"column_name");n([...s.current,...e])},[s.current]);return(0,U.useEffect)(()=>{s.current=r},[r]),{editItemIndex:l,tableData:r,setTableData:n,handleCellUpdate:d,handleAdd:m,handleDel:c,handleEdit:u,tableDataRef:s,sheetStructureRef:o}},rZ=e=>{var{docTitle:t}=e;return(0,h.jsx)("div",{className:rk["structure-bar"],"data-testid":Y.w.IncrementTableUploadStructureTitle,children:(0,h.jsx)("div",{className:rk["structure-bar-title"],children:t})})},rM=e=>{var{loading:t,tableData:a,columns:r,handleAdd:n,handleDel:s,handleEdit:o}=e;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"".concat(rk["unit-table-container"]," "),children:(0,h.jsx)(eu.yC,{spinning:t,wrapperClassName:rk.spin,size:"large",style:{width:"100%",height:"100%"},children:a.length?(0,h.jsx)(rC.HA,{className:"".concat(rk["unit-table-view"]," "),dataSource:a,columns:r,rowOperation:!0,editProps:{onDelete:s,onEdit:o}}):(0,h.jsx)("div",{className:rk["unit-table-empty"]})})}),(0,h.jsx)("div",{className:"".concat(rk["footer-toolbar"]," "),children:(0,h.jsx)(S.zx,{"data-testid":Y.w.IncrementTableUploadStructureAddBtn,className:rk["structure-bar-button"],type:"tertiary",onClick:()=>{n()},icon:(0,h.jsx)(eC.PwN,{}),children:f.o.t("knowledge_custom_add_content")})})]})},rF=e=>{var{useStore:t,footer:a}=e,{docID:r,spaceID:n,datasetID:s}=(0,q.kF)(),o=t(e=>e.setStatus),l=t(e=>e.status),[i,d]=(0,U.useState)([]),[c,u]=(0,U.useState)({}),m=(0,U.useRef)(null),p=(0,U.useRef)([]),g=(0,U.useMemo)(()=>(null==c?void 0:c.name)||"",[c]),{node:_,edit:x}=(0,P.nV)({title:f.o.t("knowledg_table_segments_content"),meta:p.current||[],onFinish:(e,t)=>{var a=rI(t,"column_name","value");e===P.wO.Edit?j(a[0],b):w([...y,...a])}}),{editItemIndex:b,tableData:y,setTableData:w,sheetStructureRef:E,handleCellUpdate:j,handleDel:N,handleEdit:C,handleAdd:T}=rA({editTableSegment:x}),D=tF(e=>{var{tableColumns:t,tableData:a,sheetStructure:r}=function(e){var t,{data:a,handleEdit:r,handleDel:n,handleCellUpdate:s,tableContainerRef:o}=e,l={sheetStructure:[],tableColumns:[],tableData:[]};if(!a)return l;var{table_meta:i,sheet_list:d}=a;if(!i||!Object.keys(i).length||!(null==d?void 0:d.length))return l;var c=d[0],u=i[null!==(t=null==c?void 0:c.id)&&void 0!==t?t:""]||[],m=o.current,p=m?m.offsetWidth-397:1400,g=p/u.length>200?p/u.length:200,_=u.map(e=>({id:e.column_name,dataIndex:e.column_name,columnType:e.column_type,title:(0,h.jsxs)("div",{className:rk["table-view-title"],children:[(0,h.jsx)(eu.ZT.Text,{className:rk["table-view-title-content"],ellipsis:{showTooltip:{opts:{content:e.column_name}}},children:e.column_name}),e.is_semantic?(0,h.jsx)(S.Vp,{color:"green",className:rk["semantic-tag"],children:f.o.t("knowledge_1226_001")}):null,e.column_type?(0,h.jsx)(rR,{columnType:e.column_type}):null]}),width:g,render:(t,a,r)=>{if(e.column_type===te.QD.Image){var n,o=(0,rT.bp)(null==a?void 0:a[null==e?void 0:e.column_name]);return(0,h.jsx)(rC.e0,{srcList:o,onChange:(t,n)=>{var o="";(t||n)&&(o='<img src="'.concat(null!=t?t:"",'" ').concat(n?'data-tos-key="'.concat(n,'"'):"",">")),s((0,eA._)((0,eR._)({},a),{[null==e?void 0:e.column_name]:o}),r)}})}return(0,h.jsx)(rC.EY,{dataIndex:e.column_name,value:t,record:a,index:r,editable:!0,validator:{validate:t=>!!e.is_semantic&&(!t||""===t),errorMsg:f.o.t("datasets_url_empty")},onBlur:(n=(0,eX._)(function*(e,t){return yield s(t,r)}),function(e,t){return n.apply(this,arguments)})})}}));_.push({title:(0,h.jsx)(h.Fragment,{}),width:100,dataIndex:"actions",className:rk["unit-actions-column"],fixed:"right",render:(e,t,a)=>(0,h.jsx)(rC.E2,{record:t,index:a,editProps:{disabled:!1,onEdit:()=>{null==r||r(t,a)}},deleteProps:{disabled:!1,onDelete:()=>{null==n||n([a])}}})});var x=rI(u,"column_name");return{sheetStructure:u,tableColumns:_,tableData:x}}({data:e,tableContainerRef:m,handleCellUpdate:j,handleEdit:C,handleDel:N});t.length>0&&d(t),a.length>0&&w(a),r.length>0&&(p.current=r,E.current=r),o(eE.c3.NORMAL)},()=>{o(eE.c3.NORMAL)}),L=(0,q.EV)(),{fetchAddSegment:k,addSegmentLoading:I}=tB(e=>{var t;null===(t=L.toResource)||void 0===t||t.call(L,"knowledge",s)}),R=tV(u);return(0,U.useEffect)(()=>{r&&(o(eE.c3.LOADING),R(),D({document_id:r}))},[r]),(0,h.jsxs)("div",{ref:m,className:ef()("custom-table-container",rk["custom-table-container"]),children:[(0,h.jsx)(rZ,{docTitle:g}),(0,h.jsx)(rM,{loading:l===eE.c3.LOADING,columns:i,tableData:y,handleAdd:T,handleDel:N,handleEdit:C}),_,a?a({prefix:(0,h.jsx)("span",{className:rk["footer-sub-tip"],children:f.o.t("knowledge_table_custom_submit_tips")}),btns:[{e2e:Y.w.CreateUnitConfirmBtn,type:"hgltplus",theme:"solid",text:f.o.t("variable_reset_yes"),onClick:()=>{!function(){if(!!n&&!!s&&!!r){var e=[];i.forEach(t=>{t.columnType===te.QD.Image&&e.push(t.id)});var t=y.map(t=>Object.fromEntries(Object.entries(t).map(t=>{var[a,r]=t;return e.includes(a)?[a,(0,P.Yw)(r)]:[a,r]})));k(tM({spaceId:n,docId:r,datasetId:s,documentInfo:[{source_info:{document_source:H.NZ.Custom,custom_content:JSON.stringify(t)},table_sheet:{sheet_id:"0",header_line_idx:"0",start_line_idx:"0"}}]}))}}()},status:function(e,t,a){if(a)return v.xZ.LOADING;var r=e.find(e=>e.is_semantic);if(!r)return v.xZ.DISABLE;var n=null==r?void 0:r.column_name;return!n||!t.length||t.some(e=>e&&""===e[n])?v.xZ.DISABLE:v.xZ.ENABLE}(E.current,y,I)}]}):null]})};var rO=((m={})[m.UPLOAD=0]="UPLOAD",m),rU={steps:[{content:e=>(0,h.jsx)(rF,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("datasets_createFileModel_step2"),step:rO.UPLOAD}],createStore:()=>(0,eM.Ue)()((0,eZ.mW)((e,t,a)=>(0,eR._)({},tp(e,t,a)))),className:"table-custom-increment-wrapper",showStep:!1},rP=(e,t,a)=>(0,eA._)((0,eR._)({},tp(e,t,a)),{tableSettings:eE.z2,reset:()=>{e((0,eA._)((0,eR._)({},tm()),{tableSettings:eE.z2}))}}),rz=a("669854"),rB={};rB.styleTagTransform=A(),rB.setAttributes=L(),rB.insert=T().bind(null,"head"),rB.domAPI=N(),rB.insertStyleElement=I(),E()(rz.Z,rB);var rG=rz.Z&&rz.Z.locals?rz.Z.locals:void 0,rV=e=>{var t,{footer:a,useStore:r}=e,n=(0,q.kF)(),s=(0,q.EV)(),{datasetID:o}=n,[l,i]=(0,U.useState)(v.xZ.ENABLE),d=(0,t_.x0)(),[c,u]=(0,U.useState)([{id:d,key:d,column_name:"",is_semantic:!1}]),m=0!==(null!==(t=r(e=>e.documentList))&&void 0!==t?t:[]).length,p=eQ({onSuccess:()=>{var e;i(v.xZ.ENABLE),null===(e=s.toResource)||void 0===e||e.call(s,"knowledge",o)},onFail:()=>{i(v.xZ.DISABLE)}});return(0,U.useEffect)(()=>{l!==v.xZ.LOADING&&i(tZ(c,"toBeDelete"))},[c]),(0,h.jsxs)("div",{className:rG["create-table-wrapper"],children:[(0,h.jsx)(X.zx,{}),(0,h.jsx)(X.u3,{initValid:!0,isDragTable:!0,data:c,setData:u}),(0,h.jsx)(e=>{var{children:t}=e;return c.length>=eE.pL?(0,h.jsx)(eu.u,{trigger:"hover",content:f.o.t("knowledge_1222_01"),children:t}):(0,h.jsx)(h.Fragment,{children:t})},{children:(0,h.jsx)(S.zx,{"data-testid":Y.w.TableCustomUAddFieldBtn,className:rG["add-column-button"],type:"tertiary",disabled:c.length>=eE.pL,onClick:()=>{var e=(0,t_.x0)();u(c.concat({id:e,key:e,column_name:"",is_semantic:!1}))},block:!1,icon:(0,h.jsx)(eC.PwN,{}),children:f.o.t("datasets_segment_tableStructure_add_field")})}),a?a([{e2e:Y.w.CreateUnitConfirmBtn,type:"hgltplus",theme:"solid",text:f.o.t("variable_reset_yes"),onClick:()=>{var e,t;i(v.xZ.LOADING),p((e=c,t=m,{document_bases:[{name:"",source_info:{document_source:H.NZ.Custom},table_meta:e.map((e,t)=>({column_name:e.column_name,is_semantic:e.is_semantic,column_type:e.column_type,desc:e.desc,sequence:t.toString()}))}],format_type:H.a5.Table,is_append:t}))},status:l}]):null]})},rK=e=>(0,h.jsx)(rV,(0,eR._)({},e));var rW=((p={})[p.CREATE=0]="CREATE",p),rX={steps:[{content:e=>(0,h.jsx)(rK,{useStore:e.useStore,footer:e=>(0,h.jsx)(O,{controls:e}),checkStatus:void 0}),title:f.o.t("datasets_createFileModel_step2"),step:rW.CREATE}],createStore:()=>(0,eM.Ue)()((0,eZ.mW)((e,t,a)=>(0,eR._)({},rP(e,t,a)))),showStep:!1,className:"table-custom-wrapper",useUploadMount:e=>ry(e)};var rJ=((g={})[g.Upload=0]="Upload",g[g.Annotation=1]="Annotation",g[g.Process=2]="Process",g);var rq=((_={}).Auto="auto",_.Manual="manual",_),rY={currentStep:rJ.Upload,unitList:[],annotationType:rq.Auto,createStatus:v.uy.UPLOAD_UNIT,progressList:[]},rH=e=>{var t,{unitList:a,setUnitList:r}=e;return t=(0,eX._)(function*(e,t){try{var{fileInstance:n}=e;if(n){var{name:s}=n,o=(0,et.mD)(s),l=yield(0,et.y3)(n),i=yield B.nA.UploadFile({file_head:{file_type:o,biz_type:tw.ym.BIZ_BOT_DATASET},data:l});r((0,et.wV)({unitList:a,data:null==i?void 0:i.data,fileInstance:n,index:t}))}}catch(e){eq.s5.errorEvent(eq.xW.KNOWLEDGE,{eventName:eY.b.KnowledgeUploadFile,error:e})}}),function(e,a){return t.apply(this,arguments)}},rQ=e=>{var{useStore:t,footer:a}=e,r=t(e=>e.setCurrentStep),n=t(e=>e.unitList),s=t(e=>e.setUnitList),o=rH({unitList:n,setUnitList:s}),l=(0,U.useMemo)(()=>0===n.length||n.some(e=>0===e.name.length||e.status!==v.Dm.SUCCESS)?v.xZ.DISABLE:v.xZ.ENABLE,[n]),i=e=>{s(e)};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(ei.p,{action:"",accept:".png,.jpg,.jpeg,.webp",dragMainText:f.o.t("knowledge_photo_004"),dragSubText:f.o.t("knowledge_photo_005"),limit:300,unitList:n,multiple:true,style:void 0,setUnitList:i,onFinish:i,maxSizeMB:20,onSizeError:e=>S.FN.error(f.o.t("photo-size-limit",{fileName:e.name}))}),n.length>0?(0,h.jsx)("div",{className:"mt-[25px] mb-[25px] overflow-y-auto",children:(0,h.jsx)(ed.nC,{type:v.Cm.IMAGE_FILE,edit:!0,unitList:n,onChange:s,onRetry:o})}):null,null==a?void 0:a([{e2e:Y.w.UploadUnitNextBtn,type:"hgltplus",theme:"solid",text:f.o.t("datasets_createFileModel_NextBtn"),status:l,onClick:()=>{r(rJ.Annotation)}}])]})},r$=a("900539"),r0=a("923124"),r1={};r1.styleTagTransform=A(),r1.setAttributes=L(),r1.insert=T().bind(null,"head"),r1.domAPI=N(),r1.insertStyleElement=I(),E()(r0.Z,r1);var r2=r0.Z&&r0.Z.locals?r0.Z.locals:void 0,r4=e=>{var{useStore:t,footer:a}=e,r=(0,q.EV)(),n=(0,q.kF)(),s=t(e=>e.unitList),o=t(e=>e.annotationType),l=t(e=>e.progressList),i=t(e=>e.createStatus),d=ta(t,{onSuccess:e=>{var t,a=null!==(t=e.document_infos)&&void 0!==t?t:[];(0,r$.As)(a,eY.b.KnowledgeProcessDocument)}});return(0,U.useEffect)(()=>{d({format_type:H.a5.Image,chunk_strategy:{caption_type:o===rq.Manual?H._S.Manual:H._S.Auto},document_bases:s.map(e=>({name:e.name,source_info:{tos_uri:e.uri,document_source:H.NZ.Document}}))})},[]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(el,{progressList:l,createStatus:i}),null==a?void 0:a({btns:[{e2e:Y.w.CreateUnitConfirmBtn,type:"hgltplus",theme:"solid",text:f.o.t("variable_reset_yes"),onClick:()=>{var e,t=(0,e5.S)();null===(e=r.toResource)||void 0===e||e.call(r,"knowledge",n.datasetID,t)}}],prefix:(0,h.jsx)("span",{className:r2["footer-sub-tip"],children:(0,et.mZ)(i)})})]})},r5=a("716437"),r3={};r3.styleTagTransform=A(),r3.setAttributes=L(),r3.insert=T().bind(null,"head"),r3.domAPI=N(),r3.insertStyleElement=I(),E()(r5.Z,r3);var r6=r5.Z&&r5.Z.locals?r5.Z.locals:void 0,r8=e=>{var{useStore:t,footer:a}=e,r=t(e=>e.setCurrentStep),n=t(e=>e.annotationType),s=t(e=>e.setAnnotationType),o=(0,U.useMemo)(()=>n?v.xZ.ENABLE:v.xZ.DISABLE,[n]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:r6["segment-radio-wrapper"],children:(0,h.jsxs)(S.FX,{type:"pureCard",onChange:e=>{s(e.target.value)},direction:"vertical",value:n,children:[(0,h.jsx)(S.Y8,{"data-testid":Y.w.ImageAnnotationAiRadio,value:rq.Auto,extra:f.o.t("knowledge_photo_009"),children:f.o.t("knowledge_photo_008")}),(0,h.jsx)(S.Y8,{"data-testid":Y.w.ImageAnnotationManualRadio,value:rq.Manual,extra:f.o.t("knowledge_photo_011"),children:f.o.t("knowledge_photo_010")})]})}),null==a?void 0:a([{e2e:Y.w.UploadUnitUpBtn,type:"primary",theme:"light",text:f.o.t("datasets_createFileModel_previousBtn"),onClick:()=>r(rJ.Upload)},{e2e:Y.w.UploadUnitNextBtn,type:"hgltplus",theme:"solid",text:f.o.t("datasets_createFileModel_NextBtn"),status:o,onClick:()=>{r(rJ.Process)}}])]})},r7={steps:[{title:f.o.t("knowledge_photo_006"),step:rJ.Upload,content:e=>(0,h.jsx)(rQ,(0,eA._)((0,eR._)({},e),{footer:e=>(0,h.jsx)(O,{controls:e})}))},{title:f.o.t("knowledge_photo_007"),step:rJ.Annotation,content:e=>(0,h.jsx)(r8,(0,eA._)((0,eR._)({},e),{footer:e=>(0,h.jsx)(O,{controls:e})}))},{title:f.o.t("db_table_0126_015"),step:rJ.Process,content:e=>(0,h.jsx)(r4,(0,eA._)((0,eR._)({},e),{footer:e=>(0,h.jsx)(O,{controls:e})}))}],createStore:()=>(0,eM.Ue)()((0,eZ.mW)((e,t,a)=>(0,eA._)((0,eR._)({},rY),{setCurrentStep:t=>{e({currentStep:t})},setUnitList:t=>{e({unitList:t})},setAnnotationType:t=>{e({annotationType:t})},setCreateStatus:t=>{e({createStatus:t})},setProgressList:t=>{e({progressList:t})},reset:()=>{e(rY)}}))),useUploadMount:e=>tn()},r9=()=>({[v.Cm.TEXT]:{[v.VP.RESEGMENT]:tu},[v.Cm.TABLE]:{[v.VP.RESEGMENT]:t0},[v.Cm.TEXT_DOC]:{[v.VP.ADD]:a2,[v.VP.RESEGMENT]:aO},[v.Cm.TEXT_CUSTOM]:{[v.VP.ADD]:rl},[v.Cm.TABLE_DOC]:{[v.VP.ADD]:rN,[v.VP.INCREMENTAL]:rb},[v.Cm.TABLE_CUSTOM]:{[v.VP.ADD]:rX,[v.VP.INCREMENTAL]:rU},[v.Cm.IMAGE_FILE]:{[v.VP.ADD]:r7}}),ne=(e,t)=>{var a=t||v.VP.ADD,r=r9();return(0,x.Z)(r,"".concat(e,".").concat(a),null)},nt=a("616426"),na=a("487377"),nr=e=>{var{title:t}=e,a=(0,q.kF)(),r=(0,q.EV)(),n="project"===a.biz;return(0,h.jsx)("div",{className:ef()("flex items-center justify-between shrink-0 h-[56px] coz-fg-primary",n?"px-[12px]":""),children:(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)(S.hU,{color:"secondary",icon:(0,h.jsx)(eC.$1i,{className:"text-[16px]"}),iconPosition:"left",className:"!p-[8px]",onClick:()=>{var e,t=(0,e5.S)();null===(e=r.toResource)||void 0===e||e.call(r,"knowledge",a.datasetID,t)}}),(0,h.jsx)(S.ZT.Text,{fontSize:"16px",weight:500,className:"ml-[8px]",children:t})]})})},nn=a("492483"),ns={};ns.styleTagTransform=A(),ns.setAttributes=L(),ns.insert=T().bind(null,"head"),ns.domAPI=N(),ns.insertStyleElement=I(),E()(nn.Z,ns);var no=nn.Z&&nn.Z.locals?nn.Z.locals:void 0,nl=e=>{var t,{keepDocTitle:a,uploadConfig:r,children:n}=e,{onUpdateDisplayName:s,onStatusChange:o}=(0,q.kJ)(),{datasetID:l,opt:i,docID:d,biz:c}=(0,q.kF)(),{data:u,loading:m}=(0,nt.ZK)({datasetID:l||""}),p=(0,U.useMemo)(()=>!d,[d]),g=(0,U.useMemo)(()=>{var e,t=f.o.t("knowledge_upload_create_title");return i===v.VP.RESEGMENT?f.o.t("datasets_unit_config_title1"):t=i===v.VP.INCREMENTAL||(null==u?void 0:null===(e=u.file_list)||void 0===e?void 0:e.length)?f.o.t("knowledg_unit_add_segments"):p?f.o.t("knowledge_upload_create_title"):f.o.t("datasets_unit_config_title1")},[p,i,u]);return(0,na.a)({isLive:!!u&&!m}),(0,U.useEffect)(()=>{null==s||s(g),null==o||o("normal")},[g]),(0,h.jsx)(eq.xV,{namespace:eq.xW.KNOWLEDGE,children:(0,h.jsxs)(S.Ar,{className:ef()("flex flex-col gap-[16px]","project"===c?"coz-bg-max border border-solid coz-stroke-primary":"p-[24px] pt-[16px]"),title:(0,Q.Z$)(f.o.t("tab_dataset_detail",{dataset_name:null!==(t=null==u?void 0:u.name)&&void 0!==t?t:""})),keepDocTitle:a,children:[(0,h.jsx)(nr,{title:g}),(0,h.jsxs)(S.Ar.Content,{className:ef()("!px-[76px] h-full"),scrollY:!0,children:[n,(0,h.jsx)("div",{className:no["upload-unit-wrap"],children:r?(0,h.jsx)(v.RB,{createStore:r.createStore,children:(0,h.jsx)(v.gq,{config:r})}):(0,h.jsx)(eq.Z9,{namespace:eq.xW.KNOWLEDGE})})]})]})})},ni=e=>{var{type:t,opt:a}=(0,q.kF)(),r=ne(null!=t?t:v.Cm.TEXT,null!=a?a:v.VP.ADD);return r?(0,h.jsx)(nl,(0,eA._)((0,eR._)({},e),{uploadConfig:r})):(0,h.jsx)(h.Fragment,{})}},620410:function(e,t,a){a.r(t);var r=a(151064);a(455069);var n=a(517465),s=a.n(n),o=a(149528),l=a(66860),i=a(22916),d=a(537714),c=a(331362),u=a(153696);t.default=()=>{var e,t=(0,o.aQ)(),{uri:a,widget:n}=(0,o.BX)(),m=(0,o.d0)(),p=(0,o.ZQ)(),{version:g}=(0,o.jo)(),_=(0,o.vp)(),x=(0,l.Un)(e=>e.refetch),{type:v,opt:h,doc_id:f,page_mode:b,biz:y,bot_id:S,workflow_id:w,agent_id:E,module:j,action_type:N,first_auto_open_edit_document_id:C,create:T}=(0,o.Qy)(),D=(0,c.g)(null!=v?v:d.Cm.TEXT,null!=h?h:d.VP.ADD),L=null!==(e=null==a?void 0:a.path.name)&&void 0!==e?e:"";return(0,r.jsx)(i.S9,{params:{version:g,projectID:_,datasetID:L,spaceID:t,type:v,opt:h,docID:f,pageMode:b,biz:null!=y?y:"project",botID:S,workflowID:w,agentID:E,actionType:N,first_auto_open_edit_document_id:C,create:T},onUpdateDisplayName:e=>{n.setTitle(e),e&&e!==p&&x()},onStatusChange:e=>{n.setUIState(e)},resourceNavigate:{toResource:(e,t,a,r)=>m("/".concat(e,"/").concat(t,"?").concat(s().stringify(a)),r),upload:(e,t)=>{m("/knowledge/".concat(L,"?module=upload&").concat(s().stringify(e)),t)}},children:"upload"===j?D?(0,r.jsx)(c.z,{keepDocTitle:!0,uploadConfig:D}):null:(0,r.jsx)(u.f5,{layoutProps:{keepDocTitle:!0}})})}},637667:function(e,t,a){var r=a(125161),n=a.n(r),s=a(404442),o=a.n(s)()(n());o.push([e.id,".browse-detail-modal-G7py31{padding-bottom:40px}.browse-detail-modal-main-OiglzK{color:#1c1f23;align-items:center;margin-bottom:16px;font-size:14px;font-weight:600;line-height:20px;display:flex}.browse-detail-modal-main-image-Q8aVNY{background-color:#98cdfd;border-radius:2px;flex-shrink:0;justify-content:center;align-items:center;width:18px;height:18px;margin-right:7px;display:flex}.browse-detail-modal-main-title-EEkSF8{max-width:40%}.browse-detail-modal-main-url-Kbqole{color:rgba(28,31,35,.35);max-width:40%;margin-left:7px;font-size:12px;font-weight:400;line-height:16px}.browse-detail-modal-collapse-T8YH3_{background-color:#f5f5f5;border-radius:4px;max-height:400px;overflow-y:auto}.browse-detail-modal-collapse-T8YH3_ .semi-collapse-item{border-color:#efefef!important}.browse-detail-modal-collapse-T8YH3_ .semi-input-textarea-wrapper{background-color:transparent!important;border:none!important}.browse-modal-header-U4nuzC{flex-wrap:nowrap;align-items:center;padding:24px 0;display:flex}.browse-modal-header-left-AI0E76{align-items:center;display:flex}.browse-modal-header-left-icon-cYcFqE{margin-right:8px}.modal-i1yfPQ.upgrade-level-uuygZh .semi-modal-body{height:0;padding-bottom:0}.modal-i1yfPQ.upgrade-level-uuygZh .semi-modal-content{background-color:var(--semi-color-tertiary-light-default)}.browse-detail-tooltip-ZTxCjJ{word-wrap:break-word;width:200px}.browse-source-url-_vmPyT{color:rgba(29,28,36,.35);margin-top:12px;font-size:12px;font-style:normal;font-weight:400;line-height:16px}",""]),o.locals={"browse-detail-modal":"browse-detail-modal-G7py31",browseDetailModal:"browse-detail-modal-G7py31","browse-detail-modal-main":"browse-detail-modal-main-OiglzK",browseDetailModalMain:"browse-detail-modal-main-OiglzK","browse-detail-modal-main-image":"browse-detail-modal-main-image-Q8aVNY",browseDetailModalMainImage:"browse-detail-modal-main-image-Q8aVNY","browse-detail-modal-main-title":"browse-detail-modal-main-title-EEkSF8",browseDetailModalMainTitle:"browse-detail-modal-main-title-EEkSF8","browse-detail-modal-main-url":"browse-detail-modal-main-url-Kbqole",browseDetailModalMainUrl:"browse-detail-modal-main-url-Kbqole","browse-detail-modal-collapse":"browse-detail-modal-collapse-T8YH3_",browseDetailModalCollapse:"browse-detail-modal-collapse-T8YH3_","browse-modal-header":"browse-modal-header-U4nuzC",browseModalHeader:"browse-modal-header-U4nuzC","browse-modal-header-left":"browse-modal-header-left-AI0E76",browseModalHeaderLeft:"browse-modal-header-left-AI0E76","browse-modal-header-left-icon":"browse-modal-header-left-icon-cYcFqE",browseModalHeaderLeftIcon:"browse-modal-header-left-icon-cYcFqE",modal:"modal-i1yfPQ","upgrade-level":"upgrade-level-uuygZh",upgradeLevel:"upgrade-level-uuygZh","browse-detail-tooltip":"browse-detail-tooltip-ZTxCjJ",browseDetailTooltip:"browse-detail-tooltip-ZTxCjJ","browse-source-url":"browse-source-url-_vmPyT",browseSourceUrl:"browse-source-url-_vmPyT"},t.Z=o},848001:function(e,t,a){var r=a(125161),n=a.n(r),s=a(404442),o=a.n(s)()(n());o.push([e.id,".card-radio-group-wzfiJX{gap:4px}.card-radio-group-wzfiJX .semi-radio{border-radius:8px;padding:12px}.card-radio-group-wzfiJX .semi-radio:hover{background-color:var(--coz-mg-secondary-hovered)}.card-radio-group-wzfiJX .semi-radio:active{background-color:var(--coz-mg-secondary-pressed)}.card-radio-group-wzfiJX .semi-radio.semi-radio-checked{background-color:var(--coz-mg-card);border-width:1.5px;padding:11.5px}.card-radio-group-wzfiJX .semi-radio-content{flex-grow:1}.card-radio-group-wzfiJX .semi-radio-content .semi-radio-addon{font-weight:500}.card-radio-group-wzfiJX .semi-radio-content .semi-radio-extra{font-size:12px;line-height:16px}",""]),o.locals={"card-radio-group":"card-radio-group-wzfiJX",cardRadioGroup:"card-radio-group-wzfiJX"},t.Z=o},343155:function(e,t,a){var r=a(125161),n=a.n(r),s=a(404442),o=a.n(s)()(n());o.push([e.id,".load-failure-cflv8K{min-height:400px}.loading-gWseuj{justify-content:center;align-items:center;width:100%;min-height:400px;display:flex}.loading-content-mQodwK{color:rgba(29,28,35,.35);margin-left:8px;font-family:SF Pro Display;font-size:14px;font-style:normal;font-weight:400;line-height:20px}",""]),o.locals={"load-failure":"load-failure-cflv8K",loadFailure:"load-failure-cflv8K",loading:"loading-gWseuj","loading-content":"loading-content-mQodwK",loadingContent:"loading-content-mQodwK"},t.Z=o},893121:function(e,t,a){var r=a(125161),n=a.n(r),s=a(404442),o=a.n(s)()(n());o.push([e.id,".auth-empty-wrapper-fr6klo{justify-content:center;align-items:center;height:calc(100% - 112px);display:flex}.auth-empty-wrapper-fr6klo .auth-empty-Xjao95{flex-direction:column;align-items:center;display:flex}.auth-empty-wrapper-fr6klo .auth-empty-image-VDpxNW{justify-content:center;align-items:center;width:140px;height:140px;display:flex}.auth-empty-wrapper-fr6klo .auth-empty-description-nlZRXc{color:var(--coz-fg-primary);margin-top:16px;font-size:16px;font-weight:600;line-height:22px}.auth-empty-wrapper-fr6klo .auth-empty-second-desc-VD10hC{color:var(--coz-fg-secondary);margin-top:4px;font-size:14px;line-height:20px}.auth-empty-wrapper-fr6klo .auth-empty-button-ugpRLF{margin-top:21px}",""]),o.locals={"auth-empty-wrapper":"auth-empty-wrapper-fr6klo",authEmptyWrapper:"auth-empty-wrapper-fr6klo","auth-empty":"auth-empty-Xjao95",authEmpty:"auth-empty-Xjao95","auth-empty-image":"auth-empty-image-VDpxNW",authEmptyImage:"auth-empty-image-VDpxNW","auth-empty-description":"auth-empty-description-nlZRXc",authEmptyDescription:"auth-empty-description-nlZRXc","auth-empty-second-desc":"auth-empty-second-desc-VD10hC",authEmptySecondDesc:"auth-empty-second-desc-VD10hC","auth-empty-button":"auth-empty-button-ugpRLF",authEmptyButton:"auth-empty-button-ugpRLF"},t.Z=o},49630:function(e,t,a){var r=a(125161),n=a.n(r),s=a(404442),o=a.n(s)()(n());o.push([e.id,".auth-empty-wrapper-RhjsLq{justify-content:center;align-items:center;height:calc(100% - 112px);display:flex}.auth-empty-wrapper-RhjsLq .auth-empty-Sl0qKt{flex-direction:column;align-items:center;display:flex}.auth-empty-wrapper-RhjsLq .auth-empty-image-UXdNZu{justify-content:center;align-items:center;width:140px;height:140px;display:flex}.auth-empty-wrapper-RhjsLq .auth-empty-description-PkOJj9{color:var(--Light-usage-text---color-text-0,#1d1c23);margin-top:16px;font-size:16px;font-weight:600;line-height:22px}.auth-empty-wrapper-RhjsLq .auth-empty-second-desc-Nuf4Nr{color:var(--Light-usage-text---color-text-2,rgba(29,28,35,.6));margin-top:4px;font-size:14px;line-height:20px}.auth-empty-wrapper-RhjsLq .auth-empty-button-X6asn5{margin-top:21px}",""]),o.locals={"auth-empty-wrapper":"auth-empty-wrapper-RhjsLq",authEmptyWrapper:"auth-empty-wrapper-RhjsLq","auth-empty":"auth-empty-Sl0qKt",authEmpty:"auth-empty-Sl0qKt","auth-empty-image":"auth-empty-image-UXdNZu",authEmptyImage:"auth-empty-image-UXdNZu","auth-empty-description":"auth-empty-description-PkOJj9",authEmptyDescription:"auth-empty-description-PkOJj9","auth-empty-second-desc":"auth-empty-second-desc-Nuf4Nr",authEmptySecondDesc:"auth-empty-second-desc-Nuf4Nr","auth-empty-button":"auth-empty-button-X6asn5",authEmptyButton:"auth-empty-button-X6asn5"},t.Z=o},417478:function(e,t,a){var r=a(125161),n=a.n(r),s=a(404442),o=a.n(s)()(n());o.push([e.id,".frequency-form-item-SghTVA .title-AvpUA4{box-sizing:border-box;color:var(--coz-fg-secondary);flex-shrink:0;margin-bottom:8px;font-size:12px;line-height:16px;display:block}.frequency-form-item-SghTVA .content-pU2lYR{flex:1}",""]),o.locals={"frequency-form-item":"frequency-form-item-SghTVA",frequencyFormItem:"frequency-form-item-SghTVA",title:"title-AvpUA4",content:"content-pU2lYR"},t.Z=o},14909:function(e,t,a){var r=a(125161),n=a.n(r),s=a(404442),o=a.n(s)()(n());o.push([e.id,".embed-progress-rIEMwe{flex:1}.embed-progress-rIEMwe .progress-info-hfP0J8{width:100%}.embed-progress-rIEMwe .progress-info-hfP0J8 .text-g0239m{height:32px;color:var(--coz-fg-primary);align-items:center;margin-bottom:8px;font-size:14px;font-style:normal;font-weight:500;line-height:20px;display:flex}.embed-progress-rIEMwe .progress-info-hfP0J8 .progress-list-GBBk7a{max-height:532px;overflow-y:auto}.embed-progress-rIEMwe .banner-ydKIT1{width:100%}.embed-progress-rIEMwe .progress-success-icon-VoWH3W>svg{width:16px;height:16px}.embed-progress-rIEMwe .progress-success-icon-VoWH3W>svg>path{fill:var(--semi-color-primary)}.data-processing-S9ldN3 .finish-text-YYzx_J{color:var(--coz-fg-primary);text-align:right;text-overflow:ellipsis;font-size:14px;font-style:normal;font-weight:400;line-height:20px;overflow:hidden}.data-processing-S9ldN3 .process-progress-item-actions{display:block!important}",""]),o.locals={"embed-progress":"embed-progress-rIEMwe",embedProgress:"embed-progress-rIEMwe","progress-info":"progress-info-hfP0J8",progressInfo:"progress-info-hfP0J8",text:"text-g0239m","progress-list":"progress-list-GBBk7a",progressList:"progress-list-GBBk7a",banner:"banner-ydKIT1","progress-success-icon":"progress-success-icon-VoWH3W",progressSuccessIcon:"progress-success-icon-VoWH3W","data-processing":"data-processing-S9ldN3",dataProcessing:"data-processing-S9ldN3","finish-text":"finish-text-YYzx_J",finishText:"finish-text-YYzx_J"},t.Z=o},135987:function(e,t,a){var r=a(125161),n=a.n(r),s=a(404442),o=a.n(s)()(n());o.push([e.id,".upload-footer-HwRnxg{justify-content:flex-end;margin-top:auto;margin-bottom:18px;padding-top:24px;padding-bottom:24px;line-height:32px;display:flex}.upload-footer-HwRnxg .semi-button{margin-left:10px}",""]),o.locals={"upload-footer":"upload-footer-HwRnxg",uploadFooter:"upload-footer-HwRnxg"},t.Z=o},716437:function(e,t,a){var r=a(125161),n=a.n(r),s=a(404442),o=a.n(s)()(n());o.push([e.id,'.segment-radio-wrapper-TKAZbc .displayNone-dkIssP{display:none}.segment-radio-wrapper-TKAZbc .custom-wrapper-mHiLQ2{width:100%;position:relative}.segment-radio-wrapper-TKAZbc .custom-wrapper-mHiLQ2 .form-segment-_4or5l{margin-top:33px;margin-bottom:15px}.segment-radio-wrapper-TKAZbc .custom-wrapper-mHiLQ2 .form-segment-_4or5l .item-yNLwbz{margin-bottom:20px}.segment-radio-wrapper-TKAZbc .custom-wrapper-mHiLQ2 .form-segment-_4or5l .item-yNLwbz .label-B8cOJV{color:var(--coz-fg-primary);margin-bottom:8px;font-size:14px;font-weight:600;line-height:22px;display:block}.segment-radio-wrapper-TKAZbc .custom-wrapper-mHiLQ2 .form-segment-_4or5l .item-yNLwbz .label-red-ynWrpC:after{content:"*";color:var(--coz-fg-hglt-red);margin-left:4px;font-weight:600}.segment-radio-wrapper-TKAZbc .custom-wrapper-mHiLQ2 .form-segment-_4or5l .item-yNLwbz .custom-input-XsgTSG{margin-top:8px}.segment-radio-wrapper-TKAZbc .line-LbCaPK:before{content:"";background:var(--light-usage-border-color-border,rgba(28,31,35,.08));width:100%;height:1px;margin-top:26px;display:inline-block;position:absolute;top:10px}.segment-radio-wrapper-TKAZbc .semi-radioGroup.semi-radioGroup-vertical{row-gap:16px}.segment-radio-wrapper-TKAZbc .semi-radioGroup .semi-radio-content{flex-grow:1}.segment-radio-wrapper-TKAZbc .semi-radioGroup .custom-wrapper{padding-bottom:0}.segment-radio-wrapper-TKAZbc .semi-radioGroup .custom-wrapper .semi-input-default{border-radius:8px}.segment-radio-wrapper-TKAZbc .semi-radioGroup .custom-wrapper .semi-input-wrapper-focus{border-radius:8px}.segment-radio-wrapper-TKAZbc .semi-radio-cardRadioGroup{border:1px solid var(--coz-stroke-plus);border-radius:8px;padding:16px 16px 16px 19px}.segment-radio-wrapper-TKAZbc .semi-radio-cardRadioGroup:hover{background:var(--coz-mg-secondary-hovered)}.segment-radio-wrapper-TKAZbc .semi-radio-cardRadioGroup:active{background:var(--coz-mg-secondary-pressed)}.segment-radio-wrapper-TKAZbc .semi-radio-cardRadioGroup .semi-radio-extra{margin-top:4px}.segment-radio-wrapper-TKAZbc .semi-radio-cardRadioGroup_checked{background:var(--coz-mg-hglt);border:1px solid var(--coz-stroke-hglt)}.segment-radio-wrapper-TKAZbc .semi-radio-cardRadioGroup_checked:hover{background:var(--coz-mg-hglt-hovered)}.segment-radio-wrapper-TKAZbc .semi-radio-cardRadioGroup_checked:active{background:var(--coz-mg-hglt-pressed)}.segment-radio-wrapper-TKAZbc .semi-radio-addon{margin-bottom:2px}.segment-radio-wrapper-TKAZbc .semi-form-field-label{margin-bottom:8px}.segment-radio-wrapper-TKAZbc .semi-checkboxGroup-vertical{row-gap:8px}',""]),o.locals={"segment-radio-wrapper":"segment-radio-wrapper-TKAZbc",segmentRadioWrapper:"segment-radio-wrapper-TKAZbc",displayNone:"displayNone-dkIssP","custom-wrapper":"custom-wrapper-mHiLQ2",customWrapper:"custom-wrapper-mHiLQ2","form-segment":"form-segment-_4or5l",formSegment:"form-segment-_4or5l",item:"item-yNLwbz",label:"label-B8cOJV","label-red":"label-red-ynWrpC",labelRed:"label-red-ynWrpC","custom-input":"custom-input-XsgTSG",customInput:"custom-input-XsgTSG",line:"line-LbCaPK"},t.Z=o},923124:function(e,t,a){var r=a(125161),n=a.n(r),s=a(404442),o=a.n(s)()(n());o.push([e.id,".footer-sub-tip-Ao5RTt{color:var(--light-usage-text-color-text-2,rgba(28,31,35,.6));font-size:12px}",""]),o.locals={"footer-sub-tip":"footer-sub-tip-Ao5RTt",footerSubTip:"footer-sub-tip-Ao5RTt"},t.Z=o},669854:function(e,t,a){var r=a(125161),n=a.n(r),s=a(404442),o=a.n(s)()(n());o.push([e.id,".create-table-wrapper-Rmcxg9{flex-direction:column;justify-content:center;height:100%;display:flex}.add-column-button-JCssGI{width:114px;margin-top:16px}",""]),o.locals={"create-table-wrapper":"create-table-wrapper-Rmcxg9",createTableWrapper:"create-table-wrapper-Rmcxg9","add-column-button":"add-column-button-JCssGI",addColumnButton:"add-column-button-JCssGI"},t.Z=o},5718:function(e,t,a){var r=a(125161),n=a.n(r),s=a(404442),o=a.n(s)()(n());o.push([e.id,".structure-bar-YhAhlN{flex-direction:row;justify-content:space-between;align-items:center;margin-bottom:10px;display:flex}.structure-bar-title-yFsfz3{color:var(--coz-fg-primary);font-size:14px;font-style:normal;font-weight:600;line-height:20px}.custom-table-container-rKmfoR{flex-direction:column;height:100%;display:flex}.unit-table-container-jC7mC5{border:1px solid var(--coz-stroke-primary);border-radius:8px}.unit-table-container-jC7mC5 .unit-table-view-JZykq7{min-height:90px;max-height:540px}.unit-table-container-jC7mC5 .unit-table-view-JZykq7 .semi-table-wrapper{margin-top:0}.unit-table-container-jC7mC5 .unit-table-view-JZykq7 .coz-tag.coz-tag-primary{font-weight:400}.unit-table-container-jC7mC5 .unit-table-view-JZykq7 .semi-table-thead>.semi-table-row>.semi-table-row-head{border-bottom:1px solid var(--coz-stroke-primary)}.unit-table-container-jC7mC5 .unit-table-view-JZykq7 .semi-table-header{border-top-left-radius:8px;border-top-right-radius:8px}.unit-table-container-jC7mC5 .unit-table-view-JZykq7 .semi-table-row:last-child .semi-table-row-cell{border-bottom:1px solid transparent}.unit-table-container-jC7mC5 .unit-table-view-JZykq7 .semi-table-row:hover>.semi-table-row-cell:first-child{border-top-left-radius:0!important;border-bottom-left-radius:0!important}.unit-table-container-jC7mC5 .unit-table-view-JZykq7 .semi-table-row:hover>.semi-table-row-cell:last-child{border-top-right-radius:0!important;border-bottom-right-radius:0!important}.unit-table-container-jC7mC5 .unit-table-view-JZykq7 .semi-table-body{border-bottom-right-radius:8px;border-bottom-left-radius:8px;max-height:499px!important}.unit-table-container-jC7mC5 .table-view-title-R5PkXj{flex-direction:row;align-items:center;display:flex}.unit-table-container-jC7mC5 .table-view-title-R5PkXj .semantic-tag-KqZfNg{margin-left:8px}.unit-table-container-jC7mC5 .unit-table-empty-wR5NGZ{height:64px}.footer-toolbar-zOANOz{margin-top:10px}.spin-MXg6cV .semi-spin-wrapper{position:absolute}.spin-MXg6cV .semi-tabs-content{padding:0}.spin-MXg6cV .semi-spin-children{height:100%}.footer-sub-tip-ZYIj1y{color:var(--coz-fg-primary);font-size:12px}.column-type-K9Rv9d{margin-left:6px}",""]),o.locals={"structure-bar":"structure-bar-YhAhlN",structureBar:"structure-bar-YhAhlN","structure-bar-title":"structure-bar-title-yFsfz3",structureBarTitle:"structure-bar-title-yFsfz3","custom-table-container":"custom-table-container-rKmfoR",customTableContainer:"custom-table-container-rKmfoR","unit-table-container":"unit-table-container-jC7mC5",unitTableContainer:"unit-table-container-jC7mC5","unit-table-view":"unit-table-view-JZykq7",unitTableView:"unit-table-view-JZykq7","table-view-title":"table-view-title-R5PkXj",tableViewTitle:"table-view-title-R5PkXj","semantic-tag":"semantic-tag-KqZfNg",semanticTag:"semantic-tag-KqZfNg","unit-table-empty":"unit-table-empty-wR5NGZ",unitTableEmpty:"unit-table-empty-wR5NGZ","footer-toolbar":"footer-toolbar-zOANOz",footerToolbar:"footer-toolbar-zOANOz",spin:"spin-MXg6cV","footer-sub-tip":"footer-sub-tip-ZYIj1y",footerSubTip:"footer-sub-tip-ZYIj1y","column-type":"column-type-K9Rv9d",columnType:"column-type-K9Rv9d"},t.Z=o},344842:function(e,t,a){var r=a(125161),n=a.n(r),s=a(404442),o=a.n(s)()(n());o.push([e.id,".table-structure-title-VenJKC{color:var(--coz-fg-primary);margin:12px 0 6px;font-family:PingFang SC;font-size:14px;font-style:normal;font-weight:600;line-height:20px}.no-result-BoLElK{flex-direction:column;justify-content:center;align-items:center;width:100%;height:448px;display:flex}.no-result-tips-fQ2rIO{color:var(--coz-fg-primary);margin-top:16px;font-family:SF Pro Display;font-size:16px;font-style:normal;font-weight:600;line-height:22px}.table-local-wrapper .semi-banner-full .semi-banner-content-wrapper .semi-banner-content{justify-content:flex-start}.table-local-wrapper .select-page-content .semi-tree-option-expand-icon{justify-content:center;align-items:center;width:20px!important;height:20px!important;line-height:20px!important}.table-local-wrapper .select-page-content .expand-placeholder{width:0!important;height:0!important;line-height:0!important}.table-local-wrapper .select-page-content .file-selector{justify-content:center;align-items:center;width:20px;height:20px;margin:0 8px}.table-local-wrapper .select-page-content .no-real-expand{margin:0 8px 0 0!important}.table-local-wrapper .select-page-content .file-icon{justify-content:center;align-self:center;align-items:center;width:20px;height:20px;margin-right:4px;line-height:20px;display:flex}.table-local-wrapper .select-page-content .file-selector{justify-content:center;width:20px;height:20px;margin:0 8px;padding:2px 0;display:flex}.table-local-wrapper .select-page-content .semi-tree-option-list{padding:0}.table-local-wrapper .select-page-content .file-node-row-content .action-placeholder{width:0;margin:0 0 0 8px}.footer-sub-tip-jRLlUx{color:var(--light-usage-text-color-text-2,rgba(28,31,35,.6));font-size:12px}.table-doc-footer-NLEYKz{float:right;margin-top:40px}.table-doc-footer-NLEYKz .semi-button{margin-left:10px}.table-setting-bar-container-B1lgTN{margin-bottom:0}.table-setting-bar-container-B1lgTN.is-error-A5YgGJ [x-field-id=header_line_idx] .semi-select{border:1px solid var(--coz-stroke-hglt-red)}.validation-results-Z91Ydh{flex-wrap:wrap;margin-top:4px;margin-bottom:6px;display:flex}.validation-results-Z91Ydh .validation-item-F7yUwf{flex:1;padding:0 8px}.validation-results-Z91Ydh .validation-item-F7yUwf .tips-YaFegc{color:var(--coz-fg-secondary);font-size:12px;line-height:16px}.validation-results-Z91Ydh .validation-item-F7yUwf .error-msg-xHwlV0{color:var(--coz-stroke-hglt-red);font-size:12px;line-height:16px}",""]),o.locals={"table-structure-title":"table-structure-title-VenJKC",tableStructureTitle:"table-structure-title-VenJKC","no-result":"no-result-BoLElK",noResult:"no-result-BoLElK","no-result-tips":"no-result-tips-fQ2rIO",noResultTips:"no-result-tips-fQ2rIO","footer-sub-tip":"footer-sub-tip-jRLlUx",footerSubTip:"footer-sub-tip-jRLlUx","table-doc-footer":"table-doc-footer-NLEYKz",tableDocFooter:"table-doc-footer-NLEYKz","table-setting-bar-container":"table-setting-bar-container-B1lgTN",tableSettingBarContainer:"table-setting-bar-container-B1lgTN","is-error":"is-error-A5YgGJ",isError:"is-error-A5YgGJ","validation-results":"validation-results-Z91Ydh",validationResults:"validation-results-Z91Ydh","validation-item":"validation-item-F7yUwf",validationItem:"validation-item-F7yUwf",tips:"tips-YaFegc","error-msg":"error-msg-xHwlV0",errorMsg:"error-msg-xHwlV0"},t.Z=o},45425:function(e,t,a){var r=a(125161),n=a.n(r),s=a(404442),o=a.n(s)()(n());o.push([e.id,".footer-sub-tip-MIX2OZ{color:var(--light-usage-text-color-text-2,rgba(28,31,35,.6));font-size:12px}",""]),o.locals={"footer-sub-tip":"footer-sub-tip-MIX2OZ",footerSubTip:"footer-sub-tip-MIX2OZ"},t.Z=o},153745:function(e,t,a){var r=a(125161),n=a.n(r),s=a(404442),o=a.n(s)()(n());o.push([e.id,".custom-text-form-vUVDqG .semi-form-field-error-message{color:var(--coz-fg-hglt-red)}.custom-text-form-vUVDqG .semi-form-field-label-required .semi-form-field-label-text:after{color:var(--coz-fg-hglt-red)}",""]),o.locals={"custom-text-form":"custom-text-form-vUVDqG",customTextForm:"custom-text-form-vUVDqG"},t.Z=o},846954:function(e,t,a){var r=a(125161),n=a.n(r),s=a(404442),o=a.n(s)()(n());o.push([e.id,".footer-sub-tip-XECZc4{color:var(--light-usage-text-color-text-2,rgba(28,31,35,.6));font-size:12px}",""]),o.locals={"footer-sub-tip":"footer-sub-tip-XECZc4",footerSubTip:"footer-sub-tip-XECZc4"},t.Z=o},356696:function(e,t,a){var r=a(125161),n=a.n(r),s=a(404442),o=a.n(s)()(n());o.push([e.id,".footer-sub-tip-syrvzP{color:var(--light-usage-text-color-text-2,rgba(28,31,35,.6));font-size:12px}",""]),o.locals={"footer-sub-tip":"footer-sub-tip-syrvzP",footerSubTip:"footer-sub-tip-syrvzP"},t.Z=o},451357:function(e,t,a){var r=a(125161),n=a.n(r),s=a(404442),o=a.n(s)()(n());o.push([e.id,".add-btn-ZzEFmI{margin-top:10px;margin-right:auto}.table-resegment-v6zXg3{flex-direction:column;flex:1;padding-bottom:8px;display:flex;overflow:hidden}",""]),o.locals={"add-btn":"add-btn-ZzEFmI",addBtn:"add-btn-ZzEFmI","table-resegment":"table-resegment-v6zXg3",tableResegment:"table-resegment-v6zXg3"},t.Z=o},707140:function(e,t,a){var r=a(125161),n=a.n(r),s=a(404442),o=a.n(s)()(n());o.push([e.id,".footer-sub-tip-Y7M9KW{color:var(--light-usage-text-color-text-2,rgba(28,31,35,.6));font-size:12px}",""]),o.locals={"footer-sub-tip":"footer-sub-tip-Y7M9KW",footerSubTip:"footer-sub-tip-Y7M9KW"},t.Z=o},836894:function(e,t,a){var r=a(125161),n=a.n(r),s=a(404442),o=a.n(s)()(n());o.push([e.id,".filter-modal-X99FWX .semi-modal{width:1280px!important;height:800px!important}",""]),o.locals={"filter-modal":"filter-modal-X99FWX",filterModal:"filter-modal-X99FWX"},t.Z=o},492483:function(e,t,a){var r=a(125161),n=a.n(r),s=a(404442),o=a.n(s)()(n());o.push([e.id,".upload-unit-wrap-LRpAVk{width:100%;min-width:1008px;height:100%;margin:0 auto}.upload-unit-wrap-LRpAVk .upload-unit-steps{width:100%;margin:0 auto 54px}.upload-ui-content-rC0xye{background-color:rgba(var(--coze-bg-3),var(--coze-bg-3-alpha));height:100%;padding-top:40px;padding-bottom:30px}.breadcrumb-voCP4f{align-items:center;display:flex}",""]),o.locals={"upload-unit-wrap":"upload-unit-wrap-LRpAVk",uploadUnitWrap:"upload-unit-wrap-LRpAVk","upload-ui-content":"upload-ui-content-rC0xye",uploadUiContent:"upload-ui-content-rC0xye",breadcrumb:"breadcrumb-voCP4f"},t.Z=o}}]);
//# sourceMappingURL=1546.27338560.js.map