{"version":3,"file":"static/js/async/3838.9f094a18.js","sources":["webpack://@coze-studio/app/../../packages/project-ide/biz-data/src/database-main.tsx"],"sourcesContent":["/*\n * Copyright 2025 coze-dev Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport React from 'react';\n\nimport qs from 'qs';\nimport {\n  useTitle,\n  useCurrentWidgetContext,\n  useIDEParams,\n  useIDENavigate,\n  useSpaceId,\n  useProjectId,\n  useCommitVersion,\n} from '@coze-project-ide/framework';\nimport { usePrimarySidebarStore } from '@coze-project-ide/biz-components';\nimport { KnowledgeParamsStoreProvider } from '@coze-data/knowledge-stores';\nimport {\n  type UnitType,\n  type OptType,\n} from '@coze-data/knowledge-resource-processor-core';\nimport { DatabaseDetail, type DatabaseTabs } from '@coze-data/database-v2';\n\nconst Main = () => {\n  const spaceID = useSpaceId();\n  const projectID = useProjectId();\n  const { uri, widget } = useCurrentWidgetContext();\n  const IDENav = useIDENavigate();\n  const title = useTitle();\n  const { version } = useCommitVersion();\n\n  const refetch = usePrimarySidebarStore(state => state.refetch);\n\n  const queryObject = useIDEParams();\n\n  const { type, opt, doc_id, page_mode, bot_id, workflow_id, agent_id, tab } =\n    queryObject;\n\n  return (\n    <KnowledgeParamsStoreProvider\n      params={{\n        version,\n        projectID,\n        spaceID,\n        tableID: uri?.path.name ?? '',\n        type: type as UnitType,\n        opt: opt as OptType,\n        docID: doc_id,\n        pageMode: page_mode as 'modal' | 'normal',\n        biz: 'project',\n        botID: bot_id,\n        workflowID: workflow_id,\n        agentID: agent_id,\n      }}\n      onUpdateDisplayName={displayName => {\n        widget.setTitle(displayName); // Set tab title\n        if (displayName && displayName !== title) {\n          refetch(); // Update sidebar name\n        }\n      }}\n      onStatusChange={status => {\n        widget.setUIState(status);\n      }}\n      resourceNavigate={{\n        // eslint-disable-next-line max-params\n        toResource: (resource, resourceID, query, opts) =>\n          IDENav(`/${resource}/${resourceID}?${qs.stringify(query)}`, opts),\n      }}\n    >\n      <DatabaseDetail\n        needHideCloseIcon\n        initialTab={tab as DatabaseTabs}\n        version={version}\n      />\n    </KnowledgeParamsStoreProvider>\n  );\n};\n\nexport default Main;\n"],"names":["_uri_path_name","spaceID","useSpaceId","projectID","useProjectId","uri","widget","useCurrentWidgetContext","IDENav","useIDENavigate","title","useTitle","version","useCommitVersion","refetch","usePrimarySidebarStore","state","type","opt","doc_id","page_mode","bot_id","workflow_id","agent_id","tab","useIDEParams","KnowledgeParamsStoreProvider","displayName","status","resource","resourceID","query","opts","qs","DatabaseDetail"],"mappings":"qOA2FA,WAvDa,KACX,IAoBeA,EApBTC,EAAUC,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,IACVC,EAAYC,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,IACZ,CAAEC,IAAAA,CAAG,CAAEC,OAAAA,CAAM,CAAE,CAAGC,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,IAClBC,EAASC,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,IACTC,EAAQC,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,IACR,CAAEC,QAAAA,CAAO,CAAE,CAAGC,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,IAEdC,EAAUC,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,EAAuBC,AAAAA,GAASA,EAAM,OAAO,EAIvD,CAAEC,KAAAA,CAAI,CAAEC,IAAAA,CAAG,CAAEC,OAAAA,CAAM,CAAEC,UAAAA,CAAS,CAAEC,OAAAA,CAAM,CAAEC,YAAAA,CAAW,CAAEC,SAAAA,CAAQ,CAAEC,IAAAA,CAAG,CAAE,CAFtDC,AAAAA,GAAAA,EAAAA,EAAAA,AAAAA,IAKpB,MACE,UAACC,EAAAA,EAA4BA,CAAAA,CAC3B,OAAQ,CACNd,QAAAA,EACAT,UAAAA,EACAF,QAAAA,EACA,QAASD,AAAc,OAAdA,CAAAA,EAAAA,MAAAA,EAAAA,KAAAA,EAAAA,EAAK,IAAI,CAAC,IAAI,AAAD,GAAbA,AAAAA,KAAAA,IAAAA,EAAAA,EAAkB,GAC3B,KAAMiB,EACN,IAAKC,EACL,MAAOC,EACP,SAAUC,EACV,IAAK,UACL,MAAOC,EACP,WAAYC,EACZ,QAASC,CACX,EACA,oBAAqBI,AAAAA,IACnBrB,EAAO,QAAQ,CAACqB,GACZA,GAAeA,IAAgBjB,GACjCI,GAEJ,EACA,eAAgBc,AAAAA,IACdtB,EAAO,UAAU,CAACsB,EACpB,EACA,iBAAkB,CAEhB,WAAY,CAACC,EAAUC,EAAYC,EAAOC,IACxCxB,EAAQ,IAAesB,MAAAA,CAAZD,EAAS,KAAiBI,MAAAA,CAAdH,EAAW,KAAuB,OAApBG,IAAAA,SAAY,CAACF,IAAUC,EAChE,E,SAEA,UAACE,EAAAA,EAAcA,CAAAA,CACb,kBAAiB,GACjB,WAAYV,EACZ,QAASZ,C,IAIjB,C"}