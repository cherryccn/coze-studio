/*
 * Copyright 2025 coze-dev Authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

"use strict";(self.webpackChunk_coze_studio_app=self.webpackChunk_coze_studio_app||[]).push([["4108"],{497488:function(e,t,n){n.r(t),n.d(t,{BotEditorInitLayoutAdapter:()=>tx});var o=n("808549"),r=n("120454"),i=n("473980"),a=n("151064"),s=n("336205"),l=n("552938"),c=n("157728"),d=n("455069"),u=n("252237"),g=n.n(u),p=n("136515"),m=n("287487"),x=n("775699"),f=n("727914"),h=n("279516"),v=n("825955"),b=n("277194"),w=n("388993"),_=n("871482"),A=n("380835"),y=n("780601"),E=n("552995"),N=n("674343"),C=e=>{var{getPositionSuccess:t}=e,[n,o]=(0,d.useState)(!1);return{loading:n,getSysPosition:()=>{o(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{o(!1),null==t||t(e)},e=>{switch(o(!1),e.code){case e.PERMISSION_DENIED:N.FN.error(s.o.t("bot_ide_user_declines_geolocation_auth_toast"));break;case e.POSITION_UNAVAILABLE:N.FN.error(s.o.t("bot_ide_geolocation_not_usable_toast"));break;case e.TIMEOUT:N.FN.error(s.o.t("bot_ide_geolocation_request_timeout_toast"));break;default:N.FN.error(s.o.t("bot_ide_geolocation_request_unknown_error_toast"))}}):(o(!1),N.FN.error(s.o.t("bot_ide_browser_not_support_geolocation_toast")))}}},M=n("407821"),k=n.n(M),S=n("472772"),I=n.n(S),j=n("395245"),z=n.n(j),B=n("297998"),T=n.n(B),L=n("646576"),Q=n.n(L),D=n("606121"),P=n.n(D),U=n("840918"),Z={};Z.styleTagTransform=P(),Z.setAttributes=T(),Z.insert=z().bind(null,"head"),Z.domAPI=I(),Z.insertStyleElement=Q(),k()(U.Z,Z);var G=U.Z&&U.Z.locals?U.Z.locals:void 0,O=e=>{var t,n,o,r,i,l,c,d,u,{interruptMessage:p,actionText:m,setActionText:f}=e,{sendResumeMessage:h,stopResponding:v}=null!==(d=null===(t=(0,y.FL)(y.p7.Resume).chatAreaPluginContext)||void 0===t?void 0:t.writeableAPI.message)&&void 0!==d?d:{},b=null===(r=p.required_action)||void 0===r?void 0:null===(o=r.submit_tool_outputs)||void 0===o?void 0:null===(n=o.tool_calls)||void 0===n?void 0:n[0],{loading:w,getSysPosition:_}=C({getPositionSuccess:e=>{var t,n;f(s.o.t("chat_geolocation_auth_allow_tip",{plugin:null!==(n=null==b?void 0:null===(t=b.require_info)||void 0===t?void 0:t.name)&&void 0!==n?n:"plugin"})),null==h||h({replyId:p.reply_id,options:{extendFiled:{interrupt_message_id:p.message_id,resume_message_id:p.reply_id,tool_outputs:[{tool_call_id:null==b?void 0:b.id,output:JSON.stringify({coordinates:{longitude:String(e.coords.longitude),latitude:String(e.coords.latitude)}})}]}}})}});return(0,a.jsx)("div",{className:g()(G["interrupt-message-box"]),children:m?(0,a.jsx)("div",{className:g()(G["interrupt-message-action"]),children:m}):(0,a.jsx)("div",{className:g()(G["interrupt-message-content"]),children:(null==b?void 0:null===(l=b.require_info)||void 0===l?void 0:null===(i=l.require_fields)||void 0===i?void 0:i.includes("coordinates"))?(0,a.jsxs)(a.Fragment,{children:[s.o.t("chat_geolocation_auth_request_message",{plugin_name:null!==(u=null==b?void 0:null===(c=b.require_info)||void 0===c?void 0:c.name)&&void 0!==u?u:"plugin"}),(0,a.jsxs)(x.T,{className:g()(G["interrupt-message-content-btns"]),children:[(0,a.jsx)(N.zx,{color:"highlight",size:"small",loading:w,onClick:_,children:s.o.t("chat_geolocation_auth_request_message_allow_button")}),(0,a.jsx)(N.zx,{color:"primary",size:"small",disabled:w,onClick:()=>{var e,t;f(s.o.t("chat_geolocation_auth_decline_tip",{plugin:null!==(t=null==b?void 0:null===(e=b.require_info)||void 0===e?void 0:e.name)&&void 0!==t?t:"plugin"})),null==v||v()},children:s.o.t("chat_geolocation_auth_request_message_decline_button")})]})]}):null})})};O.displayName="ChatAreaFunctionCallMessageContent";var H=n("693032"),R={};R.styleTagTransform=P(),R.setAttributes=T(),R.insert=z().bind(null,"head"),R.domAPI=I(),R.insertStyleElement=Q(),k()(H.Z,R);var F=H.Z&&H.Z.locals?H.Z.locals:void 0,q=e=>{var[t,n]=(0,d.useState)(""),{message:i,meta:s}=e;return!i._fromHistory&&(t||s.isFromLatestGroup)?(0,a.jsx)("div",{className:g()(F["interrupt-message-box"]),children:(0,a.jsx)(E._p,(0,r._)((0,o._)({},e),{messageId:i.message_id,senderInfo:{id:""},showUserInfo:!1,theme:t?"none":"border",children:(0,a.jsx)(O,{interruptMessage:i,actionText:t,setActionText:n})}))}):null};q.displayName="ChatAreaFunctionCallMessageBox";class V extends y.Ox{onMessageBoxRender(e){var{message:t}=e;return(0,y.bs)(t)?(0,r._)((0,o._)({},e),{MessageBox:q}):e}}class X extends y.i4{onBeforeDistributeMessageIntoMemberSet(e){var{message:t}=e;return(0,y.bs)(t)?(0,r._)((0,o._)({},e),{memberSetType:"llm"}):e}}class K extends y.x1{constructor(...e){super(...e),this.pluginMode=y.tf.Writeable,this.pluginName=y.p7.Resume,this.lifeCycleServices={messageLifeCycleService:new X(this),renderLifeCycleService:new V(this)}}}var J={createPluginBizContext(){},Plugin:K},W=n("983153"),Y=n("828950"),$=n("30961"),ee=n("532267"),et=n("382534"),en=n("297158"),eo=n("214942"),er=e=>{var{children:t,botId:n,pluginRegistryList:o,requestToInit:r,showBackground:i,grabEnableUpload:s}=e;(0,$.uY)();var l=(0,$.lp)();return(0,a.jsx)(y.jD,{spaceId:eo.rY.getState().getSpaceId(),botId:n,scene:A.xs.Playground,userInfo:l,requestToInit:r,reporter:en.E7,enableChatActionLock:!0,enableChatCoreDebug:!0,pluginRegistryList:o,enableImageAutoSize:!0,enablePasteUpload:s,enableDragUpload:s,uikitChatInputButtonStatus:{isMoreButtonDisabled:!s},showBackground:i,children:t})},ei=n("528318"),ea=()=>{var e,t=(0,b.Ee)(e=>{var t;return null===(t=e.backgroundImageInfoList)||void 0===t?void 0:t[0]}),{ChatBackgroundPlugin:n}=(0,ei.DY)();return(0,d.useEffect)(()=>{ei.DP.emit(ei.i$.OnBackgroundChange,t)},[t]),{ChatBackgroundPlugin:n,showBackground:!!(null==t?void 0:null===(e=t.mobile_background_image)||void 0===e?void 0:e.origin_image_url)}},es=e=>({}),el=n("727438"),ec=n("163600"),ed=n("298203"),eu=n("335740"),eg=n("871873"),ep=n("707107"),em=n("824833"),ex=e=>{var{message:t,from:n,botId:r}=e,{isSelf:i}=l.K.getState(),a={is_user_owned:i?"true":"false",message_id:t.extra_info.local_message_id,bot_id:r};"inputAndSend"===n&&(0,ep.Gg)(ep.Kg.click_send_message,(0,o._)({from:"type"},a)),"regenerate"===n&&(0,ep.Gg)(ep.Kg.click_send_message,(0,o._)({from:"regenerate"},a)),"suggestion"===n&&(0,ep.Gg)(ep.Kg.click_send_message,(0,o._)({from:"welcome_message_suggestion"},a))},ef=(e,t)=>{var n,{message:o,options:r}=e,{mode:i}=w.G.getState();if(t===y.xs.Playground||i===ee.J4.MultiMode){var a=(0,eu.Z)(null!=r?r:{});if(t===y.xs.Playground&&(0,eg.Z)(a,{extendFiled:{space_id:eo.rY.getState().getSpaceId()}}),i===ee.J4.MultiMode){eb(e);var s=ew();(0,eg.Z)(a,{extendFiled:{extra:{bot_state:JSON.stringify(s)}}})}var l=w.G.getState();return(0,eg.Z)(a,{headers:{"rpc-persist-mock-traffic-scene":(n=l).mode===ee.J4.MultiMode?em.zE.CozeMultiAgentDebug:em.zE.CozeSingleAgentDebug,"rpc-persist-mock-traffic-caller-id":n.botId,"rpc-persist-mock-space-id":null==n?void 0:n.space_id,"rpc-persist-mock-traffic-enable":1}}),{message:o,options:a}}},eh=e=>{if("object"==typeof e&&"tool_response"===e.type&&e.content_type===y.zc.Text){var t=(0,ed.dj)(e.content);if("object"==typeof t&&"Task created successfully"===t.response_for_model)return!0}return!1},ev=e=>{if("follow_up"===e.type){ed.a2.messageReceiveSuggestsEvent.receiveSuggest();return}ed.a2.receiveMessageEvent.receiveMessage(e),"answer"===e.type&&e.is_finish&&(ed.a2.receiveMessageEvent.finish(e),ed.a2.receiveMessageEvent.start())},eb=e=>{var{message:t,options:n}=e;if(!!((null==n?void 0:n.isRegenMessage)&&"user"===t.role)){var{currentAgentID:o,updatedCurrentAgentIdWithConnectStart:r,setMultiAgent:i}=el.c.getState(),a=(0,y.aF)(t.extra_info.bot_state),s=o===ec.IA.getState().agentId?o:null==a?void 0:a.agent_id;s?i({currentAgentID:s}):r()}},ew=()=>{var{botId:e}=w.G.getState(),{currentAgentID:t}=el.c.getState();return{agent_id:t,bot_id:e}},e_=e=>({onMessagePullingSuccess(){ed.a2.messageReceiveSuggestsEvent.success()},onSendMessageError(e){var t,{error:n}=e;(null===(t=n.ext)||void 0===t?void 0:t.code)===y.R2&&N.FN.warning(s.o.t("jinja_invalid"));var o=n instanceof Error?n:new f.sH("normal_error","unknow"),r=o.message;ed.a2.executeDraftBotEvent.error({error:o,reason:r})},onAfterSendMessage(){ed.a2.executeDraftBotEvent.success(),ed.a2.receiveMessageEvent.start()},onBeforeSendMessage(t){var{botId:n,scene:r}=e.pluginBizContext;ed.a2.executeDraftBotEvent.start(),ex({message:t.message,from:t.from,botId:n});var i=ef(t,r);return(0,o._)({},t,i)},onBeforeProcessReceiveMessage(t){var{message:n}=t,{pluginBizContext:o}=e,{methods:{refreshTaskList:r}}=o;ev(n),eh(n)&&r();var i=(0,y.aF)(n.extra_info.bot_state),a=null==i?void 0:i.agent_id;return a&&(ec.IA.getState().clearAgentId(),el.c.getState().setMultiAgent({currentAgentID:a})),t},onMessagePullingError(e){var t,n=(0,y.Pb)(null===(t=e.error)||void 0===t?void 0:t.message);if(!!n){if(n.code===y.VB.SuggestError){ed.a2.messageReceiveSuggestsEvent.error({error:e.error,reason:n.msg});return}ed.a2.receiveMessageEvent.error()}}}),eA=e=>({onAfterClearHistory(){var{chatModeConfig:e,updatedCurrentAgentIdWithConnectStart:t,resetHostAgent:n}=el.c.getState(),{mode:o}=w.G.getState();o===ee.J4.MultiMode&&(t(),e.type===ee.P3.Host&&n())},onAfterStopResponding(e){var{brokenFlattenMessageGroup:t}=e,{mode:n}=w.G.getState(),{chatModeConfig:o,setMultiAgent:r}=el.c.getState();if(n===ee.J4.MultiMode&&o.type===ee.P3.Host){var i=o.currentHostId,a=null==t?void 0:t.filter(e=>"assistant"===e.role&&"answer"===e.type).at(-1);if(!a){r({currentAgentID:i});return}var s=(0,y.aF)(a.extra_info.bot_state);if(!(null==s?void 0:s.awaiting)){r({currentAgentID:i});return}r({currentAgentID:s.awaiting})}}}),ey=e=>({}),eE=e=>({appLifeCycleService:ey(e),messageLifeCycleService:e_(e),commandLifeCycleService:eA(e),renderLifeCycleService:es(e)});class eN extends y.x1{constructor(...e){super(...e),this.pluginMode=y.tf.Writeable,this.pluginName=y.p7.DebugCommon,this.lifeCycleServices=(0,y.BO)(this,eE)}}var eC=e=>({createPluginBizContext:()=>(0,o._)({},e),Plugin:eN}),eM=e=>{var{children:t,botId:n,userId:o}=e,r=eC({scene:A.xs.Playground,botId:n,methods:{refreshTaskList:()=>0}}),i=(0,l.K)(e=>e.setPageRuntimeBotInfo),{grabEnableUpload:s,GrabPlugin:c,grabPluginId:u}=(0,Y.vy)(),{ChatBackgroundPlugin:g,showBackground:p}=ea();(0,d.useEffect)(()=>{u&&i({grabPluginId:u})},[u]),(0,$.uY)();var m=e=>et.nA.GetMessageList(e),x=(0,_.$0)((0,v._)(function*(){var{onboardingContent:e,backgroundImageInfoList:t}=b.Ee.getState(),{prologue:o}=e,r=w.G.getState(),{name:i,icon_url:a}=null!=r?r:{},s={bot_id:n,cursor:"0",count:15,draft_mode:!0,scene:ee.xs.Playground},l=yield m(s);return{conversationId:l.conversation_id,cursor:l.cursor,hasMore:l.hasmore,messageList:l.message_list,lastSectionId:l.last_section_id,prologue:o,botInfoMap:{[n]:{nickname:null!=i?i:"",url:null!=a?a:"",id:n,allowMention:!1}},backgroundInfo:t[0],next_cursor:l.next_cursor}})),f=[r,J,c,g,W.n];return o?(0,a.jsx)(er,{requestToInit:x,botId:n,pluginRegistryList:f,showBackground:p,grabEnableUpload:s,children:t}):null},ek=n("617293"),eS={};eS.styleTagTransform=P(),eS.setAttributes=T(),eS.insert=z().bind(null,"head"),eS.domAPI=I(),eS.insertStyleElement=Q(),k()(ek.Z,eS);var eI=ek.Z&&ek.Z.locals?ek.Z.locals:void 0,ej=e=>{var{children:t}=e;return(0,a.jsx)(d.Fragment,{children:t})},ez=e=>{var{children:t,botId:n,hasHeader:o=!0,headerBottom:r,headerTop:i,header:s,customProvider:c}=e,[u,f]=(0,d.useState)(!0),v=(0,l.K)(e=>e.init),b=m.Z.useUserInfo(),w=(0,h.cY)(e=>e.bot.modeSwitching);return(0,p.Z)(()=>{u&&v&&f(!1)},[v]),(0,a.jsx)("div",{className:eI.wrapper,children:u&&!v?(0,a.jsx)(x.yC,{spinning:!0,wrapperClassName:"h-full w-full"}):(0,a.jsx)(c||ej,{botId:n,children:(0,a.jsx)(eM,{botId:n,userId:null==b?void 0:b.user_id_str,children:(0,a.jsxs)(x.yC,{spinning:w,wrapperClassName:g()(eI["spin-wrapper"],eI["top-level"]),children:[i,o?s:null,r,t]})})})})},eB=n("59955"),eT=n("664319"),eL=n("865558"),eQ=n("179429"),eD=n("212270"),eP=n("227733"),eU=n("85608"),eZ=n("915757"),eG=n("44172"),eO=n("178385"),eH=n("728237"),eR={};eR.styleTagTransform=P(),eR.setAttributes=T(),eR.insert=z().bind(null,"head"),eR.domAPI=I(),eR.insertStyleElement=Q(),k()(eH.Z,eR);var eF=eH.Z&&eH.Z.locals?eH.Z.locals:void 0,eq=n("790426");function eV(){var{savingInfoSaving:e,savingInfoTime:t}=(0,l.K)((0,eT.N)(e=>({savingInfoSaving:e.savingInfo.saving,savingInfoTime:e.savingInfo.time})));return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(N.Vp,{color:"primary",className:"!bg-transparent !p-0 !text-xs",loading:e,prefixIcon:e?(0,a.jsx)(eZ.j2n,{}):null,children:e?(0,a.jsx)("div",{className:eF["status-tag-spin"],children:(0,a.jsx)("span",{children:s.o.t("bot_autosave_saving")})}):s.o.t("devops_publish_multibranch_auto_saved",{time:t})})})}var eX=e=>{var{warningList:t,onCancel:n,readonly:o,deployButton:r=null}=e;return(0,a.jsxs)("div",{className:eF["warning-content"],children:[t.length>1?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:eF["title-box"],children:[(0,a.jsx)(eq.Z,{size:"large",style:{color:"var(--semi-color-warning)"}}),(0,a.jsx)("span",{className:eF.title,children:s.o.t("bot_pulish_offline_modal_title2",{platform_number:null==t?void 0:t.length})})]}),(0,a.jsx)("div",{className:eF.main,children:null==t?void 0:t.map(e=>(0,a.jsxs)("div",{className:eF["warning-list"],children:[(0,a.jsx)("h4",{children:e.name}),(0,a.jsx)("span",{children:s.o.t("bot_publish_offline_notice_no_certain_time",{platform:e.name})})]}))})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:eF["title-box"],children:[(0,a.jsx)(eq.Z,{size:"large",style:{color:"var(--semi-color-warning)"}}),(0,a.jsx)("span",{className:eF.title,children:t[0].connector_status===eO.QI.Offline?s.o.t("bot_pulish_offline_modal_title1",{platform:t[0].name}):t[0].name})]}),(0,a.jsx)("div",{className:eF.main,children:t[0].connector_status===eO.QI.Offline?s.o.t("bot_publish_offline_notice_no_certain_time",{platform:t[0].name}):s.o.t("bot_publish_token_expired_notice",{platform:t[0].name})})]}),o?(0,a.jsx)("div",{className:eF.footer,children:(0,a.jsx)(x.y3,{theme:"solid",type:"warning",onClick:n,children:s.o.t("devops_publish_multibranch_i_know")})}):(0,a.jsxs)("div",{className:eF.footer,children:[(0,a.jsx)(x.y3,{theme:"light",type:"tertiary",className:eF["cancel-btn"],onClick:n,children:s.o.t("Cancel")}),r]})]})},eK=e=>{var t,{deployButton:n}=e,{connectors:o,noPublish:r}=(0,w.G)((0,eT.N)(e=>({noPublish:!e.has_publish,connectors:e.connectors}))),[i,l]=(0,d.useState)(!1);return(0,a.jsx)("div",{className:eF["status-tag"],children:r?null:(null==(t=null==o?void 0:o.filter(e=>e.connector_status!==eO.QI.Normal))?void 0:t.length)?(0,a.jsxs)(N.J2,{position:"bottomLeft",visible:i,content:eX({warningList:t,onCancel:()=>l(!1),deployButton:n}),trigger:"custom",children:[(0,a.jsx)(N.iz,{layout:"vertical",className:"!h-3 mx-2"}),(0,a.jsx)(N.Vp,{color:"yellow",className:"!p-0",prefixIcon:(0,a.jsx)(eZ.DIY,{}),onClick:()=>{l(!0)},children:(0,a.jsx)("div",{children:s.o.t("bot_status_published")})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.iz,{layout:"vertical",className:"!h-3 mx-2"}),(0,a.jsx)(N.Vp,{color:"primary",className:"!bg-transparent !p-0 !coz-fg-secondary",prefixIcon:(0,a.jsx)(eZ.nAC,{className:"coz-fg-hglt-green"}),children:s.o.t("bot_status_published")})]})})},eJ=e=>{var{deployButton:t}=e,{botInfo:n}=(0,w.G)((0,eT.N)(e=>({botInfo:e}))),{space:{name:o,space_type:r}}=(0,eo.rY)(),i=r===eO.Sn.Personal;return(0,a.jsxs)("div",{className:"w-[260px] p-4 coz-bg-max",children:[(0,a.jsx)("div",{className:"flex items-center justify-center mb-7",children:(0,a.jsx)(N.qE,{size:"medium",src:n.icon_url})}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 flex-col",children:[(0,a.jsx)(N.ZT.Text,{strong:!0,className:"!text-xxl !font-medium",children:n.name}),(0,a.jsxs)("div",{className:"flex items-cente",children:[(0,a.jsx)(N.Vp,{color:"primary",className:"max-w-[160px] !bg-transparent !coz-fg-secondary !p-0",prefixIcon:i?(0,a.jsx)(eZ.pKU,{}):(0,a.jsx)(eZ.p5T,{}),children:o}),(0,a.jsx)(eK,{deployButton:t})]}),n.description?(0,a.jsx)(N.ZT.Paragraph,{className:"text-sm coz-fg-primary",ellipsis:{rows:2},children:n.description}):null,(0,a.jsxs)("div",{className:"text-xs coz-fg-secondary",children:[s.o.t("Create_time"),":"," ",n.create_time?(0,ed.p6)(Number(n.create_time)):null]})]})]})},eW=e=>{var{isReadonly:t,editBotInfoFn:n,deployButton:o}=e,{botInfo:r,noPublish:i}=(0,w.G)((0,eT.N)(e=>({botInfo:e,noPublish:!e.has_publish}))),s=(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(N.qE,{size:"small",shape:"square",src:null==r?void 0:r.icon_url,className:"rounded"}),i?null:(0,a.jsx)("div",{className:"absolute flex justify-center items-center -right-[1px] -bottom-[1px] w-3 h-3 text-[12px] coz-bg-max box-content border-[1.5px] border-solid rounded-small border-[#fff]",children:(0,a.jsx)(eZ.Lz_,{className:"relative coz-fg-hglt-green"})})]}),(0,a.jsx)(N.ZT.Title,{className:"!text-[16px] !coz-fg-plus !font-medium !leading-[22px]",children:null==r?void 0:r.name}),!t&&(0,a.jsx)(N.hU,{className:"edit-btn",color:"secondary",icon:(0,a.jsx)(eG.mGJ,{}),theme:"borderless",onClick:()=>{n()},"data-testid":"bot.ide.bot_creator.bot-info-edit-create-edit-info-button"})]});return(0,a.jsx)(N.J2,{content:(0,a.jsx)(eJ,{deployButton:o}),trigger:"hover",position:"bottomLeft",children:s})},eY=n("62989"),e$={};e$.styleTagTransform=P(),e$.setAttributes=T(),e$.insert=z().bind(null,"head"),e$.domAPI=I(),e$.insertStyleElement=Q(),k()(eY.Z,e$);var e0=eY.Z&&eY.Z.locals?eY.Z.locals:void 0,e1=e=>{var t,n,o=(0,c.useNavigate)(),r=(0,eo.rY)(e=>e.space.id),i=(0,ec.ti)(),{pageFrom:u}=(0,l.K)((0,eT.N)(e=>({pageFrom:e.pageFrom}))),p=(0,w.G)(),{updateBotInfo:m}=(0,y.Wp)(),x=(0,d.useRef)();(0,d.useEffect)(()=>{x.current=p},[p]);var{modal:f,startEdit:h}=(0,eL.v)({botInfoRef:x,onSuccess:(e,t,n)=>{m(t=>{var o,r,i=(0,eu.Z)(t);return e?(i[e]={url:null!==(o=null==n?void 0:n.botAvatar)&&void 0!==o?o:"",nickname:null!==(r=null==n?void 0:n.botName)&&void 0!==r?r:"",id:e,allowMention:!1},i):i})}}),v=(0,eQ.L)(e=>e.diffTask);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:g()(e0.header,"coz-bg-primary"),children:[(0,a.jsx)(eB.q,{children:(0,a.jsx)("title",{children:(0,ed.Z$)(u===eP.J.Bot?s.o.t("tab_bot_detail",{bot_name:null!==(t=null==p?void 0:p.name)&&void 0!==t?t:""}):s.o.t("tab_explore_bot_detail",{bot_name:null!==(n=null==p?void 0:p.name)&&void 0!==n?n:""}))})}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(eD.xE,{onClickBack:()=>{o("/space/".concat(r,"/develop"))}}),(0,a.jsx)(eW,{isReadonly:i,editBotInfoFn:h,deployButton:e.deployButton}),v?null:(0,a.jsx)(eU.GW,{optionList:e.modeOptionList})]}),e.addonAfter,f]})})},e2=n("76313"),e4=n("189284"),e6=n("28260"),e8=n("626389"),e5=n.n(e8),e3=n("689951"),e7=n("735114"),e9=n("841969");let te=(0,e9.A)(function(e){return d.createElement("svg",Object.assign({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",focusable:!1,"aria-hidden":!0},e),d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.94 2.94a5.74 5.74 0 1 1 8.12 8.12l-2.67 2.67a7.05 7.05 0 0 0-.4-3.85l.95-.94a2.74 2.74 0 1 0-3.88-3.88l-4 4a2.74 2.74 0 0 0 .9 4.48l-2.2 2.2a5.77 5.77 0 0 1-.82-8.8l4-4Zm-10 10 2.67-2.67a7.04 7.04 0 0 0 .4 3.85l-.95.94a2.74 2.74 0 1 0 3.88 3.88l4-4a2.74 2.74 0 0 0-.57-4.31l2.16-2.16a5.74 5.74 0 0 1 .53 8.6l-4 4a5.74 5.74 0 0 1-8.12-8.13Z",fill:"currentColor"}))},"link");var tt=n("789570"),tn={};tn.styleTagTransform=P(),tn.setAttributes=T(),tn.insert=z().bind(null,"head"),tn.domAPI=I(),tn.insertStyleElement=Q(),k()(tt.Z,tn);var to=tt.Z&&tt.Z.locals?tt.Z.locals:void 0,tr=e=>{var{linkInfo:t,hasMorePlatform:n,isReadOnly:i}=e,[l,{setTrue:c,setFalse:d}]=(0,e3.Z)(!1),{botId:u,mode:g}=(0,w.G)((0,eT.N)(e=>({botId:e.botId,mode:e.mode}))),p=e=>{if(!!t.share_link)e.stopPropagation(),e5()(t.share_link)&&x.FN.success({showClose:!1,content:s.o.t("copy_success")})},{run:m}=(0,e7.Z)((0,v._)(function*(){if(!!u&&!i){var{botSkillInfo:e}=(0,ec.yN)(),{data:t}=yield(0,ec.By)((0,r._)((0,o._)({},e),{bot_mode:g}));(0,ec.yw)(t)}}),{manual:!0}),f=t.connector_status!==eO.QI.Normal||n,h=(0,a.jsxs)("div",{className:to["link-item"],children:[(0,a.jsxs)(x.T,{children:[t.icon?"string"==typeof t.icon?(0,a.jsx)(x.Ee,{src:t.icon,width:16,height:16,preview:!1,className:to["link-img"]}):(0,a.jsx)("div",{className:"w-4 h-4 rounded-mini [&_.semi-icon-default]:w-full [&_.semi-icon-default]:h-full [&_svg]:w-full [&_svg]:h-full",children:t.icon}):null,(0,a.jsxs)("div",{children:[" ",t.name," "]})]}),(0,a.jsx)(x.u,{content:s.o.t("Copy_link"),position:"right",children:l&&t.share_link&&""!==t.id&&!i?(0,a.jsx)(x._3,{icon:(0,a.jsx)(te,{}),onClick:p,type:"tertiary",className:to["copy-btn"],iconSize:"small"}):null})]});return(0,a.jsx)(x.ck,{onMouseEnter:c,onMouseLeave:d,disabled:f,onClick:()=>{m(),window.open(t.share_link)},children:f?(0,a.jsx)(x.u,{content:n?s.o.t("bot_share_not_supported_opening"):s.o.t("bot_publish_token_expired_notice",{platform:t.name}),position:"leftTop",children:h}):h})},ti=e=>{var{connectors:t=[],renderMorePlatform:n,isReadOnly:o}=e;return(0,a.jsxs)(N.Lt.Menu,{mode:"menu",children:[!o&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:to["open-in-tips"],children:s.o.t("bot_list_open_button",{platform:""})}),(0,a.jsx)(x.iz,{margin:2,layout:"horizontal"})]}),t.map(e=>(0,a.jsx)(tr,{linkInfo:e,hasMorePlatform:!1,isReadOnly:o},e.name)),n?(0,a.jsx)(tr,{linkInfo:{name:s.o.t("bot_share_more_platforms"),icon:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAAgACADASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAACQYFCv/EACcQAAEEAQMEAQUBAAAAAAAAAAIBAwQFBgcSEwARFBUIFiMxltRW/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAP/xAAjEQABAwMCBwAAAAAAAAAAAAABAAIRAyExQVEScZGhseHw/9oADAMBAAIRAxEAPwDttccBoDddMG2mwJxxxwkAGwBFIzMyVBEBFFIiJUQURVVUROpn65wn/YYt+wVP9fUJ8hSINEdTlAiFVxG0FVFVFVE20AxVUVF2mBEBJ+CElFUVFVOiUxzQ+dk+C4hk1RZFZXObZ81hdfU1sVJcOhEBk+VKyycjouVcl0GwsIMUI7ouVLb01x5EMQaoymHDiLoExjkfH2hJpvrnCl/GYYt+wVP9fVM242822604DrToC4062Qm242YoQONmKqJgYqhCQqokKoqKqKi9CNnekmIQsUzbOcJyKwKixTPRwyCxkYRATKGAiQGH7DGbONwhayWrT2E6TBGC0kWidivK+45HeOSrHx6Mz0R0xIyIy+kqwdxEpLtACAU7qqr2ERQRT8IKIidkRE6PYGgEGZMYiLBFU6n4nLzrT3MMQgSY8OdkNFOrYcmWjnitSX2/sFJVkHHRYVwRF0223XAAiMGnCFAIoch+PupejDKXFjqhgGJTgiWlnWRYma3NZcWpQa6TFlt00cqWIUue7DsH61pBcDf7EoqugElzuzPWXZUdJdcPuKertvH3+P7KviTuDl2cnD5TLvFybA37Nu/YG7vtTsZULLWLSZI10nsEQ04P8Y821JqWXMTz7TO3ZYjQrSXTMZZZyJlG5cRxMG7SujUUgK+eaR1jSU7l3ehuMo64jCKi3aX4nLwXT3D8QnyY8ydj9FBrZkmIjiRXZLLf31jq6IOkyLpELRuNtm4AiZNNKStjUVtHSUvN6enq6nyOPyPW18SBz8W/i5vFZa5ePkc49+7ZvPb23L31Oj6hfGwxvgZPoZ6F/9k="},hasMorePlatform:!0,isReadOnly:o}):null]})},ta=()=>{var{hasPublish:e,connectors:t,version:n,botId:o,spaceId:r,botMarketStatus:i}=(0,w.G)((0,eT.N)(e=>({botId:e.botId,spaceId:e.space_id,hasPublish:e.has_publish,connectors:e.connectors,version:e.version,botMarketStatus:e.botMarketStatus}))),{historyVisible:d}=(0,l.K)((0,eT.N)(e=>({historyVisible:e.historyVisible}))),u=(0,ec.ti)(),g={id:"store",name:s.o.t("bot_edit_store"),icon:(0,a.jsx)("div",{className:"w-4 h-4 rounded-mini [&_.semi-icon-default]:w-full [&_.semi-icon-default]:h-full [&_svg]:w-full [&_svg]:h-full",children:(0,a.jsx)(eG.UYy,{})}),share_link:"".concat(window.location.origin,"/store/agent/").concat(o,"?bot_id=true"),connector_status:i===eO.zC.Online?eO.QI.Normal:eO.QI.Offline},p=[...t].concat(i===eO.zC.Online?[g]:[]),m=null==p?void 0:p.some(e=>!e.share_link),x=!(null==p?void 0:p.length)||n&&d||(null==p?void 0:p.every(e=>!e.share_link));(0,c.useNavigate)();var[f]=(0,e4.V)(),h=!u&&e,{ready:v,inited:b}=(0,e2.N)({type:e6.jH.Bot,intelligenceId:o,spaceId:r,enable:h&&f["bot.studio.publish_management"]&&!1});return!h&&x?null:(s.o.t("analytics_page_title"),"/space/".concat(r,"/publish/agent/").concat(o,"?tab=analysis"),s.o.t("release_management_trace"),"/space/".concat(r,"/publish/agent/").concat(o,"?tab=logs"),s.o.t("release_management_trigger"),"/space/".concat(r,"/publish/agent/").concat(o,"?tab=triggers"),(0,a.jsx)(N.Lt,{render:(0,a.jsxs)(N.Lt.Menu,{mode:"menu",children:[(h&&f["bot.studio.publish_management"],null),x?null:(0,a.jsxs)(a.Fragment,{children:[(h&&f["bot.studio.publish_management"],null),(0,a.jsx)(N.Lt,{render:(0,a.jsx)(ti,{connectors:null==p?void 0:p.filter(e=>e.share_link&&(!u||e.connector_status===eO.QI.Normal)),renderMorePlatform:!u&&!!m,isReadOnly:u}),children:(0,a.jsx)(N.Lt.Item,{children:(0,a.jsxs)("div",{className:"w-full flex items-center",children:[(0,a.jsx)("div",{className:"flex-1",children:s.o.t("release_management_openin")}),(0,a.jsx)(eZ.wMM,{})]})})})]})]}),children:(0,a.jsx)(N.hU,{icon:(0,a.jsx)(eZ.NsR,{})})}))},ts=()=>{var e=(0,c.useNavigate)(),{botId:t,botInfo:n,spaceId:o}=(0,w.G)((0,eT.N)(e=>({description:e.description,botId:e.botId,botInfo:e,spaceId:e.space_id}))),r=()=>{if(!(!t||(0,ec.jN)()))e("/space/".concat(o,"/bot/").concat(t,"/publish"))};return{handlePublish:()=>{(0,ep.Gg)(ep.Kg.bot_publish_button_click,{bot_id:t||"",bot_name:(null==n?void 0:n.name)||""}),r()}}},tl=e=>{var{handlePublish:t}=ts(),n=(0,l.K)(e=>e.hasUnpublishChange);return(0,a.jsx)(tc,(0,o._)({onClick:t,showChangeTip:n},e))},tc=e=>{var{btnType:t="primary",btnText:n=s.o.t("bot_publish_button"),customStyle:o,readonly:r=!1,tooltip:i,showChangeTip:l,onClick:c,disabled:u,loading:g}=e,p=l||i?N.u:d.Fragment,m=(0,a.jsx)(p,{content:i||s.o.t("bot_has_changes_tip"),visible:l,children:(0,a.jsx)(eU.tM,{"data-testid":"agent-ide.goto.publish-button",theme:"solid",type:t,iconPosition:"right",icon:l?(0,a.jsx)(eZ.Lz_,{className:"w-[5px] h-[5px]"}):void 0,style:o,disabled:u||r,onClick:c,loading:g,children:n})});return u?(0,a.jsx)(N.u,{content:s.o.t("devops_publish_multibranch_publish_disabled_tooltip"),children:m}):m},td=e=>{var{bot_id:t}=(0,c.useParams)();if(!t)throw new f.sH("normal_error","failed to get bot_id");return(0,a.jsx)(ez,(0,r._)((0,o._)({},e),{botId:t}))},tu=n("827331").Dp,tg=[{value:ee.J4.SingleMode,getIsDisabled:()=>!1,icon:(0,a.jsx)(eG.rwp,{}),title:s.o.t("singleagent_LLM_mode"),desc:s.o.t("singleagent_LLM_mode_desc"),showText:!0},{value:ee.J4.WorkflowMode,getIsDisabled:()=>!1,icon:(0,a.jsx)(eZ.eTH,{}),title:s.o.t("singleagent_workflow_mode"),desc:s.o.t("singleagent_workflow_mode_desc"),showText:!0}],tp=n("474872"),tm=e=>{var{isEditLocked:t}=e,n=(0,ec.ti)(),o=(0,l.K)(e=>e.editable),{botId:r,botInfo:i}=(0,w.G)((0,eT.N)(e=>({botId:e.botId,botInfo:e})));return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:n?null:(0,a.jsx)(eV,{})}),o?(0,a.jsx)(x.iz,{layout:"vertical",style:{height:"20px"}}):null,(0,a.jsx)("div",{className:"flex items-center gap-2",children:t?null:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(ta,{})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[o?(0,a.jsx)(tl,{}):null,!o&&i&&r?(0,a.jsx)(tp.hE,{botID:r}):null,(0,a.jsx)("div",{id:"diff-task-button-container"})]})]})})]})},tx=e=>{var{children:t,headerExtra:n,pageName:c}=e,d=(0,i._)(e,["children","headerExtra","pageName"]);tu();var u=(0,l.K)(e=>e.isPreview);return(0,a.jsx)(td,(0,r._)((0,o._)({},d),{header:(0,a.jsx)(e1,{pageName:c,isEditLocked:u,addonAfter:(0,a.jsx)(tm,{pageName:c,isEditLocked:u}),modeOptionList:tg,deployButton:(0,a.jsx)(tl,{btnType:"warning",btnText:s.o.t("bot_publish_ republish_btn"),customStyle:{height:"38px"}})}),children:t}))}},824833:function(e,t,n){n.d(t,{d$:function(){return s},re:function(){return a},zE:function(){return l}});var o,r,i,a=((o={})[o.Undefined=0]="Undefined",o[o.CozePlugin=1e4]="CozePlugin",o[o.CozeTool=10001]="CozeTool",o[o.CozeWorkflow=10002]="CozeWorkflow",o[o.CozeSubWorkflow=10003]="CozeSubWorkflow",o[o.CozeLLMNode=10004]="CozeLLMNode",o[o.CozeCodeNode=10005]="CozeCodeNode",o[o.CozeKnowledgeNode=10006]="CozeKnowledgeNode",o[o.CozeToolNode=10007]="CozeToolNode",o[o.CozeStartNode=10008]="CozeStartNode",o[o.CozeVariableNode=10009]="CozeVariableNode",o[o.CozeVariableBot=2e4]="CozeVariableBot",o[o.CozeVariableChat=20001]="CozeVariableChat",o);var s=((r={})[r.UpdateTime=1]="UpdateTime",r);var l=((i={})[i.Undefined=0]="Undefined",i[i.CozeSingleAgentDebug=1e4]="CozeSingleAgentDebug",i[i.CozeMultiAgentDebug=10001]="CozeMultiAgentDebug",i[i.CozeToolDebug=10002]="CozeToolDebug",i[i.CozeWorkflowDebug=10003]="CozeWorkflowDebug",i)},983153:function(e,t,n){n.d(t,{n:()=>m});var o=n("780601"),r=e=>({}),i=e=>({}),a=e=>({}),s=e=>({}),l=e=>({appLifeCycleService:s(e),messageLifeCycleService:i(e),commandLifeCycleService:a(e),renderLifeCycleService:r(e)}),c=n("151064"),d=n("455069"),u=n("193893"),g=(0,d.memo)(e=>{var[t,n]=(0,d.useState)(!1),o=(0,d.useRef)(e.message.reasoning_content);return(0,d.useEffect)(()=>(n(o.current===e.message.reasoning_content),()=>{o.current=e.message.reasoning_content}),[e.message.reasoning_content,e.message.content]),"assistant"===e.message.role&&e.message.reasoning_content?(0,c.jsx)("div",{className:"my-[8px]",children:(0,c.jsx)(u.HK,{markDown:"".concat(e.message.reasoning_content.replace(/^/gm,"> ")),showIndicator:!e.message.is_finish&&!t})}):null},(e,t)=>e.message.role===t.message.role&&e.message.is_finish===t.message.is_finish&&e.message.reasoning_content===t.message.reasoning_content&&e.message.content===t.message.content);class p extends o.YN{constructor(...e){super(...e),this.pluginMode=o.tf.Readonly,this.pluginName=o.p7.Demo,this.lifeCycleServices=(0,o.y1)(this,l),this.customComponents=(0,o.S3)({TextMessageInnerTopSlot:g})}}var m={createPluginBizContext:()=>({}),Plugin:p}},528318:function(e,t,n){n.d(t,{DP:()=>z,i$:()=>c,DY:()=>B});var o,r=n("917085"),i=n("479910"),a=n("598208"),s=e=>(0,a.Ue)()((0,i.mW)(e=>({backgroundImageInfo:{mobile_background_image:{},web_background_image:{}},clearBackgroundStore:()=>e({backgroundImageInfo:{mobile_background_image:{},web_background_image:{}}},!1,"clearBackgroundStore"),setBackgroundInfo:t=>{e({backgroundImageInfo:t},!1,"setBackgroundInfo")}}),{name:"botStudio.ChatBackground.".concat(e),enabled:!1})),l=n("780601");var c=((o={}).OnBackgroundChange="onBackgroundChange",o),d=e=>({onBeforeInitial:()=>{var{chatBackgroundEvent:t,storeSet:n}=e.pluginBizContext,{setBackgroundInfo:o}=n.useChatBackgroundContext.getState();t.on(c.OnBackgroundChange,e=>{o(e)})},onAfterInitial:t=>{var{setBackgroundInfo:n,clearBackgroundStore:o}=e.pluginBizContext.storeSet.useChatBackgroundContext.getState(),r=t.messageListFromService.backgroundInfo;r?n(r):o()},onBeforeDestroy:()=>{var{chatBackgroundEvent:t}=e.pluginBizContext;t.all.clear()}}),u=n("151064"),g=n("664319"),p=n("552995"),m=n("407821"),x=n.n(m),f=n("472772"),h=n.n(f),v=n("395245"),b=n.n(v),w=n("297998"),_=n.n(w),A=n("646576"),y=n.n(A),E=n("606121"),N=n.n(E),C=n("110614"),M={};M.styleTagTransform=N(),M.setAttributes=_(),M.insert=b().bind(null,"head"),M.domAPI=h(),M.insertStyleElement=y(),x()(C.Z,M);var k=C.Z&&C.Z.locals?C.Z.locals:void 0,S=e=>{var t,{headerNode:n}=e,{useChatBackgroundContext:o}=(0,l.W9)(l.p7.ChatBackground).pluginBizContext.storeSet,r=o((0,g.N)(e=>e.backgroundImageInfo));return(null==r?void 0:null===(t=r.mobile_background_image)||void 0===t?void 0:t.origin_image_url)?(0,u.jsxs)(u.Fragment,{children:[n?(0,u.jsx)("div",{className:k.mask}):null,(0,u.jsx)(p.Uh,{backgroundInfo:r})]}):null},I=e=>({appLifeCycleService:d(e)});class j extends l.YN{constructor(...e){super(...e),this.pluginMode=l.tf.Readonly,this.pluginName=l.p7.ChatBackground,this.lifeCycleServices=(0,l.y1)(this,I),this.customComponents=(0,l.S3)({MessageListFloatSlot:S})}}var z=(0,r.Z)(),B=()=>{var e=s("chatBackground");return{ChatBackgroundPlugin:{createPluginBizContext:()=>({storeSet:{useChatBackgroundContext:e},chatBackgroundEvent:z}),Plugin:j},chatBackgroundEvent:z}}},828950:function(e,t,n){n.d(t,{vy:()=>eN});var o,r,i=n("392060"),a=n("455069"),s=n("801815"),l=n("917085"),c=n("479910"),d=n("598208"),u=e=>(0,d.Ue)()((0,c.mW)((e,t)=>({humanizedContentText:"",originContentText:"",normalizeSelectionNodeList:[],selectionData:null,isFloatMenuVisible:!1,floatMenuPosition:null,updateHumanizedContentText:t=>{e({humanizedContentText:t})},updateOriginContentText:t=>{e({originContentText:t})},updateNormalizeSelectionNodeList:t=>{e({normalizeSelectionNodeList:t})},updateIsFloatMenuVisible:t=>{e({isFloatMenuVisible:t})},updateSelectionData:t=>{e({selectionData:t})},updateFloatMenuPosition:t=>{e({floatMenuPosition:t})},clearStore:()=>{e({humanizedContentText:"",originContentText:"",normalizeSelectionNodeList:[],selectionData:null})}}),{name:"botStudio.ChatAreaGrabPlugin.SelectionStore.".concat(e),enabled:!1})),g=n("61111"),p=e=>(0,d.Ue)()((0,c.mW)((0,c.XR)(e=>({quoteContent:null,quoteVisible:!1,quoteContentMap:{},updateQuoteContent:t=>{e({quoteContent:t})},updateQuoteContentMapByImmer:t=>{e((0,g.Uy)(e=>t(e.quoteContentMap)))},updateQuoteVisible:t=>{e({quoteVisible:t})},clearStore:()=>{e({quoteContent:null,quoteVisible:!1})}})),{name:"botStudio.ChatAreaGrabPlugin.Quote.".concat(e),enabled:!1})),m=(e,t)=>{var{useQuoteStore:n}=e;return n.subscribe(e=>e.quoteContent,e=>{var{onQuoteChange:n}=t;null==n||n({isEmpty:!e})})},x=e=>(0,d.Ue)()((0,c.mW)((0,c.XR)(e=>({enableGrab:!1,updateEnableGrab:t=>{e({enableGrab:t})}})),{name:"botStudio.ChatAreaGrabPlugin.Preference.".concat(e),enabled:!1})),f=n("780601"),h=n("808549"),v=n("120454");var b=((o={}).OnViewScroll="onViewScroll",o.OnMessageUpdate="onMessageUpdate",o.OnLinkElementMouseEnter="onCardLinkElementMouseEnter",o.OnLinkElementMouseLeave="onCardLinkElementMouseLeave",o);var w=((r={}).UpdateQuote="updateQuote",r);class _ extends f.i4{onBeforeAppendSenderMessageIntoStore(e){var{quoteContent:t,updateQuoteContentMapByImmer:n}=this.pluginInstance.pluginBizContext.storeSet.useQuoteStore.getState();if(!t||"shortcut"===e.from)return e;var o=e.message,r={item_list:[{type:"text",text:o.content}],refer_items:[]};r.refer_items.push({type:f.zc.Text,text:(0,i.jU)(t)});var a=(0,v._)((0,h._)({},o),{content_type:f.zc.Mix,content:JSON.stringify(r),content_obj:r});return n(e=>{var n=a.extra_info.local_message_id;!e[n]&&(e[n]=t)}),(0,v._)((0,h._)({},e),{message:a})}onAfterAppendSenderMessageIntoStore(e){if("shortcut"!==e.from){var{storeSet:t}=this.pluginInstance.pluginBizContext,{updateQuoteVisible:n,updateQuoteContent:o}=t.useQuoteStore.getState();n(!1),o(null)}}onAfterProcessReceiveMessage(){var{emit:e}=this.pluginInstance.pluginBizContext.eventCenter;e(b.OnMessageUpdate)}}class A extends f.Bw{onViewScroll(){var{emit:e}=this.pluginInstance.pluginBizContext.eventCenter;e(b.OnViewScroll)}onCardLinkElementMouseEnter(e){var{emit:t}=this.pluginInstance.pluginBizContext.eventCenter;t(b.OnLinkElementMouseEnter,(0,v._)((0,h._)({},e),{type:"image"}))}onCardLinkElementMouseLeave(e){var{emit:t}=this.pluginInstance.pluginBizContext.eventCenter;t(b.OnLinkElementMouseLeave,(0,v._)((0,h._)({},e),{type:"image"}))}onMdBoxImageElementMouseEnter(e){var{emit:t}=this.pluginInstance.pluginBizContext.eventCenter;t(b.OnLinkElementMouseEnter,(0,v._)((0,h._)({},e),{type:"image"}))}onMdBoxImageElementMouseLeave(e){var{emit:t}=this.pluginInstance.pluginBizContext.eventCenter;t(b.OnLinkElementMouseLeave,(0,v._)((0,h._)({},e),{type:"image"}))}onMdBoxLinkElementMouseEnter(e){var{emit:t}=this.pluginInstance.pluginBizContext.eventCenter;t(b.OnLinkElementMouseEnter,(0,v._)((0,h._)({},e),{type:"link"}))}onMdBoxLinkElementMouseLeave(e){var{emit:t}=this.pluginInstance.pluginBizContext.eventCenter;t(b.OnLinkElementMouseLeave,(0,v._)((0,h._)({},e),{type:"link"}))}}class y extends f.r1{onBeforeDestroy(){var{unsubscribe:e,eventCenter:t,publicEventCenter:n,scene:o}=this.pluginInstance.pluginBizContext;if("store"!==o)e(),t.all.clear(),n.all.clear()}onBeforeInitial(){var{publicEventCenter:e,grabPluginId:t,storeSet:n}=this.pluginInstance.pluginBizContext,{useQuoteStore:o}=n,{updateQuoteContent:r,updateQuoteVisible:i}=o.getState();e.on(w.UpdateQuote,e=>{var{grabPluginId:n,quote:o}=e;if(t===n)r(o),i(!0)})}}var E=n("151064"),N=n("664319"),C=n("747514"),M=n("252237"),k=n.n(M),S=n("552995"),I=n("336205"),j=n("915757"),z=n("674343"),B=e=>{var{messageId:t,chatAreaPluginContext:n}=e;if(!!t)return n.readonlyAPI.message.findMessage(t)},T=e=>{var{onClose:t,onClick:n}=e,{pluginBizContext:o,chatAreaPluginContext:r}=(0,f.FL)(f.p7.MessageGrab),{onQuote:i}=o.eventCallbacks,{useQuoteStore:a,useSelectionStore:s,usePreferenceStore:l}=o.storeSet,{updateQuoteContent:c,updateQuoteVisible:d}=a((0,N.N)(e=>({updateQuoteVisible:e.updateQuoteVisible,updateQuoteContent:e.updateQuoteContent}))),u=l(e=>e.enableGrab),{useDeleteFile:g}=r.writeableHook.file,{getFileStoreInstantValues:p}=r.readonlyAPI.batchFile,m=g(),x=()=>{var{fileIdList:e}=p();e.forEach(e=>m(e))},h=()=>{var{selectionData:e}=s.getState(),t=null==e?void 0:e.ancestorAttributeValue;if(!!t)return B({messageId:t,chatAreaPluginContext:r})};return u?(0,E.jsx)(z.u,{content:I.o.t("quote_ask_in_chat"),clickToHide:!0,children:(0,E.jsx)(z.hU,{icon:(0,E.jsx)(j.Z57,{className:"text-lg coz-fg-secondary"}),color:"secondary",onClick:()=>{if(x(),n){n(),null==t||t();return}var e,{normalizeSelectionNodeList:o}=s.getState();c(o),d(!0);var r=h();null==i||i({botId:null!==(e=null==r?void 0:r.sender_id)&&void 0!==e?e:"",source:null==r?void 0:r.source}),null==t||t()},size:"small",wrapperClass:"flex justify-center items-center"})}):null},L=n("871482"),Q=n("407821"),D=n.n(Q),P=n("472772"),U=n.n(P),Z=n("395245"),G=n.n(Z),O=n("297998"),H=n.n(O),R=n("646576"),F=n.n(R),q=n("606121"),V=n.n(q),X=n("386575"),K={};K.styleTagTransform=V(),K.setAttributes=H(),K.insert=G().bind(null,"head"),K.domAPI=U(),K.insertStyleElement=F(),D()(X.Z,K);var J=X.Z&&X.Z.locals?X.Z.locals:void 0,W=(0,a.forwardRef)((e,t)=>{var n=(0,f.FL)(f.p7.MessageGrab),{useGetScrollView:o}=n.chatAreaPluginContext.readonlyHook.scrollView,{on:r,off:i}=n.pluginBizContext.eventCenter,{style:s,children:l,onScroll:c,onMouseEnter:d,onMouseLeave:u,className:g}=e,p=o(),m=(0,a.useRef)(null),[x,w]=(0,a.useState)(1);(0,a.useImperativeHandle)(t,()=>({getRef:()=>m,refreshOpacity:_}));var _=(0,L.$0)(()=>{null==c||c();var e,t=null===(e=m.current)||void 0===e?void 0:e.getBoundingClientRect(),{rect:n}=p().getOriginScrollInfo();if(!!n&&!!t)if(t.y-100<=n.top){var o=(t.y-n.top)/100;w(o<0?0:o)}else if(t.y+100>=n.bottom){var r=(n.bottom-t.y)/100;w(r<0?0:r)}else w(1)});return(0,a.useEffect)(()=>(r(b.OnMessageUpdate,_),()=>{i(b.OnMessageUpdate,_)}),[]),(0,E.jsx)("div",{className:k()("fixed p-[2px] coz-bg-max coz-stroke-primary border-[0.5px] rounded-[8px] overflow-hidden grid grid-flow-col gap-[2px] h-[28px]",J["container-box-shadow"],g),style:(0,v._)((0,h._)({},s),{opacity:x}),ref:m,onMouseEnter:d,onMouseLeave:u,children:l})}),Y=[f.mZ.Notice],$=e=>{var t,{contentRef:n}=e,o=(0,f.FL)(f.p7.MessageGrab),{pluginBizContext:r}=o,{eventCenter:s,storeSet:l}=r,{usePreferenceStore:c,useSelectionStore:d}=l,{on:u,off:g}=s,p=(0,a.useRef)(null),{isFloatMenuVisible:m,position:x,updateFloatMenuPosition:h}=d((0,N.N)(e=>({isFloatMenuVisible:e.isFloatMenuVisible,position:e.floatMenuPosition,updateFloatMenuPosition:e.updateFloatMenuPosition}))),v=c(e=>e.enableGrab),{clearSelection:w,isScrolling:_,computePosition:A}=(0,i.GC)({contentRef:n,floatMenuRef:null===(t=p.current)||void 0===t?void 0:t.getRef(),onSelectChange:e=>{var t,n,r,i,{updateHumanizedContentText:a,updateNormalizeSelectionNodeList:s,updateOriginContentText:l,updateSelectionData:c,updateIsFloatMenuVisible:d}=o.pluginBizContext.storeSet.useSelectionStore.getState();if(e&&Y.includes(e.messageSource))return;c(e),d(!!e);var u=null==e?void 0:e.ancestorAttributeValue,g=u===S.K8;if(!!u){var{is_finish:p}=null!==(t=o.chatAreaPluginContext.readonlyAPI.message.findMessage(u))&&void 0!==t?t:{};if(!p&&!g){d(!1);return}a(null!==(n=null==e?void 0:e.humanizedContentText)&&void 0!==n?n:""),s(null!==(r=null==e?void 0:e.normalizeSelectionNodeList)&&void 0!==r?r:[]),l(null!==(i=null==e?void 0:e.originContentText)&&void 0!==i?i:"")}},onPositionChange:e=>{h(e),(0,C.Z)(()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.refreshOpacity()})}}),y=!!x&&m;return((0,a.useEffect)(()=>(u(b.OnMessageUpdate,A),u(b.OnViewScroll,A),()=>{g(b.OnMessageUpdate,A),g(b.OnViewScroll,A)}),[]),v)?(0,E.jsx)(W,{ref:p,style:{top:null==x?void 0:x.y,left:null==x?void 0:x.x},className:k()({hidden:!y||_}),children:(0,E.jsx)(T,{onClose:w})}):null},ee=e=>{var t,n=(0,a.useRef)(null),o=(0,a.useRef)(null),r=(null==e?void 0:null===(t=e.containerRef)||void 0===t?void 0:t.current)?e.containerRef:n,[s,l]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{var e,t=(0,i.Ry)(r.current,i.lp),n=null==t?void 0:null===(e=t.attributes.getNamedItem(i.y8))||void 0===e?void 0:e.value;return Y.includes(Number(n))&&l(!0),o.current=t,()=>{l(!1),o.current=null}},[r.current]),{targetRef:o,containerRef:r,forceHidden:s}},et=n("796659"),en=n("61910"),eo=n("412656"),er=(0,en.Z)(function(e,t,n){return(0,et.Z)(e,(0,eo.Z)(t)||0,n)}),ei=(e,t)=>{var n=e.at(0);for(var o of e)t.x>=o.left-5&&t.x<=o.right+5&&t.y>=o.top-5&&t.y<=o.bottom+5&&(n=o);return n},ea=e=>{var{plugin:t}=e,n=(0,a.useRef)(null),[o,r]=(0,a.useState)(!1),s=(0,a.useRef)(null),l=(0,a.useRef)(null),[c,d]=(0,a.useState)(!1),u=(0,a.useRef)(null),{pluginBizContext:g}=t,{eventCenter:p}=g,{on:m,off:x}=p,f=(0,a.useRef)(!1),[h,v]=(0,a.useState)(null),w=(0,a.useRef)(null),_=(0,a.useRef)({x:0,y:0}),A=(0,L.$0)(()=>{f.current=!0,w.current&&clearTimeout(w.current)}),y=(0,L.$0)(()=>{f.current=!1,M()}),E=()=>{var e,n,o=(0,i.Ry)(s.current,i.lp),r=null==o?void 0:null===(e=o.attributes.getNamedItem(i.lp))||void 0===e?void 0:e.value;if(r===S.K8)return!0;if(!r)return!1;var{is_finish:a}=null!==(n=t.chatAreaPluginContext.readonlyAPI.message.findMessage(r))&&void 0!==n?n:{};return a},N=(0,L.$0)(e=>{var t;if(w.current&&(clearTimeout(w.current),w.current=null),s.current=e.element,l.current={source:e.link,type:e.type,text:null!==(t=e.element.textContent)&&void 0!==t?t:""},!!E())r(!0),k(),(0,C.Z)(()=>{var e;null===(e=n.current)||void 0===e||e.refreshOpacity()})}),M=(0,L.$0)(()=>{w.current=er(()=>{if(!f.current)s.current=null,r(!1)},100)}),k=(0,L.$0)(()=>{var e=null===(c=n.current)||void 0===c?void 0:c.getRef();if(!!s.current&&!!e&&!!e.current&&!!l.current){var t=s.current,o=t.getBoundingClientRect(),r=e.current.getBoundingClientRect(),i=0,a=0;if("image"===l.current.type)i=o.right,a=o.bottom-o.height/2-r.height/2;else{var c,d,u=null!==(d=ei(Array.from(t.getClientRects()),_.current))&&void 0!==d?d:o;i=_.current.x,a=u.bottom}v({x:i,y:a})}}),I=(0,L.$0)(e=>{var[t,n]=[e.clientX,e.clientY];_.current={x:t,y:n}}),j=(0,L.$0)(()=>{u.current&&clearTimeout(u.current),d(!0),u.current=setTimeout(()=>{k(),d(!1)},100)});return(0,a.useEffect)(()=>(m(b.OnLinkElementMouseEnter,N),m(b.OnLinkElementMouseLeave,M),m(b.OnViewScroll,j),m(b.OnMessageUpdate,j),window.addEventListener("mousemove",I),window.addEventListener("resize",j),window.addEventListener("wheel",j),window.addEventListener("scroll",j),()=>{x(b.OnLinkElementMouseEnter,N),x(b.OnLinkElementMouseLeave,M),x(b.OnViewScroll,j),x(b.OnMessageUpdate,j),window.removeEventListener("mousemove",I),window.removeEventListener("resize",j),window.removeEventListener("wheel",j),window.removeEventListener("scroll",j)}),[]),{handleMenuMouseEnter:A,handleMenuMouseLeave:y,targetElement:s,targetInfo:l,position:h,floatMenuRef:n,visible:o,setVisible:r,computePosition:j,isScrolling:c}},es=e=>{var{position:t,messageRef:n,floatMenuRef:o}=e,[r,i]=(0,a.useState)(0);return(0,a.useEffect)(()=>{var e,t;i(null!==(t=null===(e=n.current)||void 0===e?void 0:e.getBoundingClientRect().right)&&void 0!==t?t:0),(0,C.Z)(()=>{var e;return null===(e=o.current)||void 0===e?void 0:e.refreshOpacity()})},[t,n.current,o.current]),{maxPositionX:r}},el=()=>{var e,t=(0,f.FL)(f.p7.MessageGrab),{chatAreaPluginContext:n,pluginBizContext:o}=t,{eventCenter:r}=o,{usePreferenceStore:s}=o.storeSet,l=s(e=>e.enableGrab),{on:c,off:d}=r,{useQuoteStore:u}=o.storeSet,{updateQuoteContent:g,updateQuoteVisible:p}=u((0,N.N)(e=>({updateQuoteVisible:e.updateQuoteVisible,updateQuoteContent:e.updateQuoteContent}))),{handleMenuMouseEnter:m,handleMenuMouseLeave:x,targetElement:h,targetInfo:v,position:w,floatMenuRef:_,visible:A,setVisible:y,computePosition:M,isScrolling:S}=ea({plugin:t}),{targetRef:I,forceHidden:j}=ee({containerRef:h}),{maxPositionX:z}=es({messageRef:I,position:w,floatMenuRef:_}),L=t.pluginBizContext.storeSet.useSelectionStore(e=>e.isFloatMenuVisible&&!!e.floatMenuPosition);if((0,a.useEffect)(()=>(c(b.OnMessageUpdate,M),c(b.OnViewScroll,M),()=>{d(b.OnMessageUpdate,M),d(b.OnViewScroll,M)}),[]),!l||(0,i.b1)())return null;var Q=null==w?void 0:w.y,D=(null!==(e=null==w?void 0:w.x)&&void 0!==e?e:0)>(null!=z?z:0)?z:null==w?void 0:w.x;return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(W,{ref:_,className:k()({hidden:!A||j||L||S}),style:{top:Q,left:D},onMouseEnter:m,onMouseLeave:x,children:(0,E.jsx)(T,{onClick:()=>{var e,t,r,a,s,{source:l="",type:c="link",text:d=""}=null!==(a=v.current)&&void 0!==a?a:{},u=I.current,m=null==u?void 0:null===(e=u.attributes.getNamedItem(i.lp))||void 0===e?void 0:e.value;if(!!m){var x=B({messageId:m,chatAreaPluginContext:n});g(["image"===c?{type:i.y1.IMAGE,src:l,children:[{text:l}]}:{type:i.y1.LINK,url:l,children:[{text:d}]}]),p(!0),null===(t=(r=o.eventCallbacks).onQuote)||void 0===t||t.call(r,{botId:null!==(s=null==x?void 0:x.sender_id)&&void 0!==s?s:"",source:null==x?void 0:x.source})}},onClose:()=>{(0,C.Z)(()=>y(!1))}})})})},ec=e=>(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)($,(0,h._)({},e)),(0,E.jsx)(el,(0,h._)({},e))]}),ed=(0,n("316828").j)([],{variants:{showBackground:{true:["text-[#FFFFFF/60]"],false:["coz-fg-secondary"]}}}),eu=n("115806"),eg={};eg.styleTagTransform=V(),eg.setAttributes=H(),eg.insert=G().bind(null,"head"),eg.domAPI=U(),eg.insertStyleElement=F(),D()(eu.Z,eg);var ep=eu.Z&&eu.Z.locals?eu.Z.locals:void 0,em=e=>{var{nodeList:t,theme:n,handleClickImage:o,showBackground:r}=e;return t.map((e,t)=>(0,i.mC)(e)?(0,E.jsx)("span",{className:k()("text-[14px] align-middle","leading-[16px]",{"coz-fg-secondary":"black"===n,[ed({showBackground:r})]:"white"===n}),children:e.text},t):(0,i.KC)(e)?(0,E.jsx)(z.Ee,{className:k()(ep.image,"w-[24px] h-[24px] leading-[24px] align-middle rounded-[4px] cursor-zoom-in",{"mx-[4px]":0!==t,"mr-[4px]":0===t}),src:e.src,onClick:()=>o(e.src),fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAAB4CAYAAADMtn8nAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAO7SURBVHgB7dy9bhRXGMfhc8ZeQmEku4hkOt8BXEAg0IUqqVBK0wfwHaDcARbpSU+KFBGk4ysXQK4gLunWEoSv9e5kjiVHFkmFEfg/fh5ptbOz0/70ntmZnVreM30xuzS8fdvV/lKt/Wrpy2qtZbUAn1Tfl91Sh1dfd+Z9fVb2lrfX1urO4WPqwcZ0OsQ62bt1qltsLXXDF7UAx8jefHgt6u3FbPLjEPJu27ef6X68y7OHpyf9+U64cGwt+lLezNo0nlxuEXdtZzdMXvHC8dcaba2WyexW+1yn09cbp77o/lpeKkCItpx+9ba73C26pS3xQpalodnl5f67brJUzhUgSjvbHa4Ufd31pd8oQJx2ebcbToo3CpCnr6tdASK1G60EDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMEEDMGWC5EePPi93LnzU3n58mU5ivX19XLt2ma5cuWbQp764u+3/SkZx7l69fvy/Pnz8jGsrKyU+/d/K2R5t2cCxzqI98mTR+UoLl68dOQpzufjHBiCmcAj0SbpgaNOZXKYwBBMwBDMEnokLJtPJhP4hGm/Xt+8uVUYBxP4BGnx3rix9dGuH/P5mcAnhHjHScAjdO/eL+Xu3Z///Sze8bKEHpkW7uF42z3O4h0vAY/I+/G27TaN3So5XpbQI/F+vAfEO24CHoGnT//433gZP0voEbhw4Ss3cpxQJjAEM4FDtT/ht/Pbw/9C+lBnz64XMpnAoa5f/+GjhHfmzErZ3NwsZPJIHQjVHqljAkMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUMwAUOwru/LbgEidX0RMCQa2t0ZAq4ChkR93enm8/K4AHHmffmzWyzqr3vzAgTZb3Zvcrv7cm3y6M2sbi/6AgRorb6b1+21tbpT247ptF8ty7OHpyf9+a4W4Jhq8Q4D99kwfS8PAe/uXwduG23Hm7d123IajqfW5quh0YN4277/zNvp9PXGolvamiyVc6X2G8MBGwX45Pp+qK/2O8P77hDv4/Z7VTvlPXzMP0hBAZYIUs8OAAAAAElFTkSuQmCC",preview:!1},t):(0,i.__)(e)?(0,E.jsxs)("span",{className:k()("text-[14px] align-middle","leading-[16px]",{"coz-fg-secondary":"black"===n,[ed({showBackground:r})]:"white"===n}),children:["[",em({nodeList:e.children,theme:n,handleClickImage:o,showBackground:r}),"]"]},t):null)},ex=e=>{var{nodeList:t,theme:n}=e,[o,r]=(0,a.useState)(""),i=(0,f.rz)();return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(z.eT,{src:o,visible:!!o,onVisibleChange:()=>r("")}),em({nodeList:t,theme:n,handleClickImage:e=>{r(e)},showBackground:i})]})},ef=e=>{if(e.content_type===f.zc.Mix){var{refer_items:t}=null!==(n=JSON.parse(e.content))&&void 0!==n?n:{};if(t){var n,o,r,i,a=null==t?void 0:t[0];if((null==a?void 0:a.type)==="text")return{type:f.zc.Text,text:null==a?void 0:a.text};if((null==a?void 0:a.type)==="image")return{type:f.zc.Image,uri:null==a?void 0:null===(o=a.image)||void 0===o?void 0:o.key,url:null==a?void 0:null===(i=a.image)||void 0===i?void 0:null===(r=i.image_thumb)||void 0===r?void 0:r.url}}}},eh=e=>{var{children:t}=e,n=(0,f.rz)();return(0,E.jsxs)("div",{className:k()(["h-auto","py-4px"],"flex flex-row items-center select-none w-m-0"),children:[(0,E.jsx)(j.Z57,{className:k()(ed({showBackground:n}),"mr-[8px] shrink-0 w-[12px] h-[12px]")}),(0,E.jsx)("div",{className:k()("flex-1 min-w-0 truncate text-[12px]",["leading-[16px]",ed({showBackground:n})]),children:t})]})},ev=e=>{var{message:t}=e,n=ef(t);if(!n)return null;if(n.type===f.zc.Image)return(0,E.jsx)(eh,{children:(0,E.jsx)("img",{className:"w-[24px] h-[24px] rounded-[4px]",src:n.url})});var o=(0,i.hl)(n.text);return(0,E.jsx)(eh,{children:(0,E.jsx)(ex,{nodeList:o,theme:"white"})})},eb=e=>{var{message:t}=e,n=t.extra_info.local_message_id,{useQuoteStore:o}=(0,f.FL)(f.p7.MessageGrab).pluginBizContext.storeSet,r=o((0,N.N)(e=>e.quoteContentMap[n]));return r?(0,E.jsx)(eh,{children:(0,E.jsx)(ex,{nodeList:r,theme:"white"})}):null},ew=e=>{var{message:t}=e,n=t.extra_info.local_message_id,{useQuoteStore:o}=(0,f.FL)(f.p7.MessageGrab).pluginBizContext.storeSet;return o((0,N.N)(e=>!!e.quoteContentMap[n]))?(0,E.jsx)(eb,{message:t}):(0,E.jsx)(ev,{message:t})},e_=()=>{var{pluginBizContext:e,chatAreaPluginContext:t}=(0,f.FL)(f.p7.MessageGrab),{useChatInputLayout:n}=t.readonlyHook.input,{useQuoteStore:o}=e.storeSet,{quoteVisible:r,quoteContent:i,updateQuoteVisible:s,updateQuoteContent:l}=o((0,N.N)(e=>({quoteVisible:e.quoteVisible,quoteContent:e.quoteContent,updateQuoteVisible:e.updateQuoteVisible,updateQuoteContent:e.updateQuoteContent}))),{layoutContainerRef:c}=n();return((0,a.useEffect)(()=>{if(!!(null==c?void 0:c.current)){var e=e=>e.stopPropagation();return c.current.addEventListener("pointerup",e),()=>{var t;null===(t=c.current)||void 0===t||t.removeEventListener("pointerup",e)}}},[null==c?void 0:c.current]),i&&r)?(0,E.jsxs)("div",{className:"w-full h-[32px] flex items-center px-[16px] coz-mg-primary",children:[(0,E.jsx)(j.Z57,{className:"coz-fg-secondary mr-[8px] w-[12px] h-[12px]"}),(0,E.jsxs)("div",{className:"flex flex-row items-center flex-1",children:[(0,E.jsx)("div",{className:"coz-fg-secondary flex-1 min-w-0 w-0 truncate text-[12px] leading-[16px]",children:(0,E.jsx)(ex,{nodeList:i,theme:"black"})}),(0,E.jsx)(z.hU,{icon:(0,E.jsx)(j.rmE,{className:"w-[14px] h-[14px]"}),onClick:()=>{l(null),s(!1)},color:"secondary",size:"small",className:"!rounded-[4px]",wrapperClass:"flex item-center justify-center"})]})]}):null};class eA extends f.x1{constructor(...e){super(...e),this.pluginMode=f.tf.Writeable,this.pluginName=f.p7.MessageGrab,this.customComponents=(0,f.S3)({MessageListFloatSlot:ec,TextMessageInnerTopSlot:ew,InputAddonTop:e_}),this.lifeCycleServices={appLifeCycleService:new y(this),messageLifeCycleService:new _(this),commandLifeCycleService:new A(this)},this.publicMethods={updateEnableGrab:e=>{if(!!this.pluginBizContext){var{updateEnableGrab:t}=this.pluginBizContext.storeSet.usePreferenceStore.getState();t(e)}}}}}var ey=(0,l.Z)(),eE=e=>{var{preference:t,onQuote:n,onQuoteChange:o,scene:r}=e,i=(0,s.x0)();return{grabPlugin:{createPluginBizContext:()=>{var e={onQuote:n,onQuoteChange:o},a={useSelectionStore:u("plugin"),useQuoteStore:p("plugin"),usePreferenceStore:x("plugin")},s=(0,l.Z)();a.usePreferenceStore.getState().updateEnableGrab(t.enableGrab);var c=m({useQuoteStore:a.useQuoteStore},e);return{grabPluginId:i,storeSet:a,eventCallbacks:e,unsubscribe:()=>{c()},eventCenter:s,publicEventCenter:ey,scene:r}},Plugin:eA},grabPluginId:i}},eN=e=>{var{onQuote:t,scene:n="other"}=null!=e?e:{},[o,r]=(0,a.useState)(!0),{grabPlugin:i,grabPluginId:s}=(0,a.useMemo)(()=>eE({preference:{enableGrab:!0},onQuote:t,onQuoteChange:e=>{var{isEmpty:t}=e;r(t)},scene:n}),[]);return{grabEnableUpload:o,GrabPlugin:i,grabPluginId:s}}},392060:function(e,t,n){n.d(t,{GC:()=>F,jU:()=>I,b1:()=>l,y1:()=>M,hl:()=>Y,KC:()=>S,y8:()=>d,mC:()=>C,Ry:()=>O,lp:()=>c,__:()=>k});var o,r,i=n("455069"),a=n("747514"),s=n("871482");function l(){return"ontouchend"in document}var c="data-grab-mark",d="data-grab-source",u=e=>{for(var t=[],n=document.createTreeWalker(e.commonAncestorContainer,NodeFilter.SHOW_ALL,{acceptNode:t=>e.intersectsNode(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}),o=n.currentNode;o;)t.push(o),o=n.nextNode();return t},g=(e,t)=>{for(var n=t.toUpperCase();e;){if(e.nodeType===Node.ELEMENT_NODE&&e.tagName===n)return e;e=e.parentNode}return null},p=(e,t)=>{for(;e&&e!==document;){var n,o=null;if(e instanceof Element&&(o=null===(n=e.attributes.getNamedItem(t))||void 0===n?void 0:n.value),e.nodeType===Node.ELEMENT_NODE&&o)return o;e=e.parentNode}return null},m=e=>{var t=u(e),n=0,o=!1;for(var r of t){var i=p(r,c);!o&&(o=!!g(r,"A")),i&&n++}var{endOffset:a}=e;return n!==t.length||o||0===a},x=e=>{for(var{node:t,scopeAncestorAttributeName:n,targetAttributeValue:o}=e,r=null;t;)n&&p(t,n)===o&&(r=t),t=t.nextSibling;return r},f=e=>{for(;e.lastChild;)e=e.lastChild;return e},h=(e,t)=>{var n=e.compareDocumentPosition(t);if(n&Node.DOCUMENT_POSITION_CONTAINED_BY)return"contains";if(n&Node.DOCUMENT_POSITION_CONTAINS)return"containedBy";if(n&Node.DOCUMENT_POSITION_FOLLOWING)return"before";else if(n&Node.DOCUMENT_POSITION_PRECEDING)return"after";return"none"},v=e=>{for(var{range:t,targetAttributeName:n,targetAttributeValue:o}=e,r=t.startContainer,{startOffset:i}=t;r&&p(r,n)!==o;)if(r.previousSibling)r=r.previousSibling,i=0;else if(r.parentNode&&r.parentNode!==document)r=r.parentNode,i=0;else{r=null;break}return{startNode:r,startOffset:i}},b=e=>{for(;e;){if(e.nodeType===Node.ELEMENT_NODE&&"A"===e.nodeName)return e;e=e.parentNode}return null},w=(e,t,n)=>{var o=b(t),r=b(n),i=!1;return o&&(e.setStartBefore(o),i=!0),r&&(e.setEndAfter(r),i=!0),i},_=e=>{for(var t,n,{range:o,targetAttributeName:r,targetAttributeValue:i}=e,a=o.endContainer,{endOffset:s}=o;a&&p(a,r)!==i;)if(a.nextSibling)a=a.nextSibling,s=0;else if(a.parentNode&&a.parentNode!==document)s=(a=a.parentNode)&&null!==(n=null===(t=f(a).textContent)||void 0===t?void 0:t.length)&&void 0!==n?n:0;else{a=null;break}return{endNode:a,endOffset:s}},A=e=>{for(var t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ALL,{acceptNode:t=>e.contains(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}),o=n.currentNode;o;)t.push(o),o=n.nextNode();return t},y=e=>{if(!e||e===document)return null;for(var t,n=null!==(t=e.previousSibling)&&void 0!==t?t:e.parentNode;n&&n!==document;){;if(!["containedBy","contains"].includes(h(n,e)))return n;n=n.previousSibling?n.previousSibling:n.parentNode}return null},E=e=>{var{range:t,startNode:n,endNode:o,endOffset:r}=e;if(n===o||0!==r)return!1;for(var i=y(o);i;){if(i.nodeType===Node.TEXT_NODE){;if((null===(a=i.textContent)||void 0===a?void 0:a.trim())&&(null===(s=i.textContent)||void 0===s?void 0:s.length))return t.setEnd(i,i.textContent.length),!0}else if(i.nodeType===Node.ELEMENT_NODE&&(null===(l=i.textContent)||void 0===l?void 0:l.trim())){var a,s,l,c,d=null;for(var u of A(i))u.nodeType===Node.TEXT_NODE&&(null===(c=u.textContent)||void 0===c?void 0:c.trim())&&(d=u);if(d&&d.textContent)return t.setEnd(d,d.textContent.length),!0}i=y(i)}return!1},N=e=>{var{range:t}=e,n=p(t.startContainer,c);if(!n)return!1;var{startNode:o,startOffset:r}=v({range:t,targetAttributeName:c,targetAttributeValue:n}),{endNode:i,endOffset:a}=_({range:t,targetAttributeName:c,targetAttributeValue:n});if(o&&!i){var s,l,{parentNode:d}=o,u=null,m=g(d,"LI"),b=m?g(m,"A"):g(d,"A"),A=g(d,"DIV");u=b?x({node:b,scopeAncestorAttributeName:c,targetAttributeValue:n}):m?x({node:m,scopeAncestorAttributeName:c,targetAttributeValue:n}):A?x({node:A,scopeAncestorAttributeName:c,targetAttributeValue:n}):x({node:o,scopeAncestorAttributeName:c,targetAttributeValue:n}),o===u&&(u=x({node:d,scopeAncestorAttributeName:c,targetAttributeValue:n})),u&&(a=(i=u).nodeType===Node.TEXT_NODE?i.length:null!==(l=null===(s=f(i).textContent)||void 0===s?void 0:s.length)&&void 0!==l?l:0)}if(o&&i){var y=h(o,i),N=!1;["before","none"].includes(y)&&(t.setStart(o,r),t.setEnd(i,a),N=!0);var C=w(t,o,i),M=E({range:t,startNode:o,endNode:i,endOffset:a});return N||C||M}return t.collapse(!1),!1},C=e=>e&&"text"in e;var M=((o={}).IMAGE="image",o.LINK="link",o),k=e=>e&&"url"in e&&"type"in e&&e.type===M.LINK,S=e=>e&&"src"in e&&"type"in e&&e.type===M.IMAGE,I=e=>{var t="";for(var n of e)C(n)?t+=n.text:k(n)?t+="[".concat(I(n.children),"](").concat(n.url,")"):S(n)?t+="![".concat(I(n.children),"](").concat(n.src,")"):t+=I(n.children);return t},j=e=>{if("src"in e&&"string"==typeof e.src)return e.src},z=e=>Array.from(e).filter(e=>j(e)).at(0),B=e=>{if("PICTURE"===e.nodeName.toUpperCase()){var t=z(e.childNodes);if(t)return t}if("A"===e.nodeName.toUpperCase()||["TH","TD"].includes(e.nodeName.toUpperCase()))return e},T=e=>{var t=[];if(!e.length)return t;for(var n of e){var o=B(n);if(o){var r=L(o);r&&t.push(r);continue}var i=L(n);i&&t.push(i);var a=T(n.childNodes);t.push(...a)}return t},L=e=>{if(!e)return null;var t=["TH","TD"].includes(e.nodeName.toUpperCase());return e.nodeType===e.TEXT_NODE||t?Q(e,t):e.nodeType===e.ELEMENT_NODE&&e instanceof Element?D(e):void 0},Q=(e,t)=>{if(!!e){var n,o=null!==(n=e.textContent)&&void 0!==n?n:"";return{text:t?" ".concat(o," "):o}}},D=e=>{if(!!e){if(["IMG","SOURCE"].includes(e.tagName.toUpperCase())){var t=Q(e);return{type:M.IMAGE,src:"src"in e&&"string"==typeof e.src?e.src:"",children:t?[t]:[]}}if("A"===e.tagName.toUpperCase()){var n=Q(e);return{type:M.LINK,url:"href"in e&&"string"==typeof e.href?e.href:"",children:n?[n]:[]}}}},P=e=>{var t="";for(var n of e)C(n)?t+=n.text:k(n)?t+="[".concat(P(n.children),"]"):S(n)?t+="![".concat(P(n.children),"]"):t+=P(n.children);return t},U=e=>{var t=e.cloneContents(),n=[];return!function e(t){t.nodeType===Node.TEXT_NODE?n.push(t):t.childNodes.forEach(e)}(t),n.some(e=>/\S/.test(e.textContent||""))};var Z=((r={}).Forward="forward",r.Backward="backward",r.Unknown="unknown",r),G=e=>{if(!e||e.isCollapsed)return Z.Unknown;var{anchorNode:t}=e,{focusNode:n}=e;if(!t||!n)return Z.Unknown;var{anchorOffset:o}=e,{focusOffset:r}=e;if(t===n)return o<=r?Z.Forward:Z.Backward;var i=h(t,n);if("before"===i)return Z.Forward;if("after"===i)return Z.Backward;return Z.Unknown},O=(e,t)=>{for(;e&&e!==document;){var n,o=null;if(e instanceof Element&&(o=null===(n=e.attributes.getNamedItem(t))||void 0===n?void 0:n.value))return e;e=e.parentNode}return null},H=e=>{var t,n,o,{selection:r,hasFix:i}=e;if(!r.rangeCount)return;var a=r.getRangeAt(0);if(!a)return;var s=a.cloneContents(),l=G(r),u=O(a.commonAncestorContainer.parentNode,c),g=null!==(o=null==u?void 0:null===(t=u.attributes.getNamedItem(c))||void 0===t?void 0:t.value)&&void 0!==o?o:null,p=null==u?void 0:null===(n=u.attributes.getNamedItem(d))||void 0===n?void 0:n.value;if(!i&&m(a)){if(!N({range:a}))return;return H({selection:r,hasFix:!0})}if(!U(a))return;var x=T(s.childNodes);if(!!x.length){var f=P(x);return{humanizedContentText:f,originContentText:I(x),normalizeSelectionNodeList:x,nodesAncestorIsMessageBox:!!g,ancestorAttributeValue:g,messageSource:Number(p),direction:l}}},R=e=>{var{selection:t}=e;if(!t.rangeCount)return;var n=t.getRangeAt(0);if(!!n)return{rangeRects:n.getClientRects()}},F=e=>{var{contentRef:t,floatMenuRef:n,onSelectChange:o,onPositionChange:r}=e,c=(0,i.useRef)(),d=(0,i.useRef)(null),u=(0,i.useRef)(null),[g,p]=(0,i.useState)(!1),m=(0,i.useRef)(null),x=(0,i.useRef)(!1),f=()=>{var e;o(null),r(null),null===(e=d.current)||void 0===e||e.removeAllRanges(),d.current=null,p(!1),x.current=!1,m.current&&clearTimeout(m.current)},h=()=>{var e,t=window.getSelection(),{direction:n=Z.Unknown}=null!==(e=u.current)&&void 0!==e?e:{};if(!t){o(null);return}var i=R({selection:t});if(!i){r(null);return}var a=Array.from(i.rangeRects).at(n===Z.Backward?0:-1);if(!a){r(null);return}var[s,l]=[0,0];n===Z.Backward?(s=a.left,l=a.top+a.height):(s=a.x+a.width,l=a.y+a.height),r({x:s>screen.width-40?s-40:s,y:l>screen.height-40?l-40:a.y+a.height})},v=(0,s.$0)(()=>{m.current&&clearTimeout(m.current),p(!0),m.current=setTimeout(()=>{h(),p(!1)},100)}),b=()=>{if(!t.current){o(null);return}var e=window.getSelection();if(!e){o(null);return}d.current=e;var n=H({selection:e});if(!n||!n.nodesAncestorIsMessageBox){o(null);return}u.current=n,x.current=!!n,h(),o(n)},w=(0,s.$0)(()=>{clearTimeout(c.current),c.current=(0,a.Z)(b)}),_=(0,s.$0)(e=>{u.current&&((e.ctrlKey||e.metaKey)&&"a"===e.key&&o(null),["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(e.key)&&b())}),A=(0,s.$0)(e=>{if(!t.current||!n||!(null==n?void 0:n.current))return;var{clientX:o,clientY:r}=e,i=n.current.getBoundingClientRect();if(!(r>=i.top)||!(r<=i.bottom)||!(o>=i.left)||!(o<=i.right))f()});return(0,i.useEffect)(()=>{if(!!x.current)return window.addEventListener("mousedown",A),()=>{window.removeEventListener("mousedown",A)}},[x.current]),(0,i.useEffect)(()=>{if(!!x.current)return window.addEventListener("resize",v),window.addEventListener("wheel",v),window.addEventListener("scroll",v),window.addEventListener("keydown",_),l()&&window.addEventListener("selectionchange",v),()=>{window.removeEventListener("resize",v),window.removeEventListener("wheel",v),window.removeEventListener("scroll",v),window.removeEventListener("keydown",_),window.removeEventListener("selectionchange",v)}},[x.current]),(0,i.useEffect)(()=>{var e=t.current;if(!!e)return e.addEventListener("pointerup",w),l()&&e.addEventListener("selectionchange",w),()=>{e.removeEventListener("pointerup",w),e.removeEventListener("selectionchange",w)}},[t.current]),{clearSelection:f,isScrolling:g,computePosition:v}},q=n("765377"),V=n("193893"),{isImage:X,isLink:K,isParent:J,isText:W}=q.zV,Y=e=>$((0,V.eL)(e)),$=e=>{var t=[],n=e=>{if(W(e))t.push({text:e.value});else if(K(e)){var o,r=e.children.map($).flat(1);t.push({type:M.LINK,url:e.url,children:r})}else X(e)?t.push({type:M.IMAGE,src:e.url,children:[{text:null!==(o=e.alt)&&void 0!==o?o:""}]}):J(e)&&e.children.forEach(n)};return n(e),t}},76313:function(e,t,n){n.d(t,{N:()=>s});var o=n("825955"),r=n("455069"),i=n("735114"),a=n("382534"),s=e=>{var{type:t,intelligenceId:n,spaceId:s,enable:l}=e,[c,d]=(0,r.useState)(!1),u=(0,i.Z)((0,o._)(function*(){var e,o;return null===(o=(yield a.sD.PublishIntelligenceList({space_id:s,intelligence_type:t,intelligence_ids:[n],size:1},{__disableErrorToast:!0})).data)||void 0===o?void 0:null===(e=o.intelligences)||void 0===e?void 0:e[0]}),{manual:!0,ready:l,pollingInterval:6e4,pollingErrorRetryCount:3,onSuccess:e=>{e&&u.cancel()},onFinally:()=>{d(!0)}});return(0,r.useEffect)(()=>(d(!1),u.run(),u.cancel),[t,n,s,l]),{inited:c,ready:!!u.data}}},728237:function(e,t,n){var o=n(125161),r=n.n(o),i=n(404442),a=n.n(i)()(r());a.push([e.id,".status-tag-Q8SaHM{color:var(--light-usage-text-color-text-2,rgba(29,28,35,.6));letter-spacing:.12px;align-items:center;font-size:12px;font-weight:400;line-height:16px;display:flex;position:relative}.status-tag-success-box-IiEBQs{border-radius:4px;align-items:center;padding:4px;display:flex}.status-tag-warning-box-dsEHao{cursor:pointer;border-radius:4px;align-items:center;padding:4px;display:flex}.status-tag-warning-box-dsEHao:hover{background-color:rgba(46,47,56,.05)}.status-tag-warning-box-icon-AAw8Kn{color:var(--semi-color-warning)}.status-tag-warning-box-icon-AAw8Kn svg{width:10px;height:10px}.status-tag-dot-IuhXiy{align-items:center;display:flex}.status-tag-dot-IuhXiy svg,.status-tag-dot-IuhXiy img{margin-right:4px}.saving-info-b4Hfii{color:var(--light-usage-text-color-text-3,rgba(29,28,35,.35));background:var(--Light-color-grey---grey-1,#f0f0f5);border-radius:4px;margin-left:8px;padding:0 6px;font-size:12px;font-weight:500;line-height:16px}.saving-info-b4Hfii .status-tag-spin-QIh8I_{align-items:center;display:flex}.warning-content-Dk2cT_{width:400px;padding:16px}.warning-content-Dk2cT_ .title-box-GK9DE_{align-items:center;margin-bottom:12px;display:flex}.warning-content-Dk2cT_ .title-box-GK9DE_ .title-hlhtge{margin-left:8px;font-size:18px;font-weight:600;line-height:24px}.warning-content-Dk2cT_ .main-B7DftR{margin:0 0 16px 28px;font-size:14px;font-weight:400;line-height:22px}.warning-content-Dk2cT_ .main-B7DftR .warning-list-QG1Opk{flex-direction:column;margin-bottom:8px;display:flex}.warning-content-Dk2cT_ .main-B7DftR .warning-list-QG1Opk span{color:rgba(29,28,35,.6)}.warning-content-Dk2cT_ .footer-gniSC3{justify-content:flex-end;display:flex}.warning-content-Dk2cT_ .footer-gniSC3 .cancel-btn-Teok0g{height:38px;margin-right:16px}.collaboration-tag-t8wOjp{color:var(--Light-usage-text---color-text-2,rgba(29,28,35,.6));background:var(--Light-color-grey---grey-1,#f0f0f5);border-radius:4px;align-items:center;padding:0 6px;font-size:12px;font-style:normal;line-height:16px;display:flex}.collaboration-tag-t8wOjp .semi-icon{margin-right:4px}.collaboration-tag-t8wOjp .icon-submitted-YhK83T{color:var(--semi-color-primary)}.collaboration-tag-t8wOjp .icon-published-dAMlQc{color:var(--semi-color-success)}.collaboration-tag-t8wOjp .icon-warning-jSBXPO{color:var(--semi-color-warning)}",""]),a.locals={"status-tag":"status-tag-Q8SaHM",statusTag:"status-tag-Q8SaHM","status-tag-success-box":"status-tag-success-box-IiEBQs",statusTagSuccessBox:"status-tag-success-box-IiEBQs","status-tag-warning-box":"status-tag-warning-box-dsEHao",statusTagWarningBox:"status-tag-warning-box-dsEHao","status-tag-warning-box-icon":"status-tag-warning-box-icon-AAw8Kn",statusTagWarningBoxIcon:"status-tag-warning-box-icon-AAw8Kn","status-tag-dot":"status-tag-dot-IuhXiy",statusTagDot:"status-tag-dot-IuhXiy","saving-info":"saving-info-b4Hfii",savingInfo:"saving-info-b4Hfii","status-tag-spin":"status-tag-spin-QIh8I_",statusTagSpin:"status-tag-spin-QIh8I_","warning-content":"warning-content-Dk2cT_",warningContent:"warning-content-Dk2cT_","title-box":"title-box-GK9DE_",titleBox:"title-box-GK9DE_",title:"title-hlhtge",main:"main-B7DftR","warning-list":"warning-list-QG1Opk",warningList:"warning-list-QG1Opk",footer:"footer-gniSC3","cancel-btn":"cancel-btn-Teok0g",cancelBtn:"cancel-btn-Teok0g","collaboration-tag":"collaboration-tag-t8wOjp",collaborationTag:"collaboration-tag-t8wOjp","icon-submitted":"icon-submitted-YhK83T",iconSubmitted:"icon-submitted-YhK83T","icon-published":"icon-published-dAMlQc",iconPublished:"icon-published-dAMlQc","icon-warning":"icon-warning-jSBXPO",iconWarning:"icon-warning-jSBXPO"},t.Z=a},62989:function(e,t,n){var o=n(125161),r=n.n(o),i=n(404442),a=n.n(i)()(r());a.push([e.id,".header-fqNHxr{z-index:999;background:var(--light-color-white);border-bottom:1px solid rgba(var(--coze-stroke-5),var(--coze-stroke-5-alpha));justify-content:space-between;align-items:center;height:56px;padding:8px 12px 8px 8px;display:flex}.header-fqNHxr .bot-avatar-ctn-EfTLJz{width:32px;height:32px;margin:0 12px;position:relative}.header-fqNHxr .bot-avatar-ctn-EfTLJz .bot-avatar-yJdzeJ{border-radius:8px;width:32px;height:32px}.header-fqNHxr .bot-info-KGsSex{flex-direction:column;display:flex}.header-fqNHxr .bot-info-KGsSex .bot-info-title-HXUsk1{max-width:calc(50vw - 237px);font-size:14px;font-weight:600;line-height:inherit;color:var(--light-color-black-black,#000);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.header-fqNHxr .bot-info-KGsSex .bot-info-item-gap-DXJlZT{margin-bottom:2px}.header-fqNHxr .bot-info-KGsSex .bot-info-item-mw5PKA{align-items:center;height:24px;line-height:24px;display:flex}.header-fqNHxr .bot-info-KGsSex .edit-btn-qb3fv6{color:#6b6d75;margin-left:2px}.header-fqNHxr .bot-info-KGsSex .edit-btn-qb3fv6 svg{width:14px;height:14px}.header-fqNHxr .bot-info-KGsSex .edit-btn-icon-VolRUI>svg{width:16px;height:16px}.header-fqNHxr .bot-info-KGsSex .edit-btn-icon-VolRUI>svg>path{fill:#6b6d75}.header-fqNHxr .team-info-RvDFfG{color:var(--Light-usage-text---color-text-2,rgba(29,28,35,.6));letter-spacing:.12px;align-items:center;margin-right:8px;font-size:12px;font-weight:400;line-height:16px;display:flex}.header-fqNHxr .team-avatar-xSo32A{width:12px;height:12px;margin-right:2px}.header-fqNHxr .team-avatar-xSo32A svg{width:12px;height:12px}.header-fqNHxr .bot-exit-btn-y99fzN .semi-button.semi-button-with-icon-only{width:32px;padding:4px}.header-fqNHxr .status-tag-Jyrddh{color:var(--Light-usage-text---color-text-2,rgba(29,28,35,.6));letter-spacing:.12px;align-items:center;font-size:12px;font-weight:400;line-height:16px;display:flex;position:relative}.header-fqNHxr .status-tag-success-box-i4l_mb{border-radius:4px;align-items:center;display:flex}.header-fqNHxr .status-tag-warning-box-oUYTKx{cursor:pointer;border-radius:4px;align-items:center;display:flex}.header-fqNHxr .status-tag-warning-box-oUYTKx:hover{background-color:rgba(46,47,56,.05)}.header-fqNHxr .status-tag-warning-box-icon-qEcXSp{color:var(--semi-color-warning)}.header-fqNHxr .status-tag-warning-box-icon-qEcXSp svg{width:10px;height:10px}.header-fqNHxr .bot-info-background-QcHYks{background:var(--Light-color-grey---grey-1,#f0f0f5);border-radius:4px;padding:0 6px}.header-fqNHxr .status-tag-dot-XJMNtc{align-items:center;display:flex}.header-fqNHxr .status-tag-dot-XJMNtc svg{margin-right:2px}.header-fqNHxr .edito-btn-vTjeP6{color:#6b6d75;margin-left:8px}.header-fqNHxr .status-tag-spin-qB2rga{align-items:center;display:flex}.header-fqNHxr .change-tip-UkeHKs{color:var(--light-usage-text-color-text-2,rgba(29,28,35,.6));margin-right:20px;font-size:12px;font-style:normal;font-weight:400;line-height:16px}.header-fqNHxr .change-tip-icon-yV3pYV>svg{width:13px;height:13px}.header-fqNHxr .change-tip-icon-yV3pYV>svg>path{fill:#ff9600}.header-fqNHxr .saving-info-QIWJel{color:var(--Light-usage-text---color-text-2,rgba(29,28,35,.6));margin-left:8px;font-size:12px;font-weight:400;line-height:16px}.header-fqNHxr button.icon-btn-iS8vq4{width:32px;min-width:32px;max-width:32px;height:32px;min-height:32px;max-height:32px;color:var(--light-usage-text-color-text-2,rgba(29,28,35,.6));border:1px solid var(--light-usage-border-color-border,rgba(29,28,35,.08));background-color:transparent;border-radius:8px;padding:8px}.warning-content-kpGQZy{width:400px;padding:16px}.warning-content-kpGQZy .title-box-FGzzpw{align-items:center;margin-bottom:12px;display:flex}.warning-content-kpGQZy .title-box-FGzzpw .title-w0fUk6{margin-left:8px;font-size:18px;font-weight:600;line-height:24px}.warning-content-kpGQZy .main-MqVibL{margin:0 0 16px 28px;font-size:14px;font-weight:400;line-height:22px}.warning-content-kpGQZy .main-MqVibL .warning-list-eFdv3W{flex-direction:column;margin-bottom:8px;display:flex}.warning-content-kpGQZy .main-MqVibL .warning-list-eFdv3W span{color:rgba(29,28,35,.6)}.warning-content-kpGQZy .footer-g2ARQx{justify-content:flex-end;display:flex}.warning-content-kpGQZy .footer-g2ARQx .cancel-btn-ggJjZC{height:38px;margin-right:16px}.bot-menu-nav-xmjgGm{position:absolute;left:50%;transform:translate(-50%)}.team-name-VrAecF{max-width:320px}",""]),a.locals={header:"header-fqNHxr","bot-avatar-ctn":"bot-avatar-ctn-EfTLJz",botAvatarCtn:"bot-avatar-ctn-EfTLJz","bot-avatar":"bot-avatar-yJdzeJ",botAvatar:"bot-avatar-yJdzeJ","bot-info":"bot-info-KGsSex",botInfo:"bot-info-KGsSex","bot-info-title":"bot-info-title-HXUsk1",botInfoTitle:"bot-info-title-HXUsk1","bot-info-item-gap":"bot-info-item-gap-DXJlZT",botInfoItemGap:"bot-info-item-gap-DXJlZT","bot-info-item":"bot-info-item-mw5PKA",botInfoItem:"bot-info-item-mw5PKA","edit-btn":"edit-btn-qb3fv6",editBtn:"edit-btn-qb3fv6","edit-btn-icon":"edit-btn-icon-VolRUI",editBtnIcon:"edit-btn-icon-VolRUI","team-info":"team-info-RvDFfG",teamInfo:"team-info-RvDFfG","team-avatar":"team-avatar-xSo32A",teamAvatar:"team-avatar-xSo32A","bot-exit-btn":"bot-exit-btn-y99fzN",botExitBtn:"bot-exit-btn-y99fzN","status-tag":"status-tag-Jyrddh",statusTag:"status-tag-Jyrddh","status-tag-success-box":"status-tag-success-box-i4l_mb",statusTagSuccessBox:"status-tag-success-box-i4l_mb","status-tag-warning-box":"status-tag-warning-box-oUYTKx",statusTagWarningBox:"status-tag-warning-box-oUYTKx","status-tag-warning-box-icon":"status-tag-warning-box-icon-qEcXSp",statusTagWarningBoxIcon:"status-tag-warning-box-icon-qEcXSp","bot-info-background":"bot-info-background-QcHYks",botInfoBackground:"bot-info-background-QcHYks","status-tag-dot":"status-tag-dot-XJMNtc",statusTagDot:"status-tag-dot-XJMNtc","edito-btn":"edito-btn-vTjeP6",editoBtn:"edito-btn-vTjeP6","status-tag-spin":"status-tag-spin-qB2rga",statusTagSpin:"status-tag-spin-qB2rga","change-tip":"change-tip-UkeHKs",changeTip:"change-tip-UkeHKs","change-tip-icon":"change-tip-icon-yV3pYV",changeTipIcon:"change-tip-icon-yV3pYV","saving-info":"saving-info-QIWJel",savingInfo:"saving-info-QIWJel","icon-btn":"icon-btn-iS8vq4",iconBtn:"icon-btn-iS8vq4","warning-content":"warning-content-kpGQZy",warningContent:"warning-content-kpGQZy","title-box":"title-box-FGzzpw",titleBox:"title-box-FGzzpw",title:"title-w0fUk6",main:"main-MqVibL","warning-list":"warning-list-eFdv3W",warningList:"warning-list-eFdv3W",footer:"footer-g2ARQx","cancel-btn":"cancel-btn-ggJjZC",cancelBtn:"cancel-btn-ggJjZC","bot-menu-nav":"bot-menu-nav-xmjgGm",botMenuNav:"bot-menu-nav-xmjgGm","team-name":"team-name-VrAecF",teamName:"team-name-VrAecF"},t.Z=a},789570:function(e,t,n){var o=n(125161),r=n.n(o),i=n(404442),a=n.n(i)()(r());a.push([e.id,"div.link-img-Z46Zt0{border-radius:unset;display:flex}div.link-img-Z46Zt0 img{border:1px solid var(--light-usage-fill-color-fill-1,rgba(46,46,56,.08));border-radius:4px;width:100%;height:100%}.open-in-tips-JXQADQ{color:var(--light-usage-text-color-text-2,rgba(29,28,35,.6));padding:0 8px;font-size:12px;font-weight:500;line-height:16px}",""]),a.locals={"link-img":"link-img-Z46Zt0",linkImg:"link-img-Z46Zt0","open-in-tips":"open-in-tips-JXQADQ",openInTips:"open-in-tips-JXQADQ"},t.Z=a},617293:function(e,t,n){var o=n(125161),r=n.n(o),i=n(404442),a=n.n(i)()(r());a.push([e.id,".wrapper-P0c82V{background-color:rgba(var(--coze-bg-1),var(--coze-bg-1-alpha));flex-direction:column;height:100%;display:flex;overflow:hidden}.layout-hotzone-q3lRf4{z-index:calc(var(--chat-z-index-header,50) + 1)}.text-gNz2wJ{font-size:12px;font-style:normal;font-weight:400;line-height:16px}.container-VD4ZJT{flex-direction:row;flex:1;width:100%;min-height:0;display:flex}.container-VD4ZJT.store-p2CEBx{height:100%}.spin-rDV5ZI{z-index:100;background-color:rgba(255,255,255,.5);width:100%;height:100%;position:absolute;top:0;left:0}.develop-area-pLWbP7{background-color:rgba(var(--coze-bg-2),var(--coze-bg-2-alpha));flex-direction:column;display:flex;overflow:hidden}.develop-area-scroll-FPIfk_{flex:1;overflow:auto}.setting-area-HhHNX9{border-left:1px solid rgba(28,29,35,.12);flex-direction:column;flex:1;display:flex;overflow:hidden}.setting-area-HhHNX9 .setting-title-block-W215sG{justify-content:flex-end;width:100%;margin:12px 0;display:flex}.setting-area-HhHNX9 .semi-collapse-item{border-bottom:none}.setting-area-HhHNX9 .semi-collapse-header{margin-left:0;margin-right:0}.setting-area-HhHNX9 .semi-collapse-content{padding-left:0;padding-right:0}.setting-area-HhHNX9 .semi-select{width:100%;min-width:80px}.setting-area-HhHNX9 .semi-collapsible-wrapper{padding-left:16px}.message-area-z_X4gq{background-color:rgba(var(--coze-bg-3),var(--coze-bg-3-alpha));flex-direction:column;justify-content:space-between;width:100%;min-width:404px;height:100%;transition:min-width .2s;display:flex;position:relative;overflow:hidden}.playground-neat-xqJerk .message-area-z_X4gq{min-width:258px}.title-w7QTwd{margin:8px 0 0 4px!important}.sheet-title-node-cover-yMCrad{flex:1;align-items:center;display:flex;overflow:hidden}.bj-cover-powtB8{background-color:rgba(var(--coze-bg-3),var(--coze-bg-3-alpha));box-shadow:0 2px 4px rgba(0,0,0,.04),0 0 1px rgba(0,0,0,.08)}.bj-img-cover-raS8HS{z-index:20;text-shadow:0 .5px 1px rgba(0,0,0,.25);background-color:transparent!important}.bj-single-cover-XVxLnC{flex:none;height:64px!important}.border-cover-eX9tLS{background-color:rgba(var(--coze-bg-3),var(--coze-bg-3-alpha));border-bottom:none!important}.spin-wrapper-IzLXPt.top-level-Az_JQK{width:100%;height:100%!important}.spin-wrapper-IzLXPt.top-level-Az_JQK .semi-spin-children{flex-direction:column;height:100%;display:flex;overflow:hidden}.sheet-view-new-header-mMtDRv{height:64px!important}.sheet-view-left-header-RV1IPt{padding:16px 16px 16px 28px!important}.icon-button-16-qNTthM{cursor:pointer}.icon-button-16-qNTthM:hover{border-radius:4px}.icon-button-16-qNTthM .semi-button.semi-button-size-small{height:16px;padding:1px!important}.tip-text-sGQwSX{color:var(--light-usage-text-color-text-2,rgba(28,29,35,.6));font-size:14px;font-style:normal;font-weight:400;line-height:22px}.sheet-view-hidden-W3DG_b{display:none}.left-sheet-config-hdxMoT{flex-direction:row;flex-shrink:0;align-items:center;display:flex}.wrapper-single-with-tool-area-hidden-kbX65k{grid-template-columns:26fr 14fr!important}.tool-card-GONXar{grid-template-columns:13fr 13fr;height:100%;display:grid;overflow:hidden}.tool-card-with-tool-area-hidden-HeT8Pd{grid-template-columns:26fr!important}.tool-hidden-hXM6B1{display:none}.config-left-Yrdzlh{flex-shrink:0;justify-content:flex-start;align-items:center;display:flex}.display-none-xiQXc_{display:none!important}",""]),a.locals={wrapper:"wrapper-P0c82V","layout-hotzone":"layout-hotzone-q3lRf4",layoutHotzone:"layout-hotzone-q3lRf4",text:"text-gNz2wJ",container:"container-VD4ZJT",store:"store-p2CEBx",spin:"spin-rDV5ZI","develop-area":"develop-area-pLWbP7",developArea:"develop-area-pLWbP7","develop-area-scroll":"develop-area-scroll-FPIfk_",developAreaScroll:"develop-area-scroll-FPIfk_","setting-area":"setting-area-HhHNX9",settingArea:"setting-area-HhHNX9","setting-title-block":"setting-title-block-W215sG",settingTitleBlock:"setting-title-block-W215sG","message-area":"message-area-z_X4gq",messageArea:"message-area-z_X4gq","playground-neat":"playground-neat-xqJerk",playgroundNeat:"playground-neat-xqJerk",title:"title-w7QTwd","sheet-title-node-cover":"sheet-title-node-cover-yMCrad",sheetTitleNodeCover:"sheet-title-node-cover-yMCrad","bj-cover":"bj-cover-powtB8",bjCover:"bj-cover-powtB8","bj-img-cover":"bj-img-cover-raS8HS",bjImgCover:"bj-img-cover-raS8HS","bj-single-cover":"bj-single-cover-XVxLnC",bjSingleCover:"bj-single-cover-XVxLnC","border-cover":"border-cover-eX9tLS",borderCover:"border-cover-eX9tLS","spin-wrapper":"spin-wrapper-IzLXPt",spinWrapper:"spin-wrapper-IzLXPt","top-level":"top-level-Az_JQK",topLevel:"top-level-Az_JQK","sheet-view-new-header":"sheet-view-new-header-mMtDRv",sheetViewNewHeader:"sheet-view-new-header-mMtDRv","sheet-view-left-header":"sheet-view-left-header-RV1IPt",sheetViewLeftHeader:"sheet-view-left-header-RV1IPt","icon-button-16":"icon-button-16-qNTthM",iconButton16:"icon-button-16-qNTthM","tip-text":"tip-text-sGQwSX",tipText:"tip-text-sGQwSX","sheet-view-hidden":"sheet-view-hidden-W3DG_b",sheetViewHidden:"sheet-view-hidden-W3DG_b","left-sheet-config":"left-sheet-config-hdxMoT",leftSheetConfig:"left-sheet-config-hdxMoT","wrapper-single-with-tool-area-hidden":"wrapper-single-with-tool-area-hidden-kbX65k",wrapperSingleWithToolAreaHidden:"wrapper-single-with-tool-area-hidden-kbX65k","tool-card":"tool-card-GONXar",toolCard:"tool-card-GONXar","tool-card-with-tool-area-hidden":"tool-card-with-tool-area-hidden-HeT8Pd",toolCardWithToolAreaHidden:"tool-card-with-tool-area-hidden-HeT8Pd","tool-hidden":"tool-hidden-hXM6B1",toolHidden:"tool-hidden-hXM6B1","config-left":"config-left-Yrdzlh",configLeft:"config-left-Yrdzlh","display-none":"display-none-xiQXc_",displayNone:"display-none-xiQXc_"},t.Z=a},110614:function(e,t,n){var o=n(125161),r=n.n(o),i=n(404442),a=n.n(i)()(r());a.push([e.id,".mask-O9yckq{pointer-events:none;z-index:10;background:linear-gradient(rgba(99,99,99,.4) 0%,rgba(99,99,99,0) 100%);width:100%;height:216px;position:absolute}",""]),a.locals={mask:"mask-O9yckq"},t.Z=a},386575:function(e,t,n){var o=n(125161),r=n.n(o),i=n(404442),a=n.n(i)()(r());a.push([e.id,".container-box-shadow-ftVmyf{z-index:1;box-shadow:0 2px 6px rgba(0,0,0,.08),0 4px 12px rgba(0,0,0,.04)}",""]),a.locals={"container-box-shadow":"container-box-shadow-ftVmyf",containerBoxShadow:"container-box-shadow-ftVmyf"},t.Z=a},115806:function(e,t,n){var o=n(125161),r=n.n(o),i=n(404442),a=n.n(i)()(r());a.push([e.id,".image-W6L0lo img{-o-object-fit:cover;object-fit:cover;width:100%;height:100%}",""]),a.locals={image:"image-W6L0lo"},t.Z=a},693032:function(e,t,n){var o=n(125161),r=n.n(o),i=n(404442),a=n.n(i)()(r());a.push([e.id,".interrupt-message-box-K1c6YG{margin-top:8px}",""]),a.locals={"interrupt-message-box":"interrupt-message-box-K1c6YG",interruptMessageBox:"interrupt-message-box-K1c6YG"},t.Z=a},840918:function(e,t,n){var o=n(125161),r=n.n(o),i=n(404442),a=n.n(i)()(r());a.push([e.id,".interrupt-message-box-Lpue4t{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-sizing:border-box;word-break:break-word;flex-direction:column;width:100%;font-weight:400;line-height:16px;display:flex;overflow:hidden}.interrupt-message-box-Lpue4t .interrupt-message-action-IIr8DA{color:var(--fg-coze-fg-secondary,rgba(6,7,9,.5));padding:6px}.interrupt-message-box-Lpue4t .interrupt-message-content-PWheVJ{color:var(--fg-coze-fg-primary,rgba(6,7,9,.8));background-color:var(--bg-coze-bg-max,#fff);padding:12px}.interrupt-message-box-Lpue4t .interrupt-message-content-PWheVJ .interrupt-message-content-btns-Buc7C9{justify-content:flex-end;margin-top:16px;display:flex}",""]),a.locals={"interrupt-message-box":"interrupt-message-box-Lpue4t",interruptMessageBox:"interrupt-message-box-Lpue4t","interrupt-message-action":"interrupt-message-action-IIr8DA",interruptMessageAction:"interrupt-message-action-IIr8DA","interrupt-message-content":"interrupt-message-content-PWheVJ",interruptMessageContent:"interrupt-message-content-PWheVJ","interrupt-message-content-btns":"interrupt-message-content-btns-Buc7C9",interruptMessageContentBtns:"interrupt-message-content-btns-Buc7C9"},t.Z=a},796659:function(e,t){t.Z=function(e,t,n){if("function"!=typeof e)throw TypeError("Expected a function");return setTimeout(function(){e.apply(void 0,n)},t)}},747514:function(e,t,n){var o=n(796659),r=(0,n(61910).Z)(function(e,t){return(0,o.Z)(e,1,t)});t.Z=r}}]);
//# sourceMappingURL=4108.e1c8d227.js.map